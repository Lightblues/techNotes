{"config":{"lang":["ja"],"separator":"[\\s\\-\\.]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u6280\u672f\u7b14\u8bb0 by @Easonshi","text":"<p>Inspired by techNotes by Lijun Wang.</p> <p>Built with MkDocs, with theme mkdocs-material. </p>"},{"location":"Linux/Linux-configure-make-install-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/","title":"\u7f16\u8bd1\u5b89\u88c5\u8f6f\u4ef6","text":"<p>\u4e00\u822c\u7f16\u8bd1\u5b89\u88c5\u8f6f\u4ef6\u6d89\u53ca\u5230\u7684\u547d\u4ee4</p> <pre><code>./configure  # \u901a\u8fc7 --prefix \u6307\u5b9a\u5b89\u88c5\u76ee\u5f55\nmake\nmake install # \u590d\u5236\u76f8\u5173\u6587\u4ef6\u5230\u9700\u8981\u5b89\u88c5\u7684\u76ee\u5f55\n</code></pre> <ul> <li>\u53c2\u89c1 configure\u3001 make\u3001 make install \u80cc\u540e\u7684\u539f\u7406(\u7ffb\u8bd1)</li> </ul>"},{"location":"Linux/Linux-configure-make-install-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/#gcc","title":"\u793a\u4f8b: \u5b89\u88c5 gcc \u5230\u7528\u6237\u76ee\u5f55","text":"<ul> <li>from https://gcc.gnu.org/wiki/InstallingGCC</li> <li>\u4e0b\u8f7d: https://github.com/gcc-mirror/gcc</li> </ul> <p>\u5047\u8bbe\u6ca1\u6709 sudo, \u4e0b\u4f8b\u5b89\u88c5 gcc \u5230\u7528\u6237\u76ee\u5f55\u4e0b</p> <pre><code>tar xzf gcc-4.6.2.tar.gz\ncd gcc-4.6.2\n./contrib/download_prerequisites\ncd ..\nmkdir objdir    # \u7f16\u8bd1\u76ee\u6807\u76ee\u5f55\ncd objdir\n$PWD/../gcc-4.6.2/configure --prefix=$HOME/GCC-4.6.2 --enable-languages=c,c++,fortran,go\nmake -j 16      # If your computer has multiple processors or cores you can speed it up by building in parallel using make -j 2 (or a higher number for more parallelism).\nmake install    # \u5c06\u53ef\u6267\u884c\u6587\u4ef6\u3001\u7b2c\u4e09\u65b9\u4f9d\u8d56\u5305\u548c\u6587\u6863\u590d\u5236\u5230\u6b63\u786e\u7684\u8def\u5f84\n\ncd $HOME/GCC-4.6.2\nbin/gcc --version   # \u6ce8\u610f\u662f\u5728\u5b89\u88c5\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\u4e0b\n</code></pre>"},{"location":"Linux/Linux-configure-make-install-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/#_1","title":"\u76f8\u5173\u547d\u4ee4\u8bf4\u660e","text":"<ol> <li>\u914d\u7f6e</li> </ol> <p><code>configure</code>\u00a0\u811a\u672c\u8d1f\u8d23\u5728\u4f60\u4f7f\u7528\u7684\u7cfb\u7edf\u4e0a\u51c6\u5907\u597d\u8f6f\u4ef6\u7684\u6784\u5efa\u73af\u5883\u3002\u786e\u4fdd\u63a5\u4e0b\u6765\u7684\u6784\u5efa\u548c\u5b89\u88c5\u8fc7\u7a0b\u6240\u9700\u8981\u7684\u4f9d\u8d56\u51c6\u5907\u597d\uff0c\u5e76\u4e14\u641e\u6e05\u695a\u4f7f\u7528\u8fd9\u4e9b\u4f9d\u8d56\u9700\u8981\u7684\u4e1c\u897f\u3002</p> <p>Unix \u7a0b\u5e8f\u4e00\u822c\u662f\u7528 C \u8bed\u8a00\u5199\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u901a\u5e38\u9700\u8981\u4e00\u4e2a C \u7f16\u8bd1\u5668\u53bb\u6784\u5efa\u5b83\u4eec\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u00a0<code>configure</code>\u00a0\u8981\u505a\u7684\u5c31\u662f\u786e\u4fdd\u7cfb\u7edf\u4e2d\u6709 C \u7f16\u8bd1\u5668\uff0c\u5e76\u786e\u5b9a\u5b83\u7684\u540d\u5b57\u548c\u8def\u5f84\u3002</p> <ol> <li>\u6784\u5efa</li> </ol> <p>\u5f53\u00a0<code>configure</code>\u00a0\u914d\u7f6e\u5b8c\u6bd5\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u00a0<code>make</code>\u00a0\u547d\u4ee4\u6267\u884c\u6784\u5efa\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u6267\u884c\u5728\u00a0<code>Makefile</code>\u00a0\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u4e00\u7cfb\u5217\u4efb\u52a1\u5c06\u8f6f\u4ef6\u6e90\u4ee3\u7801\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\u3002</p> <p>\u4f60\u4e0b\u8f7d\u7684\u6e90\u7801\u5305\u4e00\u822c\u6ca1\u6709\u4e00\u4e2a\u6700\u7ec8\u7684\u00a0<code>Makefile</code>\u00a0\u6587\u4ef6\uff0c\u4e00\u822c\u662f\u4e00\u4e2a\u6a21\u7248\u6587\u4ef6\u00a0<code>Makefile.in</code>\u00a0\u6587\u4ef6\uff0c\u7136\u540e\u00a0<code>configure</code>\u00a0\u6839\u636e\u7cfb\u7edf\u7684\u53c2\u6570\u751f\u6210\u4e00\u4e2a\u5b9a\u5236\u5316\u7684\u00a0<code>Makefile</code>\u00a0\u6587\u4ef6\u3002</p> <ol> <li>\u5b89\u88c5</li> </ol> <p>\u73b0\u5728\u8f6f\u4ef6\u5df2\u7ecf\u88ab\u6784\u5efa\u597d\u5e76\u4e14\u53ef\u4ee5\u6267\u884c\uff0c\u63a5\u4e0b\u6765\u8981\u505a\u7684\u5c31\u662f\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u590d\u5236\u5230\u6700\u7ec8\u7684\u8def\u5f84\u3002<code>make install</code>\u00a0\u547d\u4ee4\u5c31\u662f\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u3001\u7b2c\u4e09\u65b9\u4f9d\u8d56\u5305\u548c\u6587\u6863\u590d\u5236\u5230\u6b63\u786e\u7684\u8def\u5f84\u3002</p> <p>\u8fd9\u901a\u5e38\u610f\u5473\u7740\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u88ab\u590d\u5236\u5230\u67d0\u4e2a\u00a0<code>PATH</code>\u00a0\u5305\u542b\u7684\u8def\u5f84\uff0c\u7a0b\u5e8f\u7684\u8c03\u7528\u6587\u6863\u88ab\u590d\u5236\u5230\u67d0\u4e2a\u00a0<code>MANPATH</code>\u00a0\u5305\u542b\u7684\u8def\u5f84\uff0c\u8fd8\u6709\u7a0b\u5e8f\u4f9d\u8d56\u7684\u6587\u4ef6\u4e5f\u4f1a\u88ab\u5b58\u653e\u5728\u5408\u9002\u7684\u8def\u5f84\u3002</p> <p>\u56e0\u4e3a\u5b89\u88c5\u8fd9\u4e00\u6b65\u4e5f\u662f\u88ab\u5b9a\u4e49\u5728\u00a0<code>Makefile</code>\u00a0\u4e2d\uff0c\u6240\u4ee5\u7a0b\u5e8f\u5b89\u88c5\u7684\u8def\u5f84\u53ef\u4ee5\u901a\u8fc7\u00a0<code>configure</code>\u00a0\u547d\u4ee4\u7684\u53c2\u6570\u6307\u5b9a\uff0c\u6216\u8005\u00a0<code>configure</code>\u00a0\u901a\u8fc7\u7cfb\u7edf\u53c2\u6570\u51b3\u5b9a\u3002</p> <p>\u5982\u679c\u8981\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u5b89\u88c5\u5728\u7cfb\u7edf\u8def\u5f84\uff0c\u6267\u884c\u8fd9\u6b65\u9700\u8981\u8d4b\u4e88\u76f8\u5e94\u7684\u6743\u9650\uff0c\u4e00\u822c\u662f\u901a\u8fc7 sudo\u3002</p>"},{"location":"Linux/Linux-configure-make-install-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/#autotools-autoconfig-automake","title":"\u4f7f\u7528 autotools \u6253\u5305\u53d1\u5e03 (autoconfig, automake)","text":"<ul> <li><code>configure</code> \u811a\u672c\u6839\u636e\u7cfb\u7edf\u4fe1\u606f\u5c06\u00a0<code>Makefile.in</code>\u00a0\u6a21\u7248\u6587\u4ef6\u8f6c\u6362\u4e3a\u00a0<code>Makefile</code>\u6587\u4ef6<ul> <li>\u7136\u800c, <code>configure</code> \u548c <code>Makefile.in</code> \u8fd9\u4e24\u4e2a\u6587\u4ef6\u5f88\u5197\u957f, \u4e00\u822c\u662f\u81ea\u52a8\u751f\u6210\u7684</li> </ul> </li> <li>\u662f\u901a\u8fc7\u4e00\u4e2a\u53eb\u505a\u00a0<code>autotools</code>\u00a0\u7684\u5de5\u5177\u96c6\u6253\u5305\u7684\u3002\u8fd9\u4e2a\u5de5\u5177\u96c6\u5305\u542b\u00a0<code>autoconf</code>\u00a0\u3001<code>automake</code>\u00a0\u7b49\u5de5\u5177<ul> <li>\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u63cf\u8ff0\u6587\u4ef6\u00a0<code>configure.ac</code>\u00a0\u6765\u63cf\u8ff0 configure \u9700\u8981\u505a\u7684\u4e8b\u60c5\u3002<code>configure.ac</code>\u00a0\u4f7f\u7528 m4sh \u5199\uff0cm4sh \u662f\u00a0<code>m4</code>\u00a0\u5b8f\u547d\u4ee4\u548c shell \u811a\u672c\u7684\u7ec4\u5408\u3002</li> <li>\u53ef\u4ee5\u5148\u5199\u4e00\u4e2a\u00a0<code>Makefile.am</code>\u00a0\u811a\u672c\uff0c\u7136\u540e\u901a\u8fc7\u00a0<code>automake</code>\u00a0\u5de5\u5177\u751f\u6210\u00a0<code>Makefile.in</code>\u00a0\u811a\u672c</li> </ul> </li> </ul> <p><code>.ac</code> autoconfig \u914d\u7f6e (\u76f8\u5173\u8bf4\u660e\u89c1\u539f\u6587)</p> <pre><code># configure.ac\nAC_INIT([helloworld], [0.1], [george@thoughtbot.com])\nAM_INIT_AUTOMAKE\nAC_PROG_CC\nAC_CONFIG_FILES([Makefile])\nAC_OUTPUT\n</code></pre> <p><code>.am</code> automake \u914d\u7f6e</p> <pre><code># Makefile.am\nAUTOMAKE_OPTIONS = foreign\nbin_PROGRAMS = helloworld\nhelloworld_SOURCES = main.c\n</code></pre> <p>\u7136\u540e</p> <pre><code># \u4e3a autotools \u51c6\u5907 m4 \u811a\u672c\u73af\u5883\naclocal\n# \u4f7f\u7528\u00a0`autoconf`\u00a0\u5c06\u00a0`configure.ac`\u00a0\u751f\u6210\u00a0`configure`\u00a0\u811a\u672c\uff0c\u7528\u00a0`automake`\u00a0\u5c06\u00a0`Makefile.am`\u00a0\u751f\u6210\u4e3a\u00a0`Makefile.in`\u00a0\u811a\u672c\nautoconf\nautomake --add-missing\n\nmake distcheck # \u4f7f\u7528 Makefile \u6784\u5efa\u4e00\u4e2a\u53d1\u5e03\u8f6f\u4ef6\u5e76\u6d4b\u8bd5\n</code></pre> <p>\u5b89\u88c5</p> <pre><code>./configure # \u751f\u6210 Makefile \u811a\u672c\n# \u6784\u5efa\u8f6f\u4ef6\nmake\n# make dist # \u751f\u6210 distribution (.tar.gz)\nmake install # \u4f7f\u7528 Makefile \u5b89\u88c5\u8f6f\u4ef6\n</code></pre>"},{"location":"Linux/Linux-maintain/","title":"Linux \u7cfb\u7edf\u7ef4\u62a4","text":"<p>TODO: \u5efa\u7acb\u4e00\u4e2a\u7d22\u5f15</p>"},{"location":"Linux/Linux-maintain/#_1","title":"\u76f8\u5173\u547d\u4ee4","text":"<pre><code>ls /dev/sd*\n\n# fdisk\nsudo fdisk -l\nsudo fdisk /dev/sdb    # \u8f93\u5165 m\uff0c\u67e5\u770b\u547d\u4ee4\u5e2e\u52a9\n\nlsblk -f\n\n# mkfs\nsudo mkfs.ext4 /dev/sdb5 # \u5c06/dev/sdb5\u683c\u5f0f\u5316\u6210ext4\u6587\u4ef6\u7cfb\u7edf\n</code></pre>"},{"location":"Linux/Linux-maintain/#_2","title":"\u67e5\u770b\u7cfb\u7edf\u4fe1\u606f","text":"<pre><code># \u7cfb\u7edf\u4fe1\u606f\nuname -a\n# \u53d1\u884c\u7248\u672c\ncat /etc/os-release\n</code></pre>"},{"location":"Linux/Linux-maintain/#_3","title":"\u663e\u5361","text":"<pre><code>lshw -numeric -C display\nhwinfo --gfxcard --short # \u9700\u8981\u5b89\u88c5\n# or \u8fd8\u53ef\u4ee5\u663e\u793a\u63a8\u8350\u7684\u9a71\u52a8\u7248\u672c\nubuntu-drivers devices\n</code></pre>"},{"location":"Linux/Linux-maintain/#lm_sensor-todo","title":"\u68c0\u6d4b lm_sensor TODO","text":"<ul> <li>repo https://github.com/lm-sensors/lm-sensors</li> <li>\u53c2\u89c1 https://wiki.archlinux.org/title/Lm_sensors</li> </ul>"},{"location":"Linux/Linux-maintain/#_4","title":"\u9a71\u52a8","text":"<pre><code># \u9a71\u52a8\u64cd\u4f5c\ninsmod / modprobe \u00a0\u52a0\u8f7d\u9a71\u52a8  \nrmmod \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u5378\u8f7d\u9a71\u52a8  \nlsmod \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u67e5\u770b\u7cfb\u7edf\u4e2d\u6240\u6709\u5df2\u7ecf\u88ab\u52a0\u8f7d\u4e86\u7684\u6240\u6709\u7684\u6a21\u5757\u4ee5\u53ca\u6a21\u5757\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb  \nmodinfo \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u83b7\u5f97\u6a21\u5757\u7684\u4fe1\u606f\n\n# \u67e5\u770b\u5df2\u7ecf\u52a0\u8f7d\u7684\u9a71\u52a8\u6a21\u5757\u7684\u4fe1\u606f\nlsmod              \u80fd\u591f\u663e\u793a\u9a71\u52a8\u7684\u5927\u5c0f\u4ee5\u53ca\u88ab\u8c01\u4f7f\u7528  \ncat /proc/modules  \u80fd\u591f\u663e\u793a\u9a71\u52a8\u6a21\u5757\u5927\u5c0f\u3001\u5728\u5185\u6838\u7a7a\u95f4\u4e2d\u7684\u5730\u5740\ncat /proc/devices  \u53ea\u663e\u793a\u9a71\u52a8\u7684\u4e3b\u8bbe\u5907\u53f7\uff0c\u4e14\u662f\u5206\u7c7b\u663e\u793a \nls /sys/modules   \u4e0b\u9762\u5b58\u5728\u5bf9\u5e94\u7684\u9a71\u52a8\u7684\u76ee\u5f55\uff0c\u76ee\u5f55\u4e0b\u5305\u542b\u9a71\u52a8\u7684\u5206\u6bb5\u4fe1\u606f\n\ncat /proc/driver/nvidia/version # \u67e5\u770b\u5185\u6838\u9a71\u52a8\u7248\u672c\n</code></pre> <p>from here</p>"},{"location":"Linux/Linux-maintain/#_5","title":"\u663e\u5361\u9a71\u52a8","text":"<pre><code># \u67e5\u770b\ncat /proc/driver/nvidia/version\n# sudo rmmod nvidia_drm nvidia_modeset nvidia \u5b9e\u73b0\u5378\u8f7d\u4e86\u5185\u6838\u9a71\u52a8\uff1f\nmodinfo nvidia\n</code></pre>"},{"location":"Linux/Linux-maintain/#_6","title":"\u65f6\u95f4","text":"<pre><code>date -R     # \u67e5\u770b\u65f6\u533a\n</code></pre>"},{"location":"Linux/Linux-maintain/#_7","title":"\u8bbe\u7f6e\u65f6\u533a","text":"<pre><code>apt-get install tzdata tzselect\n</code></pre> <p>\u6ce8\u610f\u5982\u679c\u6ca1\u6709 <code>tzdata</code> \u4f1a\u62a5\u7f3a\u5c11 <code>/usr/share/zoneinfo/iso3166.tab</code> \u7684\u9519\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u7cfb\u7edf\u65f6\u533a\u914d\u7f6e\uff08\u4f3c\u4e4e\uff09\u4ec5\u4ec5\u4f9d\u8d56\u4e8e <code>/etc/localtime</code> \u6587\u4ef6\uff0c\u5728\u6ca1\u6709\u5b89\u88c5 tzdata \u7684\u60c5\u51b5\u4e0b\uff0c\u4ece\u5176\u4ed6\u7684\u673a\u5668\u4e0a\u590d\u5236\u65f6\u533a\u6587\u4ef6\u4e3a <code>/etc/localtime</code> \u5373\u53ef\u8fdb\u884c\u8bbe\u7f6e\u3002</p> <pre><code>cp /usr/share/zoneinfo/Asia/Shanghai  /etc/localtime\n</code></pre>"},{"location":"Linux/Linux-maintain/#_8","title":"\u65e5\u5fd7","text":"<pre><code>dmesg   # \u67e5\u770b\u542f\u52a8\u4fe1\u606f\n</code></pre>"},{"location":"Linux/Linux-maintain/#show-listen-ports","title":"Show LISTEN ports \u67e5\u770b\u76d1\u542c\u7aef\u53e3","text":"<ul> <li>Linux<ul> <li>How to check if port is in use on Linux or Unix</li> </ul> </li> </ul> <pre><code>lsof -nP -i    #\u53c2\u89c1 macOS\nnetstat -tulpn | grep LISTEN\n\n# 20210731 \u66f4\u65b0\uff1a\u4f3c\u4e4e\u4e0b\u9762\u7684\u8bb0\u4f4f\u5c31\u884c\nlsof -i:8080\n</code></pre> <ul> <li>macOS<ul> <li>Who is listening on a given TCP port on Mac OS X?</li> <li>\u7528 <code>lsof</code><ul> <li>lsof - list open files</li> <li><code>-i i   select by IPv[46] address: [46][proto][@host|addr][:svc_list|port_list]</code>\uff0c\u6ce8\u610f <code>-i</code> \u6307\u5b9aTCP\u534f\u8bae\u540e\u6709\u7aef\u53e3\uff0c\u53ef\u4ee5\u653e\u6700\u540e\u4e00\u4e2a\u53c2\u6570 <code>-nPi</code></li> <li><code>-P no port names</code></li> <li><code>-n no host names</code> \u5982\u679c\u4e0d\u52a0\u4f1a\u5f88\u6162</li> </ul> </li> </ul> </li> </ul> <pre><code>lsof -nP -i | grep LISTEN        # \u6307\u5b9a n \u901f\u5ea6\u6bd4\u8f83\u5feb\n</code></pre>"},{"location":"Linux/Linux-maintain/#_9","title":"\u5236\u4f5c\u542f\u52a8\u76d8","text":"<pre><code>su\n# \u4e24\u4e2a\u5206\u533a\u5206\u522b\u683c\u5f0f\u5316\u4e3a NTFS \u548c FAT32\nfdisk -l  # \u68c0\u67e5U\u76d8\uff0c\u4f8b\u5982\u662f /dev/sdd\nfdisk /dev/sdd # \u5206\u533a\uff0c\u4e24\u4e2a\uff0c\u755930M\u7ed9\u7b2c\u4e8c\u4e2a\u5206\u533a\nyum install ntfsprogs # \u5b89\u88c5\u5904\u7406NTFS\u7684\u8f6f\u4ef6\nmkfs.ntfs /dev/sdd1  # \u901f\u5ea6\u6bd4\u8f83\u6162\nmkfs.vfat -F 32 /dev/sdc\n\nwget https://software-download.microsoft.com/sg/Win10_21H1_Chinese(Simplified)_x64.iso?t=1e1d7d9d-a5d6-4c51-aa8d-38b35c627f1d&amp;e=1632986672&amp;h=53a28504164261a06e63f0c446241fc1\nwget https://github.com/pbatard/rufus/blob/master/res/uefi/uefi-ntfs.img\n\nsudo dd if=Win10_21H1_Chinese(Simplified)_x64.iso of=/dev/sdd1 bs=4M status=progress\nsudo dd if=uefi-ntfs.img of=/dev/sdd2  # \u4e5f\u53ef\u4ee5\u6302\u5728\u4e24\u4e2a\uff0c\u7136\u540e\u590d\u5236\u8fc7\u53bb\uff0c\u6ce8\u610f\u9700\u8981\u628a img \u4e0b\u7684\u9690\u85cf\u6587\u4ef6\u4e5f\u590d\u5236\u8fc7\u53bb\u4fdd\u7559\u6587\u4ef6\u7ed3\u6784\uff08\u800c\u975e\u4ec5\u4ec5\u662f EFI \u6587\u4ef6\u5939\uff09\n</code></pre> <p>from \u5728Linux\u4e0b\u5236\u4f5cLinux&amp;windows\u542f\u52a8\u76d8</p>"},{"location":"Linux/Linux-maintain/#lvm","title":"\u6302\u8f7dLVM","text":"<p>\u5728Ubuntu\u4e0b\u6302\u8f7d CentOS \u4e2d\u7684LVM</p> <pre><code># \u5b89\u88c5lvm2\u8f6f\u4ef6\nsudo apt-get install\u00a0 lvm2\n#  \u626b\u63cf LVM \u627e\u5230 VG\nsudo vgscan\n# \u6fc0\u6d3b\nsudo vgchange -ay VolGroup01\nsudo lvs # \u5217\u51fa\n# \u6302\u8f7d\nsudo mount /dev/VolGroup01/LogVol00\u00a0\u00a0 /mnt\n</code></pre>"},{"location":"Linux/Linux-maintain/#_10","title":"\u7cfb\u7edf\u8fc1\u79fb","text":"<p>\u5c1d\u8bd5\u8fc7\u4e00\u6b21</p>"},{"location":"Linux/Linux-maintain/#arch-linux","title":"Arch Linux \u5c06\u7cfb\u7edf\u8f6c\u79fb\u5230\u65b0\u7684\u5206\u533a","text":"<p>\u8fd9\u91cc\u5c06\u897f\u6570\u76d8\u4e0a(nvme0) \u5b89\u88c5\u7684 Arch \u7cfb\u7edf\u8f6c\u79fb\u5230\u4e09\u661f (nvme1) \u7684\u4e00\u4e2a\u5206\u533a\u4e0b, EFI \u7edf\u4e00\u7ba1\u7406.</p> <ul> <li>\u4e3b\u6559\u7a0b<ul> <li>Arch \u8fc1\u79fb\u5230\u53e6\u5916\u7684\u786c\u76d8 migrate installation</li> <li>Arch \u5b89\u88c5\u6559\u7a0b Install</li> <li>UEFI \u7edf\u4e00\u53ef\u6269\u5c55\u56fa\u4ef6\u754c\u9762. \u4f8b\u5982\u5176\u4e2d\u63d0\u5230\u4f7f\u7528 <code>efibootmgr</code> \u6765\u64cd\u4f5c UEFI \u56fa\u4ef6\u542f\u52a8\u7ba1\u7406\u5668\u8bbe\u7f6e, \u4f3c\u4e4e\u5f88\u8d5e!</li> <li>\u53e6\u5916\u53c2\u89c1 Arch Linux \u7cfb\u7edf\u8fc1\u79fb</li> </ul> </li> <li>\u5177\u4f53\u5305\u62ec<ul> <li>Rsync \u5e26\u6709\u6743\u9650\u5168\u76d8\u62f7\u8d1d</li> <li>\u5206\u533a, partition</li> <li>\u6587\u4ef6\u7cfb\u7edf file system</li> <li>fstab</li> <li>GRUB</li> </ul> </li> <li>\u5176\u4ed6\u7684<ul> <li>\u5f15\u5bfc\u8fc7\u7a0b Arch Boot Process</li> <li>\u5305\u7ba1\u7406 Pacman</li> <li>\u7f16\u8f91\u5668 Vim</li> <li>\u8f6f\u4ef6\u5217\u8868 List of Applications</li> </ul> </li> </ul> <p>\u7b80\u5355\u8bb0\u5f55\u76f8\u5173\u547d\u4ee4</p> <pre><code># 1. \u5c06\u7cfb\u7edf\u590d\u5236\u5230\u65b0\u9a71\u52a8\u5668\n# \u5206\u533a\uff0c\u6784\u5efa\u6587\u4ef6\u7cfb\u7edf\nsudo fdisk /dev/nvme1n1\nlsblk -f # --fs \u8f93\u51fa\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\nsudo mkfs.ext4 /dev/nvme1n1p5\n# \u7528 rsync \u5c06\u5168\u76d8\u590d\u5236\u5230\u65b0\u5206\u533a\nsudo pacman -Syy rsync\nrsync -aAXHv --exclude={\"/dev/*\",\"/proc/*\",\"/sys/*\",\"/tmp/*\",\"/run/*\",\"/mnt/*\",\"/media/*\",\"/lost+found\"} / /mnt\nlsblk -f # \u68c0\u67e5\u4e00\u4e0b\n\n# 2. \u66f4\u65b0fstab\nsudo mount /dev/nvme1n1p5 /mnt\nsudo arch-chroot /mnt\n# \u8fd9\u91cc\u8fdb\u4e86\u65b0\u7cfb\u7edf\u7684\u73af\u5883\uff0c\u751f\u6210\u65b0\u7684 fstab, \u56e0\u6b64\u9700\u8981\u6839\u636e\u65b0\u7cfb\u7edf\u4e0b\u7684\u6302\u8f7d\u60c5\u51b5\u6302\u8f7d\u76f8\u5e94\u7684\u78c1\u76d8\nmount /dev/nvme1n1p2 /efi # \u8fd9\u5757\u78c1\u76d8\u4e0a\u7684 EFI \u5206\u533a\nsudo pacman -S --needed arch-install-scripts # \u5305\u62ec arch-chroot, genfstab \u7b49\ngenfstab -U / &gt;&gt; /etc/fstab # \u5982\u679c\u662f\u76f4\u63a5 mount \u7684\u8bdd\u5e94\u8be5\u662f genfstab -U /mnt &gt;&gt; /mnt/etc/fstab\n\n# 3. \u91cd\u65b0\u5b89\u88c5\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f grub\n# \u5b89\u88c5\uff0c\u8fd9\u91cc\u7684 esp \u5373EFI\u7cfb\u7edf\u5206\u533a\uff0c\u4f8b\u5982\u4e0a\u9762 mount /dev/nvme1n1p2 /efi \u5c31\u662f\u7528 /efi\ngrub-install --target=x86_64-efi --efi-directory=[esp] --bootloader-id=GRUB\n# \u4e0b\u9762\u914d\u7f6e grub\uff0c\u91c7\u7528 grub-mkconfig \u81ea\u52a8\u751f\u6210 (\u4e5f\u53ef\u4ee5\u624b\u52a8\u5199)\n# \u591a\u7cfb\u7edf\u5f15\u5bfc\uff0c\u91c7\u7528 os-prober \nsudo pacman -S os-prober \n# \u6302\u8f7d\u5176\u4ed6\u7cfb\u7edf\u6240\u5728\u5206\u533a; \u7ecf\u6d4b\u8bd5 Windows \u4e5f\u53ef\u4ee5\u8bc6\u522b\nsudo mount /dev/nvme1n1p6 /root/sysA\ngrub-mkconfig -o /boot/grub/grub.cfg\n\n# \u5b8c\u6210!\nsudo reboot\n</code></pre>"},{"location":"Linux/Linux-maintain/#_11","title":"\u5de5\u5177","text":""},{"location":"Linux/Linux-maintain/#_12","title":"\u683c\u5f0f\u8f6c\u6362\u5de5\u5177","text":"<p>\u6bd4\u8f83\u8ba8\u538c\u7684\u662f doc \u683c\u5f0f\u4e0d\u597d\u5904\u7406\uff1bwin \u5e73\u53f0\u53ef\u4ee5\u5229\u7528 Python \u6253\u5f00 Word \u53e6\u5b58\u4e3a\u6765\u89e3\u51b3\uff0cLinux \u5e73\u53f0\u5c31\u4e0d\u592a\u597d\u641e\u3002</p> <ul> <li><code>Pandoc</code> \u4e0d\u652f\u6301doc\uff0c\u5bf9\u4e8edocx\u53ef\u8bc6\u522b\u8868\u683c\u7b49\u683c\u5f0f</li> </ul> <pre><code>pandoc -i some.docx -t plain &gt; some.txt\n</code></pre> <ul> <li>antiword \u53ef\u4ee5 doc2docx \uff0c\u4f46\u662f\u8f93\u51fa\u7684\u597d\u50cf\u90fd\u662f\u56fa\u5b9a\u6bcf\u884c\u5b57\u6570\u7684\u683c\u5f0f\uff1f\u6ca1\u6cd5\u4fdd\u7559\u6574\u6bb5\u5185\u5bb9</li> <li>docx2txt \u652f\u6301docx\u8f6ctxt \u683c\u5f0f\u6ca1\u6709pandoc\u597d\uff1b\u4e5f\u4e0d\u652f\u6301doc</li> <li>textract \u652f\u6301\u7684\u683c\u5f0f\u4f3c\u4e4e\u633a\u591a\uff0c\u4f46\u5904\u7406doc\u540e\u53f0\u8c03\u7528\u7684\u662fantiword</li> </ul>"},{"location":"Linux/Linux-maintain/#debug","title":"Debug","text":""},{"location":"Linux/Linux-maintain/#_13","title":"\u81ea\u52a8\u6302\u8f7d","text":"<p>\u7f16\u8f91 <code>/etc/fstab</code> \u6587\u4ef6\u5b9e\u73b0\u81ea\u52a8\u6302\u8f7d</p> <pre><code>sudo gedit /etc/fstab\n\n# \u5728\u5df2\u6709\u5185\u5bb9\u7684\u540e\u9762\u65b0\u8d77\u4e00\u884c\uff0c\u5199\u5165\u4e0b\u9762\u4e86\u5185\u5bb9\uff1b\n# \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u4f60\u8981\u6302\u8f7d\u7684\u5206\u533a(/dev/sdb5)\uff1b\n# \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u6302\u8f7d\u7684\u4f4d\u7f6e\uff08/sdb5\u6587\u4ef6\u5939\u5fc5\u987b\u5b58\u5728\uff09\uff1b\n# \u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u5206\u533a\u6587\u4ef6\u7c7b\u578b(ext4)\uff0c\u683c\u5f0f\u5316\u7684\u65f6\u5019\u7684\u90a3\u4e2a\u7c7b\u578b\uff0c\u540e\u9762\u7684\u53c2\u6570\u9ed8\u8ba4\u5373\u53ef\uff1b\n/dev/sdb5   /home/qing/sdb5  ext4   defaults    0  0\n</code></pre>"},{"location":"Linux/Linux-maintain/#linux_1","title":"\u5236\u4f5c\uff08Linux\uff09\u542f\u52a8\u76d8","text":"<p>\u627e\u5230U\u76d8\u8bbe\u5907\u53f7\u540e\uff08\u53ef\u7528 <code>sudo fdisk -l</code> \u6216 <code>sudo lsblk</code> \u7b49\uff09</p> <pre><code>sudo dd if=~/ubuntu-16.04-desktop-amd64.iso of=/dev/sdc status=progress oflag=sync\n</code></pre> <ul> <li>status=progress \u7528\u6765\u8f93\u51fa\u523b\u5f55\u8fc7\u7a0b\u4e2d\u7684\u4fe1\u606f\u3002</li> <li>oflag=sync \u7528\u6765\u63a7\u5236\u5199\u5165\u6570\u636e\u65f6\u7684\u884c\u4e3a\u7279\u5f81\u3002\u786e\u4fdd\u547d\u4ee4\u7ed3\u675f\u65f6\u6570\u636e\u53ca\u5143\u6570\u636e\u771f\u6b63\u5199\u5165\u78c1\u76d8\uff0c\u800c\u4e0d\u662f\u521a\u5199\u5165\u7f13\u5b58\u5c31\u8fd4\u56de\u3002</li> </ul>"},{"location":"Linux/Linux-maintain/#u","title":"\u7cfb\u7edf\u8fc1\u79fb/U\u76d8","text":"<ul> <li>\u786c\u76d8\u8fc1\u79fb\uff5c\u8bb0\u4e00\u6b21Ubuntu\u5b8c\u7f8e\u8fc1\u79fb\u7cfb\u7edf\u76d8\u7684\u6298\u817e \uff1b\u53e6\u53c2 \u8fc1\u79fblinux\u7cfb\u7edf\u5230\u65b0\u786c\u76d8</li> <li>\u5907\u4efd\u6062\u590d\uff5c\u3010\u5fc5\u770b\u3011Linux \u7cfb\u7edf\u7684\u5907\u4efd\u6062\u590d \u4f3c\u4e4e\u53ef\u884c\uff01TODO</li> <li>\u5907\u4efd\u6574\u4e2a\u7cfb\u7edf | Linux \u5907\u4efd\u6574\u4e2a\u7cfb\u7edf</li> </ul> <pre><code>tar cvpzf backup.tgz \u2013exclude=/proc \u2013exclude=/lost+found \u2013exclude=/backup.tgz \u2013exclude=/mnt \u2013exclude=/sys /\n# \u6062\u590d\ntar xvpfz backup.tgz -C /\nmkdir sys mnt proc lost+found\n</code></pre> <p>\u5b89\u88c5\u5230U\u76d8</p> <ul> <li>\u53ef\u4ee5\u76f4\u63a5\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u6307\u5b9a\uff1b</li> </ul>"},{"location":"Linux/Linux-maintain/#failed-to-connect-to-ip-port","title":"Failed to connect to ip port","text":"<p>\u53ef\u80fd\u662f\u914d\u7f6e\u4e86\u9632\u706b\u5899\uff0c\u53c2\u89c1 here</p> <pre><code># \u901a\u8fc7\u547d\u4ee4\u67e5\u770b\u9632\u706b\u5899\u7b56\u7565\nsudo iptables -L | more\n# \u5982\u679c\u8f93\u51fa\u5185\u5bb9\u4e3aChain INPUT (policy DROP)\uff0c\u518d\u6267\u884c\u4fee\u6539\u7b56\u7565\nsudo iptables -P INPUT ACCEPT\n# \u76f4\u5230\u786e\u8ba4\u8f93\u51fa\u4e3aChain INPUT (policy ACCEPT)\uff0c\u624d\u53ef\u6e05\u9664\u6240\u6709\u89c4\u5219\u505c\u6b62\u9632\u706b\u5899\nsudo iptables -F \n# \u5173\u95ed\u9632\u706b\u5899\nsystemctl stop firewalld.service\n</code></pre>"},{"location":"Linux/Linux/","title":"General","text":""},{"location":"Linux/Linux/#linux-general","title":"Linux General","text":""},{"location":"Linux/Linux/#_1","title":"\u7cfb\u7edf\u670d\u52a1","text":"<p>\u4e00\u822c\u90fd\u7528 [[systemd.md]] \u4e86.</p>"},{"location":"Linux/Linux/#_2","title":"\u7cfb\u7edf\u786c\u4ef6\u4fe1\u606f\u68c0\u6d4b","text":"<p>\u78c1\u76d8\u68c0\u6d4b\u53ef\u4f7f\u7528 smartmontools</p> <pre><code>sudo smartctl -A /dev/sda #\u786c\u76d8 sudo smartctl -d sat -A /dev/sdc #usb\u8bbe\u5907\n</code></pre> <p>\u78c1\u76d8\u7a7a\u95f4\u5206\u6790\u53ef\u76f4\u63a5\u4f7f\u7528 dh \u547d\u4ee4\uff0c\u4e5f\u53ef\u4f7f\u7528 Filelight\u56fe\u5f62\u5316\u754c\u9762\u76f4\u89c2\u67e5\u770b\u78c1\u76d8\u5360\u7528\u60c5\u51b5</p> <pre><code>df -h\n</code></pre> <p>cpu \u4e0e\u663e\u5361\u7684\u4fe1\u606f\u67e5\u770b\u53ef\u4f7f\u7528\u5982\u4e0b\u4e24\u6b3e\u8f6f\u4ef6</p> <pre><code>yay -S cpu-x \nyay -S gpu-viewer\n</code></pre> <p>\u4f7f\u7528 dmidecode \u53ef\u4ee5\u5b8c\u6574\u67e5\u770b\u7cfb\u7edf\u7edd\u5927\u90e8\u5206\u786c\u4ef6\u4fe1\u606f\uff0c\u5305\u62ec\u8f83\u96be\u5f97\u5230\u7684\u5185\u5b58\u9891\u7387\uff0c\u4e3b\u677f BIOS \u7b49\u7b49\u3002</p> <pre><code>sudo dmidecode\n</code></pre>"},{"location":"Linux/Linux/#_3","title":"\u5176\u4ed6","text":""},{"location":"Linux/Linux/#clash","title":"\u79d1\u5b66\u4e0a\u7f51 | Clash","text":"<ul> <li>Clash https://github.com/Dreamacro/clash</li> <li>\u63a8\u8350\u6559\u7a0b | Linux\u4e0b\u5b89\u88c5&amp;\u914d\u7f6eClash\u4ee5\u5b9e\u73b0\u4ee3\u7406\u4e0a\u7f51</li> </ul>"},{"location":"Linux/Linux/#_4","title":"\u5b89\u88c5","text":"<pre><code>su\nwget https://github.com/Dreamacro/clash/releases/download/v1.6.5/clash-linux-amd64-v1.6.5.gz \nx clash-linux-amd64-v1.5.0.gz\nmkdir /opt/clash\nmv clash-linux-amd64 /opt/clash/clash\ncd /opt/clash\nwget -O config.yaml [\u8ba2\u9605\u94fe\u63a5] \nwget -O Country.mmdb https://www.sub-speeder.com/client-download/Country.mmdb\nchmod +x clash\n# \u542f\u52a8\uff0c-d \u8bbe\u7f6e\u914d\u7f6e\u8def\u5f84 -f \u914d\u7f6e\u6587\u4ef6\n./clash -d .\n./clash -f config.yaml\n</code></pre> <ul> <li>\u542f\u7528\u7cfb\u7edf\u4ee3\u7406<ul> <li>\u586b\u5199 HTTP \u548c HTTPS \u4ee3\u7406\u4e3a 127.0.0.1:7890\uff0c\u586b\u5199 Socks \u4e3b\u673a\u4e3a 127.0.0.1:7891</li> </ul> </li> <li>\u56fe\u5f62\u5316\u914d\u7f6e\u5730\u5740 http://clash.razord.top/</li> </ul>"},{"location":"Linux/Linux/#_5","title":"\u914d\u7f6e\u5f00\u673a\u81ea\u542f","text":"<pre><code>vim /etc/systemd/system/clash.service\n# \u7c98\u8d34\u4e0b\u9762\u7684\u5185\u5bb9\uff0c\u6ce8\u610f\u6587\u4ef6\u8def\u5f84\n\n# \u91cd\u8f7d systemctl deamon\nsystemctl daemon-reload\nsystemctl start clash.service\nsystemctl enable clash.service\n</code></pre> <pre><code>[Unit]\nDescription=clash daemon\n\n[Service]\nType=simple\nUser=root\nExecStart=/opt/clash/clash -f /opt/clash/config.yaml\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"Linux/Linux/#_6","title":"\u914d\u7f6e\u5b9a\u65f6\u66f4\u65b0","text":"<p>Clash For Linux \u5230\u76ee\u524d\u4e3a\u6b62\u6ca1\u6709\u81ea\u52a8\u8ba2\u9605\u65b9\u5f0f\uff0c\u6211\u4eec\u505a\u4e00\u4e2a\u8ba1\u5212\u4efb\u52a1\u5b9e\u73b0\u66f4\u65b0<code>config.yaml</code> \uff1b\u7528Cron\u6267\u884c\u8ba1\u5212\u4efb\u52a1</p> <pre><code>crontab -e\n# \u8f93\u5165\u4e0b\u9762\u7684\u5185\u5bb9\u540e\uff0c\u91cd\u542f crond \u670d\u52a1\nsystemctl restart crond.service\n</code></pre> <pre><code>29 6    * * *   root    pgrep clash | xargs kill -s 9 \n30 6    * * *   root    mv /opt/clash/config.yaml /opt/clash/configbackup.yaml \n31 6    * * *   root    wget -P /opt/clash/ -O config.yaml [\u4f60\u7684\u8ba2\u9605\u94fe\u63a5]\n32 6    * * *   root    nohup /opt/clash/clash -d /opt/clash/\n</code></pre>"},{"location":"Linux/Linux/#debug","title":"Debug","text":""},{"location":"Linux/Linux/#_7","title":"\u5173\u95ed\u56fe\u5f62\u754c\u9762","text":"<p>\u53ef\u4ee5\u67e5\u770b <code>/etc/inittab</code>\uff0c\u5927\u6982\u5c31\u662f</p> <pre><code># \u67e5\u770b\u9ed8\u8ba4\u7684target\uff0c\u6267\u884c\uff1a\nsystemctl get-default\n\n# \u5f00\u673a\u4ee5\u547d\u4ee4\u6a21\u5f0f\u542f\u52a8\uff0c\u6267\u884c\uff1a\nsystemctl set-default multi-user.target\n# \u5f00\u673a\u4ee5\u56fe\u5f62\u754c\u9762\u542f\u52a8\uff0c\u6267\u884c\uff1a\nsystemctl set-default graphical.target\n</code></pre>"},{"location":"Linux/Linux/#_8","title":"\u7cfb\u7edf\u663e\u793a\u4e2d\u6587\u5f02\u5e38","text":"<p>from \u7b80\u5355\u89e3\u51b3Ubuntu\u4fee\u6539locale\u7684\u95ee\u9898</p> <p>\u672c\u6587\u9488\u5bf9\u7684\u95ee\u9898\u662f\u201cUbuntu \u5b89\u88c5\u4e2d\u6587\u8bed\u8a00\u5305\u201d\u201cUbuntu Server\u4e2d\u6587\u95ee\u9898\u201d\uff0c\u201cUbuntu\u66f4\u6539\u8bed\u8a00\u73af\u5883\u201d\uff0c\u201cUbuntu locale\u7684\u8bbe\u5b9a\u201d\uff0c\u201ccannot change locale (zh_CN.UTF-8)\u201d\uff0c\u201cLinux\u4e2d\u6587\u4e71\u7801\u201d\uff0c\u201cLinux\u5b57\u7b26\u96c6\u7684\u4fee\u6539\u201d\uff0c\u201cLinux\u4e71\u7801\u7684\u89e3\u51b3\u529e\u6cd5\u201d\u7b49\u95ee\u9898\uff0c\u63d0\u4f9b\u4e00\u7ad9\u5f0f\u89e3\u51b3\u3002\u5982\u679c\u7cfb\u7edf\u663e\u793a\u4e2d\u6587\u5f02\u5e38\uff0c\u4f8b\u5982\u51fa\u73b0\u663e\u793a\u4e2d\u6587\u4e71\u7801\u7b49\uff0c\u53ef\u4ee5\u53c2\u8003\u672c\u6587\u7ae0\u3002\u5173\u4e8eCentOS\u7cfb\u7edf\u7684\u4fee\u6539\u529e\u6cd5\uff0c\u8bf7\u53c2\u8003\u6587\u7ae0\u672b\u5c3e\u7684\u63cf\u8ff0\u3002</p> <p>\u6b63\u786e\u7684\u53d8\u91cf\u914d\u7f6e\u5e94\u8be5\u662f</p> <pre><code>LANG=zh_CN.UTF-8   \nLANGUAGE=zh_CN:zh:en_US:en   \nLC_ALL=LC_ALL=zh_CN.UTF-8\n</code></pre> <p>\u76f8\u5173\u547d\u4ee4</p> <pre><code>sudo dpkg-reconfigure locales # \u91cd\u65b0\u914d\u7f6e locales\nman locale\nlocale\nlocalectl list-locales # \u6ce8\u610f\u5728 docker \u4e2d\u4f1a\u62a5\u9519\u6ca1\u6709 bus\n</code></pre> <p>Warning</p> <p>\u81ea\u5df1\u9047\u5230\u7684\u95ee\u9898\u662f\u4e2d\u6587\u65e0\u6cd5\u663e\u793a, \u547d\u4ee4 <code>locale</code> \u62a5\u9519 locale: Cannot set LC_CTYPE to default locale: No such file or directory locale: Cannot set LC_MESSAGES to default locale: No such file or directory locale: Cannot set LC_ALL to default locale: No such file or directory</p>"},{"location":"Linux/Linux/#_9","title":"\u91cd\u65b0\u6309\u7167\u4e2d\u6587\u8bed\u8a00\u5305","text":"<pre><code>sudo apt-get -y install language-pack-zh-hans\nsudo apt-get -y install language-pack-zh-hant # \u7e41\u4f53\u5b57\n\nlocale-gen zh_CN.UTF-8\n# or\nsudo dpkg-reconfigure locales # \u91cd\u65b0\u914d\u7f6e locales\n</code></pre>"},{"location":"Linux/Linux/#man","title":"\u627e\u4e0d\u5230man\u9875\u9762","text":"<p>\u6bd4\u5982 <code>man man</code> \u4e5f\u4f1a\u8fd4\u56de <code>No manual entry for man</code></p> <p>\u6700\u540e\u770b\u4e86\u4e00\u4e0b, \u53d1\u73b0\u4e3b\u8981\u7684\u6587\u6863\u8def\u5f84\u4e3a <code>/usr/share/man/</code>, \u7136\u540e \u4ece\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\u590d\u5236\u4e86\u4e00\u4efd \u8fc7\u6765\u5c31\u53ef\u4ee5\u4e86.</p> <pre><code># manpath - \u786e\u5b9a\u624b\u518c\u9875\u7684\u641c\u7d22\u8def\u5f84\n# \u67e5\u770b\u641c\u7d22\u8def\u5f84\nmanpath -g\n# \u914d\u7f6e\u6587\u4ef6\u5728 /etc/manpath.config\n\n# mandb - \u521b\u5efa\u6216\u66f4\u65b0\u624b\u518c\u9875\u7d22\u5f15\u7f13\u5b58\nmandb -c # create, \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cmandb \u4f1a\u5c1d\u8bd5\u66f4\u65b0\u4efb\u4f55\u4ee5\u524d\u521b\u5efa\u7684\u6570\u636e\u5e93\u3002\n\n# \u63d0\u51fa\u7684\u4e00\u4e9b\u610f\u89c1\nsudo apt-get install manpages manpages-dev\nsudo apt-get install --reinstall coreutils\nsudo apt-get install manpages-zh # \u4e2d\u6587?\n\n# -d \u6307\u4ee4 debug\nman -d ls\n</code></pre> <p>man \u53c2\u89c1 Linux \u547d\u4ee4 man \u5168\u77e5\u5168\u4f1a</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/","title":"\u5b9e\u9a8c\u73af\u5883\u76f8\u5173","text":"<pre><code>scp -r -P 20016 root@10.192.6.138:prompt .\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#linux","title":"Linux","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#user","title":"user \u7ba1\u7406","text":"<pre><code>sudo useradd -s /bin/bash -G sudo -d /home/syc syc\n# \u52a0\u7ec4\n-g team -G admin,developer,leader\n# usermod\nsudo useradd -s /sbin/nologin gtwang\n# \u52a0\u5165 root\nsudo usermod -aG sudo username\n\nsudo useradd -s /bin/bash -m test\necho \"test:test\" | sudo chpasswd\n</code></pre> <pre><code># \u4fee\u6539shell\u7684\u4e09\u79cd\u65b9\u5f0f\nusermod -s /sbin/nologin gtwang\nchsh --shell /bin/sh tecmint\nvi /etc/passwd\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#ssh","title":"SSH","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#authorized_keys","title":"authorized_keys \u514d\u5bc6\u767b\u9646","text":"<p>\u5728 <code>.ssh/authorized_keys</code> \u4e2d\u6dfb\u52a0\u8bb0\u5f55\u5373\u53ef</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#config","title":"config","text":"<p>\u53c2\u89c1 CNBlogs \u8fd9\u7bc7 linux\u4e0b\u5f00\u542fSSH\uff0c\u5e76\u4e14\u5141\u8bb8root\u7528\u6237\u8fdc\u7a0b\u767b\u5f55,\u5141\u8bb8\u65e0\u5bc6\u7801\u767b\u5f55</p> <p>\u914d\u7f6e <code>vim /etc/ssh/sshd_config</code></p> <pre><code># \u7981\u6b62root\u7528\u6237\u8fdc\u7a0b\u767b\u5f55\nPermitRootLogin no\n\n# PermitEmptyPasswords yes\n</code></pre> <p>\u4fee\u6539\u540e\u8bb0\u5f97\u91cd\u542f ssh \u670d\u52a1\uff0c\u4e0d\u540c\u7cfb\u7edf\u53ef\u80fd\u4e0d\u4e00\u6837</p> <pre><code>sudo /etc/init.d/ssh restart\n# CentOS\nsudo systemctl restart sshd\n# Ubuntu\nsudo service ssh restart\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#debug","title":"Debug","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#connection-refused","title":"connection refused","text":"<p>\u53ef\u80fd\u662f\u672a\u5f00\u542f SSH \u670d\u52a1\u3002</p> <p>\u53ef\u4ee5\u901a\u8fc7\u7f51\u9875\u7ba1\u7406\u9875\u9762\u8fdb\u5165\u670d\u52a1\u5668\uff0c\u5c1d\u8bd5 <code>ssh localhost</code> \uff1b\u82e5\u51fa\u73b0\u4e0b\u9762\u7684\u60c5\u51b5\u5219\u786e\u5b9a\u672a\u5f00\u542f\u3002</p> <pre><code>(base) root@44c8ff33884d:~# ssh 127.0.0.1\nssh: connect to host 127.0.0.1 port 22: Connection refused\n</code></pre> <p>\u4f7f\u7528 <code>/etc/init.d/ssh -start</code>\u5f00\u542f\u670d\u52a1\u7aef\u3002</p> <p>\u89c1 \u9519\u8bef\u5904\u7406 ssh connection refused_love23_linuxer\u7684\u535a\u5ba2-CSDN\u535a\u5ba2</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_2","title":"\u65e0\u6cd5\u514d\u5bc6\u767b\u5f55","text":"<p>\u53c2\u89c1 ssh\u514d\u5bc6\u767b\u9646\u5931\u8d25\u539f\u56e0\u603b\u7ed3(Linux)</p> <ul> <li>a) \u670d\u52a1\u5668B\u4e0a.ssh\u76ee\u5f55\u7684\u6743\u9650\u5fc5\u987b\u662f700</li> <li>b) \u670d\u52a1\u5668B\u4e0a.authorized_keys\u6587\u4ef6\u6743\u9650\u5fc5\u987b\u662f600\u6216\u8005644</li> <li>c) \u670d\u52a1\u5668B\u4e0a\u7528\u6237\u5bb6\u76ee\u5f55\u6587\u4ef6\u6743\u9650\u5fc5\u987b\u662f700\uff0c\u6bd4\u5982\u7528\u6237\u540d\u662faischang\uff0c\u5219/home/aischang\u8fd9\u4e2a\u76ee\u5f55\u6743\u9650\u5fc5\u987b\u662f700\u3002\u5982\u679c\u4e0d\u662f700\uff0c\u5728\u670d\u52a1\u5668A\u4e0a\u67e5\u770b/var/log/secure\u6587\u4ef6\u4f1a\u62a5\u9519</li> <li>d) \u670d\u52a1\u5668B\u4e0aSELinux\u5173\u95ed\u4e3adisabled\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u4fee\u6539setenforce 0 \uff0c\u67e5\u770b\u72b6\u6001\u7684\u547d\u4ee4\u4e3agetenforce\u6216\u8005 \u67e5\u770b/etc/selinux/config \u6587\u4ef6\u4e2d\u662f\u5426\u662fdisabled</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#git","title":"git","text":"<ul> <li> <p>\u56fe\u89e3 https://marklodato.github.io/visual-git-guide/index-zh-cn.html \u5229\u7528\u56fe\u793a\u8bb2\u89e3\u4e86 <code>checkout, reset, merge, cherry-pick, rebase</code> \u7b49\u6307\u4ee4\u5230\u5e95\u505a\u4e86\u4ec0\u4e48\uff0c\u53ef\u60dc\u6ca1\u6709\u6d89\u53ca\u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684\u547d\u4ee4\u3002Cheatsheet \u6027\u8d28\u7684</p> </li> <li> <p>Git Pro ebook: http://iissnan.com/progit/ \u5199\u5f97\u975e\u5e38\u8be6\u7ec6\uff0c\u56fe\u793a\u4e5f\u5f88\u8d5e</p> <ul> <li>\u770b\u4e86\u5176\u4e2d\u7684\u8fdc\u7a0b\u5206\u652f\u548c \u5206\u652f\u7684rebase \u7ae0\u8282</li> </ul> </li> </ul> <pre><code># \u67e5\u770b\u8fdc\u7a0b\u5206\u652f\ngit branch -a\n\n# \u521b\u5efa\u5e76\u5207\u6362\ngit branch test\ngit checkout test\n\n# push \u5230\u8fdc\u7a0b\ngit push origin test:test\n\n\n#\u67e5\u770b\u6587\u4ef6\u4fee\u6539\ngit log --pretty=oneline -- \u6587\u4ef6\u540d    # \u67e5\u770b\u6587\u4ef6\u7684\u4fee\u6539\u5386\u53f2\uff1b\u5728 zsh \u4e2d\u5b9a\u4e49\u4e3a glog\ngit show 356f6def9d -- \u6587\u4ef6\u540d\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_3","title":"\u5408\u5e76\u8fdc\u7a0b\u5206\u652f","text":"<p>\u5728\u672c\u5730\u5206\u652f a \u7684\u57fa\u7840\u4e0a\u5408\u5e76\u8fdc\u7a0b\u5206\u652f b\uff1a</p> <ul> <li>Pull \u8fdc\u7a0b\u5206\u652f</li> <li>merge</li> </ul> <pre><code># \u5728\u672c\u5730\u65b0\u5efa\u4e00\u4e2a\u4e0e\u8fdc\u7a0b\u7684\u5206\u652fb\u76f8\u540c(\u88ab\u5408\u5e76\u7684\u7248\u672c)\u7684\u5206\u652fb\ngit checkout -b b origin/b\n# \u5c06\u8fdc\u7a0b\u4ee3\u7801pull\u5230\u672c\u5730\ngit pull origin b\n\ngit checkout a\n# \u5408\u5e76\u5206\u652fa\u4e0e\u5206\u652fb\ngit merge b\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#nvidia-driver","title":"Nvidia driver","text":"<ul> <li>\u9a71\u52a8 \u4e0b\u8f7d\u5730\u5740</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#debug_1","title":"debug","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#driverlibrary-version-mismatch","title":"Driver/library version mismatch","text":"<p><code>nvidia-smi</code> \u62a5\u9519</p> <pre><code>Failed to initialize NVML: Driver/library version mismatch\n</code></pre> <p>\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u4f7f\u7528\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\u5b89\u88c5\u6216\u66f4\u65b0\u4e86\u9a71\u52a8\uff0c\u5bfc\u81f4\u7248\u672c\u51b2\u7a81\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6700\u597d\u5378\u8f7d\u4e4b\u524d\u5b89\u88c5\u7684\u5168\u90e8\u663e\u5361\u9a71\u52a8\uff0c\u7136\u540e\u91cd\u65b0\u5b89\u88c5\u3002</p> <p>\u901a\u8fc7 <code>dmesg</code> \u67e5\u770b\u542f\u52a8\u65e5\u5fd7\uff0c\u627e\u5230</p> <pre><code>[   52.396206] NVRM: API mismatch: the client has the version 440.82, but\n               NVRM: this kernel module has the version 390.48.  Please\n               NVRM: make sure that this kernel module and all NVIDIA driver\n               NVRM: components have the same version.\n</code></pre> <p>\u67e5\u770b\u9a71\u52a8\u7248\u672c</p> <pre><code>cat /proc/driver/nvidia/version\n# sudo rmmod nvidia_drm nvidia_modeset nvidia \u5b9e\u73b0\u5378\u8f7d\u4e86\u5185\u6838\u9a71\u52a8\uff1f\nmodinfo nvidia  \n</code></pre> <pre><code>NVRM version: NVIDIA UNIX x86_64 Kernel Module  440.82  Wed Apr  1 20:04:33 UTC 2020\nGCC version:  gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#1","title":"\u65b9\u68481 \u91cd\u8f7d\u9a71\u52a8\u6a21\u5757 \u5931\u8d25","text":"<p>reload kernel mod</p> <pre><code># \u5c1d\u8bd5 rmmod nvidia \u53ef\u4ee5\u53d1\u73b0\u4f9d\u8d56\uff0c\u9010\u6e10\u627e\u5230 nvidia_drm \u5378\u8f7d\u6574\u4e2a\u9a71\u52a8\nsudo rmmod nvidia_drm nvidia_modeset nvidia\n# \u5378\u8f7d\u540e\u91cd\u65b0\u8fd0\u884c\u8fd9\u4e2a\u5373\u53ef\nnvidia-smi\n\n# \u67e5\u770b mod \u4f7f\u7528\nlsmod | grep nvidia\n\n# \u67e5\u770b\u54ea\u4e9b\u8fdb\u7a0b\u4f7f\u7528\u4e86 \nsudo lsof -n -w\u00a0\u00a0/dev/nvidia*\n</code></pre> <p>\u4f46\u8fd8\u662f\u4f1a\u6709\u95ee\u9898\uff0c\u91cd\u542f\u4e4b\u540e\u8fd8\u662f\u4f1a\u51fa\u73b0 Failed to initialize NVML: Driver/library version mismatch \u7684\u95ee\u9898\uff0c\u8fd0\u884c <code>dmesg</code> \u4ecd\u7136\u53d1\u73b0\u7cfb\u7edf\u548c\u9a71\u52a8\u7248\u672c\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#2","title":"\u65b9\u68482 \u91cd\u65b0\u5b89\u88c5\u9a71\u52a8","text":"<pre><code># 1. \u5378\u8f7d\u9a71\u52a8\nsudo dpkg -l | grep nvidia  # \u67e5\u627e\u6b8b\u4f59\u7684\u5305\nsudo apt remove --purge libnvidia*\nsudo apt remove --purge nvidia*\nsudo dpkg -l | grep nvidia  # \u53ef\u80fd\u8fd8\u6709\u4e00\u4e9b\uff0c\u624b\u52a8 apt \u5378\u8f7d\n# or\nsudo /usr/bin/nvidia-uninstall\nsudo apt-get --purge remove nvidia-*\nsudo apt-get purge nvidia*\nsudo apt-get purge libnvidia*\n\n# 2. \u91cd\u542f\uff01\nsudo reboot\n\n# 3. \u91cd\u65b0\u5b89\u88c5\u9a71\u52a8\nsudo bash NVIDIA-Linux-x86_64-440.82.run  # \u9ed8\u8ba4\u914d\u7f6e\u5373\u53ef\n</code></pre> <p>\u6881\u658c\u8bf4\u7684\u4e09\u6b65\u8d70\u300c\u6e05\u9664\u9a71\u52a8\u3002\u91cd\u542f\u3002\u91cd\u88c5\u9a71\u52a8\u3002\u300d\u89e3\u51b3\u3002 \u4e4b\u524d\u5c1d\u8bd5\u8fc7\u901a\u8fc7 apt \u5b89\u88c5\u9a71\u52a8\uff0c\u8fd8\u662f\u6709\u95ee\u9898\uff1b\u4e2d\u95f4\u4e00\u5b9a\u9700\u8981\u91cd\u542f\uff1f</p> <p>\u53c2\u89c1 here</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#kernel","title":"\u539f\u56e0 \u4e5f\u53ef\u80fd\u662fKernel\u66f4\u65b0\u4f7f\u5f97\u9a71\u52a8\u4e0d\u53ef\u7528","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#cuda","title":"CUDA","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_4","title":"\u76f8\u5173\u6982\u5ff5\u7406\u89e3","text":"<p>\u62d3\u5c55\uff1a\u8fd0\u884c\u65f6\uff08runtime\uff09\u662f\u4ec0\u4e48\u610f\u601d\uff1f \u2b50\ufe0f</p> <p>CUDA doc https://docs.nvidia.com/cuda/index.html</p> <ul> <li>CUDA\u7ec4\u4ef6<ul> <li>https://developer.nvidia.com/gpu-accelerated-libraries \u5217\u51fa\u4e86CUDA\u52a0\u901f\u5e93\uff0c\u4f8b\u5982 cuDNN \u5c31\u662f\u5176\u4e2d\u4e4b\u4e00</li> <li>https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html \u4ecb\u7ecd\u4e86CUDA\u7248\u672c\u7684\u9a71\u52a8\u7248\u672c\u7684\u517c\u5bb9\u8868</li> <li>\u517c\u5bb9\u6027\u8bf4\u660e \u4e2d\u63d0\u5230\u8fd9\u4e9b\u533a\u522b<ul> <li>CUDA Toolkit (libraries, CUDA runtime and developer tools) - SDK for developers to build CUDA applications.</li> <li>CUDA driver - User-mode driver component used to run CUDA applications (e.g. libcuda.so on Linux systems).</li> <li>NVIDIA GPU device driver - Kernel-mode driver component for NVIDIA GPUs.</li> </ul> </li> <li>\u8bf4\u660e\uff1a<ul> <li>The CUDA compiler (<code>nvcc</code>), provides a way to handle CUDA and non-CUDA code (by splitting and steering compilation), along with the CUDA runtime, is part of the CUDA compiler toolchain. The CUDA Runtime API provides developers with high-level C++ interface for simplified management of devices, kernel executions etc., While the CUDA driver API provides a low-level programming interface for applications to target NVIDIA hardware</li> <li>Built on top of these technologies are CUDA libraries, some of which are included in the CUDA Toolkit, while others such as <code>cuDNN</code> may be released independently of the CUDA Toolkit.</li> </ul> </li> </ul> </li> </ul> <p></p> <ul> <li>\u663e\u5361\uff0c\u663e\u5361\u9a71\u52a8,nvcc, cuda driver,cudatoolkit,cudnn\u5230\u5e95\u662f\u4ec0\u4e48\uff1f \u4ecb\u7ecd\u4e86\u8fd9\u4e00\u7ec4\u6982\u5ff5\u3002\u89e3\u91ca\u4e86 \u2b50\ufe0f<ul> <li>nvcc \u548c nvidia-smi\u663e\u793a\u7684 CUDA \u7248\u672c\u4e0d\u540c\uff1f\u56e0\u4e3a\u662f\u5355\u72ec\u5b89\u88c5\u7684 driver \u548c toolkit</li> <li>runtime \u548c driver API\u533a\u522b\uff1fruntime\u662f\u66f4\u9ad8\u7ea7\u7684\u5c01\u88c5\uff0c\u5f00\u53d1\u4eba\u5458\u7528\u8d77\u6765\u66f4\u65b9\u4fbf\uff0c\u800cdriver API\u66f4\u63a5\u8fd1\u5e95\u5c42\uff0c\u901f\u5ea6\u53ef\u80fd\u4f1a\u66f4\u5feb\u3002</li> <li>Linux\u4e2dPATH\u3001 LIBRARY_PATH\u3001 LD_LIBRARY_PATH\u7684\u533a\u522b</li> </ul> </li> </ul> <p>CUDA\u6709\u4e24\u4e2a\u4e3b\u8981\u7684API\uff1aruntime API \u548c driver API\u3002\u8fd9\u4e24\u4e2aAPI\u90fd\u6709\u5bf9\u5e94\u7684CUDA\u7248\u672c\uff08\u59829.2\u548c10.0\u7b49\uff09\u3002</p> <ul> <li>\u7528\u4e8e\u652f\u6301driver API\u7684\u5fc5\u8981\u6587\u4ef6(\u5982<code>libcuda.so</code>)\u662f\u7531GPU driver installer\u5b89\u88c5\u7684\u3002<code>nvidia-smi</code>\u5c31\u5c5e\u4e8e\u8fd9\u4e00\u7c7bAPI\u3002</li> <li>\u7528\u4e8e\u652f\u6301runtime API\u7684\u5fc5\u8981\u6587\u4ef6(\u5982<code>libcudart.so</code>\u4ee5\u53ca<code>nvcc</code>)\u662f\u7531CUDA Toolkit installer\u5b89\u88c5\u7684\u3002\uff08CUDA Toolkit Installer\u6709\u65f6\u53ef\u80fd\u4f1a\u96c6\u6210\u4e86GPU driver Installer\uff09\u3002<code>nvcc</code>\u662f\u4e0eCUDA Toolkit\u4e00\u8d77\u5b89\u88c5\u7684CUDA compiler-driver tool\uff0c\u5b83\u53ea\u77e5\u9053\u5b83\u81ea\u8eab\u6784\u5efa\u65f6\u7684CUDA runtime\u7248\u672c\u3002\u5b83\u4e0d\u77e5\u9053\u5b89\u88c5\u4e86\u4ec0\u4e48\u7248\u672c\u7684GPU driver\uff0c\u751a\u81f3\u4e0d\u77e5\u9053\u662f\u5426\u5b89\u88c5\u4e86GPU driver\u3002</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#library_path-ld_library_path","title":"LIBRARY_PATH \u4e0e LD_LIBRARY_PATH","text":"<ul> <li><code>LIBRARY_PATH</code> \u662f\u7a0b\u5e8f\u7f16\u8bd1\u671f\u95f4\u67e5\u627e\u52a8\u6001\u94fe\u63a5\u5e93\u65f6\u6307\u5b9a\u67e5\u627e\u5171\u4eab\u5e93\u7684\u8def\u5f84</li> <li><code>LD_LIBRARY_PATH</code> \u662f\u7a0b\u5e8f\u52a0\u8f7d\u8fd0\u884c\u671f\u95f4\u67e5\u627e\u52a8\u6001\u94fe\u63a5\u5e93\u65f6\u6307\u5b9a\u9664\u4e86\u7cfb\u7edf\u9ed8\u8ba4\u8def\u5f84\u4e4b\u5916\u7684\u5176\u4ed6\u8def\u5f84</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_5","title":"\u5b89\u88c5","text":"<ul> <li> <p>\u53ef\u4ee5\u53c2\u89c1 Linux \u4e0b\u7684 CUDA \u5b89\u88c5\u548c\u4f7f\u7528\u6307\u5357 \u2b50\ufe0f</p> <ul> <li><code>/usr/local/cuda/extras/demo_suite/deviceQuery</code> \u53ef\u4ee5\u770b\u5230 CUDA \u548c\u663e\u5361\u60c5\u51b5\uff0c\u4f8b\u5982 <code>CUDA Driver Version / Runtime Version</code> \u5206\u522b\u662f\uff08\u5b89\u88c5\u9a71\u52a8 470.74 \u65f6\u4e00\u8d77\u5b89\u7684\uff1f\uff0911.4 \u548c\u901a\u8fc7 runfile \u5b89\u88c5\u7684 11.5 \u7684\u8fd0\u884c\u65f6\u7248\u672c\u3002</li> </ul> </li> <li> <p>\u4e0b\u8f7d\u5730\u5740 https://developer.nvidia.com/cuda-downloads</p> <ul> <li>\u5386\u53f2\u7248\u672c https://developer.nvidia.com/cuda-toolkit-archive</li> <li>\u5feb\u901f\u5b89\u88c5 https://docs.nvidia.com/cuda/cuda-quick-start-guide/index.html#ubuntu-x86_64 \u2b50\ufe0f</li> <li>\u66f4\u8be6\u7ec6\u7684\u5b89\u88c5\u6307\u5357 https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#runfile</li> </ul> </li> </ul> <p>\u4f8b\u5982\u5bf9\u4e8e Ubuntu \u7cfb\u7edf\uff0c\u53ef\u4ee5\u91c7\u7528 Debian \u6216\u8005 Runfile \u7684\u5b89\u88c5\u65b9\u5f0f\u3002</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#apt","title":"\u5229\u7528 <code>apt</code> \u5378\u8f7d","text":"<pre><code># \u4ec5\u5378\u8f7d\nsudo apt-get remove nvidia-cuda-toolkit\n# \u5378\u8f7dtoolkit\u53ca\u5176\u4f9d\u8d56\nsudo apt-get remove --auto-remove nvidia-cuda-toolkit\n# Purging config/data\nsudo apt-get purge nvidia-cuda-toolkit\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#cuda-cudnn","title":"\u67e5\u770b CUDA \u548c cuDNN \u7248\u672c","text":"<pre><code># CUDA\u7248\u672c\n# \u65b9\u6cd51 \u4f7f\u7528nvcc\nnvcc -V\n# \u65b9\u6cd52 \ncat /usr/local/cuda/version.txt\n\n# cuDNN \u7248\u672c\ncat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u5728 PyTorch \u4e2d\u67e5\u770b</p> <pre><code>import torch\nprint(torch.__version__)\n\nprint(torch.version.cuda)\nprint(torch.backends.cudnn.version())\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#numba","title":"numba","text":"<p>\u901a\u8fc7 <code>numba -s</code> \u53ef\u4ee5\u770b\u5230\u5f88\u591a\u7cfb\u7edf\u4fe1\u606f\u3002\u4f8b\u5982 cuda \u90e8\u5206\u663e\u793a\u5982\u4e0b\uff08conda \u73af\u5883\u4e0b\u7684 cudatoolkit=10.0\uff09</p> <pre><code>__CUDA Information__\nCUDA Device Initialized                       : True\nCUDA Driver Version                           : 11040\nCUDA Runtime Version                          : 10000\nCUDA Detect Output:\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#cuda-driver","title":"CUDA \u4e0e Driver \u7248\u672c\u5339\u914d","text":"<p>\u53c2\u89c1 https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html</p> <ul> <li>\u4f8b\u5982\uff0c\u5bf9\u4e8e 410.78 \u9a71\u52a8\u800c\u8a00\uff0c\u6700\u9ad8\u4ec5\u80fd\u5b89\u88c5 CUDA10.0</li> <li>440.78 \u6700\u9ad8\u652f\u6301 CUDA10.2</li> </ul> <p>Table 2. CUDA Toolkit and Minimum Compatible Driver Versions</p> <p></p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#tf","title":"TF","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#tensorflow-gpu","title":"TensorFlow GPU","text":"<ul> <li>[ ] \u5173\u4e8e TF \u7684\u7248\u672c\u5b89\u88c5\u95ee\u9898\uff0chttps://tf.wiki/zh_hans/basic/installation.html \u515c\u515c\u8f6c\u8f6c\uff0c\u8fd8\u662f\u8fd9\u91cc\u5199\u5f97\u6700\u6e05\u695a\u3002</li> <li>[ ] \u66f4\u4e3a\u8be6\u7ec6\u7684\uff0c\u7a1a\u6656\u5927\u795e\u7684\u3010\u4fdd\u59c6\u7ea7\u6559\u7a0b\u3011\u4e2a\u4eba\u6df1\u5ea6\u5b66\u4e60\u5de5\u4f5c\u7ad9\u914d\u7f6e\u6307\u5357 \u8fd9\u7bc7\u6559\u7a0b\u5199\u5f97\u66f4\u5b8c\u6574\u4e9b\uff0c\u5305\u62ec Docker \u4e0b\u7684\u4f7f\u7528\u3002</li> <li>[ ] \u8fd9\u7bc7 Ubuntu18.04 \u6df1\u5ea6\u5b66\u4e60\u73af\u5883cuda10.1+tensorflow2.1+python3.7 \u4e5f\u4ece\u5934\u5f00\u59cb\u6bd4\u8f83\u5b8c\u6574\u3002</li> </ul> <p>\u5b89\u88c5\u524d\u6ce8\u610f\u67e5\u770b\u8fd9\u91cc\u7684 CUDA \u548c cuDNN \u7248\u672c\u5339\u914d https://www.tensorflow.org/install/source?hl=zh-cn#gpu \uff1b\u800c CUDA \u53ef\u5426\u5b89\u88c5\u4f9d\u8d56\u4e8e\u663e\u5361\u9a71\u52a8\uff0c\u53c2\u89c1 CUDA \u4e00\u8282</p> <ul> <li>\u4f8b\u5982\uff0c\u5bf9\u4e8e TF2.5 2.4 \u9700\u8981 cuDNN8.0\uff0c\u800c conda \u73af\u5883\u597d\u50cf\u65e0\u6cd5\u5b89\u88c5\u8be5\u7248\u672c\uff08\u901a\u8fc7 <code>conda search cudnn</code> \u67e5\u770b\uff09</li> </ul> <p></p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#conda","title":"Conda \u7ba1\u7406","text":"<p>\u76f4\u63a5\u7528 conda \u7ba1\u7406\u4f3c\u4e4e\u66f4\u65b9\u4fbf https://docs.anaconda.com/anaconda/user-guide/tasks/tensorflow/\u3002</p> <pre><code>conda create -n tf-gpu tensorflow-gpu=2 cudatoolkit=10.2 python=3.7\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_6","title":"\u5bfc\u5165\u5bfc\u51fa\u73af\u5883","text":"<pre><code># \u5bfc\u51fa\u5305\u4fe1\u606f\nconda env export &gt; environment.yaml \nconda env export -n py3 &gt; env.yaml #\u5bfc\u51fa\u5176\u4ed6\u7684\u73af\u5883\n# \u5bfc\u5165\nconda env create -n tf2 -f tf22.yml\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#driver-44082-23","title":"Driver 440.82 + 2.3","text":"<p>Python3.8</p> <pre><code>NVIDIA-SMI 440.82       Driver Version: 440.82       CUDA Version: 10.2\n</code></pre> <p>\u6839\u636e\u5339\u914d\u8868\uff0c\u9700\u8981 CUDA10.1 \u548c cuDNN7.6\uff0c\u9ed8\u8ba4\u73af\u5883\u4e2d\u7b26\u5408\uff0c\u82e5\u4e0d\u7b26\u5408\u7684\u8bdd\u7528 conda \u5b89\u88c5\u4e00\u4e0b\u5e94\u8be5\u5c31\u884c\u3002</p> <p>\u73af\u5883\u8bb0\u5f55</p> <ul> <li>\u5728 /usr/local \u4e2d\u76ee\u5f55\u7ed3\u6784\u4e3a <code>cuda -&gt; /usr/local/cuda-10.2/ cuda-10.0 cuda-10.1 cuda-10.2</code> \uff0c\u4f46 <code>$LD_LIBRARY_PATH=/usr/local/cuda-10.1/lib64</code> \uff0c\u5728 10.1 \u4e2d\u5305\u542b\u4e86 TF2.3 \u6240\u9700\u7684\u52a8\u6001\u5e93</li> </ul> <pre><code>2021-07-07 03:17:57.834762: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudart.so.10.1\n2021-07-07 03:17:57.852740: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcublas.so.10\n2021-07-07 03:17:57.853642: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcufft.so.10\n2021-07-07 03:17:57.853787: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcurand.so.10\n2021-07-07 03:17:57.854792: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcusolver.so.10\n2021-07-07 03:17:57.857281: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcusparse.so.10\n2021-07-07 03:17:57.893238: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library libcudnn.so.7\n</code></pre> <ul> <li>\u800c\u5728 cuda-10.0 \u4e2d\u4ec5\u6709 <code>libcudart.so.10.0</code> \uff1bcuda-10.2 \u4e2d\u4ec5\u6709 <code>libcudart.so.10.1</code> \uff0c\u65e0 <code>libcudnn.so</code> \uff1b\u4f46\u662f\u4fee\u6539 <code>LD_LIBRARY_PATH</code> \u6307\u5411\u8fd9\u4e24\u4e2a\u5730\u5740\uff0c\u751a\u81f3 unset \u8be5\u53d8\u91cf\uff0c\u5747\u80fd\u6b63\u5e38\u5f15\u5165\u8fd9\u4e24\u4e2a\uff0c\u5e94\u8be5\u662f TF \u4f1a\u81ea\u52a8\u5c1d\u8bd5\u4e00\u4e9b\u9ed8\u8ba4\u5730\u5740\u3002</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#driver-41078-115","title":"Driver 410.78 + 1.15","text":"<p>\u5728\u4ee5\u4e0b\u73af\u5883\u4e2d\u5b89\u88c5\u901a\u8fc7</p> <pre><code># nvidia-smi\nNVIDIA-SMI 410.78       Driver Version: 410.78       CUDA Version: 10.0\n\nNVIDIA-SMI 418.87.01    Driver Version: 418.87.01    CUDA Version: 10.1\n</code></pre> <pre><code>conda create -n py37 python=3.7    \nconda activate py37\nconda install cudatoolkit=10.0 cudnn=7.6\npip install tensorflow-gpu==1.15        # \u6ce8\u610f\u8981\u5b89\u88c5 gpu \u7248\u672c\n\n# test\npython -c \"import tensorflow as tf; print(tf.test.is_gpu_available()); print(tf.version.VERSION)\"\n</code></pre> <p>\u6ce8\u610f\u4e0d\u652f\u6301Python3.8</p> <pre><code>ERROR: Could not find a version that satisfies the requirement tensorflow-gpu==1.15 (from versions: 2.2.0rc1, 2.2.0rc2, 2.2.0rc3, 2.2.0rc4, 2.2.0, 2.2.1, 2.2.2, 2.2.3, 2.3.0rc0, 2.3.0rc1, 2.3.0rc2, 2.3.0, 2.3.1, 2.3.2, 2.3.3, 2.4.0rc0, 2.4.0rc1, 2.4.0rc2, 2.4.0rc3, 2.4.0rc4, 2.4.0, 2.4.1, 2.4.2, 2.5.0rc0, 2.5.0rc1, 2.5.0rc2, 2.5.0rc3, 2.5.0, 2.6.0rc0)\nERROR: No matching distribution found for tensorflow-gpu==1.15\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#bert4keras","title":"bert4keras","text":"<p>Repo https://github.com/bojone/bert4keras</p> <p>\u5efa\u8bae\u4f60\u4f7f\u7528Tensorflow 1.14 + Keras 2.3.1\u7ec4\u5408 \u5173\u4e8e\u73af\u5883\u7ec4\u5408</p> <ul> <li> <p>\u652f\u6301tf+keras\u548ctf+tf.keras\uff0c\u540e\u8005\u9700\u8981\u63d0\u524d\u4f20\u5165\u73af\u5883\u53d8\u91cfTF_KERAS=1\u3002</p> </li> <li> <p>\u5f53\u4f7f\u7528tf+keras\u65f6\uff0c\u5efa\u8bae2.2.4 &lt;= keras &lt;= 2.3.1\uff0c\u4ee5\u53ca 1.14 &lt;= tf &lt;= 2.2\uff0c\u4e0d\u80fd\u4f7f\u7528tf 2.3+\u3002</p> </li> <li> <p>keras 2.4+\u53ef\u4ee5\u7528\uff0c\u4f46\u4e8b\u5b9e\u4e0akeras 2.4.x\u57fa\u672c\u4e0a\u5df2\u7ecf\u5b8c\u5168\u7b49\u4ef7\u4e8etf.keras\u4e86\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u8981\u7528keras 2.4+\uff0c\u5012\u4e0d\u5982\u76f4\u63a5\u7528tf.keras\u3002</p> </li> </ul> <p>\u6ce8\u610f\uff0c\u6709\u7248\u672c\u8981\u6c42 bert4keras 0.10.7 requires keras&lt;=2.3.1\uff0c\u56e0\u6b64\u5148\u88c5 bert4keras \u7136\u540epip install tensorflow-gpu\u7684\u8bdd\uff0ckeras\u7248\u672c\u4f1a\u6709\u51b2\u7a81\uff0c\u5c1d\u8bd5 <code>conda install tensorflow-gpu=1</code> \uff08TF2\u597d\u50cf\u8fd8\u662f\u4e0d\u592a\u884c\uff09\u3002</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#debug-tf","title":"Debug TF","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#tf-keras","title":"TF &amp; keras","text":"<p>\u9047\u5230\u8fc7\u4e24\u4e2a\u62a5\u9519\uff1a</p> <pre><code>AttributeError: module 'keras.utils.generic_utils' has no attribute 'populate_dict_with_module_objects'\nImportError: cannot import name 'get_config' from 'tensorflow.python.eager.context'\n</code></pre> <p>\u4f3c\u4e4e\u662f 2.3.1 \u7248\u672c\u7684 keras \u4f3c\u4e4e\u4f1a\u81ea\u52a8\u8c03\u7528 <code>Using TensorFlow backend.</code>\uff0c\u6d4b\u8bd5\u548c TF2.5.0 \u4e0d\u5339\u914d\uff1b\u76f4\u63a5\u8fd0\u884c  <code>import keras</code> \u4f1a\u62a5\u9519\uff1b</p> <p>\u53c2\u89c1 https://github.com/bojone/bert4keras\uff0c\u5982\u679c\u7528\u7684\u662f <code>kert4keras</code> \u53ef\u52a0\u73af\u5883\u53d8\u91cf <code>TF_KERAS=1</code></p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#notimplementederror-cannot-convert-a-symbolic-tensor-lstmstrided_slice0-to-a-numpy-array","title":"NotImplementedError: Cannot convert a symbolic Tensor (lstm/strided_slice:0) to a numpy array","text":"<p>\u662fTF\u548cnumpy\u7684\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u89c1 stackoverflow \uff0c\u6d4b\u8bd5\u5728 Python3.7 \u548c 3.9 \u4e0b\u5747\u4f1a\u51fa\u73b0\u3002<code>tensorflow 2.5.0 requires numpy~=1.19.2</code></p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#load_model-error-attributeerror-str-object-has-no-attribute-decode","title":"load_model error | AttributeError: \u2018str\u2019 object has no attribute \u2018decode\u2019","text":"<pre><code># error2 \u5728bert4keras \u4e0b model.load_weights() \u4e5f\u62a5\u8fd9\u4e2a\u9519\uff0c\u53ef\u89c1\u662f keras \u548c h5py \u7684\u7248\u672c\u51b2\u7a81\nTraceback (most recent call last):\n  File \"test.py\", line 42, in &lt;module&gt;\n    model.load_weights(savedir + 'best_model.weights')\n  File \"/home/syc/miniconda3/lib/python3.7/site-packages/keras/engine/saving.py\", line 492, in load_wrapper\n    return load_function(*args, **kwargs)\n  File \"/home/syc/miniconda3/lib/python3.7/site-packages/keras/engine/network.py\", line 1230, in load_weights\n    f, self.layers, reshape=reshape)\n  File \"/home/syc/miniconda3/lib/python3.7/site-packages/keras/engine/saving.py\", line 1183, in load_weights_from_hdf5_group\n    original_keras_version = f.attrs['keras_version'].decode('utf8')\nAttributeError: 'str' object has no attribute 'decode'\n</code></pre> <p>\u5728 <code>from tensorflow.keras.models import load_model</code>\u62a5\u9519\u3002</p> <p>\u53c2\u89c1 https://stackoverflow.com/questions/53740577/does-any-one-got-attributeerror-str-object-has-no-attribute-decode-whi</p> <p>\u964d\u7ea7 h5py \u5373\u53ef\uff0c<code>pip install h5py==2.10</code>\u3002</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#3090-blas-gemm-launch-failed","title":"3090 \u62a5\u9519: Blas GEMM launch failed","text":"<ul> <li>see RTX3090 tensorflow1.x\u62a5\u9519\uff1aBlas GEMM launch failed<ul> <li>\u53ef\u4ee5\u5b89\u88c5\u5b98\u65b9\u9488\u5bf9A100\u7f16\u8bd1\u7684\u7248\u672c\uff0c\u89c1 Nvidia Accelerating TensorFlow on NVIDIA A100 GPUs</li> <li>\u4e3b\u8981\u5c31\u662f\u4e0b\u9762\u4e24\u884c\u547d\u4ee4</li> </ul> </li> </ul> <pre><code>pip install nvidia-pyindex\npip install nvidia-tensorflow\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#torch","title":"Torch","text":"<ul> <li>\u5230 https://pytorch.org/get-started/previous-versions/ \u91c7\u7528pytorch\u63d0\u4f9b\u7684conda\u6e90\u5b89\u88c5\u6bd4\u8f83\u4fdd\u9669</li> </ul> <p>\u7248\u672c\u5339\u914d\uff1a\u6700\u597d\u7684\u89e3\u51b3\u65b9\u6848\u4f3c\u4e4e\u662f\u5230\u5b98\u65b9\u4e0b\u8f7d whl \u6587\u4ef6\u5b89\u88c5\uff0c\u89c1 https://download.pytorch.org/whl/torch/ \uff08\u6ce8\u610f\u9009\u62e9 cu \u7248\u672c\u7684\uff09\u548c https://download.pytorch.org/whl/cu100/torch/\u3002</p> <p>\u67e5\u770b CUDA \u662f\u5426\u53ef\u7528</p> <pre><code>python -c \"import torch; print(torch.cuda.is_available())\"\n</code></pre> <p>\u66f4\u8be6\u7ec6\u7684\u6709 How to check if pytorch is using the GPU?</p> <pre><code>import torch \ntorch.cuda.is_available()\n\ntorch.cuda.current_device() # 0 \ntorch.cuda.device(0) # &lt;torch.cuda.device at 0x7efce0b03be0&gt; \ntorch.cuda.device_count() # 1 \ntorch.cuda.get_device_name(0) # 'GeForce GTX 950M'\n</code></pre> <p>\u4ee3\u7801\u5b9e\u4f8b</p> <pre><code># setting device on GPU if available, else CPU\ndevice = torch.device('cuda' if torch.cuda.is_available() else 'cpu')\nprint('Using device:', device)\nprint()\n\n# Additional Info when using cuda\nif device.type == 'cuda':\n    print(torch.cuda.get_device_name(0))\n    print('Memory Usage:')\n    print('Allocated:', round(torch.cuda.memory_allocated(0)/1024**3,1), 'GB')\n    print('Cached:   ', round(torch.cuda.memory_reserved(0)/1024**3,1), 'GB')\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#30-sm_86-torch","title":"\u5173\u4e8e30\u7cfb\u663e\u5361 (sm_86) \u6309\u7167\u65e7\u7248\u672c Torch","text":"<p>\u91c7\u7528 conda+cudatoolkit \u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5.</p> <pre><code>conda create -n torch17 python=3.7\nconda activate torch17\nconda install pytorch==1.7.1 cudatoolkit=11.0 -c pytorch\npython -c \"import torch; print(torch.__version__); print(torch.cuda.is_available())\"\n\n# ref\n# https://pytorch.org/get-started/previous-versions\n# https://download.pytorch.org/whl/torch_stable.html\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#cu100","title":"cu100","text":"<p>\u4f8b\u5982\u8fd9\u91cc cu100 \u4e0b\u4f3c\u4e4e\u6700\u591a\u652f\u6301\u5230 1.4\uff1f</p> <ul> <li>\u5b9e\u6d4b\u5728 Python3.7 \u73af\u5883\u4e0b\uff0c\u7528 pip \u4f1a\u9ed8\u8ba4\u5b89\u88c5 1.9 \u7248\u672c\uff1b\u800c\u7cfb\u7edf\u73af\u5883\u4e3a cu100\uff0c\u62a5\u9a71\u52a8\u8fc7\u8001\u7684\u95ee\u9898</li> <li>\u5373\u4f7f\u7528 <code>pip install torch==1.4</code>\u4e5f\u4f1a\u62a5\u7248\u672c\u95ee\u9898\uff0c\u901a\u8fc7 \u8fd9\u4e2a \u4e0b\u8f7d\u4e4b\u540e\u5b89\u88c5\u65b9\u53ef\u3002\u7528 conda list \u67e5\u770b\uff0c\u7248\u672c\u53f7\u5b58\u5728 1.4.0 \u548c 1.4.0+cu100 \u7684\u533a\u522b\u3002</li> </ul> <pre><code>/opt/conda/envs/py37/lib/python3.7/site-packages/torch/cuda/__init__.py:52: UserWarning: CUDA initialization: The NVIDIA driver on your system is too old (found version 10000). Please update your GPU driver by downloading and installing a new version from the URL: http://www.nvidia.com/Download/index.aspx Alternatively, go to: https://pytorch.org to install a PyTorch version that has been compiled with your version of the CUDA driver. (Triggered internally at  /pytorch/c10/cuda/CUDAFunctions.cpp:115.)\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#debug-torch","title":"Debug Torch","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#geforce-rtx-3090-with-cuda-capability-sm_86-is-not-compatible-with-the-current-pytorch-installation","title":"GeForce RTX 3090 with CUDA capability sm_86 is not compatible with the current PyTorch installation","text":"<p>\u8fd8\u662fCUDA\u548cTorch\u7684\u7248\u672c\u7684\u95ee\u9898. 3090\u663e\u5361\u4e00\u822c\u4f7f\u7528CUDA11+</p> <p>\u4f8b\u5982\u662fcuda11.1\u5c31\u5230 https://download.pytorch.org/whl/cu111/torch_stable.html \u4e0b\u8f7d:</p> <pre><code>pip install torch==1.10+cu111 -f https://download.pytorch.org/whl/cu111/torch_stable.html\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#pytorch-geometric-17","title":"PyTorch-Geometric 1.7","text":"<pre><code>conda create -n torch14 python=3.6\nconda activate torch14\n\npip install torch==1.4.0 torchvision==0.5.0\nconda install cudatoolkit=10.1 cudnn=7.6\n\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_cluster-1.5.3+cu101-cp36-cp36m-linux_x86_64.whl\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_sparse-0.6.0+cu101-cp36-cp36m-linux_x86_64.whl\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_spline_conv-1.2.0+cu101-cp36-cp36m-linux_x86_64.whl\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_scatter-2.0.3+cu101-cp36-cp36m-linux_x86_64.whl\n# pip install torch_*\n# \u4ee5\u4e0a\u5b89\u88c5 torch-geometric \u6240\u9700\u7684\u56db\u4e2a\u7ec4\u4ef6\npip install torch-geometric\n\n\n# conda env\nconda create -n torch14 python=3.6\nconda activate torch14\n\n# torch\nwget https://download.pytorch.org/whl/cu100/torch-1.4.0%2Bcu100-cp36-cp36m-linux_x86_64.whl\npip install torch*\npython -c \"import torch; print(torch.cuda.is_available()); print(torch.version.cuda)\"  \n# test \u6ce8\u610f\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ef\u80fd\u4f1a\u62a5\u6ca1\u6709 numpy \u5305\u7684\u9519\uff0c\u624b\u52a8\u5b89\u88c5\u5373\u53ef\n\n# torch geometric\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_cluster-1.5.3+cu100-cp36-cp36m-linux_x86_64.whl\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_sparse-0.6.0+cu100-cp36-cp36m-linux_x86_64.whl\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_spline_conv-1.2.0+cu100-cp36-cp36m-linux_x86_64.whl\nwget http://pytorch-geometric.com/whl/torch-1.4.0/torch_scatter-2.0.3+cu100-cp36-cp36m-linux_x86_64.whl\npip install torch*\npip install torch-geometric\npython -c \"import torch_sparse, torch_geometric\"\n# \u5b9e\u6d4b\u5176\u4ed6\u7684\u5305\u6ca1\u6709\u95ee\u9898\uff0c\u53ea\u6709 torch_sparse/torch_geometric \u8fd9\u6837\u5b89\u88c5\u65e0\u6cd5 import\uff0c\u62a5\u9519\uff0c\u89e3\u51b3\u65b9\u6cd5\u662f\u5b89\u88c5 CUDA Toolkit\uff0c\u8be6\u89c1\u4e0b\nconda install cudatoolkit=10.0\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#pip","title":"Pip","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_7","title":"\u6e90\u914d\u7f6e","text":"<p>\u6e05\u534e\u6e90 https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</p> <p>\u5b98\u65b9\u6e90\u4e3a https://pypi.python.org/simple</p> <pre><code># help\npip config -h\n# \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u6307\u5b9aeditor\u9009\u9879\u4f1a\u62a5 `ERROR: Could not determine editor to use.` \u9519\npip config --editor=vim edit\n# \u4fee\u6539\u914d\u7f6e\npip config list\n\npip config unset global.index-url        # \u79fb\u9664\n\n# \u6e05\u534e\u6e90\npip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n# \u963f\u91cc\u6e90\npip config set global.index-url https://mirrors.aliyun.com/pypi/simple/\n# \u817e\u8baf\u6e90\npip config set global.index-url http://mirrors.cloud.tencent.com/pypi/simple\n# \u8c46\u74e3\u6e90\npip config set global.index-url http://pypi.douban.com/simple/\n</code></pre> <p>\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u5730\u5740\u4e3a <code>.config/pip/pip.conf</code> \uff0c\u683c\u5f0f\uff08\u5f53\u7136\u8fd8\u53ef\u653e <code>~/.pip/pip.conf</code> \uff09</p> <pre><code>[global]\nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\n[install]\ntrusted-host = https://pypi.tuna.tsinghua.edu.cn\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#conda_1","title":"Conda","text":"<p>Miniconda https://docs.conda.io/en/latest/miniconda.html</p> <pre><code>wget https://repo.anaconda.com/miniconda/Miniconda3-py37_4.10.3-Linux-x86_64.sh\nbash Miniconda3-py37_4.10.3-Linux-x86_64.sh\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_8","title":"\u914d\u7f6e\u6e90","text":"<p>\u6e05\u534e\u6e90 https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/</p> <pre><code># \u67e5\u770b\u914d\u7f6e\nconda config --help\nconda config --show\n\n# \u6362\u56de\u9ed8\u8ba4\u6e90 \nconda config --remove-key channels\n</code></pre> <p>\u6839\u636e help \u53ef\u77e5\u914d\u7f6e\u6587\u4ef6\u5730\u5740\u5728 <code>~/.condarc</code> \u3002</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#miniconda","title":"\u6307\u5b9a\u865a\u62df\u73af\u5883\u4f4d\u7f6e/\u591a\u4e2aMiniconda","text":"<ul> <li>\u5728\u5171\u7528\u8d26\u53f7\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u9700\u8981\u5206\u79bb\u4e0d\u7528\u7528\u6237\u7684conda\u73af\u5883\uff1b\u63a2\u7d22\u7684\u89e3\u51b3\u65b9\u6848\uff1a<ul> <li>\u5b89\u88c5\u591a\u4e2aminiconda\uff1a\u91cd\u65b0\u4e0b\u8f7d\u5b89\u88c5\u4e00\u4e2aminiconda\u5230\u4e0d\u540c\u7684\u76ee\u5f55\u4e0b\uff1b</li> <li>\u521b\u5efa\u73af\u5883\uff1a\u6ce8\u610f\u8981\u7528\u65b0\u76ee\u5f55\u4e0b\u7684 <code>bin/conda</code> \uff0c\u5c31\u4f1a\u5b89\u88c5\u5230\u8be5\u76ee\u5f55\u7684 envs \u4e0b\uff1b\u793a\u4f8b\u5982\u4e0b</li> <li>\u6fc0\u6d3b\u73af\u5883\uff1a\u56e0\u4e3a\u6ca1\u6709\u6267\u884c conda init zsh \u6240\u4ee5\u9ed8\u8ba4\u7684 conda \u8fd8\u662f\u57fa\u672c\u73af\u5883\u4e0b\u7684\u90a3\u4e2a\uff08\u53ea\u80fd\u7528\u8fd9\u4e2aconda\u6587\u4ef6\u6267\u884c conda activate\uff09\uff0c\u800c\u8fd9\u4e2aconda\u4e0d\u8bb0\u5f55\u5176\u4ed6\u76ee\u5f55\u73af\u5883\u7684\u540d\u5b57\uff0c\u56e0\u6b64\u9700\u8981\u6307\u5b9a\u5177\u4f53\u76ee\u5f55\uff0c\u5982 <code>conda activate /Users/easonshi/Downloads/miniconda3/envs/py36</code></li> </ul> </li> </ul> <pre><code># ./conda env list\nbase                     /Users/easonshi/Downloads/miniconda3\npy36                     /Users/easonshi/Downloads/miniconda3/envs/py36\n                      *  /Users/easonshi/miniconda3\n                         /Users/easonshi/miniconda3/envs/py2\n                         /Users/easonshi/miniconda3/envs/py37\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#conda_2","title":"\u590d\u5236conda\u73af\u5883","text":"<pre><code>conda-env export &gt; envs.yaml\n\n# \u91c7\u7528 conda pack\n# \u9996\u5148\u9700\u8981\u5b89\u88c5\npip install conda-pack\n\nconda pack -n my_env\nconda pack -p /explicit/path/to/my_env\n\nmkdir -p my_env\ntar -xzf my_env.tar.gz -C my_env\n# Activate the environment.\nsource my_env/bin/activate\n# \u9000\u51fa\nconda-unpack\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_9","title":"\u7f51\u7edc","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#easyconnect","title":"EasyConnect","text":"<ul> <li>\u4e0b\u8f7d\u7f51\u9875\u662f https://stuvpn.fudan.edu.cn/com/installClient.html<ul> <li>EC\u6709\u65f6\u4f1a\u7248\u672c\u8fc7\u8001\uff0c\u8df3\u8f6c\u5230\u4e0a\u8ff0\u9875\u9762\uff0c\u7136\u800c\u5f88\u8822\u7684\u662f macOS Chrome \u4e0b\u5f3a\u5236\u8df3\u8f6c\u5230\u7f51\u9875\u7248\u767b\u9646\u9875\u9762\uff0c\u7136\u540e\u53c8\u8df3\u8f6c\u56deEC\u7248\u672c\u95ee\u9898\u2026\u2026</li> <li>\u76f4\u63a5\u7ed9 macOS \u4e0b\u8f7d\u94fe\u63a5</li> </ul> </li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_10","title":"\u5f00\u901a\u670d\u52a1\u5668\u7f51\u7edc\u8bbf\u95ee\u6743\u9650","text":"<p>\u4e4b\u524d\u9047\u5230\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u5728\u67d0\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u6210\u529f\u4e0b\u8f7d\u5b89\u88c5\u4e86 miniconda\uff0c\u4f46\u662f\u65e0\u6cd5\u4f7f\u7528 conda/pip \u6765\u4e0b\u8f7d\u5b89\u88c5\uff08\u6240\u4ee5\u662f\u9650\u5236\u4e86\u90e8\u5206\u7684\u7f51\u7edc\u8bbf\u95ee\uff1f\uff09\u3002</p> <p>\u4e0d\u592a\u61c2\u5177\u4f53\u539f\u7406\uff0c\u60f3\u60f3\u5e94\u8be5\u662f\u7f51\u5173\u57fa\u4e8e\u8fde\u63a5 Wi-Fi \u65f6\u7684\u7528\u6237\u8ba4\u8bc1\u4fe1\u606f\uff0c\u5bf9\u4e8e\u7528\u6237\u4f7f\u7528\u670d\u52a1\u5668\u7684\u5916\u7f51\u8fde\u63a5\u8fdb\u884c\u4e86\u63a7\u5236\uff08\u5373\u4f7f\u662f\u4e0d\u540c\u7684\u7528\u6237\u4f7f\u7528\u540c\u4e00\u53f0\u670d\u52a1\u5668\uff09\uff1b\u5728\u4e0b\u9762\u7684\u547d\u4ee4\u4e2d ip \u8bbe\u4e3a\u8981\u5f00\u901a\u7684\u670d\u52a1\u5668\u5730\u5740\uff0c\u518d\u52a0\u4e0a\u81ea\u5df1 UIS \u8ba4\u8bc1\u8d26\u53f7\uff0c\u5373\u53ef\u5b8c\u6210\u6ce8\u518c\u3002</p> <p>\u4f46\u8fd8\u6709\u4e2a\u95ee\u9898\uff1a\u4e4b\u524d\u7528\u5b66\u957f\u7684\u8d26\u6237\uff0c\u90a3\u65f6\u6ca1\u6709\u7528\u4ee5\u4e0b\u547d\u4ee4\u6ce8\u518c\u4e5f\u6210\u529f\u8054\u7f51\ud83d\ude02</p> <pre><code>URL=\"https://10.108.255.249/include/auth_action.php\"\nusername=***\npassword=***\nip=****\ncurl $URL --insecure --data \"action=login&amp;username=$username&amp;password=$password&amp;ac_id=1&amp;user_ip=$ip&amp;save_me=1&amp;ajax=1\"\n</code></pre> <ul> <li>\u597d\u50cf\u8fc7\u6bb5\u65f6\u95f4\u5c31\u4f1a\u65ad\u7f51\uff0c\u53ef\u4ee5\u5199\u4e2a sh</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_11","title":"\u8f6f\u4ef6","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#apt_1","title":"\u5e38\u7528\u8f6f\u4ef6 apt","text":"<pre><code>apt install git curl \napt install net-tools   #ifconfig\napt install dnsutils    #nslookup\n\napt install zsh autojump\n\napt install tree bat trash-cli\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#apt_2","title":"\u914d\u7f6e apt \u6e90","text":"<p>\u6e05\u534e\u6e90 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</p> <pre><code>mv /etc/apt/sources.list /etc/apt/sources.list.backup\nvim /etc/apt/sources.list\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#vs-code","title":"VS Code","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#pycharm","title":"PyCharm","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_12","title":"\u8bbe\u7f6e\u8c03\u8bd5\u8def\u5f84","text":"<p>\u6ce8\u610f\u70b9</p> <ul> <li>\u547d\u4ee4\u884c\u4e2d\u7684 <code>-m</code> \u53c2\u6570\uff0c\u5bf9\u5e94\u5230 Script path</li> <li>\u5176\u4ed6\u7684\u53c2\u6570\u586b\u5165 Parameters<ul> <li>\u4f20\u5165 <code>'{\"0\": 0}'</code> \u8fd9\u79cd JSON \u683c\u5f0f\u53c2\u6570\u7684\u65f6\u5019\uff0cPyCharm \u4f3c\u4e4e\u65e0\u6cd5\u89e3\u6790\uff1f\u624b\u52a8\u4fee\u6539\u6210\u4e86\u53cc\u5f15\u53f7\u5305\u88f9\u5355\u5f15\u53f7\u7684\u5f62\u5f0f\uff0c\u7136\u540e\u5c06 json.loads() \u4fee\u6539\u4e3a eval()</li> </ul> </li> <li>\u5982\u679c wd \u4e0d\u4e3a fileDirName \uff0c\u5219\u9700\u8981\u8bbe\u7f6e Working directory</li> </ul> <p></p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#sublime","title":"Sublime","text":"<p>packages</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#pretty-json","title":"Pretty JSON","text":"<p>https://packagecontrol.io/packages/Pretty%20JSON</p> <p>\u4f7f\u7528\u7684\u65f6\u5019 <code>Ctrl+Shift+P</code> \u7136\u540e\u8f93\u5165 JSON \u9009\u62e9\u76f8\u5e94\u547d\u4ee4\u5373\u53ef</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#screen","title":"Screen","text":"<p>\u6458\u5f55\u81ea linux screen \u547d\u4ee4\u8be6\u89e3</p> <pre><code>screen [-AmRvx -ls -wipe][-d &lt;\u4f5c\u4e1a\u540d\u79f0&gt;][-h &lt;\u884c\u6570&gt;][-r &lt;\u4f5c\u4e1a\u540d\u79f0&gt;][-s ][-S &lt;\u4f5c\u4e1a\u540d\u79f0&gt;]\n-d &lt;\u4f5c\u4e1a\u540d\u79f0&gt; \u5c06\u6307\u5b9a\u7684screen\u4f5c\u4e1a\u79bb\u7ebf\u3002\n-r &lt;\u4f5c\u4e1a\u540d\u79f0&gt; \u6062\u590d\u79bb\u7ebf\u7684screen\u4f5c\u4e1a\u3002\n-R \u5148\u8bd5\u56fe\u6062\u590d\u79bb\u7ebf\u7684\u4f5c\u4e1a\u3002\u82e5\u627e\u4e0d\u5230\u79bb\u7ebf\u7684\u4f5c\u4e1a\uff0c\u5373\u5efa\u7acb\u65b0\u7684screen\u4f5c\u4e1a\u3002\n-s \u6307\u5b9a\u5efa\u7acb\u65b0\u89c6\u7a97\u65f6\uff0c\u6240\u8981\u6267\u884c\u7684shell\u3002\n-ls\u6216--list \u663e\u793a\u76ee\u524d\u6240\u6709\u7684screen\u4f5c\u4e1a\u3002\n-wipe \u68c0\u67e5\u76ee\u524d\u6240\u6709\u7684screen\u4f5c\u4e1a\uff0c\u5e76\u5220\u9664\u5df2\u7ecf\u65e0\u6cd5\u4f7f\u7528\u7684screen\u4f5c\u4e1a\u3002\n</code></pre> <p>\u5e38\u7528 screen \u8bed\u6cd5</p> <ul> <li>screen -S yourname -&gt; \u65b0\u5efa\u4e00\u4e2a\u53ebyourname\u7684session</li> <li>screen -ls -&gt; \u5217\u51fa\u5f53\u524d\u6240\u6709\u7684session</li> <li>screen -r yourname -&gt; \u56de\u5230yourname\u8fd9\u4e2asession</li> <li>screen -d yourname -&gt; \u8fdc\u7a0bdetach\u67d0\u4e2asession</li> <li>screen -d -r yourname -&gt; \u7ed3\u675f\u5f53\u524dsession\u5e76\u56de\u5230yourname\u8fd9\u4e2asession</li> </ul> <p>\u5728\u6bcf\u4e2ascreen session \u4e0b\uff0c\u6240\u6709\u547d\u4ee4\u90fd\u4ee5 ctrl+a(C-a) \u5f00\u59cb\u3002</p> <ul> <li>C-a ? -&gt; \u663e\u793a\u6240\u6709\u952e\u7ed1\u5b9a\u4fe1\u606f</li> <li>C-a c -&gt; \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fd0\u884cshell\u7684\u7a97\u53e3\u5e76\u5207\u6362\u5230\u8be5\u7a97\u53e3</li> <li>C-a n -&gt; Next\uff0c\u5207\u6362\u5230\u4e0b\u4e00\u4e2a window</li> <li>C-a p -&gt; Previous\uff0c\u5207\u6362\u5230\u524d\u4e00\u4e2a window</li> <li>C-a 0..9 -&gt; \u5207\u6362\u5230\u7b2c 0..9 \u4e2a window</li> <li>Ctrl+a [Space] -&gt; \u7531\u89c6\u7a970\u5faa\u5e8f\u5207\u6362\u5230\u89c6\u7a979</li> <li>C-a C-a -&gt; \u5728\u4e24\u4e2a\u6700\u8fd1\u4f7f\u7528\u7684 window \u95f4\u5207\u6362</li> <li>C-a x -&gt; \u9501\u4f4f\u5f53\u524d\u7684 window\uff0c\u9700\u7528\u7528\u6237\u5bc6\u7801\u89e3\u9501</li> <li>C-a d -&gt; detach\uff0c\u6682\u65f6\u79bb\u5f00\u5f53\u524dsession\uff0c\u5c06\u76ee\u524d\u7684 screen session (\u53ef\u80fd\u542b\u6709\u591a\u4e2a windows) \u4e22\u5230\u540e\u53f0\u6267\u884c\uff0c\u5e76\u4f1a\u56de\u5230\u8fd8\u6ca1\u8fdb screen \u65f6\u7684\u72b6\u6001\uff0c\u6b64\u65f6\u5728 screen session \u91cc\uff0c\u6bcf\u4e2a window \u5185\u8fd0\u884c\u7684 process (\u65e0\u8bba\u662f\u524d\u53f0/\u540e\u53f0)\u90fd\u5728\u7ee7\u7eed\u6267\u884c\uff0c\u5373\u4f7f logout \u4e5f\u4e0d\u5f71\u54cd\u3002</li> <li>C-a z -&gt; \u628a\u5f53\u524dsession\u653e\u5230\u540e\u53f0\u6267\u884c\uff0c\u7528 shell \u7684 fg \u547d\u4ee4\u5219\u53ef\u56de\u53bb\u3002</li> <li>C-a w -&gt; \u663e\u793a\u6240\u6709\u7a97\u53e3\u5217\u8868</li> <li>C-a t -&gt; Time\uff0c\u663e\u793a\u5f53\u524d\u65f6\u95f4\uff0c\u548c\u7cfb\u7edf\u7684 load</li> <li>C-a k -&gt; kill window\uff0c\u5f3a\u884c\u5173\u95ed\u5f53\u524d\u7684 window</li> <li>C-a [ -&gt; \u8fdb\u5165 <code>copy mode</code>\uff0c\u5728 copy mode \u4e0b\u53ef\u4ee5\u56de\u6eda\u3001\u641c\u7d22\u3001\u590d\u5236\u5c31\u50cf\u7528\u4f7f\u7528 vi \u4e00\u6837<ul> <li><code>C-b</code> Backward\uff0cPageUp</li> <li><code>C-f</code> Forward\uff0cPageDown</li> <li>H(\u5927\u5199) High\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u5de6\u4e0a\u89d2</li> <li>L Low\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u5de6\u4e0b\u89d2</li> <li><code>0</code> \u79fb\u5230\u884c\u9996</li> <li><code>$</code> \u884c\u672b</li> <li>w forward one word\uff0c\u4ee5\u5b57\u4e3a\u5355\u4f4d\u5f80\u524d\u79fb</li> <li>b backward one word\uff0c\u4ee5\u5b57\u4e3a\u5355\u4f4d\u5f80\u540e\u79fb</li> <li>Space \u7b2c\u4e00\u6b21\u6309\u4e3a\u6807\u8bb0\u533a\u8d77\u70b9\uff0c\u7b2c\u4e8c\u6b21\u6309\u4e3a\u7ec8\u70b9</li> <li>Esc \u7ed3\u675f copy mode</li> <li>C-u/C-d \u534a\u5c4f\u5e55</li> </ul> </li> <li>C-a ] -&gt; Paste\uff0c\u628a\u521a\u521a\u5728 copy mode \u9009\u5b9a\u7684\u5185\u5bb9\u8d34\u4e0a</li> </ul> <pre><code># 2. \u65b0\u5efa\u7a97\u53e3\uff08\u53ef\u4ee5\u7528 pid \u533a\u5206\uff0c\u4f46\u547d\u540d\u603b\u6709\u597d\u5904\uff09\nscreen -S david \n# \u9ed8\u8ba4\u6253\u5f00 bash\uff0c\u4e5f\u53ef\u4ee5\u5728 screen \u540e\u52a0\u53c2\u6570\n#screen vi david.txt  # screen\u521b\u5efa\u4e00\u4e2a\u6267\u884cvi david.txt\u7684\u5355\u7a97\u53e3\u4f1a\u8bdd\uff0c\u9000\u51favi \u5c06\u9000\u51fa\u8be5\u7a97\u53e3/\u4f1a\u8bdd\u3002\n\n# 3. \u7ba1\u7406\u7a97\u53e3\uff08\u4ee5\u4e0b\u5728 screen \u7a97\u53e3\u4e0b\u8fd0\u884c\uff09\n# \u7a97\u53e3\u7ba1\u7406\nC-a w    # \u5217\u51fa\u5f53\u524d\u6240\u6709\u7a97\u53e3\nC-a A    # \u6765\u4e3a\u5f53\u524d\u7a97\u53e3\u91cd\u547d\u540d\n# \u5206\u79bb \u2b50\ufe0f \u4e2d\u65ad\u4f1a\u8bdd\nC-a d\n\n# 4. \u91cd\u65b0\u8fde\u63a5\u4f1a\u8bdd\n# \u4e2d\u65ad\u4f1a\u8bdd\u540e\uff0c\u5728\u6b63\u5e38bash\u73af\u5883\u4e0b\u8fde\u63a5\nscreen -ls\nscreen -r 12865\n\n# 5. \u6e05\u9664\u4f1a\u8bdd\nscreen -wipe    # screen -list\u4f1a\u663e\u793a\u8be5\u4f1a\u8bdd\u4e3adead\u72b6\u6001\n\n# 6. \u5173\u95ed/\u6740\u6b7b\n# \u5355\u4e2a\u7a97\u53e3\uff08C-a w\u67e5\u770b\uff09\uff1a1. \u9000\u51fa\u6700\u5f00\u59cb\u7684bash\u8fdb\u7a0b\uff1b2. \u5feb\u6377\u952e\nC-a k\n# \u6574\u4e2ascreen\u8fdb\u7a0b/\u4f1a\u8bdd\uff1a1. \u4f9d\u6b21\u9000\u51fa\uff1b2. \nC-a quit\n</code></pre> <p>C/P \u6a21\u5f0f</p> <ul> <li>screen\u7684\u53e6\u4e00\u4e2a\u5f88\u5f3a\u5927\u7684\u529f\u80fd\u5c31\u662f\u53ef\u4ee5\u5728\u4e0d\u540c\u7a97\u53e3\u4e4b\u95f4\u8fdb\u884c\u590d\u5236\u7c98\u8d34\u4e86\u3002\u4f7f\u7528\u5feb\u6377\u952eC-a \u6216\u8005C-a [\u53ef\u4ee5\u8fdb\u5165copy/paste\u6a21\u5f0f\uff0c\u8fd9\u4e2a\u6a21\u5f0f\u4e0b\u53ef\u4ee5\u50cf\u5728vi\u4e2d\u4e00\u6837\u79fb\u52a8\u5149\u6807\uff0c\u5e76\u53ef\u4ee5\u4f7f\u7528\u7a7a\u683c\u952e\u8bbe\u7f6e\u6807\u8bb0\u3002\u5176\u5b9e\u5728\u8fd9\u4e2a\u6a21\u5f0f\u4e0b\u6709\u5f88\u591a\u7c7b\u4f3cvi\u7684\u64cd\u4f5c\uff0c\u8b6c\u5982\u4f7f\u7528/\u8fdb\u884c\u641c\u7d22\uff0c\u4f7f\u7528y\u5feb\u901f\u6807\u8bb0\u4e00\u884c\uff0c\u4f7f\u7528w\u5feb\u901f\u6807\u8bb0\u4e00\u4e2a\u5355\u8bcd\u7b49\u3002\u5173\u4e8eC/P\u6a21\u5f0f\u4e0b\u7684\u9ad8\u7ea7\u64cd\u4f5c\uff0c\u5176\u6587\u6863\u7684\u8fd9\u4e00\u90e8\u5206\u6709\u6bd4\u8f83\u8be6\u7ec6\u7684\u8bf4\u660e\u3002 <li>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u79fb\u52a8\u5149\u6807\u5230\u6307\u5b9a\u4f4d\u7f6e\uff0c\u6309\u4e0b\u7a7a\u683c\u8bbe\u7f6e\u4e00\u4e2a\u5f00\u5934\u6807\u8bb0\uff0c\u7136\u540e\u79fb\u52a8\u5149\u6807\u5230\u7ed3\u5c3e\u4f4d\u7f6e\uff0c\u6309\u4e0b\u7a7a\u683c\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u6807\u8bb0\uff0c\u540c\u65f6\u4f1a\u5c06\u4e24\u4e2a\u6807\u8bb0\u4e4b\u95f4\u7684\u90e8\u5206\u50a8\u5b58\u5728copy/paste buffer\u4e2d\uff0c\u5e76\u9000\u51facopy/paste\u6a21\u5f0f\u3002\u5728\u6b63\u5e38\u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u5feb\u6377\u952eC-a ]\u5c06\u50a8\u5b58\u5728buffer\u4e2d\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u5f53\u524d\u7a97\u53e3\u3002</li>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_13","title":"\u8bbe\u7f6e\u56de\u6eda\u5386\u53f2\u5927\u5c0f","text":"<p>\u6309 <code>CTRL-a</code> <code>:</code>\uff08\u8fdb\u5165\u5c4f\u5e55\u547d\u4ee4\u884c\u6a21\u5f0f\uff09\uff0c\u7136\u540e <code>scrollback 10000</code></p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#vim","title":"vim","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_14","title":"\u5217\u7f16\u8f91","text":"<p><code>ctrl+v</code> \u7136\u540e\u9009\u62e9\u8981\u7f16\u8f91\u7684\u5217, \u7136\u540e I\uff08\u5373<code>shift\uff0bi</code>\uff09\u8fdb\u884c\u7f16\u8f91, \u5b8c\u6210\u540e <code>ESC</code> \u6267\u884c, \u8981\u7b49\u5f85\u4e00\u5b9a\u65f6\u95f4.</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_15","title":"\u590d\u5236\u5230\u7cfb\u7edf\u526a\u8d34\u677f","text":"<p>\u7c98\u8d34\u64cd\u4f5c\u5728\u57fa\u7840\u8bbe\u7f6e\u4e2d\u76f4\u63a5\u7528\u7cfb\u7edf\u5feb\u6377\u952e\u5373\u53ef\uff1b\u6240\u4ee5\u5173\u952e\u5728\u590d\u5236\u5230\u7cfb\u7edf\u526a\u8d34\u677f\u3002</p> <pre><code>\"+yy  // \u590d\u5236\u5f53\u524d\u884c\u5230\u526a\u5207\u677f\n\"+p   // \u5c06\u526a\u5207\u677f\u5185\u5bb9\u7c98\u8d34\u5230\u5149\u6807\u540e\u9762\n\"ayy  // \u590d\u5236\u5f53\u524d\u884c\u5230\u5bc4\u5b58\u5668 a\n\"ap   // \u5c06\u5bc4\u5b58\u5668 a \u4e2d\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u5149\u6807\u540e\u9762\n</code></pre> <p>\u53c2\u89c1 \u5982\u4f55\u5c06 Vim \u526a\u8d34\u677f\u91cc\u9762\u7684\u4e1c\u897f\u7c98\u8d34\u5230 Vim \u4e4b\u5916\u7684\u5730\u65b9\uff1f</p> <p>Vim \u4e2d\u7684\u590d\u5236\u3001\u5220\u9664\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u5b58\u653e\u5230\u9ed8\u8ba4\uff08\u672a\u547d\u540d\uff09\u5bc4\u5b58\u5668\u4e2d\uff0c\u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7\u7c98\u8d34\u64cd\u4f5c\u8bfb\u53d6\u9ed8\u8ba4\u5bc4\u5b58\u5668\u4e2d\u7684\u5185\u5bb9\u3002\u5bc4\u5b58\u5668\u662f\u5b8c\u6210\u8fd9\u4e00\u8fc7\u7a0b\u7684\u4e2d\u8f6c\u7ad9\uff0cVim \u652f\u6301\u7684\u5bc4\u5b58\u5668\u975e\u5e38\u591a\uff0c\u5176\u4e2d\u5e38\u7528\u7684\u6709 a-zA-Z0-9+\u201c\u3002\u5176\u4e2d\uff1a</p> <ul> <li>0-9\uff1a\u8868\u793a\u6570\u5b57\u5bc4\u5b58\u5668\uff0c\u662f Vim \u7528\u6765\u4fdd\u5b58\u6700\u8fd1\u590d\u5236\u3001\u5220\u9664\u7b49\u64cd\u4f5c\u7684\u5185\u5bb9\uff0c\u5176\u4e2d 0 \u53f7\u5bc4\u5b58\u5668\u4fdd\u5b58\u7684\u662f\u6700\u8fd1\u4e00\u6b21\u7684\u64cd\u4f5c\u5185\u5bb9\u3002</li> <li>a-zA-Z\uff1a\u8868\u793a\u7528\u6237\u5bc4\u5b58\u5668\uff0cVim \u4e0d\u4f1a\u8bfb\u5199\u8fd9\u90e8\u5206\u5bc4\u5b58\u5668</li> <li>\u201c\uff08\u5355\u4e2a\u53cc\u5f15\u53f7\uff09\uff1a\u672a\u547d\u540d\u7684\u5bc4\u5b58\u5668\uff0c\u662f Vim \u7684\u9ed8\u8ba4\u5bc4\u5b58\u5668\uff0c\u4f8b\u5982\u5220\u9664\u3001\u590d\u5236\u7b49\u64cd\u4f5c\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u4fdd\u5b58\u5230\u8fd9\u91cc\u3002</li> <li>+\uff1a\u526a\u5207\u677f\u5bc4\u5b58\u5668\uff0c\u5173\u8054\u7cfb\u7edf\u526a\u5207\u677f\uff0c\u4fdd\u5b58\u5728\u8fd9\u4e2a\u5bc4\u5b58\u5668\u4e2d\u7684\u5185\u5bb9\u53ef\u4ee5\u88ab\u7cfb\u7edf\u5176\u4ed6\u7a0b\u5e8f\u8bbf\u95ee\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5bc4\u5b58\u5668\u8bbf\u95ee\u5176\u4ed6\u7a0b\u5e8f\u4fdd\u5b58\u5230\u526a\u5207\u677f\u4e2d\u7684\u5185\u5bb9\u3002</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#zsh","title":"zsh","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#zsh_1","title":"zsh \u5b89\u88c5","text":"<pre><code>apt install zsh\n# \u4e8b\u5b9e\u4e0a\u53ef\u4ee5\u76f4\u63a5\u8df3\u5230\u4e0b\u9762\u7684 oh-my-zsh\nchsh -s /bin/zsh\nreboot  # \u4e4b\u524d\u9047\u5230\u4e86\u767b\u9646\u4e0d\u4e0a\u7684\u95ee\u9898\uff0c\u91cd\u542f\u89e3\u51b3\u4e86\n# \u82e5 chsh \u4e0d\u884c\u7684\u8bdd\uff0c\u53ef\u76f4\u63a5\u4fee\u6539\u914d\u7f6e\n# vim /etc/passwd/\necho $SHELL\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#oh-my-zsh","title":"oh-my-zsh","text":"<pre><code>sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n# sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n# \u6216\u8005\u8fd9\u4e2a\u4e5f\u884c\uff0c\u4f46\u7528 wget \u6709\u65f6\u8fde\u4e0d\u4e0a Github\uff1f\n</code></pre> <p>\u53ef\u80fd\u9047\u5230\u7f51\u7edc\u95ee\u9898\uff0c\u79bb\u7ebf\u5b89\u88c5\u53c2 here</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_16","title":"\u63d2\u4ef6","text":"<pre><code>sudo apt install autojump\ngit clone https://github.com/zsh-users/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting\n</code></pre> <p>\u914d\u7f6e <code>.zshrc</code></p> <pre><code>plugins=(\n  git\n  sudo\n  extract\n  autojump\n  zsh-syntax-highlighting\n  zsh-autosuggestions\n)\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_17","title":"\u5173\u95ed\u81ea\u52a8\u66f4\u65b0","text":"<p>\u8bbe\u7f6e <code>DISABLE_AUTO_UPDATE</code> \u4e3a true</p>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_18","title":"\u547d\u4ee4/\u5de5\u5177","text":"<ul> <li><code>ncdu</code>: \u53ef\u89c6\u5316du\u7684\u7ed3\u679c</li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#alias","title":"alias","text":"<pre><code>apt install tree bat trash-cli\n\nalias getipcn=\"curl myip.ipip.net\"\nalias ip=\"curl ip.sb\"\n\nalias du='du -d 1'\nalias prettyjson='python -m json.tool'\n\nalias tree=\"tree -N\"\nalias bat=\"batcat\"  # \u6ce8\u610f apt install bat\uff0c\u4f46\u547d\u4ee4\u662f batcat\nalias rm='trash'        # apt-get install trash-cli\n# \u6307\u4ee4 trash-put, trash-empty, trash-list, trash-restore, trash-rm, trash\n</code></pre>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#trash","title":"trash","text":"<ul> <li> <p>\u539f\u672c\u7684\u662f\u8fd9\u4e2a\uff1fhttps://github.com/andreafrancia/trash-cli \u597d\u50cf\u662f\u7528Python\u5b9e\u73b0\u7684\uff0c\u6587\u6863\u5199\u5f97\u6bd4\u8f83\u5168\uff1b</p> </li> <li> <p>\u5728 macOS \u4e0b\uff0c\u7528 brew \u67e5\u4e86\u4e0b\u4f3c\u4e4e\u6709 trash, macos-trash, trash-cli \u4e09\u79cd</p> <ul> <li>\u73b0\u5728\u7528\u7684 <code>trash</code> \u4f3c\u4e4e\u76f4\u63a5\u79fb\u52a8\u5230\u4e86 Trash \u6587\u4ef6\u5939\u4e0b\u800c\u6ca1\u6709\u63d0\u4f9b\u5982 <code>trash-list</code> \u7b49\u547d\u4ee4\uff0c\u800c\u63d0\u4f9b\u4e86 <code>-l, -e</code> \u7b49\u53c2\u6570\uff1b</li> </ul> </li> <li> <p>\u5176\u4f59\u7684 GitHub \u9879\u76ee\u5b58\u7591\uff1b</p> </li> <li> <p>\u5728 Ubuntu \u4e0b\u901a\u8fc7 apt \u5b89\u88c5\u4e86 <code>trash-cli</code>\uff0c\u6b63\u662f\u57fa\u4e8e Python \u7684\u90a3\u4e00\u4e2a</p> <ul> <li>\u6307\u4ee4\u5305\u62ec <code>trash, trash-put, trash-empty, trash-list, trash-restore, trash-rm</code></li> </ul> </li> </ul>"},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#_19","title":"\u5176\u4ed6","text":""},{"location":"Linux/tutor-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3/#docker","title":"\u5224\u65ad\u51fa\u5426\u5904\u4e8e docker \u73af\u5883","text":"<pre><code>I # \u65b9\u5f0f\u4e00\uff1a\u5224\u65ad\u6839\u76ee\u5f55\u4e0b .dockerenv \u6587\u4ef6\nls -alh /.dockerenv    # \u975e docker \u73af\u5883\u4e0b\u6ca1\u6709\u8fd9\u4e2a\u6587\u4ef6\n# \u65b9\u5f0f\u4e8c\uff1a\u67e5\u8be2\u7cfb\u7edf\u8fdb\u7a0b\u7684cgroup\u4fe1\u606f\ncat /proc/1/cgroup     # docker \u73af\u5883\u4e0b\u8fd9\u91cc\u4f1a\u6709\u5f88\u591a docker \u5173\u952e\u5b57\ncat /proc/1/cgroup \n</code></pre>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/","title":"ABSA: \u57fa\u4e8e\u65b9\u9762\u7684\u60c5\u611f\u5206\u6790","text":"<ul> <li>Aspect-Based Sentiment Analysis (ABSA)<ul> <li>Paper with code</li> <li>\u7efc\u8ff0 22\u2019arXiv A Survey on Aspect-Based SentimentAnalysis: Tasks, Methods, and Challenges | 2203 | \u4e2d\u6587\u4ecb\u7ecd \u65b9\u9762\u7ea7\u60c5\u611f\u5206\u6790(ABSA)\u6700\u65b0\u7efc\u8ff0\u2014\u4efb\u52a1\u3001\u65b9\u6cd5\u4e0e\u6311\u6218</li> </ul> </li> </ul> <p>\u5177\u4f53\u5230 ASTE \u4efb\u52a1\u4e0a</p> <ul> <li>paper with code Aspect Sentiment Triplet Extraction</li> <li>\u7ec6\u7c92\u5ea6\u60c5\u611f\u4e09\u5143\u7ec4\u62bd\u53d6\u4efb\u52a1\u53ca\u5176\u6700\u65b0\u8fdb\u5c55 | 2109<ul> <li>\u4ecb\u7ecd\u4e86 ASTE-base, JET, Span-ASTE \u4e09\u7bc7\u8fde\u7eed\u7684\u5de5\u4f5c</li> </ul> </li> </ul> <p>\u6709\u4e00\u4e9b\u73b0\u6210\u7684\u5305, \u53ef\u60dc\u90fd\u662f\u9488\u5bf9\u7ecf\u5178\u7684\u4efb\u52a1\u8bbe\u7f6e</p> <ul> <li>ABSA-PyTorch \u96c6\u6210\u5404\u79cd\u65b9\u6cd5 1.5k</li> <li>pyABSA \u66f4\u65b0\u4e00\u70b9\u7684\u5e93, \u66f4\u591aLM\u7684\u6a21\u578b, \u8fd8\u6709\u6570\u636e\u96c6 repo. \u5176\u4e2d LC-ABSA\u5206\u652f \u6709\u4e00\u4e9b\u4e2d\u6587\u7684\u6570\u636e\u96c6.</li> </ul>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#_1","title":"\u4ecb\u7ecd","text":"<p>\u6458\u81ea\u90a3\u7bc7\u4ecb\u7ecd\u7efc\u8ff0\u7684\u6587\u7ae0, \u975e\u5e38\u6e05\u6670.</p> <p>\u672f\u8bed\u6df7\u4e71, \u53c2\u89c1 here, \u57fa\u672c\u4e0a, \u53ef\u4ee5\u5206\u4e3a\u56db\u4e2a\u60c5\u611f\u5143\u7d20aspect category, aspect term,opinion term, sentiment polarity\u5177\u4f53\u7684:</p> <ul> <li>aspect category\uff1a\u6d89\u53ca\u7684 aspect \u7684\u7c7b\u522b\uff0c\u5f80\u5f80\u662f\u5404\u4e2a\u9886\u57df\u63d0\u524d\u5b9a\u4e49\u597d\u7684\u3002\u4f8b\u5982\u9910\u5385\u9886\u57df\u53ef\u4ee5\u5b9a\u4e49\u201c\u98df\u7269\u201d\u3001\u201c\u670d\u52a1\u201d\u7b49\u7c7b\u522b\uff1b\u6216\u8005\u66f4\u7ec6\u7c92\u5ea6\u7684\u201c\u98df\u7269\u8d28\u91cf\u201d\u3001\u201c\u98df\u7269\u5916\u89c2\u201d\u7b49</li> <li>aspect term: \u6587\u4e2d\u63d0\u5230\u7684\u5177\u4f53 aspect\uff0c\u4e00\u822c\u662f\u6587\u4e2d\u8868\u8ff0\u7684\u67d0\u4e2a\u8bcd\u6216\u77ed\u8bed\u3002\u5982\u679c\u6ca1\u6709\u663e\u793a\u63d0\u53ca\uff08\u4f8b\u5982\u201c\u8fd9\u4e5f\u592a\u8d35\u4e86\u5427\uff01\u201d\uff09\uff0c\u53ef\u4ee5\u8bb0\u505a none. [\u8fd8\u6709target\u7684\u6982\u5ff5, \u4f8b\u5982 \u300c\u534e\u4e3aP40\u7684\u62cd\u7167\u6548\u679c\u592a\u597d\u4e86\u5427\uff0c\u5c4f\u5e55\u4e5f\u4e0d\u9519\u300d \u4e2d P40\u662ftarget, \u800c\u62cd\u7167\u6548\u679c\u548c\u5c4f\u5e55\u662f aspect, \u4f46\u6709\u65f6\u5019\u4e0d\u505a\u533a\u5206]</li> <li>opinion term: \u6587\u4e2d\u63d0\u5230\u7684 opinion\uff0c\u4e00\u822c\u548c\u67d0\u4e2a aspect \u7d27\u5bc6\u5173\u8054</li> <li>sentiment polarity\uff1a\u9488\u5bf9\u67d0\u4e2a aspect \u7684\u60c5\u611f\u503e\u5411\uff0c\u5927\u591a\u6570\u65f6\u5019\u662f\u4e09\u4e2a\u7c7b\u522b\uff1a\u6b63\u9762/\u8d1f\u9762/\u4e2d\u6027\u3002\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u7684\u66f4\u52a0\u7c97\u7c92\u5ea6\uff08\u53ea\u6709\u6b63\u8d1f\u6027\uff09\u6216\u66f4\u7ec6\u7c92\u5ea6\uff08\u52a0\u4e0a\u5f3a\u5ea6\u7b49\u6210\u4e3a\u4e94\u4e2a\u7c7b\u522b\uff09</li> </ul>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#absa_1","title":"ABSA \u4efb\u52a1\u5212\u5206","text":"<p>\u9488\u5bf9\u4e0a\u9762\u7684\u56db\u4e2a\u5143\u7d20\u53ef\u4ee5\u8fdb\u884c\u5355\u4e00\u7684\u62bd\u53d6, (\u6ce8\u610f\u6709\u90e8\u5206\u662f\u4ee5\u7ed9\u5b9aaspect\u7684!)</p> <ul> <li>Aspect term extraction (ATE)\uff1a\u8bc6\u522b\u53e5\u5b50\u4e2d\u663e\u5f0f\u63d0\u53ca\u7684\u65b9\u9762\u8bcd\u3002\u4f8b\u5982\u7ed9\u5b9a\u4e0a\u9762\u7684\u4f8b\u53e5\uff0c\u6a21\u578b\u9700\u8981\u9884\u6d4b\u51fa \u201cpizza\u201d \u8fd9\u4e2a\u8bcd\u3002</li> <li>Aspect category detection (ACD): \u8bc6\u522b\u53e5\u5b50\u4e2d\u63d0\u53ca\u5230\u7684 aspect \u7c7b\u522b\u3002\u4f8b\u5982\u9910\u5385\u9886\u57df\u603b\u5171\u670910\u4e2a\u7c7b\u522b\uff0c\u67d0\u4e2a\u53e5\u5b50\u63d0\u53ca\u5230\u4e86\u5176\u4e2d\u7684\u201c\u98df\u7269\u201d\u548c\u201c\u73af\u5883\u201d\u4e24\u4e2a\u7c7b\u522b\u3002</li> <li>Aspect sentiment classification (ASC): \u5224\u65ad\u9488\u5bf9\u67d0\u4e2a aspect term \u6216 aspect category \u7684\u60c5\u611f\u503e\u5411\u662f\u4ec0\u4e48\u3002\u8f93\u5165\u4e3a\u4e00\u4e2a\u53e5\u5b50\u4ee5\u53ca\u67d0\u4e2a\u7279\u5b9a\u7684 aspect term/category\uff0c\u8f93\u51fa\u4e3a\u60c5\u611f\u7c7b\u522b\u3002</li> <li>Opinion term extraction (OTE)\uff1a\u8bc6\u522b\u53e5\u5b50\u4e2d\u63d0\u53ca\u7684 opinion expression\u3002\u7531\u4e8e\u53ea\u8bc6\u522bopinion term \u5e76\u65e0\u592a\u5927\u610f\u4e49\uff08\u4eba\u4eec\u4f1a\u66f4\u5173\u5fc3\u5230\u5e95\u662f\u9488\u5bf9\u4ec0\u4e48\u53d1\u8868\u7684\u89c2\u70b9\uff09\uff0c\u6240\u4ee5\u66f4\u5e38\u89c1\u7684\u4efb\u52a1\u662f\u7ed9\u5b9a\u67d0\u4e2a aspect\uff0c\u8bc6\u522b\u51fa\u5176\u5bf9\u5e94\u7684 opinion term\uff0c\u4e00\u822c\u7f29\u5199\u4e3a TOWE\u3002</li> </ul> <p>\u4f46\u66f4\u591a\u662f\u8054\u5408\u7684, \u53ef\u4ee5\u5c06 compound ABSA \u4efb\u52a1\u5206\u4e3a\uff1a</p> <ol> <li>Pair extraction task: \u8f93\u51fa\u6d89\u53ca\u4e24\u4e2a\u5143\u7d20\uff0c\u6240\u4ee5\u662f\u4ee5\u4e8c\u5143\u7ec4\u7684\u5f62\u5f0f\u8f93\u51fa    - Aspect-opinion pair extraction (AOPE)\uff1a\u6316\u6398\u51fa(aspect term, opinion term) pairs\u3002    - End-to-End ABSA (E2E-ABSA)\uff1a\u6316\u6398\u51fa (aspect term, sentiment polarity) pairs\u3002\u7531\u4e8e\u8fd9\u4e24\u4e2a\u5143\u7d20\u975e\u5e38\u91cd\u8981\uff08\u8ba9\u4eba\u8fc5\u901f\u4e86\u89e3\u5728\u4ec0\u4e48\u65b9\u9762\u4e0a\u8868\u73b0\u51fa\u4e86\u4ec0\u4e48\u6837\u6781\u6027\u7684\u60c5\u611f\uff09\uff0c\u5c5e\u4e8e\u6700\u65e9\u88ab\u7814\u7a76\u7684 compound ABSA \u4efb\u52a1\uff0c\u6240\u4ee5\uff08\u65e9\u671f\uff09\u5f88\u591a\u8bba\u6587\u4e5f\u4f1a\u76f4\u63a5\u79f0\u8fd9\u4e2a\u4efb\u52a1\u4e3a\u201cABSA\u201d \u6216 \u201cunified ABSA\u201d\uff0c\u8fd9\u91cc\u4e3a\u4e86\u4e0d\u5bfc\u81f4\u6b67\u4e49\uff0c\u6211\u4eec\u7528\u201cE2E-ABSA\u201d \u6765\u79f0\u547c\u8fd9\u4e2a\u4efb\u52a1\u3002    - Aspect category sentiment analysis (ACSA): \u6316\u6398\u51fa (aspect category, sentiment polarity) pairs\uff0c\u7c7b\u4f3c\u4e8eE2E-ABSA\u4efb\u52a1\uff0c\u4f46\u6b64\u65f6\u7528 category \u6765\u6307\u4ee3aspect\uff0c\u4ece\u800c\u5373\u4f7f\u9762\u5bf9\u88ab\u9690\u5f0f\u8868\u8fbe\u7684aspect\uff08aspect term\u4e3anone\uff09\uff0c\u6a21\u578b\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u89e3\u3002</li> <li>Triplet extraction task\uff1a\u8f93\u51fa\u6d89\u53ca\u4e09\u4e2a\u5143\u7d20\uff0c\u6240\u4ee5\u662f\u4ee5\u4e09\u5143\u7ec4\u7684\u5f62\u5f0f\u8f93\u51fa    - Aspect sentiment triplet extraction (ASTE): \u6316\u6398\u51fa (aspect term, opinion term, sentiment polarity) \u4e09\u5143\u7ec4    - Aspect-category-sentiment detection (ACSD): \u6316\u6398\u51fa (aspect term, aspect category, sentiment polarity) \u4e09\u5143\u7ec4</li> <li>Quad extraction task\uff1a\u8f93\u51fa\u6d89\u53ca\u56db\u4e2a\u5143\u7d20\uff0c\u6240\u4ee5\u662f\u4ee5\u56db\u5143\u7ec4\u7684\u5f62\u5f0f\u8f93\u51fa    - Aspect sentiment quad prediction (ASQP): \u6316\u6398\u56db\u4e2a\u5143\u7d20\u7ec4\u6210\u7684\u56db\u5143\u7ec4\u3002\u53ef\u4ee5\u770b\u4f5c\u662f\u6700\u5168\u9762\u7684\u4e00\u4e2a\u4efb\u52a1\uff0c\u53ef\u4ee5\u5f97\u5230\u5168\u90e8\u7684\u4fe1\u606f\u3002</li> </ol>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#absa_2","title":"ABSA \u6a21\u578b\u6982\u62ec","text":"<p>\u7c97\u7565\u6765\u8bf4\uff0c\u6a21\u578b\u7684\u8bbe\u8ba1\u5927\u4f53\u53d6\u51b3\u4e8e\u4e24\u4e2a\u65b9\u9762\uff1a1\uff09\u4efb\u52a1\u5f62\u5f0f\u4ee5\u53ca 2\uff09\u4efb\u52a1\u7279\u70b9\u3002\u4efb\u52a1\u5f62\u5f0f\u6307\u7684\u662f\u5982\u4f55\u5efa\u6a21\u5177\u4f53\u7684\u4efb\u52a1\uff1a</p> <ul> <li>\u4f8b\u5982\u5bf9\u4e8e ATE \u548c OTE \u4efb\u52a1\uff0c\u7531\u4e8e\u4ed6\u4eec\u76ee\u6807\u90fd\u662f\u9884\u6d4b\u6587\u4e2d\u7684\u4e00\u6bb5\u8fde\u7eed\u6587\u672c\u7247\u6bb5\uff08text span\uff09\uff0c\u6240\u4ee5\u7ecf\u5e38\u88ab\u5efa\u6a21\u6210\u4e00\u4e2a\u5e8f\u5217\u6807\u6ce8\u95ee\u9898 (sequence tagging or sequence labeling)\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u5f62\u5f0f\u76f8\u540c\u7684\u4efb\u52a1\uff0c\u5f80\u5f80\u53ef\u4ee5\u91c7\u7528\u76f8\u4f3c\u7684\u6a21\u578b\u3002\u4f8b\u5982\u7528 BiLSTM+CRF \u6216     BERT + linear layer \u53ef\u4ee5\u65e0\u5dee\u522b\u5730\u89e3\u51b3\u8fd9\u4e24\u4e2a\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\u3002</li> <li>\u53c8\u6bd4\u5982\u4e3a\u4e86\u7aef\u5230\u7aef\u5730\u89e3\u51b3 ACSA \u95ee\u9898\uff0c\u4e00\u79cd\u53eb \u201cadd-one-dimenion\u201d \u7684\u65b9\u6cd5\u88ab\u63d0\u51fa\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2aaspect category\uff0c\u9664\u4e86\u6b63\u5411/\u8d1f\u5411/\u4e2d\u6027\u4ee5\u5916\uff0c\u989d\u5916\u52a0\u4e86\u4e00\u4e2a N/A \u7ef4\u5ea6\uff0c\u5982\u679c\u9884\u6d4b\u7ed3\u679c\u4e3a\u6b64\u7ef4\u5ea6\uff0c\u5219\u8bf4\u660e\u8be5aspect category\u5e76\u4e0d\u5b58\u5728\u3002\u8fd9\u79cd\u601d\u60f3\u540e\u6765\u4e5f\u88ab\u7528\u5728\u4e86\u89e3\u51b3 ACSD \u4efb\u52a1\u4e0a\u3002</li> </ul> <p>\u4efb\u52a1\u7279\u70b9\u6307\u7684\u662f\u6a21\u578b\u6839\u636e\u4efb\u52a1\u7684\u7279\u70b9\u6765\u505a\u7f51\u7edc\u7ed3\u6784\u7684\u8bbe\u8ba1\uff1a</p> <ul> <li>\u4f8b\u5982 ASC \u548c TOWE \u867d\u7136\u76ee\u6807\u4e0d\u540c\uff1a\u4e00\u4e2a\u662f\u9884\u6d4b\u5bf9\u5e94\u7684 opinion term, \u4e00\u4e2a\u662f\u9884\u6d4b\u5bf9\u5e94\u7684sentiment polarity\uff0c\u4f46\u7531\u4e8e\u8f93\u5165\u90fd\u662f\u53e5\u5b50\u4ee5\u53ca\u67d0\u4e2aaspect\uff0c\u8fd9\u4e24\u4e2a\u4efb\u52a1\u7684\u8bb8\u591a\u6a21\u578b\u91cd\u70b9\u5c31\u90fd\u843d\u5728\u4e86\u5982\u4f55\u5efa\u6a21 aspect \u548c sentence context \u4e4b\u95f4\u7684\u4ea4\u4e92\u5173\u7cfb\u6765\u505a\u9884\u6d4b\u3002\u8bb8\u591a attention \u7684\u8bbe\u8ba1\u548c\u64cd\u4f5c\u4e5f\u5c31\u53d8\u5f97\u901a\u7528\u4e86\u3002</li> <li>\u53c8\u6bd4\u5982 ASC \u76ee\u6807\u662f\u9884\u6d4b\u60c5\u611f\u6781\u6027\uff0c\u4e00\u4e2a\u5f88\u76f4\u63a5\u7684\u601d\u8def\u662f\u5982\u679c\u80fd\u627e\u5230 aspect \u4e0e\u5bf9\u5e94\u7684 opinion term \u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u4ee5\u5f88\u597d\u7684\u8f85\u52a9\u9884\u6d4b\u3002\u4e8e\u662f\u6700\u8fd1\u4e00\u4e24\u5e74\u6d8c\u73b0\u4e86\u5927\u91cf\u7684\u5229\u7528GCN \u663e\u5f0f\u5efa\u6a21\u53e5\u6cd5\u6811\u6765\u8f85\u52a9\u9884\u6d4b\u7684\u5de5\u4f5c\uff1aASGCN, CDT, DGEDT, kumaGCN\u2026</li> </ul> <p>\u6b64\u5916\uff0c\u5bf9\u4e8e compound ABSA \u4efb\u52a1\uff0c\u6a21\u578b\u8bbe\u8ba1\u4f1a\u53d8\u5f97\u66f4\u52a0\u56f0\u96be\u4e00\u4e9b\u3002\u6700\u76f4\u63a5\u7684\u65b9\u6cd5\u5c31\u662f pipeline \u7c7b\u578b\u7684\u89e3\u6cd5\uff1a\u628a\u539f\u59cb\u4efb\u52a1\u5206\u89e3\u4e3a\u4e00\u4e2a\u4e2a\u5b50\u4efb\u52a1\uff0c\u7136\u540e\u6328\u4e2a\u89e3\u51b3\u3002\u4f8b\u5982 AOPE \u5c31\u53ef\u4ee5\u5206\u89e3\u6210 ATE \u2192 TOWE\uff0cE2E-ABSA \u53ef\u4ee5\u5206\u89e3\u6210 ATE \u2192 ASC\u3002\u7531\u4e8e\u8fd9\u4e9b\u5b50\u4efb\u52a1\u5f80\u5f80\u5df2\u7ecf\u6709\u5f88\u591a\u6a21\u578b\uff0c\u8fd9\u7c7b\u65b9\u6cd5\u4f1a\u6bd4\u8f83\u5bb9\u6613\u6784\u5efa\u3002</p> <p>\u7136\u800c\u7531\u4e8e\u8bef\u5dee\u4f20\u5bfc\uff08error propagation\uff09\u7684\u95ee\u9898\uff0c\u4e5f\u5373\u6a21\u578b\u7684\u9519\u8bef\u4f1a\u4e00\u6b65\u6b65\u79ef\u7d2f\uff08\u7279\u522b\u662f\u5bf9\u590d\u6742\u4efb\u52a1\u800c\u8a00\uff09\uff0c\u6700\u8fd1\u4e00\u4e24\u5e74\u7684\u5de5\u4f5c\u96c6\u4e2d\u5728\u63d0\u51fa\u7aef\u5230\u7aef\u7684\u6a21\u578b\u6765\u89e3 compound ABSA \u4efb\u52a1\u3002\u53c8\u7531\u4e8e\u5927\u89c4\u6a21\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u5e7f\u6cdb\u5e94\u7528\uff0c\u8bbe\u8ba1\u590d\u6742\u7684\u7f51\u7edc\u67b6\u6784\u5df2\u7ecf\u4e0d\u5b58\u5728\u592a\u5927\u4f18\u52bf\uff0c\u6240\u4ee5\u7814\u7a76\u95ee\u9898\u4e5f\u5c31\u53d8\u6210\u4e86 \u2014 \u201c\u5982\u4f55\u5c06\u4efb\u52a1 X \u8f6c\u5316\u6210\u53ef\u4ee5\u88ab\u7aef\u5230\u7aef\u89e3\u51b3\uff08\u4ece\u800c\u53ef\u4ee5\u5229\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u4f18\u52bf\uff09\u201d\u3002\u4e5f\u51fa\u73b0\u4e86\u4e9b\u5171\u901a(\u76f8\u649e)\u7684\u601d\u8def\uff1a</p> <ul> <li>\u5c06\u8981\u9884\u6d4b\u7684\u5185\u5bb9\u7528\u7edf\u4e00\u7684\u6807\u6ce8\u65b9\u5f0f\uff08tagging scheme\uff09\u6765\u8868\u793a\uff0c\u4f8b\u5982\u89e3 ASTE \u7684\u4e24\u79cdscheme:<ul> <li>Position - Aware Tagging for Aspect Sentiment  Triplet  Extraction (EMNLP 2020)</li> <li>Grid Tagging Scheme for Aspect-oriented Fine-grained Opinion Extraction (EMNLP-Findings 2020)</li> </ul> </li> <li>\u7528 MRC \u6846\u67b6\uff0c\u901a\u8fc7\u8bbe\u8ba1query \u6765\u5173\u8054\u5404\u4e2a\u60c5\u611f\u5143\u7d20\uff1a<ul> <li>Question-Driven Span Labeling Model for Aspect-Opinion Pair Extraction (AAAI 2021)</li> <li>Bidirectional Machine Reading Comprehension  for Aspect Sentiment Triplet Extraction (AAAI 2021)</li> <li>A Joint Training Dual-MRC Framework for Aspect Based Sentiment Analysis (AAAI 2021)</li> </ul> </li> <li>\u7528\u751f\u6210\u5f0f\u6846\u67b6\uff0c\u76f4\u63a5\u751f\u6210\u8981\u9884\u6d4b\u7684\u60c5\u611f\u5143\u7d20/\u60c5\u611f\u5143\u7d20\u7684\u7d22\u5f15\uff1a<ul> <li>Towards Generative Aspect-Based Sentiment  Analysis (ACL 2021)</li> <li>A Unified Generative Framework for Aspect-based Sentiment Analysis (ACL 2021)</li> </ul> </li> </ul> <p>\u6700\u540e\u63d0\u51fa\u4e86\u4e00\u4e9b\u6311\u6218/\u7814\u7a76\u65b9\u5411</p> <ul> <li>\u66f4\u5927\u66f4\u96be\u7684\u6570\u636e\u96c6\uff1aABSA\u5df2\u6709\u6570\u636e\u96c6\u90fd\u8f83\u5c0f\uff0c\u6570\u636e\u91cf\u66f4\u5927\u3001\u66f4\u52a0\u590d\u6742\uff08\u4f8b\u5982\u591a\u9886\u57df\u3001\u591a\u8bed\u8a00\u7684\u6807\u6ce8\u6570\u636e\uff09\u7684\u6570\u636e\u96c6\u4f1a\u975e\u5e38\u6709\u76ca\u4e8e\u63a2\u7d22\u66f4\u591a\u95ee\u9898\u3002</li> <li>\u591a\u6a21\u6001 ABSA\uff1a\u76ee\u524d ABSA \u4efb\u52a1\u90fd\u96c6\u4e2d\u5728\u5355\u6a21\u6001\uff08\u4e5f\u5373\u6587\u672c\uff09\uff0c\u7136\u800c\u73b0\u5b9e\u751f\u6d3b\u4e2d\u591a\u6a21\u6001\u7684\u60c5\u611f\u6570\u636e\u8d8a\u6765\u8d8a\u591a\uff0c\u4f8b\u5982\u7528\u6237\u8bc4\u8bba\u4e2d\u8d8a\u6765\u8d8a\u591a\u4eba\u4f1a\u9644\u5e26\u56fe\u7247\uff0cTwitter/\u5fae\u535a\u4e0a\u53d1\u8868\u8bc4\u8bba\u7684\u540c\u65f6\u4e5f\u53ef\u4ee5\u9644\u5e26\u56fe\u3002</li> <li>\u5927\u4e00\u7edf\u6a21\u578b\uff1aABSA \u6709\u7740\u5404\u79cd\u5404\u6709\u7684\u5b50\u4efb\u52a1\uff0c\u5982\u679c\u6bcf\u4e2a\u4efb\u52a1\u90fd\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u578b\u9700\u8981\u8017\u8d39\u5927\u91cf\u7cbe\u529b\uff0c\u5982\u679c\u6709 unified \u7684\u6a21\u578b\u80fd\u540c\u65f6\u89e3\u51b3\u591a\u4e2a\uff08\u751a\u81f3\u5168\u90e8\uff09\u7684\u4efb\u52a1\uff0c\u4f1a\u5927\u5927\u7b80\u5316\u5b9e\u9645\u5e94\u7528\u3002\u4e0a\u8282\u4e2d\u63d0\u5230\u7684\u7528 MRC \u6216 Seq2Seq \u751f\u6210\u5f0f\u6846\u67b6\u7684\u5de5\u4f5c\u5c31\u5df2\u7ecf\u662f\u8fd9\u4e2a\u65b9\u5411\u7684\u4e00\u4e9b\u63a2\u7d22\u3002</li> </ul>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#aste","title":"ASTE \u8bba\u6587\u7b14\u8bb0","text":"<p>ASTE (Aspect Sentiment Triplet Extraction) \u76f8\u5173\u8bba\u6587. ASTE\u5c31\u662f\u8981\u62bd\u53d6 aspect/option (\u6216\u8005) + sentimental polarity \u5206\u7c7b.</p>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#_2","title":"\u76f8\u5173\u8bba\u6587","text":"<p>BART-ASTE \u4e2d\u7ed9\u51fa\u7684\u6a21\u578b\u6bd4\u8f83:</p> <p></p> <p>\u8bba\u6587</p> <ul> <li>19\u2019ACL, Open-Domain Targeted Sentiment Analysis via Span-Based Extraction and Classification (Span-BERT)<ul> <li>\u4efb\u52a1: \u7ed9\u5b9aaspect, 1) \u62bd\u53d6opinion (\u4e00\u5bf9\u591a); 2) \u60c5\u611f\u5206\u7c7b.</li> <li>\u8d21\u732e: 1) \u76f8\u8f83\u4e8e\u5e8f\u5217\u6807\u6ce8\u65b9\u5f0f, \u9996\u6b21\u63d0\u51fa\u4e86 span \u683c\u5f0f\u7684\u9884\u6d4b (\u4e5f\u5373\u9884\u6d4b\u9996\u5c3e); \u6a21\u578b\u91c7\u7528 BERT, \u5206\u522b\u8fdb\u884cspan\u62bd\u53d6\u548c\u60c5\u611f\u5206\u7c7b; 2) \u5c1d\u8bd5\u4e86\u4e09\u79cd\u7b56\u7565 (Model Variants), \u5b9e\u9a8c\u53d1\u73b0 pipeline\u5f62\u5f0f\u6bd4\u8f83\u597d, \u4e5f\u5373\u5148\u62bd\u53d6opinion\u7136\u540e\u8fdb\u884c\u60c5\u611f\u5206\u7c7b.</li> <li>code: https://github.com/huminghao16/SpanABSA</li> </ul> </li> <li>20\u2019AAAI, Knowing What, How and Why: A Near Complete Solution for Aspect-based Sentiment Analysis (ASTE-base) (\u63d0\u51fa ASTE \u4efb\u52a1, \u57fa\u51c6\u6a21\u578b)<ul> <li>data: https://github.com/xuuuluuu/SemEval-Triplet-data \u5305\u62ec SemEval 14 Laptop \u548c 14\uff0c15\uff0c16 Restaurant</li> <li>\u8d21\u732e: 1) \u9996\u6b21\u63d0\u51fa\u4e86 ASTE\u8fd9\u4e2a\u4efb\u52a1, \u5e76\u7ed9\u51fa\u4e86\u6570\u636e; 2) \u4e24\u9636\u6bb5\u6a21\u578b: \u9996\u5148\u7528\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\u5206\u522b\u5f97\u5230 1. aspect+polarity \u548c 2. opinion; \u7136\u540e\u7b2c\u4e8c\u9636\u6bb5\u4e24\u8f86\u5339\u914d\u7b97\u5206\u6570.</li> </ul> </li> <li>20\u2019EMNLP, Position-Aware Tagging for Aspect Sentiment Triplet Extraction (JET)<ul> <li>\u963f\u91cc</li> <li>\u8d21\u732e: 1) \u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684 position-aware tagging scheme, \u53ef\u4ee5\u611f\u77e5\u5230ABSA\u4e2d\u4e09\u4e2a\u6210\u5206\u4e4b\u95f4\u7684\u8ddd\u79bb; 2) \u63d0\u51fa\u4e86\u9488\u5bf9\u8fd9\u79cd tagging \u7684JET\u6a21\u578b, \u4e3b\u8981\u662f\u5bf9 CRF\u6846\u67b6\u7684\u4fee\u6539.</li> <li>\u8bba\u8bc1: \u5e38\u7528\u7684\u5e8f\u5217\u6807\u6ce8\u7684\u65b9\u6cd5\u7684\u6807\u7b7e\u8bbe\u8ba1\uff08\u5982 BIOES\uff09\u53ea\u80fd\u6807\u6ce8\u672c\u7c7b\u5b9e\u4f53\uff0c\u65e0\u6cd5\u8868\u8fbe\u672c\u5b9e\u4f53\u548c\u5176\u4ed6\u5b9e\u4f53\u7684\u5173\u7cfb; \u8fd9\u91cc\u5f15\u5165\u7684\u8ddd\u79bb\u611f\u77e5\u7684\u6807\u6ce8\u65b9\u6848\u80fd\u591f\u8868\u793a a/o \u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb. \u4f46\u662f\u6587\u4e2d\u63d0\u5230\u7684\u4e24\u79cdtagging\u7b56\u7565\u4ec5\u80fd\u89e3\u51b3 \u4e00\u5bf9\u591a/\u591a\u5bf9\u4e00 \u7684\u60c5\u51b5, \u800c\u65e0\u6cd5\u89e3\u51b3\u591a\u5bf9\u591a.</li> </ul> </li> <li>21\u2019ACL, Learning Span-Level Interactions for Aspect Sentiment Triplet Extraction (Span-ASTE)<ul> <li>code: https://github.com/chiayewken/Span-ASTE</li> <li>\u8d21\u732e: 1) \u57fa\u4e8e\u8bcd\u6c47\u7ea7\u522b\u8fdb\u884c\u4e24\u4e2a\u6210\u5206\u7684\u62bd\u53d6: \u9996\u5148\u6309\u7167\u4e00\u5b9a\u957f\u5ea6\u5212\u5206\u51fa\u4e00\u4e9bspan(\u8bcd), \u7136\u540e\u8fdb\u884c\u7b5b\u9009\u5206\u522b\u627e\u5230 a/o, \u6700\u540e\u4e24\u4e24\u7ec4\u5408\u7b5b\u9009\u4e8c\u5143\u7ec4, \u5e76\u9884\u6d4b polarity.</li> <li>\u8bba\u8bc1: \u6b64\u524d\u7684\u4e00\u4e9b\u6a21\u578b\u65e0\u6cd5\u8bc6\u522b span \u4e4b\u524d\u7684\u8054\u7cfb (\u5728 a/o\u662f\u5305\u542b\u591a\u4e2atoken \u4e5f\u5373\u4e3aspan \u7684\u65f6\u5019), \u8fd9\u91cc\u7528 span \u7ea7\u522b\u7684\u8054\u7cfb\u6765\u8ba1\u7b97\u4e24\u8005\u7684\u4ea4\u4e92, \u4ece\u800c\u300c\u786e\u4fdd\u4e86\u60c5\u611f\u6781\u6027\u7684\u4e00\u81f4\u6027\u300d.</li> </ul> </li> <li>21\u2019AAAI, A Joint Training Dual-MRC Framework for Aspect Based Sentiment Analysis (Dual-MRC)<ul> <li>\u963f\u91cc</li> <li>code: https://github.com/xuuuluuu/Position-Aware-Tagging-for-ASTE</li> <li>BERT+MRC. \u4e24\u6b21 MRC \u5206\u522b\u8fdb\u884c\u62bd\u53d6 a\u548co, \u56e0\u6b64\u662f\u5206\u6b65\u7684.</li> </ul> </li> <li>21\u2019ACL, A Unified Generative Framework for Aspect-Based Sentiment Analysis (BART-ABSA)<ul> <li>\u90b1\u9521\u9e4f</li> <li>code: https://github.com/yhcc/BARTABSA</li> <li>\u8d21\u732e: 1) \u6c47\u603b\u4e86ABSA\u7684\u4e0d\u540c\u5f62\u5f0f, \u4e3b\u8981\u9488\u5bf9 (aspect, opinion, polarity) \u4e09\u5143\u7ec4\u62bd\u53d6; 2) \u5c06\u4e24\u7c7b\u4efb\u52a1\u90fd\u8f6c\u5316\u4e3a\u751f\u6210\u4efb\u52a1, \u5229\u7528BART\u6765\u751f\u6210 a/o \u7684\u4f4d\u7f6e (vocabulary \u5305\u62ec token\u7684index \u548c \u60c5\u611f\u6781\u6027)</li> <li>\u8bba\u8bc1: \u5c06\u4e24\u7c7b\u4efb\u52a1\u5b9a\u4e49\u5728\u7edf\u4e00\u7684 vocab \u4e2d, \u7136\u540e\u7528\u751f\u6210\u6a21\u578b\u6765\u5b8c\u6210\u6bd4\u8f83\u6709\u65b0\u610f; \u56e0\u4e3a\u751f\u6210\u7ed3\u679c\u7684\u591a\u6837\u6027\u53ef\u4ee5\u89e3\u51b3 ABSA\u7684\u4e0d\u540c\u5b50\u4efb\u52a1 (\u5305\u62ec\u7ed9\u5b9aaspect\u9884\u6d4bopinion\u7b49).</li> </ul> </li> </ul> <p>\u8fd8\u6ca1\u770b\u7684</p> <ul> <li>21\u2019Findings, A Multi-task Learning Framework for Opinion Triplet Extraction (OTE-MTL)</li> </ul>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#jet-20emnlp-position-aware-tagging-for-aspect-sentiment-triplet-extraction","title":"(JET) 20\u2019EMNLP, Position-Aware Tagging for Aspect Sentiment Triplet Extraction","text":"<p>\u8bba\u8bc1: \u5e38\u7528\u7684\u5e8f\u5217\u6807\u6ce8\u7684\u65b9\u6cd5\u7684\u6807\u7b7e\u8bbe\u8ba1\uff08\u5982 BIOES\uff09\u53ea\u80fd\u6807\u6ce8\u672c\u7c7b\u5b9e\u4f53\uff0c\u65e0\u6cd5\u8868\u8fbe\u672c\u5b9e\u4f53\u548c\u5176\u4ed6\u5b9e\u4f53\u7684\u5173\u7cfb; \u8fd9\u91cc\u5f15\u5165\u7684\u8ddd\u79bb\u611f\u77e5\u7684\u6807\u6ce8\u65b9\u6848\u80fd\u591f\u8868\u793a a/o \u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb. \u4f46\u662f\u6587\u4e2d\u63d0\u5230\u7684\u4e24\u79cdtagging\u7b56\u7565\u4ec5\u80fd\u89e3\u51b3 \u4e00\u5bf9\u591a/\u591a\u5bf9\u4e00 \u7684\u60c5\u51b5, \u800c\u65e0\u6cd5\u89e3\u51b3\u591a\u5bf9\u591a.</p> <p>\u300c\u6211\u4eec\u7684\u6a21\u578b\u662f\u7b2c\u4e00\u4e2a\u91c7\u7528\u7aef\u5bf9\u7aef\u7684\u65b9\u5f0f\u76f4\u63a5\u907f\u514d\u4e86\u539f\u6709\u6a21\u578b\u7684\u91c7\u7528\u5206\u9636\u6bb5\u5bfc\u81f4\u63d0\u53d6\u51fa\u4e0d\u5b8c\u6574\u7279\u5f81\u7684\u5f0a\u7aef\uff0c\u5176\u6b21\u6211\u4eec\u7684\u6a21\u578b\u4e3b\u8981\u6839\u636e\u4e09\u5143\u4e4b\u95f4\u7684\u5173\u7cfb\u6765\u8ba1\u7b97\u6bcf\u4e2a\u8bcd\u7684\u6807\u7b7e\uff0c\u6700\u540e\u6839\u636e\u6761\u4ef6\u968f\u673a\u573a\u7684\u65b9\u5f0f\u83b7\u5f97\u6700\u4f73\u7684\u6807\u7b7e\u987a\u5e8f\u3002\u300d</p> <p>[\u8d21\u732e]</p> <ul> <li>\u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684 position-aware tagging scheme, \u53ef\u4ee5\u611f\u77e5\u5230ABSA\u4e2d\u4e09\u4e2a\u6210\u5206\u4e4b\u95f4\u7684\u8ddd\u79bb</li> <li>\u57fa\u4e8e\u8fd9\u4e2a tagging \u7b56\u7565, \u63d0\u51fa JET \u6a21\u578b (Jointly Extract the Triplets)</li> </ul> <p>[\u6a21\u578b]</p> <p>\u9996\u5148\u662f\u63d0\u51fa\u7684\u6807\u6ce8\u65b9\u6848:</p> <p>\u76f4\u63a5\u770b\u4e0b\u9762\u7684\u56fe, \u4e5f\u5373\u7528 BES\u6765\u6807\u8bb0 opinion, \u7528\u4e24\u4e2a\u4e0b\u6807\u8868\u793a\u5bf9\u5e94\u7684 aspect, \u4e0a\u6807\u8868\u793a\u60c5\u611f.</p> <p>\u8fd9\u91cc\u57fa\u4e8eopinion\u8fdb\u884c\u6807\u6ce8, \u53ef\u4ee5\u89e3\u51b3 a/o \u4e00\u5bf9\u591a\u7684\u60c5\u51b5; \u800c\u5bf9\u4e8e a/o \u591a\u5bf9\u4e00\u7684\u60c5\u51b5, \u53ef\u4ee5\u9488\u5bf9 aspect \u8fdb\u884c\u6807\u6ce8 (\u4f46\u65e0\u6cd5\u89e3\u51b3\u591a\u5bf9\u591a?).</p> <p></p> <p>\u5e76\u8bc1\u660e\u4e86\u8fd9\u6837\u7684\u7f16\u7801\u65b9\u6848\u6709\u6027\u8d28: There is a one-to-one correspondence between a tag sequence and a combination of aspect sentiment triplets within the sentence as long as the targets do not overlap with one another, and each has one corresponding opinion span. \u4e5f\u5373\u5728 1) opinion \u6ca1\u6709overlap; 2) \u6bcf\u4e2aaspect \u53ea\u5bf9\u5e94\u4e00\u4e2aopinion\u65f6, \u8fd9\u79cdtagging\u7b56\u7565\u548c\u4e09\u5143\u7ec4\u7684\u8868\u793a\u65b9\u5f0f\u662f\u7b49\u4ef7\u7684.</p> <p>JET\u6a21\u578b</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5e8f\u5217 \\mathbf{x}, \u548c\u53ef\u80fd\u7684\u6807\u6ce8\u7ed3\u679c \\mathbf{y}, \u5b9a\u4e49y\u7684\u6982\u7387\u5206\u5e03</p>  p(\\mathbf{y} \\mid \\mathbf{x})=\\frac{\\exp (s(\\mathbf{x}, \\mathbf{y}))}{\\sum_{\\mathbf{y}^{\\prime} \\in \\mathbf{Y}_{\\mathbf{x}, M}} \\exp \\left(s\\left(\\mathbf{x}, \\mathbf{y}^{\\prime}\\right)\\right)}  <p>\u5176\u4e2d \\mathbf{Y}_{\\mathbf{x}, M} \u4e3a\u6240\u6709\u53ef\u80fd\u7684\u6807\u6ce8, M\u4e3a\u4e0b\u6807\u7684\u957f\u5ea6\u9650\u5236. \u91cd\u70b9\u662f\u6253\u5206\u51fd\u6570</p>  s(\\mathbf{x}, \\mathbf{y})=\\sum_{i=0}^{n} \\psi_{\\overline{\\mathbf{y}}_{i}, \\overline{\\mathbf{y}}_{i+1}}+\\sum_{i=1}^{n} \\Phi_{\\mathbf{y}_{i}}(\\mathbf{x}, i)  <p>where \\overline{\\mathbf{y}}_{i} \\in\\{B, I, O, E, S\\} returns the sub-tag. \u4e5f\u5373\u5206\u6210 1) BIOES\u5e8f\u5217\u7684\u8f6c\u79fb\u6982\u7387 (CRF\u5373\u53ef); 2) \u6bcf\u4e00\u4e2a\u5355\u72ec\u7684y\u7684 factorized feature score.</p> <p>\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u6253\u5206\u5206\u89e3\u6210\u56db\u90e8\u5206:</p> <p></p> <ul> <li>\\Phi_{\\mathbf{y}_{i}}(\\mathbf{x}, i)=f_{t}\\left(\\mathbf{h}_{i}\\right)_{\\overline{\\mathbf{y}}_{i}} \u7b2c\u4e00\u90e8\u5206\u5c31\u662f\u8ba1\u7b97 BIOES \u7684\u6982\u7387\u5206\u5e03; \u5bf9\u4e8e B\u548cS\u6709\u989d\u5916\u7684\u4e0a\u4e0b\u8868, \u9700\u8981\u589e\u52a0\u4e09\u90e8\u5206</li> <li>f_{s}\\left(\\left[\\mathbf{g}_{i+j, i+k} ; \\overleftarrow{\\mathbf{h}_{i}}\\right]\\right)_{\\epsilon}+f_{o}\\left(\\mathbf{g}_{i+j, i+k}\\right)+f_{r}(j, k)<ul> <li>\u6ce8\u610f jk \u662f\u76f8\u5bf9\u8ddd\u79bb.</li> <li>fs \u7684\u8f93\u51fa\u4e3a\u60c5\u611f\u6781\u6027, \u5229\u7528\u4e86 1) \u5f53\u524d\u8bcd\u7684\u9690\u72b6\u6001\u548c 2) jk\u6240\u5b9a\u4e49\u7684\u4e00\u4e2aspan\u7684\u8868\u793a; \u4e5f\u5373\u8ba1\u7b97\u4e86 opinion \u7684\u7b2c\u4e00\u4e2atoken\u548caspect span \u4e4b\u95f4\u7684\u76f8\u5173\u6027;</li> <li>fo \u5bf9\u4e8e aspect span \u8fdb\u884c\u6253\u5206;</li> <li>fr \u5355\u72ec\u5bf9\u4e8ea/o \u4e4b\u95f4\u7684\u8ddd\u79bb\u8fdb\u884c\u6253\u5206.</li> </ul> </li> </ul>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#span-aste-21acl-learning-span-level-interactions-for-aspect-sentiment-triplet-extraction","title":"(Span-ASTE) 21\u2019ACL, Learning Span-Level Interactions for Aspect Sentiment Triplet Extraction","text":"<p>[\u6a21\u578b]</p> <p>\u6a21\u578b\u5305\u62ec\u4e0b\u9762\u4e09\u4e2a\u6a21\u5757:</p> <ul> <li>sentence encoding, mention module, and triplet module.<ul> <li>\u5c06\u5e8f\u5217\u8f6c\u4e3a tokens \u8f93\u5165, \u7136\u540e\u5f97\u5230 span\u7684\u8868\u793a;</li> <li>\u7136\u540e\u901a\u8fc7\u526a\u679d\u7b56\u7565\u5206\u522b\u5f97\u5230 a/o;</li> <li>\u4e24\u4e24\u7ec4\u5408 (\u4e00\u5b9a\u7684\u8ddd\u79bb\u9650\u5236), \u5e76\u5224\u65ad\u60c5\u611f;</li> </ul> </li> </ul> <p></p> <p>\u4e24\u79cdtoken\u8868\u793a\u65b9\u6cd5: 1) GloVe+BiLSTM; 2) BERT</p> <p>\u5728\u7b2c\u4e8c\u4e2a\u6a21\u5757\u4e2d, \u5bf9\u4e8e\u6bcf\u4e00\u4e2aspan\u8fdb\u884c\u4e09\u5206\u7c7b: <code>{Target, Opinion, Invalid }</code> (FFN). \u8fd9\u91cc\u5f3a\u8c03\u7684\u300c\u53cc\u901a\u9053\u526a\u679d\u300d\u5176\u5b9e\u5c31\u662f\u9488\u5bf9 a/o \u8bbe\u7f6e\u4e0d\u540c\u7684\u9608\u503c, \u5f97\u5230\u4e24\u4e2a\u5019\u9009\u6c60.</p> <p>\u7b2c\u4e09\u4e2a\u6a21\u5757\u5c31\u66f4\u7b80\u5355\u4e86, \u62fc\u63a5 a/o\u7684\u5411\u91cf\u8868\u793a\u57fa\u4e8e\u4e00\u4e2a\u8868\u793a\u4e24\u4e2a span\u7684\u8ddd\u79bb\u8868\u793a, \u8fc7FFN.</p> <p>[\u5b9e\u9a8c]</p> <p>baseline \u5206\u7c7b</p> <ul> <li>Pipeline\u5f62\u5f0f.<ul> <li>Peng et al. (2019) (ASTE-base) \u7b2c\u4e00\u6b65\u7528\u4e24\u4e2a\u5e8f\u5217\u6807\u6ce8\u5206\u522b\u5f97\u5230 a/o; \u7b2c\u4e8c\u9636\u6bb5\u878d\u5408\u4e86 dependency relation information, \u5224\u65ad a/o \u4e4b\u95f4\u7684\u76f8\u5173\u6027</li> </ul> </li> <li>End-to-end<ul> <li>JET (Xu et al., 2020b) \u5e8f\u5217\u6807\u6ce8, \u63d0\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u6807\u6ce8\u65b9\u6848</li> </ul> </li> </ul> <p>\u7136\u540e\u6bd4\u8f83\u4e86\u5355\u4e2a\u8bcd\u548c\u591a\u4e2a\u8bcd (\u53ea\u8981a/o\u5176\u4e00\u662f\u591a\u4e2a\u8bcd\u7684\u5c31\u7b97) \u4e0b\u7684\u8868\u73b0. \u4e0b\u9762 \u56fe1 \u662f\u8fd9\u4e9b\u6570\u636e\u96c6\u4e2d\u5355\u8bcdspan\u548c\u591a\u8bcdspan \u51fa\u73b0\u7684\u6570\u91cf\u7edf\u8ba1, \u53ef\u4ee5\u770b\u5230\u8fd8\u662f\u5355\u4e2a\u8bcd\u7684\u6807\u6ce8\u6bd4\u8f83\u591a.</p> <p></p> <p></p> <p>\u7136\u540e\u6bd4\u8f83\u300c\u53cc\u901a\u9053\u526a\u679d\u300d\u662f\u5426\u6709\u6548. \u6bd4\u8f83\u5bf9\u8c61\u662f\u300c\u5355\u901a\u9053\u300d, \u4e5f\u5373\u5728\u7b2c\u4e8c\u9636\u6bb5\u4e0d\u533a\u5206 a/o. \u4e0b\u56fe\u4e2d, \u53d1\u73b0\u5f53\u9608\u503c\u8bbe\u7f6e\u5f97\u6bd4\u8f83\u9ad8\u7684\u65f6\u5019, \u4e24\u8005\u8868\u73b0\u5dee\u4e0d\u591a.</p> <p></p>"},{"location":"NLP/ABSA-Sentiment-Analysis-%E5%9F%BA%E4%BA%8E%E6%96%B9%E9%9D%A2%E7%9A%84%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/#bart-absa-21acl-a-unified-generative-framework-for-aspect-based-sentiment-analysis","title":"(BART-ABSA) 21\u2019ACL, A Unified Generative Framework for Aspect-Based Sentiment Analysis","text":"<p>[\u8d21\u732e]</p> <ul> <li>We formulate both the extraction task and classification task of ABSA into a uni\ufb01ed index generation problem. Unlike previous uni\ufb01ed models, our method needs not to design speci\ufb01c decoders for different output types. \u5c06\u62bd\u53d6\u548c\u5206\u7c7b\u4efb\u52a1\u6c47\u603b\u6210\u540c\u4e00\u4e2a\u751f\u6210\u4efb\u52a1</li> <li>With our re-formulation, all ABSA subtasks can be solved in sequence-to-sequence framework, which is easy-to-implement and can be built on the pre-trained models, such as BART.</li> <li>We conduct extensive experiments on four public datasets, and each dataset contains a subset of all ABSA subtasks. To the best of our knowledge, it is the \ufb01rst work to evaluate a model on all ABSA tasks.</li> </ul> <p>[\u76f8\u5173\u5de5\u4f5c]</p> <p>BART is a denoising autoencoder composed of several transformer (Vaswani et al., 2017) encoder and decoder layers.</p> <p>\u53bb\u566a\u81ea\u7f16\u7801\u5668, \u8f93\u5165: \u6270\u52a8\u7684\u53e5\u5b50 (such as masking and permutation)</p> <p>\u4e3b\u8981\u7684\u8d21\u732e\u5176\u5b9e\u5728\u4e8e, 1) \u603b\u7ed3\u4e86ASBA\u7684\u5404\u9879\u4efb\u52a1\u5f62\u5f0f; 2) \u5c06 ASTE \u4efb\u52a1\u5f62\u5f0f\u5316\u5b9a\u4e49\u4e3a\u4e86\u4e00\u4e2a\u751f\u6210\u4efb\u52a1; 3) \u7136\u540e\u7528 BART\u6765\u5b66\u4e60, \u5177\u4f53\u7684\u6a21\u578b\u5c31\u5f88\u7b80\u5355.</p> <p></p> <p>[\u6a21\u578b]</p> <p>\u6a21\u578b\u4e3b\u8981\u5c31\u662f\u8981\u8bbe\u8ba1\u7f16\u7801\u7b56\u7565. \u89c1\u4e0b\u56fe.</p> <ul> <li>\u751f\u6210\u6a21\u578b\u7684vocabulary\u5305\u62ec\u4e09\u90e8\u5206: 1) sos, eos; 2) \u4e0d\u540c\u7684\u60c5\u611f\u6781\u6027; 3) \u7528token\u7684index\u6807\u8bc6\u7684 aspect\u548copinion \u7684\u9996\u5c3e\u4f4d\u7f6e.</li> <li>\u4f8b\u5982, \u5bf9\u4e8e ASTE \u4efb\u52a1\u800c\u8a00, \u4e00\u4e2a\u4e09\u5143\u7ec4\u5c31\u53ef\u4ee5\u7528 (aspect_start, aspect_end, opinion_start, opinion_end, polarity) \u8fd9\u6837\u7684\u5f62\u5f0f\u8868\u8fbe.</li> <li>\u5bf9\u4e8e\u751f\u6210\u6a21\u578b\u7ed3\u679cdecode\u7b56\u7565\u4efb\u610f, \u8bba\u6587\u4e2d\u91c7\u7528\u7684\u7b56\u7565\u662f: \u6bcf\u9047\u5230\u4e00\u4e2a\u60c5\u611f\u6781\u6027index\u8303\u56f4\u5185\u7684\u8f93\u51fa\u5b57\u7b26, \u5c31\u68c0\u67e5\u79ef\u7d2f\u5230\u73b0\u5728\u7684\u662f\u5426\u6ee1\u8db3\u4e00\u4e2a\u4e94\u5143\u7ec4, \u5e76\u4e14span\u9996\u5c3e\u662f\u5408\u6cd5\u7684, \u5c31\u5c06\u8be5\u4e94\u5143\u7ec4\u4f5c\u4e3a\u7ed3\u679c.</li> </ul> <p></p> <p>\u5927\u4f53\u7684\u6a21\u578b\u89c1\u4e0b, \u4e3b\u8981\u770b\u4e00\u4e0b\u53f3\u4e0a\u89d2\u7684\u8f93\u51favocabulary\u5b9a\u4e49.</p> <p></p> <p>[\u6570\u636e]</p> <ul> <li>\u90fd\u6765\u6e90\u4e8e Semeval Challenges</li> <li>Wang et al. (2017): the unpaire opinion terms are labeled, \u4e5f\u5373\u53ef\u80fd\u4ec5\u6709opinion \u4f46\u6ca1\u6709\u5bf9\u5e94\u7684aspect</li> <li>Fan et al. (2019), where they pair opinion terms with corresponding aspects.</li> <li>Peng et al. (2020). They re\ufb01ne the data in <code>&lt;a, o, s&gt;</code> triplet form.</li> <li>Peng et al. (2020), where the missing triplets with overlapping opinions are corrected.</li> </ul> <p>[\u5b9e\u9a8c]</p> <p>\u7531\u4e8e\u751f\u6210\u7684\u7ed3\u679c\u53ef\u4ee5\u6bd4\u8f83\u591a\u6837, \u6240\u4ee5\u5bf9\u4e8e\u4e0d\u540c\u7684\u4efb\u52a1\u8bbe\u7f6e\u8fdb\u884c\u4e86\u5b9e\u9a8c; \u8fd9\u91cc\u6700\u5173\u5fc3\u7684\u662f a/o \u7684\u4e8c\u5143\u7ec4\u62bd\u53d6.</p> <p></p> <p>\u53e6\u5916, \u751f\u6210\u7684\u5e8f\u5217\u6709\u53ef\u80fd\u662f\u975e\u6cd5\u7684, \u56e0\u6b64\u5bf9\u4e8e\u751f\u6210\u7ed3\u679c\u7684\u8d28\u91cf\u8fdb\u884c\u5206\u6790. \u4e0b\u56fe\u4e2d 1) invalid size \u8868\u793a\u6bcf\u4e00\u7ec4\u7684\u957f\u5ea6\u4e0d\u4e3a5; 2) invalid order \u8868\u793a\u4e00\u4e2a span \u7684\u9996\u5c3e\u4e0d\u5408\u6cd5; 3) invalid token, \u4e00\u4e2a\u8bcd\u7ecf\u8fc7 BART\u5206\u8bcd\u4e4b\u540e\u6709\u591a\u4e2atoken, \u9700\u8981\u9884\u6d4b\u7684\u6240\u6709 index \u90fd\u662f\u6bcf\u4e00\u7ec4token\u4e2d\u7684\u7b2c\u4e00\u4e2a.</p> <p></p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/","title":"Lexicon \u8bcd\u6c47\u589e\u5f3a","text":"<ul> <li>JayJay | \u4e2d\u6587NER\u7684\u6b63\u786e\u6253\u5f00\u65b9\u5f0f: \u8bcd\u6c47\u589e\u5f3a\u65b9\u6cd5\u603b\u7ed3 (\u4eceLattice LSTM\u5230FLAT) @2009<ul> <li>\u672c\u6587\u5bf9\u300c\u8bcd\u6c47\u589e\u5f3a\u300d\u7684\u7cfb\u5217\u65b9\u6cd5\u8fdb\u884c\u4ecb\u7ecd\uff0c\u5305\u62ecLattice LSTM/LR-CNN/CGN/LGN/WC-LSTM/Multi-digraph/Simple-Lexicon/FLAT \u7b498\u4e2a\u65b9\u6cd5\u8fdb\u884c\u4e32\u8bb2</li> </ul> </li> <li>JayJay | \u5982\u4f55\u89e3\u51b3Transformer\u5728NER\u4efb\u52a1\u4e2d\u6548\u679c\u4e0d\u4f73\u7684\u95ee\u9898\uff1f<ul> <li>vanilla transformer \u548c BERT \u7684\u533a\u522b?</li> <li>\u5177\u4f53\u770b\u770b \u8ddd\u79bb\u8ba1\u7b97\u65b9\u5f0f; Attention\u7684\u5e73\u6ed1\u7f29\u653e?</li> </ul> </li> <li>\u82cf\u5251\u6797 | \u8ba9\u7814\u7a76\u4eba\u5458\u7ede\u5c3d\u8111\u6c41\u7684Transformer\u4f4d\u7f6e\u7f16\u7801 @2102</li> </ul> <p>\u6982\u8981</p> <ul> <li>\u4e24\u6761\u4e3b\u7ebf:<ul> <li>Dynamic Architecture\uff1a\u8bbe\u8ba1\u4e00\u4e2a\u52a8\u6001\u6846\u67b6\uff0c\u80fd\u591f\u517c\u5bb9\u8bcd\u6c47\u8f93\u5165\uff1b<ul> <li>Dynamic Architecture\u8303\u5f0f\u901a\u5e38\u9700\u8981\u8bbe\u8ba1\u76f8\u5e94\u7ed3\u6784\u4ee5\u878d\u5165\u8bcd\u6c47\u4fe1\u606f\u3002</li> <li>20\u2018ACL, FLAT: Chinese NER Using Flat-Lattice Transformer \u90b1\u9521\u9e4f</li> </ul> </li> <li>Adaptive Embedding \uff1a\u57fa\u4e8e\u8bcd\u6c47\u4fe1\u606f\uff0c\u6784\u5efa\u81ea\u9002\u5e94Embedding\uff1b<ul> <li>Adaptive Embedding\u8303\u5f0f\u4ec5\u5728embedding\u5c42\u5bf9\u4e8e\u8bcd\u6c47\u4fe1\u606f\u8fdb\u884c\u81ea\u9002\u5e94\uff0c\u540e\u9762\u901a\u5e38\u63a5\u5165LSTM+CRF\u548c\u5176\u4ed6\u901a\u7528\u7f51\u7edc\uff0c\u8fd9\u79cd\u8303\u5f0f\u4e0e\u6a21\u578b\u65e0\u5173\uff0c\u5177\u5907\u53ef\u8fc1\u79fb\u6027\u3002</li> </ul> </li> </ul> </li> </ul> <p>\u901a\u8fc7\u7b2c\u4e8c\u90e8\u5206\u5bf9\u4e8e\u300c\u8bcd\u6c47\u589e\u5f3a\u300d\u65b9\u6cd5\u4e3b\u8981\u8bba\u6587\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u65e0\u8bba\u662fDynamic Architecture\u8fd8\u662fAdaptive Embedding\uff0c\u90fd\u662f\u60f3\u5982\u4f55\u66f4\u597d\u7684\u878d\u5165\u8bcd\u6c47\u4fe1\u606f\u3002\u8fd9\u4e9b\u65b9\u6cd5\u7684\u51fa\u53d1\u70b9\u65e0\u5916\u4e8e\u4e24\u70b9\uff1a1\uff09\u5982\u4f55\u66f4\u5145\u5206\u7684\u5229\u7528\u8bcd\u6c47\u4fe1\u606f\u3001\u6700\u5927\u7a0b\u5ea6\u907f\u514d\u8bcd\u6c47\u4fe1\u606f\u635f\u5931\uff1b2\uff09\u5982\u4f55\u8bbe\u8ba1\u66f4\u4e3a\u517c\u5bb9\u8bcd\u6c47\u7684Architecture\uff0c\u52a0\u5feb\u63a8\u65ad\u901f\u5ea6\u3002</p> <p></p> <p>CL2020\u4e2d\u7684\u4e24\u7bc7\u8bba\u6587FLAT\u548cSimple-Lexicon\u5206\u522b\u5bf9\u5e94\u4e8eDynamic Architecture\u548cAdaptive Embedding\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u76f8\u6bd4\u4e8e\u5176\u4ed6\u65b9\u6cd5\uff1a1\uff09\u80fd\u591f\u5145\u5206\u5229\u7528\u8bcd\u6c47\u4fe1\u606f\uff0c\u907f\u514d\u4fe1\u606f\u635f\u5931\uff1b2\uff09FLAT\u4e0d\u53bb\u8bbe\u8ba1\u6216\u6539\u53d8\u539f\u751f\u7f16\u7801\u7ed3\u6784\uff0c\u8bbe\u8ba1\u5de7\u5999\u7684\u4f4d\u7f6e\u5411\u91cf\u5c31\u878d\u5408\u4e86\u8bcd\u6c47\u4fe1\u606f\uff1bSimple-Lexicon\u5bf9\u4e8e\u8bcd\u6c47\u4fe1\u606f\u7684\u5f15\u5165\u66f4\u52a0\u7b80\u5355\u6709\u6548\uff0c\u91c7\u53d6\u9759\u6001\u52a0\u6743\u7684\u65b9\u6cd5\u53ef\u4ee5\u63d0\u524d\u79bb\u7ebf\u8ba1\u7b97\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230</p> <ul> <li>\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f\u7684\u65b9\u6cd5\uff0c\u90fd\u76f8\u8f83\u4e8ebaseline\u6a21\u578bbiLSTM+CRF\u6709\u8f83\u5927\u63d0\u5347\uff0c\u53ef\u89c1\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f\u53ef\u4ee5\u6709\u6548\u63d0\u5347\u4e2d\u6587NER\u6027\u80fd\u3002</li> <li>\u91c7\u7528\u76f8\u540c\u8bcd\u8868\u5bf9\u6bd4\u65f6\uff0cFLAT\u548cSimple-Lexicon\u597d\u4e8e\u5176\u4ed6\u65b9\u6cd5\u3002</li> <li>\u7ed3\u5408BERT\u6548\u679c\u4f1a\u66f4\u4f73\u3002</li> </ul> <p>\u4e0b\u9762\u5177\u4f53\u8bfb\u4e86\u56db\u7bc7\u8bba\u6587</p> <ul> <li>18\u2018ACL, Chinese NER Using Lattice LSTM<ul> <li>Lattice-LSTM</li> <li>\u5f00\u7bc7\u4e4b\u4f5c, \u8bbe\u8ba1\u517c\u5bb9\u7684LSTM\u5c06\u8bcd\u6c47\u4fe1\u606f\u5f15\u5165\u4e2d\u6587NER\u4efb\u52a1\u4e2d</li> <li>\u95ee\u9898: \u63a8\u65ad\u6548\u7387\u4f4e; \u6355\u6349\u957f\u8ddd\u79bb\u4f9d\u8d56; \u5b58\u5728\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4fe1\u606f\u635f\u5931</li> </ul> </li> <li>19\u2019EMNLP, A Lexicon-Based Graph Neural Network for Chinese NER<ul> <li>LGN</li> <li>\u6784\u5efa\u5c40\u90e8\u548c\u5168\u5c40\u805a\u5408\u7684\u56fe\u7f51\u7edc, \u5145\u5206\u5229\u7528\u8bcd\u6c47\u4fe1\u606f</li> <li>\u95ee\u9898: \u5c06NER\u4efb\u52a1\u8f6c\u5316\u4e3a\u8282\u70b9\u5206\u7c7b\u95ee\u9898, \u4f46\u9700\u8981RNN\u4f5c\u4e3a\u5e95\u5c42\u7f16\u7801\u5668\u6765\u6355\u6349\u987a\u5e8f\u6027, \u7ed3\u6784\u590d\u6742</li> </ul> </li> <li>20\u2018ACL, FLAT- Chinese NER Using Flat-Lattice Transformer<ul> <li>FLAT</li> <li>\u901a\u8fc7\u8bbe\u8ba1\u4f4d\u7f6e\u5411\u91cf\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f, \u5229\u7528 transformer \u6355\u6349\u957f\u8ddd\u79bb\u4f9d\u8d56\u3001\u63d0\u9ad8\u63a8\u65ad\u6548\u7387</li> </ul> </li> <li>20\u2019ACL, Simplify the Usage of Lexicon in Chinese NER<ul> <li>Simple Lexicon</li> <li>\u901a\u8fc7 Soft-Lexicon\u65b9\u6cd5\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f, \u7b80\u5355\u76f4\u63a5</li> </ul> </li> </ul> <p>\u53e6\u5916\u7684\u51e0\u7bc7\u5de5\u4f5c</p> <ul> <li>19\u2019IJCAI, LR-CNN:CNN-Based Chinese NER with Lexicon Rethinking<ul> <li>Lexicon-Based CNNs: \u5806\u53e0\u591a\u5c42CNN\u5b66\u4e60\u4e0d\u540c\u5c42\u7ea7\u7684\u4fe1\u606f</li> <li>Refining Networks with Lexicon Rethinking: \u5bf9\u4e8e\u8bcd\u6c47\u4fe1\u606f\u51b2\u7a81\u7684\u95ee\u9898, \u91c7\u53d6rethinking\u673a\u5236\u589e\u52a0feedback layer\u6765\u8c03\u6574\u8bcd\u6c47\u4fe1\u606f\u7684\u6743\u503c</li> </ul> </li> <li>19\u2019EMNLP, CGN: Leverage Lexical Knowledge for Chinese Named Entity Recognition via Collaborative Graph Network<ul> <li>\u6784\u5efa\u4e86\u57fa\u4e8e\u534f\u4f5c\u7684\u56fe\u7f51\u7edc\uff0c\u7531\u7f16\u7801\u5c42\u3001\u56fe\u7f51\u7edc\u5c42\u3001\u878d\u5408\u5c42\u3001\u89e3\u7801\u5c42\u7ec4\u6210\u3002\u5728\u56fe\u7f51\u7edc\u5c42\uff0c\u6784\u5efa\u4e86\u4e09\u79cd\u4e0d\u540c\u7684\u5efa\u56fe\u65b9\u5f0f<ul> <li>Word-Character Containing graph (C-graph)\uff1a\u5b57\u4e0e\u5b57\u4e4b\u95f4\u65e0\u8fde\u63a5\uff0c\u8bcd\u4e0e\u5176inside\u7684\u5b57\u4e4b\u95f4\u6709\u8fde\u63a5\u3002</li> <li>Word-Character Transition graph(T-graph)\uff1a\u76f8\u90bb\u5b57\u7b26\u76f8\u8fde\u63a5\uff0c\u8bcd\u4e0e\u5176\u524d\u540e\u5b57\u7b26\u8fde\u63a5\u3002</li> <li>Word-Character Lattice graph(L-graph)\uff1a\u76f8\u90bb\u5b57\u7b26\u76f8\u8fde\u63a5\uff0c\u8bcd\u4e0e\u5176\u5f00\u59cb\u7ed3\u675f\u5b57\u7b26\u76f8\u8fde\u3002</li> </ul> </li> <li>\u5728\u8fd9\u4e9b\u56fe\u4e0a\u8fc7 GNN, \u7136\u540e\u548c\u57fa\u4e8e\u5b57\u7b26\u7684\u4e0a\u4e0b\u6587\u8868\u5f81\u52a0\u6743\u878d\u5408</li> </ul> </li> <li>NAACL\u201819, WC-LSTM: An Encoding Strategy Based Word-Character LSTM for Chinese NER Lattice LSTM<ul> <li>Lattice LSTM\u4e2d\u6bcf\u4e2a\u5b57\u7b26\u53ea\u80fd\u83b7\u53d6\u4ee5\u5b83\u4e3a\u7ed3\u5c3e\u7684\u8bcd\u6c47\u6570\u91cf\u662f\u52a8\u6001\u7684\u3001\u4e0d\u56fa\u5b9a\u7684\uff0c\u8fd9\u4e5f\u662f\u5bfc\u81f4Lattice LSTM\u4e0d\u80fdbatch\u5e76\u884c\u5316\u7684\u539f\u56e0</li> <li>WC-LSTM\u4e3a\u6539\u8fdb\u8fd9\u4e00\u95ee\u9898\uff0c\u91c7\u53d6Words Encoding Strategy\uff0c\u5c06\u6bcf\u4e2a\u5b57\u7b26\u4e3a\u7ed3\u5c3e\u7684\u8bcd\u6c47\u4fe1\u606f\u8fdb\u884c\u56fa\u5b9a\u7f16\u7801\u8868\u793a\uff0c\u5373\u6bcf\u4e00\u4e2a\u5b57\u7b26\u5f15\u5165\u7684\u8bcd\u6c47\u8868\u5f81\u662f\u9759\u6001\u7684\u3001\u56fa\u5b9a\u7684\uff0c\u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684\u8bcd\u6c47\u5219\u7528<code>&lt;PAD&gt;</code> \u4ee3\u66ff\uff0c\u4ece\u800c\u53ef\u4ee5\u8fdb\u884cbatch\u5e76\u884c\u5316</li> <li>WC-LSTM\u4ecd\u7136\u5b58\u5728\u4fe1\u606f\u635f\u5931\u95ee\u9898\uff0c\u65e0\u6cd5\u83b7\u5f97\u2018inside\u2019\u7684\u8bcd\u6c47\u4fe1\u606f\uff0c\u4e0d\u80fd\u5145\u5206\u5229\u7528\u8bcd\u6c47\u4fe1\u606f\u3002\u867d\u7136\u662fAdaptive Embedding\u8303\u5f0f\uff0c\u4f46WC-LSTM\u4ecd\u7136\u91c7\u53d6LSTM\u8fdb\u884c\u7f16\u7801\uff0c\u5efa\u6a21\u80fd\u529b\u6709\u9650\u3001\u5b58\u5728\u6548\u7387\u95ee\u9898\u3002</li> </ul> </li> <li>19\u2019ACL, Multi-digraph: A Neural Multi-digraph Model for Chinese NER with Gazetteers<ul> <li>\u4e0d\u540c\u4e8e\u5176\u4ed6\u8bba\u6587\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f\u7684\u65b9\u5f0f\u662f\u57fa\u4e8e\u4e00\u4e2a\u8bcd\u8868\uff08\u7531\u8bba\u6587Lattice LSTM \u63d0\u4f9b\uff0c\u6ca1\u6709\u5b9e\u4f53\u6807\u7b7e\uff0c\u901a\u5e38\u9700\u8981\u63d0\u53d6\u5bf9\u5e94\u7684word embedding\uff09\uff0c\u672c\u7bc7\u8bba\u6587\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f\u7684\u65b9\u5f0f\u662f\u5229\u7528\u5b9e\u4f53\u8bcd\u5178\uff08Gazetteers\uff0c\u542b\u5b9e\u4f53\u7c7b\u578b\u6807\u7b7e\uff09\u3002</li> </ul> </li> </ul>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#models","title":"Models","text":""},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#lattice-lstm","title":"Lattice LSTM","text":"<ul> <li>18\u2018ACL, Chinese NER Using Lattice LSTM</li> <li>code https://github.com/jiesutd/LatticeLSTM @1904 Torch0.3 \u5b9e\u73b0\u4e86\u4e00\u7cfb\u5217\u7684 Baseline</li> </ul> <p>\u5177\u4f53\u800c\u8a00</p> <ul> <li>\u63d0\u51fa\u4e86 Lattice \u7ed3\u6784: \u5bf9\u4e8e\u5339\u914d\u5230\u5b57\u5178\u4e2d\u5355\u8bcd\u7684\u4e00\u4e2a\u6bb5\u843d, \u8fde\u63a5\u5934\u5c3e\u5b57, \u4ece\u800c\u6784\u6210\u4e86\u4e00\u4e2a DAG.</li> <li>Lattice LSTM \u5c06\u539f\u672c\u7684 bi-LSTM \u7ed3\u6784\u62d3\u5c55\u5230\u4e86\u8fd9\u4e2a DAG \u4e0a, \u4ece\u800c\u5728\u5b57\u7ea7\u522b\u7684\u57fa\u7840\u4e0a\u5f15\u5165\u4e86\u8bcd\u6c47\u4fe1\u606f.</li> <li>\u7b80\u5355\u6765\u8bf4, \u8fd9\u91cc\u5c06\u539f\u672c\u5b57\u7684 LSTM \u7ed3\u6784 \\boldsymbol{h}_{i}, \\boldsymbol{c}_{i}=f\\left(\\boldsymbol{h}_{j-1}, \\boldsymbol{c}_{j-1}, \\boldsymbol{x}_{j}^{c}\\right) \u66ff\u6362\u6210\u4e86<ul> <li>\\boldsymbol{h}_{j}, \\boldsymbol{c}_{j}=f\\left(\\boldsymbol{h}_{j-1}, \\boldsymbol{c}_{j-1}, \\boldsymbol{x}_{j}^{c}, s_{&lt;*, j&gt;}, \\boldsymbol{h}_{&lt;*, j&gt;}, \\boldsymbol{c}_{&lt;*, j&gt;}\\right)</li> <li>\u8fd9\u91cc\u7684 \\boldsymbol{x}_{j}^{c}, s_{&lt;*, j&gt;}, \\boldsymbol{h}_{&lt;*, j&gt;}, \\boldsymbol{c}_{&lt;*, j&gt;} \u5206\u522b\u662f\u4ee5\u7b2c j \u4e2a\u5b57\u7ed3\u5c3e\u7684\u5339\u914d\u5230\u7684\u8bcd\u7684 \u5e8f\u5217\u3001hidden state list\u3001memory cell list.</li> </ul> </li> </ul> <p>\u4e24\u70b9\u597d\u5904:</p> <ul> <li>\u4fdd\u7559\u4e86\u6240\u6709\u53ef\u80fd\u7684\u8bcd\u6c47, \u4ece\u800c\u907f\u514d\u4e86\u5206\u8bcd\u7684\u8bef\u5dee\u4f20\u64ad\u95ee\u9898;</li> <li>\u5f15\u5165\u4e86 pre-trained word embeddings</li> </ul> <p>\u7f3a\u70b9:</p> <ul> <li>\u8ba1\u7b97\u6027\u80fd\u4f4e\u4e0b\uff0c\u4e0d\u80fdbatch\u5e76\u884c\u5316\u3002\u7a76\u5176\u539f\u56e0\u4e3b\u8981\u662f\u6bcf\u4e2a\u5b57\u7b26\u4e4b\u95f4\u7684\u589e\u52a0word cell\uff08\u770b\u4f5c\u8282\u70b9\uff09\u6570\u76ee\u4e0d\u4e00\u81f4\uff1b</li> <li>\u4fe1\u606f\u635f\u5931\uff1a1\uff09\u6bcf\u4e2a\u5b57\u7b26\u53ea\u80fd\u83b7\u53d6\u4ee5\u5b83\u4e3a\u7ed3\u5c3e\u7684\u8bcd\u6c47\u4fe1\u606f\uff0c\u5bf9\u4e8e\u5176\u4e4b\u524d\u7684\u8bcd\u6c47\u4fe1\u606f\u4e5f\u6ca1\u6709\u6301\u7eed\u8bb0\u5fc6\u3002\u5982\u5bf9\u4e8e\u300c\u836f\u300d\uff0c\u5e76\u65e0\u6cd5\u83b7\u5f97\u2018inside\u2019\u7684\u300c\u4eba\u548c\u836f\u5e97\u300d\u4fe1\u606f\u30022\uff09\u7531\u4e8eRNN\u7279\u6027\uff0c\u91c7\u53d6BiLSTM\u65f6\u5176\u524d\u5411\u548c\u540e\u5411\u7684\u8bcd\u6c47\u4fe1\u606f\u4e0d\u80fd\u5171\u4eab\u3002</li> <li>\u53ef\u8fc1\u79fb\u6027\u5dee\uff1a\u53ea\u9002\u914d\u4e8eLSTM\uff0c\u4e0d\u5177\u5907\u5411\u5176\u4ed6\u7f51\u7edc\u8fc1\u79fb\u7684\u7279\u6027\u3002</li> </ul> <p></p> <p></p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#lstm","title":"\u5177\u4f53\u7684 LSTM \u5f62\u5f0f","text":"<p>\u7ecf\u5178\u7684\u9488\u5bf9\u5e8f\u5217\u7684 LSTM \u7ed3\u6784\u4e3a $$ \\begin{aligned}\\left[\\begin{array}{c}\\mathbf{i}{j}^{c} \\ \\mathbf{o}}^{c} \\ \\mathbf{f{j}^{c} \\ \\widetilde{\\boldsymbol{c}}}^{c}\\end{array}\\right] &amp;=\\left[\\begin{array}{c}\\sigma \\ \\sigma \\ \\sigma \\ \\tanh \\end{array}\\right]\\left(\\mathbf{W}^{c \\top}\\left[\\begin{array}{c}\\mathbf{x{j}^{c} \\ \\mathbf{h}}^{c}\\end{array}\\right]+\\mathbf{b}^{c}\\right) \\ \\mathbf{c{j}^{c} &amp;=\\mathbf{f}}^{c} \\odot \\mathbf{c{j-1}^{c}+\\mathbf{i}}^{c} \\odot \\widetilde{\\boldsymbol{c}{j}^{c} \\ \\mathbf{h}}^{c} &amp;=\\mathbf{o{j}^{c} \\odot \\tanh \\left(\\mathbf{c} $$}^{c}\\right) \\end{aligned</p> <p>\u800c\u5728\u8fd9\u91cc, \u8fd8\u9700\u8981\u5f15\u5165 word \u7ea7\u522b\u7684\u8868\u793a (\u6ce8\u610f\u5230\u8fd9\u91cc\u5e76\u4e0d\u9700\u8981\u8f93\u51fa, \u56e0\u6b64\u6ca1\u6709\u5f15\u5165\u8f93\u51fa\u95e8 o \u548c\u9690\u72b6\u6001 h)</p>  \\begin{aligned}\\left[\\begin{array}{l}\\mathbf{i}_{b, e}^{w} \\\\ \\mathbf{f}_{b, e}^{w} \\\\ \\widetilde{c}_{b, e}^{w}\\end{array}\\right] &amp;=\\left[\\begin{array}{c}\\sigma \\\\ \\sigma \\\\ \\tanh \\end{array}\\right]\\left(\\mathbf{W}^{w \\top}\\left[\\begin{array}{c}\\mathbf{x}_{b, e}^{w} \\\\ \\mathbf{h}_{b}^{c}\\end{array}\\right]+\\mathbf{b}^{w}\\right) \\\\ \\mathbf{c}_{b, e}^{w} &amp;=\\mathbf{f}_{b, e}^{w} \\odot \\mathbf{c}_{b}^{c}+\\mathbf{i}_{b, e}^{w} \\odot \\widetilde{\\boldsymbol{c}}_{b, e}^{w} \\end{aligned}  <p>\u5728 Lattice-LSTM \u4e2d, \u9700\u8981\u7efc\u5408\u5b57\u5e8f\u5217\u548c\u8bcd\u6c47\u7684\u4fe1\u606f, \u56e0\u6b64, \u5bf9\u4e8e\u7b2c j \u4e2a\u5b57\u800c\u8a00, \u5176\u8f93\u5165\u5411\u91cf\u5305\u62ec\u4e86 cell \u4fe1\u606f \u548c\u6240\u6709\u4ee5 j \u7ed3\u5c3e\u7684\u8bcd. \u7528\u8f93\u5165\u95e8\u8ba1\u7b97\u6743\u91cd \\mathbf{i}_{b, e}^{c}=\\sigma\\left(\\mathbf{W}^{l \\top}\\left[\\begin{array}{c}\\mathbf{x}_{e}^{c} \\\\ \\mathbf{c}_{b, e}^{w}\\end{array}\\right]+\\mathbf{b}^{l}\\right), \u7136\u540e\u548c\u5b57\u5e8f\u5217\u7684\u8f93\u5165\u95e8 \\mathbf{i}_j^c \u8fdb\u884c\u5f52\u4e00\u5316 (\u5411\u91cf\u7ea7\u522b\u7684), \u7efc\u5408\u5728\u4e00\u8d77:</p> \\mathbf{c}_{j}^{c}=\\sum_{b \\in\\left\\{b^{\\prime} \\mid w_{b^{\\prime}, j}^{d} \\in \\mathbb{D}\\right\\}} \\boldsymbol{\\alpha}_{b, j}^{c} \\odot \\boldsymbol{c}_{b, j}^{w}+\\boldsymbol{\\alpha}_{j}^{c} \\odot \\widetilde{\\boldsymbol{c}}_{j}^{c} <p>\u5728 Decoding \u90e8\u5206, \u76f4\u63a5\u5229\u7528\u6807\u51c6\u7684 CRF \u89e3\u7801; \u5229\u7528 log-likelihood loss \u4f5c\u4e3a\u635f\u5931\u8fdb\u884c\u8bad\u7ec3.</p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#_1","title":"\u6bd4\u8f83\u4e86\u6b64\u524d\u7684\u5904\u7406\u65b9\u6848","text":"<p>\u6b64\u524d\u7684\u65b9\u6cd5\u6bd4\u8f83</p> <ul> <li>Character-Based Model<ul> <li>Char \u7ea7\u522b\u7684, \u53ef\u4ee5\u6709\u53d8\u79cd</li> <li>Char + bichar: (Chen et al., 2015; Yang et al., 2017a). \u8bc1\u660e\u4e86\u5728 word segmentation \u9886\u57dfCharacter bigrams \u7684\u6709\u7528\u6027</li> <li>Char + softword: \u52a0\u5165\u4e86 segmentation label \u4fe1\u606f (BMES\u6807\u6ce8\u65b9\u5f0f; \u4e5f\u662f\u7528 bi-LSTM) \u751f\u6210 emb</li> </ul> </li> <li>Word-Based Model<ul> <li>\u5355\u8bcd\u7ea7\u522b\u7684, \u4e00\u822c\u8981\u52a0\u4e0a char \u4fe1\u606f (\u6548\u679c\u66f4\u597d)</li> <li>Word + char LSTM</li> <li>Word + char LSTM \u2032</li> <li>Word + char CNN: CNN\u8fc7\u4e00\u4e2a\u5355\u8bcd\u4e2d\u5305\u62ec\u7684char, \u7136\u540emax\u6c60\u5316</li> </ul> </li> <li>Lattice Model</li> </ul> <p>\u65e0\u8bba\u662f\u4e0a\u9762\u7684\u54ea\u79cd\u65b9\u6cd5, \u6700\u540e\u90fd\u53ef\u4ee5\u5f97\u5230char\u7ea7\u522b\u7684\u9690\u72b6\u6001\u5e8f\u5217, Decoder \u90e8\u5206\u91c7\u7528 CRF \u5373\u53ef.</p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#lgn","title":"LGN","text":"<ul> <li>19\u2019EMNLP, A Lexicon-Based Graph Neural Network for Chinese NER</li> <li>code https://github.com/RowitZou/LGN/ @1912 Torch \u624b\u52a8\u5b9e\u73b0\u4e86 GNN \u6846\u67b6</li> </ul> <p>\u4e3b\u8981\u601d\u8def: \u9488\u5bf9 Lattice LSTM \u4e2d\u987a\u5e8f\u7ed3\u6784\u65e0\u6cd5\u5229\u7528\u6240\u6709\u8bcd\u6c47\u4fe1\u606f\u7684\u95ee\u9898, \u8fd9\u91cc\u76f4\u63a5\u5229\u7528\u4e86 lexicon \u4fe1\u606f\u6784\u5efa\u56fe. \u901a\u8fc7 GNN (Multi-Head Attention) \u6765\u878d\u5408 1. \u5c40\u90e8\u7684 bi-gram \u4fe1\u606f\u548c 2. \u5168\u5c40\u8282\u70b9\u4fe1\u606f, \u540c\u6837\u90a3\u6700\u540e\u7684\u5b57\u8868\u793a\u901a\u8fc7 CRF \u5f97\u5230\u7ed3\u679c.</p> <p>\u5177\u4f53\u800c\u8a00</p> <ul> <li>Lattice LSTM \u8fd9\u79cd RNN\u7ed3\u6784\u7684\u95ee\u9898: \u4ec5\u4ec5\u4f9d\u9760\u524d\u4e00\u6b65\u7684\u4fe1\u606f\u8f93\u5165\uff0c\u800c\u4e0d\u662f\u5229\u7528\u5168\u5c40\u4fe1\u606f, \u4f8b\u5982\u300c\u5370\u5ea6\u6cb3\u6d41\u7ecf\u5370\u5ea6\u300d\u4e00\u53e5\u4e2d, \u5b57\u7b26 [\u6d41] \u53ef\u4ee5\u5339\u914d\u5230\u8bcd\u6c47 [\u6cb3\u6d41] \u548c [\u6d41\u7ecf] \u4e24\u4e2a\u8bcd\u6c47\u4fe1\u606f\uff0c\u4f46Lattice LSTM\u5374\u53ea\u80fd\u5229\u7528 [\u6cb3\u6d41], \u4ece\u800c\u9020\u6210\u6807\u6ce8\u51b2\u7a81\u95ee\u9898.</li> <li>\u8fd9\u91cc\u901a\u8fc7\u91c7\u53d6 lexicon-based graph neural network (LGN)\u6765\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5c06\u6bcf\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u8282\u70b9\uff0c\u5339\u914d\u5230\u7684\u8bcd\u6c47\u4fe1\u606f\u6784\u6210\u8fb9\u3002\u901a\u8fc7\u56fe\u7ed3\u6784\u5b9e\u73b0\u5c40\u90e8\u4fe1\u606f\u7684\u805a\u5408\uff0c\u5e76\u589e\u52a0\u5168\u5c40\u8282\u70b9\u8fdb\u884c\u5168\u5c40\u4fe1\u606f\u878d\u5165\u3002\u805a\u5408\u65b9\u5f0f\u91c7\u53d6 Multi-Head Attention\uff0c\u5177\u4f53\u8ba1\u7b97\u516c\u5f0f\u53ef\u53c2\u8003\u539f\u8bba\u6587\u3002</li> <li>\u56fe\u7684\u6784\u5efa: 1. \u6240\u6709\u7684character\u4f5c\u4e3a\u8282\u70b9; 2. \u5355\u8bcd\u7684\u9996\u5c3e\u7528\u8fb9\u76f8\u8fde; 3. \u53e6\u5916\u6709\u4e00\u4e2a\u5168\u5c40\u8282\u70b9\u8fde\u63a5\u6240\u6709\u7684\u8282\u70b9\u548c\u8fb9(\u8bcd)<ul> <li>\u6ce8\u610f, \u8fd9\u91cc\u867d\u7136\u662f\u6709\u5411\u56fe, \u4f46\u7528\u4e86\u6b63\u53cd\u4e24\u4e2a\u56fe, \u6700\u540e\u5c06\u4e24\u5f20\u56fe\u7684\u8868\u793a\u62fc\u63a5\u8d77\u6765\u4f5c\u4e3a\u6700\u540e\u8f93\u51fa.</li> </ul> </li> </ul> <p></p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#_2","title":"\u56fe\u6a21\u578b\u66f4\u65b0\u65b9\u5f0f","text":"<p>\u603b\u4f53\u4e0a\u7528 MultiAtt \u6765\u805a\u5408\u90bb\u5c45\u8282\u70b9, \u7136\u540e\u91c7\u7528\u95e8\u673a\u5236\u66f4\u65b0\u8868\u793a.</p> <p>\u5177\u4f53\u800c\u8a00:</p> <ul> <li>\u5728\u805a\u5408\u9636\u6bb5, 1. Char \u8282\u70b9\u7528\u5176\u6240\u6709\u7684\u5165\u5ea6\u8bcd\u6c47; 2. Lexicon \u7528\u5176\u5305\u542b\u7684\u6240\u6709 char; 3. \u5176\u5b9e\u4e5f\u5c31\u662f\u5206\u522b\u7528\u4e86 char \u548c lexicon \u6765\u505a\u591a\u5934\u6ce8\u610f\u529b<ul> <li>\u5b57\u8282\u70b9\u7684\u66f4\u65b0 e \\rightarrow c: \\hat{\\mathbf{c}}_{i}^{t}=\\operatorname{MultiAtt}\\left(\\mathbf{c}_{i}^{t},\\left\\{\\forall_{k}\\left[\\mathbf{c}_{k}^{t} ; \\mathbf{e}_{k, i}^{t}\\right]\\right\\}\\right)</li> <li>\u8bcd\u6c47\u8fb9\u7684\u66f4\u65b0 c \\rightarrow e: \\quad \\hat{\\mathbf{e}}_{b, e}^{t}=\\operatorname{MultiAtt}\\left(\\mathbf{e}_{b, e}^{t}, \\mathbf{C}_{b, e}^{t}\\right), \u6ce8\u610f\u8fd9\u91cc\u7684 \\mathbf{C}_{b, e}^{t} \u5305\u62ec\u4e86\u8fd9\u4e2a\u8bcd\u4e2d\u6240\u6709\u7684\u5b57\u7b26</li> </ul> </li> <li>\u5728\u66f4\u65b0\u9636\u6bb5. 1. Char \u8282\u70b9\u6709\u5e8f\u5217\u4fe1\u606f, \u56e0\u6b64\u91c7\u7528\u7c7b\u4f3c LSTM \u7684\u673a\u5236\u878d\u5408 \u4e0a\u4e00\u4e2a\u5b57\u3001\u5f53\u524d\u5b57\u3001\u5168\u5c40 \u4fe1\u606f; 2. \u800c\u5bf9\u4e8e\u8bcd\u8282\u70b9\u548c\u5168\u5c40\u8282\u70b9, \u7531\u4e8e\u6ca1\u6709\u5e8f\u5217\u4fe1\u606f, \u76f4\u63a5\u5229\u7528 \u9057\u5fd8\u3001\u8f93\u5165 \u8fd9\u4e2a\u95e8\u5373\u53ef.<ul> <li>\u6700\u590d\u6742\u7684\u662f\u8fd9\u91cc\u5b57\u8282\u70b9\u7684\u66f4\u65b0:</li> <li>\\boldsymbol{\\xi}_{i}^{t}=\\left[\\mathbf{c}_{i-1}^{t-1} ; \\mathbf{c}_{i}^{t-1}\\right], \\quad \\boldsymbol{\\chi}_{i}^{t}=\\left[\\hat{\\mathbf{c}}_{i}^{t-1} ; \\hat{\\mathbf{g}}^{t-1}\\right] \\hat{\\boldsymbol{a}}_{i}^{t}=\\sigma\\left(\\mathbf{W}_{i}^{a} \\boldsymbol{\\xi}_{i}^{t}+\\mathbf{V}_{i}^{a} \\boldsymbol{\\chi}_{i}^{t}+\\mathbf{b}_{i}^{a}\\right), \\quad \\boldsymbol{a}=\\{\\boldsymbol{i}, \\boldsymbol{f}, \\boldsymbol{l}\\} \\boldsymbol{u}_{i}^{t}=\\tanh \\left(\\mathbf{W}_{c u} \\boldsymbol{\\xi}_{i}^{t}+\\mathbf{V}_{c u} \\boldsymbol{\\chi}_{i}^{t}+\\mathbf{b}_{c u}\\right) \\boldsymbol{i}_{i}^{t}, \\boldsymbol{f}_{i}^{t}, \\boldsymbol{l}_{i}^{t}=\\operatorname{softmax}\\left(\\hat{\\boldsymbol{i}}_{i}^{t}, \\hat{\\boldsymbol{f}}_{i}^{t}, \\hat{\\boldsymbol{l}}_{i}^{t}\\right) \\mathbf{c}_{i}^{t}=\\boldsymbol{l}_{i}^{t} \\odot \\mathbf{c}_{i-1}^{t-1}+\\boldsymbol{f}_{i}^{t} \\odot \\mathbf{c}_{i}^{t-1}+\\boldsymbol{i}_{i}^{t} \\odot \\boldsymbol{u}_{i}^{t},</li> <li>\u8fd9\u91cc\u7684 \\boldsymbol{\\xi}_{i}^{t} \u62fc\u63a5\u4e86\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684\u5b57\u5e8f\u5217\u4fe1\u606f (\u957f\u5ea6\u4e3a2\u7684 a context window), \\boldsymbol{\\chi}_{i}^{t} \u62fc\u63a5\u4e86\u4e0a\u4e00\u6b65\u805a\u5408\u4e86\u8bcd\u6c47\u8fb9\u7684\u5411\u91cf\u548c\u5168\u5c40\u5411\u91cf, \u56e0\u6b64\u53ef\u4ee5\u5206\u522b\u770b\u6210\u5c40\u90e8\u548c\u5168\u5c40\u4fe1\u606f.</li> <li>\\boldsymbol{u}_{i}^{t} \u7c7b\u4f3c LSTM \u4e2d\u7684\u66f4\u65b0\u5411\u91cf, \u5229\u7528\u4e86\u5f52\u4e00\u5316\u7684\u4e09\u4e2a\u95e8\u6765\u878d\u5408\u524d\u540e\u4e24\u4e2a\u5b57+\u5168\u5c40\u8f93\u5165\u4fe1\u606f; \u6ca1\u6709\u91c7\u7528 LSTM \u4e2d\u7684\u8f93\u51fa\u95e8. [\u56e0\u4e3a\u8fd9\u91cc\u662f\u56fe\u7ed3\u6784, GNN \u662f\u8fed\u4ee3\u7684\u8fc7\u7a0b, \u800c LSTM \u672c\u8d28\u4e0a\u8fd8\u662f RNN, \u53ef\u4ee5\u6bd4\u8f83\u4e24\u8005\u7684\u66f4\u65b0\u516c\u5f0f]</li> <li>\u800c\u5bf9\u4e8e\u8bcd\u8868\u793a\u7684\u66f4\u65b0\u5c31\u66f4\u6e05\u6670: \\boldsymbol{\\chi}_{b, e}^{t}, \\mathbf{e}_{b, e}^{t-1} \u5206\u522b\u662f\u5168\u5c40\u4fe1\u606f\u548c\u4e0a\u4e00\u65f6\u523b\u7684\u5c40\u90e8\u4fe1\u606f, \u7528\u4e24\u4e2a\u95e8\u878d\u5408\u8d77\u6765</li> <li>\\boldsymbol{\\chi}_{b, e}^{t}=\\left[\\hat{\\mathbf{e}}_{b, e}^{t-1} ; \\hat{\\mathbf{g}}^{t-1}\\right], \\quad \\boldsymbol{a}=\\{\\boldsymbol{i}, \\boldsymbol{f}\\} \\hat{\\boldsymbol{a}}_{b, e}^{t}=\\sigma\\left(\\mathbf{W}_{i}^{a} \\mathbf{e}_{b, e}^{t-1}+\\mathbf{V}_{i}^{a} \\boldsymbol{\\chi}_{b, e}^{t}+\\mathbf{b}_{i}^{a}\\right) \\boldsymbol{u}_{b, e}^{t}=\\tanh \\left(\\mathbf{W}_{e u} \\mathbf{e}_{b, e}^{t-1}+\\mathbf{V}_{e u} \\boldsymbol{\\chi}_{b, e}^{t}+\\mathbf{b}_{e u}\\right) \\boldsymbol{i}_{b, e}^{t}, \\boldsymbol{f}_{b, e}^{t}=\\operatorname{softmax}\\left(\\hat{\\boldsymbol{i}}_{b, e}^{t}, \\hat{\\boldsymbol{f}}_{b, e}^{t}\\right) \\mathbf{e}_{b, e}^{t}=\\boldsymbol{f}_{b, e}^{t} \\odot \\mathbf{e}_{b, e}^{t-1}+\\boldsymbol{i}_{b, e}^{t} \\odot \\boldsymbol{u}_{b, e}^{t},</li> </ul> </li> </ul>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#simple-lexicon","title":"Simple Lexicon","text":"<ul> <li>20\u2019ACL, Simplify the Usage of Lexicon in Chinese NER</li> <li>code https://github.com/v-mipeng/LexiconAugmentedNER</li> </ul> <p>\u4e3b\u4f53\u7684\u601d\u8def\u5c31\u662f\u8981\u5c06\u8bcd\u6c47\u4fe1\u606f\u5f15\u5165\u5230\u5b57\u7684\u8868\u8fbe\u4e2d. \u5bf9\u4e8e LatticeLSTM \u901f\u5ea6\u6162\u548c\u7ed3\u6784\u5355\u4e00\u65e0\u6cd5\u8fc1\u79fb\u7684\u95ee\u9898, \u91c7\u7528\u4e86\u66f4\u4e3a\u76f4\u63a5\u7684\u5c06\u8bcd\u6c47 embedding \u878d\u5408\u540e\u76f4\u63a5\u62fc\u63a5\u5230\u5b57\u8868\u793a\u540e\u9762\u7684\u65b9\u5f0f\u6765\u8fdb\u884c\u589e\u5f3a.</p> <ul> <li>\u9488\u5bf9 LatticeLSTM \u7684\u95ee\u9898, 1. LSTM \u8bad\u7ec3\u548c\u63a8\u7406\u6162; 2. \u7ed3\u6784\u5355\u4e00, \u65e0\u6cd5\u8fc1\u79fb\u5230 CNN\u6216\u8005Transformer \u7b49\u7f51\u7edc\u7ed3\u6784\u4e2d.</li> <li>\u8d21\u732e: 1. \u4e00\u79cd simple but effective \u7684\u65b9\u5f0f\u6765 incorporating word lexicons into the character representations; 2. \u8be5\u6a21\u578b\u53ef\u4ee5\u8fc1\u79fb\u5230 different sequence-labeling architectures \u4ee5\u53ca BERT \u7b49\u9884\u8bad\u7ec3\u6a21\u578b\u4e0a</li> </ul> <p></p> <p>\u5177\u4f53\u800c\u8a00, \u63d0\u51fa\u4e86\u4e09\u79cd\u878d\u5408\u8bcd\u6c47\u7684\u65b9\u5f0f</p> <ul> <li>Softword<ul> <li>Softword\u901a\u8fc7\u4e2d\u6587\u5206\u8bcd\u6a21\u578b\u540e\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u5b57\u7b26\u8fdb\u884c BMESO \u7684embedding\u5d4c\u5165\u3002</li> <li>\u95ee\u9898: \u8fd9\u79cdSoftword\u65b9\u5f0f\u5b58\u5728\u7531\u5206\u8bcd\u9020\u6210\u7684\u8bef\u5dee\u4f20\u64ad\u95ee\u9898\uff0c\u540c\u65f6\u4e5f\u65e0\u6cd5\u5f15\u5165\u8bcd\u6c47\u5bf9\u5e94word embedding\u3002</li> </ul> </li> <li>ExtendSoftword<ul> <li>ExtendSoftword\u5219\u5c06\u6240\u6709\u53ef\u80fd\u5339\u914d\u5230\u7684\u8bcd\u6c47\u7ed3\u679c\u5bf9\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\u8868\u793a\u3002</li> <li>\u4f8b\u5982, \u5728\u300c\u5c0f\u660e\u4f4f\u5728\u4e2d\u5c71\u897f\u8def\u300d\u4e00\u53e5\u4e2d, \u5b57\u7b26\u300c\u5c71\u300d\u5339\u914d\u5230\u7684\u8bcd\u6c47\u6709\u4e2d\u5c71\u3001\u4e2d\u5c71\u897f\u3001\u5c71\u897f\u8def\uff0c\u300c\u5c71\u300d\u96b6\u5c5e {B,M,E}\u3002\u8bba\u6587\u5bf9\u4e8e\u5b57\u7b26\u5bf9\u5e94\u7684\u8bcd\u6c47\u4fe1\u606f\u6309\u7167BMESO\u7f16\u7801\u6784\u5efa5\u7ef4\u4e8c\u5143\u5411\u91cf\uff0c\u5982\u300c\u5c71\u300d\u8868\u793a\u4e3a[1,1,1,0,0].</li> <li>\u95ee\u9898: 1\uff09\u4ecd\u7136\u65e0\u6cd5\u5f15\u5165\u8bcd\u6c47\u5bf9\u5e94\u7684word embedding\uff1b2\uff09\u4e5f\u4f1a\u9020\u6210\u4fe1\u606f\u635f\u5931\uff0c\u65e0\u6cd5\u6062\u590d\u8bcd\u6c47\u5339\u914d\u7ed3\u679c\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u6709\u4e24\u4e2a\u8bcd\u6c47\u5217\u8868[\u4e2d\u5c71\uff0c\u5c71\u897f\uff0c\u4e2d\u5c71\u897f\u8def]\u548c[\u4e2d\u5c71\uff0c\u4e2d\u5c71\u897f\uff0c\u5c71\u897f\u8def]\uff0c\u6309\u7167ExtendSoftword\u65b9\u5f0f\uff0c\u4e24\u4e2a\u8bcd\u6c47\u5217\u8868\u5bf9\u5e94\u5b57\u7b26\u5339\u914d\u7ed3\u679c\u662f\u4e00\u81f4\u7684\uff1b\u6362\u53e5\u8bdd\u8bf4\uff0c\u5f53\u524dExtendSoftword\u5339\u914d\u7ed3\u679c\u65e0\u6cd5\u590d\u539f\u539f\u59cb\u7684\u8bcd\u6c47\u4fe1\u606f\u662f\u600e\u6837\u7684\uff0c\u4ece\u800c\u5bfc\u81f4\u4fe1\u606f\u635f\u5931\u3002</li> </ul> </li> <li>Soft-lexicon<ul> <li>\u4e3a\u4e86\u89e3\u51b3Softword\u548cExtendSoftword\u5b58\u5728\u7684\u95ee\u9898\uff0cSoft-lexicon\u5bf9\u5f53\u524d\u5b57\u7b26\uff0c\u4f9d\u6b21\u83b7\u53d6BMES\u5bf9\u5e94\u6240\u6709\u8bcd\u6c47\u96c6\u5408\uff0c\u7136\u540e\u518d\u8fdb\u884c\u7f16\u7801\u8868\u793a.</li> <li>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bcd\u6c47\u96c6\u5408 S, \u5229\u7528\u6587\u672c\u4e2d\u8bcd\u6c47\u7684\u51fa\u73b0\u9891\u6b21\u8ba1\u7b97\u7efc\u5408\u8868\u793a<ul> <li>\\boldsymbol{v}^{s}(S)=\\frac{4}{Z} \\sum_{w \\in S} z(w) \\boldsymbol{e}^{w}(w)</li> <li>\u5176\u4e2d\u5f52\u4e00\u5316\u6743\u91cd\u7528\u4e86\u56db\u7ec4\u8bcd\u6c47\u7684\u5168\u90e8 Z=\\sum_{w \\in B \\cup M \\cup E \\cup S} z(w).</li> </ul> </li> <li>\u4f8b\u5982, \u5728\u6a21\u578b\u56fe\u4e2d\u7684\u300c\u4e2d\u56fd\u8bed\u8a00\u5b66\u300d\u4e00\u53e5, \u5bf9\u4e8e\u5b57\u7b26[\u8bed]\uff0c\u5176\u6807\u7b7eB\u5bf9\u5e94\u7684\u8bcd\u6c47\u96c6\u5408\u6db5\u76d6[\u8bed\u8a00\uff0c\u8bed\u8a00\u5b66]\uff1b\u6807\u7b7eM\u5bf9\u5e94[\u4e2d\u56fd\u8bed\u8a00]\uff1b\u6807\u7b7eE\u5bf9\u5e94[\u56fd\u8bed\u3001\u4e2d\u56fd\u8bed]\uff1b\u6807\u7b7eS\u5bf9\u5e94[\u8bed]\u3002\u5f53\u524d\u5b57\u7b26\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f\u540e\u7684\u7279\u5f81\u8868\u793a\u4e3a\uff1a</li> <li>\\begin{aligned} \\boldsymbol{e}^{s}(\\mathrm{~B}, \\mathrm{M}, \\mathrm{E}, \\mathrm{S}) &amp;=\\left[\\boldsymbol{v}^{s}(\\mathrm{~B}) ; \\boldsymbol{v}^{s}(\\mathrm{M}) ; \\boldsymbol{v}^{\\mathrm{s}}(\\mathrm{E}) ; \\boldsymbol{v}^{\\mathrm{s}}(\\mathrm{S})\\right] \\\\ \\boldsymbol{x}^{c} &amp; \\leftarrow\\left[\\boldsymbol{x}^{c} ; \\boldsymbol{e}^{s}(\\mathrm{~B}, \\mathrm{M}, \\mathrm{E}, \\mathrm{S})\\right] \\end{aligned}</li> </ul> </li> </ul> <p>\u7efc\u4e0a\u53ef\u89c1\uff0cSoft-lexicon\u8fd9\u79cd\u65b9\u6cd5\u6ca1\u6709\u9020\u6210\u4fe1\u606f\u635f\u5931\uff0c\u540c\u65f6\u53c8\u53ef\u4ee5\u5f15\u5165word embedding\uff0c\u6b64\u5916\uff0c\u672c\u65b9\u6cd5\u7684\u4e00\u4e2a\u7279\u70b9\u5c31\u662f\u6a21\u578b\u65e0\u5173\uff0c\u53ef\u4ee5\u9002\u914d\u4e8e\u5176\u4ed6\u5e8f\u5217\u6807\u6ce8\u6846\u67b6\u3002</p> <p></p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#flat","title":"FLAT","text":"<ul> <li>20\u2018ACL, FLAT- Chinese NER Using Flat-Lattice Transformer</li> <li>code https://github.com/LeeSureman/Flat-Lattice-Transformer</li> </ul> <p>FLAT\u91c7\u53d6\u4e86\u5168\u8fde\u63a5\u81ea\u6ce8\u610f\u529b\u7ed3\u6784\uff0c\u53ef\u4ee5\u76f4\u63a5\u5b57\u7b26\u4e0e\u5176\u6240\u5339\u914d\u8bcd\u6c47\u95f4\u7684\u4ea4\u4e92\uff0c\u540c\u65f6\u6355\u6349\u957f\u8ddd\u79bb\u4f9d\u8d56\u3002</p> <p>[\u5b9e\u9a8c\u90e8\u5206] \u5982\u679c\u5c06\u5b57\u7b26\u4e0e\u8bcd\u6c47\u95f4\u7684attention\u8fdb\u884cmasked\uff0c\u6027\u80fd\u4e0b\u964d\u660e\u663e\uff0c\u53ef\u89c1\u5f15\u5165\u8bcd\u6c47\u4fe1\u606f\u5bf9\u4e8e\u4e2d\u6587NER \u7684\u91cd\u8981\u6027\u3002\u6b64\u5916\uff0c\u76f8\u5173\u5b9e\u9a8c\u8868\u660e\uff0cFLAT\u6709\u6548\u7684\u539f\u56e0\u662f\uff1a\u65b0\u7684\u76f8\u5bf9\u4f4d\u7f6eencoding\u6709\u5229\u4e8e\u5b9a\u4f4d\u5b9e\u4f53span\uff0c\u800c\u5f15\u5165\u8bcd\u6c47\u7684word embedding\u6709\u5229\u4e8e\u5b9e\u4f53type\u7684\u5206\u7c7b\u3002</p> <p>\u6b64\u524d\u65b9\u6848\u7684\u4e24\u79cd\u601d\u8def:</p> <ul> <li>Lattice-LSTM\u548cLR-CNN\u91c7\u53d6\u7684RNN\u548cCNN\u7ed3\u6784\u65e0\u6cd5\u6355\u6349\u957f\u8ddd\u79bb\u4f9d\u8d56\uff0c\u800c\u52a8\u6001\u7684Lattice\u7ed3\u6784\u4e5f\u4e0d\u80fd\u5145\u5206\u8fdb\u884cGPU\u5e76\u884c\u3002</li> <li>\u800cCGN\u548cLGN\u91c7\u53d6\u7684\u56fe\u7f51\u7edc\u867d\u7136\u53ef\u4ee5\u6355\u6349\u5bf9\u4e8eNER\u4efb\u52a1\u81f3\u5173\u91cd\u8981\u7684\u987a\u5e8f\u7ed3\u6784\uff0c\u4f46\u8fd9\u4e24\u8005\u4e4b\u95f4\u7684gap\u662f\u4e0d\u53ef\u5ffd\u7565\u7684\u3002\u5176\u6b21\uff0c\u8fd9\u7c7b\u56fe\u7f51\u7edc\u901a\u5e38\u9700\u8981RNN\u4f5c\u4e3a\u5e95\u5c42\u7f16\u7801\u5668\u6765\u6355\u6349\u987a\u5e8f\u6027\uff0c\u901a\u5e38\u9700\u8981\u590d\u6742\u7684\u6a21\u578b\u7ed3\u6784\u3002</li> </ul> <p></p> <p>\u5177\u4f53\u601d\u8def:</p> <ul> <li>Transformer\u91c7\u53d6\u5168\u8fde\u63a5\u7684\u81ea\u6ce8\u610f\u529b\u673a\u5236\u53ef\u4ee5\u5f88\u597d\u6355\u6349 \u957f\u8ddd\u79bb\u4f9d\u8d56\uff0c\u7531\u4e8e\u81ea\u6ce8\u610f\u529b\u673a\u5236\u5bf9\u4f4d\u7f6e\u662f\u65e0\u504f\u7684\uff0c\u56e0\u6b64Transformer\u5f15\u5165 \u4f4d\u7f6e\u5411\u91cf \u6765\u4fdd\u6301\u4f4d\u7f6e\u4fe1\u606f\u3002</li> <li>\u8fd9\u91cc\u8bbe\u8ba1\u4e86\u4e00\u79cd position encoding\u6765\u878d\u5408Lattice \u7ed3\u6784, \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b57\u7b26\u548c\u8bcd\u6c47\u90fd\u6784\u5efa\u4e24\u4e2ahead position encoding \u548c tail position encoding (\u53ef\u4ee5\u8bc1\u660e\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u91cd\u6784\u539f\u6709\u7684Lattice\u7ed3\u6784, \u56e0\u6b64\u6ca1\u6709\u4fe1\u606f\u635f\u5931).</li> <li>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06Lattice\u7ed3\u6784\u5c55\u5e73\uff0c\u5c06\u5176\u4ece\u4e00\u4e2a\u6709\u5411\u65e0\u73af\u56fe\u5c55\u5e73\u4e3a\u4e00\u4e2a\u5e73\u9762\u7684Flat-Lattice Transformer\u7ed3\u6784\uff0c\u7531\u591a\u4e2aspan\u6784\u6210\uff1a\u6bcf\u4e2a\u5b57\u7b26\u7684head\u548ctail\u662f\u76f8\u540c\u7684\uff0c\u6bcf\u4e2a\u8bcd\u6c47\u7684head\u548ctail\u662fskipped\u7684\u3002</li> </ul> <p>\u7136\u540e\u76f4\u63a5\u5c06\u8fd9\u4e2a FLAT \u5f97\u5230 \u5b57\u8868\u793a \u8f93\u5165\u5230 CRF \u5373\u53ef.</p>"},{"location":"NLP/Lexicon-%E8%AF%8D%E6%B1%87%E5%A2%9E%E5%BC%BA/#_3","title":"\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801","text":"<ul> <li>\u5bf9\u4e8e NER \u4efb\u52a1\u7edd\u5bf9\u4f4d\u7f6e\u7f16\u7801\u4e0d\u9002\u7528, \u53c2\u89c1 \u5982\u4f55\u89e3\u51b3Transformer\u5728NER\u4efb\u52a1\u4e2d\u6548\u679c\u4e0d\u4f73\u7684\u95ee\u9898\uff1f</li> <li>\u56e0\u6b64\u91c7\u53d6XLNet\u8bba\u6587\u4e2d\u63d0\u51fa\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801\u8ba1\u7b97 attention score \\begin{aligned} \\mathbf{A}_{i, j}^{*} &amp;=\\mathbf{W}_{q}^{\\top} \\mathbf{E}_{x_{i}}^{\\top} \\mathbf{E}_{x_{j}} \\mathbf{W}_{k, E}+\\mathbf{W}_{q}^{\\top} \\mathbf{E}_{x_{i}}^{\\top} \\mathbf{R}_{i j} \\mathbf{W}_{k, R} \\\\ &amp;+\\mathbf{u}^{\\top} \\mathbf{E}_{x_{j}} \\mathbf{W}_{k, E}+\\mathbf{v}^{\\top} \\mathbf{R}_{i j} \\mathbf{W}_{k, R}, \\end{aligned}</li> <li>\u8fd9\u91cc\u7684\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801\u8ba1\u7b97\u516c\u5f0f\u4e3a R_{i j}=\\operatorname{ReLU}\\left(W_{r}\\left(\\mathbf{p}_{d_{i j}^{(h h)}} \\oplus \\mathbf{p}_{d_{i j}^{(t h)}} \\oplus \\mathbf{p}_{d_{i j}^{(h t)}} \\oplus \\mathbf{p}_{d_{i j}^{(t t)}}\\right)\\right), \u5176\u4e2d d_{i j}^{(h h)} \u7b49\u5206\u522b\u662f\u4e24\u4e2a\u8bcd\u4e4b\u95f4\u5934\u5c3e\u7684\u8ddd\u79bb, \u4f4d\u7f6e\u7f16\u7801\u91c7\u7528\u7ecf\u5178\u7684</li> <li>\\mathbf{p}_{d}^{(2 k)}=\\sin \\left(d / 10000^{2 k / d_{\\text {model }}}\\right); \\mathbf{p}_{d}^{(2 k+1)}=\\cos \\left(d / 10000^{2 k / d_{\\text {model }}}\\right)</li> </ul> <p>\u4ee5\u4e0b\u6765\u81ea\u4e0a\u9762\u7684\u94fe\u63a5, \u53e6\u5916\u53c2\u8003 \u8ba9\u7814\u7a76\u4eba\u5458\u7ede\u5c3d\u8111\u6c41\u7684Transformer\u4f4d\u7f6e\u7f16\u7801</p> <ul> <li>Sinusoidal position embedding<ul> <li>\u4e0d\u5177\u5907\u65b9\u5411\u6027: P E_{t}^{T} P E_{t+k}=P E_{t-k}^{T} P E_{t}</li> <li>\u4f4d\u7f6e\u7684\u76f4\u63a5\u76f8\u4e58\u6709\u8ddd\u79bb\u611f\u77e5 (\u968f\u7740\u8ddd\u79bb |k| \u7684\u51cf\u5c11\u70b9\u79ef\u589e\u5927), \u4f46\u662f\u8fd9\u4e00\u7279\u6027\u4e5f\u88ab\u540e\u9762\u7684self-attention\u673a\u5236\u7834\u574f\u4e86, \u6ce8\u610f\u5230\u5728 vanilla transformer \u4e2d P E_{t}^{T} W_{q}^{T} W_{k} P E_{t+k}, \u4e0b\u56fe\u5c55\u793a\u4e86 P E_{t}^{T} W P E_{t+k} \u4e0e P E_{t}^{T} P E_{t+k} \u7684\u5dee\u5f02, \u8fd9\u91cc\u7684 W \u968f\u673a\u521d\u59cb\u5316</li> </ul> </li> </ul> <p></p>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/","title":"Prompt \u63d0\u793a\u8bed\u8a00\u6a21\u578b","text":"<p>Prompt</p> <p>TODO</p> <ul> <li>20\u2019ACL, Prefix-Tuning: Optimizing Continuous Prompts for Generation \u4fee\u6539\u4e86prompt\u505a\u751f\u6210?</li> </ul> <p>Links</p> <ul> <li>Thunlp | PromptPapers https://github.com/thunlp/PromptPapers</li> <li>Web survey | http://pretrain.nlpedia.ai/<ul> <li>CMU \u5218\u9e4f\u98de\uff5cNLP\u7684\u7b2c\u56db\u8303\u5f0f @2108</li> </ul> </li> <li>Riroaki Prompt-based Language Models\uff1a\u6a21\u7248\u589e\u5f3a\u8bed\u8a00\u6a21\u578b\u5c0f\u7ed3 @2106</li> <li>LM-BFF \u4f5c\u8005\u9ad8\u5929\u5b87\u7684\u6587\u7ae0 Prompting: \u66f4\u597d\u5730\u5c06\u8bed\u8a00\u6a21\u578b\u5e94\u7528\u5230NLP\u4efb\u52a1 \u53ef\u4ee5\u770b\u6210\u662f prompt, in-context learning, few-shot setting \u65b9\u9762\u7684\u7efc\u8ff0\u4e86!</li> </ul> <p>\u6d89\u53ca\u5230\u7684\u8bba\u6587</p> <ul> <li>21\u2019EACL, Exploiting Cloze Questions for Few Shot Text Classi\ufb01cation and Natural Language Inference (PET)<ul> <li>\u4ecb\u7ecd\u4e86\u4e00\u79cd\u57fa\u4e8e\u6a21\u7248\u548c\u8bcd\u906e\u76d6\u5c06\u6587\u672c\u5206\u7c7b\u4efb\u52a1 \u8f6c\u6362\u4e3a\u5b8c\u5f62\u586b\u7a7a\uff08cloze\uff09 \u4efb\u52a1\u7684\u534a\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5 (\u5229\u7528MLM\u6a21\u578b\u505a\u5c0f\u6837\u672c\u5b66\u4e60\u548c\u534a\u76d1\u7763\u5b66\u4e60); \u4ec5\u4f7f\u7528 RoBERTa-base \u6a21\u578b\u5c31\u5728\u591a\u4e2a\u534a\u76d1\u7763\u573a\u666f\u4e0b\u53d6\u5f97\u4e86SOTA</li> </ul> </li> <li>21\u2019NAACL, It\u2019s Not Just Size That Matters- Small Language Models Are Also Few-Shot Learners (PET)<ul> <li>\u901a\u8fc7\u5c06\u201c\u5c0f\u6a21\u578b\u201d\uff08ALBERT\uff09\u548c GPT-3 \u8fd9\u4e00\u5de8\u65e0\u9738\u5728 SuperGLUE benchmark \u4e0a\u8fdb\u884c\u5bf9\u6bd4\uff0c\u8fdb\u4e00\u6b65\u6316\u6398 PET \u8bad\u7ec3\u5728 \u5c11\u6837\u672c\u573a\u666f \u4e0b\u7684\u6f5c\u529b</li> </ul> </li> <li>20\u2019TACL, How Can We Know What Language Models Know? (LPAQA)<ul> <li>\u63d0\u51fa\u4e86 1. \u8fdc\u7a0b\u76d1\u7763; 2. \u56de\u8bd1 \u4e24\u79cd\u81ea\u52a8\u751f\u6210 prompt \u7684\u65b9\u6cd5, \u5e76\u5229\u7528\u4e00\u5b9a\u7684\u673a\u5236\u8fdb\u884c\u4e86\u7b5b\u9009; \u5e94\u7528\u573a\u666f\u662f\u5728 LAMA \u6570\u636e\u96c6\u4e0a\u68c0\u6d4b LM \u6240\u5b66\u4e60\u7684\u77e5\u8bc6\u6709\u591a\u5c11</li> </ul> </li> <li>20\u2019EMNLP, AUTOPROMPT: Eliciting Knowledge from Language Models with Automatically Generated Prompts (AutoPrompt)<ul> <li>\u63d0\u51fa\u4e86\u4e00\u79cd\u57fa\u4e8e\u68af\u5ea6\u7684\u6a21\u7248\u641c\u7d22\u65b9\u6848. \u57fa\u672c\u601d\u8def\u5c31\u662f: \u901a\u8fc7\u68af\u5ea6\u8fdb\u884c\u7c97\u7b5b, \u7136\u540e\u4ee3\u5165\u6a21\u677f\u57fa\u4e8e\u6548\u679c\u7cbe\u7b5b</li> </ul> </li> <li>21\u2019ACL, Making Pre-trained Language Models Better Few-shot Learners (LM-BFF)<ul> <li>\u9648\u4e39\u7426\u7ec4, \u5c11\u6837\u672c\u4e0b\u573a\u666f\u4e0b, \u57fa\u4e8e\u8c37\u6b4c\u7684T5\u6a21\u578b\u6784\u5efa\u4e86\u4e00\u4e2a\u81ea\u52a8\u5316\u7684pipeline \u8fdb\u884c prompt \u641c\u7d22; \u5177\u4f53\u5305\u62ec\u6807\u7b7e\u8bcd\u7684\u81ea\u52a8\u641c\u7d22\u3001\u6a21\u7248\u7684\u641c\u7d22\u548c\u6837\u672c\u5b9e\u4f8b\u7684\u641c\u7d22</li> </ul> </li> <li>21\u2019, GPT Understands, Too (p-tuning)<ul> <li>\u5510\u6770. \u8fde\u7eed\u6a21\u677f\u641c\u7d22. \u540c\u65f6\u4f7f\u5f97GPT\u5728 SuperGLUE \u4e0a\u7684\u6210\u7ee9\u9996\u6b21\u8d85\u8fc7\u4e86\u540c\u7b49\u7ea7\u522b\u7684BERT\u6a21\u578b\uff0c\u8fd9\u98a0\u8986\u4e86\u4e00\u76f4\u4ee5\u6765\u201cGPT\u4e0d\u64c5\u957fNLU\u201d\u7684\u7ed3\u8bba</li> </ul> </li> </ul> <p>Switch Transformers: Scaling to Trillion Parameter Models with Simple and Efficient Sparsity, 2021</p>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#papers","title":"Papers","text":""},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#pattern-exploiting-training-pet","title":"Pattern-Exploiting Training (PET)","text":"<p>\u4e24\u7bc7\u8bba\u6587</p> <ul> <li>21\u2019EACL2021, Exploiting Cloze Questions for Few Shot Text Classification and Natural Language Inference<ul> <li>\u5176\u4e2d\u4ecb\u7ecd\u4e86\u4e00\u79cd\u57fa\u4e8e\u6a21\u7248\u548c\u8bcd\u906e\u76d6\u5c06\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u8f6c\u6362\u4e3a\u5b8c\u5f62\u586b\u7a7a\uff08cloze\uff09\u4efb\u52a1\u7684\u534a\u76d1\u7763\u8bad\u7ec3\u65b9\u6cd5\uff0c\u4ec5\u4f7f\u7528 RoBERTa-base \u6a21\u578b\u5c31\u5728\u591a\u4e2a\u534a\u76d1\u7763\u573a\u666f\u4e0b\u53d6\u5f97\u4e86SOTA\u3002</li> </ul> </li> <li>21\u2019NAACL, It\u2019s Not Just Size That Matters: Small Language Models Are Also Few-Shot Learners<ul> <li>\u901a\u8fc7\u5c06\u201c\u5c0f\u6a21\u578b\u201d\uff08ALBERT\uff09\u548c GPT-3 \u8fd9\u4e00\u5de8\u65e0\u9738\u5728 SuperGLUE benchmark \u4e0a\u8fdb\u884c\u5bf9\u6bd4\uff0c\u8fdb\u4e00\u6b65\u6316\u6398 PET \u8bad\u7ec3\u5728 \u5c11\u6837\u672c\u573a\u666f \u4e0b\u7684\u6f5c\u529b\u3002</li> </ul> </li> </ul> <p>\u4e24\u70b9\u542f\u53d1/\u6e90\u5934:</p> <ul> <li>GPT, \u96f6\u6837\u672c\u4e0b\u57fa\u4e8e \u4efb\u52a1\u63cf\u8ff0\uff08task description\uff09 \u751f\u6210\u6587\u672c, \u5c11\u6837\u672c;</li> <li>MLM, BERT \u4e2d 15%\u7684\u8f93\u5165\u8bcd\u88ab\u9009\u4e2d (\u5927\u90e8\u5206) \u88ab\u66ff\u6362\u4e3a [MASK]\u6807\u7b7e, \u5e76\u5728\u6700\u7ec8\u7684hidden states\u4e2d\u5bf9\u88ab\u906e\u76d6\u7684\u8bcd\u8fdb\u884c\u9884\u6d4b\uff0c\u901a\u8fc7\u8fd8\u539f\u906e\u76d6\u8bcd\u8ba9\u6a21\u578b\u5b66\u4e60\u5355\u8bcd\u7ea7\u522b\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f</li> </ul> <p>\u5177\u4f53\u800c\u8a00</p> <ul> <li>PET<ul> <li>\u5bf9\u6709\u6807\u7b7e\u6837\u672c\u96c6\u8bbe\u8ba1\u4e0d\u540c\u7684\u6a21\u7248\uff0c\u7136\u540e\u5bf9\u6bcf\u4e00\u4e2a\u6a21\u7248\uff0c\u5206\u522b\u8bad\u7ec3\u6a21\u578b\uff1b\u56e0\u4e3a\u6709\u6807\u7b7e\u6837\u672c\u6bd4\u8f83\u5c11\uff0c\u6240\u4ee5\u8bad\u7ec3\u6210\u672c\u4f4e\u4e8e\u5168\u91cf\u6570\u636e\u8bad\u7ec3\u4e00\u4e2a\u5b8c\u6574\u7684\u6a21\u578b\uff1b</li> <li>\u7ed3\u5408\u4e86\u5b8c\u5f62\u586b\u7a7a\u7684\u8bcd\u5206\u7c7bloss\u548cMLM Loss\u8fdb\u884c\u8bad\u7ec3\uff0c\u5176\u4e2dMLM loss\u5360\u8f83\u5c0f\u6bd4\u91cd\uff081e-4\uff09</li> <li>\u4f7f\u7528\u4e0a\u9762\u8bad\u7ec3\u5f97\u5230\u7684\u4e00\u5806\u6a21\u578b\uff0c\u5728\u65e0\u6807\u7b7e\u6570\u636e\u4e0a\u8fdb\u884c\u9884\u6d4b\uff0c\u6309\u4e0d\u540cpattern\u7684\u6a21\u578bacc\u5bf9\u5e94\u6743\u91cd\u5bf9\u6240\u6709\u7684\u9884\u6d4b\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u4f5c\u4e3a soft label \u84b8\u998f\u4e00\u4e2a\u6700\u7ec8\u6a21\u578b\uff1b \u2014\u2014 \u6a21\u578b\u878d\u5408, \u7528\u4f2a\u6807\u7b7e\u6570\u636e Finetune\u4e00\u4e2a\u5e38\u89c4\u7684\uff08\u975eMLM\u7684\uff09\u6a21\u578b\u3002</li> <li>\u5177\u4f53 PET \u4e2d\u6a21\u578b\u96c6\u6210\u7684\u6b65\u9aa4, \u53c2\u89c1 here</li> </ul> </li> </ul> <p></p> <ul> <li>iPET<ul> <li>\u5728PET\u7684\u57fa\u7840\u4e0a\uff0c\u4e3a\u4e86\u8ba9\u4e0d\u540c\u6a21\u7248\u8bad\u7ec3\u51fa\u7684\u6a21\u578b\u4e92\u76f8\u5b66\u4e60\uff0c\u6587\u4e2d\u8fd8\u63d0\u51fa\u4e86\u4e00\u79cd\u8fed\u4ee3\u5f0f\u7684PET\u8bad\u7ec3\uff08Iterative PET\uff0ciPET\uff09\u3002\u5176\u5b9e\u5c31\u662f\u8fdb\u884c\u591a\u4ee3\u4ea4\u53c9\u7684\u84b8\u998f\uff0c\u968f\u673a\u9009\u53d6\u6bcf\u4e00\u4ee3\u7684\u6a21\u578b\u4e3a\u65e0\u6807\u7b7e\u6570\u636e\u8fdb\u884c\u6807\u8bb0\uff0c\u5e76\u57fa\u4e8e\u6b64\u8fdb\u4e00\u6b65\u8bad\u7ec3\u4e0b\u4e00\u4ee3\u6a21\u578b\u3002</li> </ul> </li> <li>\u5728\u8fd9\u4e00\u534a\u76d1\u7763\u573a\u666f\u5de5\u4f5c\u7684\u57fa\u7840\u4e0a\uff0c\u672c\u6587\u4f5c\u8005\u8fdb\u4e00\u6b65\u5728NAACL2021\u4e0a\u53d1\u8868\u4e86\u300aIt\u2019s Not Just Size That Matters: Small Language Models Are Also Few-Shot Learners\u300b\uff0c\u901a\u8fc7\u5c06\u201c\u5c0f\u6a21\u578b\u201d\uff08ALBERT\uff09\u548c GPT-3\u8fd9\u4e00\u5de8\u65e0\u9738\u5728SuperGLUE benchmark \u4e0a\u8fdb\u884c\u5bf9\u6bd4\uff0c\u8fdb\u4e00\u6b65\u6316\u6398PET\u8bad\u7ec3\u5728\u5c11\u6837\u672c\u573a\u666f\u4e0b\u7684\u6f5c\u529b\u3002</li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#_1","title":"\u5b9e\u9a8c","text":"<ul> <li>21\u2019NAACL, It\u2019s Not Just Size That Matters- Small Language Models Are Also Few-Shot Learners (PET)</li> <li>Code https://github.com/timoschick/pet</li> <li>\u82cf\u5251\u6797 | \u5fc5\u987b\u8981GPT3\u5417\uff1f\u4e0d\uff0cBERT\u7684MLM\u6a21\u578b\u4e5f\u80fd\u5c0f\u6837\u672c\u5b66\u4e60 @2009<ul> <li>\u5b9e\u9a8c https://github.com/bojone/Pattern-Exploiting-Training<ul> <li>1\u3001\u76f4\u63a5\u5229\u7528\u73b0\u6210\u7684MLM\u6a21\u578b\u6548\u679c\u5982\u4f55\uff1f\uff08\u96f6\u6837\u672c\u5b66\u4e601\uff09</li> <li>2\u3001\u7528\u201c\u5927\u91cf\u65e0\u6807\u7b7e\u6570\u636e\u201d\u5fae\u8c03\u73b0\u6210\u7684MLM\u6a21\u578b\u6548\u679c\u5982\u4f55\uff1f\uff08\u96f6\u6837\u672c\u5b66\u4e602\uff09</li> <li>3\u3001\u7528\u201c\u5c0f\u91cf\u6807\u7b7e\u6570\u636e\u201d\u5fae\u8c03\u73b0\u6210\u7684MLM\u6a21\u578b\u6548\u679c\u5982\u4f55\uff1f\uff08\u5c0f\u6837\u672c\u5b66\u4e60\uff09</li> <li>4\u3001\u7528\u201c\u5c0f\u91cf\u6807\u7b7e\u6570\u636e+\u5927\u91cf\u65e0\u6807\u7b7e\u6570\u636e\u201d\u5fae\u8c03\u73b0\u6210\u7684MLM\u6a21\u578b\u6548\u679c\u5982\u4f55\uff1f\uff08\u534a\u76d1\u7763\u5b66\u4e60\uff09</li> </ul> </li> </ul> </li> </ul> <p>\u81ea\u5df1\u6309\u7167\u82cf\u795e\u4ee3\u7801\u5c1d\u8bd5\u8dd1\u4e86\u51e0\u56de\uff0c\u7ed3\u679c\u57fa\u672c\u7c7b\u4f3c\u3002</p> <p>\u6765\u770bPET</p> <ol> <li>\u4ece\u96f6\u6837\u672c\u76f4\u63a5\u6d4b\u8bd5\u3001\u5728\u8bad\u7ec3\u96c6\u4e0a\u65e0\u76d1\u7763\u8c03\u6574\u3001\u5f15\u51651%\u8bad\u7ec3\u96c6\u505a\u5c0f\u6837\u672c\u3001\u52a0\u5165\u5269\u4e0b\u7684\u8bad\u7ec3\u96c6\u534a\u76d1\u7763\uff0c\u6a21\u578b\u7684\u6548\u679c\u9010\u6e10\u6709\u63d0\u5347\uff1b\u8fd9\u91cc\u5173\u4e8e \u96f6\u6837\u672c\u3001\u65e0\u76d1\u7763\u3001\u5c0f\u6837\u672c\u3001\u534a\u76d1\u7763 \u7684\u7406\u89e3\u5f88\u5168\u9762\uff1b</li> <li>\u5728\u96f6\u6837\u672c\u7684\u573a\u666f\u4e0b\u5bf9\u4e8e prompt \u7684\u9009\u62e9\u8fdb\u884c\u4e86\u5c1d\u8bd5\uff0c\u7ed3\u8bba\u662f\uff1aprompt \u524d\u7f6e\u7684\u6548\u679c\u603b\u4f53\u4e0a\u8981\u597d\u4e8e\u540e\u7f6e\uff0c\u5e76\u4e14\u4e0d\u540c\u7684 prompt \u5bf9\u4e8e\u7ed3\u679c\u7684\u5f71\u54cd\u8fd8\u662f\u633a\u5927\u7684\uff1b</li> <li>\u8bad\u7ec3\u6280\u5de7\uff1a\u5bf9\u4e8e\u5c0f\u6837\u672c\uff0c\u6bcf\u6b21\u8bad\u7ec3\u53ef\u4ee5\u591a\u653e\u51e0\u8f6e\uff0c\u6536\u655b\u5feb\u4e00\u70b9\uff0c\u5373\u8bbe\u7f6e <code>steps_per_epoch=len(train_generator) * 50,</code></li> </ol> <p></p>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#lm-prompt-and-query-archive-lpaqa","title":"LM Prompt And Query Archive (LPAQA)","text":"<ul> <li>20\u2019TACL, How Can We Know What Language Models Know? (LPAQA)</li> <li>code https://github.com/jzbjyb/LPAQA</li> </ul> <p>\u8fd9\u7bc7\u6587\u7ae0\u5e76\u4e0d\u5e94\u7528\u5728\u524d\u8ff0\u7684\u5c11\u6837\u672c\u573a\u666f\uff0c\u800c\u662f\u9488\u5bf9\u4e00\u4e2a\u68c0\u6d4b\u8bed\u8a00\u6a21\u578b\u662f\u5426\u5177\u6709\u67d0\u4e9b\u77e5\u8bc6\u7684\u63a2\u9488\u4efb\u52a1\uff08Language Models as Knowledge\uff0cLAMA Probe\uff09\u2014\u2014 \u800c\u8fd9\u4e00\u4efb\u52a1\u7684\u5f62\u5f0f\u4e5f\u662f\u5b8c\u5f62\u586b\u7a7a\u3002LPAQA\u65e8\u5728\u6539\u8fdbLAMA\u7684\u6a21\u7248\uff08\u6362\u8a00\u4e4b\uff0c\u8ba9\u8bed\u8a00\u6a21\u578b\u5728\u8fd9\u4e9b\u65b0\u7684queries\u4e0a\u5177\u6709\u66f4\u597d\u7684\u9884\u6d4b\u8868\u73b0\uff09\uff0c\u4ee5\u4e3a\u68c0\u6d4bLM\u4e2d\u7684\u77e5\u8bc6\u63d0\u4f9b\u4e00\u4e2a\u66f4\u4e25\u683c\u7684\u4e0b\u754c\u3002</p> <p>\u751f\u6210\u6a21\u677f</p> <ul> <li>Mining-based Generation\uff1a\u57fa\u4e8e\u8fdc\u7a0b\u76d1\u7763\u7684\u5047\u8bbe\uff08\u5373\uff0c\u51fa\u73b0\u76f8\u540c\u5b9e\u4f53\u5bf9\u7684\u53e5\u5b50\u8868\u8fbe\u76f8\u540c\u7684\u5173\u7cfb\uff09\uff0c\u5728Wikipedia sentence\u4e2d\u5bfb\u627e\u5305\u542b\u5934\u5c3e\u5b9e\u4f53h\u3001t\u7684\u53e5\u5b50\uff0c\u7136\u540e\u8fdb\u4e00\u6b65\u63d0\u51fa\u4e86\u4e24\u79cdprompt\u62bd\u53d6\u65b9\u6cd5\uff1a<ul> <li>Middle-word Prompts\uff1a\u5bf9\u4e8eh\u3001t\u4e2d\u95f4\u5305\u542b\u6587\u672c\u7684\u53e5\u5b50\u5f62\u5f0f\uff0c\u5c06h\u3001t\u4e2d\u95f4\u7684\u6587\u672c\u5f53\u4f5cprompt\uff1b</li> <li>Dependency-based Prompts\uff1a\u5bf9\u4e8e\u5176\u4ed6\u53e5\u5b50\uff0c\u4f7f\u7528\u53e5\u6cd5\u4f9d\u8d56\u89e3\u6790\u6765\u63d0\u53d6h\u548ct\u6700\u77ed\u7684\u8def\u5f84\uff0c\u5e76\u5c06\u8def\u5f84\u4e0a\u7684\u8bcd\u4f5c\u4e3aprompt\uff1b</li> </ul> </li> <li>Paraphrasing-based Generation\uff1a\u7c7b\u4f3c\u67e5\u8be2\u62d3\u5c55\u6280\u672f\uff0c\u5728\u4fdd\u6301\u539fprompt\u8bed\u4e49\u540c\u65f6\u589e\u52a0\u8bcd\u6c47\u7684\u591a\u6837\u6027\u3002\u8fd9\u79cd\u65b9\u6cd5\u4f9d\u8d56\u53cd\u5411\u7ffb\u8bd1\uff08back-translation\uff09\uff0c\u5373\u7ffb\u8bd1\u5230\u53e6\u4e00\u79cd\u8bed\u8a00\u518d\u7ffb\u8bd1\u56de\u6765\uff0c\u6784\u6210\u591a\u4e2a\u6837\u672c\u540e\u6839\u636e\u5f80\u8fd4\u6982\u7387\uff08round-trip probability\uff09\u7b5b\u9009prompt\u3002</li> </ul> <p>\u7b5b\u9009\u6a21\u677f\uff0c\u63d0\u51fa\u4e86selection\u548censemble\u7684\u65b9\u6cd5</p> <ul> <li>Top-1 Prompt Selection\uff1a\u5c31\u662f\u7528LM\u6d4b\u4e00\u6d4b\u770b\u770b\u6548\u679c\uff0c\u53d6acc\u6700\u9ad8\u7684prompt\uff1b</li> <li>Rank-based Ensemble\uff1a\u9664\u4e86Top-1\u65b9\u6848\uff0c\u6709\u65f6\u5019\u9700\u8981\u4fdd\u6301\u591a\u4e2a\u6a21\u7248\u6765\u589e\u5f3a\u6548\u679c\uff0c\u5373\u9009\u53d6\u524dK\u4e2a\u6a21\u7248\uff1b</li> <li>Optimized Ensemble\uff1a\u901a\u8fc7LM\u7684\u9884\u6d4b\u4e3a\u4e0d\u540c\u7684prompt\u8d4b\u6743\u3002</li> </ul> <p>\u4f18\u70b9\uff08Basic\u7684\u65b9\u6848\uff09</p> <ul> <li>\u770b\u8d77\u6765\u5f88\u590d\u6742\uff0c\u5b9e\u9645\u4e0a\u63d0\u51fa\u4e86\u4e00\u4e2a\u6bd4\u8f83basic\u7684\u65b9\u6848\u3002</li> <li>\u7b80\u5355\u3001\u53ef\u63a7\uff0c\u6ca1\u6709\u4ec0\u4e48fancy\u64cd\u4f5c\uff0c\u4e0d\u9700\u8981\u8c03\u6574\u4ec0\u4e48\u6a21\u578b\u53c2\u6570\uff08\u51e0\u4e4e\u662fparameter-free\u7684\uff09\uff0c\u5b9e\u9645\u64cd\u4f5c\u548c\u843d\u5730\u90fd\u5f88\u6709\u4ef7\u503c</li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#autoprompt","title":"AUTOPROMPT","text":"<ul> <li>20\u2019EMNLP, AUTOPROMPT: Eliciting Knowledge from Language Models with Automatically Generated Prompts (AutoPrompt)</li> </ul> <ul> <li>\u63d0\u51fa\u4e86\u4e00\u79cd\u57fa\u4e8e\u68af\u5ea6\u7684\u6a21\u7248\u641c\u7d22\u65b9\u6848\u3002\u65b9\u6cd5\u5f88\u76f4\u89c2\uff0c\u5c06\u901a\u8fc7\u68af\u5ea6\u627e\u51fa\u7684trigger word\u548cmask\u62fc\u63a5\u5728\u6587\u672c\u4e2d\uff0c\u5f62\u6210\u4e00\u4e2a\u8bed\u4e49\u4e0a\u4e0d\u901a\u987a\u3001\u4f46\u662f\u5bf9\u6a21\u578b\u800c\u8a00\u5374\u5177\u6709\u5408\u7406\u63d0\u793a\u7684\u6837\u672c\uff0c\u5e76\u4e14\u5c06label\u9884\u6d4b\u8f6c\u6362\u4e3a masked token \u7684\u9884\u6d4b\uff08\u5373\u5b8c\u5f62\u586b\u7a7a\u95ee\u9898\uff09\u3002</li> <li>\u65b9\u6cd5\u7684\u6838\u5fc3\u5728\u4e8e\u9009\u53d6trigger word\uff0c\u8fd9\u4e00\u65b9\u6cd5\u57fa\u4e8e\u672c\u6587\u4f5c\u8005\u4e4b\u4e00\u7684Wallace\u5728EMNLP2019\u53d1\u8868\u7684\u5bf9\u6297\u653b\u51fb\u6587\u7ae0\u300aUniversal Adversarial Triggers for Attacking and Analyzing NLP\u300b\uff1a<ul> <li>\u57fa\u672c\u601d\u8def\u5c31\u662f: \u901a\u8fc7\u68af\u5ea6\u8fdb\u884c\u7c97\u7b5b, \u7136\u540e\u4ee3\u5165\u6a21\u677f\u57fa\u4e8e\u6548\u679c\u7cbe\u7b5b</li> </ul> </li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#better-few-shot-fine-tuning-lm-bff","title":"Better Few-shot Fine-tuning (LM-BFF)","text":"<ul> <li>21\u2019ACL, Making Pre-trained Language Models Better Few-shot Learners (LM-BFF)</li> <li>code https://github.com/princeton-nlp/LM-BFF 400+</li> <li>\u53c2\u89c1 \u4f5c\u8005\u9ad8\u5929\u5b87\u7684\u6587\u7ae0 Prompting: \u66f4\u597d\u5730\u5c06\u8bed\u8a00\u6a21\u578b\u5e94\u7528\u5230NLP\u4efb\u52a1 \u53ef\u4ee5\u770b\u6210\u662f prompt, in-context learning, few-shot setting \u65b9\u9762\u7684\u7efc\u8ff0\u4e86!</li> <li>\u5177\u4f53\u53c2\u89c1 GPT-3\u7684\u6700\u5f3a\u843d\u5730\u65b9\u5f0f\uff1f\u9648\u4e39\u7426\u63d0\u51fa\u5c0f\u6837\u672c\u5fae\u8c03\u6846\u67b6LM-BFF\uff0c\u6bd4\u666e\u901a\u5fae\u8c03\u63d0\u534711%\uff5e</li> </ul> <p>\u8fd9\u4e00\u5de5\u4f5c\u6765\u81ea Danqi Chen \u9648\u4e39\u7426 \u5927\u4f6c\u7684\u5c0f\u7ec4\uff1a\u300aMaking Pre-trained Language Models Better Few-shot Learners\u300b\uff0c\u63a2\u7a76\u5c11\u6837\u672c\u573a\u666f\u4e0bPrompt\u7684\u4f5c\u7528\uff0c\u57fa\u4e8e\u8c37\u6b4c\u7684T5\u6a21\u578b\u6784\u5efa\u4e86\u4e00\u4e2a\u81ea\u52a8\u5316\u7684pipeline</p> <p>\u5177\u4f53\u65b9\u6848\u5305\u62ec\u6807\u7b7e\u8bcd\u7684\u81ea\u52a8\u641c\u7d22\u3001\u6a21\u7248\u7684\u641c\u7d22\u548c\u6837\u672c\u5b9e\u4f8b\u7684\u641c\u7d22</p> <ul> <li>\u6807\u7b7e\u8bcd\u641c\u7d22\u3002\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u4e3a\u6bcf\u4e2alabel\u627e\u5230\u9884\u6d4b\u6700\u9ad8\u7684k\u4e2a\u8bcd\uff0c\u7efc\u5408\u6bcf\u4e2a\u7c7b\u7684\u8bcd\u8fdb\u884c\u8bad\u7ec3\u627e\u5230\u6548\u679c\u6700\u597d\u7684n\u4e2a\u7ec4\u5408\uff0c\u518d\u5728dev\u5fae\u8c03\u627e\u51fa\u6700\u4f73\u7684\u4e00\u7ec4\uff1b</li> <li>\u6a21\u7248\u641c\u7d22\u3002\u7528T5\u8fdb\u884c\u4e0d\u6307\u5b9atoken\u6570\u91cf\u7684\u751f\u6210\uff0c\u8fd9\u4e00\u70b9\u6bd4\u666e\u901a\u7684\u56fa\u5b9a\u6570\u91cfmask\u8981\u81ea\u7136\uff1b</li> <li>\u5b9e\u4f8b\u641c\u7d22\u3002\u8003\u8651\u5230GPT-3\u65b9\u6848\u5bf9\u6837\u672c\u957f\u5ea6\u7684\u9650\u5236\u548c\u4e0d\u540c\u6837\u672c\u4e0d\u597d\u8bad\u7ec3\uff0c\u4f7f\u7528 <code>Sentence-BERT</code> \u4e3a\u8f93\u5165\u6837\u672c\u5728\u6bcf\u4e00\u4e2a\u7c7b\u522b\u5bfb\u627e\u76f8\u4f3c\u7684\u6837\u672c\u4f5c\u4e3ademonstration\u3002</li> </ul> <p>\u4e00\u4e9b\u7ed3\u8bba</p> <ul> <li>\u5373\u4f7f\u5728\u96f6\u6837\u672c\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528prompt\u7684\u6548\u679c\u4e5f\u5f88\u597d\u3002\u800cGPT-3 \u6a21\u5f0f\u7684\u5b66\u4e60\u5e76\u6ca1\u6709\u6301\u7eed\u6539\u8fdb\u96f6\u6837\u672c\u6a21\u578b\u7684\u7ed3\u679c\uff0c\u8fd9\u8868\u660e\u5fae\u8c03\u8fd8\u662f\u5fc5\u8981\u7684\u3002</li> <li>\u65e0\u8bba\u4eba\u5de5\u8fd8\u662f\u81ea\u52a8\uff0c\u57fa\u4e8eprompt\u7684\u5fae\u8c03\u6bd4\u6807\u51c6\u5fae\u8c03\u8981\u597d\u5f97\u591a\u3002\u5728\u8bb8\u591a\u4efb\u52a1\u4e0a\uff0c\u81ea\u52a8\u6a21\u677f\u53ef\u4ee5\u6bd4\u624b\u52a8\u6a21\u677f\u83b7\u5f97\u66f4\u597d\u7684\u7ed3\u679c\u3002</li> <li>\u5f15\u5165demonstration\u8fdb\u4e00\u6b65\u5e26\u6765\u4e86\u663e\u8457\u7684\u63d0\u5347\uff0c\u8fd9\u8868\u660e\u5373\u4f7f\u8fdb\u884c\u4e86\u5fae\u8c03\uff0c\u5728\u4e0a\u4e0b\u6587\u4e2d\u6dfb\u52a0demonstration\u4e5f\u53ef\u4ee5\u5e2e\u52a9few-shot\u4efb\u52a1\u3002</li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#21-gpt-understands-too-p-tuning","title":"\u201821, GPT Understands, Too (p-tuning)","text":"<ul> <li>Code https://github.com/THUDM/P-tuning</li> <li>\u82cf\u5251\u6797\uff5c P-tuning\uff1a\u81ea\u52a8\u6784\u5efa\u6a21\u7248\uff0c\u91ca\u653e\u8bed\u8a00\u6a21\u578b\u6f5c\u80fd</li> </ul> <p>\u6700\u8fd1Arxiv\u4e0a\u7684\u8bba\u6587\u300aGPT Understands, Too\u300b\u63d0\u51fa\u4e86\u540d\u4e3aP-tuning\u7684\u65b9\u6cd5\uff0c\u6210\u529f\u5730\u5b9e\u73b0\u4e86\u6a21\u7248\u7684\u81ea\u52a8\u6784\u5efa\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u501f\u52a9P-tuning\uff0cGPT\u5728SuperGLUE\u4e0a\u7684\u6210\u7ee9\u9996\u6b21\u8d85\u8fc7\u4e86\u540c\u7b49\u7ea7\u522b\u7684BERT\u6a21\u578b\uff0c\u8fd9\u98a0\u8986\u4e86\u4e00\u76f4\u4ee5\u6765\u201cGPT\u4e0d\u64c5\u957fNLU\u201d\u7684\u7ed3\u8bba\uff0c\u4e5f\u662f\u8be5\u8bba\u6587\u547d\u540d\u7684\u7f18\u7531\u3002</p> <p>\u5982\u4f55\u4f18\u5316\uff1f\u6839\u636e\u6807\u6ce8\u6570\u636e\u7684\u591a\u5c11</p> <ul> <li>\u7b2c\u4e00\u79cd\uff0c\u6807\u6ce8\u6570\u636e\u6bd4\u8f83\u5c11\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u56fa\u5b9a\u6574\u4e2a\u6a21\u578b\u7684\u6743\u91cd\uff0c\u53ea\u4f18\u5316 [unused1]\uff5e[unused6]\u8fd9\u51e0\u4e2atoken\u7684Embedding\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5176\u5b9e\u6211\u4eec\u5c31\u662f\u8981\u5b666\u4e2a\u65b0\u7684Embedding\uff0c\u4f7f\u5f97\u5b83\u8d77\u5230\u4e86\u6a21\u7248\u7684\u4f5c\u7528\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u56e0\u4e3a\u6a21\u578b\u6743\u91cd\u51e0\u4e4e\u90fd\u88ab\u56fa\u5b9a\u4f4f\u4e86\uff0c\u8bad\u7ec3\u8d77\u6765\u5f88\u5feb\uff0c\u800c\u4e14\u56e0\u4e3a\u8981\u5b66\u4e60\u7684\u53c2\u6570\u5f88\u5c11\uff0c\u56e0\u6b64\u54ea\u6015\u6807\u6ce8\u6837\u672c\u5f88\u5c11\uff0c\u4e5f\u80fd\u628a\u6a21\u7248\u5b66\u51fa\u6765\uff0c\u4e0d\u5bb9\u6613\u8fc7\u62df\u5408\u3002</li> <li>\u7b2c\u4e8c\u79cd\uff0c\u6807\u6ce8\u6570\u636e\u5f88\u5145\u8db3\u3002 \u8fd9\u65f6\u5019\u5982\u679c\u8fd8\u6309\u7167\u7b2c\u4e00\u79cd\u7684\u65b9\u6848\u6765\uff0c\u5c31\u4f1a\u51fa\u73b0\u6b20\u62df\u5408\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u53ea\u67096\u4e2atoken\u7684\u53ef\u4f18\u5316\u53c2\u6570\u5b9e\u5728\u662f\u592a\u5c11\u4e86\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u653e\u5f00\u6240\u6709\u6743\u91cd\u5fae\u8c03\uff0c\u539f\u8bba\u6587\u5728SuperGLUE\u4e0a\u7684\u5b9e\u9a8c\u5c31\u662f\u8fd9\u6837\u505a\u7684\u3002\u8bfb\u8005\u53ef\u80fd\u4f1a\u60f3\uff1a\u8fd9\u6837\u8ddf\u76f4\u63a5\u52a0\u4e2a\u5168\u8fde\u63a5\u5fae\u8c03\u6709\u4ec0\u4e48\u533a\u522b\uff1f\u539f\u8bba\u6587\u7684\u7ed3\u679c\u662f\u8fd9\u6837\u505a\u6548\u679c\u66f4\u597d\uff0c\u53ef\u80fd\u8fd8\u662f\u56e0\u4e3a\u8ddf\u9884\u8bad\u7ec3\u4efb\u52a1\u66f4\u4e00\u81f4\u4e86\u5427\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u9664\u4e86\u6a21\u677f\u53ef\u4ee5\u76f4\u63a5\u7528\u5411\u91cf\u6765\u66ff\u4ee3\uff1b\u4e8b\u5b9e\u4e0a\uff0c\u76ee\u6807\u7684\u9884\u6d4b\uff0c\u4f8b\u5982\uff0c\u76ee\u6807\u8bcd\u6c47\u5982\u300c\u5f88/\u4e0d\u300d\u7b49\u4e5f\u53ef\u4ee5\u7528[unused*] \u7684token\u4ee3\u66ff\u3002</p> <p>\u5173\u4e8e\u63d0\u5347\u6a21\u677f token \u5e8f\u5217\u7684\u76f8\u5173\u6027</p> <ul> <li>\u82e5\u76f4\u63a5\u8bad\u7ec3\u8fde\u7eed token, \u5b83\u4eec\u4e4b\u95f4\u6ca1\u6709\u76f8\u5173\u6027, \u4e0d\u7b26\u5408\u81ea\u7136\u8bed\u8a00, \u8fd8\u80fd\u9632\u6b62\u5c40\u90e8\u6700\u4f18.</li> <li>\u539f\u6587\u4e2d\u4f7f\u7528\u4e86 LSTM, \u4f5c\u8005\u6307\u51fa\u8fd9\u6837\u53ef\u4ee5\u4f7f\u5f97\u6a21\u578b\u300c\u4f7f\u5f97\u6a21\u578b\u6536\u655b\u66f4\u5feb\u3001\u6548\u679c\u66f4\u4f18\u300d;</li> <li>\u82cf\u795e\u8ba4\u4e3a, \u53ef\u4ee5\u5728\u5b9e\u9a8c\u4e2d, \u589e\u52a0 MLM \u6216\u8005\u76f4\u63a5\u662f LM \u7684\u8f85\u52a9\u4efb\u52a1, \u4ece\u800c\u4f7f\u5f97\u6a21\u578b\u672c\u8eab\u5b66\u4e60\u5230\u7684\u5e8f\u5217\u5c31\u662f\u7b26\u5408\u81ea\u7136\u8bed\u8a00\u7684 (\u76f8\u5173\u5e8f\u5217), \u6548\u679c\u76f8\u8f83\u4e8e\u6ca1\u6709\u7684\u65f6\u5019\u6709\u63d0\u5347.</li> </ul> <p>\u5173\u4e8eprompt\u7684\u7406\u89e3</p> <ul> <li>\u79bb\u6563 vs \u8fde\u7eed</li> <li>Adapter<ul> <li>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4eceAdapter\u7684\u89d2\u5ea6\u6765\u7406\u89e3P-tuning\u3002BERT\u51fa\u6765\u540e\u4e0d\u4e45\uff0cGoogle\u5728\u8bba\u6587\u300aParameter-Ef\ufb01cient Transfer Learning for NLP\u300b\u4e2d\u63d0\u51fa\u4e86\u4e00\u79cd\u540d\u4e3aAdapter\u7684\u5fae\u8c03\u65b9\u5f0f\uff0c\u5b83\u5e76\u4e0d\u662f\u76f4\u63a5\u5fae\u8c03\u6574\u4e2a\u6a21\u578b\uff0c\u800c\u662f\u56fa\u5b9a\u4f4fBERT\u539f\u59cb\u6743\u91cd\uff0c\u7136\u540e\u5728BERT\u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u6b8b\u5dee\u6a21\u5757\uff0c\u53ea\u4f18\u5316\u8fd9\u4e9b\u6b8b\u5dee\u6a21\u5757\uff0c\u7531\u4e8e\u6b8b\u5dee\u6a21\u5757\u7684\u53c2\u6570\u66f4\u5c11\uff0c\u56e0\u6b64\u5fae\u8c03\u6210\u672c\u66f4\u4f4e\u3002Adapter\u7684\u601d\u8def\u5b9e\u9645\u4e0a\u6765\u6e90\u4e8eCV\u7684\u300aLearning multiple visual domains with residual adapters\u300b\uff0c\u4e0d\u8fc7\u8fd9\u4e24\u5e74\u4f3c\u4e4e\u5f88\u5c11\u770b\u5230\u4e86\uff0c\u4e5f\u8bb8\u662f\u56e0\u4e3a\u5b83\u867d\u7136\u63d0\u9ad8\u4e86\u8bad\u7ec3\u901f\u5ea6\uff0c\u4f46\u662f\u9884\u6d4b\u901f\u5ea6\u5374\u964d\u4f4e\u4e86\uff0c\u7cbe\u5ea6\u5f80\u5f80\u8fd8\u6709\u6240\u635f\u5931\u3002</li> <li>\u5728P-tuning\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u5c06\u65b0\u63d2\u5165\u7684token\u89c6\u4e3a\u201c\u6a21\u7248\u201d\uff0c\u662f\u5c06\u5b83\u89c6\u4e3a\u6a21\u578b\u7684\u4e00\u90e8\u5206\uff0c\u90a3\u4e48\u5b9e\u9645\u4e0aP-tuning\u4e5f\u662f\u4e00\u79cd\u7c7b\u4f3cAdapter\u7684\u505a\u6cd5\uff0c\u540c\u6837\u662f\u56fa\u5b9a\u539f\u6a21\u578b\u7684\u6743\u91cd\uff0c\u7136\u540e\u63d2\u5165\u4e00\u4e9b\u65b0\u7684\u53ef\u4f18\u5316\u53c2\u6570\uff0c\u540c\u6837\u662f\u53ea\u4f18\u5316\u8fd9\u4e9b\u65b0\u53c2\u6570\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u65f6\u5019\u65b0\u53c2\u6570\u63d2\u5165\u7684\u662fEmbedding\u5c42\u3002\u56e0\u6b64\uff0c\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u770b\uff0cP-tuning\u4e0eAdapter\u6709\u9887\u591a\u5f02\u66f2\u540c\u5de5\u4e4b\u5904\u3002</li> </ul> </li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#_2","title":"\u76f8\u5173\u6570\u636e\u96c6","text":"<ul> <li>LAMA<ul> <li>Knowledge probing, or referred to as fact retrieval, evaluates how much real-world knowledge has language models gained from pre-training. The LAMA (Petroni et al., 2019) dataset evaluates it with cloze tests created from triples selected in the knowledge bases.</li> </ul> </li> <li>SuperGLUE<ul> <li>(Wang et al., 2019a) benchmark. There are 8 natural language understanding (NLU) tasks in total, and we focus on 7 of them as (Schick &amp; Schutze, 2020), since the other ReCoRD (Zhang et al., 2018) adopts no prompts, thus no P-tuning . Tasks include<ul> <li>question answering (BoolQ (Clark et al., 2019a) &amp; MultiRC (Khashabi et al., 2018)),</li> <li>textual entailment (CB (De Marneffe et al., 2019) &amp; RTE (Dagan et al., 2005)),</li> <li>co-reference resolution (WiC (Pilehvar &amp; CamachoCollados, 2018)),</li> <li>causal reasoning (COPA (Roemmele et al., 2011)),</li> <li>and word sense disambiguation (WSC (Levesque et al., 2012)).</li> </ul> </li> </ul> </li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#_3","title":"\u63a2\u8ba8\u4e0e\u5c0f\u7ed3","text":""},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#prompt","title":"Prompt \u63a2\u8ba8","text":"<p>from Prompt-based Language Models\uff1a\u6a21\u7248\u589e\u5f3a\u8bed\u8a00\u6a21\u578b\u5c0f\u7ed3</p> <ul> <li>\u5728 \u4f4e\u8d44\u6e90\u573a\u666f\uff08\u534a\u76d1\u7763\u3001\u5c11\u6837\u672c\u4ee5\u81f3\u4e8e\u96f6\u6837\u672c\uff09\u4e0b\uff0cPrompt\u5bf9LM\u7684\u76f4\u63a5\u9884\u6d4b\u4ee5\u53cafine-tuning\u5177\u6709\u660e\u663e\u7684\u589e\u76ca\uff08\u751a\u81f3\uff0c\u662f\u5426\u53ef\u4ee5\u8003\u8651\u4e0d\u505atune\u53ea\u52a0prompt\u7684\u65b9\u6cd5\uff09\uff1b</li> <li>\u76ee\u524d\u800c\u8a00\uff0c\u4e0d\u786e\u5b9aprompt\u5bf9LM\u7684\u589e\u76ca\u4e3b\u8981\u6765\u6e90\u4e8e\u5b8c\u5f62\u586b\u7a7a\u8fd9\u4e00\u4efb\u52a1\u8bbe\u7f6e\u4e0e\u5176\u9884\u8bad\u7ec3MLM\u6d41\u7a0b\u4fdd\u6301\u4e86\u5f62\u5f0f\u7684\u4e00\u81f4\u6027\uff0c\u8fd8\u662f\u641c\u7d22\u5230\u7684\u63d0\u793a\u8bcd\u4e3a\u9884\u6d4b\u5e26\u6765\u7684\u5e2e\u52a9\uff1b</li> <li>\u73b0\u5728\u6709\u8fd9\u4e48\u591a\u79cdprompt\uff08\u6216\u8005\u53eb\u989d\u5916\u8f93\u5165\uff09\uff1aGPT-3\u7684task description\u3001\u5b8c\u5f62\u586b\u7a7a\u7684prompt\u3001\u751a\u81f3\u8fde\u7eed\u7684prompt\u4ee5\u53ca\u989d\u5916\u6837\u672cdemonstration\uff0c\u4ece\u672c\u8d28\u4e0a\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5bf9\u6a21\u578b\u6548\u679c\u7684\u63d0\u5347\u7684\u76f8\u540c\u4e4b\u5904\u548c\u4e0d\u540c\u65b9\u9762\u8fd8\u6709\u5f85\u7814\u7a76 \u2014\u2014 \u4e3a\u4ec0\u4e48\u8fd9\u4e2aprompt\u6548\u679c\u597d\uff0c\u4e3a\u4ec0\u4e48\u90a3\u4e2a\u4e0d\u597d\uff0c\u662f\u5426\u6709\u4e00\u79cd\u7edf\u4e00\u7684\u6700\u4f18\u65b9\u6848\uff0c\u4e5f\u662f\u503c\u5f97\u63a2\u7d22\u7684\u95ee\u9898\uff1b</li> <li>\u76ee\u524d\u6765\u770bprompt\u7684\u4f18\u5316\u641c\u7d22\u7a7a\u95f4\u5f88\u5927\uff0c\u4f46\u662f\u5b83\u4e3b\u8981\u63d0\u5347\u7684\u5c11\u6837\u672c\u573a\u666f\u672c\u8eab\u5c31\u7f3a\u5c11\u8bad\u7ec3\u6570\u636e\uff0c\u81ea\u7136\u9700\u8981\u4eba\u5de5\u7684\u5148\u9a8c\u6765\u5e2e\u52a9\u6a21\u578b\uff0c\u8fd9\u4eba\u5de5\u5148\u9a8c\u53c8\u4e0d\u4e00\u5b9a\u6709\u6548\uff0c\u662f\u4e00\u4e2a\u77db\u76fe\u7684\u70b9\u3002</li> </ul>"},{"location":"NLP/Prompt-%E6%8F%90%E7%A4%BA%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/#nlp","title":"\u4f5c\u4e3a NLP \u7684\u7b2c\u56db\u8303\u5f0f","text":"<ul> <li>CMU \u5218\u9e4f\u98de\uff5cNLP\u7684\u7b2c\u56db\u8303\u5f0f @2108</li> <li> <p>Survey web http://pretrain.nlpedia.ai/ \u2b50\ufe0f</p> </li> <li> <p>NLP\u6280\u672f\u7684\u56db\u79cd\u8303\u5f0f</p> <ul> <li>P1. \u975e\u795e\u7ecf\u7f51\u7edc\u65f6\u4ee3\u7684\u5b8c\u5168\u76d1\u7763\u5b66\u4e60 \uff08Fully Supervised Learning, Non-Neural Network\uff09</li> <li>P2. \u57fa\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u5b8c\u5168\u76d1\u7763\u5b66\u4e60 (Fully Supervised Learning, Neural Network)</li> <li>P3. \u9884\u8bad\u7ec3\uff0c\u7cbe\u8c03\u8303\u5f0f (Pre-train, Fine-tune)</li> <li>P4. \u9884\u8bad\u7ec3\uff0c\u63d0\u793a\uff0c\u9884\u6d4b\u8303\u5f0f\uff08Pre-train, Prompt, Predict\uff09</li> </ul> </li> <li> <p>\u8303\u5f0f\u6f14\u53d8\u89c4\u5f8b</p> <ul> <li>\u89c4\u5f8b1\uff1a\u6bcf\u4e2a\u8303\u5f0f\u90fd\u4f1a\u6d89\u53ca\u7e41\u7410\u7684\uff0c\u9700\u8981\u4eba\u6765\u53c2\u4e0e (\u4eba\u5de5\u5148\u9a8c) \u7684\u5de5\u7a0b<ul> <li>\u7279\u5f81\u5de5\u7a0b\uff08Feature Engineering\uff09\uff1a\u6211\u4eec\u8981\u8fdb\u884c\u201c\u65e0\u804a\u201c\u7684\u7279\u5f81\u6a21\u677f\u5b9a\u4e49\u73af\u8282</li> <li>\u7ed3\u6784\u5de5\u7a0b \uff08Architecture Engineering\uff09\uff1a\u795e\u7ecf\u7f51\u7edc\u867d\u7136\u89e3\u653e\u624b\u52a8\u914d\u7f6e\u7279\u5f81\u6a21\u677f\u6240\u9700\u8981\u7684\u4eba\u529b\uff0c\u4f46\u662f\u662f\u4ee5\u9700\u8981\u4eba\u5de5\u53bb\u8bbe\u8ba1\u5408\u9002\u7f51\u7edc\u7ed3\u6784\u4e3a\u4ee3\u4ef7\u7684\u3002\u56e0\u6b64\uff0c\u5728\u8fd9\u6837\u7684\u7814\u7a76\u8303\u5f0f\u4e0b\uff0c\u7814\u7a76\u4eba\u5458\u82b1\u4e86\u5f88\u591a\u65f6\u95f4\u5728\u63a2\u7a76\u6700\u9002\u914d\u4e0b\u6e38\u4efb\u52a1\u7684\u7ed3\u6784\u504f\u7f6e\uff08Structural Bias\uff09\u3002\u6bd4\u5982\u662f\u4f7f\u7528\u201c\u5377\u79ef\u5faa\u73af\u53d8\u5f62\u91d1\u521a\uff08Transformer\uff09\u7f51\u7edc\u201c\uff0c\u8fd8\u662f\u4f7f\u7528\u201c\u5377\u79ef\u53d8\u5f62\u91d1\u521a\uff08Transformer\uff09\u5faa\u73af\u7f51\u7edc\u201d\u3002</li> <li>\u76ee\u6807\u51fd\u6570\u6316\u6398\uff08Objective Engineering\uff09\uff1a\u8fd9\u4e2a\u8fc7\u7a0b\u7814\u7a76\u8005\u5f80\u5f80\u662f\u901a\u8fc7\u5f15\u5165\u989d\u5916\u7684\u76ee\u6807\u51fd\u6570\u5230\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u4e0a\uff0c\u4ee5\u4fbf\u8ba9\u5176\u66f4\u9002\u914d\u4e0b\u6e38\u4efb\u52a1\u3002<ul> <li>\u8fd9\u4e2a\u8fc7\u7a0b\u6709\u65f6\u5019\u4e5f\u9700\u8981\u4e9b\u7f51\u7edc\u7ed3\u6784\u7684\u6316\u6398\uff0c\u4f46\u76f8\u6bd4\u8f83\u800c\u8a00\uff0c\u4e0d\u662f\u8fd9\u4e2a\u8303\u5f0f\u7684\u4e3b\u65cb\u5f8b\uff0c\u4e00\u4e2a\u5b9e\u9645\u7684\u539f\u56e0\u5728\u4e8e\uff1a\uff081\uff09\u9884\u8bad\u7ec3\u8fc7\u7a0b\u672c\u8eab\u8d39\u65f6\uff0c\u8fc7\u5ea6\u7684\u7ed3\u6784\u504f\u7f6e\uff08structural bias\uff09\u63a2\u7d22\u5f00\u9500\u8fc7\u5927\uff1b\uff082\uff09\u7cbe\u8c03\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f88\u591a\u65f6\u5019 \u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u672c\u8eab\u63d0\u4f9b\u7684\u77e5\u8bc6\u5df2\u7ecf\u53ef\u4ee5\u8ba9\u5927\u5bb6\u201c\u5fd8\u8bb0\u201d\u4f7f\u7528\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u548c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u7684\u5dee\u5f02\u3002</li> </ul> </li> <li>Prompt\u6316\u6398\u5de5\u7a0b\uff1a\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u6211\u4eec\u5f80\u5f80\u4e0d\u5bf9\u9884\u8bad\u7ec3\u8bed\u8a00\u6a21\u578b\u6539\u52a8\u592a\u591a\uff0c\u6211\u4eec\u5e0c\u671b\u662f\u901a\u8fc7\u5bf9\u5408\u9002prompt\u7684\u5229\u7528\u5c06\u4e0b\u6e38\u4efb\u52a1\u5efa\u6a21\u7684\u65b9\u5f0f\u91cd\u65b0\u5b9a\u4e49\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/CS/git-note/","title":"Git note","text":"<ul> <li>\u56fe\u89e3 https://marklodato.github.io/visual-git-guide/index-zh-cn.html \u5229\u7528\u56fe\u793a\u8bb2\u89e3\u4e86 <code>checkout, reset, merge, cherry-pick, rebase</code> \u7b49\u6307\u4ee4\u5230\u5e95\u505a\u4e86\u4ec0\u4e48\uff0c\u53ef\u60dc\u6ca1\u6709\u6d89\u53ca\u5230\u8fdc\u7a0b\u4ed3\u5e93\u7684\u547d\u4ee4\u3002Cheatsheet \u6027\u8d28\u7684 \ud83d\udc4d</li> <li> <p>Git Pro ebook: http://iissnan.com/progit/ \u5199\u5f97\u975e\u5e38\u8be6\u7ec6\uff0c\u56fe\u793a\u4e5f\u5f88\u8d5e</p> <ul> <li>\u770b\u4e86\u5176\u4e2d\u7684\u8fdc\u7a0b\u5206\u652f\u548c \u5206\u652f\u7684rebase \u7ae0\u8282\uff0c\u624d\u7b97\u61c2\u4e86 rebase \u7684\u4f7f\u7528\u3002</li> </ul> </li> <li> <p>\u6765\u81ea\u5ed6\u96ea\u5cf0\u7684 Git\u6559\u7a0b\uff1b</p> </li> <li>\u53e6\u5916\uff0c\u5b98\u65b9\u8fd8\u6709\u4e2a\u4e2d\u6587\u7684\u6587\u6863\uff0c\u5199\u5f97\u5f88\u7ec6 https://git-scm.com/book/zh/v2</li> <li>\u5ed6\u96ea\u5cf0\u8001\u5e08\u63a8\u8350\u7684\u4e00\u5f20 Cheatsheet\uff1b</li> <li>\u518d\u63a8\u8350\u4e00\u7bc7\u8fdb\u9636\u7684\u6587\u7ae0 \u4f60\u53ef\u80fd\u4e0d\u77e5\u9053\u7684 Git\uff1b</li> </ul> <p>Oh Shit, Git!?!</p> <p></p> <ul> <li>Workspace\uff1a\u5de5\u4f5c\u533a</li> <li>Index / Stage\uff1a\u6682\u5b58\u533a</li> <li>Repository\uff1a\u4ed3\u5e93\u533a\uff08\u6216\u672c\u5730\u4ed3\u5e93\uff09</li> <li>Remote\uff1a\u8fdc\u7a0b\u4ed3\u5e93</li> </ul> <p>\u5de5\u4f5c\u6d41\u7a0b</p> <ol> <li>\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u514b\u9686\u4e3a\u672c\u5730\u4ed3\u5e93 git clone ssh://git@git.sankuai.com/dapp/poi_search_rerank.git</li> <li>\u5728\u672c\u5730\u521b\u5efa\u548c\u8fdc\u7a0b\u5206\u652f\u5bf9\u5e94\u7684\u5206\u652f git checkout -b &lt;\u672c\u5730\u5206\u652f\u540d&gt; origin/&lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt;\uff0c\u672c\u5730\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u540d\u79f0\u6700\u597d\u4e00\u81f4</li> <li>\u5728\u672c\u5730\u5206\u652f\u5b8c\u6210\u4efb\u52a1\u540e\uff0c\u53ef\u4ee5\u8bd5\u56fe\u7528git push &lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt; &lt;\u672c\u5730\u5206\u652f\u540d&gt;\u63a8\u9001\u81ea\u5df1\u7684\u4fee\u6539</li> <li>\u5982\u679c\u63a8\u9001\u5931\u8d25\uff0c\u5219\u8868\u660e\u8fdc\u7a0b\u5206\u652f\u6bd4\u672c\u5730\u66f4\u65b0\uff0c\u9700\u8981\u5148\u7528git pull\u8bd5\u56fe\u5408\u5e76\uff1b</li> <li>\u5982\u679cpull\u5931\u8d25\u5e76\u63d0\u793a\u201cno tracking information\u201d\uff0c\u5219\u8bf4\u660e\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u94fe\u63a5\u5173\u7cfb\u6ca1\u6709\u521b\u5efa\uff0c\u7528\u547d\u4ee4git branch \u2013set-upstream-to=&lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt;/&lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt; &lt;\u672c\u5730\u5206\u652f\u540d&gt;\u521b\u5efa\u94fe\u63a5</li> <li>\u5982\u679c\u5408\u5e76\u6709\u51b2\u7a81\uff0c\u5219\u89e3\u51b3\u51b2\u7a81\uff0c\u5e76\u5728\u672c\u5730\u63d0\u4ea4\uff08add =&gt; commit\uff09</li> <li>\u6ca1\u6709\u51b2\u7a81\u6216\u8005\u89e3\u51b3\u6389\u51b2\u7a81\u540e\uff0c\u518d\u7528git push &lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt; &lt;\u672c\u5730\u5206\u652f\u540d&gt;\u63a8\u9001\u5c31\u80fd\u6210\u529f</li> <li>\u63d0\u4ea4\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u53d1\u51fa Pull Request \u5230staging\u5206\u652f\uff0c\u7136\u540e\u8bf7\u6c42\u522b\u4eba\u8fdb\u884c\u4ee3\u7801review\uff0c\u786e\u8ba4\u53ef\u4ee5\u5408\u5e76\u5230staging<ol> <li>\u64cd\u4f5c\u4e4b\u524d\u52a1\u5fc5\u83b7\u53d6staging/master\u6700\u65b0\u4ee3\u7801\uff08pull \u6216\u8005 fetch+merge\uff09</li> </ol> </li> </ol>"},{"location":"code/CS/git-note/#_1","title":"\u5e38\u7528\u8bed\u6cd5","text":"<pre><code>######### status add commit rm diff log checkout reset ##########\ngit status \ngit add file1.txt file2.txt # \u6dfb\u52a0\u6307\u5b9a\u6587\u4ef6\u5230\u6682\u5b58\u533a\uff08\u9700\u8981\u548c\u7248\u672c\u5e93\u533a\u5206\uff09\ngit add -A      # \u6dfb\u52a0\u5c06\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u4fee\u6539\ngit add .       # \u6dfb\u52a0\u4fee\u6539\u548c\u65b0\u5efa\u5230\u6682\u5b58\u533a\ngit add -u      # \u6dfb\u52a0\u4fee\u6539\u548c\u5220\u9664\u6587\u4ef6\u5230\u6682\u5b58\u533a\ngit commit -m \"commet\" # -m\u8868\u793a\u6ce8\u91ca\uff0c\u4e3a\u63d0\u4ea4\u65f6\u7684\u8bf4\u660e\uff0c\u5fc5\u987b\u8981\u6709\uff01\ngit rm file.txt     # \u5c06\u6587\u4ef6\u4ece\u7248\u672c\u5e93\u4e2d\u5220\u9664\ngit rm -r filebook  # \u5220\u9664\u6587\u4ef6\u5939\ngit diff HEAD^           # \u67e5\u770b\u672a\u63d0\u4ea4\u4fee\u6539\ngit diff HEAD -- readme.txt # \u67e5\u770b\u5de5\u4f5c\u533a\u548c\u7248\u672c\u5e93\u91cc\u9762\u6700\u65b0\u7248\u672c\u7684\u533a\u522b\n\ngit log     # \u63d0\u4ea4\u5386\u53f2 (\u4ece git init \u5230 \u5f53\u524dhead\u7684\u4fee\u6539\u5386\u53f2, \u56de\u9000\u7684\u4fee\u6539\u4e0d\u5728\u5176\u4e2d)\ngit reflog  # \u67e5\u770b\u547d\u4ee4\u5386\u53f2 (\u6240\u6709\u7684git\u547d\u4ee4, \u5305\u62ec\u56de\u9000\u4fee\u6539\u7b49)\n\ngit reset --hard \u63d0\u4ea4id   # \u56de\u6eda\u5230\u67d0\u4e2a\u5177\u4f53\u5386\u53f2\u7248\u672c\uff0c\u5982git reset --hard e9efa77 \u56de\u6eda\u5230e9efa77\u7248\u672c\ngit checkout --\u6587\u4ef6\u540d      # \u9000\u56de\u5230\u6700\u8fd1\u4e00\u6b21add\u6216\u8005commit\u65f6\u7684\u72b6\u6001\uff0c\u7c7b\u4f3c\u2018\u4e00\u952e\u8fd8\u539f\u2019\ngit reset HEAD readme.txt   # \u6682\u5b58\u533a\u64a4\u9500\uff0c\u5907\u6ce8\uff1agit reset\u547d\u4ee4\u65e2\u53ef\u4ee5\u56de\u9000\u7248\u672c\uff0c\u4e5f\u53ef\u4ee5\u628a\u6682\u5b58\u533a\u7684\u4fee\u6539\u56de\u9000\u5230\u5de5\u4f5c\u533a\u3002\u5f53\u6211\u4eec\u7528HEAD\u65f6\uff0c\u8868\u793a\u6700\u65b0\u7684\u7248\u672c\n\n######### remote ##########\ngit remote -v       # \u67e5\u770b\u540d\u79f0\u548c\u8be6\u7ec6\u5730\u5740\ngit remote show xxx # \u67e5\u770b\u8fdc\u7a0b\u8d44\u6599\u5e93\u7684\u5206\u652f\uff0c \u672c\u5730\u5e93\u7684\u5206\u652f\uff0c \u4ee5\u53ca\u4e8c\u8005\u4e4b\u95f4\u5206\u652f\u7684\u5173\u8054\ngit remote add xxx git@server-name:path/repo-name.git   # \u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93, \u547d\u540d\u4e3axxx\ngit remote rm xxx   # \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93xxx\n\n######### clone ##########\ngit clone ssh://git@git.sankuai.com/dapp/poi_search_rerank.git  # 1. \u4e0d\u80fd\u7528\u522b\u540d\uff1b2. \u9ed8\u8ba4\u4e3amaster\u5206\u652f\uff0c\u8981\u540c\u6b65\u5176\u4ed6\u5206\u652f\u53ef\u4ee5\u7528\ngit checkout -b &lt;\u672c\u5730\u5206\u652f\u540d&gt; &lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt;/&lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt;     # \u53ef\u4ee5\u53d6\u522b\u540d\uff0c\u4f46\u6700\u597d\u4e00\u81f4\ngit clone -b branch-name git@server-name:path/repo.git  # \u5c06\u6307\u5b9a\u5206\u652f\u514b\u9686\u5230\u672c\u5730\n\n######### pull ##########\ngit pull &lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt; &lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt;:&lt;\u672c\u5730\u5206\u652f\u540d&gt;    # \u4f8b\u5982\u4e0b\u9762\u7684\ngit pull origin next:master\n# git pull\u662fgit fetch\u540e\u8ddfgit merge FETCH_HEAD\u7684\u7f29\u5199\u3002\u66f4\u51c6\u786e\u5730\u8bf4\uff0cgit pull\u4f7f\u7528\u7ed9\u5b9a\u7684\u53c2\u6570\u8fd0\u884cgit fetch\uff0c\u5e76\u8c03\u7528git merge\u5c06\u68c0\u7d22\u5230\u7684\u5206\u652f\u5934\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\u4e2d\u3002 \u4f7f\u7528--rebase\uff0c\u5b83\u8fd0\u884cgit rebase\u800c\u4e0d\u662fgit merge\u3002\ngit fetch origin\ngit merge origin/next\n# \u624b\u52a8\u5efa\u7acb\u8ffd\u8e2a\u5173\u7cfb\uff08tracking\uff09\ngit branch --set-upstream-to=\u8fdc\u7a0b\u4e3b\u673a\u540d/&lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt; &lt;\u672c\u5730\u5206\u652f\u540d&gt;\ngit pull origin # \u672c\u5730\u5f53\u524d\u5206\u652f\u81ea\u52a8\u4e0e\u5bf9\u5e94\u7684origin\u4e3b\u673a\u201d\u8ffd\u8e2a\u5206\u652f\u201d(remote-tracking branch)\u8fdb\u884c\u5408\u5e76\u3002\u5982\u679c\u5f53\u524d\u5206\u652f\u53ea\u6709\u4e00\u4e2a\u8ffd\u8e2a\u5206\u652f\uff0c\u8fde\u8fdc\u7a0b\u4e3b\u673a\u540d\u90fd\u53ef\u4ee5\u7701\u7565\u3002\ngit pull        # \u4e0a\u9762\u547d\u4ee4\u8868\u793a\uff0c\u5f53\u524d\u5206\u652f\u81ea\u52a8\u4e0e\u552f\u4e00\u4e00\u4e2a\u8ffd\u8e2a\u5206\u652f\u8fdb\u884c\u5408\u5e76\u3002\n# \u5982\u679c\u5408\u5e76\u9700\u8981\u91c7\u7528rebase\u6a21\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528\u2013rebase\u9009\u9879\u3002\ngit pull --rebase &lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt; &lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt;:&lt;\u672c\u5730\u5206\u652f\u540d&gt;\n\n######### push ##########\ngit push &lt;\u8fdc\u7a0b\u4e3b\u673a\u540d&gt; &lt;\u672c\u5730\u5206\u652f\u540d&gt;:&lt;\u8fdc\u7a0b\u5206\u652f\u540d&gt;    # \u5982\u679c\u7701\u7565\u8fdc\u7a0b\u5206\u652f\u540d\uff0c\u5219\u8868\u793a\u5c06\u672c\u5730\u5206\u652f\u63a8\u9001\u4e0e\u4e4b\u5b58\u5728\u201c\u8ffd\u8e2a\u5173\u7cfb\u201d\u7684\u8fdc\u7a0b\u5206\u652f\uff08\u901a\u5e38\u4e24\u8005\u540c\u540d\uff09\uff0c\u5982\u679c\u8be5\u8fdc\u7a0b\u5206\u652f\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u88ab\u65b0\u5efa\u3002\n# \u5982\u679c\u5f53\u524d\u5206\u652f\u4e0e\u591a\u4e2a\u4e3b\u673a\u5b58\u5728\u8ffd\u8e2a\u5173\u7cfb\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528-u\u9009\u9879\u6307\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u4e3b\u673a\uff0c\u8fd9\u6837\u4ee5\u540e\u5c31\u53ef\u4ee5\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\u4f7f\u7528git push\u3002\ngit push -u origin master\n\n######### branch checkout ##########\ngit branch      # \u67e5\u770b\u5f53\u524d\u5206\u652f\ngit branch -a   # \u67e5\u770b\u8fdc\u7a0b\u5206\u652f\ngit branch &lt;name&gt;   # \u521b\u5efa\ngit checkout &lt;name&gt; # \u5207\u6362\ngit checkout -b &lt;name&gt;    # \u521b\u5efa\u5e76\u5207\u6362\u5230\u5206\u652f\ngit branch -d &lt;name&gt;      # \u5220\u9664\u5206\u652f\n# \u5982\u679c\u5206\u652f\u6ca1\u6709\u5408\u5e76\uff0c\u5220\u9664\u5206\u652f\u5c31\u8868\u793a\u4f1a\u4e22\u5931\u4fee\u6539\uff0c\u6b64\u65f6git\u65e0\u6cd5\u4f7f\u7528-d\u5220\u9664\uff0c\u53ef\u4f7f\u7528-D\u5f3a\u884c\u5220\u9664\n\n######### merge ##########\n# git\u5408\u5e76\u9ed8\u8ba4\u4f7f\u7528Fast forward\u6a21\u5f0f\uff0c\u4e00\u65e6\u5220\u9664\u5206\u652f\uff0c\u4f1a\u4e22\u6389\u5206\u652f\u4fe1\u606f\uff0c\u4e5f\u5c31\u770b\u4e0d\u51fa\u6765\u66fe\u7ecf\u505a\u8fc7\u5408\u5e76\ngit merge       # \u57fa\u4e8e\u5f53\u524d\u5206\u652f\uff0c\u5408\u5e76\u53e6\u5916\u4e00\u4e2a\u5206\u652f\uff0c\u524d\u63d0\u9700\u8981\u4fdd\u8bc1\u5206\u652f\u4e4b\u95f4\u4e0d\u51b2\u7a81\n# \u5982\u679c\u5f3a\u5236\u7981\u7528Fast forward\u6a21\u5f0f\uff0c\u5373\u666e\u901a\u6a21\u5f0f\uff0cGit\u5c31\u4f1a\u5728merge\u65f6\u751f\u6210\u4e00\u4e2a\u65b0\u7684commit\ngit merge --no-ff -m \"there is a comment\"   # \u56e0\u4e3a\u672c\u6b21\u5408\u5e76\u8981\u521b\u5efa\u4e00\u4e2a\u65b0\u7684commit\uff0c\u6240\u4ee5\u52a0\u4e0a-m\u53c2\u6570\uff0c\u628acommit\u63cf\u8ff0\u5199\u8fdb\u53bb\u3002\n# \u5de5\u4f5c\u4e2d\uff0c\u80af\u5b9a\u9700\u8981\u4e0d\u7ba1\u6709\u6ca1\u6709\u5206\u652f\u88ab\u5220\u9664\uff0c\u90fd\u8981\u4ece\u5206\u652f\u5386\u53f2\u4e0a\u67e5\u770b\u6240\u6709\u7684\u5386\u53f2\u5206\u652f\u4fe1\u606f\uff0c\u6240\u4ee5\u8981\u4f7f\u7528\u666e\u901a\u6a21\u5f0f\u5408\u5e76\u3002\n</code></pre>"},{"location":"code/CS/git-note/#_2","title":"\u5177\u4f53\u5e94\u7528","text":""},{"location":"code/CS/git-note/#_3","title":"\u64a4\u9500\u4fee\u6539","text":"<pre><code># \u672aadd\ngit restore &lt;file&gt;...\n\n# \u5df2add\ngit restore --staged &lt;file&gt;...\ngit restore &lt;file&gt;\n</code></pre>"},{"location":"code/CS/git-note/#git-resetgit-checkoutgit-revert","title":"\u4ee3\u7801\u56de\u6eda\uff1agit reset\u3001git checkout\u548cgit revert","text":"<p>\u3010\u4e0b\u9762\u7528\u4e86reset\u548ccheckout\u6765\u6062\u590d\u6587\u4ef6\uff0c\u4f46\u6309\u7167git\u7684\u6307\u793a\uff0c\u5e94\u8be5restore\u624d\u662f\u66f4\u52a0\u89c4\u8303\u7684\u9009\u62e9\uff5e\u53c2\u89c1gst\u3011</p> <p>git reset\u7528\u4e8e\u64a4\u9500\u672a\u88ab\u63d0\u4ea4\u5230remote\u7684\u6539\u52a8\uff0c\u5373\u64a4\u9500local\u7684\u4fee\u6539\u3002\u9664\u4e86\u79fb\u52a8\u5f53\u524d\u5206\u652f\u7684HEAD\uff0c\u8fd8\u53ef\u4ee5\u66f4\u6539workspace\u548cindex\uff1a</p> <p>\u2013soft\uff1a\u4fee\u6539HEAD\uff0c\u4e0d\u4fee\u6539index\u548cworkspace\u3002 \u2013mixed\uff1a\u4fee\u6539HEAD\u548cindex\uff0c\u4e0d\u4fee\u6539workspace\u3002\u9ed8\u8ba4\u884c\u4e3a\u3002 \u2013hard\uff1a\u4fee\u6539HEAD\u3001index\u3001workspace\u3002</p> <pre><code># reset\uff1a\u4fee\u6539HEAD\u548cindex\ngit checkout hotfix \ngit reset HEAD~2    \n\n# reset\u6062\u590d\u6587\u4ef6\ngit reset HEAD filename     # \u4f3c\u4e4e\u53ea\u80fd\u662f mixed \u7684\uff0c\u4e5f\u5373\u4fee\u6539 HEAD\u548cindex\uff0c\u4e0d\u4fee\u6539workspace\n</code></pre> <p>checkout\u4f5c\u7528\u4e8ecommit\u7ea7\u522b\u65f6\uff0c\u53ea\u662f\u79fb\u52a8HEAD\u5230\u4e0d\u540c\u7684commit\u3002\u5982\u679c\u6709unstaged\u7684\u6587\u4ef6\uff0cgit\u4f1a\u963b\u6b62\u64cd\u4f5c\u5e76\u63d0\u793a\u3002\u5982\u679c\u4f7f\u7528commit id\u4f5c\u4e3a\u53c2\u6570\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u91ce\u6307\u9488\u3002 git checkout \u2013 file\u547d\u4ee4\u4e2d\u7684\u2013\u5f88\u91cd\u8981\uff0c\u6ca1\u6709\u2013\uff0c\u5c31\u53d8\u6210\u4e86\u201c\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u5206\u652f\u201d\u7684\u547d\u4ee4\u3002</p> <pre><code>git checkout HEAD       # \u53ea\u4fee\u6539workspace\u53bb\u5339\u914d\u67d0\u6b21commit\u3002\ngit checkout HEAD filename      # \u62b9\u6389\u6587\u4ef6\u5728workspace\u7684\u4fee\u6539\uff08add\u4e86\u4e5f\u884c)\n\ngit checkout -- file    # \u82e5add\u4e86\u5219\u53d8\u4e3aindex\u7ed3\u679c\uff0c\u82e5\u672aadd\u5219\u5c31\u662fHEAD\u7ed3\u679c\n</code></pre> <p>git revert\u662f\u7528\u4e8e\u201c\u53cd\u505a\u201d\u67d0\u4e00\u4e2a\u7248\u672c\uff0c\u4ee5\u8fbe\u5230\u64a4\u9500\u8be5\u7248\u672c\u7684\u4fee\u6539\u7684\u76ee\u7684\u3002\u6bd4\u5982\uff0c\u6211\u4eeccommit\u4e86\u4e09\u4e2a\u7248\u672c\uff08\u7248\u672c\u4e00\u3001\u7248\u672c\u4e8c\u3001 \u7248\u672c\u4e09\uff09\uff0c\u7a81\u7136\u53d1\u73b0\u7248\u672c\u4e8c\u4e0d\u884c\uff08\u5982\uff1a\u6709bug\uff09\uff0c\u60f3\u8981\u64a4\u9500\u7248\u672c\u4e8c\uff0c\u4f46\u53c8\u4e0d\u60f3\u5f71\u54cd\u64a4\u9500\u7248\u672c\u4e09\u7684\u63d0\u4ea4\uff0c\u5c31\u53ef\u4ee5\u7528 git revert \u547d\u4ee4\u6765\u53cd\u505a\u7248\u672c\u4e8c\uff0c\u751f\u6210\u65b0\u7684\u7248\u672c\u56db\uff0c\u8fd9\u4e2a\u7248\u672c\u56db\u91cc\u4f1a\u4fdd\u7559\u7248\u672c\u4e09\u7684\u4e1c\u897f\uff0c\u4f46\u64a4\u9500\u4e86\u7248\u672c\u4e8c\u7684\u4e1c\u897f\u3002</p> <pre><code>git checkout hotfix\ngit revert HEAD^^\n</code></pre>"},{"location":"code/CS/git-note/#_4","title":"\u67e5\u770b\u6587\u4ef6\u7684\u4fee\u6539\u8bb0\u5f55","text":"<p>\u5148\u67e5\u770b\u5728\u90a3\u4e9b\u63d0\u4ea4\u4e2d\u4fee\u6539\u4e86\u8fd9\u4e2a\u6587\u4ef6\u3002 \u5176\u4e2d <code>--pretty=oneline</code> \u4f7f\u5f97 log \u66f4\u52a0\u7b80\u6d01\uff0c<code>--</code> \u53ef\u7701\u7565</p> <pre><code>git log --pretty=oneline -- \u6587\u4ef6\u540d\n</code></pre> <p>\u7136\u540e\u4ece log \u4e2d\u627e\u5230\u8981\u67e5\u770b\u7684\u90a3\u4e00\u6b21\u63d0\u4ea4\u6240\u5bf9\u5e94\u7684 id\uff0c\u7528 <code>git show _id</code> \u8fdb\u884c\u67e5\u770b\u3002</p> <pre><code>git show 356f6def9d -- \u6587\u4ef6\u540d\n</code></pre>"},{"location":"code/CS/git-note/#_5","title":"\u5408\u5e76\u8fdc\u7a0b\u5206\u652f","text":"<p>\u6709\u7684\u65f6\u5019\u6211\u4eec\u9700\u8981\u8ddf\u522b\u4eba\u5408\u4f5c\u8fdb\u884c\u5f00\u53d1\uff0c\u7136\u540e\u5206\u522b\u4f7f\u7528\u4e0d\u540c\u7684Git\u5206\u652f\uff0c\u7b49\u9879\u76ee\u5b8c\u6210\u65f6\uff0c\u9700\u8981\u8fdb\u884c\u4ee3\u7801\u5408\u5e76\uff0c\u5c31\u9700\u8981\u77e5\u9053Git\u5982\u4f55\u5408\u5e76\u8fdc\u7a0b\u5206\u652f\u3002 \u5047\u8bbe\u4f60\u672c\u5730\u5728\u4f7f\u7528\u7684\u5206\u652f\u4e3aa(master\u4e5f\u662f\u4e00\u6837\u7684)\uff0c\u9700\u8981\u5408\u5e76\u7684\u8fdc\u7a0b\u5206\u652f\u4e3ab</p> <pre><code># \u5728\u672c\u5730\u65b0\u5efa\u4e00\u4e2a\u4e0e\u8fdc\u7a0b\u7684\u5206\u652fb\u76f8\u540c(\u88ab\u5408\u5e76\u7684\u7248\u672c)\u7684\u5206\u652fb\ngit checkout -b b origin/b\n# \u5c06\u8fdc\u7a0b\u4ee3\u7801pull\u5230\u672c\u5730\ngit pull origin b\n\ngit checkout a\n# \u5408\u5e76\u5206\u652fa\u4e0e\u5206\u652fb\ngit merge b\n</code></pre>"},{"location":"code/CS/git-note/#_6","title":"\u5220\u9664\u6587\u4ef6\u6062\u590d","text":"<pre><code># \u82e5\u7528 rm tt \u5e76\u4e14\u5df2\u7ecf\u63d0\u4ea4\u4e86\uff1b\u5c1d\u8bd5\u4e86\u7528 git rm tt \u662f\u7c7b\u4f3c\u7684\ng reset HEAD^ tt    # \u7136\u540e gst \u5c31\u53ef\u4ee5\u627e\u5230\u8fd9\u4e2a\u6587\u4ef6\u4e86\uff0c\u6309\u7167\u6307\u793a\u5373\u53ef\ngit restore --staged &lt;file&gt;\n</code></pre>"},{"location":"code/CS/git-note/#_7","title":"\u53d6\u6d88\u6587\u4ef6\u8ddf\u8e2a","text":"<p>\u4e00\u4e9b\u9700\u8981\u52a0\u5728 <code>.gitignore</code> \u4e2d\u7684\u6587\u4ef6\uff0c\u82e5\u4e4b\u524d\u5efa\u7acb\u4e86\u7d22\u5f15\uff0c\u9700\u8981\u53d6\u6d88\u8ddf\u8e2a</p> <pre><code># \u5355\u4e2a\u6587\u4ef6\ngit rm --cached readme1.txt \n\n# \u6240\u6709\u6587\u4ef6\ngit rm -r --cached . \u3000\u3000//\u4e0d\u5220\u9664\u672c\u5730\u6587\u4ef6\ngit rm -r --f . \u3000\u3000//\u5220\u9664\u672c\u5730\u6587\u4ef6\n</code></pre> <p>\u4ee5\u4e0b from \u5ed6\u96ea\u5cf0\u6559\u7a0b</p>"},{"location":"code/CS/git-note/#_8","title":"\u7248\u672c\u5e93","text":""},{"location":"code/CS/git-note/#_9","title":"\u521b\u5efa\u7248\u672c\u5e93","text":"<p>\u521d\u59cb\u5316\u4e00\u4e2aGit\u4ed3\u5e93\uff0c\u4f7f\u7528<code>git init</code>\u547d\u4ee4\u3002</p> <p>\u6dfb\u52a0\u6587\u4ef6\u5230Git\u4ed3\u5e93\uff0c\u5206\u4e24\u6b65\uff1a</p> <ol> <li>\u4f7f\u7528\u547d\u4ee4<code>git add &lt;file&gt;</code>\uff0c\u6ce8\u610f\uff0c\u53ef\u53cd\u590d\u591a\u6b21\u4f7f\u7528\uff0c\u6dfb\u52a0\u591a\u4e2a\u6587\u4ef6\uff1b</li> <li>\u4f7f\u7528\u547d\u4ee4<code>git commit -m &lt;message&gt;</code>\uff0c\u5b8c\u6210\u3002</li> </ol>"},{"location":"code/CS/git-note/#_10","title":"\u7248\u672c\u56de\u9000","text":"<ul> <li><code>HEAD</code>\u6307\u5411\u7684\u7248\u672c\u5c31\u662f\u5f53\u524d\u7248\u672c\uff0c\u56e0\u6b64\uff0cGit\u5141\u8bb8\u6211\u4eec\u5728\u7248\u672c\u7684\u5386\u53f2\u4e4b\u95f4\u7a7f\u68ad\uff0c\u4f7f\u7528\u547d\u4ee4 <code>git reset --hard commit_id</code>\u3002</li> <li>\u7a7f\u68ad\u524d\uff0c\u7528 <code>git log</code> \u53ef\u4ee5\u67e5\u770b\u63d0\u4ea4\u5386\u53f2\uff0c\u4ee5\u4fbf\u786e\u5b9a\u8981\u56de\u9000\u5230\u54ea\u4e2a\u7248\u672c\u3002</li> <li>\u8981\u91cd\u8fd4\u672a\u6765\uff0c\u7528 <code>git reflog</code> \u67e5\u770b\u547d\u4ee4\u5386\u53f2\uff0c\u4ee5\u4fbf\u786e\u5b9a\u8981\u56de\u5230\u672a\u6765\u7684\u54ea\u4e2a\u7248\u672c\u3002</li> </ul>"},{"location":"code/CS/git-note/#_11","title":"\u7248\u672c\u547d\u540d","text":"<p>\u9996\u5148\uff0cGit\u5fc5\u987b\u77e5\u9053\u5f53\u524d\u7248\u672c\u662f\u54ea\u4e2a\u7248\u672c\uff0c\u5728Git\u4e2d\uff0c\u7528<code>HEAD</code>\u8868\u793a\u5f53\u524d\u7248\u672c\uff0c\u4e5f\u5c31\u662f\u6700\u65b0\u7684\u63d0\u4ea4<code>1094adb...</code>\uff08\u6ce8\u610f\u6211\u7684\u63d0\u4ea4ID\u548c\u4f60\u7684\u80af\u5b9a\u4e0d\u4e00\u6837\uff09\uff0c\u4e0a\u4e00\u4e2a\u7248\u672c\u5c31\u662f<code>HEAD^</code>\uff0c\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c\u5c31\u662f<code>HEAD^^</code>\uff0c\u5f53\u7136\u5f80\u4e0a100\u4e2a\u7248\u672c\u5199100\u4e2a<code>^</code>\u6bd4\u8f83\u5bb9\u6613\u6570\u4e0d\u8fc7\u6765\uff0c\u6240\u4ee5\u5199\u6210<code>HEAD~100</code>\u3002</p>"},{"location":"code/CS/git-note/#_12","title":"\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a","text":"<p>\u6682\u5b58\u533a\u662fGit\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u5f04\u660e\u767d\u4e86\u6682\u5b58\u533a\uff0c\u5c31\u5f04\u660e\u767d\u4e86Git\u7684\u5f88\u591a\u64cd\u4f5c\u5230\u5e95\u5e72\u4e86\u4ec0\u4e48\u3002</p>"},{"location":"code/CS/git-note/#_13","title":"\u7ba1\u7406\u4fee\u6539","text":"<p>\u6ce8\u610f\uff0c<code>git diff readme.txt</code> \u662f\u4e0e\u6682\u5b58\u533a\u7684\u6587\u4ef6\u6bd4\u8f83\uff1b\u800c <code>git diff HEAD -- readme.txt</code> \u5219\u662f\u4e0e HEAD \u7248\u672c\u4e0b\u7684\u6587\u4ef6\u8fdb\u884c\u6bd4\u8f83\u3002\u56e0\u6b64\uff0c\u82e5\u5728\u4fee\u6539 readme.txt \u540e\uff0c\u5df2\u7ecf add \u800c\u5c1a\u672a commit \uff0c\u5219\u524d\u8005\u4e0d\u4f1a\u663e\u793a\u5dee\u5f02\u540e\u8005\u4f1a\u663e\u793a\u51fa\u4fee\u6539\u5185\u5bb9\u3002</p>"},{"location":"code/CS/git-note/#checkout","title":"\u64a4\u9500\u4fee\u6539 checkout \u2013","text":"<p>\u573a\u666f1\uff1a\u5f53\u4f60\u6539\u4e71\u4e86\u5de5\u4f5c\u533a\u67d0\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u60f3\u76f4\u63a5\u4e22\u5f03\u5de5\u4f5c\u533a\u7684\u4fee\u6539\u65f6\uff0c\u7528\u547d\u4ee4 <code>git checkout -- file</code>\u3002</p> <p>\u573a\u666f2\uff1a\u5f53\u4f60\u4e0d\u4f46\u6539\u4e71\u4e86\u5de5\u4f5c\u533a\u67d0\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u8fd8\u6dfb\u52a0\u5230\u4e86\u6682\u5b58\u533a\u65f6\uff0c\u60f3\u4e22\u5f03\u4fee\u6539\uff0c\u5206\u4e24\u6b65\uff0c\u7b2c\u4e00\u6b65\u7528\u547d\u4ee4 <code>git reset HEAD &lt;file&gt;</code>\uff0c\u5c31\u56de\u5230\u4e86\u573a\u666f1\uff0c\u7b2c\u4e8c\u6b65\u6309\u573a\u666f1\u64cd\u4f5c\u3002</p> <p>\u573a\u666f3\uff1a\u5df2\u7ecf\u63d0\u4ea4\u4e86\u4e0d\u5408\u9002\u7684\u4fee\u6539\u5230\u7248\u672c\u5e93\u65f6\uff0c\u60f3\u8981\u64a4\u9500\u672c\u6b21\u63d0\u4ea4\uff0c\u53c2\u8003\u7248\u672c\u56de\u9000\u4e00\u8282\uff0c\u4e0d\u8fc7\u524d\u63d0\u662f\u6ca1\u6709\u63a8\u9001\u5230\u8fdc\u7a0b\u5e93\u3002</p>"},{"location":"code/CS/git-note/#_14","title":"\u5220\u9664\u6587\u4ef6","text":"<p>\u547d\u4ee4 <code>git rm</code> \u7528\u4e8e\u5220\u9664\u4e00\u4e2a\u6587\u4ef6\u3002\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u5df2\u7ecf\u88ab\u63d0\u4ea4\u5230\u7248\u672c\u5e93\uff0c\u90a3\u4e48\u4f60\u6c38\u8fdc\u4e0d\u7528\u62c5\u5fc3\u8bef\u5220\uff0c\u4f46\u662f\u8981\u5c0f\u5fc3\uff0c\u4f60\u53ea\u80fd\u6062\u590d\u6587\u4ef6\u5230\u6700\u65b0\u7248\u672c\uff0c\u4f60\u4f1a\u4e22\u5931\u6700\u8fd1\u4e00\u6b21\u63d0\u4ea4\u540e\u4f60\u4fee\u6539\u7684\u5185\u5bb9\u3002</p> <p>\u4e3a\u4e86\u6062\u590d\u5220\u9664\u7684\u6587\u4ef6\uff0c\uff1a</p> <p>\u573a\u666f 1\uff1a\u5220\u9664\u4e86\u6587\u4ef6\uff0c\u4f46\u6ca1\u6709 <code>git rm test.txt</code>\uff0c\u8fd9\u65f6\u53ef\u4ee5\u7528 <code>git checkout -- test.txt</code> \u627e\u56de\uff1b</p> <p>\u573a\u666f 2\uff1a\u5220\u9664\u6587\u4ef6\u5e76\u4e14\u6267\u884c\u4e86 rm \u64cd\u4f5c\uff0c\u4f46\u6ca1\u6709 commit\uff08\u8fd9\u65f6\u5019\u7f13\u5b58\u533a\u5df2\u7ecf\u6ca1\u6709\u8be5\u6587\u4ef6\u4e86\uff09\uff0c\u5219\u53ef\u4ee5\u7528 <code>git reset  -- test.txt</code> \u63d0\u53d6\u7248\u672c\u5e93\u4e2d\u6587\u4ef6\u5230\u7f13\u5b58\u533a\uff0c\u518d\u4f7f\u7528 <code>git checkout -- test.txt</code> \u4ece\u7f13\u5b58\u533a\u53d6\u56de\u5de5\u4f5c\u533a\uff1b</p> <p>\u573a\u666f 3\uff1a\u5220\u9664\u6587\u4ef6\u5e76\u4e14\u5df2\u7ecf\u63d0\u4ea4\u5230\u7248\u672c\u5e93\uff0c\u53ef\u4ee5\u7528 <code>git reset HEAD^ -- test.txt</code> \u63d0\u53d6\u8be5\u6587\u4ef6\u5230\u7f13\u5b58\u533a\uff1b\u518d\u4f7f\u7528 <code>git checkout -- test.txt</code> \u63d0\u53d6\u56de\u672c\u5730\u3002</p>"},{"location":"code/CS/git-note/#_15","title":"\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>\u3010\u603b\u7ed3\u4e00\u4e0b\u3011\u5728 GitHub \u4e0a\u65b0\u5efa\u4e00\u4e2a repo\uff0c\u7136\u540e 1. clone \u4e0b\u6765\uff1b2. \u6216\u8005\u7528\u7c7b\u4f3c <code>git remote add origin git@github.com:michaelliao/learngit.git</code> \u7684\u547d\u4ee4\u3002\uff08\u8fd9\u91cc\u7684 origin \u53ea\u662f\u5b9a\u4e49\u4e86\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u5b57\uff09</p>"},{"location":"code/CS/git-note/#github","title":"\u6848\u4f8b\uff1a\u7c7b\u4f3c GitHub \u63d0\u793a","text":"<p>\u9996\u5148\u9700\u8981\u73b0\u5728\u8fdc\u7a0b\u521b\u5efa\u4e00\u4e2a\u5206\u652f\uff0c\u6bd4\u5982\u5730\u5740\u4e3a <code>https://xxxxxxx/wangdong/helloworld.git</code></p> <pre><code># \u4ece\u672c\u5730\u65b0\u5efa\u4e00\u4e2a\u5206\u652f\uff0c\u5173\u8054\u5230 remote\ntouch README.md\ngit init\ngit add README.md\ngit commit -m \"first commit\"\ngit branch -M main\ngit remote add origin https://xxxxxxx/wangdong/helloworld.git\ngit push -u origin main\n\n# \u672c\u6765\u5c31\u6709\u4e86\uff0c\u76f4\u63a5\u5173\u8054 remote\ngit remote add origin https://xxxxxxx/wangdong/helloworld.git\ngit branch -M main\ngit push -u origin main\n\n# \u82e5\u5df2\u6709\u4e00\u4e2a\u5173\u8054\u7684 remote\uff0c\u5219\u53ef\u53d6\u6d88\u540e\u91cd\u65b0\u5173\u8054\u4e00\u4e2a\u65b0\u7684\u8fdc\u7a0b\u5206\u652f\ngit remote remove origin\ngit remote add origin https://dev.33.cn/wangdong/alioss-file.git\n</code></pre>"},{"location":"code/CS/git-note/#_16","title":"\u6dfb\u52a0\u8fdc\u7a0b\u5e93","text":"<p>\u8981\u5173\u8054\u4e00\u4e2a\u8fdc\u7a0b\u5e93\uff0c\u4f7f\u7528\u547d\u4ee4<code>git remote add origin git@server-name:path/repo-name.git</code>\uff1b</p> <p>\u5173\u8054\u540e\uff0c\u4f7f\u7528\u547d\u4ee4<code>git push -u origin master</code>\u7b2c\u4e00\u6b21\u63a8\u9001master\u5206\u652f\u7684\u6240\u6709\u5185\u5bb9\uff1b</p> <p>\u6b64\u540e\uff0c\u6bcf\u6b21\u672c\u5730\u63d0\u4ea4\u540e\uff0c\u53ea\u8981\u6709\u5fc5\u8981\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4<code>git push origin master</code>\u63a8\u9001\u6700\u65b0\u4fee\u6539\uff1b</p> <p>\u5206\u5e03\u5f0f\u7248\u672c\u7cfb\u7edf\u7684\u6700\u5927\u597d\u5904\u4e4b\u4e00\u662f\u5728\u672c\u5730\u5de5\u4f5c\u5b8c\u5168\u4e0d\u9700\u8981\u8003\u8651\u8fdc\u7a0b\u5e93\u7684\u5b58\u5728\uff0c\u4e5f\u5c31\u662f\u6709\u6ca1\u6709\u8054\u7f51\u90fd\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\uff0c\u800cSVN\u5728\u6ca1\u6709\u8054\u7f51\u7684\u65f6\u5019\u662f\u62d2\u7edd\u5e72\u6d3b\u7684\uff01\u5f53\u6709\u7f51\u7edc\u7684\u65f6\u5019\uff0c\u518d\u628a\u672c\u5730\u63d0\u4ea4\u63a8\u9001\u4e00\u4e0b\u5c31\u5b8c\u6210\u4e86\u540c\u6b65\uff0c\u771f\u662f\u592a\u65b9\u4fbf\u4e86\uff01</p>"},{"location":"code/CS/git-note/#_17","title":"\u4ece\u8fdc\u7a0b\u5e93\u514b\u9686","text":"<p>\u8981\u514b\u9686\u4e00\u4e2a\u4ed3\u5e93\uff0c\u9996\u5148\u5fc5\u987b\u77e5\u9053\u4ed3\u5e93\u7684\u5730\u5740\uff0c\u7136\u540e\u4f7f\u7528<code>git clone</code>\u547d\u4ee4\u514b\u9686\u3002</p> <p>Git\u652f\u6301\u591a\u79cd\u534f\u8bae\uff0c\u5305\u62ec<code>https</code>\uff0c\u4f46<code>ssh</code>\u534f\u8bae\u901f\u5ea6\u6700\u5feb\u3002</p>"},{"location":"code/CS/git-note/#_18","title":"\u5206\u652f\u7ba1\u7406","text":""},{"location":"code/CS/git-note/#_19","title":"\u521b\u5efa\u4e0e\u5408\u5e76","text":"<p>Git\u9f13\u52b1\u5927\u91cf\u4f7f\u7528\u5206\u652f\uff1a</p> <p>\u67e5\u770b\u5206\u652f\uff1a<code>git branch</code></p> <p>\u521b\u5efa\u5206\u652f\uff1a<code>git branch &lt;name&gt;</code></p> <p>\u5207\u6362\u5206\u652f\uff1a<code>git checkout &lt;name&gt;</code>\u6216\u8005<code>git switch &lt;name&gt;</code></p> <p>\u521b\u5efa+\u5207\u6362\u5206\u652f\uff1a<code>git checkout -b &lt;name&gt;</code>\u6216\u8005<code>git switch -c &lt;name&gt;</code></p> <p>\u5408\u5e76\u67d0\u5206\u652f\u5230\u5f53\u524d\u5206\u652f\uff1a<code>git merge &lt;name&gt;</code></p> <p>\u5220\u9664\u5206\u652f\uff1a<code>git branch -d &lt;name&gt;</code></p>"},{"location":"code/CS/git-note/#_20","title":"\u89e3\u51b3\u51b2\u7a81","text":"<p>\u5f53Git\u65e0\u6cd5\u81ea\u52a8\u5408\u5e76\u5206\u652f\u65f6\uff0c\u5c31\u5fc5\u987b\u9996\u5148\u89e3\u51b3\u51b2\u7a81\u3002\u89e3\u51b3\u51b2\u7a81\u540e\uff0c\u518d\u63d0\u4ea4\uff0c\u5408\u5e76\u5b8c\u6210\u3002</p> <p>\u89e3\u51b3\u51b2\u7a81\u5c31\u662f\u628aGit\u5408\u5e76\u5931\u8d25\u7684\u6587\u4ef6\u624b\u52a8\u7f16\u8f91\u4e3a\u6211\u4eec\u5e0c\u671b\u7684\u5185\u5bb9\uff0c\u518d\u63d0\u4ea4\u3002</p> <p>\u7528<code>git log --graph</code>\u547d\u4ee4\u53ef\u4ee5\u770b\u5230\u5206\u652f\u5408\u5e76\u56fe\u3002</p>"},{"location":"code/CS/git-note/#_21","title":"\u5206\u652f\u7ba1\u7406\u7b56\u7565","text":"<p>Git\u5206\u652f\u5341\u5206\u5f3a\u5927\uff0c\u5728\u56e2\u961f\u5f00\u53d1\u4e2d\u5e94\u8be5\u5145\u5206\u5e94\u7528\u3002</p> <p>\u5408\u5e76\u5206\u652f\u65f6\uff0c\u52a0\u4e0a<code>--no-ff</code>\u53c2\u6570\u5c31\u53ef\u4ee5\u7528\u666e\u901a\u6a21\u5f0f\u5408\u5e76\uff0c\u5408\u5e76\u540e\u7684\u5386\u53f2\u6709\u5206\u652f\uff0c\u80fd\u770b\u51fa\u6765\u66fe\u7ecf\u505a\u8fc7\u5408\u5e76\uff0c\u800c<code>fast forward</code>\u5408\u5e76\u5c31\u770b\u4e0d\u51fa\u6765\u66fe\u7ecf\u505a\u8fc7\u5408\u5e76\u3002</p> <p>\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u5e94\u8be5\u6309\u7167\u51e0\u4e2a\u57fa\u672c\u539f\u5219\u8fdb\u884c\u5206\u652f\u7ba1\u7406\uff1a</p> <ul> <li>\u9996\u5148\uff0c<code>master</code>\u5206\u652f\u5e94\u8be5\u662f\u975e\u5e38\u7a33\u5b9a\u7684\uff0c\u4e5f\u5c31\u662f\u4ec5\u7528\u6765\u53d1\u5e03\u65b0\u7248\u672c\uff0c\u5e73\u65f6\u4e0d\u80fd\u5728\u4e0a\u9762\u5e72\u6d3b\uff1b</li> <li>\u90a3\u5728\u54ea\u5e72\u6d3b\u5462\uff1f\u5e72\u6d3b\u90fd\u5728<code>dev</code>\u5206\u652f\u4e0a\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>dev</code>\u5206\u652f\u662f\u4e0d\u7a33\u5b9a\u7684\uff0c\u5230\u67d0\u4e2a\u65f6\u5019\uff0c\u6bd4\u59821.0\u7248\u672c\u53d1\u5e03\u65f6\uff0c\u518d\u628a<code>dev</code>\u5206\u652f\u5408\u5e76\u5230<code>master</code>\u4e0a\uff0c\u5728<code>master</code>\u5206\u652f\u53d1\u5e031.0\u7248\u672c\uff1b</li> <li>\u4f60\u548c\u4f60\u7684\u5c0f\u4f19\u4f34\u4eec\u6bcf\u4e2a\u4eba\u90fd\u5728<code>dev</code>\u5206\u652f\u4e0a\u5e72\u6d3b\uff0c\u6bcf\u4e2a\u4eba\u90fd\u6709\u81ea\u5df1\u7684\u5206\u652f\uff0c\u65f6\u4e0d\u65f6\u5730\u5f80<code>dev</code>\u5206\u652f\u4e0a\u5408\u5e76\u5c31\u53ef\u4ee5\u4e86\u3002</li> </ul>"},{"location":"code/CS/git-note/#bug","title":"Bug \u5206\u652f","text":"<p>\u4fee\u590dbug\u65f6\uff0c\u6211\u4eec\u4f1a\u901a\u8fc7\u521b\u5efa\u65b0\u7684bug\u5206\u652f\u8fdb\u884c\u4fee\u590d\uff0c\u7136\u540e\u5408\u5e76\uff0c\u6700\u540e\u5220\u9664\uff1b</p> <p>\u5f53\u624b\u5934\u5de5\u4f5c\u6ca1\u6709\u5b8c\u6210\u65f6\uff0c\u5148\u628a\u5de5\u4f5c\u73b0\u573a<code>git stash</code>\u4e00\u4e0b\uff0c\u7136\u540e\u53bb\u4fee\u590dbug\uff0c\u4fee\u590d\u540e\uff0c\u518d<code>git stash pop</code>\uff0c\u56de\u5230\u5de5\u4f5c\u73b0\u573a\uff1b</p> <p>\u5728master\u5206\u652f\u4e0a\u4fee\u590d\u7684bug\uff0c\u60f3\u8981\u5408\u5e76\u5230\u5f53\u524ddev\u5206\u652f\uff0c\u53ef\u4ee5\u7528<code>git cherry-pick &lt;commit&gt;</code>\u547d\u4ee4\uff0c\u628abug\u63d0\u4ea4\u7684\u4fee\u6539\u201c\u590d\u5236\u201d\u5230\u5f53\u524d\u5206\u652f\uff0c\u907f\u514d\u91cd\u590d\u52b3\u52a8\u3002</p>"},{"location":"code/CS/git-note/#feature","title":"Feature \u5206\u652f","text":"<p>\u5f00\u53d1\u4e00\u4e2a\u65b0feature\uff0c\u6700\u597d\u65b0\u5efa\u4e00\u4e2a\u5206\u652f\uff1b</p> <p>\u5982\u679c\u8981\u4e22\u5f03\u4e00\u4e2a\u6ca1\u6709\u88ab\u5408\u5e76\u8fc7\u7684\u5206\u652f\uff0c\u53ef\u4ee5\u901a\u8fc7<code>git branch -D &lt;name&gt;</code>\u5f3a\u884c\u5220\u9664\u3002</p>"},{"location":"code/CS/git-note/#_22","title":"\u591a\u4eba\u534f\u4f5c","text":"<ul> <li>\u67e5\u770b\u8fdc\u7a0b\u5e93\u4fe1\u606f\uff0c\u4f7f\u7528<code>git remote -v</code>\uff1b</li> <li>\u672c\u5730\u65b0\u5efa\u7684\u5206\u652f\u5982\u679c\u4e0d\u63a8\u9001\u5230\u8fdc\u7a0b\uff0c\u5bf9\u5176\u4ed6\u4eba\u5c31\u662f\u4e0d\u53ef\u89c1\u7684\uff1b</li> <li>\u4ece\u672c\u5730\u63a8\u9001\u5206\u652f\uff0c\u4f7f\u7528<code>git push origin branch-name</code>\uff0c\u5982\u679c\u63a8\u9001\u5931\u8d25\uff0c\u5148\u7528<code>git pull</code>\u6293\u53d6\u8fdc\u7a0b\u7684\u65b0\u63d0\u4ea4\uff1b</li> <li>\u5728\u672c\u5730\u521b\u5efa\u548c\u8fdc\u7a0b\u5206\u652f\u5bf9\u5e94\u7684\u5206\u652f\uff0c\u4f7f\u7528<code>git checkout -b branch-name origin/branch-name</code>\uff0c\u672c\u5730\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u540d\u79f0\u6700\u597d\u4e00\u81f4\uff1b</li> <li>\u5efa\u7acb\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u5173\u8054\uff0c\u4f7f\u7528<code>git branch --set-upstream branch-name origin/branch-name</code>\uff1b</li> <li>\u4ece\u8fdc\u7a0b\u6293\u53d6\u5206\u652f\uff0c\u4f7f\u7528<code>git pull</code>\uff0c\u5982\u679c\u6709\u51b2\u7a81\uff0c\u8981\u5148\u5904\u7406\u51b2\u7a81\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u591a\u4eba\u534f\u4f5c\u7684\u5de5\u4f5c\u6a21\u5f0f\u901a\u5e38\u662f\u8fd9\u6837\uff1a</p> <ol> <li>\u9996\u5148\uff0c\u53ef\u4ee5\u8bd5\u56fe\u7528<code>git push origin &lt;branch-name&gt;</code>\u63a8\u9001\u81ea\u5df1\u7684\u4fee\u6539\uff1b</li> <li>\u5982\u679c\u63a8\u9001\u5931\u8d25\uff0c\u5219\u56e0\u4e3a\u8fdc\u7a0b\u5206\u652f\u6bd4\u4f60\u7684\u672c\u5730\u66f4\u65b0\uff0c\u9700\u8981\u5148\u7528<code>git pull</code>\u8bd5\u56fe\u5408\u5e76\uff1b</li> <li>\u5982\u679c\u5408\u5e76\u6709\u51b2\u7a81\uff0c\u5219\u89e3\u51b3\u51b2\u7a81\uff0c\u5e76\u5728\u672c\u5730\u63d0\u4ea4\uff1b</li> <li>\u6ca1\u6709\u51b2\u7a81\u6216\u8005\u89e3\u51b3\u6389\u51b2\u7a81\u540e\uff0c\u518d\u7528<code>git push origin &lt;branch-name&gt;</code>\u63a8\u9001\u5c31\u80fd\u6210\u529f\uff01</li> </ol> <p>\u5982\u679c<code>git pull</code>\u63d0\u793a<code>no tracking information</code>\uff0c\u5219\u8bf4\u660e\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u94fe\u63a5\u5173\u7cfb\u6ca1\u6709\u521b\u5efa\uff0c\u7528\u547d\u4ee4<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>\u3002</p>"},{"location":"code/CS/git-note/#_23","title":"\u6807\u7b7e\u7ba1\u7406","text":"<ul> <li>\u547d\u4ee4<code>git tag &lt;tagname&gt;</code>\u7528\u4e8e\u65b0\u5efa\u4e00\u4e2a\u6807\u7b7e\uff0c\u9ed8\u8ba4\u4e3a<code>HEAD</code>\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2acommit id\uff1b</li> <li>\u547d\u4ee4<code>git tag -a &lt;tagname&gt; -m \"blablabla...\"</code>\u53ef\u4ee5\u6307\u5b9a\u6807\u7b7e\u4fe1\u606f\uff1b</li> <li> <p>\u547d\u4ee4<code>git tag</code>\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u6807\u7b7e\u3002</p> </li> <li> <p>\u547d\u4ee4<code>git push origin &lt;tagname&gt;</code>\u53ef\u4ee5\u63a8\u9001\u4e00\u4e2a\u672c\u5730\u6807\u7b7e\uff1b</p> </li> <li>\u547d\u4ee4<code>git push origin --tags</code>\u53ef\u4ee5\u63a8\u9001\u5168\u90e8\u672a\u63a8\u9001\u8fc7\u7684\u672c\u5730\u6807\u7b7e\uff1b</li> <li>\u547d\u4ee4<code>git tag -d &lt;tagname&gt;</code>\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u672c\u5730\u6807\u7b7e\uff1b</li> <li>\u547d\u4ee4<code>git push origin :refs/tags/&lt;tagname&gt;</code>\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u8fdc\u7a0b\u6807\u7b7e\u3002</li> </ul> <p>\u4ee5\u4e0b from \u7f8e\u56e2</p>"},{"location":"code/CS/git-note/#git","title":"git\u72b6\u6001\u542b\u4e49","text":"<p>M \u8868\u793a\u6539\u52a8 A \u8868\u793a\u6dfb\u52a0 D \u8868\u793a\u5220\u9664 R \u8868\u793a\u91cd\u547d\u540d C \u8868\u793a\u62f7\u8d1d U \u8868\u793a\u5df2\u66f4\u65b0\u5230\u7d22\u5f15\u533a\u4f46\u662f\u672a\u5408\u5e76 ? \u8868\u793a\u8fd8\u6ca1\u6dfb\u52a0\u5230git\u5e93\u4e2d\u7684\u6587\u4ef6 ! \u8868\u793a\u5df2\u88ab\u5ffd\u7565\u7684\u6587\u4ef6 AU \u6211\u4eec\u6dfb\u52a0\u4e86\u6587\u4ef6 UD \u4ed6\u4eec\u5220\u9664\u4e86\u6587\u4ef6 DD \u53cc\u65b9\u90fd\u5220\u9664\u4e86\u6587\u4ef6 UU \u53cc\u65b9\u90fd\u4fee\u6539\u4e86\u6587\u4ef6</p>"},{"location":"code/CS/git-note/#_24","title":"\u914d\u7f6e\u522b\u540d","text":"<p>\u547d\u4ee4\u53ef\u4ee5\u7b80\u5199\uff0c\u7528git st\u8868\u793agit status</p> <pre><code>git config --global alias.co checkout\ngit config --global alias.ci commit\ngit config --global alias.br branch\ngit config --global alias.last 'log -1'\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"\n</code></pre> <p>\u5f53\u524d\u7528\u6237\u7684Git\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u5728 <code>\uff5e/.gitconfig</code> \u6587\u4ef6\u4e2d\uff1b\u5f53\u524d\u4ed3\u5e93\u7684\u914d\u7f6e\u6587\u4ef6\u5728 <code>.git/config</code></p>"},{"location":"code/CS/git-note/#ui","title":"\u8bbe\u7f6eUI\u989c\u8272","text":"<pre><code>git config --global color.ui true\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/","title":"jQuery","text":""},{"location":"code/JavaScript/jQuery-note/#jquery","title":"jQuery","text":"<ul> <li>\u4f5c\u7528<ul> <li>\u6d88\u9664\u6d4f\u89c8\u5668\u5dee\u5f02\uff1a\u4f60\u4e0d\u9700\u8981\u81ea\u5df1\u5199\u5197\u957f\u7684\u4ee3\u7801\u6765\u9488\u5bf9\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u6765\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u7f16\u5199AJAX\u7b49\u4ee3\u7801\uff1b</li> <li>\u7b80\u6d01\u7684\u64cd\u4f5cDOM\u7684\u65b9\u6cd5\uff1a\u5199<code>$('#test')</code>\u80af\u5b9a\u6bd4<code>document.getElementById('test')</code>\u6765\u5f97\u7b80\u6d01\uff1b</li> <li>\u8f7b\u677e\u5b9e\u73b0\u52a8\u753b\u3001\u4fee\u6539CSS\u7b49\u5404\u79cd\u64cd\u4f5c\u3002</li> </ul> </li> <li><code>$.fn.jquery</code> \u67e5\u770b\u7248\u672c</li> <li><code>$</code> \u7b26\u53f7<ul> <li><code>$</code>\u662f\u8457\u540d\u7684jQuery\u7b26\u53f7\u3002\u5b9e\u9645\u4e0a\uff0cjQuery\u628a\u6240\u6709\u529f\u80fd\u5168\u90e8\u5c01\u88c5\u5728\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf<code>jQuery</code>\u4e2d\uff0c\u800c<code>$</code>\u4e5f\u662f\u4e00\u4e2a\u5408\u6cd5\u7684\u53d8\u91cf\u540d\uff0c\u5b83\u662f\u53d8\u91cf<code>jQuery</code>\u7684\u522b\u540d</li> <li><code>$</code>\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f46\u662f\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61\uff0c\u4e8e\u662f<code>$</code>\u9664\u4e86\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u5916\uff0c\u4e5f\u53ef\u4ee5\u6709\u5f88\u591a\u5176\u4ed6\u5c5e\u6027\u3002</li> </ul> </li> </ul>"},{"location":"code/JavaScript/jQuery-note/#_1","title":"\u9009\u62e9\u5668","text":"<ul> <li>\u9009\u62e9\u5668\u662fjQuery\u7684\u6838\u5fc3\u3002\u4e00\u4e2a\u9009\u62e9\u5668\u5199\u51fa\u6765\u7c7b\u4f3c<code>$('#dom-id')</code>\u3002</li> <li>\u8fd4\u56de jQuery \u5bf9\u8c61. jQuery\u5bf9\u8c61\u7c7b\u4f3c\u6570\u7ec4\uff0c\u5b83\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u5f15\u7528\u4e86DOM\u8282\u70b9\u7684\u5bf9\u8c61\u3002<ul> <li>\u627e\u4e0d\u5230\u65f6\u8fd4\u56de <code>[]</code>, \u56e0\u6b64 jQuery\u7684\u9009\u62e9\u5668\u4e0d\u4f1a\u8fd4\u56de<code>undefined</code>\u6216\u8005<code>null</code></li> </ul> </li> <li>jQuery\u5bf9\u8c61\u548cDOM\u5bf9\u8c61\u4e4b\u95f4\u53ef\u4ee5\u4e92\u76f8\u8f6c\u5316<ul> <li>\u4f8b\u5982, \u5bf9\u4e8e <code>var div = $('#abc');</code> jQuery \u5bf9\u8c61</li> <li><code>var divDom = div.get(0);</code> \u8f6c\u4e3a DOM \u5bf9\u8c61.</li> <li><code>var another = $(divDom);</code> \u5c06 DOM \u5bf9\u8c61\u8f6c\u4e3a jQuery \u5bf9\u8c61</li> </ul> </li> <li>\u901a\u5e38\u60c5\u51b5\u4e0b\u4f60\u4e0d\u9700\u8981\u83b7\u53d6DOM\u5bf9\u8c61\uff0c\u76f4\u63a5\u4f7f\u7528jQuery\u5bf9\u8c61\u66f4\u52a0\u65b9\u4fbf</li> <li>\u6309ID\u67e5\u627e, <code>#</code><ul> <li><code>var div = $('#abc');</code> \u67e5\u627e <code>&lt;div id=\"abc\"&gt;</code></li> </ul> </li> <li>tag, \u76f4\u63a5\u5199 tag \u540d\u79f0<ul> <li><code>var ps = $('p');</code> \u8fd4\u56de\u6240\u6709 <code>&lt;p&gt;</code> \u8282\u70b9</li> <li><code>ps.length</code> \u8fd4\u56de\u67e5\u627e\u5230\u7684\u6570\u91cf</li> </ul> </li> <li>class, <code>.</code><ul> <li><code>var a = $('.red');</code> \u6240\u6709\u8282\u70b9\u5305\u542b<code>class=\"red\"</code>\u90fd\u5c06\u8fd4\u56de, \u4e5f\u5339\u914d <code>&lt;p class=\"green red\"&gt;...&lt;/p&gt;</code></li> <li>\u67e5\u627e\u591a\u4e2a class: <code>var a = $('.red.green');</code></li> </ul> </li> <li>\u5c5e\u6027, <code>[...=\"...\"]</code><ul> <li><code>var email = $('[name=email]');</code></li> <li>\u5f53\u5c5e\u6027\u7684\u503c\u5305\u542b\u7a7a\u683c\u7b49\u7279\u6b8a\u5b57\u7b26\u65f6\uff0c\u9700\u8981\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765</li> <li>\u6309\u5c5e\u6027\u67e5\u627e\u8fd8\u53ef\u4ee5\u4f7f\u7528\u524d\u7f00\u67e5\u627e\u6216\u8005\u540e\u7f00\u67e5\u627e</li> <li><code>var icons = $('[class^=\"icon-\"]');</code></li> </ul> </li> <li>\u7ec4\u5408\u67e5\u627e<ul> <li><code>var emailInput = $('input[name=email]');</code> \u7b5b\u9009 name\u5c5e\u6027\u4e3a email \u7684 input \u8282\u70b9</li> </ul> </li> <li>\u591a\u9879\u9009\u62e9\u5668 <code>,</code><ul> <li><code>$('p.red,p.green');</code> \u7b5b\u9009 class \u5305\u542b red\u6216green \u7684 p \u8282\u70b9</li> <li>\u8981\u6ce8\u610f\u7684\u662f\uff0c\u9009\u51fa\u6765\u7684\u5143\u7d20\u662f\u6309\u7167\u5b83\u4eec\u5728HTML\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f\u6392\u5217\u7684\uff0c\u800c\u4e14\u4e0d\u4f1a\u6709\u91cd\u590d\u5143\u7d20\u3002\u4f8b\u5982\uff0c<code>&lt;p class=\"red green\"&gt;</code>\u4e0d\u4f1a\u88ab\u4e0a\u9762\u7684<code>$('p.red,p.green')</code>\u9009\u62e9\u4e24\u6b21\u3002</li> </ul> </li> </ul> <pre><code>/* ID */\n// \u67e5\u627e&lt;div id=\"abc\"&gt;:\nvar div = $('#abc');\n\n/* tag */\nvar ps = $('p'); // \u8fd4\u56de\u6240\u6709&lt;p&gt;\u8282\u70b9\nps.length; // \u6570\u4e00\u6570\u9875\u9762\u6709\u591a\u5c11\u4e2a&lt;p&gt;\u8282\u70b9\n\n/* class */\nvar a = $('.red'); // \u6240\u6709\u8282\u70b9\u5305\u542b`class=\"red\"`\u90fd\u5c06\u8fd4\u56de\n// \u4f8b\u5982:\n// &lt;div class=\"red\"&gt;...&lt;/div&gt;\n// &lt;p class=\"green red\"&gt;...&lt;/p&gt;\n\nvar a = $('.red.green'); // \u6ce8\u610f\u6ca1\u6709\u7a7a\u683c\uff01\n// \u7b26\u5408\u6761\u4ef6\u7684\u8282\u70b9\uff1a\n// &lt;div class=\"red green\"&gt;...&lt;/div&gt;\n// &lt;div class=\"blue green red\"&gt;...&lt;/div&gt;\n\n/* \u5c5e\u6027 */\nvar email = $('[name=email]'); // \u627e\u51fa&lt;??? name=\"email\"&gt;\nvar passwordInput = $('[type=password]'); // \u627e\u51fa&lt;??? type=\"password\"&gt;\nvar a = $('[items=\"A B\"]'); // \u627e\u51fa&lt;??? items=\"A B\"&gt;\n\n// \u6309\u7167\u524d\u540e\u7f00\u5339\u914d\nvar icons = $('[name^=icon]'); // \u627e\u51fa\u6240\u6709name\u5c5e\u6027\u503c\u4ee5icon\u5f00\u5934\u7684DOM\n// \u4f8b\u5982: name=\"icon-1\", name=\"icon-2\"\nvar names = $('[name$=with]'); // \u627e\u51fa\u6240\u6709name\u5c5e\u6027\u503c\u4ee5with\u7ed3\u5c3e\u7684DOM\n// \u4f8b\u5982: name=\"startswith\", name=\"endswith\"\n\n// \u8fd9\u4e2a\u65b9\u6cd5\u5c24\u5176\u9002\u5408\u901a\u8fc7class\u5c5e\u6027\u67e5\u627e\uff0c\u4e14\u4e0d\u53d7class\u5305\u542b\u591a\u4e2a\u540d\u79f0\u7684\u5f71\u54cd\nvar icons = $('[class^=\"icon-\"]'); // \u627e\u51fa\u6240\u6709class\u5305\u542b\u81f3\u5c11\u4e00\u4e2a\u4ee5`icon-`\u5f00\u5934\u7684DOM\n// \u4f8b\u5982: class=\"icon-clock\", class=\"abc icon-home\"\n\n/* \u7ec4\u5408\u67e5\u627e */\nvar emailInput = $('input[name=email]'); // \u4e0d\u4f1a\u627e\u51fa&lt;div name=\"email\"&gt;\n// \u6839\u636etag\u548cclass\u6765\u7ec4\u5408\u67e5\u627e\u4e5f\u5f88\u5e38\u89c1\uff1a\nvar tr = $('tr.red'); // \u627e\u51fa&lt;tr class=\"red ...\"&gt;...&lt;/tr&gt;\n\n/* $('p.red,p.green'); */\n$('p,div'); // \u628a&lt;p&gt;\u548c&lt;div&gt;\u90fd\u9009\u51fa\u6765\n$('p.red,p.green'); // \u628a&lt;p class=\"red\"&gt;\u548c&lt;p class=\"green\"&gt;\u90fd\u9009\u51fa\u6765\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/#_2","title":"\u5c42\u7ea7\u9009\u62e9\u5668","text":"<ul> <li>\u5c42\u7ea7\u9009\u62e9\u5668\uff08Descendant Selector\uff09<ul> <li>\u7528 `` \u7a7a\u683c\u9694\u5f00, \u5177\u6709\u5c42\u7ea7\u5173\u7cfb\u7684\u4e24\u4e2a\u8282\u70b9</li> <li>\u4f8b\u5982, <code>$('form[name=upload] input');</code> \u7b5b\u9009 name\u4e3aupload \u8868\u5355\u4e0b\u7684 input \u8282\u70b9</li> <li>\u4e5f\u53ef\u4ee5\u591a\u5c42, <code>$('form.test p input');</code></li> </ul> </li> <li>\u5b50\u9009\u62e9\u5668\uff08Child Selector\uff09<ul> <li>\u9650\u5236\u4e3a\u7236\u5b50\u5173\u7cfb <code>&gt;</code></li> <li><code>$('ul.lang&gt;li.lang-javascript');</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/jQuery-note/#filter","title":"\u8fc7\u6ee4\u5668\uff08Filter\uff09","text":"<ul> <li>\u8fc7\u6ee4\u5668\u4e00\u822c\u4e0d\u5355\u72ec\u4f7f\u7528\uff0c\u5b83\u901a\u5e38\u9644\u52a0\u5728\u9009\u62e9\u5668\u4e0a\uff0c\u5e2e\u52a9\u6211\u4eec\u66f4\u7cbe\u786e\u5730\u5b9a\u4f4d\u5143\u7d20<ul> <li><code>:</code> \u540e\u52a0\u7b5b\u9009\u6761\u4ef6</li> <li><code>first-child, last-child, nth-child(2), nth-child(even)</code></li> <li>\u4f8b\u5982 <code>$('ul.lang li:nth-child(odd)');</code> \u9009\u51fa\u5e8f\u53f7\u4e3a\u5947\u6570\u7684\u5143\u7d20</li> </ul> </li> <li><code>:visible</code>, <code>:hidden</code> \u9009\u51fa\u53ef\u89c1\u7684\u6216\u9690\u85cf\u7684\u5143\u7d20<ul> <li>\u4f8b\u5982 <code>$('div:visible');</code></li> </ul> </li> </ul> <p>\u9488\u5bf9\u8868\u5355\u5143\u7d20\uff0cjQuery\u8fd8\u6709\u4e00\u7ec4\u7279\u6b8a\u7684\u9009\u62e9\u5668\uff1a</p> <ul> <li><code>:input</code>\uff1a\u53ef\u4ee5\u9009\u62e9<code>&lt;input&gt;</code>\uff0c<code>&lt;textarea&gt;</code>\uff0c<code>&lt;select&gt;</code>\u548c<code>&lt;button&gt;</code>\uff1b</li> <li><code>:file</code>\uff1a\u53ef\u4ee5\u9009\u62e9<code>&lt;input type=\"file\"&gt;</code>\uff0c\u548c<code>input[type=file]</code>\u4e00\u6837\uff1b</li> <li><code>:checkbox</code>\uff1a\u53ef\u4ee5\u9009\u62e9\u590d\u9009\u6846\uff0c\u548c<code>input[type=checkbox]</code>\u4e00\u6837\uff1b</li> <li><code>:radio</code>\uff1a\u53ef\u4ee5\u9009\u62e9\u5355\u9009\u6846\uff0c\u548c<code>input[type=radio]</code>\u4e00\u6837\uff1b</li> <li><code>:focus</code>\uff1a\u53ef\u4ee5\u9009\u62e9\u5f53\u524d\u8f93\u5165\u7126\u70b9\u7684\u5143\u7d20\uff0c\u4f8b\u5982\u628a\u5149\u6807\u653e\u5230\u4e00\u4e2a<code>&lt;input&gt;</code>\u4e0a\uff0c\u7528<code>$('input:focus')</code>\u5c31\u53ef\u4ee5\u9009\u51fa\uff1b</li> <li><code>:checked</code>\uff1a\u9009\u62e9\u5f53\u524d\u52fe\u4e0a\u7684\u5355\u9009\u6846\u548c\u590d\u9009\u6846\uff0c\u7528\u8fd9\u4e2a\u9009\u62e9\u5668\u53ef\u4ee5\u7acb\u523b\u83b7\u5f97\u7528\u6237\u9009\u62e9\u7684\u9879\u76ee\uff0c\u5982<code>$('input[type=radio]:checked')</code>\uff1b</li> <li><code>:enabled</code>\uff1a\u53ef\u4ee5\u9009\u62e9\u53ef\u4ee5\u6b63\u5e38\u8f93\u5165\u7684 <code>&lt;input&gt;</code>\u3001<code>&lt;select&gt;</code> \u7b49\uff0c\u4e5f\u5c31\u662f\u6ca1\u6709\u7070\u6389\u7684\u8f93\u5165\uff1b</li> <li><code>:disabled</code>\uff1a\u548c<code>:enabled</code>\u6b63\u597d\u76f8\u53cd\uff0c\u9009\u62e9\u90a3\u4e9b\u4e0d\u80fd\u8f93\u5165\u7684\u3002</li> </ul>"},{"location":"code/JavaScript/jQuery-note/#_3","title":"\u67e5\u627e\u548c\u8fc7\u6ee4","text":"<p>\u53ef\u4ee5\u5bf9 jQuery \u8fdb\u4e00\u6b65\u6267\u884c\u67e5\u627e</p> <ul> <li>\u6700\u5e38\u89c1\u7684\u67e5\u627e\u662f\u5728\u67d0\u4e2a\u8282\u70b9\u7684\u6240\u6709\u5b50\u8282\u70b9\u4e2d\u67e5\u627e\uff0c\u4f7f\u7528<code>find()</code>\u65b9\u6cd5\uff0c\u5b83\u672c\u8eab\u53c8\u63a5\u6536\u4e00\u4e2a\u4efb\u610f\u7684\u9009\u62e9\u5668<ul> <li><code>var dy = ul.find('.dy');</code> \u5728 ul \u8fd9\u4e2a jQuery \u5bf9\u8c61\u7684\u5b50\u8282\u70b9\u4e2d\u67e5\u627e class \u4e3a dy \u7684\u8282\u70b9</li> </ul> </li> <li>\u5982\u679c\u8981\u4ece\u5f53\u524d\u8282\u70b9\u5f00\u59cb\u5411\u4e0a\u67e5\u627e\uff0c\u4f7f\u7528<code>parent()</code>\u65b9\u6cd5</li> <li>\u5bf9\u4e8e\u4f4d\u4e8e\u540c\u4e00\u5c42\u7ea7\u7684\u8282\u70b9\uff0c\u53ef\u4ee5\u901a\u8fc7<code>next()</code>\u548c<code>prev()</code>\u65b9\u6cd5<ul> <li>\u5b83\u4eec\u548c parent \u65b9\u6cd5\u90fd\u53ef\u4ee5\u4f20\u5165\u7b5b\u9009\u6761\u4ef6, \u82e5\u4e0d\u7b26\u5408\u5219\u8fd4\u56de\u7a7a jQuery \u5bf9\u8c61</li> </ul> </li> </ul> <p>\u8fc7\u6ee4</p> <ul> <li><code>filter()</code>\u65b9\u6cd5\u53ef\u4ee5\u8fc7\u6ee4\u6389\u4e0d\u7b26\u5408\u9009\u62e9\u5668\u6761\u4ef6\u7684\u8282\u70b9<ul> <li>\u4e5f\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\uff0c\u8981\u7279\u522b\u6ce8\u610f\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u88ab\u7ed1\u5b9a\u4e3aDOM\u5bf9\u8c61\uff0c\u4e0d\u662fjQuery\u5bf9\u8c61</li> </ul> </li> <li><code>map()</code>\u65b9\u6cd5\u628a\u4e00\u4e2ajQuery\u5bf9\u8c61\u5305\u542b\u7684\u82e5\u5e72DOM\u8282\u70b9\u8f6c\u5316\u4e3a\u5176\u4ed6\u5bf9\u8c61</li> <li><code>irst()</code>\u3001<code>last()</code>\u548c<code>slice()</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684jQuery\u5bf9\u8c61\uff0c\u628a\u4e0d\u9700\u8981\u7684DOM\u8282\u70b9\u53bb\u6389</li> </ul> <pre><code>var langs = $('ul.lang li'); // \u62ff\u5230JavaScript, Python, Swift, Scheme\u548cHaskell\nlangs.filter(function () {\n    return this.innerHTML.indexOf('S') === 0; // \u8fd4\u56deS\u5f00\u5934\u7684\u8282\u70b9\n}); // \u62ff\u5230Swift, Scheme\n\nvar langs = $('ul.lang li'); // \u62ff\u5230JavaScript, Python, Swift, Scheme\u548cHaskell\nvar arr = langs.map(function () {\n    return this.innerHTML;\n}).get(); // \u7528get()\u62ff\u5230\u5305\u542bstring\u7684Array\uff1a['JavaScript', 'Python', 'Swift', 'Scheme', 'Haskell']\n\nvar langs = $('ul.lang li'); // \u62ff\u5230JavaScript, Python, Swift, Scheme\u548cHaskell\nvar js = langs.first(); // JavaScript\uff0c\u76f8\u5f53\u4e8e$('ul.lang li:first-child')\nvar haskell = langs.last(); // Haskell, \u76f8\u5f53\u4e8e$('ul.lang li:last-child')\nvar sub = langs.slice(2, 4); // Swift, Scheme, \u53c2\u6570\u548c\u6570\u7ec4\u7684slice()\u65b9\u6cd5\u4e00\u81f4\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/#dom","title":"\u64cd\u4f5c DOM","text":"<ul> <li>\u4e00\u4e2ajQuery\u5bf9\u8c61\u53ef\u4ee5\u5305\u542b0\u4e2a\u6216\u4efb\u610f\u4e2aDOM\u5bf9\u8c61\uff0c\u5b83\u7684\u65b9\u6cd5\u5b9e\u9645\u4e0a\u4f1a\u4f5c\u7528\u5728\u5bf9\u5e94\u7684\u6bcf\u4e2aDOM\u8282\u70b9\u4e0a\u3002</li> <li>jQuery\u5bf9\u8c61\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u8fd4\u56de\u4e00\u4e2ajQuery\u5bf9\u8c61\uff08\u53ef\u80fd\u662f\u65b0\u7684\u4e5f\u53ef\u80fd\u662f\u81ea\u8eab\uff09\uff0c\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\uff0c\u975e\u5e38\u65b9\u4fbf</li> <li>\u4fee\u6539\u6587\u672c<ul> <li>jQuery\u5bf9\u8c61\u7684<code>text()</code>\u548c<code>html()</code>\u65b9\u6cd5\u5206\u522b\u83b7\u53d6\u8282\u70b9\u7684\u6587\u672c\u548c\u539f\u59cbHTML\u6587\u672c</li> </ul> </li> <li>\u4fee\u6539 CSS<ul> <li>style \u5c5e\u6027: <code>css</code> \u65b9\u6cd5<ul> <li>\u8c03\u7528jQuery\u5bf9\u8c61\u7684<code>css('name', 'value')</code>\u65b9\u6cd5</li> <li><code>$('#test-css li.dy&gt;span').css('background-color', '#ffd351').css('color', 'red');</code> \u8bbe\u7f6e\u76f8\u5e94\u8282\u70b9\u7684 background-color, color \u4e24\u4e2aCSS\u5c5e\u6027</li> <li>\u4e3a\u4e86\u548cJavaScript\u4fdd\u6301\u4e00\u81f4\uff0cCSS\u5c5e\u6027\u53ef\u4ee5\u7528<code>'background-color'</code>\u548c<code>'backgroundColor'</code>\u4e24\u79cd\u683c\u5f0f\u3002</li> </ul> </li> <li>class \u5c5e\u6027<ul> <li><code>hasClass(), addClass(), removeClass()</code></li> </ul> </li> </ul> </li> </ul> <pre><code>var div = $('#test-div');\ndiv.css('color'); // '#000033', \u83b7\u53d6CSS\u5c5e\u6027\ndiv.css('color', '#336699'); // \u8bbe\u7f6eCSS\u5c5e\u6027\ndiv.css('color', ''); // \u6e05\u9664CSS\u5c5e\u6027\n\nvar div = $('#test-div');\ndiv.hasClass('highlight'); // false\uff0c class\u662f\u5426\u5305\u542bhighlight\ndiv.addClass('highlight'); // \u6dfb\u52a0highlight\u8fd9\u4e2aclass\ndiv.removeClass('highlight'); // \u5220\u9664highlight\u8fd9\u4e2aclass\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/#_4","title":"\u4e8b\u4ef6","text":"<ul> <li>\u9f20\u6807\u4e8b\u4ef6<ul> <li><code>click</code>: \u9f20\u6807\u5355\u51fb\u65f6\u89e6\u53d1\uff1b</li> <li>dblclick\uff1a\u9f20\u6807\u53cc\u51fb\u65f6\u89e6\u53d1\uff1b</li> <li><code>mouseenter</code>\uff1a\u9f20\u6807\u8fdb\u5165\u65f6\u89e6\u53d1\uff1b</li> <li>mouseleave\uff1a\u9f20\u6807\u79fb\u51fa\u65f6\u89e6\u53d1\uff1b</li> <li>mousemove\uff1a\u9f20\u6807\u5728DOM\u5185\u90e8\u79fb\u52a8\u65f6\u89e6\u53d1\uff1b</li> <li><code>hover</code>\uff1a\u9f20\u6807\u8fdb\u5165\u548c\u9000\u51fa\u65f6\u89e6\u53d1\u4e24\u4e2a\u51fd\u6570\uff0c\u76f8\u5f53\u4e8emouseenter\u52a0\u4e0amouseleave\u3002</li> </ul> </li> <li>\u952e\u76d8\u4e8b\u4ef6<ul> <li>\u952e\u76d8\u4e8b\u4ef6\u4ec5\u4f5c\u7528\u5728\u5f53\u524d\u7126\u70b9\u7684DOM\u4e0a\uff0c\u901a\u5e38\u662f<code>&lt;input&gt;</code>\u548c<code>&lt;textarea&gt;</code>\u3002</li> <li><code>keydown</code>\uff1a\u952e\u76d8\u6309\u4e0b\u65f6\u89e6\u53d1\uff1b</li> <li>keyup\uff1a\u952e\u76d8\u677e\u5f00\u65f6\u89e6\u53d1\uff1b</li> <li><code>keypress</code>\uff1a\u6309\u4e00\u6b21\u952e\u540e\u89e6\u53d1\u3002</li> </ul> </li> <li>\u5176\u4ed6\u4e8b\u4ef6<ul> <li><code>focus</code>\uff1a\u5f53DOM\u83b7\u5f97\u7126\u70b9\u65f6\u89e6\u53d1\uff1b</li> <li><code>blur</code>\uff1a\u5f53DOM\u5931\u53bb\u7126\u70b9\u65f6\u89e6\u53d1\uff1b</li> <li><code>change</code>\uff1a\u5f53<code>&lt;input&gt;</code>\u3001<code>&lt;select&gt;</code>\u6216<code>&lt;textarea&gt;</code>\u7684\u5185\u5bb9\u6539\u53d8\u65f6\u89e6\u53d1\uff1b</li> <li><code>submit</code>\uff1a\u5f53<code>&lt;form&gt;</code>\u63d0\u4ea4\u65f6\u89e6\u53d1\uff1b</li> <li><code>ready</code>\uff1a\u5f53\u9875\u9762\u88ab\u8f7d\u5165\u5e76\u4e14DOM\u6811\u5b8c\u6210\u521d\u59cb\u5316\u540e\u89e6\u53d1\u3002<ul> <li><code>ready</code>\u4ec5\u4f5c\u7528\u4e8e<code>document</code>\u5bf9\u8c61\u3002\u7531\u4e8e<code>ready</code>\u4e8b\u4ef6\u5728DOM\u5b8c\u6210\u521d\u59cb\u5316\u540e\u89e6\u53d1\uff0c\u4e14\u53ea\u89e6\u53d1\u4e00\u6b21\uff0c\u6240\u4ee5\u975e\u5e38\u9002\u5408\u7528\u6765\u5199\u5176\u4ed6\u7684\u521d\u59cb\u5316\u4ee3\u7801</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/jQuery-note/#ready","title":"ready","text":"<ul> <li>\u6bd4\u5982, \u8981\u5728 head \u91cc\u8bbe\u7f6e DOM \u7684\u67d0\u4e2a\u4e8b\u4ef6\u76d1\u542c, \u7531\u4e8e DOM \u8fd8\u6ca1\u6709\u521d\u59cb\u5316, \u662f\u627e\u4e0d\u5230\u7684</li> <li>\u56e0\u6b64\u9700\u8981 <code>$(document).on('ready', function () {})</code> \u8bbe\u7f6e\u5f53\u9875\u9762\u521d\u59cb\u5316\u4e4b\u540e\u518d\u6765\u7ed1\u5b9a\u4e8b\u4ef6<ul> <li>\u4f8b\u5982\u7ed1\u5b9a\u5230\u4e00\u4e2a form \u8282\u70b9\u4e0a\u8bbe\u7f6e submit \u540e\u8981\u6267\u884c\u7684 <code>$('#testForm).on('submit', function () {})</code></li> </ul> </li> <li>\u7531\u4e8e ready \u4e8b\u4ef6\u975e\u5e38\u666e\u904d, \u53ef\u4ee5\u7b80\u5199<ul> <li><code>$(document).ready(f)</code></li> <li>\u751a\u81f3\u76f4\u63a5 <code>$(f)</code>, \u4e5f\u5373, \u5728 <code>$()</code> \u4e2d\u4f20\u5165\u56de\u8c03\u51fd\u6570</li> </ul> </li> <li>\u53ef\u4ee5\u53cd\u590d\u7ed1\u5b9a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u5b83\u4eec\u4f1a\u4f9d\u6b21\u6267\u884c</li> </ul> <pre><code>// $(document).on('ready', function () {\n// $(document).ready(function () {\n$(document).ready(function () {\n    // on('submit', function)\u4e5f\u53ef\u4ee5\u7b80\u5316:\n    $('#testForm).submit(function () {\n        alert('submit!');\n    });\n});\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/#_5","title":"\u4e8b\u4ef6\u53c2\u6570","text":"<ul> <li>\u6709\u4e9b\u4e8b\u4ef6\uff0c\u5982<code>mousemove</code>\u548c<code>keypress</code>\uff0c\u6211\u4eec\u9700\u8981\u83b7\u53d6\u9f20\u6807\u4f4d\u7f6e\u548c\u6309\u952e\u7684\u503c\uff0c\u5426\u5219\u76d1\u542c\u8fd9\u4e9b\u4e8b\u4ef6\u5c31\u6ca1\u4ec0\u4e48\u610f\u4e49\u4e86\u3002\u6240\u6709\u4e8b\u4ef6\u90fd\u4f1a\u4f20\u5165<code>Event</code>\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u53ef\u4ee5\u4ece<code>Event</code>\u5bf9\u8c61\u4e0a\u83b7\u53d6\u5230\u66f4\u591a\u7684\u4fe1\u606f</li> </ul> <pre><code>// \u8bbe\u7f6e\u5f53\u9f20\u6807\u5728 testMouseMoveDiv \u8fd9\u4e00\u8282\u70b9\u4e2d\u79fb\u52a8\u65f6, \u6355\u6349\u9f20\u6807\u4f4d\u7f6e\u5e76\u663e\u793a\n// \u6ce8\u610f\u56de\u8c03\u51fd\u6570\u63a5\u53d7\u4e86 Event \u5bf9\u8c61\n$(function () {\n    $('#testMouseMoveDiv').mousemove(function (e) {\n        $('#testMouseMoveSpan').text('pageX = ' + e.pageX + ', pageY = ' + e.pageY);\n    });\n});\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/#_6","title":"\u53d6\u6d88\u7ed1\u5b9a","text":"<ul> <li>\u8981\u53d6\u6d88\u7ed1\u5b9a\u4e00\u4e2a\u7279\u5b9a\u7684\u56de\u8c03\u51fd\u6570, <code>off('click', function)</code></li> <li><code>off('click')</code>\u4e00\u6b21\u6027\u79fb\u9664\u5df2\u7ed1\u5b9a\u7684<code>click</code>\u4e8b\u4ef6\u7684\u6240\u6709\u5904\u7406\u51fd\u6570</li> <li>\u65e0\u53c2\u6570\u8c03\u7528<code>off()</code>\u4e00\u6b21\u6027\u79fb\u9664\u5df2\u7ed1\u5b9a\u7684\u6240\u6709\u7c7b\u578b\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570</li> </ul>"},{"location":"code/JavaScript/jQuery-note/#_7","title":"\u4e8b\u4ef6\u89e6\u53d1\u6761\u4ef6","text":"<ul> <li>\u4e8b\u4ef6\u7684\u89e6\u53d1\u603b\u662f\u7531\u7528\u6237\u64cd\u4f5c\u5f15\u53d1\u7684</li> <li>\u56e0\u6b64, \u7528\u4ee3\u7801\u4fee\u6539\u7684\u65f6\u5019\u65e0\u6cd5\u89e6\u53d1</li> <li><code>trigger()</code> \u65b9\u6cd5<ul> <li>\u6709\u4e9b\u65f6\u5019\uff0c\u6211\u4eec\u5e0c\u671b\u7528\u4ee3\u7801\u89e6\u53d1\u4e8b\u4ef6</li> <li>\u53ef\u4ee5\u7528 <code>trigger('change')</code> \u89e6\u53d1</li> <li>\u6216\u8005\u662f\u7b80\u5199, \u65e0\u53c2\u6570\u7684<code>change()</code>\u65b9\u6cd5\u6765\u89e6\u53d1 change \u4e8b\u4ef6</li> </ul> </li> </ul> <pre><code>// \u7ed1\u5b9a\u4e8b\u4ef6, \u76d1\u542c\u7528\u6237\u8f93\u5165\nvar input = $('#test-input');\ninput.change(function () {\n    console.log('changed...');\n});\n\nvar input = $('#test-input');\ninput.val('change it!'); // \u8fd9\u6837\u901a\u8fc7 js \u4fee\u6539\u65e0\u6cd5\u89e6\u53d1\u4e8b\u4ef6\n// \u4e0b\u9762\u624b\u52a8\u89e6\u53d1\ninput.trigger('change') // or\ninput.change(); // \u89e6\u53d1change\u4e8b\u4ef6\n</code></pre> <p>\u4f8b\u5b50: \u5bf9\u4e8e\u4e00\u7ec4 checkbox, \u5229\u7528 jQuery \u4e8b\u4ef6\u76d1\u542c \u5b9e\u73b0\u4e00\u4e2a\u300c\u5168\u9009/\u5168\u4e0d\u9009\u300d\u9009\u9879, \u4ee5\u53ca\u300c\u53cd\u9009\u300d, \u9700\u8981\u6ce8\u610f\u5404\u4e2a\u9009\u9879\u4e4b\u95f4\u7684\u903b\u8f91\u5173\u7cfb</p>"},{"location":"code/JavaScript/jQuery-note/#_8","title":"\u52a8\u753b","text":"<p>here</p>"},{"location":"code/JavaScript/jQuery-note/#ajax","title":"AJAX","text":"<ul> <li>\u53ef\u4ee5\u901a\u8fc7 <code>$.ajax(url, settings)</code> \u5904\u7406 AJAX \u8bf7\u6c42<ul> <li>settings \u4e2d\u7684\u9009\u9879\u5305\u62ec <code>method, contentType, data, headers, dataType</code> \u7b49</li> <li>\u901a\u8fc7 <code>done, fail, always</code> \u65b9\u6cd5\u6765\u8fdb\u884c\u7c7b\u4f3c Promise \u7684\u5904\u7406</li> </ul> </li> <li>\u5bf9\u4e8e\u5e38\u7528\u7684\u8bf7\u6c42, \u53ef\u4ee5\u7b80\u5199\u6210 <code>$.get(rul, paras)</code> <code>$.post(url, paras)</code><ul> <li><code>$.getJSON(url, paras)</code> \u5feb\u901f\u901a\u8fc7GET\u83b7\u53d6\u4e00\u4e2aJSON\u5bf9\u8c61</li> </ul> </li> <li>jQuery\u7684AJAX\u5b8c\u5168\u5c01\u88c5\u7684\u662fJavaScript\u7684AJAX\u64cd\u4f5c\uff0c\u6240\u4ee5\u5b83\u7684\u5b89\u5168\u9650\u5236\u548c\u524d\u9762\u8bb2\u7684\u7528JavaScript\u5199AJAX\u5b8c\u5168\u4e00\u6837<ul> <li>\u5982\u679c\u9700\u8981\u4f7f\u7528JSONP\uff0c\u53ef\u4ee5\u5728<code>ajax()</code>\u4e2d\u8bbe\u7f6e<code>jsonp: 'callback'</code></li> </ul> </li> </ul> <p>jQuery\u5728\u5168\u5c40\u5bf9\u8c61<code>jQuery</code>\uff08\u4e5f\u5c31\u662f<code>$</code>\uff09\u7ed1\u5b9a\u4e86<code>ajax()</code>\u51fd\u6570\uff0c\u53ef\u4ee5\u5904\u7406AJAX\u8bf7\u6c42\u3002<code>ajax(url, settings)</code>\u51fd\u6570\u9700\u8981\u63a5\u6536\u4e00\u4e2aURL\u548c\u4e00\u4e2a\u53ef\u9009\u7684<code>settings</code>\u5bf9\u8c61\uff0c\u5e38\u7528\u7684\u9009\u9879\u5982\u4e0b\uff1a</p> <ul> <li>async\uff1a\u662f\u5426\u5f02\u6b65\u6267\u884cAJAX\u8bf7\u6c42\uff0c\u9ed8\u8ba4\u4e3a<code>true</code>\uff0c\u5343\u4e07\u4e0d\u8981\u6307\u5b9a\u4e3a<code>false</code>\uff1b</li> <li>method\uff1a\u53d1\u9001\u7684Method\uff0c\u7f3a\u7701\u4e3a<code>'GET'</code>\uff0c\u53ef\u6307\u5b9a\u4e3a<code>'POST'</code>\u3001<code>'PUT'</code>\u7b49\uff1b</li> <li>contentType\uff1a\u53d1\u9001POST\u8bf7\u6c42\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>'application/x-www-form-urlencoded; charset=UTF-8'</code>\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a<code>text/plain</code>\u3001<code>application/json</code>\uff1b</li> <li>data\uff1a\u53d1\u9001\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\u6216object\u3002\u5982\u679c\u662fGET\u8bf7\u6c42\uff0cdata\u5c06\u88ab\u8f6c\u6362\u6210query\u9644\u52a0\u5230URL\u4e0a\uff0c\u5982\u679c\u662fPOST\u8bf7\u6c42\uff0c\u6839\u636econtentType\u628adata\u5e8f\u5217\u5316\u6210\u5408\u9002\u7684\u683c\u5f0f\uff1b</li> <li>headers\uff1a\u53d1\u9001\u7684\u989d\u5916\u7684HTTP\u5934\uff0c\u5fc5\u987b\u662f\u4e00\u4e2aobject\uff1b</li> <li>dataType\uff1a\u63a5\u6536\u7684\u6570\u636e\u683c\u5f0f\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3a<code>'html'</code>\u3001<code>'xml'</code>\u3001<code>'json'</code>\u3001<code>'text'</code>\u7b49\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\u6839\u636e\u54cd\u5e94\u7684<code>Content-Type</code>\u731c\u6d4b\u3002</li> </ul> <p>jQuery\u7684jqXHR\u5bf9\u8c61\u7c7b\u4f3c\u4e00\u4e2aPromise\u5bf9\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u94fe\u5f0f\u5199\u6cd5\u6765\u5904\u7406\u5404\u79cd\u56de\u8c03</p> <ul> <li><code>.done</code></li> <li><code>.fail</code></li> <li><code>.always</code></li> </ul> <pre><code>function ajaxLog(s) {\n    var txt = $(\"#test-response-text\");\n    txt.val(txt.val() + \"\\n\" + s);\n}\n$(\"#test-response-text\").val(\"\");\n\n// \u8fd4\u56de\u7684\u662f xhr \u5bf9\u8c61\nvar jqxhr = $.ajax(\"/api/categories\", {\n    dataType: \"json\",\n})\n    .done(function (data) {\n        ajaxLog(\"\u6210\u529f, \u6536\u5230\u7684\u6570\u636e: \" + JSON.stringify(data));\n    })\n    .fail(function (xhr, status) {\n        ajaxLog(\"\u5931\u8d25: \" + xhr.status + \", \u539f\u56e0: \" + status);\n    })\n    .always(function () {\n        ajaxLog(\"\u8bf7\u6c42\u5b8c\u6210: \u65e0\u8bba\u6210\u529f\u6216\u5931\u8d25\u90fd\u4f1a\u8c03\u7528\");\n    });\n</code></pre> <ul> <li>\u5bf9\u5e38\u7528\u7684AJAX\u64cd\u4f5c\uff0cjQuery\u63d0\u4f9b\u4e86\u4e00\u4e9b\u8f85\u52a9\u65b9\u6cd5<ul> <li>get<ul> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5982\u679c\u662fobject\uff0cjQuery\u81ea\u52a8\u628a\u5b83\u53d8\u6210query string\u7136\u540e\u52a0\u5230URL\u540e\u9762</li> <li>\u8fd9\u6837\u6211\u4eec\u5c31\u4e0d\u7528\u5173\u5fc3\u5982\u4f55\u7528URL\u7f16\u7801\u5e76\u6784\u9020\u4e00\u4e2aquery string\u4e86\u3002</li> </ul> </li> <li>post<ul> <li>\u4f20\u5165\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u9ed8\u8ba4\u88ab\u5e8f\u5217\u5316\u4e3a<code>application/x-www-form-urlencoded</code></li> <li>\u4f5c\u4e3aPOST\u7684body\u88ab\u53d1\u9001</li> </ul> </li> <li>getJSON</li> </ul> </li> </ul> <pre><code>var jqxhr = $.get('/path/to/resource', {\n    name: 'Bob Lee',\n    check: 1\n});\n// \u5b9e\u9645\u7684 URL \u662f /path/to/resource?name=Bob%20Lee&amp;check=1\n\nvar jqxhr = $.post('/path/to/resource', {\n    name: 'Bob Lee',\n    check: 1\n});\n// \u6784\u9020\u6210 name=Bob%20Lee&amp;check=1 \u4f5c\u4e3aPOST\u7684body\u88ab\u53d1\u9001\n\nvar jqxhr = $.getJSON('/path/to/resource', {\n    name: 'Bob Lee',\n    check: 1\n}).done(function (data) {\n    // data\u5df2\u7ecf\u88ab\u89e3\u6790\u4e3aJSON\u5bf9\u8c61\u4e86\n});\n</code></pre>"},{"location":"code/JavaScript/jQuery-note/#_9","title":"\u63d2\u4ef6","text":"<p>\u6211\u4eec\u5f97\u51fa\u7f16\u5199\u4e00\u4e2ajQuery\u63d2\u4ef6\u7684\u539f\u5219\uff1a</p> <ol> <li>\u7ed9 <code>$.fn</code> \u7ed1\u5b9a\u51fd\u6570\uff0c\u5b9e\u73b0\u63d2\u4ef6\u7684\u4ee3\u7801\u903b\u8f91\uff1b</li> <li>\u63d2\u4ef6\u51fd\u6570\u6700\u540e\u8981 <code>return this;</code> \u4ee5\u652f\u6301\u94fe\u5f0f\u8c03\u7528\uff1b</li> <li>\u63d2\u4ef6\u51fd\u6570\u8981\u6709\u9ed8\u8ba4\u503c\uff0c\u7ed1\u5b9a\u5728 <code>$.fn.&lt;pluginName&gt;.defaults</code> \u4e0a\uff1b</li> <li>\u901a\u8fc7 <code>$.extend(target, obj1, obj2, ...)</code> \u6765\u5408\u5e76\u540e\u7eed obj \u7684\u5c5e\u6027\u5230 target \u4e2d</li> <li>\u7528\u6237\u5728\u8c03\u7528\u65f6\u53ef\u4f20\u5165\u8bbe\u5b9a\u503c\u4ee5\u4fbf\u8986\u76d6\u9ed8\u8ba4\u503c\u3002</li> </ol> <pre><code>$.fn.highlight = function (options) {\n    // \u5408\u5e76\u9ed8\u8ba4\u503c\u548c\u7528\u6237\u8bbe\u5b9a\u503c:\n    var opts = $.extend({}, $.fn.highlight.defaults, options);\n    this.css('backgroundColor', opts.backgroundColor).css('color', opts.color);\n    return this;\n}\n// \u8bbe\u5b9a\u9ed8\u8ba4\u503c:\n$.fn.highlight.defaults = {\n    color: '#d85030',\n    backgroundColor: '#fff8de'\n}\n\n// \u7528\u6237\u81ea\u884c\u8bbe\u7f6e\u9ed8\u8ba4\u503c\n$.fn.highlight.defaults.color = '#659f13';\n$.fn.highlight.defaults.backgroundColor = '#f2fae3';\n// \u8c03\u7528\n$('#test-highlight p:first-child span').highlight();\n// \u8c03\u7528\u7684\u65f6\u5019\u4e5f\u652f\u6301\u4f20\u5165 opt\n$('#test-highlight p:last-child span').highlight({\n    color: '#dd1144'\n});\n</code></pre> <p>\u82e5\u8981\u5bf9\u4e8e\u7279\u5b9a\u7684\u5143\u7d20\u8fdb\u884c\u62d3\u5c55, \u53ef\u4ee5\u7528 <code>filter</code> \u65b9\u6cd5\u8fdb\u884c\u8fc7\u6ee4</p>"},{"location":"code/JavaScript/js-mindmap/","title":"Mindmap","text":""},{"location":"code/JavaScript/js-mindmap/#_1","title":"\u51fd\u6570","text":"<ul> <li>\u53c2\u6570<ul> <li><code>function foo(a, b, ...rest) {}</code>; <code>arguments</code> \u5bf9\u8c61; \u503c\u4f20\u9012, \u5bf9\u8c61\u5f15\u7528\u662f\u503c</li> </ul> </li> <li>\u53d8\u91cf\u4f5c\u7528\u57df<ul> <li>\u53d8\u91cf\u63d0\u5347; \u5168\u5c40\u4f5c\u7528\u57df; \u7533\u660e\u5757\u7ea7\u4f5c\u7528\u57df let, const</li> </ul> </li> <li>Function \u6784\u9020\u5668<ul> <li><code>var myFunction = new Function(\"a\", \"b\", \"return a * b\");</code></li> </ul> </li> <li>\u89e3\u6784\u8d4b\u503c: \u7c7b\u4f3cPython\u4e2d\u7684\u5e8f\u5217\u89e3\u5305<ul> <li>\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c. \u522b\u540d; \u5d4c\u5957; \u9ed8\u8ba4\u503c; \u5728\u51fd\u6570\u4f20\u53c2\u65f6\u4f7f\u7528</li> </ul> </li> <li>\u5bf9\u8c61\u7684\u65b9\u6cd5<ul> <li>this \u5173\u952e\u8bcd</li> <li>apply, call(). <code>Math.max.apply(null, [3, 5, 4]);</code></li> </ul> </li> <li>\u9ad8\u9636\u51fd\u6570<ul> <li>forEach</li> <li>map, reduce</li> <li>filter</li> <li>sort. <code>sort((firstEl, secondEl) =&gt; { /* ... */ } )</code> \u6ce8\u610f\u8fd4\u56de -1,0,1 \u8d1f\u6570\u8868\u793a\u4f18\u5148\u7ea7\u9ad8</li> <li>every</li> <li>find, findIndex</li> </ul> </li> <li>\u51fd\u6570\u95ed\u5305: \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570<ul> <li>\u4f5c\u7528: 1. \u53ef\u4ee5\u50cf class \u4e00\u6837\u5b9a\u4e49\u79c1\u6709\u53d8\u91cf; 2. \u53ef\u4ee5\u5c01\u88c5\u65b0\u7684\u51fd\u6570</li> </ul> </li> <li>\u7bad\u5934\u51fd\u6570: \u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5bf9\u4e8e this \u7684\u6307\u5411\u8fdb\u884c\u4e86\u4e00\u5b9a\u4fee\u590d, \u5176\u5185\u90e8\u7684 this \u662f\u8bcd\u6cd5\u4f5c\u7528\u57df, \u7531\u4e0a\u4e0b\u6587\u786e\u5b9a</li> <li>generator \u751f\u6210\u5668: \u7c7b\u4f3c Python<ul> <li>\u4f5c\u7528: 1. \u53ef\u4ee5\u8bb0\u5f55\u8fc7\u7a0b\u4e2d\u53d8\u91cf, \u5b8c\u6210 object \u91c7\u7528\u5b9e\u73b0\u7684\u4efb\u52a1; 2. \u66f4\u91cd\u8981\u7684\u662f, \u53ef\u4ee5\u628a\u5f02\u6b65\u56de\u8c03\u4ee3\u7801\u53d8\u6210\u201c\u540c\u6b65\u201d\u4ee3\u7801</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#_2","title":"\u6807\u51c6\u5bf9\u8c61","text":"<ul> <li><code>number</code>\u3001<code>string</code>\u3001<code>boolean</code>\u3001<code>function</code> \u548c <code>undefined</code></li> <li>\u5305\u88c5\u5bf9\u8c61, <code>Number, Boolean, String</code>; \u6ce8\u610f\u7528 new \u6765\u521b\u5efa\u7684\u8bdd\u5c06\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61</li> <li>\u8f6c\u4e3a\u6570\u5b57 <code>parseInt(), parseFloat()</code></li> <li>\u6240\u6709 JavaScript \u6570\u636e\u7c7b\u578b\u90fd\u6709 valueOf() \u548c toString() \u65b9\u6cd5</li> <li>\u5224\u65ad<ul> <li>\u662f\u5426\u4e3a array <code>Array.isArray(arr)</code></li> <li>\u662f\u5426\u4e3a null <code>myVar === null</code> (null \u7c7b\u578b\u4e3a object)</li> <li>\u662f\u5426\u5b58\u5728 <code>typeof myVar === 'undefined'</code></li> </ul> </li> <li>Date<ul> <li><code>var now = new Date();</code></li> <li>Date \u5bf9\u8c61\u7684\u65b9\u6cd5: getFullYear, getMonth, getDate, getDay, getHours, getMinutes, getSeconds, getMilliseconds<ul> <li>getTime \u8fd4\u56de\u65f6\u95f4\u6233</li> </ul> </li> <li>now \u65b9\u6cd5\u8fd4\u56de\u65f6\u95f4\u6233 <code>Date.now()</code></li> <li>parse \u65b9\u6cd5: <code>var d = Date.parse('2015-06-24T19:49:22.875+08:00');</code></li> </ul> </li> <li>RegExp<ul> <li><code>/\u6b63\u5219\u8868\u8fbe\u5f0f/</code>, \u8868\u8fbe\u5f0f\u5185\u7684 <code>\\</code> \u7b26\u53f7\u4e0d\u9700\u8981\u8f6c\u4e49, \u82e5\u7528 new \u521b\u5efa\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u9700\u8981\u8f6c\u4e49</li> <li>\u6807\u5fd7: g \u5168\u5c40 (\u8bb0\u5f55 lastIndex \u518d\u6b21\u8fd0\u884c\u56de\u5f80\u540e\u5339\u914d), i \u5ffd\u7565\u5927\u5c0f\u5199, m \u591a\u884c</li> <li>test</li> <li><code>exec</code> \u5339\u914d\u5931\u8d25\u8fd4\u56de null, \u6210\u529f\u5219\u8fd4\u56de Array, \u5176\u4e2d\u7b2c\u4e00\u4e2a\u4e3a\u5b8c\u6574\u5339\u914d, \u540e\u9762\u662f\u5206\u7ec4</li> <li>\u9ed8\u8ba4\u8d2a\u5a6a\u5339\u914d, \u52a0 <code>?</code> \u975e\u8d2a\u5a6a, \u4f8b\u5982 <code>var re = /^(\\d+?)(0*)$/;</code> \u7b2c\u4e8c\u7ec4\u5339\u914d\u6700\u540e\u7684 0</li> <li>\u6b63\u5219\u57fa\u7840<ul> <li><code>*, +, ?, {n}, {n,m}</code> \u9650\u5236\u957f\u5ea6</li> </ul> </li> </ul> </li> <li>JSON<ul> <li>\u5e8f\u5217\u5316: <code>JSON.stringify()</code>, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5bf9 key, value \u8fdb\u884c\u5904\u7406\u7684\u51fd\u6570, \u7b2c\u4e09\u4e2a\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u4e2a\u6570<ul> <li>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a object \u7684 <code>toJSON</code> \u65b9\u6cd5\u81ea\u5b9a\u4e49\u8f93\u51fa\u5bf9\u8c61\u5185\u5bb9</li> </ul> </li> <li>\u53cd\u5e8f\u5217\u5316: <code>JSON.parse('{\"name\":\"\u5c0f\u660e\",\"age\":14}')</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#_3","title":"\u5b57\u7b26\u4e32","text":"<ul> <li>length,</li> <li>indexOf(), lastIndexOf(), search,</li> <li>slice(), substring(), substr(),</li> <li>replace(),</li> <li>toUpperCase(), toLowerCase(),</li> <li>concat(),</li> <li>trim(),</li> <li>charAt(), charCodeAt(),</li> <li>split()</li> </ul>"},{"location":"code/JavaScript/js-mindmap/#number","title":"Number","text":"<ul> <li>toString(2/10/16), toExponential(), toFixed(), toPrecision(),</li> <li>valueOf(),</li> <li>MAX_VALUE, MIN_VALUE, NEGATIVE_INFINITY, NaN, POSITIVE_INFINITY</li> </ul>"},{"location":"code/JavaScript/js-mindmap/#_4","title":"\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b","text":"<ul> <li>js \u4e2d\u901a\u8fc7\u539f\u578b\uff08prototype\uff09\u6765\u5b9e\u73b0\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b OOM</li> <li>\u4e00\u4e2a\u5bf9\u8c61\u7684 <code>__proto__</code> \u5c5e\u6027 \u6307\u5411\u5176\u539f\u578b</li> <li>\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u53ca\u5176\u6240\u6784\u9020\u51fa\u6765\u7684\u5bf9\u8c61\u6ee1\u8db3\u5173\u7cfb <code>foo.__proto__ === Foo.prototype</code> , \u8fd9\u91cc\u7684 foo \u901a\u8fc7 <code>new Foo()</code> \u6784\u9020.</li> <li>\u6784\u9020\u51fd\u6570<ul> <li>\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\u521b\u5efa;</li> <li>\u4e3a\u4e86\u907f\u514d\u5197\u4f59, \u4e0d\u5e94\u8be5\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5b9a\u4e49\u65b9\u6cd5, \u800c\u5e94\u8be5\u5b9a\u4e49\u5728\u5176\u539f\u578b\u4e0a, \u4f8b\u5982 <code>Student.prototype.func = ...</code></li> </ul> </li> <li>\u6ce8\u610f\u533a\u5206:<ul> <li><code>prototype</code> \u662f\u51fd\u6570\u72ec\u6709\u7684\u5c5e\u6027</li> <li><code>__proto__</code> \u548c <code>constructor</code> \u662f\u5bf9\u8c61\u7684\u5c5e\u6027; \u4f46\u662f\u7531\u4e8e JS \u4e2d\u51fd\u6570\u4e5f\u662f\u4e00\u79cd\u5bf9\u8c61\uff0c\u6240\u4ee5\u51fd\u6570\u4e5f\u62e5\u6709</li> </ul> </li> <li>\u4e0d\u5e94\u8be5\u64cd\u4f5c <code>__proto__</code> \u5c5e\u6027</li> <li>\u5982\u4f55\u5b9e\u73b0\u7ee7\u627f (\u5b9e\u73b0\u6784\u9020\u51fd\u6570)? \u7531\u4e8e\u8fd8\u9700\u8981\u5f15\u5165\u6784\u9020\u51fd\u6570\u7684 prototype, \u9700\u8981\u5229\u7528\u4e00\u4e2a\u65e0\u5173\u7684\u7a7a\u51fd\u6570 new \u4e00\u4e2a\u539f\u578b\u5bf9\u8c61, \u7136\u540e\u8c03\u6574\u7ee7\u627f\u94fe</li> <li>class \u5173\u952e\u8bcd<ul> <li>\u8bed\u6cd5: <code>class Student {}</code><ul> <li><code>class</code>\u7684\u5b9a\u4e49\u5305\u542b\u4e86\u6784\u9020\u51fd\u6570 <code>constructor</code>\u548c\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61\u4e0a\u7684\u65b9\u6cd5\uff08\u6ce8\u610f\u6ca1\u6709<code>function</code>\u5173\u952e\u5b57\uff09</li> </ul> </li> <li>\u7ee7\u627f: <code>class PrimaryStudent extends Student {}</code>; \u8bb0\u5f97\u5728 constructor \u51fd\u6570\u4e2d\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u65b9\u6cd5 <code>super(name);</code> super \u5c31\u662f\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#_5","title":"\u6d4f\u89c8\u5668","text":"<ul> <li>\u6d4f\u89c8\u5668\u5bf9\u8c61<ul> <li>window,</li> <li>nevigator, \u6d4f\u89c8\u5668\u4fe1\u606f.<ul> <li>\u5c5e\u6027: appName, appVersion, language, platform, userAgent</li> <li>\u6ce8\u610f navigator \u7684\u4fe1\u606f\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u88ab\u7528\u6237\u4fee\u6539\uff0c\u6240\u4ee5JavaScript\u8bfb\u53d6\u7684\u503c\u4e0d\u4e00\u5b9a\u662f\u6b63\u786e\u7684</li> </ul> </li> <li>screen, \u5c5e\u6027\u6709 width, height, colorDepth</li> <li>location, \u5f53\u524d URL\u4fe1\u606f<ul> <li><code>href</code> \u5b8c\u6574 URL</li> <li><code>protocol</code>, <code>host</code>, <code>port</code>, <code>pathname</code>; \u4ee5\u53ca <code>search</code>, <code>hash</code></li> </ul> </li> <li>history \u907f\u514d\u4f7f\u7528</li> </ul> </li> <li>document; \u64cd\u4f5c\u5bf9\u8c61<ul> <li>title (\u5bf9\u5e94 html)</li> <li>cookie</li> <li>\u65b9\u6cd5:<ul> <li><code>getElementById, getElementsByTagName, getElementsByClassName</code></li> <li><code>querySelector()</code> \u548c <code>querySelectorAll()</code></li> </ul> </li> <li>\u8282\u70b9\u5c5e\u6027<ul> <li>innerHTML, innerText, id</li> <li>parentNode, chilren (\u6ce8\u610f rrray.from() \u8f6c\u4e3a\u5217\u8868), firstElementChild, lastElementChild</li> <li>setAttribute \u65b9\u6cd5, \u4f8b\u5982 <code>setAttribute('type', 'text/css')</code></li> </ul> </li> <li>\u63d2\u5165<ul> <li>\u63d2\u5165\u5b50\u8282\u70b9 <code>appendChild</code><ul> <li><code>document.createElement('p')</code>, \u5e76\u4fee\u6539 innerText \u7b49\u5c5e\u6027</li> </ul> </li> <li>\u63d2\u5165\u5230\u6307\u5b9a\u4f4d\u7f6e <code>parentElement.insertBefore(newElement, referenceElement);</code></li> </ul> </li> <li>\u5220\u9664<ul> <li><code>parent.removeChild(parent.children[0])</code></li> </ul> </li> </ul> </li> <li>\u64cd\u4f5c\u8868\u5355</li> <li>\u64cd\u4f5c\u6587\u4ef6</li> <li>AJAX<ul> <li>Asynchronous JavaScript and XML, \u7528JavaScript\u6267\u884c\u5f02\u6b65\u7f51\u7edc\u8bf7\u6c42</li> <li>XMLHttpRequest<ul> <li><code>var request = new XMLHttpRequest();</code> \u521b\u5efa\u4e86<code>XMLHttpRequest</code>\u5bf9\u8c61\u540e\uff0c\u8981\u5148\u8bbe\u7f6e<code>onreadystatechange</code>\u7684\u56de\u8c03\u51fd\u6570\u3002\u5728\u56de\u8c03\u51fd\u6570\u4e2d\uff0c\u901a\u5e38\u6211\u4eec\u53ea\u9700\u901a\u8fc7<code>readyState === 4</code>\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u5b8c\u6210\uff0c\u5982\u679c\u5df2\u5b8c\u6210\uff0c\u518d\u6839\u636e<code>status === 200</code>\u5224\u65ad\u662f\u5426\u662f\u4e00\u4e2a\u6210\u529f\u7684\u54cd\u5e94</li> <li><code>XMLHttpRequest</code>\u5bf9\u8c61\u7684<code>open()</code>\u65b9\u6cd5\u67093\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u6307\u5b9a\u662f<code>GET</code>\u8fd8\u662f<code>POST</code>\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9aURL\u5730\u5740\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u6307\u5b9a\u662f\u5426\u4f7f\u7528\u5f02\u6b65\uff0c\u9ed8\u8ba4\u662f<code>true</code>\uff0c\u6240\u4ee5\u4e0d\u7528\u5199</li> <li>\u6700\u540e <code>request.send();</code></li> </ul> </li> <li>JSONP, \u53c2\u89c1 \u8bf4\u8bf4JSON\u548cJSONP\uff0c\u4e5f\u8bb8\u4f60\u4f1a\u8c41\u7136\u5f00\u6717\uff0c\u542bjQuery\u7528\u4f8b</li> <li>CORS\u5168\u79f0 <code>Cross-Origin Resource Sharing</code> \uff0c\u662fHTML5\u89c4\u8303\u5b9a\u4e49\u7684\u5982\u4f55\u8de8\u57df\u8bbf\u95ee\u8d44\u6e90</li> </ul> </li> <li>Promise<ul> <li><code>setTimeout(callback, 1000);</code></li> <li>\u8bed\u6cd5:<ul> <li><code>var p1 = new Promise(test);</code> \u65b0\u5efa Promise \u5bf9\u8c61, \u5176\u4e2d\u56de\u8c03\u51fd\u6570 <code>function test(resolve, reject) {}</code> \u662f\u6211\u4eec\u4e3b\u8981\u5173\u5fc3\u7684\u51fd\u6570\u903b\u8f91,<ul> <li>\u5176\u4e2d resolve, reject \u5206\u522b\u662f\u6267\u884c\u6210\u529f\u6216\u5931\u8d25\u4e4b\u540e\u7684\u64cd\u4f5c, \u4e0d\u5173\u5fc3</li> </ul> </li> <li><code>var p2 = p1.then(function (result) {})</code>. \u8fd9\u91cc <code>then</code> \u4e2d\u4f20\u5165\u7684\u5c31\u662f\u4e0a\u9762\u7684 resolve</li> <li><code>var p3 = p2.catch(function (reason) {})</code>. \u5176\u4e2d <code>catch</code> \u4f20\u5165\u7684\u662f reject</li> <li>\u53ef\u4ee5\u4e32\u8054\u5199\u6210 <code>new Promise(test).then(resolve).catch(reject)</code> \u7684\u5f62\u5f0f</li> </ul> </li> <li>\u4f5c\u7528: Promise\u6700\u5927\u7684\u597d\u5904\u662f\u5728\u5f02\u6b65\u6267\u884c\u7684\u6d41\u7a0b\u4e2d\uff0c\u628a\u6267\u884c\u4ee3\u7801\u548c\u5904\u7406\u7ed3\u679c\u7684\u4ee3\u7801\u6e05\u6670\u5730\u5206\u79bb\u4e86</li> <li>\u4e32\u884c: <code>job1.then(job2).then(job3).catch(handleError);</code> \u5176\u4e2d job1,2,3 \u90fd\u662f Promise \u5bf9\u8c61</li> <li>\u5e76\u884c<ul> <li><code>Promise.all([p1, p2])</code> \u5168\u90e8\u6267\u884c, \u8f93\u51fa(then \u7684\u8f93\u5165) \u4e5f\u662f\u4e00\u4e2a Array</li> <li><code>Promise.race([p1, p2])</code> \u54ea\u4e2a\u5148\u8fd4\u56de\u5c31\u6267\u884c\u54ea\u4e2a</li> </ul> </li> </ul> </li> <li>Canvas</li> </ul>"},{"location":"code/JavaScript/js-mindmap/#jquery","title":"jQuery","text":"<ul> <li><code>$</code> \u7b26\u53f7: \u662f <code>jQuery</code>\u7684\u522b\u540d</li> <li>\u9009\u62e9\u5668: <code>$('#dom-id')</code><ul> <li>\u8fd4\u56de jQuery \u5bf9\u8c61. \u627e\u4e0d\u5230\u4e5f\u4e0d\u8fd4\u56de undefined \u800c\u662f\u7c7b\u4f3c <code>[]</code></li> <li>\u76f8\u4e92\u8f6c\u5316: \u5bf9\u4e8e <code>var div = $('#abc');</code> \u8fd9\u4e00 jQuery \u5bf9\u8c61, \u53ef\u4ee5 <code>var divDom = div.get(0);</code> \u8f6c\u4e3a DOM \u5bf9\u8c61; <code>var another = $(divDom);</code> \u5c06 DOM \u5bf9\u8c61\u8f6c\u4e3a jQuery \u5bf9\u8c61</li> <li>\u9009\u62e9\u8bed\u6cd5:<ul> <li>tag \u76f4\u63a5\u5199 tag \u540d\u79f0 <code>var ps = $('p');</code></li> <li>id \u7528<code>#id</code>, class \u7528 <code>$('.red.green')</code> \u53ef\u4ee5\u5199\u591a\u4e2a;</li> <li>\u5c5e\u6027 <code>$('[name=email]')</code><ul> <li>\u524d\u7f00\u6216\u540e\u7f00\u5339\u914d <code>$('[class^=\"icon-\"]')</code></li> </ul> </li> <li>\u7ec4\u5408\u67e5\u627e <code>$('input[name=email]');</code></li> <li>\u591a\u9879\u9009\u62e9\u5668, <code>,</code>, \u4f8b\u5982 <code>$('p.red,p.green');</code></li> <li>\u5c42\u6b21\u9009\u62e9 <code>$('form[name=upload] input');</code></li> <li>\u5b50\u9009\u62e9\u5668\u9650\u5236\u4e3a\u7236\u5b50\u5173\u7cfb <code>$('ul.lang&gt;li.lang-javascript');</code></li> </ul> </li> <li>\u8fc7\u6ee4<ul> <li><code>:</code> \u540e\u52a0\u7b5b\u9009\u6761\u4ef6</li> <li><code>first-child, last-child, nth-child(2), nth-child(even)</code></li> <li>visible, hidden, \u5982 <code>$('div:visible');</code></li> <li>\u8868\u5355\u9009\u62e9\u5668<ul> <li>:input, :file, :checkbox, :radio, :focus, :checked, :enabled/disabled</li> </ul> </li> </ul> </li> </ul> </li> <li>\u64cd\u4f5c DOM<ul> <li>\u4fee\u6539\u6587\u672c: jQuery\u5bf9\u8c61\u7684<code>text()</code>\u548c<code>html()</code>\u65b9\u6cd5</li> <li>\u4fee\u6539 CSS<ul> <li>\u76f4\u63a5\u5199\u6539 style \u53ef\u4ee5\u7528 <code>css('name', 'value')</code> \u65b9\u6cd5</li> <li>\u6216\u8005\u4fee\u6539 class \u53ef\u4ee5 <code>hasClass(), addClass(), removeClass()</code></li> </ul> </li> </ul> </li> <li>\u4e8b\u4ef6<ul> <li>\u7ed1\u5b9a\u8868\u5355\u63d0\u4ea4 <code>$('#testForm).on('submit', function () {})</code></li> <li>\u5bf9\u4e8e DOM ready \u540e\u7ed1\u5b9a, <code>$(document).on('ready', function () {})</code> \u53ef\u4ee5\u7b80\u5199\u4e3a <code>$(document).ready(f)</code> \u6216\u8005\u76f4\u63a5 <code>$(f)</code></li> <li>\u8981\u53d6\u6d88\u7ed1\u5b9a\u4e00\u4e2a\u7279\u5b9a\u7684\u56de\u8c03\u51fd\u6570, <code>off('click', function)</code></li> <li>\u4e8b\u4ef6\u89e6\u53d1\u6761\u4ef6: <code>trigger('change')</code> \u6216\u8005 \u7b80\u5199\u6210\u65e0\u53c2\u6570\u7684<code>change()</code>\u65b9\u6cd5 (\u6a21\u62df\u7528\u6237\u6539\u52a8 input \u6587\u5b57)</li> </ul> </li> <li>AJAX<ul> <li>\u53ef\u4ee5\u901a\u8fc7 <code>$.ajax(url, settings)</code> \u5904\u7406 AJAX \u8bf7\u6c42<ul> <li>settings \u4e2d\u7684\u9009\u9879\u5305\u62ec <code>method, contentType, data, headers, dataType</code> \u7b49</li> <li>\u901a\u8fc7 <code>done, fail, always</code> \u65b9\u6cd5\u6765\u8fdb\u884c\u7c7b\u4f3c Promise \u7684\u5904\u7406</li> </ul> </li> <li>\u5bf9\u4e8e\u5e38\u7528\u7684\u8bf7\u6c42, \u53ef\u4ee5\u7b80\u5199\u6210 <code>$.get(rul, paras)</code> <code>$.post(url, paras)</code><ul> <li><code>$.getJSON(url, paras)</code> \u5feb\u901f\u901a\u8fc7GET\u83b7\u53d6\u4e00\u4e2aJSON\u5bf9\u8c61</li> </ul> </li> </ul> </li> <li>jQuery \u63d2\u4ef6<ul> <li>\u7ed9 <code>$.fn</code> \u7ed1\u5b9a\u51fd\u6570\uff0c\u5b9e\u73b0\u63d2\u4ef6\u7684\u4ee3\u7801\u903b\u8f91</li> <li>\u63d2\u4ef6\u51fd\u6570\u8981\u6709\u9ed8\u8ba4\u503c\uff0c\u7ed1\u5b9a\u5728 <code>$.fn.&lt;pluginName&gt;.defaults</code> \u4e0a<ul> <li>\u901a\u8fc7 <code>$.extend(target, obj1, obj2, ...)</code> \u6765\u5408\u5e76\u540e\u7eed obj \u7684\u5c5e\u6027\u5230 target \u4e2d</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#_6","title":"\u9519\u8bef\u5904\u7406","text":"<ul> <li><code>try ... catch(e) ... finally</code></li> <li><code>e instanceof TypeError</code> \u5224\u65ad\u9519\u8bef\u7c7b\u578b; <code>e.message</code></li> <li><code>throw new Error('\u8f93\u5165\u9519\u8bef');</code></li> <li>\u5f02\u6b65\u9519\u8bef\u5904\u7406: \u9519\u8bef\u7684\u5904\u7406\u5e94\u8be5\u5728\u56de\u8c03\u51fd\u6570\u5185\u90e8\u5b9e\u73b0</li> </ul>"},{"location":"code/JavaScript/js-mindmap/#underscore","title":"underscore","text":"<ul> <li>\u63d0\u4f9b\u4e86\u4e00\u5957\u5b8c\u5584\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u63a5\u53e3\uff0c\u8ba9\u6211\u4eec\u66f4\u65b9\u4fbf\u5730\u5728JavaScript\u4e2d\u5b9e\u73b0\u51fd\u6570\u5f0f\u7f16\u7a0b</li> <li>Collections: \u96c6\u5408\u7c7b\u662f\u6307Array\u548cObject<ul> <li>\u5f53\u4f5c\u7528\u4e8eObject\u65f6\uff0c\u4f20\u5165\u7684\u51fd\u6570\u4e3a<code>function (value, key)</code></li> <li>map</li> <li>every, some</li> <li>max, min</li> <li>groupBy \u628a\u96c6\u5408\u7684\u5143\u7d20\u6309\u7167key\u5f52\u7c7b\uff0ckey\u7531\u4f20\u5165\u7684\u51fd\u6570\u8fd4\u56de</li> <li>shuffle, sample</li> </ul> </li> <li>Array<ul> <li>first, last</li> <li>flatten</li> <li>zip, unzip</li> <li>object<ul> <li><code>_.object(names, scores);</code> \u4ee5 names \u6570\u7ec4\u4f5c\u4e3akey scores \u6570\u7ec4\u4f5c\u4e3avalue</li> </ul> </li> <li><code>range</code><ul> <li><code>_.range(0, 30, 5);</code> \u4ece0\u5f00\u59cb\u5c0f\u4e8e30\uff0c\u6b65\u957f5</li> </ul> </li> </ul> </li> <li>Functions<ul> <li>bind</li> <li><code>partial</code><ul> <li><code>var cube = _.partial(Math.pow, _, 3);</code> \u8ba1\u7b97\u4e09\u6b21\u65b9, \u5176\u4e2d <code>_</code> \u5360\u4f4d\u7b26</li> </ul> </li> <li><code>memorize</code></li> <li>once</li> <li>delay</li> </ul> </li> <li>Object<ul> <li><code>keys</code>, allKeys</li> <li>values</li> <li>mapObject</li> <li>invert \u8c03\u6362 key, value</li> <li><code>extend</code>, extendOwn \u628a\u591a\u4e2aobject\u7684key-value\u5408\u5e76\u5230\u7b2c\u4e00\u4e2aobject\u5e76\u8fd4\u56de; \u540e\u8005\u83b7\u53d6\u5c5e\u6027\u65f6\u5ffd\u7565\u4ece\u539f\u578b\u94fe\u7ee7\u627f\u4e0b\u6765\u7684\u5c5e\u6027</li> <li>clone \u6d45\u590d\u5236</li> <li><code>isEqual</code> \u6df1\u5ea6\u6bd4\u8f83</li> </ul> </li> <li>Chaining<ul> <li>_.chain([1, 4, 9, 16, 25]).map(Math.sqrt).value()</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#node","title":"Node","text":"<ul> <li>CommonJS \u89c4\u8303<ul> <li><code>const greet = require('./hello');</code></li> <li><code>module.exports = variable;</code></li> </ul> </li> <li>Node \u5bf9\u8c61<ul> <li>global<ul> <li>\u5224\u65ad\u73af\u5883: <code>if (typeof(window) === 'undefined')</code> \u5219\u662f node \u73af\u5883</li> </ul> </li> <li>process<ul> <li>\u5982\u679c\u6211\u4eec\u54cd\u5e94<code>exit</code>\u4e8b\u4ef6\uff0c\u53ef\u4ee5 <code>process.on('exit', function (code) {}</code></li> </ul> </li> </ul> </li> <li>fs \u6a21\u5757<ul> <li>\u5f02\u6b65\u8bfb\u53d6<ul> <li><code>fs.readFile('sample.txt', 'utf-8', function (err, data) {})</code></li> </ul> </li> <li>\u540c\u6b65\u8bfb\u53d6<ul> <li>\u6ca1\u6709\u56de\u8c03\u51fd\u6570 <code>var data = fs.readFileSync('sample.txt', 'utf-8');</code></li> </ul> </li> <li>Buffer<ul> <li>\u5f53\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u65f6\uff0c\u4e0d\u4f20\u5165\u6587\u4ef6\u7f16\u7801\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u7684<code>data</code>\u53c2\u6570\u5c06\u8fd4\u56de\u4e00\u4e2a<code>Buffer</code>\u5bf9\u8c61</li> <li>\u4e0e\u5b57\u7b26\u4e32\u8f6c\u6362: <code>data.toString('utf-8')</code> \u548c <code>Buffer.from(text, 'utf-8')</code></li> </ul> </li> <li>stat \u65b9\u6cd5<ul> <li><code>fs.stat()</code>\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a<code>Stat</code>\u5bf9\u8c61</li> <li>\u5c5e\u6027: <code>isFile, isDirectory</code>, <code>size</code>, <code>birthtime, mtime</code></li> </ul> </li> </ul> </li> <li>stream \u6a21\u5757<ul> <li>\u8bfb\u53d6<ul> <li><code>var rs = fs.createReadStream('sample.txt', 'utf-8');</code></li> <li>\u6d41\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u53ea\u9700\u8981\u54cd\u5e94\u6d41\u7684\u4e8b\u4ef6\u5c31\u53ef\u4ee5\u4e86\uff1a<code>data</code> \u4e8b\u4ef6\u8868\u793a\u6d41\u7684\u6570\u636e\u5df2\u7ecf\u53ef\u4ee5\u8bfb\u53d6\u4e86\uff0c<code>end</code> \u4e8b\u4ef6\u8868\u793a\u8fd9\u4e2a\u6d41\u5df2\u7ecf\u5230\u672b\u5c3e\u4e86\uff0c\u6ca1\u6709\u6570\u636e\u53ef\u4ee5\u8bfb\u53d6\u4e86\uff0c<code>error</code> \u4e8b\u4ef6\u8868\u793a\u51fa\u9519\u4e86</li> <li><code>rs.on('data', function (chunk) {...}</code></li> </ul> </li> <li>pipe<ul> <li>\u5728Node.js\u4e2d\uff0c<code>Readable</code>\u6d41\u6709\u4e00\u4e2a<code>pipe()</code>\u65b9\u6cd5, \u53ef\u4ee5\u8fdb\u884c\u590d\u5236. <code>rs.pipe(ws);</code></li> </ul> </li> </ul> </li> <li>http \u6a21\u5757<ul> <li>\u63d0\u4f9b\u7684<code>request</code>\u548c<code>response</code>\u5bf9\u8c61</li> <li>\u521b\u5efa <code>var server = http.createServer(function (request, response) {}</code></li> <li>\u7aef\u53e3\u76d1\u542c <code>server.listen(8080);</code></li> <li><code>url</code> \u6a21\u5757: \u901a\u8fc7<code>parse()</code> \u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u4e00\u4e2a<code>Url</code>\u5bf9\u8c61</li> </ul> </li> <li>crypto \u6a21\u5757<ul> <li>hash, Hmac, AES, Diffie-Hellman, RSA</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#web","title":"Web \u5f00\u53d1","text":"<ul> <li>\u5982\u4f55\u8fd0\u884c?<ul> <li>\u76f4\u63a5 node. <code>node app.js</code></li> <li>npm <code>npm start</code>. \u9700\u8981\u5728 <code>package.json</code> \u4e2d\u7684 scripts \u5b9a\u4e49\u5bf9\u5e94\u7684 start \u547d\u4ee4 (\u4e5f\u662f node)</li> <li>VSCode \u4e2d\u8fd0\u884c, \u6216\u914d\u7f6e debug</li> </ul> </li> <li>koa<ul> <li>koa middleware<ul> <li><code>app.use(async (ctx, next) =&gt; {}</code> (\u6bcf\u4e2aasync\u51fd\u6570\u662f middleware)</li> <li>\u53c2\u6570<code>ctx</code>\u662f\u7531koa\u4f20\u5165\u7684\u5c01\u88c5\u4e86request\u548cresponse\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b83\u8bbf\u95eerequest\u548cresponse\uff0c<code>next</code>\u662fkoa\u4f20\u5165\u7684\u5c06\u8981\u5904\u7406\u7684\u4e0b\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570</li> </ul> </li> <li><code>koa-router</code> \u5904\u7406 URL<ul> <li>\u4f7f\u7528<code>router.get('/path', async fn)</code>\u6765\u6ce8\u518c\u4e00\u4e2aGET\u8bf7\u6c42\u3002</li> <li>\u53ef\u4ee5\u5728\u8bf7\u6c42\u8def\u5f84\u4e2d\u4f7f\u7528\u5e26\u53d8\u91cf\u7684<code>/hello/:name</code>\uff0c\u53d8\u91cf\u53ef\u4ee5\u901a\u8fc7<code>ctx.params.name</code>\u8bbf\u95ee\u3002</li> </ul> </li> <li><code>koa-bodyparser</code> \u89e3\u6790 body<ul> <li><code>app.use(bodyParser());</code></li> <li>\u89e3\u6790\u53c2\u6570\uff0c\u628a\u89e3\u6790\u540e\u7684\u53c2\u6570\u7ed1\u5b9a\u5230<code>ctx.request.body</code>\u4e2d</li> </ul> </li> <li>Middleware<ul> <li>\u4ee3\u7801\u91cd\u6784. \u4f8b\u5982\u5bf9\u4e8e URL\u5904\u7406\u7684\u4ee3\u7801\u653e\u5728\u540c\u4e00\u4e2a controllers \u6587\u4ef6\u5939\u4e2d, \u7528\u4e13\u95e8\u5199\u4e00\u4e2a\u51fd\u6570\u626b\u63cf<code>controllers</code>\u76ee\u5f55\u548c\u521b\u5efa<code>router</code></li> </ul> </li> </ul> </li> <li>Nunjucks: \u6a21\u677f\u5f15\u64ce<ul> <li>\u4f5c\u7528: \u7279\u6b8a\u5b57\u7b26\u8f6c\u4e49, \u683c\u5f0f\u5316, if, for \u7b49\u903b\u8f91</li> <li>\u5bf9\u4e8e Python \u4e2d jinja2 \u7684 js \u5b9e\u73b0</li> <li>\u4f7f\u7528\u5f88\u65b9\u4fbf: <code>var s = env.render('hello.html', { name: 'Tom' });</code></li> <li>block, \u7ee7\u627f <code>extends</code></li> </ul> </li> <li>mysql<ul> <li>sequelize, mysql2 \u5305</li> <li>\u521b\u5efa sequelize \u5bf9\u8c61\u5b9e\u4f8b, \u7136\u540e\u5b9a\u4e49\u6a21\u578b (\u6570\u636e\u5e93\u8868)</li> <li>\u64cd\u4f5c<ul> <li><code>create</code> \u63d2\u5165\u6570\u636e</li> <li><code>findAll</code> \u67e5\u8be2<ul> <li>\u5bf9\u67e5\u8be2\u5230\u7684\u5b9e\u4f8b\u8c03\u7528 <code>save, destory</code></li> </ul> </li> </ul> </li> </ul> </li> <li>mocha: \u5355\u5143\u6d4b\u8bd5<ul> <li>\u5982\u4f55\u6267\u884c\u6d4b\u8bd5?<ul> <li>\u65b9\u6cd5\u4e00 <code>node_modules\\mocha\\bin\\mocha</code></li> <li>\u65b9\u6cd5\u4e8c\uff0c\u5728 <code>package.json</code> \u4e2d\u6dfb\u52a0 scripts <code>\"test\": \"mocha\"</code>, \u7136\u540e <code>npm test</code> \u5373\u53ef</li> <li>\u65b9\u6cd5\u4e09\uff0c\u914d\u7f6e VS Code, <code>.vscode/launch.json</code>, \u5b9a\u4e49 <code>\"program\": \"${workspaceRoot}/node_modules/mocha/bin/mocha\"</code> \u4ee5\u53ca <code>\"type\": \"node\",</code> \u2014\u2014 \u5176\u5b9e\u5c31\u662f\u8fd0\u884c <code>node node_modules/mocha/bin/mocha</code></li> </ul> </li> <li>assert \u5305: <code>const assert = require('assert');</code></li> <li>\u5982\u679c\u8981\u6d4b\u8bd5\u540c\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u4f20\u5165\u65e0\u53c2\u6570\u51fd\u6570\u5373\u53ef<ul> <li><code>it(' description', function () {}</code></li> <li>\u7136\u540e\u5728\u5176\u4e2d assert \u5224\u65ad\u5373\u53ef</li> </ul> </li> <li>\u5982\u679c\u8981\u6d4b\u8bd5\u5f02\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u8981\u4f20\u5165\u7684\u51fd\u6570\u9700\u8981\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u901a\u5e38\u547d\u540d\u4e3a<code>done</code><ul> <li><code>it(' description', function (done) {}</code></li> <li>\u7136\u540e\u5728\u5176\u4e2d\u8fd0\u884c\u4ee3\u6d4b\u8bd5\u7684\u51fd\u6570 f</li> <li>\u624b\u52a8\u8c03\u7528<code>done()</code>\u8868\u793a\u6d4b\u8bd5\u6210\u529f\uff0c<code>done(err)</code>\u8868\u793a\u6d4b\u8bd5\u51fa\u9519</li> </ul> </li> <li>\u5bf9\u4e8e async \u51fd\u6570, \u66f4\u65b9\u4fbf\u7684\u662f\u76f4\u63a5\u5c06\u5176\u8f6c\u5316\u4e3a\u540c\u6b65\u51fd\u6570\u6d4b\u8bd5<ul> <li>\u4f8b\u5982, \u4f20\u5165 <code>async () =&gt; { assert.strictEqual(await f(), groundTruth) }</code></li> </ul> </li> <li>Http \u6d4b\u8bd5: <code>supertest</code> \u5305<ul> <li><code>request = require('supertest')</code></li> <li>\u4f7f\u7528 <code>let res = await request(server).get('/');</code> \u6784\u9020\u4e00\u4e2aGET\u8bf7\u6c42\uff0c\u53d1\u9001\u7ed9koa\u7684\u5e94\u7528\uff0c\u7136\u540e\u83b7\u5f97\u54cd\u5e94</li> <li>\u53ef\u4ee5\u624b\u52a8\u68c0\u67e5\u54cd\u5e94\u5bf9\u8c61\uff0c\u4f8b\u5982\uff0c<code>res.body</code>\uff0c\u8fd8\u53ef\u4ee5\u5229\u7528<code>supertest</code>\u63d0\u4f9b\u7684<code>expect()</code>\u66f4\u65b9\u4fbf\u5730\u65ad\u8a00\u54cd\u5e94\u7684HTTP\u4ee3\u7801\u3001\u8fd4\u56de\u5185\u5bb9\u548cHTTP\u5934\u3002\u65ad\u8a00HTTP\u5934\u65f6\u53ef\u7528\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f</li> </ul> </li> </ul> </li> <li>WebSocket<ul> <li>ws \u534f\u8bae</li> <li>koa \u548c ws \u5305\u53ef\u4ee5\u5171\u7528\u4e00\u4e2a\u7aef\u53e3, \u6bd4\u5982\u9ed8\u8ba4\u7684 3000. \u56e0\u4e3a koa \u5b9e\u9645\u4e0a\u8c03\u7528 Node\u6807\u51c6http\u6a21\u5757\u521b\u5efa\u7684 http.Server \u76d1\u542c\u7684, \u53ea\u662f\u628a\u54cd\u5e94\u51fd\u6570\u6ce8\u518c\u5230\u4e86\u5176\u4e2d, ws \u4e5f\u4e00\u6837, \u56e0\u6b64\u53ef\u4ee5\u7528\u4e00\u4e2a\u7aef\u53e3, \u6839\u636e\u534f\u8bae\u4e0d\u540c\u5206\u522b\u7531 koa \u548c ws \u5904\u7406.</li> <li>\u5982\u4f55\u8bc6\u522b\u7528\u6237\u8eab\u4efd?<ul> <li>\u603b\u4f53\u800c\u8a00, cookie \u662f\u4e00\u4e2a\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u76f8\u4e92\u914d\u5408\u7684\u8fc7\u7a0b. \u670d\u52a1\u5668\u521b\u5efa cookie, \u6d4f\u89c8\u5668\u4fdd\u5b58\u5e76\u5728\u4e4b\u540e\u7684\u8bf7\u6c42\u4e2d\u9644\u52a0 cookie; \u82e5\u8981\u5efa\u7acb ws \u94fe\u63a5\u4e5f\u7528 cookie \u5373\u53ef.</li> </ul> </li> <li>\u6848\u4f8b: \u804a\u5929\u5ba4. \u670d\u52a1\u5668\u7ef4\u62a4\u4e00\u7ec4 ws \u8fde\u63a5, \u6bcf\u5f53\u6536\u5230\u4e00\u6761\u6d88\u606f\u4e4b\u540e, \u5e7f\u64ad\u5230\u6240\u6709\u8fde\u63a5.</li> </ul> </li> <li>REST<ul> <li>\u83b7\u53d6\u8d44\u6e90\u7528 GET, \u65b0\u5efa\u3001\u66f4\u65b0\u3001\u5220\u9664 \u5206\u522b\u7528 POST, PUT, DELETE \u8bf7\u6c42, \u5185\u5bb9\u653e\u5728 body \u4e2d (<code>Content-Type</code> \u4e3a <code>application/json</code>)</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-mindmap/#mvvm","title":"MVVM","text":"<ul> <li>MVVM \u7684\u6838\u5fc3\u601d\u8def: \u5173\u6ce8Model\u7684\u53d8\u5316\uff0c\u8ba9MVVM\u6846\u67b6\u53bb\u81ea\u52a8\u66f4\u65b0DOM\u7684\u72b6\u6001.</li> <li>ViewModel \u8d1f\u8d23\u628aModel\u7684\u6570\u636e\u540c\u6b65\u5230View\u663e\u793a\u51fa\u6765\uff0c\u8fd8\u8d1f\u8d23\u628aView\u7684\u4fee\u6539\u540c\u6b65\u56deModel</li> <li>\u4f18\u52bf: \u5904\u7406\u524d\u7aef\u903b\u8f91\u6bd4\u8f83\u590d\u6742\u7684\u9875\u9762, \u4f46\u662f\u4e0d\u9002\u5408\u5c55\u793a\u6570\u636e\u7684\u9875\u9762, \u4f8b\u5982\u9700\u8981 SEO (Search Engine Optimization) \u7684\u9875\u9762</li> <li>Vue<ul> <li>\u8bed\u6cd5<ul> <li><code>var vm = new Vue({})</code> \u5176\u4e2d <code>el</code> \u6307\u5b9a\u7ed1\u5b9a\u8282\u70b9, <code>data</code> \u5b9a\u4e49\u4e86\u6570\u636e/\u6a21\u578b</li> </ul> </li> <li>Vue \u5355\u5411\u7ed1\u5b9a: v-text</li> <li>Vue \u53cc\u5411\u7ed1\u5b9a<ul> <li><code>&lt;form id=\"vm\" v-on:submit.prevent=\"register\"&gt;</code></li> </ul> </li> <li>\u540c\u6b65DOM\u7ed3\u6784: v-for<ul> <li>\u6ce8\u610f, \u53ef\u4ee5\u76d1\u542c\u6570\u7ec4\u7684 <code>splice</code>\u3001<code>push</code>\u3001<code>unshift</code> \u7b49\u65b9\u6cd5\u8c03\u7528, \u4f46\u4e0d\u80fd\u76d1\u542c\u6570\u7ec4\u6574\u4f53\u7684\u8d4b\u503c</li> </ul> </li> <li>\u96c6\u6210 API: <code>vue-resource</code> \u5305<ul> <li>\u53ef\u4ee5\u7ed9VM\u5bf9\u8c61\u52a0\u4e0a\u4e00\u4e2a<code>$resource</code>\u5c5e\u6027</li> <li><code>that.$resource('/api/todos').get().then(function (resp){}, function (resp){})</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/","title":"JavaScript note","text":"<ul> <li>\u5ed6\u96ea\u5cf0 https://www.liaoxuefeng.com/wiki/1022910821149312/1023025235359040</li> <li>RUNOOB https://www.runoob.com/nodejs/nodejs-tutorial.html</li> </ul> <p>\u5176\u4ed6</p> <ul> <li>Node.js \u5165\u95e8\u6559\u7a0b http://nodejs.cn/learn</li> <li>npm \u5ed6\u96ea\u5cf0 Npm \u6a21\u5757\u5b89\u88c5\u673a\u5236</li> </ul>"},{"location":"code/JavaScript/js-note/#quick-start","title":"Quick Start","text":"<ul> <li>\u5c06 js \u4ee3\u7801\u653e\u5728\u7f51\u9875\u4e2d, \u6216\u8005\u4e13\u95e8\u7684 js \u6587\u4ef6\u4e2d, \u5f15\u5165<ul> <li>\u5728 script tag \u4e2d\u4e13\u95e8\u5199 type, \u4f8b\u5982 <code>&lt;script type=\"text/javascript\"&gt;</code>, \u662f\u6ca1\u6709\u5fc5\u8981\u7684, \u56e0\u4e3a\u9ed8\u8ba4\u7684type\u5c31\u662fJavaScript</li> </ul> </li> <li>\u4f7f\u7528 VSCode \u7f16\u8f91\u8fd0\u884c, \u53c2\u89c1 here</li> <li>\u8c03\u8bd5: \u63a7\u5236\u53f0(Console)<ul> <li><code>console.log('Hello');</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#_1","title":"\u6570\u636e\u7c7b\u578b\u548c\u53d8\u91cf","text":"<ul> <li>Number<ul> <li>JavaScript\u4e0d\u533a\u5206\u6574\u6570\u548c\u6d6e\u70b9\u6570\uff0c\u7edf\u4e00\u7528Number\u8868\u793a</li> <li><code>NaN</code>, <code>Infinity</code></li> </ul> </li> <li>\u5b57\u7b26\u4e32<ul> <li>\u5b57\u7b26\u4e32\u662f\u4ee5\u5355\u5f15\u53f7\u2019\u6216\u53cc\u5f15\u53f7\u201d\u62ec\u8d77\u6765\u7684\u4efb\u610f\u6587\u672c\uff0c\u6bd4\u5982\u2019abc\u2019\uff0c\u201dxyz\u201d\u7b49\u7b49</li> </ul> </li> <li>\u5e03\u5c14\u503c<ul> <li>&amp;&amp;, ||, <code>!</code></li> </ul> </li> <li>\u6bd4\u8f83\u8fd0\u7b97\u7b26<ul> <li><code>==</code> \u6bd4\u8f83\uff0c\u5b83\u4f1a\u81ea\u52a8\u8f6c\u6362\u6570\u636e\u7c7b\u578b\u518d\u6bd4\u8f83</li> <li><code>===</code> \u6bd4\u8f83\uff0c\u5b83\u4e0d\u4f1a\u81ea\u52a8\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u5982\u679c\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u8fd4\u56defalse\uff0c\u5982\u679c\u4e00\u81f4\uff0c\u518d\u6bd4\u8f83</li> <li>isNaN(NaN)</li> <li>\u6d6e\u70b9\u6570\u6bd4\u8f83 <code>Math.abs()</code></li> </ul> </li> <li>null \u548c  undefined<ul> <li>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u5e94\u8be5\u7528null\u3002undefined\u4ec5\u4ec5\u5728\u5224\u65ad\u51fd\u6570\u53c2\u6570\u662f\u5426\u4f20\u9012\u7684\u60c5\u51b5\u4e0b\u6709\u7528\u3002</li> </ul> </li> <li>\u6570\u7ec4<ul> <li>\u51fa\u4e8e\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u8003\u8651\uff0c\u5f3a\u70c8\u5efa\u8bae\u76f4\u63a5\u4f7f\u7528[]\u3002</li> <li>\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528 <code>new Array(1, 2, 3);</code></li> </ul> </li> <li>\u5bf9\u8c61<ul> <li>JavaScript\u7684\u5bf9\u8c61\u662f\u4e00\u7ec4\u7531\u952e-\u503c\u7ec4\u6210\u7684\u65e0\u5e8f\u96c6\u5408. JavaScript\u5bf9\u8c61\u7684\u952e\u90fd\u662f\u5b57\u7b26\u4e32\u7c7b\u578b</li> </ul> </li> <li>\u53d8\u91cf<ul> <li>\u53d8\u91cf\u540d\u662f\u5927\u5c0f\u5199\u82f1\u6587\u3001\u6570\u5b57\u3001$\u548c_\u7684\u7ec4\u5408\uff0c\u4e14\u4e0d\u80fd\u7528\u6570\u5b57\u5f00\u5934</li> </ul> </li> <li>strict\u6a21\u5f0f<ul> <li>\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u6ca1\u6709\u901a\u8fc7var\u7533\u660e\u5c31\u88ab\u4f7f\u7528\uff0c\u90a3\u4e48\u8be5\u53d8\u91cf\u5c31\u81ea\u52a8\u88ab\u7533\u660e\u4e3a\u5168\u5c40\u53d8\u91cf</li> <li>\u4e3a\u4e86\u4fee\u8865JavaScript\u8fd9\u4e00\u4e25\u91cd\u8bbe\u8ba1\u7f3a\u9677\uff0cECMA \u5728\u540e\u7eed\u89c4\u8303\u4e2d\u63a8\u51fa\u4e86strict\u6a21\u5f0f\uff0c\u5728strict\u6a21\u5f0f\u4e0b\u8fd0\u884c\u7684JavaScript\u4ee3\u7801\uff0c\u5f3a\u5236\u901a\u8fc7var\u7533\u660e\u53d8\u91cf</li> <li>\u5c1d\u8bd5\u5728 console \u4e2d\u8fd0\u884c <code>'use strict';aa = 11;</code> \u4f1a\u62a5\u9519</li> </ul> </li> <li>\u7c7b\u578b\u5224\u65ad<ul> <li><code>typeof 76</code> \u8fd4\u56de\u7c7b\u578b, <code>6.7 instanceof Number</code> \u5224\u65ad\u662f\u5426\u4e3a\u8be5\u7c7b\u578b</li> </ul> </li> <li>\u4f4d\u8fd0\u7b97<ul> <li><code>&amp;, |, ^, ~</code></li> <li><code>&lt;&lt;, &gt;&gt;, &gt;&gt;&gt;</code>, \u5176\u4e2d <code>&gt;&gt;&gt;</code> \u4e3a\u96f6\u586b\u5145\u53f3\u79fb, <code>&gt;&gt;</code> \u662f\u6b63\u5e38\u5e26\u7b26\u53f7\u7684</li> </ul> </li> </ul> <pre><code>var length = 7;                             // \u6570\u5b57\nvar lastName = \"Gates\";                      // \u5b57\u7b26\u4e32\nvar cars = [\"Porsche\", \"Volvo\", \"BMW\"];         // \u6570\u7ec4\nvar x = {firstName:\"Bill\", lastName:\"Gates\"};    // \u5bf9\u8c61 \n</code></pre>"},{"location":"code/JavaScript/js-note/#_2","title":"\u6bd4\u8f83\u8fd0\u7b97\u7b26","text":"<pre><code>false == 0; // true\nfalse === 0; // false\uff0c\u4f7f\u7528 === \u4e0d\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\n\n// \u6ce8\u610f\u7279\u4f8b NaN\nNaN === NaN; // false\nisNaN(NaN); // true\n\n// \u6d6e\u70b9\u6570\u6bd4\u8f83\n1 / 3 === (1 - 2 / 3); // false\nMath.abs(1 / 3 - (1 - 2 / 3)) &lt; 0.0000001; // true\n</code></pre>"},{"location":"code/JavaScript/js-note/#null-undefined","title":"null, undefined","text":"<ul> <li>null\u8868\u793a\u4e00\u4e2a\u201c\u7a7a\u201d\u7684\u503c\uff0c\u5b83\u548c0\u4ee5\u53ca\u7a7a\u5b57\u7b26\u4e32\u2019\u2018\u4e0d\u540c\uff0c0\u662f\u4e00\u4e2a\u6570\u503c\uff0c\u2019\u2018\u8868\u793a\u957f\u5ea6\u4e3a0\u7684\u5b57\u7b26\u4e32\uff0c\u800cnull\u8868\u793a\u201c\u7a7a\u201d\u3002</li> <li>\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d\uff0c\u4e5f\u6709\u7c7b\u4f3cJavaScript\u7684null\u7684\u8868\u793a\uff0c\u4f8b\u5982Java\u4e5f\u7528null\uff0cSwift\u7528nil\uff0cPython\u7528None\u8868\u793a\u3002\u4f46\u662f\uff0c\u5728JavaScript\u4e2d\uff0c\u8fd8\u6709\u4e00\u4e2a\u548cnull\u7c7b\u4f3c\u7684undefined\uff0c\u5b83\u8868\u793a\u201c\u672a\u5b9a\u4e49\u201d\u3002</li> <li>JavaScript\u7684\u8bbe\u8ba1\u8005\u5e0c\u671b\u7528null\u8868\u793a\u4e00\u4e2a\u7a7a\u7684\u503c\uff0c\u800c<code>undefined</code>\u8868\u793a\u503c\u672a\u5b9a\u4e49\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u8fd9\u5e76\u6ca1\u6709\u4ec0\u4e48\u5375\u7528\uff0c\u533a\u5206\u4e24\u8005\u7684\u610f\u4e49\u4e0d\u5927\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u5e94\u8be5\u7528n <code>ull</code>\u3002<code>undefined</code> \u4ec5\u4ec5\u5728\u5224\u65ad\u51fd\u6570\u53c2\u6570\u662f\u5426\u4f20\u9012\u7684\u60c5\u51b5\u4e0b\u6709\u7528\u3002</li> </ul> <pre><code>typeof undefined              // undefined\ntypeof null                   // object\nnull === undefined            // false\nnull == undefined             // true\n</code></pre>"},{"location":"code/JavaScript/js-note/#_3","title":"\u6570\u7ec4","text":"<pre><code>new Array(1, 2, 3); // \u521b\u5efa\u4e86\u6570\u7ec4[1, 2, 3]\n\nvar arr = [1, 2, 3.14, 'Hello', null, true];\narr[0]; // \u8fd4\u56de\u7d22\u5f15\u4e3a0\u7684\u5143\u7d20\uff0c\u53731\narr[5]; // \u8fd4\u56de\u7d22\u5f15\u4e3a5\u7684\u5143\u7d20\uff0c\u5373true\narr[6]; // \u7d22\u5f15\u8d85\u51fa\u4e86\u8303\u56f4\uff0c\u8fd4\u56deundefined\n</code></pre>"},{"location":"code/JavaScript/js-note/#_4","title":"\u5bf9\u8c61","text":"<pre><code>var person = {\n name: 'Bob',\n age: 20,\n tags: ['js', 'web', 'mobile'],\n city: 'Beijing',\n hasCar: true,\n zipcode: null\n};\n\nperson.name; // 'Bob'\nperson.zipcode; // null\n</code></pre>"},{"location":"code/JavaScript/js-note/#_5","title":"\u53d8\u91cf","text":"<p>\u53d8\u91cf\u5728JavaScript\u4e2d\u5c31\u662f\u7528\u4e00\u4e2a\u53d8\u91cf\u540d\u8868\u793a\uff0c\u53d8\u91cf\u540d\u662f\u5927\u5c0f\u5199\u82f1\u6587\u3001\u6570\u5b57\u3001$\u548c_\u7684\u7ec4\u5408\uff0c\u4e14\u4e0d\u80fd\u7528\u6570\u5b57\u5f00\u5934\u3002\u53d8\u91cf\u540d\u4e5f\u4e0d\u80fd\u662fJavaScript\u7684\u5173\u952e\u5b57\uff0c\u5982if\u3001while\u7b49\u3002\u7533\u660e\u4e00\u4e2a\u53d8\u91cf\u7528var\u8bed\u53e5\u3002</p> <pre><code>var a; // \u7533\u660e\u4e86\u53d8\u91cfa\uff0c\u6b64\u65f6a\u7684\u503c\u4e3aundefined\nvar $b = 1; // \u7533\u660e\u4e86\u53d8\u91cf$b\uff0c\u540c\u65f6\u7ed9$b\u8d4b\u503c\uff0c\u6b64\u65f6$b\u7684\u503c\u4e3a1\nvar s_007 = '007'; // s_007\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\nvar Answer = true; // Answer\u662f\u4e00\u4e2a\u5e03\u5c14\u503ctrue\nvar t = null; // t\u7684\u503c\u662fnull\n\n// \u52a8\u6001\u8bed\u8a00\uff08Java \u662f\u9759\u6001\u7684\uff09\nvar a = 123; // a\u7684\u503c\u662f\u6574\u6570123\na = 'ABC'; // a\u53d8\u4e3a\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"code/JavaScript/js-note/#_6","title":"\u5b57\u7b26\u4e32","text":"<p>JavaScript \u5b57\u7b26\u4e32\u53c2\u8003\u624b\u518c\u3002</p> <ul> <li>JavaScript\u7684\u5b57\u7b26\u4e32\u5c31\u662f\u7528\u2019\u2018\u6216\u201d\u201c\u62ec\u8d77\u6765\u7684\u5b57\u7b26\u8868\u793a<ul> <li>ASCII\u5b57\u7b26\u53ef\u4ee5\u4ee5 <code>\\x##</code> \u5f62\u5f0f\u7684\u5341\u516d\u8fdb\u5236\u8868\u793a</li> <li>\u8fd8\u53ef\u4ee5\u7528 <code>\\u####</code> \u8868\u793a\u4e00\u4e2aUnicode\u5b57\u7b26</li> </ul> </li> <li>ES6\u6807\u51c6\u65b0\u589e\u4e86\u4e00\u79cd\u591a\u884c\u5b57\u7b26\u4e32\u7684\u8868\u793a\u65b9\u6cd5\uff0c\u7528\u53cd\u5f15\u53f7 `\u2026` \u8868\u793a</li> <li>\u6a21\u677f\u5b57\u7b26\u4e32, <code>${name}</code> \u5f15\u7528\u53d8\u91cf, \u6ce8\u610f\u9700\u8981 ES6 \u7684\u53cd\u5f15\u53f7\u8bed\u6cd5</li> <li>\u64cd\u4f5c\u5b57\u7b26\u4e32<ul> <li>\u6ce8\u610f\u5b57\u7b26\u4e32\u4e0d\u53ef\u53d8, \u4e5f\u5373 <code>s[0] = 'X';</code> \u4e0d\u5f71\u54cd s</li> <li>toUpperCase, toLowerCase</li> <li>indexOf</li> <li>substring</li> </ul> </li> </ul> <pre><code>'I\\'m \\\"OK\\\"!';\n'\\x41'; // \u5b8c\u5168\u7b49\u540c\u4e8e 'A'\n'\\u4e2d\\u6587'; // \u5b8c\u5168\u7b49\u540c\u4e8e '\u4e2d\u6587'\n\n// \u591a\u884c\u5b57\u7b26\u4e32\n`\u8fd9\u662f\u4e00\u4e2a\n\u591a\u884c\n\u5b57\u7b26\u4e32`;\n</code></pre>"},{"location":"code/JavaScript/js-note/#_7","title":"\u6a21\u677f\u5b57\u7b26\u4e32","text":"<pre><code>var name = '\u5c0f\u660e';\nvar age = 20;\nvar message = `\u4f60\u597d, ${name}, \u4f60\u4eca\u5e74${age}\u5c81\u4e86!`;  // \u6ce8\u610f\u4e00\u5b9a\u8981\u662f `` \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u624d\u652f\u6301\nalert(message);\n</code></pre> <pre><code>// str.length \u5c5e\u6027\nvar s = 'Hello, world!';\ns.length; // 13\n\n//\u5f15\u7528\nvar s = 'Hello, world!';\ns[0]; // 'H'\ns[6]; // ' '\ns[7]; // 'w'\ns[12]; // '!'\ns[13]; // undefined \u8d85\u51fa\u8303\u56f4\u7684\u7d22\u5f15\u4e0d\u4f1a\u62a5\u9519\uff0c\u4f46\u4e00\u5f8b\u8fd4\u56deundefined\n\n// \u5b57\u7b26\u4e32\u4e0d\u53ef\u53d8\uff0c\u4f46\u5bf9\u5176\u8d4b\u503c\u4e0d\u4f1a\u62a5\u9519\nvar s = 'Test';\ns[0] = 'X';\nalert(s); // s\u4ecd\u7136\u4e3a'Test'\n\n// toUpperCase, toLowerCase\nvar s = 'Hello';\ns.toUpperCase(); // \u8fd4\u56de'HELLO'\nvar lower = s.toLowerCase(); // \u8fd4\u56de'hello'\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cflower\n\n// indexOf\nvar s = 'hello, world';\ns.indexOf('world'); // \u8fd4\u56de7\ns.indexOf('World'); // \u6ca1\u6709\u627e\u5230\u6307\u5b9a\u7684\u5b50\u4e32\uff0c\u8fd4\u56de-1\n</code></pre>"},{"location":"code/JavaScript/js-note/#substring-substr","title":"substring(), substr()","text":"<p>substr \u548c substring \u7684\u533a\u522b\u4e4b\u5904\u5728\u4e8e\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u60f3\u8981\u5f97\u5230\u7684\u5b50\u4e32\u7684\u957f\u5ea6\u3002</p> <pre><code>// substring\nvar s = 'hello, world'\ns.substring(0, 5); // \u4ece\u7d22\u5f150\u5f00\u59cb\u52305\uff08\u4e0d\u5305\u62ec5\uff09\uff0c\u8fd4\u56de'hello'\ns.substring(7); // \u4ece\u7d22\u5f157\u5f00\u59cb\u5230\u7ed3\u675f\uff0c\u8fd4\u56de'world'\n</code></pre>"},{"location":"code/JavaScript/js-note/#replace","title":"replace()","text":"<pre><code>// \u9ed8\u8ba4\u5339\u914d\u4e00\u4e2a\nstr = \"Please visit Microsoft and Microsoft!\";\nvar n = str.replace(\"Microsoft\", \"W3School\");\n\n// \u5ffd\u7565\u5927\u5c0f\u5199\nstr = \"Please visit Microsoft!\";\nvar n = str.replace(/MICROSOFT/i, \"W3School\");\n\n// \u66ff\u6362\u6240\u6709\u5339\u914d\nstr = \"Please visit Microsoft and Microsoft!\";\nvar n = str.replace(/Microsoft/g, \"W3School\");\n</code></pre> <p>\u60a8\u5c06\u5728 JavaScript \u6b63\u5219\u8868\u8fbe\u5f0f\u8fd9\u4e00\u7ae0\u5b66\u5230\u66f4\u591a\u6709\u5173\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5185\u5bb9\u3002</p>"},{"location":"code/JavaScript/js-note/#trim","title":"trim()","text":"<pre><code>var str = \"       Hello World!        \";\nalert(str.trim());\n</code></pre> <p>\u8b66\u544a\uff1aInternet Explorer 8 \u6216\u66f4\u4f4e\u7248\u672c\u4e0d\u652f\u6301 trim() \u65b9\u6cd5\u3002 \u5982\u9700\u652f\u6301 IE 8\uff0c\u60a8\u53ef\u642d\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528 replace() \u65b9\u6cd5\u4ee3\u66ff\u3002 \u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u7684 replace \u65b9\u6848\u628a trim \u51fd\u6570\u6dfb\u52a0\u5230 JavaScript <code>String.prototype</code>\u3002</p> <pre><code>var str = \"       Hello World!        \";\nalert(str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, ''));\n\n\nif (!String.prototype.trim) {\n  String.prototype.trim = function () {\n return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n};\nvar str = \"       Hello World!        \";\nalert(str.trim());\n</code></pre>"},{"location":"code/JavaScript/js-note/#property-access","title":"\u5c5e\u6027\u8bbf\u95ee\uff08Property Access\uff09","text":"<p>ECMAScript 5 (2009) \u5141\u8bb8\u5bf9\u5b57\u7b26\u4e32\u7684\u5c5e\u6027\u8bbf\u95ee [ ]\uff1a</p> <p>\u4f7f\u7528\u5c5e\u6027\u8bbf\u95ee\u6709\u70b9\u4e0d\u592a\u9760\u8c31\uff1a</p> <ul> <li>\u4e0d\u9002\u7528 Internet Explorer 7 \u6216\u66f4\u65e9\u7684\u7248\u672c</li> <li>\u5b83\u8ba9\u5b57\u7b26\u4e32\u770b\u8d77\u6765\u50cf\u662f\u6570\u7ec4\uff08\u5176\u5b9e\u5e76\u4e0d\u662f\uff09</li> <li>\u5982\u679c\u627e\u4e0d\u5230\u5b57\u7b26\uff0c[ ]\u00a0\u8fd4\u56de\u00a0undefined\uff0c\u800c\u00a0charAt()\u00a0\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</li> <li>\u5b83\u662f\u53ea\u8bfb\u7684\u3002str[0] = \u201cA\u201d\u00a0\u4e0d\u4f1a\u4ea7\u751f\u9519\u8bef\uff08\u4f46\u4e5f\u4e0d\u4f1a\u5de5\u4f5c\uff01\uff09</li> </ul> <pre><code>var str = \"HELLO WORLD\";\nstr[0] = \"A\";             // \u4e0d\u4ea7\u751f\u9519\u8bef\uff0c\u4f46\u4e0d\u4f1a\u5de5\u4f5c\nstr[0];                   // \u8fd4\u56de H\n</code></pre>"},{"location":"code/JavaScript/js-note/#split","title":"split()","text":"<pre><code>var txt = \"Hello\";       // \u5b57\u7b26\u4e32\ntxt.split(\"\");           // \u5206\u9694\u4e3a\u5b57\u7b26\n</code></pre>"},{"location":"code/JavaScript/js-note/#js","title":"js \u6570\u7ec4","text":"<ul> <li>JavaScript\u7684 <code>Array</code> \u53ef\u4ee5\u5305\u542b\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff0c\u5e76\u901a\u8fc7\u7d22\u5f15\u6765\u8bbf\u95ee\u6bcf\u4e2a\u5143\u7d20\u3002<ul> <li>\u76f4\u63a5\u7ed9Array\u7684length\u8d4b\u4e00\u4e2a\u65b0\u7684\u503c\u4f1a\u5bfc\u81f4Array\u5927\u5c0f\u7684\u53d8\u5316</li> <li>\u5982\u679c\u901a\u8fc7\u7d22\u5f15\u8d4b\u503c\u65f6\uff0c\u7d22\u5f15\u8d85\u8fc7\u4e86\u8303\u56f4\uff0c\u540c\u6837\u4f1a\u5f15\u8d77Array\u5927\u5c0f\u7684\u53d8\u5316</li> </ul> </li> <li><code>includes</code> \u5224\u65ad\u662f\u5426\u5305\u542b</li> <li><code>indexOf</code> \u4e5f\u53ef\u4ee5, \u82e5\u627e\u4e0d\u5230\u8fd4\u56de -1</li> <li>slice<ul> <li>slice()\u5c31\u662f\u5bf9\u5e94String\u7684substring()\u7248\u672c</li> <li>\u5982\u679c\u4e0d\u7ed9slice()\u4f20\u9012\u4efb\u4f55\u53c2\u6570\uff0c\u5b83\u5c31\u4f1a\u4ece\u5934\u5230\u5c3e\u622a\u53d6\u6240\u6709\u5143\u7d20\u3002\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730 \u590d\u5236 \u4e00\u4e2aArray</li> </ul> </li> <li><code>push</code> \u548c pop; <code>unshift</code> \u548c shift<ul> <li><code>a.unshift(\"a\", \"b\");</code> \u4f20\u5165\u591a\u4e2a\u5143\u7d20, \u82e5\u8981\u62fc\u63a5\u4e24\u4e2a\u6570\u7ec4, \u7528 concat</li> </ul> </li> <li>sort<ul> <li>\u539f\u5730\u4fee\u6539</li> </ul> </li> <li>reverse \u53cd\u8f6c</li> <li>splice<ul> <li>splice()\u65b9\u6cd5\u662f\u4fee\u6539Array\u7684\u201c\u4e07\u80fd\u65b9\u6cd5\u201d\uff0c\u5b83\u53ef\u4ee5\u4ece\u6307\u5b9a\u7684\u7d22\u5f15\u5f00\u59cb\u5220\u9664\u82e5\u5e72\u5143\u7d20\uff0c\u7136\u540e\u518d\u4ece\u8be5\u4f4d\u7f6e\u6dfb\u52a0\u82e5\u5e72\u5143\u7d20</li> <li>\u4f8b\u5982, <code>arr.splice(2, 3, 'Google', 'Facebook');</code> \u8868\u793a \u4ece\u7d22\u5f152\u5f00\u59cb\u5220\u96643\u4e2a\u5143\u7d20,\u7136\u540e\u518d\u6dfb\u52a0\u4e24\u4e2a\u5143\u7d20</li> </ul> </li> <li>concat<ul> <li>\u8bf7\u6ce8\u610f\uff0cconcat()\u65b9\u6cd5\u5e76\u6ca1\u6709\u4fee\u6539\u5f53\u524dArray\uff0c\u800c\u662f\u8fd4\u56de\u4e86\u4e00\u4e2a\u65b0\u7684Array\u3002</li> <li>concat()\u65b9\u6cd5\u53ef\u4ee5\u63a5\u6536\u4efb\u610f\u4e2a\u5143\u7d20\u548cArray\uff0c\u5e76\u4e14\u81ea\u52a8\u628aArray\u62c6\u5f00\uff0c\u7136\u540e\u5168\u90e8\u6dfb\u52a0\u5230\u65b0\u7684Array\u91cc, \u4f8b\u5982 <code>arr.concat(1, 2, [3, 4]); // ['A', 'B', 'C', 1, 2, 3, 4]</code></li> </ul> </li> <li>join<ul> <li>\u628a\u5f53\u524dArray\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u7528\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u8fde\u63a5\u8d77\u6765\uff0c\u7136\u540e\u8fd4\u56de\u8fde\u63a5\u540e\u7684\u5b57\u7b26\u4e32; \u5982\u679cArray\u7684\u5143\u7d20\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u5c06\u81ea\u52a8\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u540e\u518d\u8fde\u63a5\u3002</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#base","title":"base","text":"<pre><code>// \u76f4\u63a5\u7ed9Array\u7684length\u8d4b\u4e00\u4e2a\u65b0\u7684\u503c\u4f1a\u5bfc\u81f4Array\u5927\u5c0f\u7684\u53d8\u5316\nvar arr = [1, 2, 3];\narr.length; // 3\narr.length = 6;\narr; // arr\u53d8\u4e3a[1, 2, 3, undefined, undefined, undefined]\narr.length = 2;\narr; // arr\u53d8\u4e3a[1, 2]\n\n// \u5982\u679c\u901a\u8fc7\u7d22\u5f15\u8d4b\u503c\u65f6\uff0c\u7d22\u5f15\u8d85\u8fc7\u4e86\u8303\u56f4\uff0c\u540c\u6837\u4f1a\u5f15\u8d77Array\u5927\u5c0f\u7684\u53d8\u5316\nvar arr = [1, 2, 3];\narr[5] = 'x';\narr; // arr\u53d8\u4e3a[1, 2, 3, undefined, undefined, 'x']\n</code></pre>"},{"location":"code/JavaScript/js-note/#foreach","title":"\u904d\u5386 forEach","text":"<p>\u53ef\u4ee5\u901a\u8fc7 for \u5faa\u73af\u6216\u8005\u8c03\u7528 <code>forEach(func)</code> \u65b9\u6cd5\u3002</p> <pre><code>function showList(){\n let fruits, text, fLen, i;\n fruits = ['banana', 'orange', 'apple'];\n fLen = fruits.length;\n text = '&lt;ul&gt;'\n for (i=0; i&lt;fLen; i++) {\n  text += \"&lt;li&gt;\" + fruits[i] + '&lt;/li&gt;';\n }\n text += '&lt;/ul&gt;';\n // console.log(text);\n document.getElementById('demo').innerHTML = text;\n}\n\nfunction showList2() {\n let fruits, text;\n fruits = [\"Banana\", \"Orange\", \"Apple\", \"Mango\"];\n\n text = '&lt;ul&gt;';\n fruits.forEach(foo);\n text += '&lt;/ul&gt;';\n\n function foo(value){\n  text += '&lt;li&gt;' + value + '&lt;/li&gt;';\n }\n\n document.getElementById('demo').innerHTML = text;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#push-pop-unshift-shift","title":"push(), pop(), unshift(), shift()","text":"<pre><code>// push pop\nvar arr = [1, 2];\narr.push('A', 'B'); // \u8fd4\u56deArray\u65b0\u7684\u957f\u5ea6: 4\narr; // [1, 2, 'A', 'B']\narr.pop(); // pop()\u8fd4\u56de'B'\narr; // [1, 2, 'A']\narr.pop(); arr.pop(); arr.pop(); // \u8fde\u7eedpop 3\u6b21\narr; // []\narr.pop(); // \u7a7a\u6570\u7ec4\u7ee7\u7eedpop\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u662f\u8fd4\u56deundefined\narr; // []\n\n\n// unshift shift \u7c7b\u4f3c push \u548c pop \u4e0d\u8fc7\u662f\u6570\u7ec4\u524d\u9762\nvar arr = [1, 2];\narr.unshift('A', 'B'); // \u8fd4\u56deArray\u65b0\u7684\u957f\u5ea6: 4\narr; // ['A', 'B', 1, 2]\narr.shift(); // 'A'\narr; // ['B', 1, 2]\narr.shift(); arr.shift(); arr.shift(); // \u8fde\u7eedshift 3\u6b21\narr; // []\narr.shift(); // \u7a7a\u6570\u7ec4\u7ee7\u7eedshift\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u662f\u8fd4\u56deundefined\narr; // []\n</code></pre>"},{"location":"code/JavaScript/js-note/#tostring-join","title":"toString(), join()","text":"<p>toString() \u7528\u9017\u53f7\u5206\u5272 \u800c join() \u7684\u53c2\u6570\u6307\u5b9a\u8fde\u63a5\u7684\u65b9\u5f0f\u3002</p> <pre><code>// join \u652f\u6301\u81ea\u52a8\u8f6c\u6362\nvar arr = ['A', 'B', 'C', 1, 2, 3];\narr.join('-'); // 'A-B-C-1-2-3'\n</code></pre>"},{"location":"code/JavaScript/js-note/#splice","title":"splice() \u6dfb\u52a0\u3001\u5220\u9664","text":"<p><code>splice()</code> \u65b9\u6cd5\u662f\u4fee\u6539Array\u7684\u201c\u4e07\u80fd\u65b9\u6cd5\u201d\uff0c\u5b83\u53ef\u4ee5\u4ece\u6307\u5b9a\u7684\u7d22\u5f15\u5f00\u59cb\u5220\u9664\u82e5\u5e72\u5143\u7d20\uff0c\u7136\u540e\u518d\u4ece\u8be5\u4f4d\u7f6e\u6dfb\u52a0\u82e5\u5e72\u5143\u7d20</p> <pre><code>// splice\nvar arr = ['Microsoft', 'Apple', 'Yahoo', 'AOL', 'Excite', 'Oracle'];\n// \u4ece\u7d22\u5f152\u5f00\u59cb\u5220\u96643\u4e2a\u5143\u7d20,\u7136\u540e\u518d\u6dfb\u52a0\u4e24\u4e2a\u5143\u7d20:\narr.splice(2, 3, 'Google', 'Facebook'); // \u8fd4\u56de\u5220\u9664\u7684\u5143\u7d20 ['Yahoo', 'AOL', 'Excite']\narr; // ['Microsoft', 'Apple', 'Google', 'Facebook', 'Oracle']\n\n\n// \u53ea\u5220\u9664,\u4e0d\u6dfb\u52a0:\narr.splice(2, 2); // ['Google', 'Facebook']\narr; // ['Microsoft', 'Apple', 'Oracle']\n\n\n// \u53ea\u6dfb\u52a0,\u4e0d\u5220\u9664:\narr.splice(2, 0, 'Google', 'Facebook'); // \u8fd4\u56de[],\u56e0\u4e3a\u6ca1\u6709\u5220\u9664\u4efb\u4f55\u5143\u7d20\narr; // ['Microsoft', 'Apple', 'Google', 'Facebook', 'Oracle']\n</code></pre>"},{"location":"code/JavaScript/js-note/#slice","title":"slice()","text":"<pre><code>// slice \u5c31\u662f String \u7684 substring \u65b9\u6cd5\nvar arr = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];\narr.slice(0, 3); // \u4ece\u7d22\u5f150\u5f00\u59cb\uff0c\u5230\u7d22\u5f153\u7ed3\u675f\uff0c\u4f46\u4e0d\u5305\u62ec\u7d22\u5f153: ['A', 'B', 'C']\narr.slice(3); // \u4ece\u7d22\u5f153\u5f00\u59cb\u5230\u7ed3\u675f: ['D', 'E', 'F', 'G']\n\n\nvar arr = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];  // \u5229\u7528 slice \u8fdb\u884c\u590d\u5236\nvar aCopy = arr.slice();\naCopy; // ['A', 'B', 'C', 'D', 'E', 'F', 'G']\naCopy === arr; // false\n</code></pre> <pre><code>// indexOf\nvar arr = [10, 20, '30', 'xyz'];\narr.indexOf(10); // \u5143\u7d2010\u7684\u7d22\u5f15\u4e3a0\narr.indexOf(20); // \u5143\u7d2020\u7684\u7d22\u5f15\u4e3a1\narr.indexOf(30); // \u5143\u7d2030\u6ca1\u6709\u627e\u5230\uff0c\u8fd4\u56de-1\narr.indexOf('30'); // \u5143\u7d20'30'\u7684\u7d22\u5f15\u4e3a2\n</code></pre>"},{"location":"code/JavaScript/js-note/#sort-reverse","title":"sort(), reverse()","text":"<p>sort()\u00a0\u65b9\u6cd5\u4ee5\u5b57\u6bcd\u987a\u5e8f\u5bf9\u6570\u7ec4\u8fdb\u884c\u6392\u5e8f\u3002 reverse() \u65b9\u6cd5\u53cd\u8f6c\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u3002\u3010\u6ce8\u610f\u662f\u539f\u5730\u53cd\u8f6c\u3011</p> <pre><code>// sort\nvar arr = ['B', 'C', 'A'];\narr.sort();\narr; // ['A', 'B', 'C']\uff0c\u9ed8\u8ba4\u5347\u5e8f\n\n// reverse \nvar arr = ['one', 'two', 'three'];\narr.reverse(); \narr; // ['three', 'two', 'one']\n</code></pre>"},{"location":"code/JavaScript/js-note/#_8","title":"\u6bd4\u503c\u51fd\u6570","text":"<pre><code>var points = [40, 100, 1, 5, 25, 10];\npoints.sort(function(a, b){return a - b}); \n</code></pre> <p>\u6bd4\u8f83\u51fd\u6570\u5e94\u8be5\u8fd4\u56de\u4e00\u4e2a\u8d1f\uff0c\u96f6\u6216\u6b63\u503c\uff0c\u8fd9\u53d6\u51b3\u4e8e\u53c2\u6570\u3002 \u5f53 sort() \u51fd\u6570\u6bd4\u8f83\u4e24\u4e2a\u503c\u65f6\uff0c\u4f1a\u5c06\u503c\u53d1\u9001\u5230\u6bd4\u8f83\u51fd\u6570\uff0c\u5e76\u6839\u636e\u6240\u8fd4\u56de\u7684\u503c\uff08\u8d1f\u3001\u96f6\u6216\u6b63\u503c\uff09\u5bf9\u8fd9\u4e9b\u503c\u8fdb\u884c\u6392\u5e8f\u3002 \u5f53\u6bd4\u8f83 40 \u548c 100 \u65f6\uff0csort() \u65b9\u6cd5\u4f1a\u8c03\u7528\u6bd4\u8f83\u51fd\u6570 function(40,100)\u3002\u8be5\u51fd\u6570\u8ba1\u7b97 40-100\uff0c\u7136\u540e\u8fd4\u56de -60\uff08\u8d1f\u503c\uff09\u3002\u6392\u5e8f\u51fd\u6570\u5c06\u628a 40 \u6392\u5e8f\u4e3a\u6bd4 100 \u66f4\u4f4e\u7684\u503c\u3002</p> <pre><code>// \u968f\u673a\u6392\u5e8f\u6570\u7ec4\nvar points = [40, 100, 1, 5, 25, 10];\npoints.sort(function(a, b){return 0.5 - Math.random()}); \n\n\n// \u67e5\u627e\u6700\u5927/\u6700\u5c0f\u3002\u53ef\u91c7\u7528\u4e0b\u9762\u7684\u4e24\u79cd sort\nvar points = [40, 100, 1, 5, 25, 10];\npoints.sort(function(a, b){return a - b});\n// \u73b0\u5728 points[0] \u5305\u542b\u6700\u4f4e\u503c\n// \u800c points[points.length-1] \u5305\u542b\u6700\u9ad8\u503c\nvar points = [40, 100, 1, 5, 25, 10];\npoints.sort(function(a, b){return b - a});\n// \u73b0\u5728 points[0] \u5305\u542b\u6700\u9ad8\u503c\n// \u800c points[points.length-1] \u5305\u542b\u6700\u4f4e\u503c\n</code></pre>"},{"location":"code/JavaScript/js-note/#mathmax","title":"\u4f7f\u7528 Math.max()","text":"<pre><code>var arr = [40, 100, 1, 5, 25, 10];\nfunction myArrayMax(arr) {\n return Math.max.apply(null, arr);\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#_9","title":"\u81ea\u5df1\u5199","text":"<p>\u5f53\u7136\uff0c\u81ea\u5df1\u5b9e\u73b0\u7684\u6548\u7387\u66f4\u9ad8</p> <pre><code>function myArrayMax(arr) {\n var len = arr.length\n var max = -Infinity;\n while (len--) {\n  if (arr[len] &gt; max) {\n   max = arr[len];\n  }\n }\n return max;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#map","title":"map","text":"<pre><code>// map\nfunction pow(x) {\n return x * x;\n}\n\nvar arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];\nvar results = arr.map(pow); // [1, 4, 9, 16, 25, 36, 49, 64, 81]\nconsole.log(results);\n\n// reduce\nvar arr = [1, 3, 5, 7, 9];\narr.reduce(function (x, y) {\n return x + y;\n}); // 25\n</code></pre> <p>\u53e6\u5916\uff0c\u9700\u8981\u6ce8\u610f map \u867d\u7136\u591a\u6570\u60c5\u51b5\u4e0b\u4ec5\u9700\u8981\u4f20\u9012\u4e00\u4e2a\u53c2\u6570\uff0c\u4f46\u5b9e\u9645\u4e0a\u4f20\u9012\u7684\u662f\u4e09\u4e2a\u53c2\u6570 \u5143\u7d20\u3001index\u3001\u6570\u7ec4\u672c\u8eab\uff1b\u56e0\u6b64\u82e5\u63a5\u53d7\u51fd\u6570\u7684\u53c2\u6570\u591a\u4e8e 1 \u4e2a\u53ef\u80fd\u5c31\u6709\u95ee\u9898\uff0c\u4f8b\u5982\u4e0b\u9762\u7684 parseInt\uff0c\u53ef\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u8fdb\u5236\uff0c\u53c2\u89c1 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map#tricky_use_case</p> <pre><code>[\"1\", \"2\", \"3\"].map(parseInt) // [1, NaN, NaN]\n\n// \u51e0\u79cd\u89e3\u51b3\u65b9\u6848\nfunction returnInt(element) {\n  return parseInt(element, 10)\n}\n['1', '2', '3'].map(returnInt); // [1, 2, 3]\n// Actual result is an array of numbers (as expected)\n\n// Same as above, but using the concise arrow function syntax\n['1', '2', '3'].map( str =&gt; parseInt(str) )\n\n// A simpler way to achieve the above, while avoiding the \"gotcha\":\n['1', '2', '3'].map(Number)  // [1, 2, 3]\n</code></pre>"},{"location":"code/JavaScript/js-note/#filter","title":"filter","text":"<p>filter\u4e5f\u662f\u4e00\u4e2a\u5e38\u7528\u7684\u64cd\u4f5c\uff0c\u5b83\u7528\u4e8e\u628aArray\u7684\u67d0\u4e9b\u5143\u7d20\u8fc7\u6ee4\u6389\uff0c\u7136\u540e\u8fd4\u56de\u5269\u4e0b\u7684\u5143\u7d20\u3002</p> <p>\u548cmap()\u7c7b\u4f3c\uff0cArray\u7684filter()\u4e5f\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u3002\u548cmap()\u4e0d\u540c\u7684\u662f\uff0cfilter()\u628a\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u6839\u636e\u8fd4\u56de\u503c\u662ftrue\u8fd8\u662ffalse\u51b3\u5b9a\u4fdd\u7559\u8fd8\u662f\u4e22\u5f03\u8be5\u5143\u7d20\u3002</p> <p>\u3010\u548c map \u7c7b\u4f3c\u3011filter()\u63a5\u6536\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5176\u5b9e\u53ef\u4ee5\u6709\u591a\u4e2a\u53c2\u6570\u3002\u901a\u5e38\u6211\u4eec\u4ec5\u4f7f\u7528\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u8868\u793aArray\u7684\u67d0\u4e2a\u5143\u7d20\u3002\u56de\u8c03\u51fd\u6570\u8fd8\u53ef\u4ee5\u63a5\u6536\u53e6\u5916\u4e24\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u5143\u7d20\u7684\u4f4d\u7f6e\u548c\u6570\u7ec4\u672c\u8eab\u3002</p> <pre><code>// \u5229\u7528 filter \u7684 index \u53c2\u6570\u53bb\u9664\u91cd\u590d\u5b57\u7b26\u4e32\nvar\n r,\n arr = ['apple', 'strawberry', 'banana', 'pear', 'apple', 'orange', 'orange', 'strawberry'];\n\nr = arr.filter(function (element, index, self) {\n return self.indexOf(element) === index;\n});\nconsole.log(r.toString());    \n</code></pre> <p>\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8fc7\u6ee4\u7d20\u6570</p> <pre><code>let arr = [];\nfor(var i = 1; i &lt; 101; i++){\n arr.push(i);\n};\nvar getPrime = function(arr){\n return arr.filter(function(ele){\n  if (ele==1){return false;}\n  for (var i=2; i&lt;=Math.sqrt(ele); i++){\n   if (ele % i == 0) return false;\n  }\n  return true;\n })\n}\nconsole.log(getPrime(arr))\n</code></pre>"},{"location":"code/JavaScript/js-note/#reduce","title":"reduce()","text":"<p>reduce() \u65b9\u6cd5\u5728\u6570\u7ec4\u4e2d\u4ece\u5de6\u5230\u53f3\u5de5\u4f5c\u3002\u53e6\u8bf7\u53c2\u89c1 reduceRight\uff08\uff09\u3002 \u3010\u6ce8\u610f\u3011reduce \u7684\u7b2c\u4e00\u53c2\u6570\u4e3a\u7d2f\u52a0\u7684\u521d\u59cb\u503c\u3002 \u5728\u8c03\u7528\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4e0d\u8d4b\u503c\uff0c\u4f8b\u5982\u53ef\u4ee5\u4ee5 <code>numbers1.reduce(myFunction)</code> \u8fd9\u6837\u7684\u5f62\u5f0f\u8c03\u7528\uff0c\u4e5f\u53ef\u50cf\u4e0b\u9762\u90a3\u6837\u5199\u5728\u540e\u9762\u3002</p> <pre><code>var numbers1 = [45, 4, 9, 16, 25];\nvar sum = numbers1.reduce(myFunction, 100); // \u6216 numbers1.reduce(myFunction)\n\n// function myFunction(total, value) \u8fd9\u6837\u4e5f\u884c\nfunction myFunction(total, value, index, array) {\n  return total + value;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#every-some","title":"every(), some()","text":"<pre><code>var numbers = [45, 4, 9, 16, 25];\nvar someOver18 = numbers.some(myFunction);\n\nfunction myFunction(value, index, array) {\n  return value &gt; 18;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#concat","title":"concat()","text":"<p>\u6ce8\u610f\uff0cconcat \u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4\u800c\u975e\u4fee\u6539\u539f\u6570\u7ec4\u3002</p> <pre><code>// concat\nvar arr = ['A', 'B', 'C'];\nvar added = arr.concat([1, 2, 3]);\nadded; // ['A', 'B', 'C', 1, 2, 3]\narr; // ['A', 'B', 'C']\n\nvar arr = ['A', 'B', 'C'];  // \u4e8b\u5b9e\u4e0a concat \u540e\u53ef\u63a5\u4efb\u4e00\u4e2a\u5143\u7d20\u548c Array\uff0c\u5c06 Array \u81ea\u52a8\u5c55\u5f00\narr.concat(1, 2, [3, 4]); // ['A', 'B', 'C', 1, 2, 3, 4]\n</code></pre>"},{"location":"code/JavaScript/js-note/#indexof","title":"indexOf()","text":"<pre><code>var fruits = [\"Apple\", \"Orange\", \"Apple\", \"Mango\"];\nvar a = fruits.lastIndexOf(\"Apple\");\n</code></pre>"},{"location":"code/JavaScript/js-note/#find-findindex","title":"find(), findIndex()","text":"<p>\u533a\u522b\u5728\u4e8e\u4e00\u4e2a\u8fd4\u56de\u6240\u627e\u5230\u7684\u503c\uff0c\u4e00\u4e2a\u8fd4\u56de index</p> <pre><code>var numbers = [4, 9, 16, 25, 29];\nvar first = numbers.findIndex(myFunction);\n\nfunction myFunction(value, index, array) {\n  return value &gt; 18;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#js_1","title":"js \u5bf9\u8c61","text":"<ul> <li>\u5c5e\u6027\u540d\u5fc5\u987b\u662f\u4e00\u4e2a\u6709\u6548\u7684\u53d8\u91cf\u540d\u3002\u5982\u679c\u5c5e\u6027\u540d\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff0c\u5c31\u5fc5\u987b\u7528 <code>\"\"</code> \u62ec\u8d77\u6765\u3002\u8bbf\u95ee\u8fd9\u4e2a\u5c5e\u6027\u4e5f\u65e0\u6cd5\u4f7f\u7528 <code>.</code> \u64cd\u4f5c\u7b26\uff0c\u5fc5\u987b\u7528 <code>['xxx']</code> \u6765\u8bbf\u95ee.</li> <li>JavaScript\u89c4\u5b9a\uff0c\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u4e0d\u62a5\u9519\uff0c\u800c\u662f\u8fd4\u56de <code>undefined</code></li> <li>\u5982\u679c\u6211\u4eec\u8981\u68c0\u6d4b\u662f\u5426\u62e5\u6709\u67d0\u4e00\u5c5e\u6027\uff0c\u53ef\u4ee5\u7528 <code>in</code> \u64cd\u4f5c\u7b26<ul> <li><code>'name' in xiaoming;</code></li> <li>\u8981\u5224\u65ad\u4e00\u4e2a\u5c5e\u6027\u662f\u5426\u662f\u67d0\u5bf9\u8c61\u81ea\u8eab\u62e5\u6709\u7684\uff0c\u800c\u4e0d\u662f\u7ee7\u627f\u5f97\u5230\u7684\uff0c\u53ef\u4ee5\u7528 <code>hasOwnProperty()</code> \u65b9\u6cd5, \u4f8b\u5982 <code>xiaoming.hasOwnProperty('toString');</code> (toString \u5b9a\u4e49\u5728object\u5bf9\u8c61\u4e2d, \u800c\u6240\u6709\u5bf9\u8c61\u6700\u7ec8\u90fd\u4f1a\u5728\u539f\u578b\u94fe\u4e0a\u6307\u5411object)</li> </ul> </li> <li>JavaScript \u5bf9\u8c61\u65e0\u6cd5\u8fdb\u884c\u5bf9\u6bd4\uff0c\u6bd4\u8f83\u4e24\u4e2a JavaScript \u5c06\u59cb\u7ec8\u8fd4\u56de\u00a0false\u3002</li> </ul> <pre><code>var xiaohong = {\n name: '\u5c0f\u7ea2',\n 'middle-school': 'No.1 Middle School'\n};\n\nxiaohong['middle-school']; // 'No.1 Middle School'\nxiaohong['name']; // '\u5c0f\u7ea2'\nxiaohong.name; // '\u5c0f\u7ea2'\n</code></pre> <p>\u5982\u679c\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u4f1a\u8fd4\u56de\u4ec0\u4e48\u5462\uff1fJavaScript\u89c4\u5b9a\uff0c\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u4e0d\u62a5\u9519\uff0c\u800c\u662f\u8fd4\u56deundefined</p> <pre><code>var xiaoming = {\n name: '\u5c0f\u660e'\n};\nxiaoming.age; // undefined\nxiaoming.age = 18; // \u65b0\u589e\u4e00\u4e2aage\u5c5e\u6027\nxiaoming.age; // 18\ndelete xiaoming.age; // \u5220\u9664age\u5c5e\u6027\nxiaoming.age; // undefined\ndelete xiaoming['name']; // \u5220\u9664name\u5c5e\u6027\nxiaoming.name; // undefined\ndelete xiaoming.school; // \u5220\u9664\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684school\u5c5e\u6027\u4e5f\u4e0d\u4f1a\u62a5\u9519\n\n// \u67e5\u770b\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u6709\u4e00\u4e2a\u5c5e\u6027\uff0c\u53ef\u4ee5\u7528 in \u64cd\u4f5c\u7b26\nvar xiaoming = {\n name: '\u5c0f\u660e',\n birth: 1990,\n school: 'No.1 Middle School',\n height: 1.70,\n weight: 65,\n score: null\n};\n'name' in xiaoming; // true\n'grade' in xiaoming; // false\n\n// \u8981\u5224\u65ad\u4e00\u4e2a\u5c5e\u6027\u662f\u5426\u662fxiaoming\u81ea\u8eab\u62e5\u6709\u7684\uff0c\u800c\u4e0d\u662f\u7ee7\u627f\u5f97\u5230\u7684\uff0c\u53ef\u4ee5\u7528hasOwnProperty()\u65b9\u6cd5\nxiaoming.hasOwnProperty('name'); // true\nxiaoming.hasOwnProperty('toString'); // false\n</code></pre>"},{"location":"code/JavaScript/js-note/#_10","title":"\u6761\u4ef6\u5224\u65ad","text":"<ul> <li>JavaScript\u628a null\u3001undefined\u30010\u3001NaN \u548c\u7a7a\u5b57\u7b26\u4e32 \u2018\u2019 \u89c6\u4e3afalse\uff0c\u5176\u4ed6\u503c\u4e00\u6982\u89c6\u4e3atrue\u3002</li> </ul> <pre><code>var age = 3;\nif (age &gt;= 18) {\n alert('adult');\n} else if (age &gt;= 6) {\n alert('teenager');\n} else {\n alert('kid');\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#_11","title":"\u5faa\u73af","text":""},{"location":"code/JavaScript/js-note/#for","title":"for","text":"<ul> <li>for \u5faa\u73af\uff0c\u901a\u8fc7\u521d\u59cb\u6761\u4ef6\u3001\u7ed3\u675f\u6761\u4ef6\u548c\u9012\u589e\u6761\u4ef6\u6765\u5faa\u73af\u6267\u884c\u8bed\u53e5\u5757<ul> <li><code>for (var i = 1; i &lt;= 10; i++) {}</code></li> <li>\u904d\u5386\u6570\u7ec4 <code>for (i=0; i&lt;arr.length; i++){}</code></li> </ul> </li> <li>for\u5faa\u73af\u7684\u4e00\u4e2a\u53d8\u4f53\u662f <code>for ... in</code>  \u5faa\u73af\uff0c\u5b83\u53ef\u4ee5\u628a\u4e00\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u4f9d\u6b21\u5faa\u73af\u51fa\u6765<ul> <li><code>for (var key in o) {}</code></li> <li>\u6ce8\u610f, Array\u4e5f\u662f\u5bf9\u8c61\uff0c\u800c\u5b83\u7684\u6bcf\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u88ab\u89c6\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027 (\u6ce8\u610f, for \u2026 in\u5bf9Array\u7684\u5faa\u73af\u5f97\u5230\u7684\u662fString\u800c\u4e0d\u662fNumber ! \u8bb0\u4f4f js \u4e2d\u6240\u6709\u7684 key \u7c7b\u578b\u90fd\u662f\u5b57\u7b26\u4e32)<ul> <li><code>for (var i in arr) { console.log(arr[i]); }</code></li> </ul> </li> </ul> </li> <li>while\u5faa\u73af</li> <li>do { \u2026 } while()\u5faa\u73af</li> </ul> <pre><code>// for \u8bed\u53e5\nvar x = 0;\nvar i;\nfor (i=1; i&lt;=10000; i++) {\n x = x + i;\n}\nx; // 50005000\n\nvar arr = ['Apple', 'Google', 'Microsoft'];\nvar i, x;\nfor (i=0; i&lt;arr.length; i++) {\n x = arr[i];\n console.log(x);\n}\n\n// \u5176\u4e2d\u7684 3 \u4e2a\u6761\u4ef6\u90fd\u662f\u53ef\u7701\u7565\u7684\nvar x = 0;\nfor (;;) { // \u5c06\u65e0\u9650\u5faa\u73af\u4e0b\u53bb\n if (x &gt; 100) {\n  break; // \u901a\u8fc7if\u5224\u65ad\u6765\u9000\u51fa\u5faa\u73af\n }\n x ++;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#forin","title":"for\u2026in","text":"<p>for \u5faa\u73af\u7684\u4e00\u4e2a\u53d8\u4f53\u662f <code>for ... in</code> \u5faa\u73af\uff0c\u5b83\u53ef\u4ee5\u628a\u4e00\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u4f9d\u6b21\u5faa\u73af\u51fa\u6765\u3002 \u7531\u4e8eArray\u4e5f\u662f\u5bf9\u8c61\uff0c\u800c\u5b83\u7684\u6bcf\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u88ab\u89c6\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u56e0\u6b64\uff0cfor \u2026 in\u5faa\u73af\u53ef\u4ee5\u76f4\u63a5\u5faa\u73af\u51faArray\u7684\u7d22\u5f15</p> <pre><code>// for...in\nvar o = {\n name: 'Jack',\n age: 20,\n city: 'Beijing'\n};\nfor (var key in o) {\n console.log(key); // 'name', 'age', 'city'\n}\n\n// \u5faa\u73af\u5217\u8868\n// \u4f46\u6ce8\u610f\uff0c\u8bf7\u6ce8\u610f\uff0cfor ... in\u5bf9Array\u7684\u5faa\u73af\u5f97\u5230\u7684\u662fString\u800c\u4e0d\u662fNumber\u3002\nvar a = ['A', 'B', 'C'];\nfor (var i in a) {\n console.log(i); // '0', '1', '2'\n console.log(a[i]); // 'A', 'B', 'C'\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#while","title":"while","text":"<pre><code>var x = 0;\nvar n = 99;\nwhile (n &gt; 0) {\n x = x + n;\n n = n - 2;\n}\nx; // 2500\n</code></pre>"},{"location":"code/JavaScript/js-note/#dowhile","title":"do\u2026while","text":"<pre><code>var n = 0;\ndo {\n n = n + 1;\n} while (n &lt; 100);\nn; // 100\n</code></pre>"},{"location":"code/JavaScript/js-note/#map-set","title":"Map \u548c Set","text":"<ul> <li>Map<ul> <li>JavaScript\u7684\u9ed8\u8ba4\u5bf9\u8c61\u8868\u793a\u65b9\u5f0f{}\u53ef\u4ee5\u89c6\u4e3a\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684Map\u6216Dictionary\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5373\u4e00\u7ec4\u952e\u503c\u5bf9\u3002\u4f46\u662fJavaScript\u7684\u5bf9\u8c61\u6709\u4e2a\u5c0f\u95ee\u9898\uff0c\u5c31\u662f\u952e\u5fc5\u987b\u662f\u5b57\u7b26\u4e32\u3002\u4f46\u5b9e\u9645\u4e0aNumber\u6216\u8005\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u4f5c\u4e3a\u952e\u4e5f\u662f\u975e\u5e38\u5408\u7406\u7684\u3002</li> <li>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6700\u65b0\u7684ES6\u89c4\u8303\u5f15\u5165\u4e86\u65b0\u7684\u6570\u636e\u7c7b\u578b <code>Map</code>\u3002</li> <li>\u521d\u59cb\u5316Map\u9700\u8981\u4e00\u4e2a \u4e8c\u7ef4\u6570\u7ec4\uff0c\u6216\u8005\u76f4\u63a5\u521d\u59cb\u5316\u4e00\u4e2a\u7a7aMap\u3002 <code>var m = new Map([['Michael', 95], ['Bob', 75], ['Tracy', 85]]);</code></li> <li>\u65b9\u6cd5: <code>set, has, get, delete</code></li> </ul> </li> <li>Set<ul> <li><code>Set</code> \u548cMap\u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e00\u7ec4key\u7684\u96c6\u5408\uff0c\u4f46\u4e0d\u5b58\u50a8value\u3002\u7531\u4e8ekey\u4e0d\u80fd\u91cd\u590d\uff0c\u6240\u4ee5\uff0c\u5728Set\u4e2d\uff0c\u6ca1\u6709\u91cd\u590d\u7684key\u3002</li> <li>\u8981\u521b\u5efa\u4e00\u4e2aSet\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a Array \u4f5c\u4e3a\u8f93\u5165\uff0c\u6216\u8005\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u7a7aSet.</li> <li>\u65b9\u6cd5: <code>add, delete, has</code></li> </ul> </li> <li>\u6ce8\u610f, in \u8bed\u53e5 \u5728 Map \u548c Set \u4e2d\u65e0\u6548</li> </ul> <pre><code>var m = new Map([['Michael', 95], ['Bob', 75], ['Tracy', 85]]);\nm.get('Michael'); // 95\n\n// set() has() get() delete()\nvar m = new Map(); // \u7a7aMap\nm.set('Adam', 67); // \u6dfb\u52a0\u65b0\u7684key-value\nm.set('Bob', 59);\nm.has('Adam'); // \u662f\u5426\u5b58\u5728key 'Adam': true\nm.get('Adam'); // 67\nm.delete('Adam'); // \u5220\u9664key 'Adam'\nm.get('Adam'); // undefined\n</code></pre> <pre><code>var s = new Set([1, 2, 3, 3, '3']);\ns; // Set {1, 2, 3, \"3\"}\n\n// add()\ns.add(4);\ns; // Set {1, 2, 3, 4}\ns.add(4);\ns; // \u4ecd\u7136\u662f Set {1, 2, 3, 4}\n\n// delete()\nvar s = new Set([1, 2, 3]);\ns; // Set {1, 2, 3}\ns.delete(3);\ns; // Set {1, 2}\n</code></pre>"},{"location":"code/JavaScript/js-note/#iterable","title":"iterable","text":"<ul> <li>\u904d\u5386Array\u53ef\u4ee5\u91c7\u7528\u4e0b\u6807\u5faa\u73af\uff0c\u904d\u5386Map\u548cSet\u5c31\u65e0\u6cd5\u4f7f\u7528\u4e0b\u6807\u3002\u4e3a\u4e86\u7edf\u4e00\u96c6\u5408\u7c7b\u578b\uff0cES6\u6807\u51c6\u5f15\u5165\u4e86\u65b0\u7684iterable\u7c7b\u578b\uff0cArray\u3001Map \u548c Set \u90fd\u5c5e\u4e8e iterable \u7c7b\u578b\u3002</li> <li>\u5177\u6709iterable\u7c7b\u578b\u7684\u96c6\u5408\u53ef\u4ee5\u901a\u8fc7\u65b0\u7684 <code>for ... of</code> \u5faa\u73af\u6765\u904d\u5386\u3002</li> <li>for \u2026 of\u5faa\u73af\u548cfor \u2026 in\u5faa\u73af\u6709\u4f55\u533a\u522b\uff1f<ul> <li>\u4e00\u4e2aArray\u6570\u7ec4\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u7684\u6bcf\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u88ab\u89c6\u4e3a\u4e00\u4e2a\u5c5e\u6027\u3002</li> <li>\u4f8b\u5982, Array <code>['A', 'B', 1, name: 'Hello']</code> \u4e5f\u662f\u53ef\u4ee5\u7684,<ul> <li>\u6b64\u65f6\u7528 <code>for ... in</code> \u5f97\u5230\u7684\u5c5e\u6027\u540d\u79f0\u4e3a <code>'0', '1', '2', 'name'</code></li> <li>\u6ce8\u610f, for \u2026 in \u5faa\u73af\u5c06\u628aname\u5305\u62ec\u5728\u5185\uff0c\u4f46Array\u7684length\u5c5e\u6027\u5374\u4e0d\u5305\u62ec\u5728\u5185\u3002</li> <li><code>for ... of</code> \u5faa\u73af\u5219\u5b8c\u5168\u4fee\u590d\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0c\u5b83\u53ea\u5faa\u73af\u96c6\u5408\u672c\u8eab\u7684\u5143\u7d20</li> </ul> </li> </ul> </li> <li>forEach<ul> <li>\u7136\u800c\uff0c\u66f4\u597d\u7684\u65b9\u5f0f\u662f\u76f4\u63a5\u4f7f\u7528 iterable \u5185\u7f6e\u7684 forEach \u65b9\u6cd5\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\uff0c\u6bcf\u6b21\u8fed\u4ee3\u5c31\u81ea\u52a8\u56de\u8c03\u8be5\u51fd\u6570\u3002\u4ee5 <code>Array</code> \u4e3a\u4f8b\uff0c\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u4e3a element, index \u548c array \u672c\u8eab\u3002<ul> <li><code>Set</code> \u4e0eArray\u7c7b\u4f3c\uff0c\u4f46Set\u6ca1\u6709\u7d22\u5f15\uff0c\u56e0\u6b64\u56de\u8c03\u51fd\u6570\u7684\u524d\u4e24\u4e2a\u53c2\u6570\u90fd\u662f\u5143\u7d20\u672c\u8eab\u3002</li> <li><code>Map</code> \u7684\u56de\u8c03\u51fd\u6570\u53c2\u6570\u4f9d\u6b21\u4e3avalue\u3001key\u548cmap\u672c\u8eab\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#for-of","title":"for \u2026 of","text":"<pre><code>var a = ['A', 'B', 'C'];\nvar s = new Set(['A', 'B', 'C']);\nvar m = new Map([[1, 'x'], [2, 'y'], [3, 'z']]);\nfor (var x of a) { // \u904d\u5386Array\n console.log(x);\n}\nfor (var x of s) { // \u904d\u5386Set\n console.log(x);\n}\nfor (var x of m) { // \u904d\u5386Map\n console.log(x[0] + '=' + x[1]);\n}\n\n// \u5f53\u6211\u4eec\u624b\u52a8\u7ed9Array\u5bf9\u8c61\u6dfb\u52a0\u4e86\u989d\u5916\u7684\u5c5e\u6027\u540e\uff0cfor ... in \u5faa\u73af\u5c06\u5e26\u6765\u610f\u60f3\u4e0d\u5230\u7684\u610f\u5916\u6548\u679c\nvar a = ['A', 'B', 'C'];\na.name = 'Hello'; // \u4f1a\u5728\u6700\u540e, \u4e5f\u5373 a[3] === 1\na.push(1);\nconsole.log(a);\nfor (var x in a) {\n console.log(x); // '0', '1', '2', 'name'\n}\n// \u6b64\u65f6\u7528 for...of \u5c31\u53ea\u4f1a\u5faa\u73af\u96c6\u5408\u672c\u8eab\u7684\u5143\u7d20\nfor (var x of a) {\n console.log(x); // 'A', 'B', 'C'\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#foreach_1","title":"forEach \u65b9\u6cd5","text":"<ul> <li>\u7136\u800c\uff0c\u66f4\u597d\u7684\u65b9\u5f0f\u662f\u76f4\u63a5\u4f7f\u7528 iterable \u5185\u7f6e\u7684 forEach \u65b9\u6cd5\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\uff0c\u6bcf\u6b21\u8fed\u4ee3\u5c31\u81ea\u52a8\u56de\u8c03\u8be5\u51fd\u6570\u3002\u4ee5 <code>Array</code> \u4e3a\u4f8b\uff0c\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u4e3a <code>element, index</code> \u548c array \u672c\u8eab\u3002</li> <li><code>Set</code> \u4e0eArray\u7c7b\u4f3c\uff0c\u4f46Set\u6ca1\u6709\u7d22\u5f15\uff0c\u56e0\u6b64\u56de\u8c03\u51fd\u6570\u7684\u524d\u4e24\u4e2a\u53c2\u6570\u90fd\u662f\u5143\u7d20\u672c\u8eab\u3002</li> <li><code>Map</code> \u7684\u56de\u8c03\u51fd\u6570\u53c2\u6570\u4f9d\u6b21\u4e3a <code>value\u3001key</code> \u548cmap\u672c\u8eab\u3002</li> <li>\u5982\u679c\u5bf9\u67d0\u4e9b\u53c2\u6570\u4e0d\u611f\u5174\u8da3\uff0c\u7531\u4e8eJavaScript\u7684\u51fd\u6570\u8c03\u7528\u4e0d\u8981\u6c42\u53c2\u6570\u5fc5\u987b\u4e00\u81f4\uff0c\u56e0\u6b64\u53ef\u4ee5\u5ffd\u7565\u5b83\u4eec</li> </ul> <p>\u5982\u679c\u5bf9\u67d0\u4e9b\u53c2\u6570\u4e0d\u611f\u5174\u8da3\uff0c\u7531\u4e8eJavaScript\u7684\u51fd\u6570\u8c03\u7528\u4e0d\u8981\u6c42\u53c2\u6570\u5fc5\u987b\u4e00\u81f4\uff0c\u56e0\u6b64\u53ef\u4ee5\u5ffd\u7565\u5b83\u4eec\u3002</p> <pre><code>// forEach Array\na.forEach(function (element, index, array) {\n // element: \u6307\u5411\u5f53\u524d\u5143\u7d20\u7684\u503c\n // index: \u6307\u5411\u5f53\u524d\u7d22\u5f15\n // array: \u6307\u5411Array\u5bf9\u8c61\u672c\u8eab\n console.log(element + ', index = ' + index);\n});\n// Set\nvar s = new Set(['A', 'B', 'C']);\ns.forEach(function (element, sameElement, set) {\n console.log(element);\n});\n//Map\nvar m = new Map([[1, 'x'], [2, 'y'], [3, 'z']]);\nm.forEach(function (value, key, map) {\n console.log(value);\n});\n\n// \u51fd\u6570\u8c03\u7528\u7684\u53c2\u6570\u6570\u91cf\u53ef\u4ee5\u4e0d\u4e00\u81f4\nvar a = ['A', 'B', 'C'];\na.forEach(function (element) {\n console.log(element);\n});\n</code></pre>"},{"location":"code/JavaScript/js-note/#js_2","title":"JS \u51fd\u6570","text":"<ul> <li>\u53c2\u6570<ul> <li><code>function foo(a, b, ...rest) {}</code>; <code>arguments</code> \u5bf9\u8c61; \u503c\u4f20\u9012, \u5bf9\u8c61\u5f15\u7528\u662f\u503c</li> </ul> </li> <li>\u53d8\u91cf\u4f5c\u7528\u57df<ul> <li>\u53d8\u91cf\u63d0\u5347; \u5168\u5c40\u4f5c\u7528\u57df; \u7533\u660e\u5757\u7ea7\u4f5c\u7528\u57df let, const</li> </ul> </li> <li>Function \u6784\u9020\u5668<ul> <li><code>var myFunction = new Function(\"a\", \"b\", \"return a * b\");</code></li> </ul> </li> <li>\u89e3\u6784\u8d4b\u503c: \u7c7b\u4f3cPython\u4e2d\u7684\u5e8f\u5217\u89e3\u5305<ul> <li>\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c. \u522b\u540d; \u5d4c\u5957; \u9ed8\u8ba4\u503c; \u5728\u51fd\u6570\u4f20\u53c2\u65f6\u4f7f\u7528</li> </ul> </li> <li>\u5bf9\u8c61\u7684\u65b9\u6cd5<ul> <li>this \u5173\u952e\u8bcd</li> <li>apply, call(). <code>Math.max.apply(null, [3, 5, 4]);</code></li> </ul> </li> <li>\u9ad8\u9636\u51fd\u6570<ul> <li>forEach</li> <li>map, reduce</li> <li>filter</li> <li>sort. <code>sort((firstEl, secondEl) =&gt; { /* ... */ } )</code> \u6ce8\u610f\u8fd4\u56de -1,0,1 \u8d1f\u6570\u8868\u793a\u4f18\u5148\u7ea7\u9ad8</li> <li>every</li> <li>find, findIndex</li> </ul> </li> <li>\u51fd\u6570\u95ed\u5305: \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570<ul> <li>\u4f5c\u7528: 1. \u53ef\u4ee5\u50cf class \u4e00\u6837\u5b9a\u4e49\u79c1\u6709\u53d8\u91cf; 2. \u53ef\u4ee5\u5c01\u88c5\u65b0\u7684\u51fd\u6570</li> </ul> </li> <li>\u7bad\u5934\u51fd\u6570: \u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5bf9\u4e8e this \u7684\u6307\u5411\u8fdb\u884c\u4e86\u4e00\u5b9a\u4fee\u590d, \u5176\u5185\u90e8\u7684 this \u662f\u8bcd\u6cd5\u4f5c\u7528\u57df, \u7531\u4e0a\u4e0b\u6587\u786e\u5b9a</li> <li>generator \u751f\u6210\u5668: \u7c7b\u4f3c Python<ul> <li>\u4f5c\u7528: 1. \u53ef\u4ee5\u8bb0\u5f55\u8fc7\u7a0b\u4e2d\u53d8\u91cf, \u5b8c\u6210 object \u91c7\u7528\u5b9e\u73b0\u7684\u4efb\u52a1; 2. \u66f4\u91cd\u8981\u7684\u662f, \u53ef\u4ee5\u628a\u5f02\u6b65\u56de\u8c03\u4ee3\u7801\u53d8\u6210\u201c\u540c\u6b65\u201d\u4ee3\u7801</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#_12","title":"\u5b9a\u4e49\u548c\u8c03\u7528","text":"<ul> <li>\u5b9a\u4e49\u51fd\u6570<ul> <li>\u4e24\u79cd\u5b9a\u4e49\u8bed\u6cd5<ul> <li><code>function abs(x) {}</code></li> <li><code>var abs = function (x) {}</code></li> </ul> </li> <li>\u7531\u4e8eJavaScript\u7684\u51fd\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4e0a\u8ff0\u5b9a\u4e49\u7684<code>abs()</code>\u51fd\u6570\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u800c\u51fd\u6570\u540d<code>abs</code>\u53ef\u4ee5\u89c6\u4e3a\u6307\u5411\u8be5\u51fd\u6570\u7684\u53d8\u91cf\u3002</li> <li>\u5982\u679c\u6ca1\u6709<code>return</code>\u8bed\u53e5\uff0c\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\u4e5f\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u53ea\u662f\u7ed3\u679c\u4e3a<code>undefined</code>\u3002</li> </ul> </li> <li>JavaScript \u51fd\u6570\u6709\u4e00\u4e2a\u540d\u4e3a <code>arguments</code> \u5bf9\u8c61\u7684\u5185\u7f6e\u5bf9\u8c61\u3002</li> <li>rest \u53c2\u6570<ul> <li>ES6\u6807\u51c6\u5f15\u5165\u4e86rest\u53c2\u6570</li> <li>\u5199\u6cd5\u4e3a <code>function foo(a, b, ...rest) {}</code></li> <li>\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u8fde\u6b63\u5e38\u5b9a\u4e49\u7684\u53c2\u6570\u90fd\u6ca1\u586b\u6ee1\uff0c\u4e5f\u4e0d\u8981\u7d27\uff0crest\u53c2\u6570\u4f1a\u63a5\u6536\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff08\u6ce8\u610f\u4e0d\u662f<code>undefined</code>\uff09\u3002</li> </ul> </li> <li>\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61, \u6709 <code>toString()</code> \u7b49\u65b9\u6cd5</li> <li>\u53d8\u91cf\u4f5c\u7528\u57df\u4e0e\u89e3\u6784\u8d4b\u503c<ul> <li>\u7531\u4e8eJavaScript\u7684\u51fd\u6570\u53ef\u4ee5\u5d4c\u5957\uff0c\u6b64\u65f6\uff0c\u5185\u90e8\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u51fd\u6570\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u53cd\u8fc7\u6765\u5219\u4e0d\u884c</li> <li>\u82e5\u91cd\u540d: JavaScript\u7684\u51fd\u6570\u5728\u67e5\u627e\u53d8\u91cf\u65f6\u4ece\u81ea\u8eab\u51fd\u6570\u5b9a\u4e49\u5f00\u59cb\uff0c\u4ece\u201c\u5185\u201d\u5411\u201c\u5916\u201d\u67e5\u627e\u3002\u5982\u679c\u5185\u90e8\u51fd\u6570\u5b9a\u4e49\u4e86\u4e0e\u5916\u90e8\u51fd\u6570\u91cd\u540d\u7684\u53d8\u91cf\uff0c\u5219\u5185\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u5c06\u201c\u5c4f\u853d\u201d\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\u3002</li> </ul> </li> <li>\u53d8\u91cf\u63d0\u5347<ul> <li>JavaScript\u7684\u51fd\u6570\u5b9a\u4e49\u6709\u4e2a\u7279\u70b9\uff0c\u5b83\u4f1a\u5148\u626b\u63cf\u6574\u4e2a\u51fd\u6570\u4f53\u7684\u8bed\u53e5\uff0c\u628a\u6240\u6709\u7533\u660e\u7684\u53d8\u91cf\u201c\u63d0\u5347\u201d\u5230\u51fd\u6570\u9876\u90e8</li> <li>\u63d0\u5347\u7684\u4ec5\u4ec5\u662f\u58f0\u660e (undefined), \u800c\u4e0d\u4f1a\u8fd0\u884c\u53d8\u91cf\u8d4b\u503c</li> </ul> </li> </ul> <p>\u5982\u679c\u6ca1\u6709return\u8bed\u53e5\uff0c\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\u4e5f\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u53ea\u662f\u7ed3\u679c\u4e3a <code>undefined</code>\u3002</p> <pre><code>function abs(x) {\n if (x &gt;= 0) {\n  return x;\n } else {\n  return -x;\n }\n}\n// \u4e5f\u53ef\u4ee5\u8fd9\u6837\u5b9a\u4e49\u51fd\u6570\nvar abs = function (x) {\n if (x &gt;= 0) {\n  return x;\n } else {\n  return -x;\n }\n};\n</code></pre> <ul> <li>\u5728\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u4e0b\uff0c<code>function (x) { ... }</code> \u662f\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u5b83\u6ca1\u6709\u51fd\u6570\u540d\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u8d4b\u503c\u7ed9\u4e86\u53d8\u91cfabs\uff0c\u6240\u4ee5\uff0c\u901a\u8fc7\u53d8\u91cfabs\u5c31\u53ef\u4ee5\u8c03\u7528\u8be5\u51fd\u6570\u3002</li> <li>\u4e0a\u8ff0\u4e24\u79cd\u5b9a\u4e49\u5b8c\u5168\u7b49\u4ef7\uff0c\u6ce8\u610f\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u6309\u7167\u5b8c\u6574\u8bed\u6cd5\u9700\u8981\u5728\u51fd\u6570\u4f53\u672b\u5c3e\u52a0\u4e00\u4e2a <code>;</code>\uff0c\u8868\u793a\u8d4b\u503c\u8bed\u53e5\u7ed3\u675f\u3002</li> </ul> <p>\u51fd\u6570\u8c03\u7528</p> <ul> <li>\u7531\u4e8eJavaScript \u5141\u8bb8\u4f20\u5165\u4efb\u610f\u4e2a\u53c2\u6570\u800c\u4e0d\u5f71\u54cd\u8c03\u7528\uff0c\u56e0\u6b64\u4f20\u5165\u7684\u53c2\u6570\u6bd4\u5b9a\u4e49\u7684\u53c2\u6570\u591a\u4e5f\u6ca1\u6709\u95ee\u9898\uff0c\u867d\u7136\u51fd\u6570\u5185\u90e8\u5e76\u4e0d\u9700\u8981\u8fd9\u4e9b\u53c2\u6570\u3002</li> <li>\u4f20\u5165\u7684\u53c2\u6570\u6bd4\u5b9a\u4e49\u7684\u5c11\u4e5f\u6ca1\u6709\u95ee\u9898\uff08\u6ce8\u610f\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c\u7684\u65f6\u5019\u5f97\u5230\u7684\u662f <code>undefined</code>\uff09\u3002\u5728\u4e0a\u4f8b\u4e2d\uff0cabs(x) \u51fd\u6570\u7684\u53c2\u6570x\u5c06\u6536\u5230 <code>undefined</code>\uff0c\u8ba1\u7b97\u7ed3\u679c\u4e3a <code>NaN</code>\u3002</li> </ul> <pre><code>// \u907f\u514d\u6536\u5230\u5f02\u5e38\u503c\u6216\u662f undefined\nfunction abs(x) {\n if (typeof x !== 'number') {\n  throw 'Not a number';\n }\n if (x &gt;= 0) {\n  return x;\n } else {\n  return -x;\n }\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#arguments","title":"arguments \u5bf9\u8c61","text":"<p>JavaScript\u8fd8\u6709\u4e00\u4e2a\u514d\u8d39\u8d60\u9001\u7684\u5173\u952e\u5b57arguments\uff0c\u5b83\u53ea\u5728\u51fd\u6570\u5185\u90e8\u8d77\u4f5c\u7528\uff0c\u5e76\u4e14\u6c38\u8fdc\u6307\u5411\u5f53\u524d\u51fd\u6570\u7684\u8c03\u7528\u8005\u4f20\u5165\u7684\u6240\u6709\u53c2\u6570\u3002arguments \u7c7b\u4f3c Array\uff0c\u4f46\u5b83\u4e0d\u662f\u4e00\u4e2aArray\u3002</p> <pre><code>function foo(x) {\n console.log('x = ' + x); // 10\n for (var i=0; i&lt;arguments.length; i++) {\n  console.log('arg ' + i + ' = ' + arguments[i]); // 10, 20, 30\n }\n}\nfoo(10, 20, 30);\n\n// \u6839\u636e\u662f\u5426\u4f20\u5165\u4e86\u8be5\u53c2\u6570\u8fdb\u884c\u76f8\u5e94\u5904\u7406\nfunction abs() {\n if (arguments.length === 0) {\n  return 0;\n }\n var x = arguments[0];\n return x &gt;= 0 ? x : -x;\n}\nabs(); // 0\nabs(10); // 10\nabs(-9); // 9\n</code></pre> <ul> <li>\u53c2\u6570\u901a\u8fc7\u503c\u4f20\u9012<ul> <li>\u51fd\u6570\u8c03\u7528\u4e2d\u7684\u53c2\u6570\uff08parameter\uff09\u662f\u51fd\u6570\u7684\u53c2\u6570\uff08argument\uff09\u3002</li> <li>JavaScript \u53c2\u6570\u901a\u8fc7\u503c\u4f20\u9012\uff1a\u51fd\u6570\u53ea\u77e5\u9053\u503c\uff0c\u800c\u4e0d\u662f\u53c2\u6570\u7684\u4f4d\u7f6e\u3002</li> <li>\u5982\u679c\u51fd\u6570\u6539\u53d8\u4e86\u53c2\u6570\u7684\u503c\uff0c\u5b83\u4e0d\u4f1a\u6539\u53d8\u53c2\u6570\u7684\u539f\u59cb\u503c\u3002</li> </ul> </li> <li>\u5bf9\u8c61\u662f\u7531\u5f15\u7528\u4f20\u9012\u7684<ul> <li>\u5728 JavaScript \u4e2d\uff0c\u5bf9\u8c61\u5f15\u7528\u662f\u503c\u3002</li> <li>\u6b63\u56e0\u5982\u6b64\uff0c\u5bf9\u8c61\u7684\u884c\u4e3a\u5c31\u50cf\u5b83\u4eec\u901a\u8fc7\u5f15\u7528\u6765\u4f20\u9012\uff1a</li> <li>\u5982\u679c\u51fd\u6570\u6539\u53d8\u4e86\u5bf9\u8c61\u5c5e\u6027\uff0c\u5b83\u4e5f\u6539\u53d8\u4e86\u539f\u59cb\u503c\u3002</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#function","title":"Function() \u6784\u9020\u5668","text":"<pre><code>var myFunction = new Function(\"a\", \"b\", \"return a * b\");\n// \u7b49\u4ef7\nvar myFunction = function (a, b) {return a * b};\n</code></pre> <p>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u907f\u514d\u5728 JavaScript \u4e2d\u4f7f\u7528\u00a0new\u00a0\u5173\u952e\u8bcd\u3002</p>"},{"location":"code/JavaScript/js-note/#rest","title":"rest \u53c2\u6570","text":"<pre><code>function foo(a, b, ...rest) {\n console.log('a = ' + a);\n console.log('b = ' + b);\n console.log(rest);\n}\n\nfoo(1, 2, 3, 4, 5);\n// \u7ed3\u679c:\n// a = 1\n// b = 2\n// Array [ 3, 4, 5 ]\n\nfoo(1);\n// \u7ed3\u679c:\n// a = 1\n// b = undefined\n// Array []\n</code></pre> <ul> <li>rest\u53c2\u6570\u53ea\u80fd\u5199\u5728\u6700\u540e\uff0c\u524d\u9762\u7528\u2026\u6807\u8bc6\uff0c\u4ece\u8fd0\u884c\u7ed3\u679c\u53ef\u77e5\uff0c\u4f20\u5165\u7684\u53c2\u6570\u5148\u7ed1\u5b9aa\u3001b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4ee5\u6570\u7ec4\u5f62\u5f0f\u4ea4\u7ed9\u53d8\u91cfrest\u3002</li> <li>\u6ce8\u610f\uff1a\u82e5\u8c03\u7528\u51fd\u6570\u662f\u672a\u8d4b\u503c\uff0c\u5219\u4e3a\u4f7f\u7528\u7684\u53c2\u6570\u9ed8\u8ba4\u503c\u4e3a undefined\uff0c\u800c rest \u5219\u662f\u7a7a\u6570\u7ec4\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#_13","title":"\u53d8\u91cf\u4f5c\u7528\u57df","text":"<p>\u7531\u4e8eJavaScript\u7684\u51fd\u6570\u53ef\u4ee5\u5d4c\u5957\uff0c\u6b64\u65f6\uff0c\u5185\u90e8\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u51fd\u6570\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u53cd\u8fc7\u6765\u5219\u4e0d\u884c.</p> <pre><code>function foo() {\n var x = 1;\n function bar() {\n  var y = x + 1; // bar\u53ef\u4ee5\u8bbf\u95eefoo\u7684\u53d8\u91cfx!\n }\n var z = y + 1; // ReferenceError! foo\u4e0d\u53ef\u4ee5\u8bbf\u95eebar\u7684\u53d8\u91cfy!\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#_14","title":"\u53d8\u91cf\u63d0\u5347","text":"<p>JavaScript\u7684\u51fd\u6570\u5b9a\u4e49\u6709\u4e2a\u7279\u70b9\uff0c\u5b83\u4f1a\u5148\u626b\u63cf\u6574\u4e2a\u51fd\u6570\u4f53\u7684\u8bed\u53e5\uff0c\u628a\u6240\u6709\u7533\u660e\u7684\u53d8\u91cf\u201c\u63d0\u5347\u201d\u5230\u51fd\u6570\u9876\u90e8\u3002\u4e0b\u4f8b\u4e2d\uff0c\u867d\u7136\u662fstrict\u6a21\u5f0f\uff0c\u4f46\u8bed\u53e5 <code>var x = 'Hello, ' + y;</code> \u5e76\u4e0d\u62a5\u9519\uff0c\u539f\u56e0\u662f\u53d8\u91cfy\u5728\u7a0d\u540e\u7533\u660e\u4e86\u3002\u4f46\u662fconsole.log\u663e\u793aHello, undefined\uff0c\u8bf4\u660e\u53d8\u91cfy\u7684\u503c\u4e3a undefined\u3002\u8fd9\u6b63\u662f\u56e0\u4e3aJavaScript\u5f15\u64ce\u81ea\u52a8\u63d0\u5347\u4e86\u53d8\u91cfy\u7684\u58f0\u660e\uff0c\u4f46\u4e0d\u4f1a\u63d0\u5347\u53d8\u91cfy\u7684\u8d4b\u503c\u3002</p> <pre><code>'use strict';\n\nfunction foo() {\n var x = 'Hello, ' + y;\n console.log(x);\n var y = 'Bob';\n}\n\nfoo();\n</code></pre> <p>\u7531\u4e8eJavaScript\u7684\u8fd9\u4e00\u602a\u5f02\u7684\u201c\u7279\u6027\u201d\uff0c\u6211\u4eec\u5728\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u53d8\u91cf\u65f6\uff0c\u8bf7\u4e25\u683c\u9075\u5b88\u201c\u5728\u51fd\u6570\u5185\u90e8\u9996\u5148\u7533\u660e\u6240\u6709\u53d8\u91cf\u201d\u8fd9\u4e00\u89c4\u5219\u3002\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u7528\u4e00\u4e2avar\u7533\u660e\u51fd\u6570\u5185\u90e8\u7528\u5230\u7684\u6240\u6709\u53d8\u91cf.</p> <pre><code>function foo() {\n var\n  x = 1, // x\u521d\u59cb\u5316\u4e3a1\n  y = x + 1, // y\u521d\u59cb\u5316\u4e3a2\n  z, i; // z\u548ci\u4e3aundefined\n // \u5176\u4ed6\u8bed\u53e5:\n for (i=0; i&lt;100; i++) {\n  ...\n }\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#_15","title":"\u5168\u5c40\u4f5c\u7528\u57df","text":"<ul> <li>\u4e0d\u5728\u4efb\u4f55\u51fd\u6570\u5185\u5b9a\u4e49\u7684\u53d8\u91cf\u5c31\u5177\u6709\u5168\u5c40\u4f5c\u7528\u57df\u3002\u5b9e\u9645\u4e0a\uff0cJavaScript\u9ed8\u8ba4\u6709\u4e00\u4e2a\u5168\u5c40\u5bf9\u8c61window\uff0c\u5168\u5c40\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u5b9e\u9645\u4e0a\u88ab\u7ed1\u5b9a\u5230window\u7684\u4e00\u4e2a\u5c5e\u6027\u3002</li> <li>\u7531\u4e8e\u51fd\u6570\u5b9a\u4e49\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4ee5\u53d8\u91cf\u65b9\u5f0fvar foo = function () {}\u5b9a\u4e49\u7684\u51fd\u6570\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u56e0\u6b64\uff0c\u9876\u5c42\u51fd\u6570\u7684\u5b9a\u4e49\u4e5f\u88ab\u89c6\u4e3a\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u5e76\u7ed1\u5b9a\u5230window\u5bf9\u8c61\u3002</li> </ul> <pre><code>var course = 'Learn JavaScript';\nalert(course); // 'Learn JavaScript'\nalert(window.course); // 'Learn JavaScript'\n</code></pre> <pre><code>// \u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u6bcf\u6b21\u76f4\u63a5\u8c03\u7528\u7684alert()\u51fd\u6570\u5176\u5b9e\u4e5f\u662fwindow\u7684\u4e00\u4e2a\u53d8\u91cf\nwindow.alert('\u8c03\u7528window.alert()');\n// \u628aalert\u4fdd\u5b58\u5230\u53e6\u4e00\u4e2a\u53d8\u91cf:\nvar old_alert = window.alert;\n// \u7ed9alert\u8d4b\u4e00\u4e2a\u65b0\u51fd\u6570:\nwindow.alert = function () {}\nalert('\u65e0\u6cd5\u7528alert()\u663e\u793a\u4e86!');\n// \u6062\u590dalert:\nwindow.alert = old_alert;\nalert('\u53c8\u53ef\u4ee5\u7528alert()\u4e86!');\n</code></pre> <p>\u8fd9\u8bf4\u660eJavaScript\u5b9e\u9645\u4e0a\u53ea\u6709\u4e00\u4e2a\u5168\u5c40\u4f5c\u7528\u57df\u3002\u4efb\u4f55\u53d8\u91cf\uff08\u51fd\u6570\u4e5f\u89c6\u4e3a\u53d8\u91cf\uff09\uff0c\u5982\u679c\u6ca1\u6709\u5728\u5f53\u524d\u51fd\u6570\u4f5c\u7528\u57df\u4e2d\u627e\u5230\uff0c\u5c31\u4f1a\u7ee7\u7eed\u5f80\u4e0a\u67e5\u627e\uff0c\u6700\u540e\u5982\u679c\u5728\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\u4e5f\u6ca1\u6709\u627e\u5230\uff0c\u5219\u62a5ReferenceError\u9519\u8bef\u3002</p>"},{"location":"code/JavaScript/js-note/#_16","title":"\u547d\u540d\u7a7a\u95f4","text":"<ul> <li>\u5168\u5c40\u53d8\u91cf\u4f1a\u7ed1\u5b9a\u5230window\u4e0a\uff0c\u4e0d\u540c\u7684JavaScript\u6587\u4ef6\u5982\u679c\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u6216\u8005\u5b9a\u4e49\u4e86\u76f8\u540c\u540d\u5b57\u7684\u9876\u5c42\u51fd\u6570\uff0c\u90fd\u4f1a\u9020\u6210\u547d\u540d\u51b2\u7a81\uff0c\u5e76\u4e14\u5f88\u96be\u88ab\u53d1\u73b0\u3002</li> <li>\u51cf\u5c11\u51b2\u7a81\u7684\u4e00\u4e2a\u65b9\u6cd5\u662f\u628a\u81ea\u5df1\u7684\u6240\u6709\u53d8\u91cf\u548c\u51fd\u6570\u5168\u90e8\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e2d\u3002</li> <li>\u8bb8\u591a\u8457\u540d\u7684JavaScript\u5e93\u90fd\u662f\u8fd9\u4e48\u5e72\u7684\uff1ajQuery\uff0cYUI\uff0cunderscore\u7b49\u7b49\u3002</li> </ul> <pre><code>// \u552f\u4e00\u7684\u5168\u5c40\u53d8\u91cfMYAPP:\nvar MYAPP = {};\n\n// \u5176\u4ed6\u53d8\u91cf:\nMYAPP.name = 'myapp';\nMYAPP.version = 1.0;\n\n// \u5176\u4ed6\u51fd\u6570:\nMYAPP.foo = function () {\n return 'foo';\n};\n</code></pre>"},{"location":"code/JavaScript/js-note/#let","title":"\u5c40\u90e8\u4f5c\u7528\u57df let","text":"<ul> <li>\u7531\u4e8eJavaScript\u7684\u53d8\u91cf\u4f5c\u7528\u57df\u5b9e\u9645\u4e0a\u662f\u51fd\u6570\u5185\u90e8\uff0c\u6211\u4eec\u5728for\u5faa\u73af\u7b49\u8bed\u53e5\u5757\u4e2d\u662f\u65e0\u6cd5\u5b9a\u4e49\u5177\u6709\u5c40\u90e8\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u7684\u3002</li> <li>\u4e3a\u4e86\u89e3\u51b3\u5757\u7ea7\u4f5c\u7528\u57df\uff0cES6\u5f15\u5165\u4e86\u65b0\u7684\u5173\u952e\u5b57 <code>let</code>\uff0c\u7528let\u66ff\u4ee3var\u53ef\u4ee5\u7533\u660e\u4e00\u4e2a\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u3002</li> </ul> <pre><code>function foo() {\n for (var i=0; i&lt;100; i++) {\n  //\n }\n i += 100; // \u4ecd\u7136\u53ef\u4ee5\u5f15\u7528\u53d8\u91cfi\n}\n\nfunction foo() {\n var sum = 0;\n for (let i=0; i&lt;100; i++) {\n  sum += i;\n }\n // SyntaxError:\n i += 1;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#const","title":"\u5e38\u91cf const","text":"<ul> <li>ES6\u6807\u51c6\u5f15\u5165\u4e86\u65b0\u7684\u5173\u952e\u5b57 <code>const</code> \u6765\u5b9a\u4e49\u5e38\u91cf\uff0cconst\u4e0elet\u90fd\u5177\u6709\u5757\u7ea7\u4f5c\u7528\u57df\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#_17","title":"\u89e3\u6784\u8d4b\u503c","text":"<ul> <li>\u3010\u7c7b\u4f3c Python \u4e2d\u7684\u5e8f\u5217\u89e3\u5305\u3011</li> <li>\u5982\u679c\u9700\u8981\u4ece\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u53d6\u51fa\u82e5\u5e72\u5c5e\u6027\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\uff0c\u4fbf\u4e8e\u5feb\u901f\u83b7\u53d6\u5bf9\u8c61\u7684\u6307\u5b9a\u5c5e\u6027\u3002<ul> <li>\u6ce8\u610f\uff0c\u5bf9\u6570\u7ec4\u5143\u7d20\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\u65f6\uff0c\u591a\u4e2a\u53d8\u91cf\u8981\u7528<code>[...]</code>\u62ec\u8d77\u6765\u3002<ul> <li>\u652f\u6301\u5d4c\u5957</li> </ul> </li> <li>\u89e3\u6784\u8d4b\u503c\u8fd8\u53ef\u4ee5\u5ffd\u7565\u67d0\u4e9b\u5143\u7d20</li> <li>\u5982\u679c\u9700\u8981\u4ece\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u53d6\u51fa\u82e5\u5e72\u5c5e\u6027\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\uff0c\u4fbf\u4e8e\u5feb\u901f\u83b7\u53d6\u5bf9\u8c61\u7684\u6307\u5b9a\u5c5e\u6027<ul> <li>\u4f8b\u5982, <code>var {name, address: {city, zip}} = person;</code>, \u6ce8\u610f\u6b64\u65f6\u6ca1\u6709\u58f0\u660e address \u53d8\u91cf</li> <li>\u540c\u6837\u53ef\u4ee5\u76f4\u63a5\u5bf9\u5d4c\u5957\u7684\u5bf9\u8c61\u5c5e\u6027\u8fdb\u884c\u8d4b\u503c\uff0c\u53ea\u8981\u4fdd\u8bc1\u5bf9\u5e94\u7684\u5c42\u6b21\u662f\u4e00\u81f4\u7684</li> <li>\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u5bf9\u5bf9\u8c61\u5c5e\u6027\u8fdb\u884c\u8d4b\u503c\u65f6\uff0c\u5982\u679c\u5bf9\u5e94\u7684\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u53d8\u91cf\u5c06\u88ab\u8d4b\u503c\u4e3a <code>undefined</code>\uff0c\u8fd9\u548c\u5f15\u7528\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u83b7\u5f97undefined\u662f\u4e00\u81f4\u7684</li> <li>\u53ef\u4ee5\u4f7f\u7528\u522b\u540d, \u4f8b\u5982 <code>let {name, passport:id} = person;</code>, \u6ce8\u610f\u6b64\u65f6\u6ca1\u6709\u58f0\u660e passport \u53d8\u91cf, \u5b83\u4ec5\u4ec5\u662f\u4e3a\u4e86\u53d6\u51fa person \u5bf9\u8c61\u7684 passport \u5c5e\u6027\u8d4b\u503c\u7ed9 id</li> <li>\u8bbe\u7f6e\u9ed8\u8ba4\u503c (\u66ff\u4ee3 undefined) <code>var {name, single=true} = person;</code></li> <li>\u5982\u679c\u53d8\u91cf\u5df2\u7ecf\u58f0\u660e\u8fc7\u4e86, \u4e3a\u4e86\u907f\u514d\u88ab\u5f15\u64ce\u89e3\u91ca\u4e3a\u5757\u4ee3\u7801 <code>{}</code>, \u53ef\u4ee5\u52a0\u4e0a\u62ec\u53f7\u5c06\u89e3\u6784\u8d4b\u503c\u5199\u6210 <code>({x, y} = { name: '\u5c0f\u660e', x: 100, y: 200});</code></li> </ul> </li> </ul> </li> <li>\u6848\u4f8b<ul> <li>\u4ea4\u6362\u53d8\u91cf\u7684\u503c, <code>[x, y] = [y, x]</code></li> <li>\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u76f4\u63a5\u628a\u5bf9\u8c61\u7684\u5c5e\u6027\u7ed1\u5b9a\u5230\u53d8\u91cf\u4e2d<ul> <li>\u4f8b\u5982 <code>function buildDate({year, month, day, hour=0, minute=0, second=0}) {}</code></li> </ul> </li> </ul> </li> </ul> <pre><code>let [x, [y, z]] = ['hello', ['JavaScript', 'ES6']];\nx; // 'hello'\ny; // 'JavaScript'\nz; // 'ES6'\n\nlet [, , z] = ['hello', 'JavaScript', 'ES6']; // \u5ffd\u7565\u524d\u4e24\u4e2a\u5143\u7d20\uff0c\u53ea\u5bf9z\u8d4b\u503c\u7b2c\u4e09\u4e2a\u5143\u7d20\nz; // 'ES6'\n\n\n// \u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u8fd8\u53ef\u4ee5\u5d4c\u5957\nvar person = {\n name: '\u5c0f\u660e',\n age: 20,\n gender: 'male',\n passport: 'G-12345678',\n school: 'No.4 middle school',\n address: {\n  city: 'Beijing',\n  street: 'No.1 Road',\n  zipcode: '100001'\n }\n};\nvar {name, address: {city, zip}} = person;\nname; // '\u5c0f\u660e'\ncity; // 'Beijing'\nzip; // undefined, \u56e0\u4e3a\u5c5e\u6027\u540d\u662fzipcode\u800c\u4e0d\u662fzip\n// \u6ce8\u610f: address\u4e0d\u662f\u53d8\u91cf\uff0c\u800c\u662f\u4e3a\u4e86\u8ba9city\u548czip\u83b7\u5f97\u5d4c\u5957\u7684address\u5bf9\u8c61\u7684\u5c5e\u6027:\naddress; // Uncaught ReferenceError: address is not defined\n</code></pre> <ul> <li>\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u5bf9\u5bf9\u8c61\u5c5e\u6027\u8fdb\u884c\u8d4b\u503c\u65f6\uff0c\u5982\u679c\u5bf9\u5e94\u7684\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u53d8\u91cf\u5c06\u88ab\u8d4b\u503c\u4e3aundefined\uff0c\u8fd9\u548c\u5f15\u7528\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u83b7\u5f97undefined\u662f\u4e00\u81f4\u7684\u3002\u5982\u679c\u8981\u4f7f\u7528\u7684\u53d8\u91cf\u540d\u548c\u5c5e\u6027\u540d\u4e0d\u4e00\u81f4\uff0c\u53ef\u4ee5\u540e\u9762\u52a0\u5192\u53f7\u3002</li> <li>\u89e3\u6784\u8d4b\u503c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u8fd4\u56deundefined\u7684\u95ee\u9898\u3002</li> </ul> <pre><code>var person = {\n name: '\u5c0f\u660e',\n age: 20,\n gender: 'male',\n passport: 'G-12345678',\n school: 'No.4 middle school'\n};\n\n// \u628apassport\u5c5e\u6027\u8d4b\u503c\u7ed9\u53d8\u91cfid:\nlet {name, passport:id} = person;\nname; // '\u5c0f\u660e'\nid; // 'G-12345678'\n// \u6ce8\u610f: passport\u4e0d\u662f\u53d8\u91cf\uff0c\u800c\u662f\u4e3a\u4e86\u8ba9\u53d8\u91cfid\u83b7\u5f97passport\u5c5e\u6027:\npassport; // Uncaught ReferenceError: passport is not defined\n\n\n// \u5982\u679cperson\u5bf9\u8c61\u6ca1\u6709single\u5c5e\u6027\uff0c\u9ed8\u8ba4\u8d4b\u503c\u4e3atrue:\nvar {name, single=true} = person;\nname; // '\u5c0f\u660e'\nsingle; // true\n</code></pre> <p>\u6ce8\u610f\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u8fd9\u662f\u56e0\u4e3aJavaScript\u5f15\u64ce\u628a { \u5f00\u5934\u7684\u8bed\u53e5\u5f53\u4f5c\u4e86\u5757\u5904\u7406\uff0c\u4e8e\u662f=\u4e0d\u518d\u5408\u6cd5\u3002\u89e3\u51b3\u65b9\u6cd5\u662f\u7528\u5c0f\u62ec\u53f7\u62ec\u8d77\u6765\u3002</p> <pre><code>// \u58f0\u660e\u53d8\u91cf:\nvar x, y;\n// \u89e3\u6784\u8d4b\u503c:\n{x, y} = { name: '\u5c0f\u660e', x: 100, y: 200};\n// \u8bed\u6cd5\u9519\u8bef: Uncaught SyntaxError: Unexpected token =\n\n// \u52a0\u4e00\u4e2a () \u6765\u907f\u514d\n({x, y} = { name: '\u5c0f\u660e', x: 100, y: 200});\n</code></pre>"},{"location":"code/JavaScript/js-note/#_18","title":"\u6848\u4f8b","text":"<ul> <li>\u4ea4\u6362\u53d8\u91cf\u7684\u503c, <code>[x, y] = [y, x]</code></li> <li>\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u76f4\u63a5\u628a\u5bf9\u8c61\u7684\u5c5e\u6027\u7ed1\u5b9a\u5230\u53d8\u91cf\u4e2d<ul> <li>\u4f8b\u5982 <code>function buildDate({year, month, day, hour=0, minute=0, second=0}) {}</code></li> </ul> </li> </ul> <pre><code>// \u4ea4\u6362\u53d8\u91cf\nvar x=1, y=2;\n[x, y] = [y, x]\n\n// \u5feb\u901f\u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u57df\u540d\u548c\u8def\u5f84\nvar {hostname:domain, pathname:path} = location;\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u76f4\u63a5\u628a\u5bf9\u8c61\u7684\u5c5e\u6027\u7ed1\u5b9a\u5230\u53d8\u91cf\u4e2d\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u4e00\u4e2aDate\u5bf9\u8c61\u3002\u5b83\u7684\u65b9\u4fbf\u4e4b\u5904\u5728\u4e8e\u4f20\u5165\u7684\u5bf9\u8c61\u53ea\u9700\u8981year\u3001month\u548cday\u8fd9\u4e09\u4e2a\u5c5e\u6027\u3002\u4e5f\u53ef\u4ee5\u4f20\u5165hour\u3001minute\u548csecond\u5c5e\u6027\u3002</p> <pre><code>function buildDate({year, month, day, hour=0, minute=0, second=0}) {\n return new Date(year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second);\n}\n\nbuildDate({ year: 2017, month: 1, day: 1 });\n// Sun Jan 01 2017 00:00:00 GMT+0800 (CST)\nbuildDate({ year: 2017, month: 1, day: 1, hour: 20, minute: 15 });\n// Sun Jan 01 2017 20:15:00 GMT+0800 (CST)\n</code></pre>"},{"location":"code/JavaScript/js-note/#_19","title":"\u65b9\u6cd5","text":"<ul> <li>\u5728\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u7ed1\u5b9a\u51fd\u6570\uff0c\u79f0\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</li> <li><code>this</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u53d8\u91cf\uff0c\u5b83\u59cb\u7ec8\u6307\u5411\u5f53\u524d\u5bf9\u8c61;<ul> <li>\u5728\u975e\u4e25\u683c\u6a21\u5f0f\u4e0b, \u5168\u5c40\u53d8\u91cf this \u6307\u5411\u7684\u662f\u5168\u5c40 window \u5bf9\u8c61 (\u56e0\u6b64\u6709 <code>this === window</code>), \u56e0\u6b64\u60f3\u8981\u5c06 object \u4e2d\u7684\u65b9\u6cd5\u5206\u79bb\u6210\u5168\u5c40\u7684\u51fd\u6570, \u51fd\u6570\u5185\u90e8\u4f7f\u7528\u7684 this \u6307\u5411\u5c31\u6709\u95ee\u9898</li> <li>\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b, \u5b9a\u4e49 this \u4e3a undefined</li> </ul> </li> <li>\u8981\u6307\u5b9a\u51fd\u6570\u7684this\u6307\u5411\u54ea\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u51fd\u6570\u672c\u8eab\u7684 <code>apply</code> \u65b9\u6cd5<ul> <li>\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u5c31\u662f\u9700\u8981\u7ed1\u5b9a\u7684this\u53d8\u91cf\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fArray\uff0c\u8868\u793a\u51fd\u6570\u672c\u8eab\u7684\u53c2\u6570\u3002</li> <li>\u4f8b\u5982, <code>getAge.apply(xiaoming, []);</code> \u5c06 getAge \u51fd\u6570\u5185\u7684 this \u5b9a\u4e49\u4e3a xiaoming \u8fd9\u4e2a object, \u4ece\u800c\u80fd\u591f\u5f97\u5230\u5176\u51fa\u751f\u65e5\u671f</li> </ul> </li> <li>\u53e6\u4e00\u4e2a\u76f8\u5173\u7684\u662f <code>call()</code> \u65b9\u6cd5, \u533a\u522b\u5728\u4e8e<code>call()</code> \u628a\u53c2\u6570\u6309\u987a\u5e8f\u4f20\u5165\u3002<ul> <li>\u4f8b\u5982, \u53ef\u4ee5 <code>Math.max.apply(null, [3, 5, 4]);</code>, <code>Math.max.call(null, 3, 5, 4);</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#this","title":"this \u5173\u952e\u8bcd","text":"<ul> <li>JavaScript\u00a0this\u00a0\u5173\u952e\u8bcd\u6307\u7684\u662f\u5b83\u6240\u5c5e\u7684\u5bf9\u8c61\u3002\u5b83\u62e5\u6709\u4e0d\u540c\u7684\u503c\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5b83\u7684\u4f7f\u7528\u4f4d\u7f6e\uff1a<ul> <li>\u5728\u65b9\u6cd5\u4e2d\uff0cthis\u00a0\u6307\u7684\u662f\u6240\u6709\u8005\u5bf9\u8c61\u3002</li> <li>\u5355\u72ec\u7684\u60c5\u51b5\u4e0b\uff0cthis\u00a0\u6307\u7684\u662f\u5168\u5c40\u5bf9\u8c61\u3002</li> <li>\u5728\u51fd\u6570\u4e2d\uff0cthis\u00a0\u6307\u7684\u662f\u5168\u5c40\u5bf9\u8c61\u3002</li> <li>\u5728\u51fd\u6570\u4e2d\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0cthis\u00a0\u662f undefined\u3002</li> <li>\u5728\u4e8b\u4ef6\u4e2d\uff0cthis\u00a0\u6307\u7684\u662f\u63a5\u6536\u4e8b\u4ef6\u7684\u5143\u7d20\u3002\u3010HTML \u5143\u7d20, \u89c1\u4e0b\u3011</li> </ul> </li> <li>\u50cf\u00a0call()\u00a0\u548c\u00a0apply()\u00a0\u8fd9\u6837\u7684\u65b9\u6cd5\u53ef\u4ee5\u5c06 this \u5f15\u7528\u5230\u4efb\u4f55\u5bf9\u8c61\u3002</li> </ul> <pre><code>&lt;button onclick=\"this.style.display='none'\"&gt;\n  \u70b9\u51fb\u6765\u5220\u9664\u6211\uff01\n&lt;/button&gt;\n</code></pre> <p>\u5bf9\u8c61\u7684\u65b9\u6cd5</p> <pre><code>var xiaoming = {\n name: '\u5c0f\u660e',\n birth: 1990,\n age: function () {\n  var y = new Date().getFullYear();\n  return y - this.birth;\n }\n};\n\nxiaoming.age; // function xiaoming.age()\nxiaoming.age(); // \u4eca\u5e74\u8c03\u7528\u662f25,\u660e\u5e74\u8c03\u7528\u5c31\u53d8\u621026\u4e86\n</code></pre> <pre><code>function getAge() {\n var y = new Date().getFullYear();\n return y - this.birth;\n}\n\nvar xiaoming = {\n name: '\u5c0f\u660e',\n birth: 1990,\n age: getAge\n};\n\nxiaoming.age(); // 25, \u6b63\u5e38\u7ed3\u679c\ngetAge(); // NaN\n// \u4e0b\u9762\u8fd9\u6837\u4e5f\u4e0d\u884c\nvar fn = xiaoming.age; // \u5148\u62ff\u5230xiaoming\u7684age\u51fd\u6570\nfn(); // NaN\n// \u800c\u5728 strict \u6a21\u5f0f\u4e0b\uff0c\u4e0a\u9762\u8fd9\u79cd\u5148\u53d6\u51fa\u5bf9\u8c61\u65b9\u6cd5\u7136\u540e\u8c03\u7528\u4f1a\u62a5\u9519\nfn(); // Uncaught TypeError: Cannot read property 'birth' of undefined\n</code></pre> <ul> <li>\u6ce8\u610f\u5230\uff0c\u4e0a\u9762\u5355\u72ec\u8c03\u7528 getAge \u51fd\u6570\uff0c\u6216\u8005\u5728\u975e strict \u6a21\u5f0f\u4e0b\u5c06\u5bf9\u8c61\u65b9\u6cd5\u53d6\u51fa\u4f5c\u4e3a\u51fd\u6570\uff0c\u5219\u5176\uff08this\uff09\u6307\u5411\u7684\u662f\u5168\u5c40\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f <code>window</code>\uff0c\u56e0\u6b64\u53ef\u80fd\u5bf9\u8c61\u6ca1\u6709\u8be5\u5c5e\u6027/\u65b9\u6cd5\uff1b</li> <li>\u800c\u5728 strict \u6a21\u5f0f\u4e0b\uff0c\u91cd\u65b0\u62ff\u5230\u7684\u5bf9\u8c61\u65b9\u6cd5\u6307\u5411\u7684\u662f <code>undefined</code>\uff0c\u8fd9\u65f6\u5019\u8c03\u7528\u5176\u5c5e\u6027/\u65b9\u6cd5\u4f1a\u62a5\u9519\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#apply-call","title":"apply(), call()","text":"<ul> <li>\u867d\u7136\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u51fd\u6570\u8c03\u7528\u4e2d\uff0c\u6839\u636e\u662f\u5426\u662fstrict\u6a21\u5f0f\uff0cthis\u6307\u5411undefined\u6216window\uff0c\u4e0d\u8fc7\uff0c\u6211\u4eec\u8fd8\u662f\u53ef\u4ee5\u63a7\u5236this\u7684\u6307\u5411\u7684\uff01</li> <li>\u8981\u6307\u5b9a\u51fd\u6570\u7684this\u6307\u5411\u54ea\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u51fd\u6570\u672c\u8eab\u7684 <code>apply</code> \u65b9\u6cd5<ul> <li>\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u5c31\u662f\u9700\u8981\u7ed1\u5b9a\u7684this\u53d8\u91cf\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fArray\uff0c\u8868\u793a\u51fd\u6570\u672c\u8eab\u7684\u53c2\u6570\u3002</li> </ul> </li> <li>\u53e6\u4e00\u4e2a\u76f8\u5173\u7684\u662f <code>call()</code> \u65b9\u6cd5, \u533a\u522b\u5728\u4e8e<code>call()</code> \u628a\u53c2\u6570\u6309\u987a\u5e8f\u4f20\u5165\u3002</li> </ul> <pre><code>function getAge() {\n var y = new Date().getFullYear();\n return y - this.birth;\n}\n\nvar xiaoming = {\n name: '\u5c0f\u660e',\n birth: 1990,\n age: getAge\n};\n\nxiaoming.age(); // 25\ngetAge.apply(xiaoming, []); // 25, this\u6307\u5411xiaoming, \u53c2\u6570\u4e3a\u7a7a\n</code></pre> <pre><code>// \u6bd4\u5982\u8c03\u7528Math.max(3, 5, 4)\uff0c\u5206\u522b\u7528apply()\u548ccall()\u5b9e\u73b0\u5982\u4e0b\uff1a\nMath.max.apply(null, [3, 5, 4]); // 5\nMath.max.call(null, 3, 5, 4); // 5\n</code></pre> <p>\u53e6\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>var person = {\n fullName: function() {\n  return this.firstName + \" \" + this.lastName;\n }\n}\nvar person1 = {\n firstName:\"Bill\",\n lastName: \"Gates\",\n}\nperson.fullName.call(person1);  // \u5c06\u8fd4\u56de \"Bill Gates\"\n</code></pre>"},{"location":"code/JavaScript/js-note/#_20","title":"\u88c5\u9970\u5668","text":"<ul> <li>\u5229\u7528apply()\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u52a8\u6001\u6539\u53d8\u51fd\u6570\u7684\u884c\u4e3a\u3002</li> <li>JavaScript\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u662f\u52a8\u6001\u7684\uff0c\u5373\u4f7f\u5185\u7f6e\u7684\u51fd\u6570\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u91cd\u65b0\u6307\u5411\u65b0\u7684\u51fd\u6570\u3002</li> <li>\u73b0\u5728\u5047\u5b9a\u6211\u4eec\u60f3\u7edf\u8ba1\u4e00\u4e0b\u4ee3\u7801\u4e00\u5171\u8c03\u7528\u4e86\u591a\u5c11\u6b21parseInt()\uff0c\u53ef\u4ee5\u628a\u6240\u6709\u7684\u8c03\u7528\u90fd\u627e\u51fa\u6765\uff0c\u7136\u540e\u624b\u52a8\u52a0\u4e0acount += 1\uff0c\u4e0d\u8fc7\u8fd9\u6837\u505a\u592a\u50bb\u4e86\u3002\u6700\u4f73\u65b9\u6848\u662f\u7528\u6211\u4eec\u81ea\u5df1\u7684\u51fd\u6570\u66ff\u6362\u6389\u9ed8\u8ba4\u7684parseInt()\u3002</li> </ul> <pre><code>var count = 0;\nvar oldParseInt = parseInt; // \u4fdd\u5b58\u539f\u51fd\u6570\n\nwindow.parseInt = function () {\n count += 1;\n return oldParseInt.apply(null, arguments); // \u8c03\u7528\u539f\u51fd\u6570\n};\n\n// \u6d4b\u8bd5:\nparseInt('10');\nparseInt('20');\nparseInt('30');\nconsole.log('count = ' + count); // 3\n</code></pre>"},{"location":"code/JavaScript/js-note/#higher-order-function","title":"\u9ad8\u9636\u51fd\u6570 Higher-order function","text":"<p>\u67e5\u770b Array \u7684\u5185\u7f6e\u65b9\u6cd5 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array</p> <ul> <li>map<ul> <li><code>arr.map(function (x) {});</code></li> <li>\u6ce8\u610f, \u8fd9\u91cc\u56de\u8c03\u51fd\u6570\u53ea\u7528\u4e86 Array \u7684value, \u4f46\u5b9e\u9645\u4e0a map \u652f\u6301\u7684\u56de\u8c03\u51fd\u6570\u7c7b\u578b\u8fd8\u5305\u62ec <code>map((element, index, array) =&gt; { /* ... */ })</code> \u7b49,</li> <li>\u56e0\u6b64, \u82e5\u91c7\u7528 <code>arr.map(parseInt);</code>, \u7531\u4e8e parseInt \u652f\u6301\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u8fdb\u5236, \u56e0\u6b64\u8c03\u7528\u4f1a\u53d8\u6210 <code>parseInt(arr[i], i)</code>, \u4f1a\u51fa\u9519</li> <li>\u53ef\u4ee5\u5199\u6210 <code>arr.map(c=&gt;parseInt(c));</code></li> </ul> </li> <li>reduce<ul> <li><code>arr.reduce(function (x, y) {})</code></li> <li>\u540c\u6837\u652f\u6301 <code>reduce((previousValue, currentValue, currentIndex, array) =&gt; { /* ... */ } )</code></li> </ul> </li> <li><code>filter()</code>\u628a\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u6839\u636e\u8fd4\u56de\u503c\u662f<code>true</code>\u8fd8\u662f<code>false</code>\u51b3\u5b9a\u4fdd\u7559\u8fd8\u662f\u4e22\u5f03\u8be5\u5143\u7d20</li> <li>sort<ul> <li><code>sort((firstEl, secondEl) =&gt; { /* ... */ } )</code></li> <li>\u6ce8\u610f, js \u6839\u636e\u6bd4\u8f83\u51fd\u6570\u7684\u8fd4\u56de\u503c\u6765\u51b3\u5b9a\u662f\u5426\u8c03\u6574\u4e24\u4e2a\u5143\u7d20\u4e4b\u95f4\u7684\u4f4d\u7f6e, 0 \u8868\u793a\u4e0d\u53d8, \u8d1f\u6570\u8868\u793a firstEl \u5e94\u8be5\u6392\u5728 secondEl \u524d\u9762; \u56e0\u6b64, \u4e00\u822c\u8fd4\u56de -1, 0, 1</li> </ul> </li> <li>every()</li> <li>find(), findIndex() \u641c\u7d22 Array \u4e2d\u7b2c\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u5143\u7d20, \u5206\u522b\u8fd4\u56de\u5143\u7d20\u548c index; \u627e\u4e0d\u5230\u65f6\u5206\u522b\u8fd4\u56de undefined \u548c -1</li> <li>forEach()<ul> <li><code>forEach()</code>\u548c<code>map()</code>\u7c7b\u4f3c\uff0c\u5b83\u4e5f\u628a\u6bcf\u4e2a\u5143\u7d20\u4f9d\u6b21\u4f5c\u7528\u4e8e\u4f20\u5165\u7684\u51fd\u6570\uff0c\u4f46\u4e0d\u4f1a\u8fd4\u56de\u65b0\u7684\u6570\u7ec4\u3002<code>forEach()</code>\u5e38\u7528\u4e8e\u904d\u5386\u6570\u7ec4\uff0c\u56e0\u6b64\uff0c\u4f20\u5165\u7684\u51fd\u6570\u4e0d\u9700\u8981\u8fd4\u56de\u503c</li> </ul> </li> </ul> <p>JavaScript\u7684\u51fd\u6570\u5176\u5b9e\u90fd\u6307\u5411\u67d0\u4e2a\u53d8\u91cf\u3002\u65e2\u7136\u53d8\u91cf\u53ef\u4ee5\u6307\u5411\u51fd\u6570\uff0c\u51fd\u6570\u7684\u53c2\u6570\u80fd\u63a5\u6536\u53d8\u91cf\uff0c\u90a3\u4e48\u4e00\u4e2a\u51fd\u6570\u5c31\u53ef\u4ee5\u63a5\u6536\u53e6\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd9\u79cd\u51fd\u6570\u5c31\u79f0\u4e4b\u4e3a\u9ad8\u9636\u51fd\u6570\u3002</p> <pre><code>function add(x, y, f) {\n return f(x) + f(y);\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#map-reduce","title":"map, reduce","text":"<ul> <li>map<ul> <li><code>arr.map(function (x) {});</code></li> <li>\u6ce8\u610f, \u8fd9\u91cc\u56de\u8c03\u51fd\u6570\u53ea\u7528\u4e86 Array \u7684value, \u4f46\u5b9e\u9645\u4e0a map \u652f\u6301\u7684\u56de\u8c03\u51fd\u6570\u7c7b\u578b\u8fd8\u5305\u62ec <code>map((element, index, array) =&gt; { /* ... */ })</code> \u7b49,</li> <li>\u56e0\u6b64, \u82e5\u91c7\u7528 <code>arr.map(parseInt);</code>, \u7531\u4e8e parseInt \u652f\u6301\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u8fdb\u5236, \u56e0\u6b64\u8c03\u7528\u4f1a\u53d8\u6210 <code>parseInt(arr[i], i)</code>, \u4f1a\u51fa\u9519</li> <li>\u53ef\u4ee5\u5199\u6210 <code>arr.map(c=&gt;parseInt(c));</code></li> </ul> </li> <li>reduce<ul> <li><code>arr.reduce(function (x, y) {})</code></li> </ul> </li> </ul> <pre><code>// map\nfunction pow(x) {\n return x * x;\n}\nvar arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];\nvar results = arr.map(pow); // [1, 4, 9, 16, 25, 36, 49, 64, 81]\nconsole.log(results);\n\n// reduce\nvar arr = [1, 3, 5, 7, 9];\narr.reduce(function (x, y) {\n return x + y;\n}); // 25\n</code></pre>"},{"location":"code/JavaScript/js-note/#filter_1","title":"filter \u65b9\u6cd5","text":"<ul> <li><code>filter()</code>\u628a\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u6839\u636e\u8fd4\u56de\u503c\u662f<code>true</code>\u8fd8\u662f<code>false</code>\u51b3\u5b9a\u4fdd\u7559\u8fd8\u662f\u4e22\u5f03\u8be5\u5143\u7d20</li> </ul> <pre><code>// \u628a\u4e00\u4e2a`Array`\u4e2d\u7684\u7a7a\u5b57\u7b26\u4e32\u5220\u6389\uff0c\u53ef\u4ee5\u8fd9\u4e48\u5199\uff1a\n\nvar arr = ['A', '', 'B', null, undefined, 'C', '  '];\nvar r = arr.filter(function (s) {\n return s &amp;&amp; s.trim(); // \u6ce8\u610f\uff1aIE9\u4ee5\u4e0b\u7684\u7248\u672c\u6ca1\u6709trim()\u65b9\u6cd5\n});\nr; // ['A', 'B', 'C']\n</code></pre> <pre><code>/* \u53bb\u9664\u91cd\u590d\u5143\u7d20 */\nvar\n r,\n arr = ['apple', 'strawberry', 'banana', 'pear', 'apple', 'orange', 'orange', 'strawberry'];\nr = arr.filter(function (element, index, self) {\n return self.indexOf(element) === index;\n});\n</code></pre>"},{"location":"code/JavaScript/js-note/#sort","title":"sort \u65b9\u6cd5","text":"<ul> <li>sort<ul> <li><code>sort((firstEl, secondEl) =&gt; { /* ... */ } )</code></li> <li>\u6ce8\u610f, js \u6839\u636e\u6bd4\u8f83\u51fd\u6570\u7684\u8fd4\u56de\u503c\u6765\u51b3\u5b9a\u662f\u5426\u8c03\u6574\u4e24\u4e2a\u5143\u7d20\u4e4b\u95f4\u7684\u4f4d\u7f6e, 0 \u8868\u793a\u4e0d\u53d8, \u8d1f\u6570\u8868\u793a firstEl \u5e94\u8be5\u6392\u5728 secondEl \u524d\u9762; \u56e0\u6b64, \u4e00\u822c\u8fd4\u56de -1, 0, 1</li> </ul> </li> </ul> <pre><code>// \u6ce8\u610f sort \u9ed8\u8ba4\u662f\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\u6392\u5e8f\u7684 !\n// apple\u6392\u5728\u4e86\u6700\u540e:\n['Google', 'apple', 'Microsoft'].sort(); // ['Google', 'Microsoft\", 'apple']\n// \u65e0\u6cd5\u7406\u89e3\u7684\u7ed3\u679c:\n[10, 20, 1, 2].sort(); // [1, 10, 2, 20]\n</code></pre> <pre><code>/* \u6309\u7167\u6570\u5b57\u5927\u5c0f\u6392\u5e8f */\narr.sort(function (x, y) {\n if (x &lt; y) {\n  return -1;\n }\n if (x &gt; y) {\n  return 1;\n }\n return 0;\n});\nconsole.log(arr); // [1, 2, 10, 20]\n\n/* \u5ffd\u7565\u5927\u5c0f\u5199\u6392\u5e8f */\nvar arr = ['Google', 'apple', 'Microsoft'];\narr.sort(function (s1, s2) {\n x1 = s1.toUpperCase();\n x2 = s2.toUpperCase();\n if (x1 &lt; x2) {\n  return -1;\n }\n if (x1 &gt; x2) {\n  return 1;\n }\n return 0;\n}); // ['apple', 'Google', 'Microsoft']\n</code></pre>"},{"location":"code/JavaScript/js-note/#every-find-findindex-foreach","title":"every, find, findIndex, forEach","text":"<p><code>forEach()</code>\u548c<code>map()</code>\u7c7b\u4f3c\uff0c\u5b83\u4e5f\u628a\u6bcf\u4e2a\u5143\u7d20\u4f9d\u6b21\u4f5c\u7528\u4e8e\u4f20\u5165\u7684\u51fd\u6570\uff0c\u4f46\u4e0d\u4f1a\u8fd4\u56de\u65b0\u7684\u6570\u7ec4\u3002<code>forEach()</code>\u5e38\u7528\u4e8e\u904d\u5386\u6570\u7ec4\uff0c\u56e0\u6b64\uff0c\u4f20\u5165\u7684\u51fd\u6570\u4e0d\u9700\u8981\u8fd4\u56de\u503c</p> <pre><code>var arr = ['Apple', 'pear', 'orange'];\narr.forEach(console.log); // \u4f9d\u6b21\u6253\u5370\u6bcf\u4e2a\u5143\u7d20\n</code></pre>"},{"location":"code/JavaScript/js-note/#_21","title":"\u51fd\u6570\u95ed\u5305","text":"<ul> <li>\u81ea\u8c03\u7528<ul> <li>\u8868\u793a \u521b\u5efa\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u5e76\u7acb\u523b\u6267\u884c</li> <li>\u5f62\u5982 <code>(function (x) {})();</code></li> </ul> </li> <li>\u95ed\u5305\u7684\u4f5c\u7528<ul> <li>\u5b9e\u73b0 \u79c1\u6709\u53d8\u91cf<ul> <li>\u5728\u9762\u5411\u5bf9\u8c61\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u91cc\uff0c\u6bd4\u5982Java\u548cC++\uff0c\u8981\u5728\u5bf9\u8c61\u5185\u90e8\u5c01\u88c5\u4e00\u4e2a\u79c1\u6709\u53d8\u91cf\uff0c\u53ef\u4ee5\u7528<code>private</code>\u4fee\u9970\u4e00\u4e2a\u6210\u5458\u53d8\u91cf\u3002</li> <li>\u5728\u6ca1\u6709<code>class</code>\u673a\u5236\uff0c\u53ea\u6709\u51fd\u6570\u7684\u8bed\u8a00\u91cc\uff0c\u501f\u52a9\u95ed\u5305\uff0c\u540c\u6837\u53ef\u4ee5\u5c01\u88c5\u4e00\u4e2a\u79c1\u6709\u53d8\u91cf</li> </ul> </li> <li>\u95ed\u5305\u8fd8\u53ef\u4ee5\u628a\u591a\u53c2\u6570\u7684\u51fd\u6570\u53d8\u6210\u5355\u53c2\u6570\u7684\u51fd\u6570<ul> <li>\u4f8b\u5982\u5c06 <code>Math.pow(x, y)</code> \u51fd\u6570, \u5b9e\u73b0 <code>make_pow(n)</code> \u5206\u522b\u5c01\u88c5\u4e3a \u65b0\u7684\u51fd\u6570 <code>pow2</code>\u548c<code>pow3</code></li> </ul> </li> </ul> </li> </ul> <pre><code>/* \u5229\u7528\u95ed\u5305\u5b9e\u73b0\u79c1\u6709\u53d8\u91cf\n\u4f8b\u5b50: \u8ba1\u6570\u5668 */\nfunction create_counter(initial) {\n var x = initial || 0;\n return {\n  inc: function () {\n   x += 1;\n   return x;\n  },\n };\n}\nvar c1 = create_counter();\nc1.inc(); // 1\nc1.inc(); // 2\nc1.inc(); // 3\n\nvar c2 = create_counter(10);\nc2.inc(); // 11\nc2.inc(); // 12\nc2.inc(); // 13\n</code></pre> <p>\u5728\u8fd4\u56de\u7684\u5bf9\u8c61\u4e2d\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u95ed\u5305\uff0c\u8be5\u95ed\u5305\u643a\u5e26\u4e86\u5c40\u90e8\u53d8\u91cf<code>x</code>\uff0c\u5e76\u4e14\uff0c\u4ece\u5916\u90e8\u4ee3\u7801\u6839\u672c\u65e0\u6cd5\u8bbf\u95ee\u5230\u53d8\u91cf<code>x</code>\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u95ed\u5305\u5c31\u662f\u643a\u5e26\u72b6\u6001\u7684\u51fd\u6570\uff0c\u5e76\u4e14\u5b83\u7684\u72b6\u6001\u53ef\u4ee5\u5b8c\u5168\u5bf9\u5916\u9690\u85cf\u8d77\u6765\u3002</p> <pre><code>/* \u5229\u7528\u95ed\u5305\u5305\u88c5\u591a\u53c2\u6570\u51fd\u6570 */\nfunction make_pow(n) {\n return function (x) {\n  return Math.pow(x, n);\n }\n}\n\n// \u521b\u5efa\u4e24\u4e2a\u65b0\u51fd\u6570:\nvar pow2 = make_pow(2);\nvar pow3 = make_pow(3);\n\nconsole.log(pow2(5)); // 25\nconsole.log(pow3(7)); // 343\n</code></pre>"},{"location":"code/JavaScript/js-note/#_22","title":"\u81ea\u8c03\u7528","text":"<pre><code>// \u521b\u5efa\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u5e76\u7acb\u523b\u6267\u884c\n(function (x) {\n return x * x;\n})(3); // 9\n\nvar add = (function () {\n var counter = 0;\n return function () {return counter += 1;}\n})();\n\nadd();\nadd();\nadd();\n\n// \u8ba1\u6570\u5668\u76ee\u524d\u662f 3 \n</code></pre> <ul> <li>\u53d8\u91cf add \u7684\u8d4b\u503c\u662f\u81ea\u8c03\u7528\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002</li> <li>\u8fd9\u4e2a\u81ea\u8c03\u7528\u51fd\u6570\u53ea\u8fd0\u884c\u4e00\u6b21\u3002\u5b83\u8bbe\u7f6e\u8ba1\u6570\u5668\u4e3a\u96f6\uff080\uff09\uff0c\u5e76\u8fd4\u56de\u51fd\u6570\u8868\u8fbe\u5f0f\u3002</li> <li>\u8fd9\u6837 add \u6210\u4e3a\u4e86\u51fd\u6570\u3002\u6700\u201c\u7cbe\u5f69\u7684\u201d\u90e8\u5206\u662f\u5b83\u80fd\u591f\u8bbf\u95ee\u7236\u4f5c\u7528\u57df\u4e2d\u7684\u8ba1\u6570\u5668\u3002</li> <li>\u8fd9\u88ab\u79f0\u4e3a JavaScript \u95ed\u5305\u3002\u5b83\u4f7f\u51fd\u6570\u62e5\u6709\u201c\u79c1\u6709\u201d\u53d8\u91cf\u6210\u4e3a\u53ef\u80fd\u3002</li> <li>\u8ba1\u6570\u5668\u88ab\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u7684\u4f5c\u7528\u57df\u4fdd\u62a4\uff0c\u5e76\u4e14\u53ea\u80fd\u4f7f\u7528 add \u51fd\u6570\u6765\u4fee\u6539\u3002</li> <li>\u95ed\u5305 \u6307\u7684\u662f\u6709\u6743\u8bbf\u95ee\u7236\u4f5c\u7528\u57df\u7684\u51fd\u6570\uff0c\u5373\u4f7f\u5728\u7236\u51fd\u6570\u5173\u95ed\u4e4b\u540e\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#_23","title":"\u7bad\u5934\u51fd\u6570","text":"<ul> <li>\u4f8b\u5982 <code>x =&gt; x * x</code></li> <li>\u7bad\u5934\u51fd\u6570\u76f8\u5f53\u4e8e\u533f\u540d\u51fd\u6570\uff0c\u5e76\u4e14\u7b80\u5316\u4e86\u51fd\u6570\u5b9a\u4e49\u3002\u7bad\u5934\u51fd\u6570\u6709\u4e24\u79cd\u683c\u5f0f\uff0c\u4e00\u79cd\u50cf\u4e0a\u9762\u7684\uff0c\u53ea\u5305\u542b\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u8fde<code>{ ... }</code>\u548c<code>return</code>\u90fd\u7701\u7565\u6389\u4e86\u3002\u8fd8\u6709\u4e00\u79cd\u53ef\u4ee5\u5305\u542b\u591a\u6761\u8bed\u53e5\uff0c\u8fd9\u65f6\u5019\u5c31\u4e0d\u80fd\u7701\u7565<code>{ ... }</code>\u548c<code>return</code></li> <li>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u4e00\u4e2a\uff0c\u5c31\u9700\u8981\u7528\u62ec\u53f7()\u62ec\u8d77\u6765, \u4f8b\u5982 <code>(x, y, ...rest) =&gt; {}</code></li> <li>\u6ce8\u610f, \u5728\u5355\u8868\u8fbe\u5f0f\u8bed\u53e5\u4e2d, \u5982\u679c\u8981\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61, \u53ef\u80fd\u4f1a\u8bed\u6cd5\u51b2\u7a81, \u4f1a\u88ab\u89e3\u91ca\u4e3a\u8bed\u6cd5\u5757<ul> <li>\u4f8b\u5982 <code>x =&gt; { foo: x }</code> \u5e94\u8be5\u5199\u6210 <code>x =&gt; ({ foo: x })</code></li> </ul> </li> <li>this<ul> <li>\u7bad\u5934\u51fd\u6570\u770b\u4e0a\u53bb\u662f\u533f\u540d\u51fd\u6570\u7684\u4e00\u79cd\u7b80\u5199\uff0c\u4f46\u5b9e\u9645\u4e0a\uff0c\u7bad\u5934\u51fd\u6570\u548c\u533f\u540d\u51fd\u6570\u6709\u4e2a\u660e\u663e\u7684\u533a\u522b\uff1a\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u662f \u8bcd\u6cd5\u4f5c\u7528\u57df\uff0c\u7531\u4e0a\u4e0b\u6587\u786e\u5b9a\u3002</li> <li>\u4ece\u800c\u907f\u514d\u4e86\u4e4b\u524d this \u5173\u952e\u5b57\u7684\u4e00\u4e9b\u95ee\u9898, \u89c1\u4e0b</li> <li>\u7531\u4e8e<code>this</code>\u5728\u7bad\u5934\u51fd\u6570\u4e2d\u5df2\u7ecf\u6309\u7167\u8bcd\u6cd5\u4f5c\u7528\u57df\u7ed1\u5b9a\u4e86\uff0c\u6240\u4ee5\uff0c\u7528<code>call()</code>\u6216\u8005<code>apply()</code>\u8c03\u7528\u7bad\u5934\u51fd\u6570\u65f6\uff0c\u65e0\u6cd5\u5bf9<code>this</code>\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5373\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u88ab\u5ffd\u7565</li> </ul> </li> </ul> <pre><code>var age, obj;\n\n// \u7531\u4e8eJavaScript\u51fd\u6570\u5bf9`this`\u7ed1\u5b9a\u7684\u9519\u8bef\u5904\u7406\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u65e0\u6cd5\u5f97\u5230\u9884\u671f\u7ed3\u679c\nobj = {\n birth: 1990,\n getAge: function () {\n  var b = this.birth; // 1990\n  var fn = function () {\n   return new Date().getFullYear() - this.birth; // this\u6307\u5411window\u6216undefined\n  };\n  return fn();\n },\n};\nage = obj.getAge();\nconsole.log(\"\u7531\u4e8ethis\u6307\u5411window\u800c\u51fa\u9519: \", age);\n\nobj = {\n birth: 1990,\n getAge: function () {\n  var b = this.birth; // 1990\n  var that = this; // \u6307\u5411obj\n  var fn = function () {\n   return new Date().getFullYear() - that.birth;\n  };\n  return fn();\n },\n};\nage = obj.getAge();\nconsole.log(\"\u4fdd\u5b58this\u4e3athat: \", age);\n\n// \u7bad\u5934\u51fd\u6570\u5b8c\u5168\u4fee\u590d\u4e86`this`\u7684\u6307\u5411\uff0c`this`\u603b\u662f\u6307\u5411\u8bcd\u6cd5\u4f5c\u7528\u57df\uff0c\u4e5f\u5c31\u662f\u5916\u5c42\u8c03\u7528\u8005`obj`\nobj = {\n birth: 1990,\n getAge: function () {\n  var b = this.birth; // 1990\n  var fn = () =&gt; new Date().getFullYear() - this.birth; // this\u6307\u5411obj\u5bf9\u8c61\n  return fn();\n },\n};\nage = obj.getAge(); // 25\nconsole.log(\"\u91c7\u7528\u7bad\u5934\u51fd\u6570: \", age);\n\n// \u7531\u4e8e`this`\u5728\u7bad\u5934\u51fd\u6570\u4e2d\u5df2\u7ecf\u6309\u7167\u8bcd\u6cd5\u4f5c\u7528\u57df\u7ed1\u5b9a\u4e86\uff0c\u6240\u4ee5\uff0c\u7528`call()`\u6216\u8005`apply()`\u8c03\u7528\u7bad\u5934\u51fd\u6570\u65f6\uff0c\u65e0\u6cd5\u5bf9`this`\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5373\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u88ab\u5ffd\u7565\nobj = {\n birth: 1990,\n getAge: function (year) {\n  var b = this.birth; // 1990\n  var fn = () =&gt; new Date().getFullYear() - this.birth; // this.birth\u4ecd\u662f1990\n  return fn.call({ birth: 2000 }, year);\n },\n};\nage = obj.getAge(); \nconsole.log(\"apply\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f1a\u88ab\u5ffd\u7565\", age);\n</code></pre>"},{"location":"code/JavaScript/js-note/#generator","title":"generator","text":"<ul> <li>generator\u7531<code>function*</code>\u5b9a\u4e49\uff08\u6ce8\u610f\u591a\u51fa\u7684<code>*</code>\u53f7\uff09\uff0c\u5e76\u4e14\uff0c\u9664\u4e86<code>return</code>\u8bed\u53e5\uff0c\u8fd8\u53ef\u4ee5\u7528<code>yield</code>\u8fd4\u56de\u591a\u6b21</li> <li>\u8c03\u7528generator\u5bf9\u8c61\u6709\u4e24\u4e2a\u65b9\u6cd5\uff0c\u4e00\u662f\u4e0d\u65ad\u5730\u8c03\u7528generator\u5bf9\u8c61\u7684 <code>next()</code> \u65b9\u6cd5<ul> <li><code>next()</code>\u65b9\u6cd5\u4f1a\u6267\u884cgenerator\u7684\u4ee3\u7801\uff0c\u7136\u540e\uff0c\u6bcf\u6b21\u9047\u5230<code>yield x;</code>\u5c31\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61<code>{value: x, done: true/false}</code>\uff0c\u7136\u540e\u201c\u6682\u505c\u201d\u3002\u8fd4\u56de\u7684<code>value</code>\u5c31\u662f<code>yield</code>\u7684\u8fd4\u56de\u503c\uff0c<code>done</code>\u8868\u793a\u8fd9\u4e2agenerator\u662f\u5426\u5df2\u7ecf\u6267\u884c\u7ed3\u675f\u4e86\u3002\u5982\u679c<code>done</code>\u4e3a<code>true</code>\uff0c\u5219<code>value</code>\u5c31\u662f<code>return</code>\u7684\u8fd4\u56de\u503c\u3002</li> <li>\u5f53\u6267\u884c\u5230<code>done</code>\u4e3a<code>true</code>\u65f6\uff0c\u8fd9\u4e2agenerator\u5bf9\u8c61\u5c31\u5df2\u7ecf\u5168\u90e8\u6267\u884c\u5b8c\u6bd5\uff0c\u4e0d\u8981\u518d\u7ee7\u7eed\u8c03\u7528<code>next()</code>\u4e86\u3002</li> </ul> </li> <li>\u7b2c\u4e8c\u4e2a\u65b9\u6cd5\u662f\u76f4\u63a5\u7528<code>for ... of</code>\u5faa\u73af\u8fed\u4ee3generator\u5bf9\u8c61\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u9700\u8981\u6211\u4eec\u81ea\u5df1\u5224\u65ad<code>done</code><ul> <li>\u6bcf\u6b21\u62ff\u5230\u7684\u90fd\u662f next \u65b9\u5f0f\u8fd4\u56de\u7684\u5bf9\u8c61\u7684 value \u503c</li> </ul> </li> </ul> <pre><code>/* \u8bed\u6cd5 */\nfunction* foo(x) {\n yield x + 1;\n yield x + 2;\n return x + 3;\n}\n\n/* \u4e24\u79cd\u8c03\u7528\u65b9\u5f0f */\nfunction* fib(max) {\n var t,\n  a = 0,\n  b = 1,\n  n = 0;\n while (n &lt; max) {\n  yield a;\n  [a, b] = [b, a + b];\n  n++;\n }\n return;\n}\n\n/* \u6ce8\u610f, next() \u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61 */\nvar f = fib(5);\nf.next(); // {value: 0, done: false}\nf.next(); // {value: 1, done: false}\nf.next(); // {value: 1, done: false}\nf.next(); // {value: 2, done: false}\nf.next(); // {value: 3, done: false}\nf.next(); // {value: undefined, done: true}\n\nfor (var x of fib(10)) {\n console.log(x); // \u4f9d\u6b21\u8f93\u51fa0, 1, 1, 2, 3, ...\n}\n</code></pre> <ul> <li>\u4f5c\u7528<ul> <li>\u56e0\u4e3agenerator\u53ef\u4ee5\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u591a\u6b21\u8fd4\u56de\uff0c\u6240\u4ee5\u5b83\u770b\u4e0a\u53bb\u5c31\u50cf\u4e00\u4e2a \u53ef\u4ee5\u8bb0\u4f4f\u6267\u884c\u72b6\u6001\u7684\u51fd\u6570\uff0c\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u5199\u4e00\u4e2agenerator\u5c31\u53ef\u4ee5\u5b9e\u73b0\u9700\u8981\u7528\u9762\u5411\u5bf9\u8c61\u624d\u80fd\u5b9e\u73b0\u7684\u529f\u80fd</li> <li>generator\u8fd8\u6709\u53e6\u4e00\u4e2a\u5de8\u5927\u7684\u597d\u5904\uff0c\u5c31\u662f\u628a\u5f02\u6b65\u56de\u8c03\u4ee3\u7801\u53d8\u6210\u201c\u540c\u6b65\u201d\u4ee3\u7801</li> </ul> </li> <li>\u4f8b\u5b50, \u4f8b\u5982\u95ed\u5305\u5b9e\u73b0\u4e00\u4e2a\u81ea\u589e\u7684\u8ba1\u6570\u5668</li> </ul> <pre><code>/* \u5229\u7528 generator \u628a\u5f02\u6b65\u56de\u8c03\u4ee3\u7801\u53d8\u6210\u201c\u540c\u6b65\u201d\u4ee3\u7801 */\n// \u4e0d\u7528 yield\najax('http://url-1', data1, function (err, result) {\n if (err) {\n  return handle(err);\n }\n ajax('http://url-2', data2, function (err, result) {\n  if (err) {\n   return handle(err);\n  }\n  ajax('http://url-3', data3, function (err, result) {\n   if (err) {\n    return handle(err);\n   }\n   return success(result);\n  });\n });\n});\n// \u7528 generator\ntry {\n r1 = yield ajax('http://url-1', data1);\n r2 = yield ajax('http://url-2', data2);\n r3 = yield ajax('http://url-3', data3);\n success(r3);\n}\ncatch (err) {\n handle(err);\n}\n</code></pre> <pre><code>// \u5982\u679c\u4e0d\u7528\u95ed\u5305, \u9700\u8981\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\n// var current_id = 0;\n// function next_id() {\n//     current_id++;\n//     return current_id;\n// }\n// \u5229\u7528 generator\nfunction* next_id() {\n var current_id = 0;\n while (true) {\n  current_id++;\n  yield current_id;\n }\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#_24","title":"\u6807\u51c6\u5bf9\u8c61","text":"<ul> <li><code>number</code>\u3001<code>string</code>\u3001<code>boolean</code>\u3001<code>function</code> \u548c <code>undefined</code></li> <li>\u5305\u88c5\u5bf9\u8c61, <code>Number, Boolean, String</code>; \u6ce8\u610f\u7528 new \u6765\u521b\u5efa\u7684\u8bdd\u5c06\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61</li> <li>\u8f6c\u4e3a\u6570\u5b57 <code>parseInt(), parseFloat()</code></li> <li>\u5224\u65ad<ul> <li>\u662f\u5426\u4e3a array <code>Array.isArray(arr)</code></li> <li>\u662f\u5426\u4e3a null <code>myVar === null</code> (null \u7c7b\u578b\u4e3a object)</li> <li>\u662f\u5426\u5b58\u5728 <code>typeof myVar === 'undefined'</code></li> </ul> </li> <li>Date<ul> <li><code>var now = new Date();</code></li> <li>Date \u5bf9\u8c61\u7684\u65b9\u6cd5: getFullYear, getMonth, getDate, getDay, getHours, getMinutes, getSeconds, getMilliseconds<ul> <li>getTime \u8fd4\u56de\u65f6\u95f4\u6233</li> </ul> </li> <li>now \u65b9\u6cd5\u8fd4\u56de\u65f6\u95f4\u6233 <code>Date.now()</code></li> <li>parse \u65b9\u6cd5: <code>var d = Date.parse('2015-06-24T19:49:22.875+08:00');</code></li> </ul> </li> <li>RegExp<ul> <li><code>/\u6b63\u5219\u8868\u8fbe\u5f0f/</code>, \u8868\u8fbe\u5f0f\u5185\u7684 <code>\\</code> \u7b26\u53f7\u4e0d\u9700\u8981\u8f6c\u4e49, \u82e5\u7528 new \u521b\u5efa\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u9700\u8981\u8f6c\u4e49</li> <li>\u6807\u5fd7: g \u5168\u5c40 (\u8bb0\u5f55 lastIndex \u518d\u6b21\u8fd0\u884c\u56de\u5f80\u540e\u5339\u914d), i \u5ffd\u7565\u5927\u5c0f\u5199, m \u591a\u884c</li> <li>test</li> <li><code>exec</code> \u5339\u914d\u5931\u8d25\u8fd4\u56de null, \u6210\u529f\u5219\u8fd4\u56de Array, \u5176\u4e2d\u7b2c\u4e00\u4e2a\u4e3a\u5b8c\u6574\u5339\u914d, \u540e\u9762\u662f\u5206\u7ec4</li> <li>\u9ed8\u8ba4\u8d2a\u5a6a\u5339\u914d, \u52a0 <code>?</code> \u975e\u8d2a\u5a6a, \u4f8b\u5982 <code>var re = /^(\\d+?)(0*)$/;</code> \u7b2c\u4e8c\u7ec4\u5339\u914d\u6700\u540e\u7684 0</li> <li>\u6b63\u5219\u57fa\u7840<ul> <li><code>*, +, ?, {n}, {n,m}</code> \u9650\u5236\u957f\u5ea6</li> </ul> </li> </ul> </li> <li>JSON<ul> <li>\u5e8f\u5217\u5316: <code>JSON.stringify()</code>, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5bf9 key, value \u8fdb\u884c\u5904\u7406\u7684\u51fd\u6570, \u7b2c\u4e09\u4e2a\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u4e2a\u6570<ul> <li>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a object \u7684 <code>toJSON</code> \u65b9\u6cd5\u81ea\u5b9a\u4e49\u8f93\u51fa\u5bf9\u8c61\u5185\u5bb9</li> </ul> </li> <li>\u53cd\u5e8f\u5217\u5316: <code>JSON.parse('{\"name\":\"\u5c0f\u660e\",\"age\":14}')</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#basic","title":"\u5bf9\u8c61 basic","text":"<ul> <li>\u5728JavaScript\u7684\u4e16\u754c\u91cc\uff0c\u4e00\u5207\u90fd\u662f\u5bf9\u8c61\u3002</li> <li>\u4f46\u662f\u67d0\u4e9b\u5bf9\u8c61\u8fd8\u662f\u548c\u5176\u4ed6\u5bf9\u8c61\u4e0d\u592a\u4e00\u6837\u3002\u4e3a\u4e86\u533a\u5206\u5bf9\u8c61\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u7528typeof\u64cd\u4f5c\u7b26\u83b7\u53d6\u5bf9\u8c61\u7684\u7c7b\u578b<ul> <li><code>number</code>\u3001<code>string</code>\u3001<code>boolean</code>\u3001<code>function</code> \u548c <code>undefined</code> \u6709\u522b\u4e8e\u5176\u4ed6\u7c7b\u578b\u3002\u7279\u522b\u6ce8\u610f null\u7684\u7c7b\u578b\u662fobject\uff0cArray\u7684\u7c7b\u578b\u4e5f\u662fobject\uff0c\u5982\u679c\u6211\u4eec\u7528typeof\u5c06\u65e0\u6cd5\u533a\u5206\u51fa null\u3001Array \u548c\u901a\u5e38\u610f\u4e49\u4e0a\u7684 object\u2014\u2014 <code>{}</code>\u3002</li> </ul> </li> <li>JavaScript\u8fd8\u63d0\u4f9b\u4e86\u5305\u88c5\u5bf9\u8c61, \u5305\u88c5\u5bf9\u8c61\u7684\u7c7b\u578b\u4e3a object !<ul> <li>number\u3001boolean\u548cstring\u90fd\u6709\u5305\u88c5\u5bf9\u8c61, \u4e5f\u5373 <code>Number, Boolean, String</code></li> <li>\u5305\u88c5\u5bf9\u8c61\u7684\u7c7b\u578b\u4e3a object, \u56e0\u6b64 <code>new Number(123) === 123;</code> \u8fd4\u56de false !<ul> <li>\u53e6\u5916, \u4e00\u5b9a\u8981\u7528 new \u6765\u4fee\u9970, \u5982\u679c\u4e0d\u52a0\u7684\u8bdd, Number() \u7b49\u5c31\u88ab\u5f53\u4f5c\u666e\u901a\u51fd\u6570, \u5c06\u4efb\u4f55\u7c7b\u578b\u8f6c\u5316\u4e3a number \u7c7b\u578b</li> <li>\u4e5f\u5373, <code>var n = Number('123');</code> \u7684\u7c7b\u578b\u4e3a number</li> </ul> </li> <li>\u6240\u4ee5\u95f2\u7684\u86cb\u75bc\u4e5f\u4e0d\u8981\u4f7f\u7528\u5305\u88c5\u5bf9\u8c61\uff01\u5c24\u5176\u662f\u9488\u5bf9string\u7c7b\u578b\uff01\uff01\uff01</li> </ul> </li> </ul> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u6709\u8fd9\u4e48\u51e0\u6761\u89c4\u5219\u9700\u8981\u9075\u5b88\uff1a</p> <ul> <li>\u4e0d\u8981\u4f7f\u7528 <code>new Number()</code>\u3001<code>new Boolean()</code>\u3001<code>new String()</code> \u521b\u5efa\u5305\u88c5\u5bf9\u8c61\uff1b</li> <li>\u7528 <code>parseInt()</code> \u6216 <code>parseFloat()</code> \u6765\u8f6c\u6362\u4efb\u610f\u7c7b\u578b\u5230 <code>number</code>\uff1b</li> <li>\u7528<code>String()</code>\u6765\u8f6c\u6362\u4efb\u610f\u7c7b\u578b\u5230<code>string</code>\uff0c\u6216\u8005\u76f4\u63a5\u8c03\u7528\u67d0\u4e2a\u5bf9\u8c61\u7684<code>toString()</code>\u65b9\u6cd5\uff1b</li> <li>\u901a\u5e38\u4e0d\u5fc5\u628a\u4efb\u610f\u7c7b\u578b\u8f6c\u6362\u4e3a<code>boolean</code>\u518d\u5224\u65ad\uff0c\u56e0\u4e3a\u53ef\u4ee5\u76f4\u63a5\u5199<code>if (myVar) {...}</code>\uff1b</li> <li><code>typeof</code>\u64cd\u4f5c\u7b26\u53ef\u4ee5\u5224\u65ad\u51fa<code>number</code>\u3001<code>boolean</code>\u3001<code>string</code>\u3001<code>function</code>\u548c<code>undefined</code>\uff1b</li> <li>\u5224\u65ad <code>Array</code> \u8981\u4f7f\u7528 <code>Array.isArray(arr)</code>\uff1b</li> <li>\u5224\u65ad <code>null</code> \u8bf7\u4f7f\u7528 <code>myVar === null</code>\uff1b</li> <li>\u5224\u65ad\u67d0\u4e2a\u5168\u5c40\u53d8\u91cf\u662f\u5426\u5b58\u5728\u7528 <code>typeof window.myVar === 'undefined'</code>\uff1b</li> <li>\u51fd\u6570\u5185\u90e8\u5224\u65ad\u67d0\u4e2a\u53d8\u91cf\u662f\u5426\u5b58\u5728\u7528 <code>typeof myVar === 'undefined'</code>\u3002</li> </ul> <pre><code>// \u7c7b\u578b\ntypeof 123; // 'number'\ntypeof NaN; // 'number'\ntypeof 'str'; // 'string'\ntypeof true; // 'boolean'\ntypeof undefined; // 'undefined'\ntypeof Math.abs; // 'function'\ntypeof null; // 'object'\ntypeof []; // 'object'\ntypeof {}; // 'object'\n\n// \u5305\u88c5\u5bf9\u8c61\nvar n = new Number(123); // 123,\u751f\u6210\u4e86\u65b0\u7684\u5305\u88c5\u7c7b\u578b\nvar b = new Boolean(true); // true,\u751f\u6210\u4e86\u65b0\u7684\u5305\u88c5\u7c7b\u578b\nvar s = new String('str'); // 'str',\u751f\u6210\u4e86\u65b0\u7684\u5305\u88c5\u7c7b\u578b\n// \u5305\u88c5\u5bf9\u8c61\u7684\u7c7b\u578b\u4e3a object !\ntypeof new Number(123); // 'object'\nnew Number(123) === 123; // false\n\ntypeof new Boolean(true); // 'object'\nnew Boolean(true) === true; // false\n\ntypeof new String('str'); // 'object'\nnew String('str') === 'str'; // false\n</code></pre> <ul> <li>\u6700\u540e\u6709\u7ec6\u5fc3\u7684\u540c\u5b66\u6307\u51fa\uff0c\u4efb\u4f55\u5bf9\u8c61\u90fd\u6709<code>toString()</code>\u65b9\u6cd5\u5417\uff1f<code>null</code>\u548c<code>undefined</code>\u5c31\u6ca1\u6709\uff01\u786e\u5b9e\u5982\u6b64\uff0c\u8fd9\u4e24\u4e2a\u7279\u6b8a\u503c\u8981\u9664\u5916\uff0c\u867d\u7136<code>null</code>\u8fd8\u4f2a\u88c5\u6210\u4e86<code>object</code>\u7c7b\u578b\u3002</li> <li>\u66f4\u7ec6\u5fc3\u7684\u540c\u5b66\u6307\u51fa\uff0c<code>number</code>\u5bf9\u8c61\u8c03\u7528<code>toString()</code>\u62a5SyntaxError\uff1a<code>123.toString(); // SyntaxError</code>\u3002<ul> <li>\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\uff0c\u8981\u7279\u6b8a\u5904\u7406\u4e00\u4e0b\uff1a</li> </ul> </li> </ul> <pre><code>123..toString(); // '123', \u6ce8\u610f\u662f\u4e24\u4e2a\u70b9\uff01\n(123).toString(); // '123'\n</code></pre>"},{"location":"code/JavaScript/js-note/#date","title":"Date","text":"<ul> <li>\u5728JavaScript\u4e2d\uff0cDate\u5bf9\u8c61\u7528\u6765\u8868\u793a\u65e5\u671f\u548c\u65f6\u95f4\u3002</li> <li>\u83b7\u53d6\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4 <code>var now = new Date();</code><ul> <li>\u6ce8\u610f\uff0c\u5f53\u524d\u65f6\u95f4\u662f\u6d4f\u89c8\u5668\u4ece\u672c\u673a\u64cd\u4f5c\u7cfb\u7edf\u83b7\u53d6\u7684\u65f6\u95f4\uff0c\u6240\u4ee5\u4e0d\u4e00\u5b9a\u51c6\u786e\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u4ee5\u628a\u5f53\u524d\u65f6\u95f4\u8bbe\u5b9a\u4e3a\u4efb\u4f55\u503c\u3002</li> <li>\u65b9\u6cd5:<ul> <li>getFullYear, getMonth, getDate,</li> <li>getDay</li> <li>getHours, getMinutes, getSeconds, getMilliseconds</li> <li>getTime \u8fd4\u56de\u65f6\u95f4\u6233</li> </ul> </li> </ul> </li> <li>\u521b\u5efa<ul> <li>\u53ef\u4ee5\u7528 <code>var d = new Date(2015, 5, 19, 20, 15, 30, 123);</code><ul> <li>\u6ce8\u610f, \u6708\u4efd\u548c\u65e5\u671f\u662f\u4ece 0 \u5f00\u59cb\u7684!</li> </ul> </li> <li>\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u7528 parse \u65b9\u6cd5\u89e3\u6790 ISO 8601 \u683c\u5f0f\u7684\u5b57\u7b26\u4e32<ul> <li>\u8fd4\u56de\u65f6\u95f4\u6233, \u53ef\u4ee5\u518d\u8f6c\u5316\u4e3a Date \u7c7b\u578b</li> <li><code>var d = Date.parse('2015-06-24T19:49:22.875+08:00');</code></li> </ul> </li> </ul> </li> <li>\u65f6\u533a<ul> <li>toLocalString</li> <li>toUTCString</li> </ul> </li> </ul> <pre><code>var now = new Date();\nnow; // Wed Jun 24 2015 19:49:22 GMT+0800 (CST)\nnow.getFullYear(); // 2015, \u5e74\u4efd\nnow.getMonth(); // 5, \u6708\u4efd\uff0c\u6ce8\u610f\u6708\u4efd\u8303\u56f4\u662f0~11\uff0c5\u8868\u793a\u516d\u6708\nnow.getDate(); // 24, \u8868\u793a24\u53f7\nnow.getDay(); // 3, \u8868\u793a\u661f\u671f\u4e09\nnow.getHours(); // 19, 24\u5c0f\u65f6\u5236\nnow.getMinutes(); // 49, \u5206\u949f\nnow.getSeconds(); // 22, \u79d2\nnow.getMilliseconds(); // 875, \u6beb\u79d2\u6570\nnow.getTime(); // 1435146562875, \u4ee5number\u5f62\u5f0f\u8868\u793a\u7684\u65f6\u95f4\u6233\n</code></pre>"},{"location":"code/JavaScript/js-note/#date_1","title":"\u521b\u5efa\u4e00\u4e2a\u6307\u5b9a\u65e5\u671f\u548c\u65f6\u95f4\u7684<code>Date</code>\u5bf9\u8c61","text":"<pre><code>var d = new Date(2015, 5, 19, 20, 15, 30, 123);\nd; // Fri Jun 19 2015 20:15:30 GMT+0800 (CST)\n</code></pre> <p>\u3010\u6ce8\u610f\u3011 JavaScript\u7684Date\u5bf9\u8c61\u6708\u4efd\u503c\u4ece0\u5f00\u59cb\uff0c\u7262\u8bb00=1\u6708\uff0c1=2\u6708\uff0c2=3\u6708\uff0c\u2026\u2026\uff0c11=12\u6708\u3002</p> <ul> <li>\u7b2c\u4e8c\u79cd\u521b\u5efa\u4e00\u4e2a\u6307\u5b9a\u65e5\u671f\u548c\u65f6\u95f4\u7684\u65b9\u6cd5\u662f\u89e3\u6790\u4e00\u4e2a\u7b26\u5408ISO 8601\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002</li> <li>\u4f46\u5b83\u8fd4\u56de\u7684\u4e0d\u662f<code>Date</code>\u5bf9\u8c61\uff0c\u800c\u662f\u4e00\u4e2a\u65f6\u95f4\u6233\u3002\u4e0d\u8fc7\u6709\u65f6\u95f4\u6233\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u628a\u5b83\u8f6c\u6362\u4e3a\u4e00\u4e2a<code>Date</code></li> </ul> <pre><code>var d = Date.parse('2015-06-24T19:49:22.875+08:00');\nd; // 1435146562875\n\nvar d = new Date(1435146562875);\nd; // Wed Jun 24 2015 19:49:22 GMT+0800 (CST)\nd.getMonth(); // 5\n</code></pre>"},{"location":"code/JavaScript/js-note/#_25","title":"\u65f6\u533a","text":"<p><code>Date</code>\u5bf9\u8c61\u8868\u793a\u7684\u65f6\u95f4\u603b\u662f\u6309\u6d4f\u89c8\u5668\u6240\u5728\u65f6\u533a\u663e\u793a\u7684\uff0c\u4e0d\u8fc7\u6211\u4eec\u65e2\u53ef\u4ee5\u663e\u793a\u672c\u5730\u65f6\u95f4\uff0c\u4e5f\u53ef\u4ee5\u663e\u793a\u8c03\u6574\u540e\u7684UTC\u65f6\u95f4\uff1a</p> <pre><code>var d = new Date(1435146562875);\nd.toLocaleString(); // '2015/6/24 \u4e0b\u53487:49:22'\uff0c\u672c\u5730\u65f6\u95f4\uff08\u5317\u4eac\u65f6\u533a+8:00\uff09\uff0c\u663e\u793a\u7684\u5b57\u7b26\u4e32\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u8bbe\u5b9a\u7684\u683c\u5f0f\u6709\u5173\nd.toUTCString(); // 'Wed, 24 Jun 2015 11:49:22 GMT'\uff0cUTC\u65f6\u95f4\uff0c\u4e0e\u672c\u5730\u65f6\u95f4\u76f8\u5dee8\u5c0f\u65f6\n</code></pre> <p>\u8981\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\uff0c\u53ef\u4ee5\u7528\uff1a</p> <pre><code>if (Date.now) {\n console.log(Date.now()); // \u8001\u7248\u672cIE\u6ca1\u6709now()\u65b9\u6cd5\n} else {\n console.log(new Date().getTime());\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#regexp","title":"RegExp","text":"<ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>\u521b\u5efa<ul> <li><code>/\u6b63\u5219\u8868\u8fbe\u5f0f/</code>, \u6b64\u65f6\u8868\u8fbe\u5f0f\u5185\u7684 <code>\\</code> \u7b26\u53f7\u4e0d\u9700\u8981\u8f6c\u4e49,<ul> <li>\u4f8b\u5982 <code>var re1 = /ABC\\-001/;</code></li> </ul> </li> <li><code>new RegExp('\u6b63\u5219\u8868\u8fbe\u5f0f')</code>,<ul> <li>\u6b64\u65f6, \u8f93\u5165\u51fd\u6570\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32, \u56e0\u6b64\u5b57\u7b26\u4e32\u5185\u90e8\u7684 <code>\\</code> \u7b26\u53f7\u9700\u8981\u8f6c\u4e49</li> <li>\u4f8b\u5982 <code>var re2 = new RegExp('ABC\\\\-001');</code></li> </ul> </li> </ul> </li> <li>\u5339\u914d: test()</li> <li>\u5207\u5206\u5b57\u7b26\u4e32<ul> <li>\u5b57\u7b26\u4e32\u65b9\u6cd5 split \u4e2d\u4f20\u5165\u6b63\u5219, \u4f8b\u5982 <code>split(/\\s+/)</code></li> </ul> </li> <li>\u5206\u7ec4<ul> <li><code>exec()</code> \u5339\u914d\u5931\u8d25\u8fd4\u56de null, \u6210\u529f\u5219\u8fd4\u56de Array, \u5176\u4e2d\u7b2c\u4e00\u4e2a\u4e3a\u5b8c\u6574\u5339\u914d, \u540e\u9762\u662f\u5206\u7ec4</li> <li>\u4f8b\u5982, <code>/^(\\d{3})-(\\d{3,8})$/</code> \u5339\u914d\u7535\u8bdd</li> </ul> </li> <li>\u8d2a\u5a6a\u5339\u914d: \u9ed8\u8ba4\u662f\u8d2a\u5a6a\u5339\u914d, \u52a0\u4e0a <code>?</code> \u8bbe\u7f6e\u4e3a\u975e\u8d2a\u5a6a<ul> <li>\u4f8b\u5982, <code>/^(\\d+)(0*)$/</code> \u4e2d\u7b2c\u4e8c\u4e2a\u5206\u7ec4\u5339\u914d\u7ed3\u5c3e\u7684 0</li> </ul> </li> <li>\u5168\u5c40\u5339\u914d<ul> <li>\u5199\u6210 <code>/test/g</code>, \u6216\u8005 <code>new RegExp('test', 'g')</code></li> <li>\u5168\u5c40\u5339\u914d\u53ef\u4ee5\u591a\u6b21\u6267\u884cexec()\u65b9\u6cd5\u6765\u641c\u7d22\u4e00\u4e2a\u5339\u914d\u7684\u5b57\u7b26\u4e32\u3002\u5f53\u6211\u4eec\u6307\u5b9ag\u6807\u5fd7\u540e\uff0c\u6bcf\u6b21\u8fd0\u884cexec()\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u672c\u8eab\u4f1a\u66f4\u65b0 <code>lastIndex</code> \u5c5e\u6027\uff0c\u8868\u793a\u4e0a\u6b21\u5339\u914d\u5230\u7684\u6700\u540e\u7d22\u5f15</li> </ul> </li> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd8\u53ef\u4ee5\u6307\u5b9a <code>i</code> \u6807\u5fd7\uff0c\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199\uff0c<code>m</code> \u6807\u5fd7\uff0c\u8868\u793a\u6267\u884c\u591a\u884c\u5339\u914d\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#_26","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<ul> <li>\u6b63\u5219\u57fa\u7840<ul> <li><code>\\d, \\w, .</code> \u7279\u6b8a\u5b57\u7b26</li> <li><code>*, +, ?, {n}, {n,m}</code> \u9650\u5236\u957f\u5ea6</li> </ul> </li> <li><code>[]</code> \u8868\u793a\u8303\u56f4<ul> <li>\u4f8b\u5982, <code>[a-zA-Z\\_\\$][0-9a-zA-Z\\_\\$]*</code> \u5339\u914d JavaScript\u5141\u8bb8\u7684\u53d8\u91cf\u540d\uff1b</li> </ul> </li> <li><code>A|B</code> \u53ef\u4ee5\u5339\u914dA\u6216B</li> <li><code>^</code> \u8868\u793a\u884c\u7684\u5f00\u5934\uff0c<code>^\\d</code> \u8868\u793a\u5fc5\u987b\u4ee5\u6570\u5b57\u5f00\u5934\u3002</li> <li><code>$</code> \u8868\u793a\u884c\u7684\u7ed3\u675f\uff0c<code>\\d$</code> \u8868\u793a\u5fc5\u987b\u4ee5\u6570\u5b57\u7ed3\u675f\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#regexp_1","title":"\u521b\u5efa RegExp","text":"<p>JavaScript\u6709\u4e24\u79cd\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a</p> <ul> <li>\u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u76f4\u63a5\u901a\u8fc7<code>/\u6b63\u5219\u8868\u8fbe\u5f0f/</code>\u5199\u51fa\u6765\uff0c\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u901a\u8fc7<code>new RegExp('\u6b63\u5219\u8868\u8fbe\u5f0f')</code>\u521b\u5efa\u4e00\u4e2aRegExp\u5bf9\u8c61\u3002</li> <li>\u3010Note\u3011\u7528\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u65f6\uff0c\u9700\u8981\u8003\u8651\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u95ee\u9898\u3002</li> </ul> <pre><code>var re1 = /ABC\\-001/;\nvar re2 = new RegExp('ABC\\\\-001');\n\nre1; // /ABC\\-001/\nre2; // /ABC\\-001/\n</code></pre> <pre><code>var re = /^\\d{3}\\-\\d{3,8}$/;\nre.test('010-12345'); // true\nre.test('010-1234x'); // false\nre.test('010 12345'); // false\n</code></pre>"},{"location":"code/JavaScript/js-note/#_27","title":"\u5207\u5206\u5b57\u7b26\u4e32","text":"<pre><code>console.log(\n '  a b   c  '.split(' '),\n '  a b   c  '.split(/\\s+/),\n '  a, b,   c  '.split(/[\\s+,]+/)        //[ '', 'a', 'b', 'c', '' ]\n)\n</code></pre>"},{"location":"code/JavaScript/js-note/#_28","title":"\u5206\u7ec4","text":"<ul> <li><code>exec()</code>\u65b9\u6cd5\u5728\u5339\u914d\u6210\u529f\u540e\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a<code>Array</code>\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5230\u7684\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c\u540e\u9762\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5339\u914d\u6210\u529f\u7684\u5b50\u4e32\u3002</li> <li><code>exec()</code>\u65b9\u6cd5\u5728\u5339\u914d\u5931\u8d25\u65f6\u8fd4\u56de<code>null</code>\u3002</li> </ul> <pre><code>var re = /^(\\d{3})-(\\d{3,8})$/;\nre.exec('010-12345'); // ['010-12345', '010', '12345']\nre.exec('010 12345'); // null\n</code></pre>"},{"location":"code/JavaScript/js-note/#_29","title":"\u8d2a\u5a6a\u5339\u914d","text":"<p>\u9700\u8981\u7279\u522b\u6307\u51fa\u7684\u662f\uff0c\u6b63\u5219\u5339\u914d\u9ed8\u8ba4\u662f\u8d2a\u5a6a\u5339\u914d\uff0c\u4e5f\u5c31\u662f\u5339\u914d\u5c3d\u53ef\u80fd\u591a\u7684\u5b57\u7b26\u3002</p> <pre><code>var re = /^(\\d+)(0*)$/;\nre.exec('102300'); // ['102300', '102300', '']\n\n//\u975e\u8d2a\u5a6a\nvar re = /^(\\d+?)(0*)$/;\nre.exec('102300'); // ['102300', '1023', '00']\n</code></pre>"},{"location":"code/JavaScript/js-note/#_30","title":"\u5168\u5c40\u641c\u7d22","text":"<ul> <li>JavaScript\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd8\u6709\u51e0\u4e2a\u7279\u6b8a\u7684\u6807\u5fd7\uff0c\u6700\u5e38\u7528\u7684\u662f<code>g</code>\uff0c\u8868\u793a\u5168\u5c40\u5339\u914d\u3002</li> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd8\u53ef\u4ee5\u6307\u5b9a<code>i</code>\u6807\u5fd7\uff0c\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199\uff0c<code>m</code>\u6807\u5fd7\uff0c\u8868\u793a\u6267\u884c\u591a\u884c\u5339\u914d\u3002</li> </ul> <pre><code>var r1 = /test/g;\n// \u7b49\u4ef7\u4e8e:\nvar r2 = new RegExp('test', 'g');\n</code></pre> <p>\u5168\u5c40\u5339\u914d\u53ef\u4ee5\u591a\u6b21\u6267\u884c<code>exec()</code>\u65b9\u6cd5\u6765\u641c\u7d22\u4e00\u4e2a\u5339\u914d\u7684\u5b57\u7b26\u4e32\u3002\u5f53\u6211\u4eec\u6307\u5b9a<code>g</code>\u6807\u5fd7\u540e\uff0c\u6bcf\u6b21\u8fd0\u884c<code>exec()</code>\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u672c\u8eab\u4f1a\u66f4\u65b0<code>lastIndex</code>\u5c5e\u6027\uff0c\u8868\u793a\u4e0a\u6b21\u5339\u914d\u5230\u7684\u6700\u540e\u7d22\u5f15\uff1a</p> <pre><code>var s = 'JavaScript, VBScript, JScript and ECMAScript';\nvar re=/[a-zA-Z]+Script/g;\n\n// \u4f7f\u7528\u5168\u5c40\u5339\u914d:\nre.exec(s); // ['JavaScript']\nre.lastIndex; // 10\n\nre.exec(s); // ['VBScript']\nre.lastIndex; // 20\n\nre.exec(s); // ['JScript']\nre.lastIndex; // 29\n\nre.exec(s); // ['ECMAScript']\nre.lastIndex; // 44\n\nre.exec(s); // null\uff0c\u76f4\u5230\u7ed3\u675f\u4ecd\u6ca1\u6709\u5339\u914d\u5230\n</code></pre>"},{"location":"code/JavaScript/js-note/#json","title":"JSON","text":"<ul> <li>JSON: JavaScript Object Notation\uff08JavaScript \u5bf9\u8c61\u6807\u8bb0\u6cd5\uff09<ul> <li>JSON \u662f\u4e00\u79cd\u5b58\u50a8\u548c\u4ea4\u6362\u6570\u636e\u7684\u8bed\u6cd5\u3002</li> <li>JSON \u662f\u901a\u8fc7 JavaScript \u5bf9\u8c61\u6807\u8bb0\u6cd5\u4e66\u5199\u7684\u6587\u672c\u3002</li> </ul> </li> <li>\u5e8f\u5217\u5316: <code>JSON.stringify()</code><ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u8981\u5e8f\u5217\u5316\u7684 object;</li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5bf9\u4e8e key, value \u8fdb\u884c\u5904\u7406\u7684\u51fd\u6570; \u4e5f\u53ef\u6307\u5b9a <code>['age', 'name']</code> \u5bf9\u4e8e key \u8fdb\u884c\u8fc7\u6ee4;</li> <li>\u7b2c\u4e09\u4e2a\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u683c\u5f0f, \u9ed8\u8ba4\u8f93\u51fa\u4e00\u884c, \u53ef\u4ee5\u6307\u5b9a\u683c\u5f0f\u5316\u8f93\u51fa\u7684\u7a7a\u683c\u6570\u91cf, \u6216\u8005\u6307\u5b9a <code>\\t</code> \u8fdb\u884c\u683c\u5f0f\u5316;</li> </ul> </li> <li>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a object \u7684 <code>toJSON</code> \u65b9\u6cd5\u8fdb\u884c\u81ea\u5b9a\u4e49\u8f93\u51fa;</li> <li>\u53cd\u5e8f\u5217\u5316: <code>JSON.parse()</code><ul> <li>\u5c06 JSON \u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u53d8\u4e3a js \u5bf9\u8c61</li> </ul> </li> </ul> <p>JSON \u8bed\u6cd5\u89c4\u5219</p> <ul> <li>\u6570\u636e\u662f\u540d\u79f0/\u503c\u5bf9</li> <li>\u6570\u636e\u7531\u9017\u53f7\u5206\u9694</li> <li>\u82b1\u62ec\u53f7\u4fdd\u5b58\u5bf9\u8c61</li> <li>\u65b9\u62ec\u53f7\u4fdd\u5b58\u6570\u7ec4</li> </ul>"},{"location":"code/JavaScript/js-note/#_31","title":"\u5e8f\u5217\u5316","text":"<pre><code>var xiaoming = {\n name: '\u5c0f\u660e',\n age: 14,\n gender: true,\n height: 1.65,\n grade: null,\n 'middle-school': '\\\"W3C\\\" Middle School',\n skills: ['JavaScript', 'Java', 'Python', 'Lisp']\n};\n\nvar s = JSON.stringify(xiaoming);\nconsole.log(s);\n\n// 1. \u8c03\u6574\u683c\u5f0f\ns = JSON.stringify(xiaoming, null, '  ');\nconsole.log(s);\n\n// 2. \u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u63a7\u5236\u5982\u4f55\u7b5b\u9009\u5bf9\u8c61\u7684\u952e\u503c\ns = JSON.stringify(xiaoming, ['name', 'skills'], '  ');\nconsole.log(s);\n// \u4e5f\u53ef\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\nfunction convert(key, value){\n if (typeof value === 'string'){\n  return value.toUpperCase();\n }\n return value;\n}\ns = JSON.stringify(xiaoming, convert, '\\t');\nconsole.log(s)\n\n\n// 3. \u81ea\u5b9a\u4e49\nxiaoming = {\n name: '\u5c0f\u660e',\n age: 14,\n gender: true,\n height: 1.65,\n grade: null,\n 'middle-school': '\\\"W3C\\\" Middle School',\n skills: ['JavaScript', 'Java', 'Python', 'Lisp'],\n toJSON: function () {\n  return { // \u53ea\u8f93\u51faname\u548cage\uff0c\u5e76\u4e14\u6539\u53d8\u4e86key\uff1a\n   'Name': this.name,\n   'Age': this.age\n  };\n }\n};\ns = JSON.stringify(xiaoming);\nconsole.log(s);\n</code></pre>"},{"location":"code/JavaScript/js-note/#_32","title":"\u53cd\u5e8f\u5217\u5316","text":"<pre><code>JSON.parse('[1,2,3,true]'); // [1, 2, 3, true]\nJSON.parse('{\"name\":\"\u5c0f\u660e\",\"age\":14}'); // Object {name: '\u5c0f\u660e', age: 14}\nJSON.parse('true'); // true\nJSON.parse('123.45'); // 123.45\n</code></pre> <p><code>JSON.parse()</code>\u8fd8\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u6765\u8f6c\u6362\u89e3\u6790\u51fa\u7684\u5c5e\u6027</p> <pre><code>var obj = JSON.parse('{\"name\":\"\u5c0f\u660e\",\"age\":14}', function (key, value) {\n if (key === 'name') {\n  return value + '\u540c\u5b66';\n }\n return value;\n});\nconsole.log(JSON.stringify(obj)); // {name: '\u5c0f\u660e\u540c\u5b66', age: 14}\n</code></pre>"},{"location":"code/JavaScript/js-note/#api-openweathermap","title":"\u6848\u4f8b\uff1a\u89e3\u6790\u5929\u6c14 API OpenWeatherMap","text":"<ul> <li>\u6ce8\u610f\u5230\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\u7528\u5230\u4e86 jQuery\uff0c\u56e0\u6b64\u4e0d\u80fd\u7528 node \u4f46\u53ef\u5728\u6d4f\u89c8\u5668\u4e2d\u8c03\u8bd5\u3002</li> </ul> <p>\u7528\u6d4f\u89c8\u5668\u8bbf\u95eeOpenWeatherMap\u7684\u5929\u6c14API\uff0c\u67e5\u770b\u8fd4\u56de\u7684JSON\u6570\u636e\uff0c\u7136\u540e\u8fd4\u56de\u57ce\u5e02\u3001\u5929\u6c14\u9884\u62a5\u7b49\u4fe1\u606f\u3002</p> <pre><code>var url = 'https://api.openweathermap.org/data/2.5/forecast?q=Beijing,cn&amp;appid=800f49846586c3ba6e7052cfc89af16c';\n$.getJSON(url, function (data) {\n var info = {\n  city: data.city.name,\n  weather: data.list[0].weather[0].main,\n  time: data.list[0].dt_txt\n };\n console.log(JSON.stringify(info, null, '  '));\n});    \n</code></pre>"},{"location":"code/JavaScript/js-note/#_33","title":"\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b","text":"<p>\u53c2\u89c1 JavaScript\u7684\u539f\u578b\u5bf9\u8c61\u7684\u5f7b\u5e95\u7406\u89e3</p> <ul> <li>JavaScript\u4e0d\u533a\u5206\u7c7b\u548c\u5b9e\u4f8b\u7684\u6982\u5ff5\uff0c\u800c\u662f\u901a\u8fc7\u539f\u578b\uff08prototype\uff09\u6765\u5b9e\u73b0\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u3002</li> <li>\u4e00\u4e2a\u5bf9\u8c61\u7684 <code>__proto__</code> \u5c5e\u6027 \u6307\u5411\u5176\u539f\u578b</li> <li>\u6784\u9020\u51fd\u6570<ul> <li>\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\u521b\u5efa;</li> <li>\u4e3a\u4e86\u907f\u514d\u5197\u4f59, \u4e0d\u5e94\u8be5\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5b9a\u4e49\u65b9\u6cd5, \u800c\u5e94\u8be5\u5b9a\u4e49\u5728\u5176\u539f\u578b\u4e0a, \u4f8b\u5982 <code>Student.prototype.func = ...</code></li> </ul> </li> <li>\u6ce8\u610f\u533a\u5206:<ul> <li><code>prototype</code> \u662f\u51fd\u6570\u72ec\u6709\u7684\u5c5e\u6027</li> <li><code>__proto__</code> \u548c <code>constructor</code> \u662f\u5bf9\u8c61\u7684\u5c5e\u6027; \u4f46\u662f\u7531\u4e8e JS \u4e2d\u51fd\u6570\u4e5f\u662f\u4e00\u79cd\u5bf9\u8c61\uff0c\u6240\u4ee5\u51fd\u6570\u4e5f\u62e5\u6709</li> </ul> </li> <li>\u4e0d\u5e94\u8be5\u64cd\u4f5c <code>__proto__</code> \u5c5e\u6027</li> <li>\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u53ca\u5176\u6240\u6784\u9020\u51fa\u6765\u7684\u5bf9\u8c61\u6ee1\u8db3\u5173\u7cfb <code>foo.__proto__ === Foo.prototype</code> , \u8fd9\u91cc\u7684 foo \u901a\u8fc7 <code>new Foo()</code> \u6784\u9020.</li> <li>\u5982\u4f55\u5b9e\u73b0\u7ee7\u627f (\u5b9e\u73b0\u6784\u9020\u51fd\u6570)<ul> <li>\u6bd4\u5982\u8981\u5b9e\u73b0\u7ee7\u627f\u94fe <code>new PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; Student.prototype ----&gt; Object.prototype ----&gt; null</code> (\u6ce8\u610f, \u7ee7\u627f\u94fe \u901a\u8fc7 <code>__proto__</code> \u5c5e\u6027\u8fde\u63a5, \u4f8b\u5982 <code>Object.prototype.__proto__===null</code>)</li> <li>\u6211\u4eec\u6700\u7ec8\u8981\u5199\u7684 PrimaryStudent \u8fd9\u6837\u4e00\u4e2a\u6784\u9020\u51fd\u6570, \u4f46\u8981\u5b8c\u6210\u7ee7\u627f\u94fe, \u6ce8\u610f\u8981\u6709\u4e00\u4e2a <code>PrimaryStudent.prototype</code> \u539f\u578b(\u5bf9\u8c61).</li> <li>\u56e0\u6b64, \u53ef\u4ee5\u5206\u4e09\u6b65: 1. \u5b9a\u4e49\u6784\u9020\u51fd\u6570 PrimaryStudent(props), \u6ce8\u610f\u5728\u5176\u4e2d\u8981\u8c03\u7528 <code>Student.call(this, props);</code> \u7c7b\u6bd4 Python \u4e2d\u7684 <code>super(A, self).__init__()</code> ; 2. \u4fee\u590d\u7ee7\u627f\u94fe, \u53ef\u4ee5\u7528\u4e00\u4e2a\u7a7a\u51fd\u6570 <code>F(){}</code> \u6784\u9020\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a <code>PrimaryStudent.prototype</code>, \u7ef4\u62a4 <code>__proto__, prototype, constructor</code> \u5c5e\u6027; 3. \u5728 <code>PrimaryStudent.prototype</code> \u4e0a\u5b9a\u4e49\u65b0\u7684\u539f\u578b\u65b9\u6cd5.</li> </ul> </li> <li>ES6 \u6807\u51c6\u4e2d\u5f15\u5165\u4e86 <code>class</code> \u5173\u952e\u8bcd, \u5927\u5927\u7b80\u5316\u4e86\u7c7b\u548c\u7ee7\u627f\u7684\u8bed\u6cd5.<ul> <li>\u8bed\u6cd5: <code>class Student {}</code><ul> <li><code>class</code>\u7684\u5b9a\u4e49\u5305\u542b\u4e86\u6784\u9020\u51fd\u6570 <code>constructor</code>\u548c\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61\u4e0a\u7684\u65b9\u6cd5\uff08\u6ce8\u610f\u6ca1\u6709<code>function</code>\u5173\u952e\u5b57\uff09</li> </ul> </li> <li>\u7ee7\u627f: <code>class PrimaryStudent extends Student {}</code>; \u8bb0\u5f97\u5728 constructor \u51fd\u6570\u4e2d\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u65b9\u6cd5 <code>super(name);</code></li> </ul> </li> </ul> <p></p>"},{"location":"code/JavaScript/js-note/#_34","title":"\u521b\u5efa\u5bf9\u8c61","text":"<ul> <li>JavaScript\u5bf9\u6bcf\u4e2a\u521b\u5efa\u7684\u5bf9\u8c61\u90fd\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u539f\u578b\uff0c\u6307\u5411\u5b83\u7684\u539f\u578b\u5bf9\u8c61\u3002</li> <li>\u5f53\u6211\u4eec\u7528<code>obj.xxx</code>\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\uff0cJavaScript\u5f15\u64ce\u5148\u5728\u5f53\u524d\u5bf9\u8c61\u4e0a\u67e5\u627e\u8be5\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u5230\u5176\u539f\u578b\u5bf9\u8c61\u4e0a\u627e\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u4e00\u76f4\u4e0a\u6eaf\u5230<code>Object.prototype</code>\u5bf9\u8c61\uff0c\u6700\u540e\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u53ea\u80fd\u8fd4\u56de<code>undefined</code>\u3002</li> <li>Array<ul> <li>\u5176\u539f\u578b\u94fe\u4e3a <code>arr ----&gt; Array.prototype ----&gt; Object.prototype ----&gt; null</code></li> <li><code>Array.prototype</code>\u5b9a\u4e49\u4e86<code>indexOf()</code>\u3001<code>shift()</code>\u7b49\u65b9\u6cd5\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u5728\u6240\u6709\u7684<code>Array</code>\u5bf9\u8c61\u4e0a\u76f4\u63a5\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5\u3002</li> </ul> </li> <li>function<ul> <li>\u539f\u578b\u94fe\u4e3a <code>foo ----&gt; Function.prototype ----&gt; Object.prototype ----&gt; null</code></li> <li>\u7531\u4e8e<code>Function.prototype</code>\u5b9a\u4e49\u4e86<code>apply()</code>\u7b49\u65b9\u6cd5\uff0c\u56e0\u6b64\uff0c\u6240\u6709\u51fd\u6570\u90fd\u53ef\u4ee5\u8c03\u7528<code>apply()</code>\u65b9\u6cd5\u3002</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#_35","title":"\u6784\u9020\u51fd\u6570","text":"<ul> <li>\u5728JavaScript\u4e2d\uff0c\u53ef\u4ee5\u7528\u5173\u952e\u5b57<code>new</code>\u6765\u8c03\u7528\u6784\u9020\u51fd\u6570 (\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u51fd\u6570)\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61</li> <li>\u6784\u9020\u51fd\u6570\u7ed1\u5b9a\u7684<code>this</code>\u6307\u5411\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u5e76\u9ed8\u8ba4\u8fd4\u56de<code>this</code> (\u56e0\u6b64\u4e0d\u9700\u8981\u5199 return this)</li> <li>\u4f8b\u5982, \u4e0b\u9762\u7684\u539f\u578b\u94fe\u4e3a <code>xiaoming ----&gt; Student.prototype ----&gt; Object.prototype ----&gt; null</code></li> </ul> <pre><code>/* \u6784\u9020\u51fd\u6570 (\u5c31\u662f\u4e2a\u666e\u901a\u7684\u51fd\u6570, \u4f46\u662f\u901a\u8fc7 new \u6765\u8c03\u7528\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61) */\nfunction Student(name) {\n this.name = name;\n this.hello = function () {\n  alert('Hello, ' + this.name + '!');\n }\n}\nvar xiaoming = new Student('\u5c0f\u660e'); // new !!\nxiaoming.name; // '\u5c0f\u660e'\nxiaoming.hello(); // Hello, \u5c0f\u660e!\n</code></pre> <p>\u6ce8\u610f, \u7528<code>new Student()</code>\u521b\u5efa\u7684\u5bf9\u8c61\u8fd8\u4ece\u539f\u578b\u4e0a\u83b7\u5f97\u4e86\u4e00\u4e2a<code>constructor</code>\u5c5e\u6027\uff0c\u5b83\u6307\u5411\u51fd\u6570<code>Student</code>\u672c\u8eab</p> <pre><code>// \u6784\u9020\u51fd\u6570 \u7684 prototype \u5c5e\u6027\u6307\u5411\u5176\u539f\u578b, \u539f\u578b \u7684 constructor \u5c5e\u6027\u6307\u5411\u6784\u9020\u51fd\u6570\nStudent.prototype.constructor === Student; // true\n// \u5b9e\u4f8b \u7684 constructor \u5c5e\u6027\u6307\u5411\u6784\u9020\u51fd\u6570\nxiaoming.constructor === Student.prototype.constructor; // true\nxiaoming.constructor === Student; // true\n\nObject.getPrototypeOf(xiaoming) === Student.prototype; // true\n\nxiaoming instanceof Student; // true\n</code></pre> <p></p> <ul> <li>\u7ea2\u8272\u7bad\u5934\u662f\u539f\u578b\u94fe\u3002\u6ce8\u610f\uff0c<code>Student.prototype</code>\u6307\u5411\u7684\u5bf9\u8c61\u5c31\u662f<code>xiaoming</code>\u3001<code>xiaohong</code>\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u539f\u578b\u5bf9\u8c61\u81ea\u5df1\u8fd8\u6709\u4e2a\u5c5e\u6027<code>constructor</code>\uff0c\u6307\u5411<code>Student</code>\u51fd\u6570\u672c\u8eab\u3002</li> <li>\u53e6\u5916\uff0c\u51fd\u6570<code>Student</code>\u6070\u597d\u6709\u4e2a\u5c5e\u6027<code>prototype</code>\u6307\u5411<code>xiaoming</code>\u3001<code>xiaohong</code>\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u4f46\u662f<code>xiaoming</code>\u3001<code>xiaohong</code>\u8fd9\u4e9b\u5bf9\u8c61\u53ef\u6ca1\u6709<code>prototype</code>\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u7528<code>__proto__</code>\u8fd9\u4e2a\u975e\u6807\u51c6\u7528\u6cd5\u6765\u67e5\u770b\u3002</li> <li>\u73b0\u5728\u6211\u4eec\u5c31\u8ba4\u4e3a<code>xiaoming</code>\u3001<code>xiaohong</code>\u8fd9\u4e9b\u5bf9\u8c61\u201c\u7ee7\u627f\u201d\u81ea<code>Student</code>\u3002</li> </ul> <p>\u53e6\u5916, \u4e3a\u4e86\u907f\u514d\u6784\u9020\u51fd\u6570\u7d22\u6784\u9020\u51fa\u6765\u7684\u300c\u5b9e\u4f8b\u300d\u5bf9\u8c61\u5305\u542b\u91cd\u590d\u4ee3\u7801 (\u4f8b\u5982\u4e0a\u4f8b\u4e2d\u7684 hello \u65b9\u6cd5\u4f1a\u7ed1\u5b9a\u5230\u5404\u4e2a\u5b9e\u4f8b\u4e0a, \u6d6a\u8d39\u5185\u5b58), \u53ef\u4ee5\u5c06\u65b9\u6cd5\u7ed1\u5b9a\u5728\u5176\u539f\u578b\u4e0a.</p> <p></p> <pre><code>function Student(name) {\n this.name = name;\n}\n\nStudent.prototype.hello = function () {\n alert('Hello, ' + this.name + '!');\n};\n</code></pre>"},{"location":"code/JavaScript/js-note/#_36","title":"\u89c4\u8303\u7684\u505a\u6cd5","text":"<ul> <li>\u5fd8\u8bb0\u5199 new \u7684\u540e\u679c: \u5728strict\u6a21\u5f0f\u4e0b\uff0c<code>this.name = name</code>\u5c06\u62a5\u9519\uff0c\u56e0\u4e3a<code>this</code>\u7ed1\u5b9a\u4e3a<code>undefined</code>\uff0c\u5728\u975estrict\u6a21\u5f0f\u4e0b\uff0c<code>this.name = name</code>\u4e0d\u62a5\u9519\uff0c\u56e0\u4e3a<code>this</code>\u7ed1\u5b9a\u4e3a<code>window</code>\uff0c\u4e8e\u662f\u65e0\u610f\u95f4\u521b\u5efa\u4e86\u5168\u5c40\u53d8\u91cf<code>name</code>\uff0c\u5e76\u4e14\u8fd4\u56de<code>undefined</code>\uff0c\u8fd9\u4e2a\u7ed3\u679c\u66f4\u7cdf\u7cd5\u3002</li> <li>\u56e0\u6b64, \u9075\u5faa\u4e00\u4e9b\u89c4\u8303<ul> <li>\u6784\u9020\u51fd\u6570\u9996\u5b57\u6bcd\u5e94\u5f53\u5927\u5199\uff0c\u800c\u666e\u901a\u51fd\u6570\u9996\u5b57\u6bcd\u5e94\u5f53\u5c0f\u5199, \u8fd9\u6837\uff0c\u4e00\u4e9b\u8bed\u6cd5\u68c0\u67e5\u5de5\u5177\u5982 jslint \u5c06\u53ef\u4ee5\u5e2e\u4f60\u68c0\u6d4b\u5230\u6f0f\u5199\u7684<code>new</code>\u3002</li> <li>\u8fd8\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a<code>createStudent()</code>\u51fd\u6570\uff0c\u5728\u5185\u90e8\u5c01\u88c5\u6240\u6709\u7684<code>new</code>\u64cd\u4f5c<ul> <li>\u597d\u5904: \u4e00\u662f\u4e0d\u9700\u8981<code>new</code>\u6765\u8c03\u7528\uff0c\u4e8c\u662f\u53c2\u6570\u975e\u5e38\u7075\u6d3b (\u5b57\u5178\u5f62\u5f0f\u4f20\u53c2)</li> </ul> </li> </ul> </li> </ul> <pre><code>function Student(props) {\n this.name = props.name || '\u533f\u540d'; // \u9ed8\u8ba4\u503c\u4e3a'\u533f\u540d'\n this.grade = props.grade || 1; // \u9ed8\u8ba4\u503c\u4e3a1\n}\n\nStudent.prototype.hello = function () {\n alert('Hello, ' + this.name + '!');\n};\n\nfunction createStudent(props) {\n return new Student(props || {})\n}\n\nvar xiaoming = createStudent({\n name: '\u5c0f\u660e'\n});\nxiaoming.grade; // 1\n</code></pre>"},{"location":"code/JavaScript/js-note/#_37","title":"\u539f\u578b\u7ee7\u627f","text":"<ul> <li>\u6ce8\u610f<ul> <li><code>prototype</code> \u662f (\u6784\u9020) \u51fd\u6570\u72ec\u6709\u7684\u5c5e\u6027</li> <li><code>__proto__</code> \u548c <code>constructor</code> \u662f\u5bf9\u8c61\u7684\u5c5e\u6027; \u4f46\u662f\u7531\u4e8e JS \u4e2d\u51fd\u6570\u4e5f\u662f\u4e00\u79cd\u5bf9\u8c61\uff0c\u6240\u4ee5\u51fd\u6570\u4e5f\u62e5\u6709</li> </ul> </li> <li>\u4e0d\u5e94\u8be5\u64cd\u4f5c <code>__proto__</code> \u5c5e\u6027</li> <li>\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u53ca\u5176\u6240\u6784\u9020\u51fa\u6765\u7684\u5bf9\u8c61\u6ee1\u8db3\u5173\u7cfb <code>foo.__proto__ === Foo.prototype</code> , \u8fd9\u91cc\u7684 foo \u901a\u8fc7 <code>new Foo()</code> \u6784\u9020.</li> </ul> <p>JavaScript\u7684\u539f\u578b\u7ee7\u627f\u5b9e\u73b0\u65b9\u5f0f\u5c31\u662f\uff1a</p> <ul> <li>\u5b9a\u4e49\u65b0\u7684\u6784\u9020\u51fd\u6570\uff0c\u5e76\u5728\u5185\u90e8\u7528 <code>call()</code> \u8c03\u7528\u5e0c\u671b\u201c\u7ee7\u627f\u201d\u7684\u6784\u9020\u51fd\u6570\uff0c\u5e76\u7ed1\u5b9a <code>this</code>\uff1b</li> <li>\u501f\u52a9\u4e2d\u95f4\u51fd\u6570 F \u5b9e\u73b0\u539f\u578b\u94fe\u7ee7\u627f\uff0c\u6700\u597d\u901a\u8fc7\u5c01\u88c5\u7684 inherits \u51fd\u6570\u5b8c\u6210\uff1b</li> <li>\u7ee7\u7eed\u5728\u65b0\u7684\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u4e0a\u5b9a\u4e49\u65b0\u65b9\u6cd5\u3002</li> </ul> <p>\u8fd9\u91cc F \u51fd\u6570\u7684\u4f5c\u7528:</p> <ol> <li>\u6307\u5b9a\u6784\u9020\u51fd\u6570 F \u7684 prototype \u5c5e\u6027(\u6ce8\u610fprototype\u4e3a\u51fd\u6570\u6240\u7279\u6709\u7684\u5c5e\u6027) \u4e3a Student.prototype; \u4ece\u800c\u4f7f\u5f97 new \u51fa\u6765\u7684 F\u5bf9\u8c61\u6709\u5c5e\u6027 <code>(new F()).__proto__ === Student.prototype</code></li> <li>\u6784\u9020\u4e00\u4e2a F\u5bf9\u8c61 (\u8bb0\u4e3a f), \u8fd9\u4e2a\u5bf9\u8c61\u5c31\u662f\u6211\u4eec\u8981\u6784\u9020\u7684 PrimaryStudent.prototype \u539f\u578b, \u901a\u8fc7 1 \u6211\u4eec\u6307\u5b9a\u597d\u4e86\u8fd9\u4e00\u5bf9\u8c61 <code>__proto__</code> \u5c5e\u6027</li> <li>\u94fe\u63a5 \u5bf9\u8c61f \u548c \u6784\u9020\u51fd\u6570PrimaryStudent, \u4f7f\u5f97\u5b83\u4eec\u4e92\u4e3a constructor, prototype</li> </ol> <p>\u6211\u4eec\u5e0c\u671b\u5b8c\u6210\u4e00\u4e2a PrimaryStudent \u6784\u9020\u51fd\u6570, \u4f7f\u5176\u7ee7\u627f Student \u51fd\u6570. \u4e5f\u5373\u7ee7\u627f\u94fe <code>new PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; Student.prototype ----&gt; Object.prototype ----&gt; null</code></p> <pre><code>/* \u5b9e\u73b0 PrimaryStudent \u7ee7\u627f Student */\nfunction Student(props) {\n this.name = props.name || \"Unnamed\";\n}\nStudent.prototype.hello = function () {\n alert(\"Hello, \" + this.name + \"!\");\n};\n\n// PrimaryStudent\u6784\u9020\u51fd\u6570:\nfunction PrimaryStudent(props) {\n Student.call(this, props); // \u6ce8\u610f\u8c03\u7528\u4e86 Student \u6784\u9020\u51fd\u6570, \u4f20\u5165 this\n this.grade = props.grade || 1;\n}\n\n/* \u4ee5\u4e0b\u8fd9\u5757\u4ee3\u7801\u53ef\u4ee5\u7528\u4e0b\u9762\u5b9e\u73b0\u7684 inherits \u51fd\u6570\u66ff\u4ee3\n \u8fd9\u91cc F \u51fd\u6570\u7684\u4f5c\u7528: \n 1. \u6307\u5b9a\u6784\u9020\u51fd\u6570 F \u7684 prototype \u5c5e\u6027(\u6ce8\u610fprototype\u4e3a\u51fd\u6570\u6240\u7279\u6709\u7684\u5c5e\u6027) \u4e3a Student.prototype; \u4ece\u800c\u4f7f\u5f97 new \u51fa\u6765\u7684 F\u5bf9\u8c61\u6709\u5c5e\u6027 `(new F()).__proto__ === Student.prototype`\n 2. \u6784\u9020\u4e00\u4e2a F\u5bf9\u8c61 (\u8bb0\u4e3a f), \u8fd9\u4e2a\u5bf9\u8c61\u5c31\u662f\u6211\u4eec\u8981\u6784\u9020\u7684 PrimaryStudent.prototype \u539f\u578b, \u901a\u8fc7 1 \u6211\u4eec\u6307\u5b9a\u597d\u4e86\u8fd9\u4e00\u5bf9\u8c61 `__proto__` \u5c5e\u6027\n 3. \u94fe\u63a5 \u5bf9\u8c61f \u548c \u6784\u9020\u51fd\u6570PrimaryStudent, \u4f7f\u5f97\u5b83\u4eec\u4e92\u4e3a constructor, prototype\n*/\n// \u7a7a\u51fd\u6570F:\nfunction F() {}\n// \u628aF\u7684\u539f\u578b\u6307\u5411Student.prototype:\nF.prototype = Student.prototype;\n// \u628aPrimaryStudent\u7684\u539f\u578b\u6307\u5411\u4e00\u4e2a\u65b0\u7684F\u5bf9\u8c61\uff0cF\u5bf9\u8c61\u7684\u539f\u578b\u6b63\u597d\u6307\u5411Student.prototype:\nPrimaryStudent.prototype = new F();\n// \u628aPrimaryStudent\u539f\u578b\u7684\u6784\u9020\u51fd\u6570\u4fee\u590d\u4e3aPrimaryStudent:\nPrimaryStudent.prototype.constructor = PrimaryStudent;\n\n// \u7ee7\u7eed\u5728PrimaryStudent\u539f\u578b\uff08\u5c31\u662fnew F()\u5bf9\u8c61\uff09\u4e0a\u5b9a\u4e49\u65b9\u6cd5\uff1a\nPrimaryStudent.prototype.getGrade = function () {\n return this.grade;\n};\n\n// \u521b\u5efaxiaoming:\nvar xiaoming = new PrimaryStudent({\n name: \"\u5c0f\u660e\",\n grade: 2,\n});\nxiaoming.name; // '\u5c0f\u660e'\nxiaoming.grade; // 2\n\n// \u9a8c\u8bc1\u539f\u578b:\nxiaoming.__proto__ === PrimaryStudent.prototype; // true\nxiaoming.__proto__.__proto__ === Student.prototype; // true\n\n// \u9a8c\u8bc1\u7ee7\u627f\u5173\u7cfb:\nxiaoming instanceof PrimaryStudent; // true\nxiaoming instanceof Student; // true\n</code></pre> <p></p> <ul> <li>\u6ce8\u610f\uff0c\u51fd\u6570<code>F</code>\u4ec5\u7528\u4e8e\u6865\u63a5\uff0c\u6211\u4eec\u4ec5\u521b\u5efa\u4e86\u4e00\u4e2a<code>new F()</code>\u5b9e\u4f8b\uff0c\u800c\u4e14\uff0c\u6ca1\u6709\u6539\u53d8\u539f\u6709\u7684<code>Student</code>\u5b9a\u4e49\u7684\u539f\u578b\u94fe\u3002</li> <li>\u5982\u679c\u628a\u7ee7\u627f\u8fd9\u4e2a\u52a8\u4f5c\u7528\u4e00\u4e2a<code>inherits()</code>\u51fd\u6570\u5c01\u88c5\u8d77\u6765\uff0c\u8fd8\u53ef\u4ee5\u9690\u85cf<code>F</code>\u7684\u5b9a\u4e49\uff0c\u5e76\u7b80\u5316\u4ee3\u7801</li> </ul> <pre><code>function inherits(Child, Parent) {\n var F = function () {};\n F.prototype = Parent.prototype;\n Child.prototype = new F();\n Child.prototype.constructor = Child;\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#class","title":"class\u7ee7\u627f","text":"<ul> <li>\u65b0\u7684\u5173\u952e\u5b57<code>class</code>\u4eceES6\u5f00\u59cb\u6b63\u5f0f\u88ab\u5f15\u5165\u5230JavaScript\u4e2d\u3002<code>class</code>\u7684\u76ee\u7684\u5c31\u662f\u8ba9\u5b9a\u4e49\u7c7b\u66f4\u7b80\u5355\u3002</li> <li>\u8bed\u6cd5\u89c4\u5219<ul> <li><code>class</code>\u7684\u5b9a\u4e49\u5305\u542b\u4e86\u6784\u9020\u51fd\u6570<code>constructor</code>\u548c\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61\u4e0a\u7684\u51fd\u6570<code>hello()</code>\uff08\u6ce8\u610f\u6ca1\u6709<code>function</code>\u5173\u952e\u5b57\uff09\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86<code>Student.prototype.hello = function () {...}</code>\u8fd9\u6837\u5206\u6563\u7684\u4ee3\u7801\u3002</li> </ul> </li> <li>class \u7ee7\u627f: <code>extends</code> \u5173\u952e\u8bcd<ul> <li><code>class PrimaryStudent extends Student {}</code></li> <li>\u8bb0\u5f97\u5728 constructor \u51fd\u6570\u4e2d\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u65b9\u6cd5 <code>super(name);</code></li> </ul> </li> </ul> <pre><code>// \u4e4b\u524d\u7684\u5199\u6cd5\nfunction Student(name) {\n this.name = name;\n}\nStudent.prototype.hello = function () {\n alert('Hello, ' + this.name + '!');\n}\n\n// \u7528 class \u5173\u952e\u8bcd\u6765\u5199\nclass Student {\n constructor(name) {\n  this.name = name;\n }\n\n hello() {\n  alert('Hello, ' + this.name + '!');\n }\n}\n\nvar xiaoming = new Student('\u5c0f\u660e');\nxiaoming.hello();\n</code></pre> <p>\u7ee7\u627f</p> <ul> <li>\u6ce8\u610f<code>PrimaryStudent</code>\u7684\u5b9a\u4e49\u4e5f\u662fclass\u5173\u952e\u5b57\u5b9e\u73b0\u7684\uff0c\u800c<code>extends</code>\u5219\u8868\u793a\u539f\u578b\u94fe\u5bf9\u8c61\u6765\u81ea<code>Student</code>\u3002\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u53ef\u80fd\u4f1a\u4e0e\u7236\u7c7b\u4e0d\u592a\u76f8\u540c\uff0c\u4f8b\u5982\uff0c<code>PrimaryStudent</code>\u9700\u8981<code>name</code>\u548c<code>grade</code>\u4e24\u4e2a\u53c2\u6570\uff0c\u5e76\u4e14\u9700\u8981\u901a\u8fc7<code>super(name)</code>\u6765\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u5426\u5219\u7236\u7c7b\u7684<code>name</code>\u5c5e\u6027\u65e0\u6cd5\u6b63\u5e38\u521d\u59cb\u5316\u3002</li> <li><code>PrimaryStudent</code>\u5df2\u7ecf\u81ea\u52a8\u83b7\u5f97\u4e86\u7236\u7c7b<code>Student</code>\u7684<code>hello</code>\u65b9\u6cd5\uff0c\u6211\u4eec\u53c8\u5728\u5b50\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u65b0\u7684<code>myGrade</code>\u65b9\u6cd5\u3002</li> </ul> <pre><code>class PrimaryStudent extends Student {\n constructor(name, grade) {\n  super(name); // \u8bb0\u5f97\u7528super\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u65b9\u6cd5!\n  this.grade = grade;\n }\n\n myGrade() {\n  alert('I am at grade ' + this.grade);\n }\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#_38","title":"\u6d4f\u89c8\u5668","text":""},{"location":"code/JavaScript/js-note/#_39","title":"\u6d4f\u89c8\u5668\u5bf9\u8c61","text":"<ul> <li>window<ul> <li>window \u5bf9\u8c61\u4e0d\u4f46\u5145\u5f53\u5168\u5c40\u4f5c\u7528\u57df\uff0c\u800c\u4e14\u8868\u793a\u6d4f\u89c8\u5668\u7a97\u53e3</li> <li>\u5c5e\u6027: innerWidth, outterHeight</li> </ul> </li> <li>navigator<ul> <li>navigator \u5bf9\u8c61\u8868\u793a\u6d4f\u89c8\u5668\u7684\u4fe1\u606f</li> <li>\u5c5e\u6027: appName, appVersion, language, platform, userAgent</li> </ul> </li> <li>screen<ul> <li>screen \u5bf9\u8c61\u8868\u793a\u5c4f\u5e55\u7684\u4fe1\u606f</li> <li>\u5c5e\u6027: width, height, colorDepth</li> </ul> </li> <li>location<ul> <li>location \u5bf9\u8c61\u8868\u793a\u5f53\u524d\u9875\u9762\u7684URL\u4fe1\u606f</li> <li>\u5c5e\u6027<ul> <li><code>href</code> \u5b8c\u6574 URL, \u4f8b\u5982 <code>http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP</code></li> <li><code>protocol</code>, <code>host</code>, <code>port</code>, <code>pathname</code></li> <li><code>search</code>, <code>hash</code></li> </ul> </li> <li>\u65b9\u6cd5: assign, reload</li> </ul> </li> <li>document<ul> <li>document\u5bf9\u8c61\u8868\u793a\u5f53\u524d\u9875\u9762\u3002\u7531\u4e8eHTML\u5728\u6d4f\u89c8\u5668\u4e2d\u4ee5DOM\u5f62\u5f0f\u8868\u793a\u4e3a\u6811\u5f62\u7ed3\u6784\uff0cdocument\u5bf9\u8c61\u5c31\u662f\u6574\u4e2aDOM\u6811\u7684\u6839\u8282\u70b9\u3002</li> <li>document\u7684 <code>title</code> \u5c5e\u6027\u662f\u4eceHTML\u6587\u6863\u4e2d\u7684 <code>&lt;title&gt;xxx&lt;/title&gt;</code> \u8bfb\u53d6\u7684\uff0c\u4f46\u662f\u53ef\u4ee5\u52a8\u6001\u6539\u53d8</li> <li>document\u5bf9\u8c61\u8fd8\u6709\u4e00\u4e2a <code>cookie</code> \u5c5e\u6027\uff0c\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684Cookie</li> <li>\u65b9\u6cd5: getElementById, getElementsByTagName</li> </ul> </li> <li>history<ul> <li><code>history</code>\u5bf9\u8c61\u4fdd\u5b58\u4e86\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u8bb0\u5f55</li> <li>JavaScript\u53ef\u4ee5\u8c03\u7528<code>history</code>\u5bf9\u8c61\u7684<code>back()</code>\u6216<code>forward()</code>\uff0c\u76f8\u5f53\u4e8e\u7528\u6237\u70b9\u51fb\u4e86\u6d4f\u89c8\u5668\u7684\u201c\u540e\u9000\u201d\u6216\u201c\u524d\u8fdb\u201d\u6309\u94ae</li> <li>\u4e0d\u5e94\u8be5\u4f7f\u7528</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#window","title":"window","text":"<ul> <li><code>window</code>\u5bf9\u8c61\u4e0d\u4f46\u5145\u5f53\u5168\u5c40\u4f5c\u7528\u57df\uff0c\u800c\u4e14\u8868\u793a\u6d4f\u89c8\u5668\u7a97\u53e3\u3002</li> <li><code>window</code>\u5bf9\u8c61\u6709<code>innerWidth</code>\u548c<code>innerHeight</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u83b7\u53d6\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u5185\u90e8\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002\u5185\u90e8\u5bbd\u9ad8\u662f\u6307\u9664\u53bb\u83dc\u5355\u680f\u3001\u5de5\u5177\u680f\u3001\u8fb9\u6846\u7b49\u5360\u4f4d\u5143\u7d20\u540e\uff0c\u7528\u4e8e\u663e\u793a\u7f51\u9875\u7684\u51c0\u5bbd\u9ad8\u3002</li> <li>\u5bf9\u5e94\u7684\uff0c\u8fd8\u6709\u4e00\u4e2a<code>outerWidth</code>\u548c<code>outerHeight</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u83b7\u53d6\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u6574\u4e2a\u5bbd\u9ad8\u3002</li> </ul> <pre><code>// \u53ef\u4ee5\u8c03\u6574\u6d4f\u89c8\u5668\u7a97\u53e3\u5927\u5c0f\u8bd5\u8bd5:\nconsole.log('window inner size: ' + window.innerWidth + ' x ' + window.innerHeight);\n</code></pre>"},{"location":"code/JavaScript/js-note/#navigator","title":"navigator","text":"<p><code>navigator</code>\u5bf9\u8c61\u8868\u793a\u6d4f\u89c8\u5668\u7684\u4fe1\u606f\uff0c\u6700\u5e38\u7528\u7684\u5c5e\u6027\u5305\u62ec\uff1a</p> <ul> <li>navigator.appName\uff1a\u6d4f\u89c8\u5668\u540d\u79f0\uff1b</li> <li>navigator.appVersion\uff1a\u6d4f\u89c8\u5668\u7248\u672c\uff1b</li> <li>navigator.language\uff1a\u6d4f\u89c8\u5668\u8bbe\u7f6e\u7684\u8bed\u8a00\uff1b</li> <li>navigator.platform\uff1a\u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b\uff1b</li> <li>navigator.userAgent\uff1a\u6d4f\u89c8\u5668\u8bbe\u5b9a\u7684<code>User-Agent</code>\u5b57\u7b26\u4e32\u3002</li> </ul> <p>\u8bf7\u6ce8\u610f\uff0c<code>navigator</code>\u7684\u4fe1\u606f\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u88ab\u7528\u6237\u4fee\u6539\uff0c\u6240\u4ee5JavaScript\u8bfb\u53d6\u7684\u503c\u4e0d\u4e00\u5b9a\u662f\u6b63\u786e\u7684\u3002\u5f88\u591a\u521d\u5b66\u8005\u4e3a\u4e86\u9488\u5bf9\u4e0d\u540c\u6d4f\u89c8\u5668\u7f16\u5199\u4e0d\u540c\u7684\u4ee3\u7801\uff0c\u559c\u6b22\u7528<code>if</code>\u5224\u65ad\u6d4f\u89c8\u5668\u7248\u672c\uff0c\u4f8b\u5982\uff1a</p> <pre><code>var width; \nif (getIEVersion(navigator.userAgent) &lt; 9) { \n width = document.body.clientWidth; \n} else { \n width = window.innerWidth; \n} \n</code></pre> <p>\u4f46\u8fd9\u6837\u65e2\u53ef\u80fd\u5224\u65ad\u4e0d\u51c6\u786e\uff0c\u4e5f\u5f88\u96be\u7ef4\u62a4\u4ee3\u7801\u3002\u6b63\u786e\u7684\u65b9\u6cd5\u662f\u5145\u5206\u5229\u7528JavaScript\u5bf9\u4e0d\u5b58\u5728\u5c5e\u6027\u8fd4\u56de<code>undefined</code>\u7684\u7279\u6027\uff0c\u76f4\u63a5\u7528\u77ed\u8def\u8fd0\u7b97\u7b26<code>||</code>\u8ba1\u7b97\uff1a</p> <pre><code>var width = window.innerWidth || document.body.clientWidth;\n</code></pre>"},{"location":"code/JavaScript/js-note/#screen","title":"screen","text":"<p><code>screen</code>\u5bf9\u8c61\u8868\u793a\u5c4f\u5e55\u7684\u4fe1\u606f\uff0c\u5e38\u7528\u7684\u5c5e\u6027\u6709\uff1a</p> <ul> <li>screen.width\uff1a\u5c4f\u5e55\u5bbd\u5ea6\uff0c\u4ee5\u50cf\u7d20\u4e3a\u5355\u4f4d\uff1b</li> <li>screen.height\uff1a\u5c4f\u5e55\u9ad8\u5ea6\uff0c\u4ee5\u50cf\u7d20\u4e3a\u5355\u4f4d\uff1b</li> <li>screen.colorDepth\uff1a\u8fd4\u56de\u989c\u8272\u4f4d\u6570\uff0c\u59828\u300116\u300124\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#location","title":"location","text":"<p><code>location</code>\u5bf9\u8c61\u8868\u793a\u5f53\u524d\u9875\u9762\u7684URL\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5b8c\u6574\u7684URL\uff1a<code>http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP</code></p> <p>\u53ef\u4ee5\u7528<code>location.href</code>\u83b7\u53d6\u3002\u8981\u83b7\u5f97URL\u5404\u4e2a\u90e8\u5206\u7684\u503c\uff0c\u53ef\u4ee5\u8fd9\u4e48\u5199\uff1a</p> <pre><code>location.protocol; // 'http'\nlocation.host; // 'www.example.com'\nlocation.port; // '8080'\nlocation.pathname; // '/path/index.html'\nlocation.search; // '?a=1&amp;b=2'\nlocation.hash; // 'TOP'\n</code></pre> <p>\u8981\u52a0\u8f7d\u4e00\u4e2a\u65b0\u9875\u9762\uff0c\u53ef\u4ee5\u8c03\u7528<code>location.assign()</code>\u3002\u5982\u679c\u8981\u91cd\u65b0\u52a0\u8f7d\u5f53\u524d\u9875\u9762\uff0c\u8c03\u7528<code>location.reload()</code>\u65b9\u6cd5\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>if (confirm('\u91cd\u65b0\u52a0\u8f7d\u5f53\u524d\u9875' + location.href + '?')) {\n location.reload();\n} else {\n location.assign('/'); // \u8bbe\u7f6e\u4e00\u4e2a\u65b0\u7684URL\u5730\u5740\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#document","title":"document","text":"<ul> <li><code>document</code>\u5bf9\u8c61\u8868\u793a\u5f53\u524d\u9875\u9762\u3002\u7531\u4e8eHTML\u5728\u6d4f\u89c8\u5668\u4e2d\u4ee5DOM\u5f62\u5f0f\u8868\u793a\u4e3a\u6811\u5f62\u7ed3\u6784\uff0c<code>document</code>\u5bf9\u8c61\u5c31\u662f\u6574\u4e2aDOM\u6811\u7684\u6839\u8282\u70b9\u3002</li> <li><code>document</code>\u7684<code>title</code>\u5c5e\u6027\u662f\u4eceHTML\u6587\u6863\u4e2d\u7684<code>&lt;title&gt;xxx&lt;/title&gt;</code>\u8bfb\u53d6\u7684\uff0c\u4f46\u662f\u53ef\u4ee5\u52a8\u6001\u6539\u53d8\uff1a</li> </ul> <pre><code>document.title = '\u52aa\u529b\u5b66\u4e60JavaScript!';\n</code></pre> <ul> <li>\u7528<code>document</code>\u5bf9\u8c61\u63d0\u4f9b\u7684<code>getElementById()</code>\u548c<code>getElementsByTagName()</code>\u53ef\u4ee5\u6309ID\u83b7\u5f97\u4e00\u4e2aDOM\u8282\u70b9\u548c\u6309Tag\u540d\u79f0\u83b7\u5f97\u4e00\u7ec4DOM\u8282\u70b9</li> <li><code>document</code>\u5bf9\u8c61\u8fd8\u6709\u4e00\u4e2a<code>cookie</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684Cookie\u3002</li> </ul> <p>Cookie \u7b80\u4ecb</p> <ul> <li>Cookie\u662f\u7531\u670d\u52a1\u5668\u53d1\u9001\u7684key-value\u6807\u793a\u7b26\u3002\u56e0\u4e3aHTTP\u534f\u8bae\u662f\u65e0\u72b6\u6001\u7684\uff0c\u4f46\u662f\u670d\u52a1\u5668\u8981\u533a\u5206\u5230\u5e95\u662f\u54ea\u4e2a\u7528\u6237\u53d1\u8fc7\u6765\u7684\u8bf7\u6c42\uff0c\u5c31\u53ef\u4ee5\u7528Cookie\u6765\u533a\u5206\u3002\u5f53\u4e00\u4e2a\u7528\u6237\u6210\u529f\u767b\u5f55\u540e\uff0c\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2aCookie\u7ed9\u6d4f\u89c8\u5668\uff0c\u4f8b\u5982<code>user=ABC123XYZ(\u52a0\u5bc6\u7684\u5b57\u7b26\u4e32)...</code>\uff0c\u6b64\u540e\uff0c\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u7f51\u7ad9\u65f6\uff0c\u4f1a\u5728\u8bf7\u6c42\u5934\u9644\u4e0a\u8fd9\u4e2aCookie\uff0c\u670d\u52a1\u5668\u6839\u636eCookie\u5373\u53ef\u533a\u5206\u51fa\u7528\u6237\u3002</li> <li>Cookie\u8fd8\u53ef\u4ee5\u5b58\u50a8\u7f51\u7ad9\u7684\u4e00\u4e9b\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff0c\u9875\u9762\u663e\u793a\u7684\u8bed\u8a00\u7b49\u7b49\u3002</li> </ul> <p>\u5b89\u5168\u6027</p> <ul> <li>\u7531\u4e8eJavaScript\u80fd\u8bfb\u53d6\u5230\u9875\u9762\u7684Cookie\uff0c\u800c\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\u901a\u5e38\u4e5f\u5b58\u5728Cookie\u4e2d\uff0c\u8fd9\u5c31\u9020\u6210\u4e86\u5de8\u5927\u7684\u5b89\u5168\u9690\u60a3\u3002</li> <li>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u670d\u52a1\u5668\u5728\u8bbe\u7f6eCookie\u65f6\u53ef\u4ee5\u4f7f\u7528<code>httpOnly</code>\uff0c\u8bbe\u5b9a\u4e86<code>httpOnly</code>\u7684Cookie\u5c06\u4e0d\u80fd\u88abJavaScript\u8bfb\u53d6\u3002</li> <li>\u4e3a\u4e86\u786e\u4fdd\u5b89\u5168\uff0c\u670d\u52a1\u5668\u7aef\u5728\u8bbe\u7f6eCookie\u65f6\uff0c\u5e94\u8be5\u59cb\u7ec8\u575a\u6301\u4f7f\u7528httpOnly\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#history","title":"history","text":"<ul> <li><code>history</code>\u5bf9\u8c61\u4fdd\u5b58\u4e86\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u8bb0\u5f55\uff0cJavaScript\u53ef\u4ee5\u8c03\u7528<code>history</code>\u5bf9\u8c61\u7684<code>back()</code>\u6216<code>forward ()</code>\uff0c\u76f8\u5f53\u4e8e\u7528\u6237\u70b9\u51fb\u4e86\u6d4f\u89c8\u5668\u7684\u201c\u540e\u9000\u201d\u6216\u201c\u524d\u8fdb\u201d\u6309\u94ae\u3002</li> <li>\u8fd9\u4e2a\u5bf9\u8c61\u5c5e\u4e8e\u5386\u53f2\u9057\u7559\u5bf9\u8c61\uff0c\u5bf9\u4e8e\u73b0\u4ee3Web\u9875\u9762\u6765\u8bf4\uff0c\u7531\u4e8e\u5927\u91cf\u4f7f\u7528AJAX\u548c\u9875\u9762\u4ea4\u4e92\uff0c\u7b80\u5355\u7c97\u66b4\u5730\u8c03\u7528<code>history.back()</code>\u53ef\u80fd\u4f1a\u8ba9\u7528\u6237\u611f\u5230\u975e\u5e38\u6124\u6012\u3002</li> <li>\u65b0\u624b\u5f00\u59cb\u8bbe\u8ba1Web\u9875\u9762\u65f6\u559c\u6b22\u5728\u767b\u5f55\u9875\u767b\u5f55\u6210\u529f\u65f6\u8c03\u7528<code>history.back()</code>\uff0c\u8bd5\u56fe\u56de\u5230\u767b\u5f55\u524d\u7684\u9875\u9762\u3002\u8fd9\u662f\u4e00\u79cd\u9519\u8bef\u7684\u65b9\u6cd5\u3002</li> <li>\u4efb\u4f55\u60c5\u51b5\uff0c\u4f60\u90fd\u4e0d\u5e94\u8be5\u4f7f\u7528<code>history</code>\u8fd9\u4e2a\u5bf9\u8c61\u4e86\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#dom","title":"\u64cd\u4f5c DOM","text":"<ul> <li>\u7531\u4e8eHTML\u6587\u6863\u88ab\u6d4f\u89c8\u5668\u89e3\u6790\u540e\u5c31\u662f\u4e00\u68f5DOM\u6811\uff0c\u8981\u6539\u53d8HTML\u7684\u7ed3\u6784\uff0c\u5c31\u9700\u8981\u901a\u8fc7JavaScript\u6765\u64cd\u4f5cDOM</li> <li>\u5305\u62ec: \u66f4\u65b0, \u904d\u5386, \u6dfb\u52a0, \u5220\u9664</li> <li>\u62ff\u5230 DOM \u8282\u70b9<ul> <li><code>document.getElementById()</code>, <code>document.getElementsByTagName()</code>\uff0c\u4ee5\u53caCSS\u9009\u62e9\u5668 <code>document.getElementsByClassName()</code><ul> <li>\u7531\u4e8eID\u5728HTML\u6587\u6863\u4e2d\u662f\u552f\u4e00\u7684\uff0c\u6240\u4ee5<code>document.getElementById()</code>\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4f4d\u552f\u4e00\u7684\u4e00\u4e2aDOM\u8282\u70b9\u3002<code>document.getElementsByTagName()</code>\u548c<code>document.getElementsByClassName()</code>\u603b\u662f\u8fd4\u56de\u4e00\u7ec4DOM\u8282\u70b9\u3002\u8981\u7cbe\u786e\u5730\u9009\u62e9DOM\uff0c\u53ef\u4ee5\u5148\u5b9a\u4f4d\u7236\u8282\u70b9\uff0c\u518d\u4ece\u7236\u8282\u70b9\u5f00\u59cb\u9009\u62e9\uff0c\u4ee5\u7f29\u5c0f\u8303\u56f4</li> </ul> </li> <li>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528 <code>querySelector()</code> \u548c <code>querySelectorAll()</code>\uff0c\u9700\u8981\u4e86\u89e3selector\u8bed\u6cd5\uff0c\u7136\u540e\u4f7f\u7528\u6761\u4ef6\u6765\u83b7\u53d6\u8282\u70b9</li> </ul> </li> <li>DOM<ul> <li>DOM\u8282\u70b9\u5b9e\u9645\u4e0a\u662f <code>Node</code>\uff0c\u5728HTML\u4e2d\uff0cNode\u5305\u62ecElement\u3001Comment\u3001CDATA_SECTION\u7b49\u5f88\u591a\u79cd\uff0c\u4ee5\u53ca\u6839\u8282\u70b9 Document\u7c7b\u578b\uff0c\u4f46\u662f\uff0c\u7edd\u5927\u591a\u6570\u65f6\u5019\u6211\u4eec\u53ea\u5173\u5fc3 Element\uff0c\u4e5f\u5c31\u662f\u5b9e\u9645\u63a7\u5236\u9875\u9762\u7ed3\u6784\u7684Node\uff0c\u5176\u4ed6\u7c7b\u578b\u7684Node\u5ffd\u7565\u5373\u53ef\u3002<ul> <li>\u6839\u8282\u70b9Document\u5df2\u7ecf\u81ea\u52a8\u7ed1\u5b9a\u4e3a\u5168\u5c40\u53d8\u91cfdocument\u3002</li> <li>\u4e25\u683c\u5730\u8bb2\uff0c\u6211\u4eec\u8fd9\u91cc\u7684DOM\u8282\u70b9\u662f\u6307Element</li> </ul> </li> <li>innerHTML, innerText</li> <li>id</li> <li>parentNode</li> <li><code>children</code><ul> <li>\u6ce8\u610f\u8fd4\u56de\u7684\u662f HTMLCollection, \u82e5\u9700\u8981\u64cd\u4f5c, \u9700\u8981 <code>Arrray.from()</code> \u8f6c\u5316\u4e3a\u5217\u8868</li> <li>\u53c2\u89c1 here</li> </ul> </li> <li>firstElementChild, lastElementChild</li> <li>setAttribute \u65b9\u6cd5, \u4f8b\u5982 <code>setAttribute('type', 'text/css')</code></li> </ul> </li> <li>\u66f4\u65b0<ul> <li>\u4fee\u6539\u8282\u70b9\u7684\u6587\u672c<ul> <li>\u4e00\u79cd\u662f\u4fee\u6539<code>innerHTML</code>\u5c5e\u6027</li> <li>\u7b2c\u4e8c\u79cd\u662f\u4fee\u6539<code>innerText</code>\u6216<code>textContent</code>\u5c5e\u6027\uff0c\u8fd9\u6837\u53ef\u4ee5\u81ea\u52a8\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884cHTML\u7f16\u7801\uff0c\u4fdd\u8bc1\u65e0\u6cd5\u8bbe\u7f6e\u4efb\u4f55HTML\u6807\u7b7e<ul> <li>\u4e24\u8005\u7684\u533a\u522b\u5728\u4e8e\u8bfb\u53d6\u5c5e\u6027\u65f6\uff0cinnerText\u4e0d\u8fd4\u56de\u9690\u85cf\u5143\u7d20\u7684\u6587\u672c\uff0c\u800ctextContent\u8fd4\u56de\u6240\u6709\u6587\u672c</li> </ul> </li> </ul> </li> <li>\u4fee\u6539 CSS<ul> <li>DOM\u8282\u70b9\u7684style\u5c5e\u6027\u5bf9\u5e94\u6240\u6709\u7684CSS\uff0c\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u6216\u8bbe\u7f6e\u3002\u56e0\u4e3aCSS\u5141\u8bb8font-size\u8fd9\u6837\u7684\u540d\u79f0\uff0c\u4f46\u5b83\u5e76\u975eJavaScript\u6709\u6548\u7684\u5c5e\u6027\u540d\uff0c\u6240\u4ee5\u9700\u8981\u5728JavaScript\u4e2d\u6539\u5199\u4e3a\u9a7c\u5cf0\u5f0f\u547d\u540dfontSize</li> </ul> </li> </ul> </li> <li>\u63d2\u5165<ul> <li><code>appendChild</code>\uff0c\u628a\u4e00\u4e2a\u8282\u70b9\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9</li> <li>\u6dfb\u52a0\u7684\u8282\u70b9\u53ef\u4ee5\u662f\u539f\u672c DOM \u5c31\u6709\u7684, \u4e5f\u53ef\u4ee5\u662f\u65b0\u5efa\u7684<ul> <li>\u4f8b\u5982, <code>document.createElement('p')</code>, \u5e76\u4fee\u6539 innerText \u7b49\u5c5e\u6027</li> </ul> </li> <li>\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5, \u8fd8\u53ef\u4ee5\u52a8\u6001\u521b\u5efa <code>&lt;style&gt;</code> \u8282\u70b9, \u5c06\u5176\u653e\u5728 head \u8282\u70b9\u53ef\u4ee5\u66f4\u65b0\u9875\u9762\u6837\u5f0f</li> <li>\u60f3\u8981\u63d2\u5165\u5230\u6307\u5b9a\u4f4d\u7f6e, \u53ef\u4ee5\u7528 <code>parentElement.insertBefore(newElement, referenceElement);</code></li> </ul> </li> <li>\u5220\u9664<ul> <li>removeChild \u65b9\u6cd5, \u4f8b\u5982 <code>parent.removeChild(parent.children[0])</code> \u5220\u9664 parnet \u7684\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#get-queryselector","title":"get, querySelector","text":"<pre><code>// 1. \n// \u8fd4\u56deID\u4e3a'test'\u7684\u8282\u70b9\uff1a\nvar test = document.getElementById('test');\n// \u5148\u5b9a\u4f4dID\u4e3a'test-table'\u7684\u8282\u70b9\uff0c\u518d\u8fd4\u56de\u5176\u5185\u90e8\u6240\u6709tr\u8282\u70b9\uff1a\nvar trs = document.getElementById('test-table').getElementsByTagName('tr');\n// \u5148\u5b9a\u4f4dID\u4e3a'test-div'\u7684\u8282\u70b9\uff0c\u518d\u8fd4\u56de\u5176\u5185\u90e8\u6240\u6709class\u5305\u542bred\u7684\u8282\u70b9\uff1a\nvar reds = document.getElementById('test-div').getElementsByClassName('red');\n// \u83b7\u53d6\u8282\u70b9test\u4e0b\u7684\u6240\u6709\u76f4\u5c5e\u5b50\u8282\u70b9:\nvar cs = test.children;\n// \u83b7\u53d6\u8282\u70b9test\u4e0b\u7b2c\u4e00\u4e2a\u3001\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\uff1a\nvar first = test.firstElementChild;\nvar last = test.lastElementChild;\n\n// 2. querySelector\n// \u901a\u8fc7querySelector\u83b7\u53d6ID\u4e3aq1\u7684\u8282\u70b9\uff1a\nvar q1 = document.querySelector('#q1');\n// \u901a\u8fc7querySelectorAll\u83b7\u53d6q1\u8282\u70b9\u5185\u7684\u7b26\u5408\u6761\u4ef6\u7684\u6240\u6709\u8282\u70b9\uff1a\nvar ps = q1.querySelectorAll('div.highlighted &gt; p');\n</code></pre> <pre><code>// see https://www.liaoxuefeng.com/wiki/1022910821149312/1023022310122752\njs = document.querySelector(\"#test-p\");\n// \u9009\u62e9 class \u4e3a c-red c-green \u7684\u5143\u7d20, \u7684\u6240\u6709 p \u5b50\u8282\u70b9\narr = document.querySelectorAll(\"#test-div .c-red.c-green p\");\n// \u9009\u62e9 id \u4e3a test-div \u5143\u7d20\u7684\u6700\u540e\u4e00\u4e2a div \u5b50\u8282\u70b9, \u7684\u6700\u540e\u4e00\u4e2a p \u5b50\u8282\u70b9\nhaskell = document.querySelector(\"#test-div div:last-child p:last-child\");\n</code></pre>"},{"location":"code/JavaScript/js-note/#dom_1","title":"\u66f4\u65b0 DOM","text":"<pre><code>// 1. \u4fee\u6539 innerHTML\n// \u83b7\u53d6&lt;p id=\"p-id\"&gt;...&lt;/p&gt;\nvar p = document.getElementById('p-id');\n// \u8bbe\u7f6e\u6587\u672c\u4e3aabc:\np.innerHTML = 'ABC'; // &lt;p id=\"p-id\"&gt;ABC&lt;/p&gt;\n// \u8bbe\u7f6eHTML:\np.innerHTML = 'ABC &lt;span style=\"color:red\"&gt;RED&lt;/span&gt; XYZ';\n// &lt;p&gt;...&lt;/p&gt;\u7684\u5185\u90e8\u7ed3\u6784\u5df2\u4fee\u6539\n\n// 2. \u4fee\u6539 innerText\n// \u83b7\u53d6&lt;p id=\"p-id\"&gt;...&lt;/p&gt;\nvar p = document.getElementById('p-id');\n// \u8bbe\u7f6e\u6587\u672c:\np.innerText = '&lt;script&gt;alert(\"Hi\")&lt;/script&gt;';\n// HTML\u88ab\u81ea\u52a8\u7f16\u7801\uff0c\u65e0\u6cd5\u8bbe\u7f6e\u4e00\u4e2a&lt;script&gt;\u8282\u70b9:\n// &lt;p id=\"p-id\"&gt;&amp;lt;script&amp;gt;alert(\"Hi\")&amp;lt;/script&amp;gt;&lt;/p&gt;\n\n// CSS\n// \u83b7\u53d6&lt;p id=\"p-id\"&gt;...&lt;/p&gt;\nvar p = document.getElementById('p-id');\n// \u8bbe\u7f6eCSS:\np.style.color = '#ff0000';\np.style.fontSize = '20px';\np.style.paddingTop = '2em';\n</code></pre>"},{"location":"code/JavaScript/js-note/#dom_2","title":"\u63d2\u5165 DOM","text":"<pre><code>// 1. \u8fd9\u91cc\u7684 js \u8282\u70b9\u662f\u539f\u672c DOM \u5c31\u6709\u7684, \u8fd9\u6837\u4f1a\u5c06\u5176\u79fb\u52a8\u5230 list \u8282\u70b9\u4e0b\nvar\n js = document.getElementById('js'),\n list = document.getElementById('list');\nlist.appendChild(js);\n// 2. \u65b0\u5efa\u8282\u70b9\nvar\n list = document.getElementById('list'),\n haskell = document.createElement('p');\nhaskell.id = 'haskell';\nhaskell.innerText = 'Haskell';\nlist.appendChild(haskell);\n</code></pre> <p>\u52a8\u6001\u521b\u5efa\u4e00\u4e2a\u8282\u70b9\u7136\u540e\u6dfb\u52a0\u5230DOM\u6811\u4e2d\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5f88\u591a\u529f\u80fd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u52a8\u6001\u521b\u5efa\u4e86\u4e00\u4e2a<code>&lt;style&gt;</code>\u8282\u70b9\uff0c\u7136\u540e\u628a\u5b83\u6dfb\u52a0\u5230<code>&lt;head&gt;</code>\u8282\u70b9\u7684\u672b\u5c3e\uff0c\u8fd9\u6837\u5c31\u52a8\u6001\u5730\u7ed9\u6587\u6863\u6dfb\u52a0\u4e86\u65b0\u7684CSS\u5b9a\u4e49</p> <pre><code>var d = document.createElement('style');\nd.setAttribute('type', 'text/css');\nd.innerHTML = 'p { color: red }';\ndocument.getElementsByTagName('head')[0].appendChild(d);\n</code></pre>"},{"location":"code/JavaScript/js-note/#dom_3","title":"\u5220\u9664 DOM","text":"<pre><code>// \u62ff\u5230\u5f85\u5220\u9664\u8282\u70b9:\nvar self = document.getElementById('to-be-removed');\n// \u62ff\u5230\u7236\u8282\u70b9:\nvar parent = self.parentElement;\n// \u5220\u9664:\nvar removed = parent.removeChild(self);\nremoved === self; // true\n</code></pre>"},{"location":"code/JavaScript/js-note/#_40","title":"\u64cd\u4f5c\u8868\u5355","text":"<ul> <li>TODO:, see here</li> <li>\u5148\u53bb\u770b\u770b HTML</li> </ul> <p>HTML\u8868\u5355\u7684\u8f93\u5165\u63a7\u4ef6\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li>\u6587\u672c\u6846\uff0c\u5bf9\u5e94\u7684<code>&lt;input type=\"text\"&gt;</code>\uff0c\u7528\u4e8e\u8f93\u5165\u6587\u672c\uff1b</li> <li>\u53e3\u4ee4\u6846\uff0c\u5bf9\u5e94\u7684<code>&lt;input type=\"password\"&gt;</code>\uff0c\u7528\u4e8e\u8f93\u5165\u53e3\u4ee4\uff1b</li> <li>\u5355\u9009\u6846\uff0c\u5bf9\u5e94\u7684<code>&lt;input type=\"radio\"&gt;</code>\uff0c\u7528\u4e8e\u9009\u62e9\u4e00\u9879\uff1b</li> <li>\u590d\u9009\u6846\uff0c\u5bf9\u5e94\u7684<code>&lt;input type=\"checkbox\"&gt;</code>\uff0c\u7528\u4e8e\u9009\u62e9\u591a\u9879\uff1b</li> <li>\u4e0b\u62c9\u6846\uff0c\u5bf9\u5e94\u7684<code>&lt;select&gt;</code>\uff0c\u7528\u4e8e\u9009\u62e9\u4e00\u9879\uff1b</li> <li>\u9690\u85cf\u6587\u672c\uff0c\u5bf9\u5e94\u7684<code>&lt;input type=\"hidden\"&gt;</code>\uff0c\u7528\u6237\u4e0d\u53ef\u89c1\uff0c\u4f46\u8868\u5355\u63d0\u4ea4\u65f6\u4f1a\u628a\u9690\u85cf\u6587\u672c\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</li> </ul>"},{"location":"code/JavaScript/js-note/#_41","title":"\u64cd\u4f5c\u6587\u4ef6","text":"<ul> <li>\u5728HTML\u8868\u5355\u4e2d\uff0c\u53ef\u4ee5\u4e0a\u4f20\u6587\u4ef6\u7684\u552f\u4e00\u63a7\u4ef6\u5c31\u662f<code>&lt;input type=\"file\"&gt;</code><ul> <li>\u5f53\u4e00\u4e2a\u8868\u5355\u5305\u542b<code>&lt;input type=\"file\"&gt;</code>\u65f6\uff0c\u8868\u5355\u7684<code>enctype</code>\u5fc5\u987b\u6307\u5b9a\u4e3a<code>multipart/form-data</code>\uff0c<code>method</code>\u5fc5\u987b\u6307\u5b9a\u4e3a<code>post</code>\uff0c\u6d4f\u89c8\u5668\u624d\u80fd\u6b63\u786e\u7f16\u7801\u5e76\u4ee5<code>multipart/form-data</code>\u683c\u5f0f\u53d1\u9001\u8868\u5355\u7684\u6570\u636e</li> </ul> </li> <li>File API<ul> <li>HTML5\u7684File API\u63d0\u4f9b\u4e86<code>File</code>\u548c<code>FileReader</code>\u4e24\u4e2a\u4e3b\u8981\u5bf9\u8c61\uff0c\u53ef\u4ee5\u83b7\u5f97\u6587\u4ef6\u4fe1\u606f\u5e76\u8bfb\u53d6\u6587\u4ef6</li> </ul> </li> </ul> <pre><code>var\n fileInput = document.getElementById('test-image-file'),\n info = document.getElementById('test-file-info'),\n preview = document.getElementById('test-image-preview');\n// \u76d1\u542cchange\u4e8b\u4ef6:\nfileInput.addEventListener('change', function () {\n // \u6e05\u9664\u80cc\u666f\u56fe\u7247:\n preview.style.backgroundImage = '';\n // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u9009\u62e9:\n if (!fileInput.value) {\n  info.innerHTML = '\u6ca1\u6709\u9009\u62e9\u6587\u4ef6';\n  return;\n }\n // \u83b7\u53d6File\u5f15\u7528:\n var file = fileInput.files[0];\n // \u83b7\u53d6File\u4fe1\u606f:\n info.innerHTML = '\u6587\u4ef6: ' + file.name + '&lt;br&gt;' +\n      '\u5927\u5c0f: ' + file.size + '&lt;br&gt;' +\n      '\u4fee\u6539: ' + file.lastModified;\n if (file.type !== 'image/jpeg' &amp;&amp; file.type !== 'image/png' &amp;&amp; file.type !== 'image/gif') {\n  alert('\u4e0d\u662f\u6709\u6548\u7684\u56fe\u7247\u6587\u4ef6!');\n  return;\n }\n // \u8bfb\u53d6\u6587\u4ef6:\n var reader = new FileReader();\n reader.onload = function(e) {\n  var\n   data = e.target.result; // 'data:image/jpeg;base64,/9j/4AAQSk...(base64\u7f16\u7801)...'            \n  preview.style.backgroundImage = 'url(' + data + ')';\n };\n // \u4ee5DataURL\u7684\u5f62\u5f0f\u8bfb\u53d6\u6587\u4ef6:\n reader.readAsDataURL(file);\n});\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u6f14\u793a\u4e86\u5982\u4f55\u901a\u8fc7HTML5\u7684File API\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u3002\u4ee5DataURL\u7684\u5f62\u5f0f\u8bfb\u53d6\u5230\u7684\u6587\u4ef6\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7c7b\u4f3c\u4e8e<code>data:image/jpeg;base64,/9j/4AAQSk...(base64\u7f16\u7801)...</code>\uff0c\u5e38\u7528\u4e8e\u8bbe\u7f6e\u56fe\u50cf\u3002\u5982\u679c\u9700\u8981\u670d\u52a1\u5668\u7aef\u5904\u7406\uff0c\u628a\u5b57\u7b26\u4e32<code>base64,</code>\u540e\u9762\u7684\u5b57\u7b26\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u5e76\u7528Base64\u89e3\u7801\u5c31\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u6587\u4ef6\u7684\u4e8c\u8fdb\u5236\u5185\u5bb9\u3002</p>"},{"location":"code/JavaScript/js-note/#ajax","title":"AJAX","text":"<p>here</p> <ul> <li>AJAX\u4e0d\u662fJavaScript\u7684\u89c4\u8303\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u54e5\u4eec\u201c\u53d1\u660e\u201d\u7684\u7f29\u5199\uff1aAsynchronous JavaScript and XML\uff0c\u610f\u601d\u5c31\u662f\u7528JavaScript\u6267\u884c\u5f02\u6b65\u7f51\u7edc\u8bf7\u6c42\u3002<ul> <li>\u5982\u679c\u4ed4\u7ec6\u89c2\u5bdf\u4e00\u4e2aForm\u7684\u63d0\u4ea4\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\uff0c\u4e00\u65e6\u7528\u6237\u70b9\u51fb\u201cSubmit\u201d\u6309\u94ae\uff0c\u8868\u5355\u5f00\u59cb\u63d0\u4ea4\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u5237\u65b0\u9875\u9762\uff0c\u7136\u540e\u5728\u65b0\u9875\u9762\u91cc\u544a\u8bc9\u4f60\u64cd\u4f5c\u662f\u6210\u529f\u4e86\u8fd8\u662f\u5931\u8d25\u4e86\u3002\u5982\u679c\u4e0d\u5e78\u7531\u4e8e\u7f51\u7edc\u592a\u6162\u6216\u8005\u5176\u4ed6\u539f\u56e0\uff0c\u5c31\u4f1a\u5f97\u5230\u4e00\u4e2a404\u9875\u9762\u3002</li> <li>\u8fd9\u5c31\u662fWeb\u7684\u8fd0\u4f5c\u539f\u7406\uff1a\u4e00\u6b21HTTP\u8bf7\u6c42\u5bf9\u5e94\u4e00\u4e2a\u9875\u9762\u3002</li> <li>\u5982\u679c\u8981\u8ba9\u7528\u6237\u7559\u5728\u5f53\u524d\u9875\u9762\u4e2d\uff0c\u540c\u65f6\u53d1\u51fa\u65b0\u7684HTTP\u8bf7\u6c42\uff0c\u5c31\u5fc5\u987b\u7528JavaScript\u53d1\u9001\u8fd9\u4e2a\u65b0\u8bf7\u6c42\uff0c\u63a5\u6536\u5230\u6570\u636e\u540e\uff0c\u518d\u7528JavaScript\u66f4\u65b0\u9875\u9762\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u7528\u6237\u5c31\u611f\u89c9\u81ea\u5df1\u4ecd\u7136\u505c\u7559\u5728\u5f53\u524d\u9875\u9762\uff0c\u4f46\u662f\u6570\u636e\u5374\u53ef\u4ee5\u4e0d\u65ad\u5730\u66f4\u65b0\u3002</li> <li>\u7528JavaScript\u5199\u4e00\u4e2a\u5b8c\u6574\u7684AJAX\u4ee3\u7801\u5e76\u4e0d\u590d\u6742\uff0c\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff1aAJAX\u8bf7\u6c42\u662f\u5f02\u6b65\u6267\u884c\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8981\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u83b7\u5f97\u54cd\u5e94\u3002</li> </ul> </li> <li>\u5728\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e0a\u5199AJAX\u4e3b\u8981\u4f9d\u9760 <code>XMLHttpRequest</code> \u5bf9\u8c61<ul> <li>\u65b0\u5efa <code>XMLHttpRequest()</code> \u5bf9\u8c61</li> <li>\u5f53\u521b\u5efa\u4e86<code>XMLHttpRequest</code>\u5bf9\u8c61\u540e\uff0c\u8981\u5148\u8bbe\u7f6e<code>onreadystatechange</code>\u7684\u56de\u8c03\u51fd\u6570\u3002\u5728\u56de\u8c03\u51fd\u6570\u4e2d\uff0c\u901a\u5e38\u6211\u4eec\u53ea\u9700\u901a\u8fc7<code>readyState === 4</code>\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u5b8c\u6210\uff0c\u5982\u679c\u5df2\u5b8c\u6210\uff0c\u518d\u6839\u636e<code>status === 200</code>\u5224\u65ad\u662f\u5426\u662f\u4e00\u4e2a\u6210\u529f\u7684\u54cd\u5e94\u3002</li> <li><code>XMLHttpRequest</code>\u5bf9\u8c61\u7684<code>open()</code>\u65b9\u6cd5\u67093\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u6307\u5b9a\u662f<code>GET</code>\u8fd8\u662f<code>POST</code>\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9aURL\u5730\u5740\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u6307\u5b9a\u662f\u5426\u4f7f\u7528\u5f02\u6b65\uff0c\u9ed8\u8ba4\u662f<code>true</code>\uff0c\u6240\u4ee5\u4e0d\u7528\u5199\u3002<ul> <li>\u6ce8\u610f\uff0c\u5343\u4e07\u4e0d\u8981\u628a\u7b2c\u4e09\u4e2a\u53c2\u6570\u6307\u5b9a\u4e3a<code>false</code>\uff0c\u5426\u5219\u6d4f\u89c8\u5668\u5c06\u505c\u6b62\u54cd\u5e94\uff0c\u76f4\u5230AJAX\u8bf7\u6c42\u5b8c\u6210\u3002\u5982\u679c\u8fd9\u4e2a\u8bf7\u6c42\u8017\u65f610\u79d2\uff0c\u90a3\u4e4810\u79d2\u5185\u4f60\u4f1a\u53d1\u73b0\u6d4f\u89c8\u5668\u5904\u4e8e\u201c\u5047\u6b7b\u201d\u72b6\u6001\u3002</li> </ul> </li> <li>\u540e\u8c03\u7528<code>send()</code>\u65b9\u6cd5\u624d\u771f\u6b63\u53d1\u9001\u8bf7\u6c42\u3002<code>GET</code>\u8bf7\u6c42\u4e0d\u9700\u8981\u53c2\u6570\uff0c<code>POST</code>\u8bf7\u6c42\u9700\u8981\u628abody\u90e8\u5206\u4ee5\u5b57\u7b26\u4e32\u6216\u8005<code>FormData</code>\u5bf9\u8c61\u4f20\u8fdb\u53bb\u3002</li> </ul> </li> <li>\u5b89\u5168\u9650\u5236<ul> <li>\u6d4f\u89c8\u5668\u7684\u540c\u6e90\u7b56\u7565: \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cJavaScript\u5728\u53d1\u9001AJAX\u8bf7\u6c42\u65f6\uff0cURL\u7684\u57df\u540d\u5fc5\u987b\u548c\u5f53\u524d\u9875\u9762\u5b8c\u5168\u4e00\u81f4\u3002(\u57df\u540d\u3001\u534f\u8bae\u3001\u7aef\u53e3\u53f7)</li> <li>\u7528 JavaScript \u8bf7\u6c42\u5916\u57df URL \u7684\u65b9\u6cd5<ul> <li>\u901a\u8fc7Flash\u63d2\u4ef6\u53d1\u9001HTTP\u8bf7\u6c42, \u5f03\u4e4b</li> <li>\u901a\u8fc7\u5728\u540c\u6e90\u57df\u540d\u4e0b\u67b6\u8bbe\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\u6765\u8f6c\u53d1, \u4e5f\u5373 js \u5c06\u8bf7\u6c42\u53d1\u9001\u5230 <code>'/proxy?url=http://www.sina.com.cn'</code> \u7531\u670d\u52a1\u5668\u4ee3\u7406</li> <li>\u79f0\u4e3a <code>JSONP</code>\uff0c\u5b83\u6709\u4e2a\u9650\u5236\uff0c\u53ea\u80fd\u7528GET\u8bf7\u6c42\uff0c\u5e76\u4e14\u8981\u6c42\u8fd4\u56deJavaScript. \u5229\u7528\u4e86\u6d4f\u89c8\u5668\u5141\u8bb8\u8de8\u57df\u5f15\u7528JavaScript\u8d44\u6e90, \u5728 head \u4e2d\u6dfb\u52a0\u4e00\u4e2a script \u8282\u70b9, \u7136\u540e\u4e8b\u5148\u8981\u5728 HTML \u4e2d\u9884\u7559\u597d\u4f4d\u7f6e, \u4ee5\u53ca\u5199\u597d\u56de\u8c03\u51fd\u6570.<ul> <li>\u53c2\u89c1 \u8bf4\u8bf4JSON\u548cJSONP\uff0c\u4e5f\u8bb8\u4f60\u4f1a\u8c41\u7136\u5f00\u6717\uff0c\u542bjQuery\u7528\u4f8b</li> </ul> </li> </ul> </li> </ul> </li> <li>CORS<ul> <li>CORS\u5168\u79f0 <code>Cross-Origin Resource Sharing</code> \uff0c\u662fHTML5\u89c4\u8303\u5b9a\u4e49\u7684\u5982\u4f55\u8de8\u57df\u8bbf\u95ee\u8d44\u6e90\u3002</li> <li>Origin\u8868\u793a\u672c\u57df\uff0c\u4e5f\u5c31\u662f\u6d4f\u89c8\u5668\u5f53\u524d\u9875\u9762\u7684\u57df\u3002\u5f53JavaScript\u5411\u5916\u57df\uff08\u5982sina.com\uff09\u53d1\u8d77\u8bf7\u6c42\u540e\uff0c\u6d4f\u89c8\u5668\u6536\u5230\u54cd\u5e94\u540e\uff0c\u9996\u5148\u68c0\u67e5 <code>Access-Control-Allow-Origin</code> \u662f\u5426\u5305\u542b\u672c\u57df\uff0c\u5982\u679c\u662f\uff0c\u5219\u6b64\u6b21\u8de8\u57df\u8bf7\u6c42\u6210\u529f\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u8bf7\u6c42\u5931\u8d25\uff0cJavaScript\u5c06\u65e0\u6cd5\u83b7\u53d6\u5230\u54cd\u5e94\u7684\u4efb\u4f55\u6570\u636e\u3002</li> <li>\u5047\u8bbe\u672c\u57df\u662f<code>my.com</code>\uff0c\u5916\u57df\u662f<code>sina.com</code>\uff0c\u53ea\u8981\u54cd\u5e94\u5934<code>Access-Control-Allow-Origin</code>\u4e3a<code>http://my.com</code>\uff0c\u6216\u8005\u662f<code>*</code>\uff0c\u672c\u6b21\u8bf7\u6c42\u5c31\u53ef\u4ee5\u6210\u529f\u3002</li> <li>\u53ef\u89c1\uff0c\u8de8\u57df\u80fd\u5426\u6210\u529f\uff0c\u53d6\u51b3\u4e8e\u5bf9\u65b9\u670d\u52a1\u5668\u662f\u5426\u613f\u610f\u7ed9\u4f60\u8bbe\u7f6e\u4e00\u4e2a\u6b63\u786e\u7684<code>Access-Control-Allow-Origin</code>\uff0c\u51b3\u5b9a\u6743\u59cb\u7ec8\u5728\u5bf9\u65b9\u624b\u4e2d\u3002</li> <li>\u4e0a\u9762\u8fd9\u79cd\u8de8\u57df\u8bf7\u6c42\uff0c\u79f0\u4e4b\u4e3a\u201c\u7b80\u5355\u8bf7\u6c42\u201d\u3002\u7b80\u5355\u8bf7\u6c42\u5305\u62ecGET\u3001HEAD\u548cPOST\uff08POST\u7684Content-Type\u7c7b\u578b \u4ec5\u9650<code>application/x-www-form-urlencoded</code>\u3001<code>multipart/form-data</code>\u548c<code>text/plain</code>\uff09\uff0c\u5e76\u4e14\u4e0d\u80fd\u51fa\u73b0\u4efb\u4f55\u81ea\u5b9a\u4e49\u5934\uff08\u4f8b\u5982\uff0c<code>X-Custom: 12345</code>\uff09\uff0c\u901a\u5e38\u80fd\u6ee1\u8db390%\u7684\u9700\u6c42\u3002</li> <li>\u5bf9\u4e8ePUT\u3001DELETE\u4ee5\u53ca\u5176\u4ed6\u7c7b\u578b\u5982<code>application/json</code>\u7684POST\u8bf7\u6c42\uff0c\u5728\u53d1\u9001AJAX\u8bf7\u6c42\u4e4b\u524d\uff0c\u6d4f\u89c8\u5668\u4f1a\u5148\u53d1\u9001\u4e00\u4e2a<code>OPTIONS</code>\u8bf7\u6c42\uff08\u79f0\u4e3apreflighted\u8bf7\u6c42\uff09\u5230\u8fd9\u4e2aURL\u4e0a\uff0c\u8be2\u95ee\u76ee\u6807\u670d\u52a1\u5668\u662f\u5426\u63a5\u53d7</li> </ul> </li> </ul> <pre><code>function success(text) {\n var textarea = document.getElementById('test-response-text');\n textarea.value = text;\n}\n\nfunction fail(code) {\n var textarea = document.getElementById('test-response-text');\n textarea.value = 'Error code: ' + code;\n}\n\nvar request = new XMLHttpRequest(); // \u65b0\u5efaXMLHttpRequest\u5bf9\u8c61\n\nrequest.onreadystatechange = function () { // \u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u51fd\u6570\u88ab\u56de\u8c03\n if (request.readyState === 4) { // \u6210\u529f\u5b8c\u6210\n  // \u5224\u65ad\u54cd\u5e94\u7ed3\u679c:\n  if (request.status === 200) {\n   // \u6210\u529f\uff0c\u901a\u8fc7responseText\u62ff\u5230\u54cd\u5e94\u7684\u6587\u672c:\n   return success(request.responseText);\n  } else {\n   // \u5931\u8d25\uff0c\u6839\u636e\u54cd\u5e94\u7801\u5224\u65ad\u5931\u8d25\u539f\u56e0:\n   return fail(request.status);\n  }\n } else {\n  // HTTP\u8bf7\u6c42\u8fd8\u5728\u7ee7\u7eed...\n }\n}\n\n// \u53d1\u9001\u8bf7\u6c42:\nrequest.open('GET', '/api/categories');\nrequest.send();\n\nalert('\u8bf7\u6c42\u5df2\u53d1\u9001\uff0c\u8bf7\u7b49\u5f85\u54cd\u5e94...');\n</code></pre>"},{"location":"code/JavaScript/js-note/#cors","title":"CORS","text":"<p>\u5bf9\u4e8ePUT\u3001DELETE\u4ee5\u53ca\u5176\u4ed6\u7c7b\u578b\u5982<code>application/json</code>\u7684POST\u8bf7\u6c42\uff0c\u5728\u53d1\u9001AJAX\u8bf7\u6c42\u4e4b\u524d\uff0c\u6d4f\u89c8\u5668\u4f1a\u5148\u53d1\u9001\u4e00\u4e2a<code>OPTIONS</code>\u8bf7\u6c42\uff08\u79f0\u4e3apreflighted\u8bf7\u6c42\uff09\u5230\u8fd9\u4e2aURL\u4e0a\uff0c\u8be2\u95ee\u76ee\u6807\u670d\u52a1\u5668\u662f\u5426\u63a5\u53d7\uff1a</p> <pre><code>OPTIONS /path/to/resource HTTP/1.1\nHost: bar.com\nOrigin: http://my.com\nAccess-Control-Request-Method: POST\n</code></pre> <p>\u670d\u52a1\u5668\u5fc5\u987b\u54cd\u5e94\u5e76\u660e\u786e\u6307\u51fa\u5141\u8bb8\u7684Method\uff1a</p> <pre><code>HTTP/1.1 200 OK\nAccess-Control-Allow-Origin: http://my.com\nAccess-Control-Allow-Methods: POST, GET, PUT, OPTIONS\nAccess-Control-Max-Age: 86400\n</code></pre> <p>\u6d4f\u89c8\u5668\u786e\u8ba4\u670d\u52a1\u5668\u54cd\u5e94\u7684<code>Access-Control-Allow-Methods</code>\u5934\u786e\u5b9e\u5305\u542b\u5c06\u8981\u53d1\u9001\u7684AJAX\u8bf7\u6c42\u7684Method\uff0c\u624d\u4f1a\u7ee7\u7eed\u53d1\u9001AJAX\uff0c\u5426\u5219\uff0c\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\u7531\u4e8e\u4ee5<code>POST</code>\u3001<code>PUT</code>\u65b9\u5f0f\u4f20\u9001JSON\u683c\u5f0f\u7684\u6570\u636e\u5728REST\u4e2d\u5f88\u5e38\u89c1\uff0c\u6240\u4ee5\u8981\u8de8\u57df\u6b63\u786e\u5904\u7406<code>POST</code>\u548c<code>PUT</code>\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u7aef\u5fc5\u987b\u6b63\u786e\u54cd\u5e94<code>OPTIONS</code>\u8bf7\u6c42\u3002</p> <p>\u9700\u8981\u6df1\u5165\u4e86\u89e3CORS\u7684\u7ae5\u978b\u8bf7\u79fb\u6b65W3C\u6587\u6863\u3002</p>"},{"location":"code/JavaScript/js-note/#promise","title":"Promise","text":"<ul> <li>\u5728JavaScript\u7684\u4e16\u754c\u4e2d\uff0c\u6240\u6709\u4ee3\u7801\u90fd\u662f\u5355\u7ebf\u7a0b\u6267\u884c\u7684<ul> <li>\u56e0\u6b64JavaScript\u7684\u6240\u6709\u7f51\u7edc\u64cd\u4f5c\uff0c\u6d4f\u89c8\u5668\u4e8b\u4ef6\uff0c\u90fd\u5fc5\u987b\u662f\u5f02\u6b65\u6267\u884c</li> <li>\u5f02\u6b65\u64cd\u4f5c\u4f1a\u5728\u5c06\u6765\u7684\u67d0\u4e2a\u65f6\u95f4\u70b9\u89e6\u53d1\u4e00\u4e2a\u51fd\u6570\u8c03\u7528<ul> <li><code>setTimeout(callback, 1000);</code></li> </ul> </li> </ul> </li> <li>Promise<ul> <li>\u8bed\u6cd5:<ul> <li><code>var p1 = new Promise(test);</code> \u65b0\u5efa Promise \u5bf9\u8c61, \u5176\u4e2d\u56de\u8c03\u51fd\u6570 <code>function test(resolve, reject) {}</code> \u662f\u6211\u4eec\u4e3b\u8981\u5173\u5fc3\u7684\u51fd\u6570\u903b\u8f91,<ul> <li>\u5176\u4e2d resolve, reject \u5206\u522b\u662f\u6267\u884c\u6210\u529f\u6216\u5931\u8d25\u4e4b\u540e\u7684\u64cd\u4f5c, \u4e0d\u5173\u5fc3</li> </ul> </li> <li><code>var p2 = p1.then(function (result) {})</code>. \u8fd9\u91cc <code>then</code> \u4e2d\u4f20\u5165\u7684\u5c31\u662f\u4e0a\u9762\u7684 resolve</li> <li><code>var p3 = p2.catch(function (reason) {})</code>. \u5176\u4e2d <code>catch</code> \u4f20\u5165\u7684\u662f reject</li> <li>\u53ef\u4ee5\u4e32\u8054\u5199\u6210 <code>new Promise(test).then(resolve).catch(reject)</code> \u7684\u5f62\u5f0f</li> </ul> </li> <li>\u4f5c\u7528: Promise\u6700\u5927\u7684\u597d\u5904\u662f\u5728\u5f02\u6b65\u6267\u884c\u7684\u6d41\u7a0b\u4e2d\uff0c\u628a\u6267\u884c\u4ee3\u7801\u548c\u5904\u7406\u7ed3\u679c\u7684\u4ee3\u7801\u6e05\u6670\u5730\u5206\u79bb\u4e86</li> </ul> </li> <li>\u4f8b\u5b50: \u5c06\u4e0a\u4e00\u8282 AJAX \u5f02\u6b65\u6267\u884c\u51fd\u6570\u8f6c\u6362\u4e3a Promise \u5bf9\u8c61, \u4ece\u800c\u7b80\u5316\u4ee3\u7801\u903b\u8f91</li> <li>\u4e32\u884c<ul> <li><code>job1.then(job2).then(job3).catch(handleError);</code></li> <li>\u5176\u4e2d\uff0c<code>job1</code>\u3001<code>job2</code>\u548c<code>job3</code>\u90fd\u662fPromise\u5bf9\u8c61\u3002</li> <li>job2 \u7684\u8f93\u5165\u662f job1 \u7684\u8f93\u51fa</li> </ul> </li> <li>\u5e76\u884c\u6267\u884c<ul> <li><code>Promise.all([p1, p2])</code> \u5168\u90e8\u6267\u884c, \u8f93\u51fa(then \u7684\u8f93\u5165) \u4e5f\u662f\u4e00\u4e2a Array</li> <li><code>Promise.race([p1, p2])</code> \u54ea\u4e2a\u5148\u8fd4\u56de\u5c31\u6267\u884c\u54ea\u4e2a</li> </ul> </li> </ul> <pre><code>// \u56de\u8c03\u51fd\u6570\nfunction callback() {\n console.log('Done');\n}\nconsole.log('before setTimeout()');\nsetTimeout(callback, 1000); // 1\u79d2\u949f\u540e\u8c03\u7528callback\u51fd\u6570\nconsole.log('after setTimeout()');\n</code></pre> <pre><code>/* \u6211\u4eec\u628a\u4e0a\u4e00\u8282\u7684AJAX\u5f02\u6b65\u6267\u884c\u51fd\u6570\u8f6c\u6362\u4e3aPromise\u5bf9\u8c61\uff0c\u770b\u770b\u7528Promise\u5982\u4f55\u7b80\u5316\u5f02\u6b65\u5904\u7406 */\n// ajax\u51fd\u6570\u5c06\u8fd4\u56dePromise\u5bf9\u8c61:\nfunction ajax(method, url, data) {\n var request = new XMLHttpRequest();\n return new Promise(function (resolve, reject) {\n  request.onreadystatechange = function () {\n   if (request.readyState === 4) {\n    if (request.status === 200) {\n     resolve(request.responseText);\n    } else {\n     reject(request.status);\n    }\n   }\n  };\n  request.open(method, url);\n  request.send(data);\n });\n}\nfunction testAJAX() {\n var log = document.getElementById(\"test-promise-ajax-result\");\n var p;\n // p = ajax(\"GET\", \"http://www.baidu.com\");\n p = ajax(\"GET\", \"/test.json\");\n\n p.then(function (text) {\n  log.innerText = text;\n }).catch(function (status) {\n  log.innerText = `Error: ${status}`;\n });\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#all-race","title":"all, race","text":"<ul> <li>\u5e76\u884c\u6267\u884c<ul> <li>\u8bd5\u60f3\u4e00\u4e2a\u9875\u9762\u804a\u5929\u7cfb\u7edf\uff0c\u6211\u4eec\u9700\u8981\u4ece\u4e24\u4e2a\u4e0d\u540c\u7684URL\u5206\u522b\u83b7\u5f97\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f\u548c\u597d\u53cb\u5217\u8868\uff0c\u8fd9\u4e24\u4e2a\u4efb\u52a1\u662f\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u7684\uff0c\u7528<code>Promise.all()</code>\u5b9e\u73b0</li> <li>\u6709\u4e9b\u65f6\u5019\uff0c\u591a\u4e2a\u5f02\u6b65\u4efb\u52a1\u662f\u4e3a\u4e86\u5bb9\u9519\u3002\u6bd4\u5982\uff0c\u540c\u65f6\u5411\u4e24\u4e2aURL\u8bfb\u53d6\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u53ea\u9700\u8981\u83b7\u5f97\u5148\u8fd4\u56de\u7684\u7ed3\u679c\u5373\u53ef\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7528<code>Promise.race()</code>\u5b9e\u73b0</li> </ul> </li> </ul> <pre><code>/* Promise.all */\nvar p1 = new Promise(function (resolve, reject) {\n setTimeout(resolve, 500, 'P1');\n});\nvar p2 = new Promise(function (resolve, reject) {\n setTimeout(resolve, 600, 'P2');\n});\n// \u540c\u65f6\u6267\u884cp1\u548cp2\uff0c\u5e76\u5728\u5b83\u4eec\u90fd\u5b8c\u6210\u540e\u6267\u884cthen:\nPromise.all([p1, p2]).then(function (results) {\n console.log(results); // \u83b7\u5f97\u4e00\u4e2aArray: ['P1', 'P2']\n});\n\n/* Promise.race */\nvar p1 = new Promise(function (resolve, reject) {\n setTimeout(resolve, 500, 'P1');\n});\nvar p2 = new Promise(function (resolve, reject) {\n setTimeout(resolve, 600, 'P2');\n});\nPromise.race([p1, p2]).then(function (result) {\n console.log(result); // 'P1'\n});\n</code></pre>"},{"location":"code/JavaScript/js-note/#canvas","title":"Canvas","text":"<ul> <li>Canvas<ul> <li>Canvas\u662fHTML5\u65b0\u589e\u7684\u7ec4\u4ef6\uff0c\u5b83\u5c31\u50cf\u4e00\u5757\u5e55\u5e03\uff0c\u53ef\u4ee5\u7528JavaScript\u5728\u4e0a\u9762\u7ed8\u5236\u5404\u79cd\u56fe\u8868\u3001\u52a8\u753b\u7b49\u3002</li> <li>\u6ca1\u6709 Canvas \u4e4b\u524d, \u8981\u7528 Flash</li> <li><code>&lt;canvas id=\"test-canvas\" width=\"300\" height=\"200\"&gt;&lt;/canvas&gt;</code></li> </ul> </li> <li><code>getContext('2d')</code>\u65b9\u6cd5\u8ba9\u6211\u4eec\u62ff\u5230\u4e00\u4e2a <code>CanvasRenderingContext2D</code> \u5bf9\u8c61\uff0c\u6240\u6709\u7684\u7ed8\u56fe\u64cd\u4f5c\u90fd\u9700\u8981\u901a\u8fc7\u8fd9\u4e2a\u5bf9\u8c61\u5b8c\u6210\u3002<ul> <li>3D \u7528 <code>\"webgl\"</code></li> </ul> </li> <li>\u5750\u6807<ul> <li>Canvas\u7684\u5750\u6807\u4ee5\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9\uff0c\u6c34\u5e73\u5411\u53f3\u4e3aX\u8f74\uff0c\u5782\u76f4\u5411\u4e0b\u4e3aY\u8f74\uff0c\u4ee5\u50cf\u7d20\u4e3a\u5355\u4f4d\uff0c\u6240\u4ee5\u6bcf\u4e2a\u70b9\u90fd\u662f\u975e\u8d1f\u6574\u6570\u3002</li> </ul> </li> <li>\u7ed8\u5236\u5f62\u72b6</li> <li>\u7ed8\u5236\u6587\u5b57</li> </ul>"},{"location":"code/JavaScript/js-note/#_42","title":"\u9519\u8bef\u5904\u7406","text":"<ul> <li><code>try ... catch(e) ... finally</code></li> <li>JavaScript\u6709\u4e00\u4e2a\u6807\u51c6\u7684<code>Error</code>\u5bf9\u8c61\u8868\u793a\u9519\u8bef\uff0c\u8fd8\u6709\u4ece<code>Error</code>\u6d3e\u751f\u7684<code>TypeError</code>\u3001<code>ReferenceError</code>\u7b49\u9519\u8bef\u5bf9\u8c61\u3002\u6211\u4eec\u5728\u5904\u7406\u9519\u8bef\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7<code>catch(e)</code>\u6355\u83b7\u7684\u53d8\u91cf<code>e</code>\u8bbf\u95ee\u9519\u8bef\u5bf9\u8c61<ul> <li><code>e instanceof TypeError</code> \u5224\u65ad\u9519\u8bef\u7c7b\u578b</li> <li><code>e.message</code></li> </ul> </li> <li>\u629b\u51fa\u9519\u8bef\u4f7f\u7528<code>throw</code>\u8bed\u53e5<ul> <li><code>throw new Error('\u8f93\u5165\u9519\u8bef');</code></li> </ul> </li> <li>\u9519\u8bef\u4f20\u64ad<ul> <li>\u5982\u679c\u5728\u4e00\u4e2a\u51fd\u6570\u5185\u90e8\u53d1\u751f\u4e86\u9519\u8bef\uff0c\u5b83\u81ea\u8eab\u6ca1\u6709\u6355\u83b7\uff0c\u9519\u8bef\u5c31\u4f1a\u88ab\u629b\u5230\u5916\u5c42\u8c03\u7528\u51fd\u6570\uff0c\u5982\u679c\u5916\u5c42\u51fd\u6570\u4e5f\u6ca1\u6709\u6355\u83b7\uff0c\u8be5\u9519\u8bef\u4f1a\u4e00\u76f4\u6cbf\u7740\u51fd\u6570\u8c03\u7528\u94fe\u5411\u4e0a\u629b\u51fa\uff0c\u76f4\u5230\u88abJavaScript\u5f15\u64ce\u6355\u83b7\uff0c\u4ee3\u7801\u7ec8\u6b62\u6267\u884c\u3002</li> </ul> </li> <li>\u5f02\u6b65\u9519\u8bef\u5904\u7406<ul> <li>\u7f16\u5199JavaScript\u4ee3\u7801\u65f6\uff0c\u6211\u4eec\u8981\u65f6\u523b\u7262\u8bb0\uff0cJavaScript\u5f15\u64ce\u662f\u4e00\u4e2a\u4e8b\u4ef6\u9a71\u52a8\u7684\u6267\u884c\u5f15\u64ce\uff0c\u4ee3\u7801\u603b\u662f\u4ee5\u5355\u7ebf\u7a0b\u6267\u884c\uff0c\u800c\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u9700\u8981\u7b49\u5230\u4e0b\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u4e8b\u4ef6\u51fa\u73b0\u540e\uff0c\u624d\u4f1a\u88ab\u6267\u884c\u3002</li> <li>\u56e0\u6b64, \u5bf9\u4e8e\u5f02\u6b65\u4ee3\u7801, \u5bf9\u4e8e\u5176\u7684\u9519\u8bef\u7684\u5904\u7406\u5e94\u8be5\u5728\u56de\u8c03\u51fd\u6570\u5185\u90e8\u5b9e\u73b0!</li> </ul> </li> </ul> <pre><code>var r1, r2, s = null;\ntry {\n r2 = 1\n r1 = s.length; // \u6b64\u5904\u5e94\u4ea7\u751f\u9519\u8bef\n r2 = 100; // \u8be5\u8bed\u53e5\u4e0d\u4f1a\u6267\u884c\n} catch (e) {\n console.log('\u51fa\u9519\u4e86\uff1a' + e);\n} finally {\n console.log('finally');\n}\nconsole.log('r1 = ' + r1); // r1\u5e94\u4e3aundefined\nconsole.log('r2 = ' + r2); // r2\u5e94\u4e3aundefined\n</code></pre> <pre><code>// \u8bbf\u95ee Error\u5bf9\u8c61\ntry {\n ...\n} catch (e) {\n if (e instanceof TypeError) {\n  alert('Type error!');\n } else if (e instanceof Error) {\n  alert(e.message);\n } else {\n  alert('Error: ' + e);\n }\n}\n\n// \u629b\u51fa\u9519\u8bef\nvar r, n, s;\ntry {\n s = prompt('\u8bf7\u8f93\u5165\u4e00\u4e2a\u6570\u5b57');\n n = parseInt(s);\n if (isNaN(n)) {\n  throw new Error('\u8f93\u5165\u9519\u8bef');\n }\n // \u8ba1\u7b97\u5e73\u65b9:\n r = n * n;\n console.log(n + ' * ' + n + ' = ' + r);\n} catch (e) {\n console.log('\u51fa\u9519\u4e86\uff1a' + e);\n}\n</code></pre>"},{"location":"code/JavaScript/js-note/#underscore","title":"underscore","text":"<ul> <li>underscore<ul> <li>JavaScript\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\uff0c\u652f\u6301\u9ad8\u9636\u51fd\u6570\u548c\u95ed\u5305\u3002\u51fd\u6570\u5f0f\u7f16\u7a0b\u975e\u5e38\u5f3a\u5927\uff0c\u53ef\u4ee5\u5199\u51fa\u975e\u5e38\u7b80\u6d01\u7684\u4ee3\u7801\u3002\u4f8b\u5982<code>Array</code>\u7684<code>map()</code>\u548c<code>filter()</code>\u65b9\u6cd5</li> <li>\u53ef\u662fObject\u6ca1\u6709\u8fd9\u4e9b\u65b9\u6cd5, \u5982\u4f55\u89e3\u51b3?</li> <li>\u9664\u4e86\u81ea\u5df1\u5b9e\u73b0, \u53ef\u4ee5\u76f4\u63a5\u627e\u4e00\u4e2a\u6210\u719f\u53ef\u9760\u7684\u7b2c\u4e09\u65b9\u5f00\u6e90\u5e93\uff0c\u4f7f\u7528\u7edf\u4e00\u7684\u51fd\u6570\u6765\u5b9e\u73b0<code>map()</code>\u3001<code>filter()</code>\u8fd9\u4e9b\u64cd\u4f5c \u2014\u2014 <code>underscore</code></li> </ul> </li> <li>\u7279\u70b9<ul> <li>\u6b63\u5982jQuery\u7edf\u4e00\u4e86\u4e0d\u540c\u6d4f\u89c8\u5668\u4e4b\u95f4\u7684DOM\u64cd\u4f5c\u7684\u5dee\u5f02\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u5bf9DOM\u8fdb\u884c\u64cd\u4f5c\uff0cunderscore\u5219\u63d0\u4f9b\u4e86\u4e00\u5957\u5b8c\u5584\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u63a5\u53e3\uff0c\u8ba9\u6211\u4eec\u66f4\u65b9\u4fbf\u5730\u5728JavaScript\u4e2d\u5b9e\u73b0\u51fd\u6570\u5f0f\u7f16\u7a0b\u3002</li> <li>jQuery\u5728\u52a0\u8f7d\u65f6\uff0c\u4f1a\u628a\u81ea\u8eab\u7ed1\u5b9a\u5230\u552f\u4e00\u7684\u5168\u5c40\u53d8\u91cf<code>$</code>\u4e0a\uff0cunderscore\u4e0e\u5176\u7c7b\u4f3c\uff0c\u4f1a\u628a\u81ea\u8eab\u7ed1\u5b9a\u5230\u552f\u4e00\u7684\u5168\u5c40\u53d8\u91cf<code>_</code>\u4e0a\uff0c\u8fd9\u4e5f\u662f\u4e3a\u5565\u5b83\u7684\u540d\u5b57\u53ebunderscore\u7684\u539f\u56e0\u3002</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#collections","title":"Collections","text":"<ul> <li>underscore\u4e3a\u96c6\u5408\u7c7b\u5bf9\u8c61\u63d0\u4f9b\u4e86\u4e00\u81f4\u7684\u63a5\u53e3\u3002\u96c6\u5408\u7c7b\u662f\u6307Array\u548cObject<ul> <li>\u5f53\u4f5c\u7528\u4e8eObject\u65f6\uff0c\u4f20\u5165\u7684\u51fd\u6570\u4e3a<code>function (value, key)</code></li> </ul> </li> <li><code>map, mapObject, filter</code><ul> <li>\u6ce8\u610f, map \u867d\u7136\u56de\u8c03\u51fd\u6570\u63a5\u53d7 <code>value, key</code>, \u8fd4\u56de\u7684\u4ec5\u4ec5\u662f\u56de\u8c03\u51fd\u6570\u5904\u7406\u7ed3\u679c\u7684 Array; \u8981\u60f3\u5f97\u5230 key \u4e0d\u53d8\u7684\u5bf9\u8c61, \u5e94\u8be5\u7528 <code>mapObject</code></li> <li><code>_.map(obj, (value, key) =&gt; value.toUpperCase())</code> \u8fd4\u56de toUpperCase \u540e\u7684 value \u5217\u8868</li> </ul> </li> <li><code>every, some</code><ul> <li>\u5f53\u96c6\u5408\u7684\u6240\u6709\u5143\u7d20\u90fd\u6ee1\u8db3\u6761\u4ef6\u65f6\uff0c<code>_.every()</code>\u51fd\u6570\u8fd4\u56de<code>true</code>\uff0c\u5f53\u96c6\u5408\u7684\u81f3\u5c11\u4e00\u4e2a\u5143\u7d20\u6ee1\u8db3\u6761\u4ef6\u65f6\uff0c<code>_.some()</code>\u51fd\u6570\u8fd4\u56de<code>true</code></li> <li><code>_.every([1, 4, 7, -3, -9], (x) =&gt; x &gt; 0); // false</code></li> </ul> </li> <li><code>max, min</code><ul> <li>\u76f4\u63a5\u8fd4\u56de\u96c6\u5408\u4e2d\u6700\u5927\u548c\u6700\u5c0f\u7684\u6570</li> <li><code>_.max([3,9]); // 9</code></li> <li>\u5bf9\u4e8e object, \u53ea\u4f5c\u7528 value, \u4f8b\u5982 <code>_.max({ a: 1, b: 2, c: 3 }); // 3</code></li> </ul> </li> <li><code>groupBy</code><ul> <li><code>groupBy()</code>\u628a\u96c6\u5408\u7684\u5143\u7d20\u6309\u7167key\u5f52\u7c7b\uff0ckey\u7531\u4f20\u5165\u7684\u51fd\u6570\u8fd4\u56de\uff1a</li> </ul> </li> <li><code>shuffle, sample</code><ul> <li><code>shuffle()</code>\u7528\u6d17\u724c\u7b97\u6cd5\u968f\u673a\u6253\u4e71\u4e00\u4e2a\u96c6\u5408</li> <li><code>sample()</code>\u5219\u662f\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20</li> </ul> </li> </ul> <pre><code>// groupBy\nvar scores = [20, 81, 75, 40, 91, 59, 77, 66, 72, 88, 99];\nvar groups = _.groupBy(scores, function (x) {\n if (x &lt; 60) {\n  return 'C';\n } else if (x &lt; 80) {\n  return 'B';\n } else {\n  return 'A';\n }\n});\n// \u7ed3\u679c:\n// {\n//   A: [81, 91, 88, 99],\n//   B: [75, 77, 66, 72],\n//   C: [20, 40, 59]\n// }\n</code></pre>"},{"location":"code/JavaScript/js-note/#arrays","title":"Arrays","text":"<p>underscore\u4e3a<code>Array</code>\u63d0\u4f9b\u4e86\u8bb8\u591a\u5de5\u5177\u7c7b\u65b9\u6cd5\uff0c\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5feb\u6377\u5730\u64cd\u4f5c<code>Array</code>\u3002(\u7c7b\u6bd4 Python)</p> <ul> <li>first, last</li> <li>flatten</li> <li>zip, unzip</li> <li>object<ul> <li><code>_.object(names, scores);</code> \u4ee5 names \u6570\u7ec4\u4f5c\u4e3akey scores \u6570\u7ec4\u4f5c\u4e3avalue</li> </ul> </li> <li>range<ul> <li><code>_.range(0, 30, 5);</code> \u4ece0\u5f00\u59cb\u5c0f\u4e8e30\uff0c\u6b65\u957f5</li> </ul> </li> </ul>"},{"location":"code/JavaScript/js-note/#functions","title":"Functions","text":"<p>\u56e0\u4e3aunderscore\u672c\u6765\u5c31\u662f\u4e3a\u4e86\u5145\u5206\u53d1\u6325JavaScript\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u7279\u6027\uff0c\u6240\u4ee5\u4e5f\u63d0\u4f9b\u4e86\u5927\u91cfJavaScript\u672c\u8eab\u6ca1\u6709\u7684\u9ad8\u9636\u51fd\u6570\u3002</p> <ul> <li>bind<ul> <li>\u5f53\u7528\u4e00\u4e2a\u53d8\u91cf<code>fn</code>\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u65f6\uff0c\u76f4\u63a5\u8c03\u7528<code>fn()</code>\u662f\u4e0d\u884c\u7684\uff0c\u56e0\u4e3a\u4e22\u5931\u4e86<code>this</code>\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u7528<code>bind</code>\u53ef\u4ee5\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002</li> </ul> </li> <li>partial<ul> <li><code>partial()</code>\u5c31\u662f\u4e3a\u4e00\u4e2a\u51fd\u6570\u521b\u5efa\u504f\u51fd\u6570\u3002</li> <li>\u4f8b\u5982 <code>var cube = _.partial(Math.pow, _, 3);</code> \u8ba1\u7b97\u4e09\u6b21\u65b9</li> <li><code>_</code> \u7528\u4f5c\u5360\u4f4d\u7b26</li> </ul> </li> <li>memorize<ul> <li>\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u5f00\u9500\u5f88\u5927\uff0c\u6211\u4eec\u5c31\u53ef\u80fd\u5e0c\u671b\u80fd\u628a\u7ed3\u679c\u7f13\u5b58\u4e0b\u6765\uff0c\u4ee5\u4fbf\u540e\u7eed\u8c03\u7528\u65f6\u76f4\u63a5\u83b7\u5f97\u7ed3\u679c\u3002</li> <li>\u7528<code>memoize()</code>\u5c31\u53ef\u4ee5\u81ea\u52a8\u7f13\u5b58\u51fd\u6570\u8ba1\u7b97\u7684\u7ed3\u679c</li> </ul> </li> <li>once<ul> <li><code>once()</code>\u4fdd\u8bc1\u67d0\u4e2a\u51fd\u6570\u6267\u884c\u4e14\u4ec5\u6267\u884c\u4e00\u6b21\u3002\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u65b9\u6cd5\u53eb<code>register()</code>\uff0c\u7528\u6237\u5728\u9875\u9762\u4e0a\u70b9\u4e24\u4e2a\u6309\u94ae\u7684\u4efb\u4f55\u4e00\u4e2a\u90fd\u53ef\u4ee5\u6267\u884c\u7684\u8bdd\uff0c\u5c31\u53ef\u4ee5\u7528<code>once()</code>\u4fdd\u8bc1\u51fd\u6570\u4ec5\u8c03\u7528\u4e00\u6b21\uff0c\u65e0\u8bba\u7528\u6237\u70b9\u51fb\u591a\u5c11\u6b21</li> </ul> </li> <li>delay<ul> <li><code>delay()</code>\u53ef\u4ee5\u8ba9\u4e00\u4e2a\u51fd\u6570\u5ef6\u8fdf\u6267\u884c\uff0c\u6548\u679c\u548c<code>setTimeout()</code>\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u4ee3\u7801\u660e\u663e\u7b80\u5355\u4e86</li> <li>\u4f8b\u5982, <code>_.delay(console.log, 2000, 'Hello,', 'world!');</code></li> </ul> </li> </ul> <pre><code>// bind\nvar s = ' Hello  ';\nvar fn = _.bind(s.trim, s); // \u5c06 s.trim \u51fd\u6570\u7ed1\u5b9a\u5728 s \u5bf9\u8c61\u4e0a (\u56fa\u5b9athis\u6307\u5411)\nfn(); // \u7136\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u4e86\n// \u8f93\u51faHello\n\n// partial\nvar cube = _.partial(Math.pow, _, 3);\ncube(3); // 27\ncube(5); // 125\ncube(10); // 1000\n\n// memorize\nvar factorial = _.memoize(function(n) {\n console.log('start calculate ' + n + '!...');\n if (n &lt; 2) {\n  return 1;\n }\n return n * factorial(n - 1);\n});\n\nfactorial(10); // 3628800\n// \u8f93\u51fa\u7ed3\u679c\u8bf4\u660efactorial(1)~factorial(10)\u90fd\u5df2\u7ecf\u7f13\u5b58\u4e86:\n// start calculate 10!...\n// start calculate 9!...\n// start calculate 8!...\n// start calculate 7!...\n// start calculate 6!...\n// start calculate 5!...\n// start calculate 4!...\n// start calculate 3!...\n// start calculate 2!...\n// start calculate 1!...\n\nfactorial(9); // 362880\n// console\u65e0\u8f93\u51fa\n\n// delay\nvar log = _.bind(console.log, console);\n_.delay(log, 2000, 'Hello,', 'world!');\n// 2\u79d2\u540e\u6253\u5370'Hello, world!':\n</code></pre>"},{"location":"code/JavaScript/js-note/#object","title":"Object","text":"<ul> <li><code>keys, allKeys</code><ul> <li><code>keys()</code>\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u5730\u8fd4\u56de\u4e00\u4e2aobject\u81ea\u8eab\u6240\u6709\u7684key\uff0c\u4f46\u4e0d\u5305\u542b\u4ece\u539f\u578b\u94fe\u7ee7\u627f\u4e0b\u6765\u7684</li> <li><code>allKeys()</code>\u9664\u4e86object\u81ea\u8eab\u7684key\uff0c\u8fd8\u5305\u542b\u4ece\u539f\u578b\u94fe\u7ee7\u627f\u4e0b\u6765\u7684</li> </ul> </li> <li><code>values</code><ul> <li>\u548c<code>keys()</code>\u7c7b\u4f3c\uff0c<code>values()</code>\u8fd4\u56deobject\u81ea\u8eab\u4f46\u4e0d\u5305\u542b\u539f\u578b\u94fe\u7ee7\u627f\u7684\u6240\u6709\u503c</li> </ul> </li> <li><code>mapObject</code><ul> <li><code>mapObject()</code>\u5c31\u662f\u9488\u5bf9object\u7684map\u7248\u672c</li> </ul> </li> <li>invert<ul> <li><code>invert()</code>\u628aobject\u7684\u6bcf\u4e2akey-value\u6765\u4e2a\u4ea4\u6362\uff0ckey\u53d8\u6210value\uff0cvalue\u53d8\u6210key</li> </ul> </li> <li>extend, extendOwn<ul> <li><code>extend()</code>\u628a\u591a\u4e2aobject\u7684key-value\u5408\u5e76\u5230\u7b2c\u4e00\u4e2aobject\u5e76\u8fd4\u56de</li> <li><code>extendOwn()</code>\u548c<code>extend()</code>\u7c7b\u4f3c\uff0c\u4f46\u83b7\u53d6\u5c5e\u6027\u65f6\u5ffd\u7565\u4ece\u539f\u578b\u94fe\u7ee7\u627f\u4e0b\u6765\u7684\u5c5e\u6027</li> </ul> </li> <li>clone<ul> <li>\u5982\u679c\u6211\u4eec\u8981\u590d\u5236\u4e00\u4e2aobject\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u7528<code>clone()</code>\u65b9\u6cd5\uff0c\u5b83\u4f1a\u628a\u539f\u6709\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u90fd\u590d\u5236\u5230\u65b0\u7684\u5bf9\u8c61\u4e2d</li> <li>\u6ce8\u610f\uff0c<code>clone()</code>\u662f\u201c\u6d45\u590d\u5236\u201d\u3002\u6240\u8c13\u201c\u6d45\u590d\u5236\u201d\u5c31\u662f\u8bf4\uff0c\u4e24\u4e2a\u5bf9\u8c61\u76f8\u540c\u7684key\u6240\u5f15\u7528\u7684value\u5176\u5b9e\u662f\u540c\u4e00\u5bf9\u8c61</li> </ul> </li> <li>isEqual<ul> <li><code>isEqual()</code>\u5bf9\u4e24\u4e2aobject\u8fdb\u884c\u6df1\u5ea6\u6bd4\u8f83\uff0c\u5982\u679c\u5185\u5bb9\u5b8c\u5168\u76f8\u540c\uff0c\u5219\u8fd4\u56de<code>true</code></li> <li><code>isEqual()</code>\u5176\u5b9e\u5bf9<code>Array</code>\u4e5f\u53ef\u4ee5\u6bd4\u8f83\uff1a</li> </ul> </li> </ul> <pre><code>function Student(name, age) {\n this.name = name;\n this.age = age;\n}\nStudent.prototype.school = 'No.1 Middle School';\nvar xiaoming = new Student('\u5c0f\u660e', 20);\n_.allKeys(xiaoming); // ['name', 'age', 'school']\n\nvar obj = { a: 1, b: 2, c: 3 };\n// \u6ce8\u610f\u4f20\u5165\u7684\u51fd\u6570\u7b7e\u540d\uff0cvalue\u5728\u524d\uff0ckey\u5728\u540e:\n_.mapObject(obj, (v, k) =&gt; 100 + v); // { a: 101, b: 102, c: 103 }\n\nvar obj = {\n Adam: 90,\n Lisa: 85,\n Bart: 59\n};\n_.invert(obj); // { '59': 'Bart', '85': 'Lisa', '90': 'Adam' }\n\n/* extend */\nvar a = {name: 'Bob', age: 20};\n_.extend(a, {age: 15}, {age: 88, city: 'Beijing'}); // {name: 'Bob', age: 88, city: 'Beijing'}\n// \u53d8\u91cfa\u7684\u5185\u5bb9\u4e5f\u6539\u53d8\u4e86\uff1a\na; // {name: 'Bob', age: 88, city: 'Beijing'}\n\n/* clone */\nvar source = {\n name: '\u5c0f\u660e',\n age: 20,\n skills: ['JavaScript', 'CSS', 'HTML']\n};\nvar copied = _.clone(source);\nsource.skills === copied.skills; // true\n\n/* isEqual */\nvar o1 = ['Bob', { skills: ['Java', 'JavaScript'] }];\nvar o2 = ['Bob', { skills: ['Java', 'JavaScript'] }];\n\no1 === o2; // false\n_.isEqual(o1, o2); // true\n</code></pre>"},{"location":"code/JavaScript/js-note/#chaining","title":"Chaining","text":"<ul> <li>\u628a\u5bf9\u8c61\u5305\u88c5\u6210\u80fd\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u5c31\u662f<code>chain()</code>\u51fd\u6570</li> <li>\u8054\u7cfb jQuery \u7684\u94fe\u5f0f\u8c03\u7528</li> </ul> <pre><code>/* jQuery\u652f\u6301\u94fe\u5f0f\u8c03\u7528 */\n$('a').attr('target', '_blank')\n   .append(' &lt;i class=\"uk-icon-external-link\"&gt;&lt;/i&gt;')\n   .click(function () {});\n\n/* chain */\nvar r = _.chain([1, 4, 9, 16, 25])\n   .map(Math.sqrt)\n   .filter(x =&gt; x % 2 === 1)\n   .value();\n</code></pre>"},{"location":"code/JavaScript/node-js-note/","title":"Node.js","text":""},{"location":"code/JavaScript/node-js-note/#nodejs","title":"Node.js","text":"<p>Warning</p> <p>\u4e0b\u9762\u7684\u4e3b\u4f53\u662f\u5ed6\u96ea\u5cf0\u6559\u7a0b\u7684\u7b14\u8bb0\u7684\u4e00\u90e8\u5206</p> <p>Note</p> <ul> <li>\u5982\u4f55\u8fd0\u884c?<ul> <li>\u76f4\u63a5 node. <code>node app.js</code></li> <li>npm <code>npm start</code>. \u9700\u8981\u5728 <code>package.json</code> \u4e2d\u7684 scripts \u5b9a\u4e49\u5bf9\u5e94\u7684 start \u547d\u4ee4 (\u4e5f\u662f node)</li> <li>VSCode \u4e2d\u8fd0\u884c, \u6216\u914d\u7f6e debug</li> </ul> </li> <li>koa<ul> <li>koa middleware<ul> <li><code>app.use(async (ctx, next) =&gt; {}</code> (\u6bcf\u4e2aasync\u51fd\u6570\u662f middleware)</li> <li>\u53c2\u6570<code>ctx</code>\u662f\u7531koa\u4f20\u5165\u7684\u5c01\u88c5\u4e86request\u548cresponse\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b83\u8bbf\u95eerequest\u548cresponse\uff0c<code>next</code>\u662fkoa\u4f20\u5165\u7684\u5c06\u8981\u5904\u7406\u7684\u4e0b\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570</li> </ul> </li> <li><code>koa-router</code> \u5904\u7406 URL<ul> <li>\u4f7f\u7528<code>router.get('/path', async fn)</code>\u6765\u6ce8\u518c\u4e00\u4e2aGET\u8bf7\u6c42\u3002</li> <li>\u53ef\u4ee5\u5728\u8bf7\u6c42\u8def\u5f84\u4e2d\u4f7f\u7528\u5e26\u53d8\u91cf\u7684<code>/hello/:name</code>\uff0c\u53d8\u91cf\u53ef\u4ee5\u901a\u8fc7<code>ctx.params.name</code>\u8bbf\u95ee\u3002</li> </ul> </li> <li><code>koa-bodyparser</code> \u89e3\u6790 body<ul> <li><code>app.use(bodyParser());</code></li> <li>\u89e3\u6790\u53c2\u6570\uff0c\u628a\u89e3\u6790\u540e\u7684\u53c2\u6570\u7ed1\u5b9a\u5230<code>ctx.request.body</code>\u4e2d</li> </ul> </li> <li>Middleware<ul> <li>\u4ee3\u7801\u91cd\u6784. \u4f8b\u5982\u5bf9\u4e8e URL\u5904\u7406\u7684\u4ee3\u7801\u653e\u5728\u540c\u4e00\u4e2a controllers \u6587\u4ef6\u5939\u4e2d, \u7528\u4e13\u95e8\u5199\u4e00\u4e2a\u51fd\u6570\u626b\u63cf<code>controllers</code>\u76ee\u5f55\u548c\u521b\u5efa<code>router</code></li> </ul> </li> </ul> </li> <li>Nunjucks: \u6a21\u677f\u5f15\u64ce<ul> <li>\u4f5c\u7528: \u7279\u6b8a\u5b57\u7b26\u8f6c\u4e49, \u683c\u5f0f\u5316, if, for \u7b49\u903b\u8f91</li> <li>\u5bf9\u4e8e Python \u4e2d jinja2 \u7684 js \u5b9e\u73b0</li> <li>\u4f7f\u7528\u5f88\u65b9\u4fbf: <code>var s = env.render('hello.html', { name: 'Tom' });</code></li> <li>block, \u7ee7\u627f <code>extends</code></li> </ul> </li> <li>mysql<ul> <li>sequelize, mysql2 \u5305</li> <li>\u521b\u5efa sequelize \u5bf9\u8c61\u5b9e\u4f8b, \u7136\u540e\u5b9a\u4e49\u6a21\u578b (\u6570\u636e\u5e93\u8868)</li> <li>\u64cd\u4f5c<ul> <li><code>create</code> \u63d2\u5165\u6570\u636e</li> <li><code>findAll</code> \u67e5\u8be2<ul> <li>\u5bf9\u67e5\u8be2\u5230\u7684\u5b9e\u4f8b\u8c03\u7528 <code>save, destory</code></li> </ul> </li> </ul> </li> </ul> </li> <li>mocha: \u5355\u5143\u6d4b\u8bd5<ul> <li>\u5982\u4f55\u6267\u884c\u6d4b\u8bd5?<ul> <li>\u65b9\u6cd5\u4e00 <code>node_modules\\mocha\\bin\\mocha</code></li> <li>\u65b9\u6cd5\u4e8c\uff0c\u5728 <code>package.json</code> \u4e2d\u6dfb\u52a0 scripts <code>\"test\": \"mocha\"</code>, \u7136\u540e <code>npm test</code> \u5373\u53ef</li> <li>\u65b9\u6cd5\u4e09\uff0c\u914d\u7f6e VS Code, <code>.vscode/launch.json</code>, \u5b9a\u4e49 <code>\"program\": \"${workspaceRoot}/node_modules/mocha/bin/mocha\"</code> \u4ee5\u53ca <code>\"type\": \"node\",</code> \u2014\u2014 \u5176\u5b9e\u5c31\u662f\u8fd0\u884c <code>node node_modules/mocha/bin/mocha</code></li> </ul> </li> <li>assert \u5305: <code>const assert = require('assert');</code></li> <li>\u5982\u679c\u8981\u6d4b\u8bd5\u540c\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u4f20\u5165\u65e0\u53c2\u6570\u51fd\u6570\u5373\u53ef<ul> <li><code>it(' description', function () {}</code></li> <li>\u7136\u540e\u5728\u5176\u4e2d assert \u5224\u65ad\u5373\u53ef</li> </ul> </li> <li>\u5982\u679c\u8981\u6d4b\u8bd5\u5f02\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u8981\u4f20\u5165\u7684\u51fd\u6570\u9700\u8981\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u901a\u5e38\u547d\u540d\u4e3a<code>done</code><ul> <li><code>it(' description', function (done) {}</code></li> <li>\u7136\u540e\u5728\u5176\u4e2d\u8fd0\u884c\u4ee3\u6d4b\u8bd5\u7684\u51fd\u6570 f</li> <li>\u624b\u52a8\u8c03\u7528<code>done()</code>\u8868\u793a\u6d4b\u8bd5\u6210\u529f\uff0c<code>done(err)</code>\u8868\u793a\u6d4b\u8bd5\u51fa\u9519</li> </ul> </li> <li>\u5bf9\u4e8e async \u51fd\u6570, \u66f4\u65b9\u4fbf\u7684\u662f\u76f4\u63a5\u5c06\u5176\u8f6c\u5316\u4e3a\u540c\u6b65\u51fd\u6570\u6d4b\u8bd5<ul> <li>\u4f8b\u5982, \u4f20\u5165 <code>async () =&gt; { assert.strictEqual(await f(), groundTruth) }</code></li> </ul> </li> <li>Http \u6d4b\u8bd5: <code>supertest</code> \u5305<ul> <li><code>request = require('supertest')</code></li> <li>\u4f7f\u7528 <code>let res = await request(server).get('/');</code> \u6784\u9020\u4e00\u4e2aGET\u8bf7\u6c42\uff0c\u53d1\u9001\u7ed9koa\u7684\u5e94\u7528\uff0c\u7136\u540e\u83b7\u5f97\u54cd\u5e94</li> <li>\u53ef\u4ee5\u624b\u52a8\u68c0\u67e5\u54cd\u5e94\u5bf9\u8c61\uff0c\u4f8b\u5982\uff0c<code>res.body</code>\uff0c\u8fd8\u53ef\u4ee5\u5229\u7528<code>supertest</code>\u63d0\u4f9b\u7684<code>expect()</code>\u66f4\u65b9\u4fbf\u5730\u65ad\u8a00\u54cd\u5e94\u7684HTTP\u4ee3\u7801\u3001\u8fd4\u56de\u5185\u5bb9\u548cHTTP\u5934\u3002\u65ad\u8a00HTTP\u5934\u65f6\u53ef\u7528\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f</li> </ul> </li> </ul> </li> <li>WebSocket<ul> <li>ws \u534f\u8bae</li> <li>koa \u548c ws \u5305\u53ef\u4ee5\u5171\u7528\u4e00\u4e2a\u7aef\u53e3, \u6bd4\u5982\u9ed8\u8ba4\u7684 3000. \u56e0\u4e3a koa \u5b9e\u9645\u4e0a\u8c03\u7528 Node\u6807\u51c6http\u6a21\u5757\u521b\u5efa\u7684 http.Server \u76d1\u542c\u7684, \u53ea\u662f\u628a\u54cd\u5e94\u51fd\u6570\u6ce8\u518c\u5230\u4e86\u5176\u4e2d, ws \u4e5f\u4e00\u6837, \u56e0\u6b64\u53ef\u4ee5\u7528\u4e00\u4e2a\u7aef\u53e3, \u6839\u636e\u534f\u8bae\u4e0d\u540c\u5206\u522b\u7531 koa \u548c ws \u5904\u7406.</li> <li>\u5982\u4f55\u8bc6\u522b\u7528\u6237\u8eab\u4efd?<ul> <li>\u603b\u4f53\u800c\u8a00, cookie \u662f\u4e00\u4e2a\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u76f8\u4e92\u914d\u5408\u7684\u8fc7\u7a0b. \u670d\u52a1\u5668\u521b\u5efa cookie, \u6d4f\u89c8\u5668\u4fdd\u5b58\u5e76\u5728\u4e4b\u540e\u7684\u8bf7\u6c42\u4e2d\u9644\u52a0 cookie; \u82e5\u8981\u5efa\u7acb ws \u94fe\u63a5\u4e5f\u7528 cookie \u5373\u53ef.</li> </ul> </li> <li>\u6848\u4f8b: \u804a\u5929\u5ba4. \u670d\u52a1\u5668\u7ef4\u62a4\u4e00\u7ec4 ws \u8fde\u63a5, \u6bcf\u5f53\u6536\u5230\u4e00\u6761\u6d88\u606f\u4e4b\u540e, \u5e7f\u64ad\u5230\u6240\u6709\u8fde\u63a5.</li> </ul> </li> <li>REST<ul> <li>\u83b7\u53d6\u8d44\u6e90\u7528 GET, \u65b0\u5efa\u3001\u66f4\u65b0\u3001\u5220\u9664 \u5206\u522b\u7528 POST, PUT, DELETE \u8bf7\u6c42, \u5185\u5bb9\u653e\u5728 body \u4e2d (<code>Content-Type</code> \u4e3a <code>application/json</code>)</li> </ul> </li> </ul> <ul> <li>\u56e0\u4e3aJavaScript\u662f\u5355\u7ebf\u7a0b\u6267\u884c\uff0c\u6839\u672c\u4e0d\u80fd\u8fdb\u884c\u540c\u6b65IO\u64cd\u4f5c\uff0c\u6240\u4ee5\uff0cJavaScript\u7684\u8fd9\u4e00\u201c\u7f3a\u9677\u201d\u5bfc\u81f4\u4e86\u5b83\u53ea\u80fd\u4f7f\u7528\u5f02\u6b65IO\u3002</li> <li>\u4f18\u52bf<ul> <li>\u6700\u5927\u7684\u4f18\u52bf\u662f\u501f\u52a9JavaScript\u5929\u751f\u7684\u4e8b\u4ef6\u9a71\u52a8\u673a\u5236\u52a0V8\u9ad8\u6027\u80fd\u5f15\u64ce\uff0c\u4f7f\u7f16\u5199\u9ad8\u6027\u80fdWeb\u670d\u52a1\u8f7b\u800c\u6613\u4e3e\u3002</li> <li>\u5728Node\u73af\u5883\u4e0b\uff0c\u901a\u8fc7\u6a21\u5757\u5316\u7684JavaScript\u4ee3\u7801\uff0c\u52a0\u4e0a\u51fd\u6570\u5f0f\u7f16\u7a0b\uff0c\u5e76\u4e14\u65e0\u9700\u8003\u8651\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u76f4\u63a5\u4f7f\u7528\u6700\u65b0\u7684ECMAScript 6\u6807\u51c6\uff0c\u53ef\u4ee5\u5b8c\u5168\u6ee1\u8db3\u5de5\u7a0b\u4e0a\u7684\u9700\u6c42\u3002</li> </ul> </li> <li>https://nodejs.org/zh-cn/</li> <li>npm<ul> <li>npm\u5176\u5b9e\u662fNode.js\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff08package manager\uff09</li> </ul> </li> <li>Node<ul> <li>\u547d\u4ee4\u884c\u6a21\u5f0f\u548cNode\u4ea4\u4e92\u6a21\u5f0f</li> </ul> </li> <li>\u4f7f\u7528 VSCode \u8c03\u8bd5</li> </ul>"},{"location":"code/JavaScript/node-js-note/#_1","title":"\u6a21\u5757","text":"<pre><code>/* hallo.js */\nvar s = 'Hello';\n\nfunction greet(name) {\n    console.log(s + ', ' + name + '!');\n}\n\nmodule.exports = greet;\n\n/* main.js */\n// \u5f15\u5165hello\u6a21\u5757:\nvar greet = require('./hello');\n\nvar s = 'Michael';\n\ngreet(s); // Hello, Michael!\n</code></pre> <ul> <li>\u5728\u4f7f\u7528<code>require()</code>\u5f15\u5165\u6a21\u5757\u7684\u65f6\u5019\uff0c\u8bf7\u6ce8\u610f\u6a21\u5757\u7684\u76f8\u5bf9\u8def\u5f84\u3002\u3010\u4f8b\u5982\uff0c<code>./hello.js</code>\u3011</li> <li>\u5982\u679c\u53ea\u5199\u6a21\u5757\u540d\u3010\u5982 <code>hello.js</code>\u3011\uff0c\u5219Node\u4f1a\u4f9d\u6b21\u5728 \u5185\u7f6e\u6a21\u5757\u3001\u5168\u5c40\u6a21\u5757\u548c\u5f53\u524d\u6a21\u5757 \u4e0b\u67e5\u627ehello.js\u3002</li> </ul>"},{"location":"code/JavaScript/node-js-note/#commonjs","title":"CommonJS \u89c4\u8303","text":"<ul> <li>\u8fd9\u79cd\u6a21\u5757\u52a0\u8f7d\u673a\u5236\u88ab\u79f0\u4e3aCommonJS\u89c4\u8303\u3002\u5728\u8fd9\u4e2a\u89c4\u8303\u4e0b\uff0c\u6bcf\u4e2a<code>.js</code>\u6587\u4ef6\u90fd\u662f\u4e00\u4e2a\u6a21\u5757\uff0c\u5b83\u4eec\u5185\u90e8\u5404\u81ea\u4f7f\u7528\u7684\u53d8\u91cf\u540d\u548c\u51fd\u6570\u540d\u90fd\u4e92\u4e0d\u51b2\u7a81\uff0c\u4f8b\u5982\uff0c<code>hello.js</code> \u548c <code>main.js</code> \u90fd\u7533\u660e\u4e86\u5168\u5c40\u53d8\u91cf <code>var s = 'xxx'</code>\uff0c\u4f46\u4e92\u4e0d\u5f71\u54cd\u3002</li> <li>\u4e00\u4e2a\u6a21\u5757\u60f3\u8981\u5bf9\u5916\u66b4\u9732\u53d8\u91cf\uff08\u51fd\u6570\u4e5f\u662f\u53d8\u91cf\uff09\uff0c\u53ef\u4ee5\u7528 <code>module.exports = variable;</code>\uff0c\u4e00\u4e2a\u6a21\u5757\u8981\u5f15\u7528\u5176\u4ed6\u6a21\u5757\u66b4\u9732\u7684\u53d8\u91cf\uff0c\u7528 <code>var ref = require('module_name');</code> \u5c31\u62ff\u5230\u4e86\u5f15\u7528\u6a21\u5757\u7684\u53d8\u91cf\u3002</li> </ul>"},{"location":"code/JavaScript/node-js-note/#_2","title":"\u6a21\u5757\u5b9e\u73b0\u673a\u5236","text":"<ul> <li>(\u6d4f\u89c8\u5668\u4e2d) JavaScript\u8bed\u8a00\u672c\u8eab\u5e76\u6ca1\u6709\u4e00\u79cd\u6a21\u5757\u673a\u5236\u6765\u4fdd\u8bc1\u4e0d\u540c\u6a21\u5757\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u53d8\u91cf\u540d\u3002</li> <li>\u5176\u5b9e\u8981\u5b9e\u73b0\u201c\u6a21\u5757\u201d\u8fd9\u4e2a\u529f\u80fd\uff0c\u5e76\u4e0d\u9700\u8981\u8bed\u6cd5\u5c42\u9762\u7684\u652f\u6301\u3002Node.js\u4e5f\u5e76\u4e0d\u4f1a\u589e\u52a0\u4efb\u4f55JavaScript\u8bed\u6cd5\u3002\u5b9e\u73b0\u201c\u6a21\u5757\u201d\u529f\u80fd\u7684\u5965\u5999\u5c31\u5728\u4e8eJavaScript\u662f\u4e00\u79cd\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u652f\u6301\u95ed\u5305\u3002\u5982\u679c\u6211\u4eec\u628a\u4e00\u6bb5JavaScript\u4ee3\u7801\u7528\u4e00\u4e2a\u51fd\u6570\u5305\u88c5\u8d77\u6765\uff0c\u8fd9\u6bb5\u4ee3\u7801\u7684\u6240\u6709\u201c\u5168\u5c40\u201d\u53d8\u91cf\u5c31\u53d8\u6210\u4e86\u51fd\u6570\u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf\u3002</li> <li>\u6a21\u5757\u7684\u8f93\u51fa<code>module.exports</code>\u600e\u4e48\u5b9e\u73b0\uff1f</li> </ul> <pre><code>// \u51c6\u5907module\u5bf9\u8c61:\nvar module = {\n    id: 'hello',\n    exports: {}\n};\nvar load = function (module) {\n    // \u8bfb\u53d6\u7684hello.js\u4ee3\u7801:\n    function greet(name) {\n        console.log('Hello, ' + name + '!');\n    }\n\n    module.exports = greet;\n    // hello.js\u4ee3\u7801\u7ed3\u675f\n    return module.exports;\n};\nvar exported = load(module);\n// \u4fdd\u5b58module:\nsave(module, exported);\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_3","title":"\u57fa\u672c\u6a21\u5757","text":"<p>\u56e0\u4e3a Node.js \u662f\u8fd0\u884c\u5728\u670d\u52a1\u533a\u7aef\u7684 JavaScript \u73af\u5883\uff0c\u670d\u52a1\u5668\u7a0b\u5e8f\u548c\u6d4f\u89c8\u5668\u7a0b\u5e8f\u76f8\u6bd4\uff0c\u6700\u5927\u7684\u7279\u70b9\u662f\u6ca1\u6709\u6d4f\u89c8\u5668\u7684\u5b89\u5168\u9650\u5236\u4e86\uff0c\u800c\u4e14\uff0c\u670d\u52a1\u5668\u7a0b\u5e8f\u5fc5\u987b\u80fd\u63a5\u6536\u7f51\u7edc\u8bf7\u6c42\uff0c\u8bfb\u5199\u6587\u4ef6\uff0c\u5904\u7406\u4e8c\u8fdb\u5236\u5185\u5bb9\uff0c\u6240\u4ee5\uff0cNode.js\u5185\u7f6e\u7684\u5e38\u7528\u6a21\u5757\u5c31\u662f\u4e3a\u4e86\u5b9e\u73b0\u57fa\u672c\u7684\u670d\u52a1\u5668\u529f\u80fd\u3002\u8fd9\u4e9b\u6a21\u5757\u5728\u6d4f\u89c8\u5668\u73af\u5883\u4e2d\u662f\u65e0\u6cd5\u88ab\u6267\u884c\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u5e95\u5c42\u4ee3\u7801\u662f\u7528C/C++\u5728Node.js\u8fd0\u884c\u73af\u5883\u4e2d\u5b9e\u73b0\u7684\u3002</p>"},{"location":"code/JavaScript/node-js-note/#node","title":"Node \u6a21\u5757\u57fa\u7840","text":"<ul> <li>global<ul> <li>JavaScript\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u5168\u5c40\u5bf9\u8c61\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\uff0c\u53eb<code>window</code>\u5bf9\u8c61\u3002\u800c\u5728Node.js\u73af\u5883\u4e2d\uff0c\u4e5f\u6709\u552f\u4e00\u7684\u5168\u5c40\u5bf9\u8c61\uff0c\u53eb<code>global</code>\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u4e5f\u548c\u6d4f\u89c8\u5668\u73af\u5883\u7684<code>window</code>\u4e0d\u540c</li> <li><code>global.console</code></li> </ul> </li> <li>process<ul> <li><code>process</code>\u4e5f\u662fNode.js\u63d0\u4f9b\u7684\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u4ee3\u8868\u5f53\u524dNode.js\u8fdb\u7a0b\u3002</li> <li>JavaScript\u7a0b\u5e8f\u662f\u7531\u4e8b\u4ef6\u9a71\u52a8\u6267\u884c\u7684\u5355\u7ebf\u7a0b\u6a21\u578b\uff0cNode.js\u4e5f\u4e0d\u4f8b\u5916\u3002Node.js\u4e0d\u65ad\u6267\u884c\u54cd\u5e94\u4e8b\u4ef6\u7684JavaScript\u51fd\u6570\uff0c\u76f4\u5230\u6ca1\u6709\u4efb\u4f55\u54cd\u5e94\u4e8b\u4ef6\u7684\u51fd\u6570\u53ef\u4ee5\u6267\u884c\u65f6\uff0cNode.js\u5c31\u9000\u51fa\u4e86\u3002</li> <li>\u5982\u679c\u6211\u4eec\u60f3\u8981\u5728\u4e0b\u4e00\u6b21\u4e8b\u4ef6\u54cd\u5e94\u4e2d\u6267\u884c\u4ee3\u7801\uff0c\u53ef\u4ee5\u8c03\u7528<code>process.nextTick()</code></li> <li>Node.js\u8fdb\u7a0b\u672c\u8eab\u7684\u4e8b\u4ef6\u5c31\u7531<code>process</code>\u5bf9\u8c61\u6765\u5904\u7406\u3002\u5982\u679c\u6211\u4eec\u54cd\u5e94<code>exit</code>\u4e8b\u4ef6\uff0c\u53ef\u4ee5 <code>process.on('exit', function (code) {}</code></li> </ul> </li> <li>\u5224\u65ad js \u6267\u884c\u73af\u5883<ul> <li>\u5e38\u7528\u7684\u65b9\u5f0f\u5c31\u662f\u6839\u636e\u6d4f\u89c8\u5668\u548cNode\u73af\u5883\u63d0\u4f9b\u7684\u5168\u5c40\u53d8\u91cf\u540d\u79f0\u6765\u5224\u65ad</li> <li><code>if (typeof(window) === 'undefined')</code> \u5219\u662f node \u73af\u5883</li> </ul> </li> </ul> <pre><code>&gt; global.console\nConsole {\n  log: [Function: bound ],\n  info: [Function: bound ],\n  warn: [Function: bound ],\n  error: [Function: bound ],\n  dir: [Function: bound ],\n  time: [Function: bound ],\n  timeEnd: [Function: bound ],\n  trace: [Function: bound trace],\n  assert: [Function: bound ],\n  Console: [Function: Console] }\n</code></pre> <pre><code>&gt; process === global.process;\ntrue\n&gt; process.version;\n'v5.2.0'\n&gt; process.platform;\n'darwin'\n&gt; process.arch;\n'x64'\n&gt; process.cwd(); //\u8fd4\u56de\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\n'/Users/michael'\n&gt; process.chdir('/private/tmp'); // \u5207\u6362\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\nundefined\n&gt; process.cwd();\n'/private/tmp'\n</code></pre> <pre><code>// test.js\n\n// process.nextTick()\u5c06\u5728\u4e0b\u4e00\u8f6e\u4e8b\u4ef6\u5faa\u73af\u4e2d\u8c03\u7528:\nprocess.nextTick(function () {\n    console.log('nextTick callback!');\n});\nconsole.log('nextTick was set!');\n</code></pre> <pre><code>// \u7a0b\u5e8f\u5373\u5c06\u9000\u51fa\u65f6\u7684\u56de\u8c03\u51fd\u6570:\nprocess.on('exit', function (code) {\n    console.log('about to exit with code: ' + code);\n});\n</code></pre> <pre><code>// \u5224\u65adJavaScript\u6267\u884c\u73af\u5883\nif (typeof(window) === 'undefined') {\n    console.log('node.js');\n} else {\n    console.log('browser');\n}\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#fs","title":"fs \u6a21\u5757","text":"<ul> <li>Node.js\u5185\u7f6e\u7684<code>fs</code>\u6a21\u5757\u5c31\u662f\u6587\u4ef6\u7cfb\u7edf\u6a21\u5757\uff0c\u8d1f\u8d23\u8bfb\u5199\u6587\u4ef6\u3002</li> <li>\u548c\u6240\u6709\u5176\u5b83JavaScript\u6a21\u5757\u4e0d\u540c\u7684\u662f\uff0c<code>fs</code> \u6a21\u5757\u540c\u65f6\u63d0\u4f9b\u4e86\u5f02\u6b65\u548c\u540c\u6b65\u7684\u65b9\u6cd5\u3002</li> <li>\u5f02\u6b65\u8bfb\u53d6<ul> <li><code>fs.readFile('sample.txt', 'utf-8', function (err, data) {})</code></li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570: \u6587\u4ef6\u7f16\u7801</li> <li>\u5f02\u6b65\u8bfb\u53d6\u65f6\uff0c\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u5f53\u6b63\u5e38\u8bfb\u53d6\u65f6\uff0c<code>err</code>\u53c2\u6570\u4e3a<code>null</code>\uff0c<code>data</code>\u53c2\u6570\u4e3a\u8bfb\u53d6\u5230\u7684String\u3002\u5f53\u8bfb\u53d6\u53d1\u751f\u9519\u8bef\u65f6\uff0c<code>err</code>\u53c2\u6570\u4ee3\u8868\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\uff0c<code>data</code>\u4e3a<code>undefined</code>\u3002\u8fd9\u4e5f\u662fNode.js\u6807\u51c6\u7684\u56de\u8c03\u51fd\u6570\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4ee3\u8868\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7ed3\u679c\u3002</li> <li>\u5f53\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u65f6\uff0c\u4e0d\u4f20\u5165\u6587\u4ef6\u7f16\u7801\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u7684<code>data</code>\u53c2\u6570\u5c06\u8fd4\u56de\u4e00\u4e2a<code>Buffer</code>\u5bf9\u8c61\u3002\u5728Node.js\u4e2d\uff0c<code>Buffer</code>\u5bf9\u8c61\u5c31\u662f\u4e00\u4e2a\u5305\u542b\u96f6\u4e2a\u6216\u4efb\u610f\u4e2a\u5b57\u8282\u7684\u6570\u7ec4\uff08\u6ce8\u610f\u548cArray\u4e0d\u540c\uff09\u3002<ul> <li>Buffer \u5bf9\u8c61\u53ef\u4ee5\u548c String \u8f6c\u6362,</li> <li><code>data.toString('utf-8')</code> \u548c <code>Buffer.from(text, 'utf-8')</code></li> </ul> </li> </ul> </li> <li>\u540c\u6b65\u8bfb\u53d6<ul> <li><code>var data = fs.readFileSync('sample.txt', 'utf-8');</code></li> <li>\u4e0d\u4f20\u5165\u56de\u8c03\u51fd\u6570, \u76f4\u63a5\u8fd4\u56de</li> <li>\u5982\u679c\u540c\u6b65\u8bfb\u53d6\u6587\u4ef6\u53d1\u751f\u9519\u8bef\uff0c\u5219\u9700\u8981\u7528<code>try...catch</code>\u6355\u83b7\u8be5\u9519\u8bef</li> </ul> </li> <li>\u5199\u6587\u4ef6<ul> <li><code>fs.writeFile('output.txt', data, function (err) {})</code></li> <li><code>writeFile()</code>\u7684\u53c2\u6570\u4f9d\u6b21\u4e3a\u6587\u4ef6\u540d\u3001\u6570\u636e\u548c\u56de\u8c03\u51fd\u6570\u3002\u5982\u679c\u4f20\u5165\u7684\u6570\u636e\u662fString\uff0c\u9ed8\u8ba4\u6309UTF-8\u7f16\u7801\u5199\u5165\u6587\u672c\u6587\u4ef6\uff0c\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f<code>Buffer</code>\uff0c\u5219\u5199\u5165\u7684\u662f\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\u56de\u8c03\u51fd\u6570\u7531\u4e8e\u53ea\u5173\u5fc3\u6210\u529f\u4e0e\u5426\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u4e00\u4e2a<code>err</code>\u53c2\u6570\u3002</li> <li><code>fs.writeFileSync('output.txt', data);</code></li> </ul> </li> <li>stat<ul> <li>\u5982\u679c\u6211\u4eec\u8981\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\uff0c\u521b\u5efa\u65f6\u95f4\u7b49\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528<code>fs.stat()</code>\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a<code>Stat</code>\u5bf9\u8c61\uff0c\u80fd\u544a\u8bc9\u6211\u4eec\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8be6\u7ec6\u4fe1\u606f</li> <li>\u5c5e\u6027:<ul> <li><code>isFile, isDirectory</code>,</li> <li><code>size</code></li> <li><code>birthtime, mtime</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#_4","title":"\u5f02\u6b65\u8bfb\u6587\u4ef6","text":"<p>\u6309\u7167JavaScript\u7684\u6807\u51c6\uff0c\u5f02\u6b65\u8bfb\u53d6\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>var fs = require('fs');\n\nfs.readFile('sample.txt', 'utf-8', function (err, data) {\n    if (err) {\n        console.log(err);\n    } else {\n        console.log(data);\n    }\n});\n</code></pre> <p>\u5f02\u6b65\u8bfb\u53d6\u65f6\uff0c\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u5f53\u6b63\u5e38\u8bfb\u53d6\u65f6\uff0c<code>err</code>\u53c2\u6570\u4e3a<code>null</code>\uff0c<code>data</code>\u53c2\u6570\u4e3a\u8bfb\u53d6\u5230\u7684String\u3002\u5f53\u8bfb\u53d6\u53d1\u751f\u9519\u8bef\u65f6\uff0c<code>err</code>\u53c2\u6570\u4ee3\u8868\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\uff0c<code>data</code>\u4e3a<code>undefined</code>\u3002\u8fd9\u4e5f\u662fNode.js\u6807\u51c6\u7684\u56de\u8c03\u51fd\u6570\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4ee3\u8868\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7ed3\u679c\u3002\u540e\u9762\u6211\u4eec\u8fd8\u4f1a\u7ecf\u5e38\u7f16\u5199\u8fd9\u79cd\u56de\u8c03\u51fd\u6570\u3002</p> <ul> <li>\u5f53\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u65f6\uff0c\u4e0d\u4f20\u5165\u6587\u4ef6\u7f16\u7801\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u7684<code>data</code>\u53c2\u6570\u5c06\u8fd4\u56de\u4e00\u4e2a <code>Buffer</code> \u5bf9\u8c61\u3002\u5728Node.js\u4e2d\uff0c<code>Buffer</code>\u5bf9\u8c61\u5c31\u662f\u4e00\u4e2a\u5305\u542b\u96f6\u4e2a\u6216\u4efb\u610f\u4e2a\u5b57\u8282\u7684 \u6570\u7ec4 \uff08\u6ce8\u610f\u548cArray\u4e0d\u540c\uff09\u3002</li> <li><code>Buffer</code>\u5bf9\u8c61\u53ef\u4ee5\u548cString\u4f5c\u8f6c\u6362</li> </ul> <pre><code>// Buffer -&gt; String\nvar text = data.toString('utf-8');\nconsole.log(text);\n\n// String -&gt; Buffer\nvar buf = Buffer.from(text, 'utf-8');\nconsole.log(buf);\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_5","title":"\u540c\u6b65\u8bfb\u6587\u4ef6","text":"<ul> <li>\u9664\u4e86\u6807\u51c6\u7684\u5f02\u6b65\u8bfb\u53d6\u6a21\u5f0f\u5916\uff0c<code>fs</code>\u4e5f\u63d0\u4f9b\u76f8\u5e94\u7684\u540c\u6b65\u8bfb\u53d6\u51fd\u6570\u3002\u540c\u6b65\u8bfb\u53d6\u7684\u51fd\u6570\u548c\u5f02\u6b65\u51fd\u6570\u76f8\u6bd4\uff0c\u591a\u4e86\u4e00\u4e2a<code>Sync</code>\u540e\u7f00\uff0c\u5e76\u4e14\u4e0d\u63a5\u6536\u56de\u8c03\u51fd\u6570\uff0c\u51fd\u6570\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c\u3002</li> <li>\u53ef\u89c1\uff0c\u539f\u5f02\u6b65\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u7684<code>data</code>\u88ab\u51fd\u6570\u76f4\u63a5\u8fd4\u56de\uff0c\u51fd\u6570\u540d\u9700\u8981\u6539\u4e3a<code>readFileSync</code>\uff0c\u5176\u5b83\u53c2\u6570\u4e0d\u53d8\u3002</li> <li>\u5982\u679c\u540c\u6b65\u8bfb\u53d6\u6587\u4ef6\u53d1\u751f\u9519\u8bef\uff0c\u5219\u9700\u8981\u7528<code>try...catch</code>\u6355\u83b7\u8be5\u9519\u8bef</li> </ul> <pre><code>try {\n    var data = fs.readFileSync('sample.txt', 'utf-8');\n    console.log(data);\n} catch (err) {\n    // \u51fa\u9519\u4e86\n}\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_6","title":"\u5f02\u6b65\u8fd8\u662f\u540c\u6b65","text":"<ul> <li>\u5728<code>fs</code>\u6a21\u5757\u4e2d\uff0c\u63d0\u4f9b\u540c\u6b65\u65b9\u6cd5\u662f\u4e3a\u4e86\u65b9\u4fbf\u4f7f\u7528\u3002\u90a3\u6211\u4eec\u5230\u5e95\u662f\u5e94\u8be5\u7528\u5f02\u6b65\u65b9\u6cd5\u8fd8\u662f\u540c\u6b65\u65b9\u6cd5\u5462\uff1f</li> <li>\u7531\u4e8eNode\u73af\u5883\u6267\u884c\u7684JavaScript\u4ee3\u7801\u662f\u670d\u52a1\u5668\u7aef\u4ee3\u7801\uff0c\u6240\u4ee5\uff0c\u7edd\u5927\u90e8\u5206\u9700\u8981\u5728\u670d\u52a1\u5668\u8fd0\u884c\u671f\u53cd\u590d\u6267\u884c\u4e1a\u52a1\u903b\u8f91\u7684\u4ee3\u7801\uff0c\u5fc5\u987b\u4f7f\u7528\u5f02\u6b65\u4ee3\u7801\uff0c\u5426\u5219\uff0c\u540c\u6b65\u4ee3\u7801\u5728\u6267\u884c\u65f6\u671f\uff0c\u670d\u52a1\u5668\u5c06\u505c\u6b62\u54cd\u5e94\uff0c\u56e0\u4e3aJavaScript\u53ea\u6709\u4e00\u4e2a\u6267\u884c\u7ebf\u7a0b\u3002</li> <li>\u670d\u52a1\u5668\u542f\u52a8\u65f6\u5982\u679c\u9700\u8981\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\uff0c\u6216\u8005\u7ed3\u675f\u65f6\u9700\u8981\u5199\u5165\u5230\u72b6\u6001\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u540c\u6b65\u4ee3\u7801\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4ee3\u7801\u53ea\u5728\u542f\u52a8\u548c\u7ed3\u675f\u65f6\u6267\u884c\u4e00\u6b21\uff0c\u4e0d\u5f71\u54cd\u670d\u52a1\u5668\u6b63\u5e38\u8fd0\u884c\u65f6\u7684\u5f02\u6b65\u6267\u884c\u3002</li> </ul>"},{"location":"code/JavaScript/node-js-note/#stream","title":"stream \u6a21\u5757","text":"<ul> <li><code>stream</code> \u662fNode.js\u63d0\u4f9b\u7684\u53c8\u4e00\u4e2a\u4ec5\u5728\u670d\u52a1\u7aef\u53ef\u7528\u7684\u6a21\u5757\uff0c\u76ee\u7684\u662f\u652f\u6301\u201c\u6d41\u201d\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u6d41\u7684\u7279\u70b9\u662f\u6570\u636e\u662f\u6709\u5e8f\u7684\uff0c\u800c\u4e14\u5fc5\u987b\u4f9d\u6b21\u8bfb\u53d6\uff0c\u6216\u8005\u4f9d\u6b21\u5199\u5165\uff0c\u4e0d\u80fd\u50cfArray\u90a3\u6837\u968f\u673a\u5b9a\u4f4d\u3002</li> <li>\u5728Node.js\u4e2d\uff0c\u6d41\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u53ea\u9700\u8981\u54cd\u5e94\u6d41\u7684\u4e8b\u4ef6\u5c31\u53ef\u4ee5\u4e86\uff1a<code>data</code>\u4e8b\u4ef6\u8868\u793a\u6d41\u7684\u6570\u636e\u5df2\u7ecf\u53ef\u4ee5\u8bfb\u53d6\u4e86\uff0c<code>end</code>\u4e8b\u4ef6\u8868\u793a\u8fd9\u4e2a\u6d41\u5df2\u7ecf\u5230\u672b\u5c3e\u4e86\uff0c\u6ca1\u6709\u6570\u636e\u53ef\u4ee5\u8bfb\u53d6\u4e86\uff0c<code>error</code>\u4e8b\u4ef6\u8868\u793a\u51fa\u9519\u4e86\u3002<ul> <li><code>var rs = fs.createReadStream('sample.txt', 'utf-8');</code></li> <li>\u8981\u6ce8\u610f\uff0c<code>data</code>\u4e8b\u4ef6\u53ef\u80fd\u4f1a\u6709\u591a\u6b21\uff0c\u6bcf\u6b21\u4f20\u9012\u7684<code>chunk</code>\u662f\u6d41\u7684\u4e00\u90e8\u5206\u6570\u636e\u3002</li> </ul> </li> <li>\u5199\u5165: \u8981\u4ee5\u6d41\u7684\u5f62\u5f0f\u5199\u5165\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u4e0d\u65ad\u8c03\u7528<code>write()</code>\u65b9\u6cd5 (\u53ef\u4ee5\u4f20\u5165\u5b57\u7b26\u4e32\u6216 Buffer)\uff0c\u6700\u540e\u4ee5<code>end()</code>\u7ed3\u675f<ul> <li><code>var ws1 = fs.createWriteStream('output1.txt', 'utf-8');</code></li> </ul> </li> <li>\u6240\u6709\u53ef\u4ee5\u8bfb\u53d6\u6570\u636e\u7684\u6d41\u90fd\u7ee7\u627f\u81ea<code>stream.Readable</code>\uff0c\u6240\u6709\u53ef\u4ee5\u5199\u5165\u7684\u6d41\u90fd\u7ee7\u627f\u81ea<code>stream.Writable</code>\u3002</li> <li>pipe<ul> <li>\u5c31\u50cf\u53ef\u4ee5\u628a\u4e24\u4e2a\u6c34\u7ba1\u4e32\u6210\u4e00\u4e2a\u66f4\u957f\u7684\u6c34\u7ba1\u4e00\u6837\uff0c\u4e24\u4e2a\u6d41\u4e5f\u53ef\u4ee5\u4e32\u8d77\u6765\u3002\u4e00\u4e2a<code>Readable</code>\u6d41\u548c\u4e00\u4e2a<code>Writable</code>\u6d41\u4e32\u8d77\u6765\u540e\uff0c\u6240\u6709\u7684\u6570\u636e\u81ea\u52a8\u4ece<code>Readable</code>\u6d41\u8fdb\u5165<code>Writable</code>\u6d41\uff0c\u8fd9\u79cd\u64cd\u4f5c\u53eb<code>pipe</code>\u3002</li> <li>\u5728Node.js\u4e2d\uff0c<code>Readable</code>\u6d41\u6709\u4e00\u4e2a<code>pipe()</code>\u65b9\u6cd5, \u53ef\u4ee5\u8fdb\u884c\u590d\u5236</li> <li><code>rs.pipe(ws);</code></li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53<code>Readable</code>\u6d41\u7684\u6570\u636e\u8bfb\u53d6\u5b8c\u6bd5\uff0c<code>end</code>\u4e8b\u4ef6\u89e6\u53d1\u540e\uff0c\u5c06\u81ea\u52a8\u5173\u95ed<code>Writable</code>\u6d41\u3002\u5982\u679c\u6211\u4eec\u4e0d\u5e0c\u671b\u81ea\u52a8\u5173\u95ed<code>Writable</code>\u6d41\uff0c\u9700\u8981\u4f20\u5165\u53c2\u6570 <code>readable.pipe(writable, { end: false });</code></li> </ul> </li> </ul> <pre><code>/* \u4ece\u6587\u4ef6\u6d41\u8bfb\u53d6\u6587\u672c\u5185\u5bb9 */\nvar fs = require('fs');\n\n// \u6253\u5f00\u4e00\u4e2a\u6d41:\nvar rs = fs.createReadStream('sample.txt', 'utf-8');\n\nrs.on('data', function (chunk) {\n    console.log('DATA:')\n    console.log(chunk);\n});\n\nrs.on('end', function () {\n    console.log('END');\n});\n\nrs.on('error', function (err) {\n    console.log('ERROR: ' + err);\n});\n</code></pre> <p>\u4ee5\u6d41\u7684\u5f62\u5f0f\u5199\u5165\u6587\u4ef6</p> <pre><code>var fs = require('fs');\n\nvar ws1 = fs.createWriteStream('output1.txt', 'utf-8');\nws1.write('\u4f7f\u7528Stream\u5199\u5165\u6587\u672c\u6570\u636e...\\n');\nws1.write('END.');\nws1.end();\n\nvar ws2 = fs.createWriteStream('output2.txt');\nws2.write(new Buffer('\u4f7f\u7528Stream\u5199\u5165\u4e8c\u8fdb\u5236\u6570\u636e...\\n', 'utf-8'));\nws2.write(new Buffer('END.', 'utf-8'));\nws2.end();\n</code></pre> <p>pipe</p> <pre><code>var fs = require('fs');\n\nvar rs = fs.createReadStream('sample.txt');\nvar ws = fs.createWriteStream('copied.txt');\n\nrs.pipe(ws);\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#http","title":"http \u6a21\u5757","text":"<ul> <li>\u8981\u7406\u89e3Web\u670d\u52a1\u5668\u7a0b\u5e8f\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u9996\u5148\uff0c\u6211\u4eec\u8981\u5bf9HTTP\u534f\u8bae\u6709\u57fa\u672c\u7684\u4e86\u89e3\u3002\u5982\u679c\u4f60\u5bf9HTTP\u534f\u8bae\u4e0d\u592a\u719f\u6089\uff0c\u5148\u770b\u4e00\u770b HTTP\u534f\u8bae\u7b80\u4ecb\u3002</li> <li>\u8981\u5f00\u53d1HTTP\u670d\u52a1\u5668\u7a0b\u5e8f\uff0c\u4ece\u5934\u5904\u7406TCP\u8fde\u63a5\uff0c\u89e3\u6790HTTP\u662f\u4e0d\u73b0\u5b9e\u7684\u3002\u8fd9\u4e9b\u5de5\u4f5c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u7531Node.js\u81ea\u5e26\u7684<code>http</code>\u6a21\u5757\u5b8c\u6210\u4e86\u3002\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e0d\u76f4\u63a5\u548cHTTP\u534f\u8bae\u6253\u4ea4\u9053\uff0c\u800c\u662f\u64cd\u4f5c<code>http</code>\u6a21\u5757\u63d0\u4f9b\u7684<code>request</code>\u548c<code>response</code>\u5bf9\u8c61\u3002<ul> <li><code>request</code>\u5bf9\u8c61\u5c01\u88c5\u4e86HTTP\u8bf7\u6c42\uff0c\u6211\u4eec\u8c03\u7528<code>request</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u5c31\u53ef\u4ee5\u62ff\u5230\u6240\u6709HTTP\u8bf7\u6c42\u7684\u4fe1\u606f\uff1b</li> <li><code>response</code>\u5bf9\u8c61\u5c01\u88c5\u4e86HTTP\u54cd\u5e94\uff0c\u6211\u4eec\u64cd\u4f5c<code>response</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u628aHTTP\u54cd\u5e94\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\u3002</li> </ul> </li> <li><code>var server = http.createServer(function (request, response) {}</code> (\u76f4\u63a5\u53bb\u770b\u793a\u4f8b\u4ee3\u7801)</li> <li>\u7136\u540e\u8bbe\u7f6e\u76d1\u542c <code>server.listen(8080);</code></li> <li>\u5176\u4ed6\u6a21\u5757<ul> <li>\u89e3\u6790URL\u9700\u8981\u7528\u5230Node.js\u63d0\u4f9b\u7684<code>url</code>\u6a21\u5757\uff0c\u5b83\u4f7f\u7528\u8d77\u6765\u975e\u5e38\u7b80\u5355\uff0c\u901a\u8fc7<code>parse()</code> \u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u4e00\u4e2a<code>Url</code>\u5bf9\u8c61</li> <li>\u5904\u7406\u672c\u5730\u6587\u4ef6\u76ee\u5f55\u9700\u8981\u4f7f\u7528Node.js\u63d0\u4f9b\u7684<code>path</code>\u6a21\u5757\uff0c\u5b83\u53ef\u4ee5\u65b9\u4fbf\u5730\u6784\u9020\u76ee\u5f55</li> </ul> </li> </ul> <p>\u7528Node.js\u5b9e\u73b0\u4e00\u4e2aHTTP\u670d\u52a1\u5668\u7a0b\u5e8f\u975e\u5e38\u7b80\u5355\u3002\u6211\u4eec\u6765\u5b9e\u73b0\u4e00\u4e2a\u6700\u7b80\u5355\u7684Web\u7a0b\u5e8f<code>hello.js</code>\uff0c\u5b83\u5bf9\u4e8e\u6240\u6709\u8bf7\u6c42\uff0c\u90fd\u8fd4\u56de<code>Hello world!</code>\uff1a</p> <pre><code>// \u5bfc\u5165http\u6a21\u5757:\nvar http = require('http');\n\n// \u521b\u5efahttp server\uff0c\u5e76\u4f20\u5165\u56de\u8c03\u51fd\u6570:\nvar server = http.createServer(function (request, response) {\n    // \u56de\u8c03\u51fd\u6570\u63a5\u6536request\u548cresponse\u5bf9\u8c61,\n    // \u83b7\u5f97HTTP\u8bf7\u6c42\u7684method\u548curl:\n    console.log(request.method + ': ' + request.url);\n    // \u5c06HTTP\u54cd\u5e94200\u5199\u5165response, \u540c\u65f6\u8bbe\u7f6eContent-Type: text/html:\n    response.writeHead(200, {'Content-Type': 'text/html'});\n    // \u5c06HTTP\u54cd\u5e94\u7684HTML\u5185\u5bb9\u5199\u5165response:\n    response.end('&lt;h1&gt;Hello world!&lt;/h1&gt;');\n});\n\n// \u8ba9\u670d\u52a1\u5668\u76d1\u542c8080\u7aef\u53e3:\nserver.listen(8080);\n\nconsole.log('Server is running at http://127.0.0.1:8080/');\n</code></pre> <ul> <li>\u8ba9\u6211\u4eec\u7ee7\u7eed\u6269\u5c55\u4e00\u4e0b\u4e0a\u9762\u7684Web\u7a0b\u5e8f\u3002\u6211\u4eec\u53ef\u4ee5\u8bbe\u5b9a\u4e00\u4e2a\u76ee\u5f55\uff0c\u7136\u540e\u8ba9Web\u7a0b\u5e8f\u53d8\u6210\u4e00\u4e2a\u6587\u4ef6\u670d\u52a1\u5668\u3002\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ea\u9700\u8981\u89e3\u6790<code>request.url</code>\u4e2d\u7684\u8def\u5f84\uff0c\u7136\u540e\u5728\u672c\u5730\u627e\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u628a\u6587\u4ef6\u5185\u5bb9\u53d1\u9001\u51fa\u53bb\u5c31\u53ef\u4ee5\u4e86\u3002</li> <li>\u89e3\u6790URL\u9700\u8981\u7528\u5230Node.js\u63d0\u4f9b\u7684<code>url</code>\u6a21\u5757\uff0c\u5b83\u4f7f\u7528\u8d77\u6765\u975e\u5e38\u7b80\u5355\uff0c\u901a\u8fc7<code>parse()</code>\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u4e00\u4e2a<code>Url</code>\u5bf9\u8c61</li> </ul> <pre><code>var url = require('url');\n\nconsole.log(url.parse('http://user:pass@host.com:8080/path/to/file?query=string#hash'));\n</code></pre> <p>\u7ed3\u679c\u4e3a</p> <pre><code>Url {\n  protocol: 'http:',\n  slashes: true,\n  auth: 'user:pass',\n  host: 'host.com:8080',\n  port: '8080',\n  hostname: 'host.com',\n  hash: '#hash',\n  search: '?query=string',\n  query: 'query=string',\n  pathname: '/path/to/file',\n  path: '/path/to/file?query=string',\n  href: 'http://user:pass@host.com:8080/path/to/file?query=string#hash' }\n</code></pre> <p>\u6211\u4eec\u5b9e\u73b0\u4e00\u4e2a\u6587\u4ef6\u670d\u52a1\u5668<code>file_server.js</code>\uff1a</p> <pre><code>var\n    fs = require('fs'),\n    url = require('url'),\n    path = require('path'),\n    http = require('http');\n\n// \u4ece\u547d\u4ee4\u884c\u53c2\u6570\u83b7\u53d6root\u76ee\u5f55\uff0c\u9ed8\u8ba4\u662f\u5f53\u524d\u76ee\u5f55:\nvar root = path.resolve(process.argv[2] || '.');\n\nconsole.log('Static root dir: ' + root);\n\n// \u521b\u5efa\u670d\u52a1\u5668:\nvar server = http.createServer(function (request, response) {\n    // \u83b7\u5f97URL\u7684path\uff0c\u7c7b\u4f3c '/css/bootstrap.css':\n    var pathname = url.parse(request.url).pathname;\n    // \u83b7\u5f97\u5bf9\u5e94\u7684\u672c\u5730\u6587\u4ef6\u8def\u5f84\uff0c\u7c7b\u4f3c '/srv/www/css/bootstrap.css':\n    var filepath = path.join(root, pathname);\n    // \u83b7\u53d6\u6587\u4ef6\u72b6\u6001:\n    fs.stat(filepath, function (err, stats) {\n        if (!err &amp;&amp; stats.isFile()) {\n            // \u6ca1\u6709\u51fa\u9519\u5e76\u4e14\u6587\u4ef6\u5b58\u5728:\n            console.log('200 ' + request.url);\n            // \u53d1\u9001200\u54cd\u5e94:\n            response.writeHead(200);\n            // \u5c06\u6587\u4ef6\u6d41\u5bfc\u5411response:\n            fs.createReadStream(filepath).pipe(response);\n        } else {\n            // \u51fa\u9519\u4e86\u6216\u8005\u6587\u4ef6\u4e0d\u5b58\u5728:\n            console.log('404 ' + request.url);\n            // \u53d1\u9001404\u54cd\u5e94:\n            response.writeHead(404);\n            response.end('404 Not Found');\n        }\n    });\n});\n\nserver.listen(8080);\n\nconsole.log('Server is running at http://127.0.0.1:8080/');\n</code></pre> <ul> <li>\u6ca1\u6709\u5fc5\u8981\u624b\u52a8\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u3002\u7531\u4e8e<code>response</code>\u5bf9\u8c61\u672c\u8eab\u662f\u4e00\u4e2a<code>Writable Stream</code>\uff0c\u76f4\u63a5\u7528<code>pipe()</code>\u65b9\u6cd5\u5c31\u5b9e\u73b0\u4e86\u81ea\u52a8\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u5e76\u8f93\u51fa\u5230HTTP\u54cd\u5e94\u3002</li> </ul>"},{"location":"code/JavaScript/node-js-note/#crypto","title":"crypto \u6a21\u5757","text":"<ul> <li>crypto\u6a21\u5757\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u63d0\u4f9b\u901a\u7528\u7684\u52a0\u5bc6\u548c\u54c8\u5e0c\u7b97\u6cd5\u3002\u7528\u7eafJavaScript\u4ee3\u7801\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\u4e0d\u662f\u4e0d\u53ef\u80fd\uff0c\u4f46\u901f\u5ea6\u4f1a\u975e\u5e38\u6162\u3002Nodejs\u7528C/C++\u5b9e\u73b0\u8fd9\u4e9b\u7b97\u6cd5\u540e\uff0c\u901a\u8fc7cypto\u8fd9\u4e2a\u6a21\u5757\u66b4\u9732\u4e3aJavaScript\u63a5\u53e3\uff0c\u8fd9\u6837\u7528\u8d77\u6765\u65b9\u4fbf\uff0c\u8fd0\u884c\u901f\u5ea6\u4e5f\u5feb\u3002</li> <li>hash<ul> <li><code>const hash = crypto.createHash('md5');</code> \u53ef\u4ee5\u662f md5, sha1, sha256, sha512</li> <li>\u53ef\u4ee5\u4efb\u610f\u6b21 <code>hash.update('Hello, world!');</code>. \u9ed8\u8ba4\u5b57\u7b26\u4e32\u7f16\u7801\u4e3a<code>UTF-8</code>\uff0c\u4e5f\u53ef\u4ee5\u4f20\u5165Buffer</li> <li>\u5f97\u5230 hash \u503c <code>hash.digest('hex')</code></li> </ul> </li> <li>Hmac \u7b97\u6cd5\u4e5f\u662f\u4e00\u79cd hash \u7b97\u6cd5, \u4e0d\u540c\u7684\u662f\u9700\u8981\u4e00\u4e2a\u5bc6\u94a5<ul> <li><code>const hmac = crypto.createHmac('sha256', 'secret-key');</code></li> </ul> </li> <li>AES<ul> <li>AES\u662f\u4e00\u79cd\u5e38\u7528\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\uff0c\u52a0\u89e3\u5bc6\u90fd\u7528\u540c\u4e00\u4e2a\u5bc6\u94a5.</li> <li>\u5305\u62ec aes192, aes-128-ecb, aes-256-cbc \u7b49</li> <li><code>const cipher = crypto.createCipher('aes192', key);</code></li> <li><code>const decipher = crypto.createDecipher('aes192', key);</code></li> </ul> </li> <li>Diffie-Hellman<ul> <li>DH\u7b97\u6cd5\u662f\u4e00\u79cd\u5bc6\u94a5\u4ea4\u6362\u534f\u8bae\uff0c\u5b83\u53ef\u4ee5\u8ba9\u53cc\u65b9\u5728\u4e0d\u6cc4\u6f0f\u5bc6\u94a5\u7684\u60c5\u51b5\u4e0b\u534f\u5546\u51fa\u4e00\u4e2a\u5bc6\u94a5\u6765</li> <li><code>crypto.createDiffieHellman</code></li> </ul> </li> <li>RSA<ul> <li>RSA\u7b97\u6cd5\u662f\u4e00\u79cd\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\uff0c\u5373\u7531\u4e00\u4e2a\u79c1\u94a5\u548c\u4e00\u4e2a\u516c\u94a5\u6784\u6210\u7684\u5bc6\u94a5\u5bf9\uff0c\u901a\u8fc7\u79c1\u94a5\u52a0\u5bc6\uff0c\u516c\u94a5\u89e3\u5bc6\uff0c\u6216\u8005\u901a\u8fc7\u516c\u94a5\u52a0\u5bc6\uff0c\u79c1\u94a5\u89e3\u5bc6</li> <li>\u5f53\u5c0f\u660e\u7ed9\u5c0f\u7ea2\u53d1\u9001\u4fe1\u606f\u65f6\uff0c\u53ef\u4ee5\u7528\u5c0f\u660e\u81ea\u5df1\u7684\u79c1\u94a5\u52a0\u5bc6\uff0c\u5c0f\u7ea2\u7528\u5c0f\u660e\u7684\u516c\u94a5\u89e3\u5bc6\uff0c\u4e5f\u53ef\u4ee5\u7528\u5c0f\u7ea2\u7684\u516c\u94a5\u52a0\u5bc6\uff0c\u5c0f\u7ea2\u7528\u5979\u81ea\u5df1\u7684\u79c1\u94a5\u89e3\u5bc6\uff0c\u8fd9\u5c31\u662f\u975e\u5bf9\u79f0\u52a0\u5bc6\u3002\u76f8\u6bd4\u5bf9\u79f0\u52a0\u5bc6\uff0c\u975e\u5bf9\u79f0\u52a0\u5bc6\u53ea\u9700\u8981\u6bcf\u4e2a\u4eba\u5404\u81ea\u6301\u6709\u81ea\u5df1\u7684\u79c1\u94a5\uff0c\u540c\u65f6\u516c\u5f00\u81ea\u5df1\u7684\u516c\u94a5\uff0c\u4e0d\u9700\u8981\u50cfAES\u90a3\u6837\u7531\u4e24\u4e2a\u4eba\u5171\u4eab\u540c\u4e00\u4e2a\u5bc6\u94a5\u3002</li> <li>\u4f7f\u7528\u79c1\u94a5\u52a0\u5bc6 <code>let enc_by_prv = crypto.privateEncrypt(prvKey, Buffer.from(message, 'utf8'));</code> \u8fd4\u56de\u7684\u662f Buffer</li> <li>\u4f7f\u7528\u516c\u94a5\u89e3\u5bc6 <code>let dec_by_pub = crypto.publicDecrypt(pubKey, enc_by_prv);</code></li> <li>RSA\u52a0\u5bc6\u7684\u539f\u59cb\u4fe1\u606f\u5fc5\u987b\u5c0f\u4e8eKey\u7684\u957f\u5ea6\u3002\u90a3\u5982\u4f55\u7528RSA\u52a0\u5bc6\u4e00\u4e2a\u5f88\u957f\u7684\u6d88\u606f\u5462\uff1f\u5b9e\u9645\u4e0a\uff0cRSA\u5e76\u4e0d\u9002\u5408\u52a0\u5bc6\u5927\u6570\u636e\uff0c\u800c\u662f\u5148\u751f\u6210\u4e00\u4e2a\u968f\u673a\u7684AES\u5bc6\u7801\uff0c\u7528AES\u52a0\u5bc6\u539f\u59cb\u4fe1\u606f\uff0c\u7136\u540e\u7528RSA\u52a0\u5bc6AES\u53e3\u4ee4\uff0c\u8fd9\u6837\uff0c\u5b9e\u9645\u4f7f\u7528RSA\u65f6\uff0c\u7ed9\u5bf9\u65b9\u4f20\u7684\u5bc6\u6587\u5206\u4e24\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u662fAES\u52a0\u5bc6\u7684\u5bc6\u6587\uff0c\u53e6\u4e00\u90e8\u5206\u662fRSA\u52a0\u5bc6\u7684AES\u53e3\u4ee4\u3002\u5bf9\u65b9\u7528RSA\u5148\u89e3\u5bc6\u51faAES\u53e3\u4ee4\uff0c\u518d\u7528AES\u89e3\u5bc6\u5bc6\u6587\uff0c\u5373\u53ef\u83b7\u5f97\u660e\u6587\u3002</li> </ul> </li> </ul> <pre><code>/* \u5c01\u88c5 AES \u51fd\u6570\u4fbf\u4e8e\u4f7f\u7528 */\nconst crypto = require('crypto');\n\nfunction aesEncrypt(data, key) {\n    const cipher = crypto.createCipher('aes192', key);\n    var crypted = cipher.update(data, 'utf8', 'hex');\n    crypted += cipher.final('hex');\n    return crypted;\n}\n\nfunction aesDecrypt(encrypted, key) {\n    const decipher = crypto.createDecipher('aes192', key);\n    var decrypted = decipher.update(encrypted, 'hex', 'utf8');\n    decrypted += decipher.final('utf8');\n    return decrypted;\n}\n\nvar data = 'Hello, this is a secret message!';\nvar key = 'Password!';\nvar encrypted = aesEncrypt(data, key);\nvar decrypted = aesDecrypt(encrypted, key);\n\nconsole.log('Plain text: ' + data);\nconsole.log('Encrypted text: ' + encrypted);\nconsole.log('Decrypted text: ' + decrypted);\n</code></pre> <p>\u751f\u6210RSA\u5bc6\u94a5</p> <pre><code># \u751f\u6210\u4e00\u4e2aRSA\u5bc6\u94a5\u5bf9\n# \u9700\u8981\u8f93\u5165\u5bc6\u7801, \u8fd9\u4e2a\u5bc6\u7801\u662f\u7528\u6765\u52a0\u5bc6RSA\u5bc6\u94a5\u7684; \u52a0\u5bc6\u65b9\u5f0f\u6307\u5b9a\u4e3aAES256\uff0c\u751f\u6210\u7684RSA\u7684\u5bc6\u94a5\u957f\u5ea6\u662f2048\u4f4d\nopenssl genrsa -aes256 -out rsa-key.pem 2048\n# \u5bfc\u51fa\u79c1\u94a5\u548c\u516c\u94a5, \u9700\u8981\u8f93\u5165\u4e4b\u524d\u7684\u5bc6\u7801\nopenssl rsa -in rsa-key.pem -outform PEM -out rsa-prv.pem\nopenssl rsa -in rsa-key.pem -outform PEM -pubout -out rsa-pub.pem\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#web","title":"Web \u5f00\u53d1","text":"<ul> <li>\u6700\u65e9\u7684\u8f6f\u4ef6\u90fd\u662f\u8fd0\u884c\u5728\u5927\u578b\u673a\u4e0a\u7684\uff0c\u8f6f\u4ef6\u4f7f\u7528\u8005\u901a\u8fc7\u201c\u54d1\u7ec8\u7aef\u201d\u767b\u9646\u5230\u5927\u578b\u673a\u4e0a\u53bb\u8fd0\u884c\u8f6f\u4ef6\u3002\u540e\u6765\u968f\u7740PC\u673a\u7684\u5174\u8d77\uff0c\u8f6f\u4ef6\u5f00\u59cb\u4e3b\u8981\u8fd0\u884c\u5728\u684c\u9762\u4e0a\uff0c\u800c\u6570\u636e\u5e93\u8fd9\u6837\u7684\u8f6f\u4ef6\u8fd0\u884c\u5728\u670d\u52a1\u5668\u7aef\uff0c\u8fd9\u79cdClient/Server\u6a21\u5f0f\u7b80\u79f0CS\u67b6\u6784\u3002</li> <li>\u968f\u7740\u4e92\u8054\u7f51\u7684\u5174\u8d77\uff0c\u4eba\u4eec\u53d1\u73b0\uff0cCS\u67b6\u6784\u4e0d\u9002\u5408Web\uff0c\u6700\u5927\u7684\u539f\u56e0\u662fWeb\u5e94\u7528\u7a0b\u5e8f\u7684\u4fee\u6539\u548c\u5347\u7ea7\u975e\u5e38\u8fc5\u901f\uff0c\u800cCS\u67b6\u6784\u9700\u8981\u6bcf\u4e2a\u5ba2\u6237\u7aef\u9010\u4e2a\u5347\u7ea7\u684c\u9762App\uff0c\u56e0\u6b64\uff0cBrowser/Server\u6a21\u5f0f\u5f00\u59cb\u6d41\u884c\uff0c\u7b80\u79f0BS\u67b6\u6784\u3002<ul> <li>\u5728BS\u67b6\u6784\u4e0b\uff0c\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u6d4f\u89c8\u5668\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u548c\u6570\u636e\u90fd\u5b58\u50a8\u5728\u670d\u52a1\u5668\u7aef\u3002\u6d4f\u89c8\u5668\u53ea\u9700\u8981\u8bf7\u6c42\u670d\u52a1\u5668\uff0c\u83b7\u53d6Web\u9875\u9762\uff0c\u5e76\u628aWeb\u9875\u9762\u5c55\u793a\u7ed9\u7528\u6237\u5373\u53ef\u3002</li> <li>\u4eca\u5929\uff0c\u9664\u4e86\u91cd\u91cf\u7ea7\u7684\u8f6f\u4ef6\u5982Office\uff0cPhotoshop\u7b49\uff0c\u5927\u90e8\u5206\u8f6f\u4ef6\u90fd\u4ee5Web\u5f62\u5f0f\u63d0\u4f9b\u3002\u6bd4\u5982\uff0c\u65b0\u6d6a\u63d0\u4f9b\u7684\u65b0\u95fb\u3001\u535a\u5ba2\u3001\u5fae\u535a\u7b49\u670d\u52a1\uff0c\u5747\u662fWeb\u5e94\u7528\u3002</li> </ul> </li> <li>Web\u5f00\u53d1\u4e5f\u7ecf\u5386\u4e86\u597d\u51e0\u4e2a\u9636\u6bb5\uff1a<ul> <li>\u00b7CGI\uff1a\u7531\u4e8e\u9759\u6001Web\u9875\u9762\u65e0\u6cd5\u4e0e\u7528\u6237\u4ea4\u4e92\uff0c\u6bd4\u5982\u7528\u6237\u586b\u5199\u4e86\u4e00\u4e2a\u6ce8\u518c\u8868\u5355\uff0c\u9759\u6001Web\u9875\u9762\u5c31\u65e0\u6cd5\u5904\u7406\u3002\u8981\u5904\u7406\u7528\u6237\u53d1\u9001\u7684\u52a8\u6001\u6570\u636e\uff0c\u51fa\u73b0\u4e86Common Gateway Interface\uff0c\u7b80\u79f0CGI\uff0c\u7528C/C++\u7f16\u5199\u3002</li> <li>ASP/JSP/PHP\uff1a\u7531\u4e8eWeb\u5e94\u7528\u7279\u70b9\u662f\u4fee\u6539\u9891\u7e41\uff0c\u7528C/C++\u8fd9\u6837\u7684\u4f4e\u7ea7\u8bed\u8a00\u975e\u5e38\u4e0d\u9002\u5408Web\u5f00\u53d1\uff0c\u800c\u811a\u672c\u8bed\u8a00\u7531\u4e8e\u5f00\u53d1\u6548\u7387\u9ad8\uff0c\u4e0eHTML\u7ed3\u5408\u7d27\u5bc6\uff0c\u56e0\u6b64\uff0c\u8fc5\u901f\u53d6\u4ee3\u4e86CGI\u6a21\u5f0f\u3002ASP\u662f\u5fae\u8f6f\u63a8\u51fa\u7684\u7528VBScript\u811a\u672c\u7f16\u7a0b\u7684Web\u5f00\u53d1\u6280\u672f\uff0c\u800cJSP\u7528Java\u6765\u7f16\u5199\u811a\u672c\uff0cPHP\u672c\u8eab\u5219\u662f\u5f00\u6e90\u7684\u811a\u672c\u8bed\u8a00\u3002</li> <li>MVC\uff1a\u4e3a\u4e86\u89e3\u51b3\u76f4\u63a5\u7528\u811a\u672c\u8bed\u8a00\u5d4c\u5165HTML\u5bfc\u81f4\u7684\u53ef\u7ef4\u62a4\u6027\u5dee\u7684\u95ee\u9898\uff0cWeb\u5e94\u7528\u4e5f\u5f15\u5165\u4e86Model-View-Controller\u7684\u6a21\u5f0f\uff0c\u6765\u7b80\u5316Web\u5f00\u53d1\u3002ASP\u53d1\u5c55\u4e3aASP.Net\uff0cJSP\u548cPHP\u4e5f\u6709\u4e00\u5927\u5806MVC\u6846\u67b6\u3002</li> </ul> </li> <li>\u7531\u4e8eNode.js\u628aJavaScript\u5f15\u5165\u4e86\u670d\u52a1\u5668\u7aef\uff0c\u56e0\u6b64\uff0c\u539f\u6765\u5fc5\u987b\u4f7f\u7528PHP/Java/C#/Python/Ruby\u7b49\u5176\u4ed6\u8bed\u8a00\u6765\u5f00\u53d1\u670d\u52a1\u5668\u7aef\u7a0b\u5e8f\uff0c\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528Node.js\u5f00\u53d1\u4e86\uff01<ul> <li>\u5728Node.js\u8bde\u751f\u540e\u7684\u77ed\u77ed\u51e0\u5e74\u91cc\uff0c\u51fa\u73b0\u4e86\u65e0\u6570\u79cdWeb\u6846\u67b6\u3001ORM\u6846\u67b6\u3001\u6a21\u7248\u5f15\u64ce\u3001\u6d4b\u8bd5\u6846\u67b6\u3001\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177</li> <li>\u5e38\u89c1\u7684Web\u6846\u67b6\u5305\u62ec\uff1aExpress\uff0cSails.js\uff0ckoa\uff0cMeteor\uff0cDerbyJS\uff0cTotal.js\uff0crestify\u2026\u2026</li> <li>ORM \u6846\u67b6\u6bd4Web\u6846\u67b6\u8981\u5c11\u4e00\u4e9b\uff1aSequelize\uff0cORM2\uff0cBookshelf.js\uff0cObjection.js\u2026\u2026</li> <li>\u6a21\u7248\u5f15\u64cePK\uff1aJade\uff0cEJS\uff0cSwig\uff0cNunjucks\uff0cdoT.js\u2026\u2026</li> <li>\u6d4b\u8bd5\u6846\u67b6\u5305\u62ec\uff1aMocha\uff0cExpresso\uff0cUnit.js\uff0cKarma\u2026\u2026</li> <li>\u6784\u5efa\u5de5\u5177\u6709\uff1aGrunt\uff0cGulp\uff0cWebpack\u2026\u2026</li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#koa","title":"koa","text":"<ul> <li>koa\u662fExpress\u7684\u4e0b\u4e00\u4ee3\u57fa\u4e8eNode.js\u7684web\u6846\u67b6</li> <li>\u5386\u53f2<ul> <li>Express\u662f\u7b2c\u4e00\u4ee3\u6700\u6d41\u884c\u7684web\u6846\u67b6\uff0c\u5b83\u5bf9Node.js\u7684http\u8fdb\u884c\u4e86\u5c01\u88c5<ul> <li>\u867d\u7136Express\u7684API\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5b83\u662f\u57fa\u4e8eES5\u7684\u8bed\u6cd5\uff0c\u8981\u5b9e\u73b0\u5f02\u6b65\u4ee3\u7801\uff0c\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff1a\u56de\u8c03\u3002\u5982\u679c\u5f02\u6b65\u5d4c\u5957\u5c42\u6b21\u8fc7\u591a\uff0c\u4ee3\u7801\u5199\u8d77\u6765\u5c31\u975e\u5e38\u96be\u770b</li> </ul> </li> <li>koa 1.0<ul> <li>\u968f\u7740\u65b0\u7248Node.js\u5f00\u59cb\u652f\u6301ES6\uff0cExpress\u7684\u56e2\u961f\u53c8\u57fa\u4e8eES6\u7684generator\u91cd\u65b0\u7f16\u5199\u4e86\u4e0b\u4e00\u4ee3web\u6846\u67b6koa\u3002\u548cExpress\u76f8\u6bd4\uff0ckoa 1.0\u4f7f\u7528generator\u5b9e\u73b0\u5f02\u6b65\uff0c\u4ee3\u7801\u770b\u8d77\u6765\u50cf\u540c\u6b65\u7684</li> <li>\u7528generator\u5b9e\u73b0\u5f02\u6b65\u6bd4\u56de\u8c03\u7b80\u5355\u4e86\u4e0d\u5c11\uff0c\u4f46\u662fgenerator\u7684\u672c\u610f\u5e76\u4e0d\u662f\u5f02\u6b65\u3002Promise\u624d\u662f\u4e3a\u5f02\u6b65\u8bbe\u8ba1\u7684\uff0c\u4f46\u662fPromise\u7684\u5199\u6cd5\u2026\u2026\u60f3\u60f3\u5c31\u590d\u6742\u3002\u4e3a\u4e86\u7b80\u5316\u5f02\u6b65\u4ee3\u7801\uff0cES7\uff08\u76ee\u524d\u662f\u8349\u6848\uff0c\u8fd8\u6ca1\u6709\u53d1\u5e03\uff09\u5f15\u5165\u4e86\u65b0\u7684\u5173\u952e\u5b57<code>async</code>\u548c<code>await</code>\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u628a\u4e00\u4e2afunction\u53d8\u4e3a\u5f02\u6b65\u6a21\u5f0f</li> </ul> </li> <li>koa2<ul> <li>koa\u56e2\u961f\u5e76\u6ca1\u6709\u6b62\u6b65\u4e8ekoa 1.0\uff0c\u4ed6\u4eec\u975e\u5e38\u8d85\u524d\u5730\u57fa\u4e8eES7\u5f00\u53d1\u4e86koa2\uff0c\u548ckoa 1\u76f8\u6bd4\uff0ckoa2\u5b8c\u5168\u4f7f\u7528Promise\u5e76\u914d\u5408<code>async</code>\u6765\u5b9e\u73b0\u5f02\u6b65\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#_7","title":"\u5165\u95e8","text":"<p>\u5982\u4f55\u5b89\u88c5 koa \u5305?</p> <ul> <li>\u65b9\u6cd5\u4e00\uff1a\u53ef\u4ee5\u7528npm\u547d\u4ee4\u76f4\u63a5\u5b89\u88c5koa\u3002 <code>npm install koa@2.0.0</code></li> <li>\u65b9\u6cd5\u4e8c\uff1a\u5728<code>hello-koa</code>\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a<code>package.json</code>\uff0c\u8fd9\u4e2a\u6587\u4ef6\u63cf\u8ff0\u4e86\u6211\u4eec\u7684<code>hello-koa</code>\u5de5\u7a0b\u4f1a\u7528\u5230\u54ea\u4e9b\u5305\u3002<ul> <li>\u6700\u91cd\u8981\u7684\u662f\u5728 <code>dependencies</code> \u4e2d\u6307\u5b9a <code>\"koa\": \"2.0.0\"</code></li> <li><code>npm install</code></li> </ul> </li> </ul> <p>\u5982\u4f55\u8fd0\u884c?</p> <ul> <li>\u70b9\u51fb VSCode \u4e0a\u7684\u8fd0\u884c\u6309\u94ae (\u53ef\u4ee5\u770b\u5230\u8c03\u7528\u4e86 node \u547d\u4ee4)</li> <li>\u76f4\u63a5\u7528\u547d\u4ee4 <code>node app.js</code> \u5728\u547d\u4ee4\u884c\u542f\u52a8\u7a0b\u5e8f</li> <li>\u6216\u8005\u7528<code>npm start</code>\u542f\u52a8\u3002<code>npm start</code> \u547d\u4ee4\u4f1a\u8ba9npm\u6267\u884c\u5b9a\u4e49\u5728 <code>package.json</code> \u6587\u4ef6\u4e2d\u7684start\u5bf9\u5e94\u547d\u4ee4.<ul> <li>\u5728 <code>scripts</code> \u4e2d\u6307\u5b9a <code>\"start\": \"node --use_strict app.js\"</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#koa-middleware","title":"koa middleware","text":"<ul> <li>\u6838\u5fc3\u4ee3\u7801<ul> <li><code>app.use(async (ctx, next) =&gt; {}</code></li> <li>\u6bcf\u6536\u5230\u4e00\u4e2ahttp\u8bf7\u6c42\uff0ckoa\u5c31\u4f1a\u8c03\u7528\u901a\u8fc7<code>app.use()</code>\u6ce8\u518c\u7684async\u51fd\u6570\uff0c\u5e76\u4f20\u5165<code>ctx</code>\u548c<code>next</code>\u53c2\u6570\u3002<ul> <li>\u53c2\u6570<code>ctx</code>\u662f\u7531koa\u4f20\u5165\u7684\u5c01\u88c5\u4e86request\u548cresponse\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b83\u8bbf\u95eerequest\u548cresponse\uff0c<code>next</code>\u662fkoa\u4f20\u5165\u7684\u5c06\u8981\u5904\u7406\u7684\u4e0b\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\u3002</li> <li>\u7531<code>async</code>\u6807\u8bb0\u7684\u51fd\u6570\u79f0\u4e3a\u5f02\u6b65\u51fd\u6570\uff0c\u5728\u5f02\u6b65\u51fd\u6570\u4e2d\uff0c\u53ef\u4ee5\u7528<code>await</code>\u8c03\u7528\u53e6\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\uff0c\u8fd9\u4e24\u4e2a\u5173\u952e\u5b57\u5c06\u5728ES7\u4e2d\u5f15\u5165\u3002</li> </ul> </li> <li>koa\u628a\u5f88\u591aasync\u51fd\u6570\u7ec4\u6210\u4e00\u4e2a\u5904\u7406\u94fe\uff0c\u6bcf\u4e2aasync\u51fd\u6570\u90fd\u53ef\u4ee5\u505a\u4e00\u4e9b\u81ea\u5df1\u7684\u4e8b\u60c5\uff0c\u7136\u540e\u7528<code>await next()</code>\u6765\u8c03\u7528\u4e0b\u4e00\u4e2aasync\u51fd\u6570\u3002\u6211\u4eec\u628a\u6bcf\u4e2aasync\u51fd\u6570\u79f0\u4e3amiddleware\uff0c\u8fd9\u4e9bmiddleware\u53ef\u4ee5\u7ec4\u5408\u8d77\u6765\uff0c\u5b8c\u6210\u5f88\u591a\u6709\u7528\u7684\u529f\u80fd\u3002</li> </ul> </li> </ul> <pre><code>/* app.js */\n// \u5bfc\u5165koa\uff0c\u548ckoa 1.x\u4e0d\u540c\uff0c\u5728koa2\u4e2d\uff0c\u6211\u4eec\u5bfc\u5165\u7684\u662f\u4e00\u4e2aclass\uff0c\u56e0\u6b64\u7528\u5927\u5199\u7684Koa\u8868\u793a:\nconst Koa = require('koa');\n\n// \u521b\u5efa\u4e00\u4e2aKoa\u5bf9\u8c61\u8868\u793aweb app\u672c\u8eab:\nconst app = new Koa();\n\n// \u5bf9\u4e8e\u4efb\u4f55\u8bf7\u6c42\uff0capp\u5c06\u8c03\u7528\u8be5\u5f02\u6b65\u51fd\u6570\u5904\u7406\u8bf7\u6c42\uff1a\napp.use(async (ctx, next) =&gt; {\n    await next();\n    ctx.response.type = 'text/html';\n    ctx.response.body = '&lt;h1&gt;Hello, koa2!&lt;/h1&gt;';\n});\n\n// \u5728\u7aef\u53e33000\u76d1\u542c:\napp.listen(3000);\nconsole.log('app started at port 3000...');\n</code></pre> <p>\u5904\u7406\u94fe\u793a\u4f8b\u5982\u4e0b (\u89c2\u5bdf next \u51fd\u6570\u7684\u4f4d\u7f6e)</p> <pre><code>// \u53ef\u4ee5\u7528\u4ee5\u4e0b3\u4e2amiddleware\u7ec4\u6210\u5904\u7406\u94fe\uff0c\u4f9d\u6b21\u6253\u5370\u65e5\u5fd7\uff0c\u8bb0\u5f55\u5904\u7406\u65f6\u95f4\uff0c\u8f93\u51faHTML\napp.use(async (ctx, next) =&gt; {\n    console.log(`${ctx.request.method} ${ctx.request.url}`); // \u6253\u5370URL\n    await next(); // \u8c03\u7528\u4e0b\u4e00\u4e2amiddleware\n});\n\napp.use(async (ctx, next) =&gt; {\n    const start = new Date().getTime(); // \u5f53\u524d\u65f6\u95f4\n    await next(); // \u8c03\u7528\u4e0b\u4e00\u4e2amiddleware\n    const ms = new Date().getTime() - start; // \u8017\u8d39\u65f6\u95f4\n    console.log(`Time: ${ms}ms`); // \u6253\u5370\u8017\u8d39\u65f6\u95f4\n});\n\napp.use(async (ctx, next) =&gt; {\n    await next();\n    ctx.response.type = 'text/html';\n    ctx.response.body = '&lt;h1&gt;Hello, koa2!&lt;/h1&gt;';\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#url","title":"\u5904\u7406URL","text":"<ul> <li><code>koa-router</code><ul> <li>\u4e3a\u4e86\u5904\u7406URL\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165<code>koa-router</code>\u8fd9\u4e2amiddleware\uff0c\u8ba9\u5b83\u8d1f\u8d23\u5904\u7406URL\u6620\u5c04</li> <li>\u6ce8\u610f, \u5bfc\u5165\u7684\u662f\u4e00\u4e2a\u51fd\u6570 <code>const router = require('koa-router')();</code></li> </ul> </li> <li>get<ul> <li>\u4f7f\u7528<code>router.get('/path', async fn)</code>\u6765\u6ce8\u518c\u4e00\u4e2aGET\u8bf7\u6c42\u3002</li> <li>\u53ef\u4ee5\u5728\u8bf7\u6c42\u8def\u5f84\u4e2d\u4f7f\u7528\u5e26\u53d8\u91cf\u7684<code>/hello/:name</code>\uff0c\u53d8\u91cf\u53ef\u4ee5\u901a\u8fc7<code>ctx.params.name</code>\u8bbf\u95ee\u3002</li> </ul> </li> <li><code>koa-bodyparser</code><ul> <li>post\u8bf7\u6c42\u901a\u5e38\u4f1a\u53d1\u9001\u4e00\u4e2a\u8868\u5355\uff0c\u6216\u8005JSON\uff0c\u5b83\u4f5c\u4e3arequest\u7684body\u53d1\u9001\uff0c\u4f46\u65e0\u8bba\u662fNode.js\u63d0\u4f9b\u7684\u539f\u59cbrequest\u5bf9\u8c61\uff0c\u8fd8\u662fkoa\u63d0\u4f9b\u7684request\u5bf9\u8c61\uff0c\u90fd \u4e0d\u63d0\u4f9b \u89e3\u6790request\u7684body\u7684\u529f\u80fd\uff01</li> <li>\u56e0\u6b64, \u9700\u8981\u53e6\u4e00\u4e2a middleware <code>koa-bodyparser</code>. \u7528\u5b83\u89e3\u6790\u53c2\u6570\uff0c\u7136\u540e\u628a\u89e3\u6790\u540e\u7684\u53c2\u6570\uff0c\u7ed1\u5b9a\u5230<code>ctx.request.body</code>\u4e2d</li> <li>\u9700\u8981\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u52a0\u4e0a <code>app.use(bodyParser());</code></li> </ul> </li> <li>post<ul> <li><code>router.post('/path', async fn)</code></li> <li>\u7136\u540e\u53ef\u4ee5\u7528 <code>ctx.request.body</code> \u5f97\u5230\u89e3\u6790\u597d\u7684 request\u7684body</li> </ul> </li> <li>\u7c7b\u4f3c\u7684\uff0cput\u3001delete\u3001head\u8bf7\u6c42\u4e5f\u53ef\u4ee5\u7531router\u5904\u7406\u3002</li> </ul> <pre><code>const Koa = require('koa');\n\n// \u6ce8\u610frequire('koa-router')\u8fd4\u56de\u7684\u662f\u51fd\u6570:\nconst router = require('koa-router')();\n\nconst app = new Koa();\n\n// log request URL:\napp.use(async (ctx, next) =&gt; {\n    console.log(`Process ${ctx.request.method} ${ctx.request.url}...`);\n    await next();\n});\n\n// add url-route:\nrouter.get('/hello/:name', async (ctx, next) =&gt; {\n    var name = ctx.params.name;\n    ctx.response.body = `&lt;h1&gt;Hello, ${name}!&lt;/h1&gt;`;\n});\n\nrouter.get('/', async (ctx, next) =&gt; {\n    ctx.response.body = '&lt;h1&gt;Index&lt;/h1&gt;';\n});\n\n// add router middleware:\napp.use(router.routes());\n\napp.listen(3000);\nconsole.log('app started at port 3000...');\n</code></pre> <pre><code>// \u8fd9\u6837\u624d\u80fd\u89e3\u6790\u5230 ctx.request.body !\napp.use(bodyParser());\n/* \u5199\u4e00\u4e2a\u7b80\u5355\u7684\u767b\u5f55\u8868\u5355 */\nrouter.get('/', async (ctx, next) =&gt; {\n    ctx.response.body = `&lt;h1&gt;Index&lt;/h1&gt;\n        &lt;form action=\"/signin\" method=\"post\"&gt;\n            &lt;p&gt;Name: &lt;input name=\"name\" value=\"koa\"&gt;&lt;/p&gt;\n            &lt;p&gt;Password: &lt;input name=\"password\" type=\"password\"&gt;&lt;/p&gt;\n            &lt;p&gt;&lt;input type=\"submit\" value=\"Submit\"&gt;&lt;/p&gt;\n        &lt;/form&gt;`;\n});\n\nrouter.post('/signin', async (ctx, next) =&gt; {\n    var\n        name = ctx.request.body.name || '',\n        password = ctx.request.body.password || '';\n    console.log(`signin with name: ${name}, password: ${password}`);\n    if (name === 'koa' &amp;&amp; password === '12345') {\n        ctx.response.body = `&lt;h1&gt;Welcome, ${name}!&lt;/h1&gt;`;\n    } else {\n        ctx.response.body = `&lt;h1&gt;Login failed!&lt;/h1&gt;\n        &lt;p&gt;&lt;a href=\"/\"&gt;Try again&lt;/a&gt;&lt;/p&gt;`;\n    }\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#controller-middleware","title":"Controller Middleware","text":"<ul> <li>\u5bf9\u4e8e\u4e0d\u540c URL \u7684\u54cd\u5e94, \u5e94\u8be5\u4ece <code>app.js</code> \u4e2d\u5206\u79bb\u51fa\u6765, \u4e5f\u5373 Controller Middleware</li> <li>\u56e0\u6b64, \u5bf9\u4e8e\u4ee3\u7801\u91cd\u6784<ul> <li>\u5c06\u5904\u7406 URL \u7684\u4ee3\u7801 (\u5904\u7406\u51fd\u6570) \u90fd\u653e\u5728\u4e00\u4e2a <code>controllers</code> \u6587\u4ef6\u5939\u4e2d</li> <li>\u7528\u4e13\u95e8\u7684\u4e00\u4e2a <code>controller.js</code>, \u626b\u63cf<code>controllers</code>\u76ee\u5f55\u548c\u521b\u5efa<code>router</code>, \u4f5c\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684 middleware \u4f7f\u7528</li> <li>\u8fd9\u6837, <code>app.js</code>\u7684\u4ee3\u7801\u5f97\u4ee5\u7b80\u5316.</li> </ul> </li> <li>\u7ecf\u8fc7\u91cd\u65b0\u6574\u7406\u540e\u7684\u5de5\u7a0b <code>url2-koa</code> \u76ee\u524d\u5177\u5907\u975e\u5e38\u597d\u7684\u6a21\u5757\u5316\uff0c\u6240\u6709\u5904\u7406URL\u7684\u51fd\u6570\u6309\u529f\u80fd\u7ec4\u5b58\u653e\u5728<code>controllers</code>\u76ee\u5f55\uff0c\u4eca\u540e\u6211\u4eec\u4e5f\u53ea\u9700\u8981\u4e0d\u65ad\u5f80\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u52a0\u4e1c\u897f\u5c31\u53ef\u4ee5\u4e86\uff0c<code>app.js</code>\u4fdd\u6301\u4e0d\u53d8\u3002</li> </ul>"},{"location":"code/JavaScript/node-js-note/#nunjucks","title":"Nunjucks","text":"<ul> <li>\u6a21\u677f\u5f15\u64ce<ul> <li>\u6a21\u677f\u5f15\u64ce\u5c31\u662f\u57fa\u4e8e\u6a21\u677f\u914d\u5408\u6570\u636e\u6784\u9020\u51fa\u5b57\u7b26\u4e32\u8f93\u51fa\u7684\u4e00\u4e2a\u7ec4\u4ef6\u3002</li> </ul> </li> <li>\u8f93\u51faHTML\u6709\u51e0\u4e2a\u7279\u522b\u91cd\u8981\u7684\u95ee\u9898\u9700\u8981\u8003\u8651\uff1a<ul> <li>\u8f6c\u4e49<ul> <li>\u5bf9\u7279\u6b8a\u5b57\u7b26\u8981\u8f6c\u4e49\uff0c\u907f\u514d\u53d7\u5230XSS\u653b\u51fb\u3002\u6bd4\u5982\uff0c\u5982\u679c\u53d8\u91cf<code>name</code>\u7684\u503c\u4e0d\u662f<code>\u5c0f\u660e</code>\uff0c\u800c\u662f<code>\u5c0f\u660e&lt;script&gt;...&lt;/script&gt;</code>\uff0c\u6a21\u677f\u5f15\u64ce\u8f93\u51fa\u7684HTML\u5230\u4e86\u6d4f\u89c8\u5668\uff0c\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u6076\u610fJavaScript\u4ee3\u7801\u3002</li> </ul> </li> <li>\u683c\u5f0f\u5316<ul> <li>\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u53d8\u91cf\u8981\u683c\u5f0f\u5316\uff0c\u6bd4\u5982\uff0c\u8d27\u5e01\u9700\u8981\u53d8\u6210<code>12,345.00</code>\u8fd9\u6837\u7684\u683c\u5f0f\uff0c\u65e5\u671f\u9700\u8981\u53d8\u6210<code>2016-01-01</code>\u8fd9\u6837\u7684\u683c\u5f0f\u3002</li> </ul> </li> <li>\u7b80\u5355\u903b\u8f91<ul> <li>\u6a21\u677f\u8fd8\u9700\u8981\u80fd\u6267\u884c\u4e00\u4e9b\u7b80\u5355\u903b\u8f91\uff0c\u6bd4\u5982\uff0c\u8981\u6309\u6761\u4ef6\u8f93\u51fa\u5185\u5bb9</li> </ul> </li> </ul> </li> <li>Nunjucks<ul> <li>\u6211\u4eec\u9009\u62e9Nunjucks\u4f5c\u4e3a\u6a21\u677f\u5f15\u64ce\u3002Nunjucks\u662f Mozilla \u5f00\u53d1\u7684\u4e00\u4e2a\u7eafJavaScript\u7f16\u5199\u7684\u6a21\u677f\u5f15\u64ce\uff0c\u65e2\u53ef\u4ee5\u7528\u5728Node\u73af\u5883\u4e0b\uff0c\u53c8\u53ef\u4ee5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u7aef\u3002\u4f46\u662f\uff0c\u4e3b\u8981\u8fd8\u662f\u8fd0\u884c\u5728Node\u73af\u5883\u4e0b\uff0c\u56e0\u4e3a\u6d4f\u89c8\u5668\u7aef\u6709\u66f4\u597d\u7684\u6a21\u677f\u89e3\u51b3\u65b9\u6848\uff0c\u4f8b\u5982MVVM\u6846\u67b6\u3002</li> <li>\u5c31\u662f\u7528 js \u91cd\u65b0\u5b9e\u73b0\u4e86 Python\u7684\u6a21\u677f\u5f15\u64cejinja2</li> </ul> </li> </ul> <p>\u5982\u4f55\u4f7f\u7528\u6a21\u677f\u5f15\u64ce?</p> <ul> <li>\u521b\u5efa\u5f15\u64ce\u5bf9\u8c61<ul> <li><code>function render(view, model) {}</code></li> <li><code>view</code>\u662f\u6a21\u677f\u7684\u540d\u79f0\uff08\u53c8\u79f0\u4e3a\u89c6\u56fe\uff09\uff0c\u56e0\u4e3a\u53ef\u80fd\u5b58\u5728\u591a\u4e2a\u6a21\u677f\uff0c\u9700\u8981\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u3002<code>model</code>\u5c31\u662f\u6570\u636e\uff0c\u5728JavaScript\u4e2d\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684Object\u3002<code>render</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c31\u662f\u6a21\u677f\u7684\u8f93\u51fa\u3002</li> <li>\u521b\u5efa<code>env</code>\u9700\u8981\u7684\u53c2\u6570\u53ef\u4ee5\u67e5\u770b\u6587\u6863\u83b7\u77e5\u3002</li> <li>\u4e0b\u4f8b\u4e2d, \u6211\u4eec\u7528<code>opts.noCache || false</code>\u8fd9\u6837\u7684\u4ee3\u7801\u7ed9\u6bcf\u4e2a\u53c2\u6570\u52a0\u4e0a\u9ed8\u8ba4\u503c\uff0c\u6700\u540e\u4f7f\u7528<code>new nunjucks.FileSystemLoader('views')</code>\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u52a0\u8f7d\u5668\uff0c\u4ece<code>views</code>\u76ee\u5f55\u8bfb\u53d6\u6a21\u677f\u3002</li> </ul> </li> </ul> <pre><code>const nunjucks = require('nunjucks');\n\nfunction createEnv(path, opts) {\n    var\n        autoescape = opts.autoescape === undefined ? true : opts.autoescape,\n        noCache = opts.noCache || false,\n        watch = opts.watch || false,\n        throwOnUndefined = opts.throwOnUndefined || false,\n        env = new nunjucks.Environment(\n            new nunjucks.FileSystemLoader('views', {\n                noCache: noCache,\n                watch: watch,\n            }), {\n                autoescape: autoescape,\n                throwOnUndefined: throwOnUndefined\n            });\n    if (opts.filters) {\n        for (var f in opts.filters) {\n            env.addFilter(f, opts.filters[f]);\n        }\n    }\n    return env;\n}\n\nvar env = createEnv('views', {\n    watch: true,\n    filters: {\n        hex: function (n) {\n            return '0x' + n.toString(16);\n        }\n    }\n});\n</code></pre> <ul> <li>\u4f7f\u7528\u5c31\u975e\u5e38\u7b80\u5355<ul> <li>\u4f8b\u5982, \u5199\u4e00\u4e2a\u7b80\u5355\u7684 html \u6587\u4ef6, \u5185\u5bb9\u4e3a <code>&lt;h1&gt;Hello {{ name }}&lt;/h1&gt;</code></li> <li>\u6545\u610f\u4f20\u5165\u4e00\u4e2a\u5305\u542b\u7279\u6b8a\u7b26\u53f7\u7684\u5bf9\u8c61: <code>var s = env.render('hello.html', { name: '&lt;script&gt;alert(\"\u5c0f\u660e\")&lt;/script&gt;' });</code></li> <li>\u53ef\u4ee5\u770b\u5230\u4f1a\u5bf9\u4e8e\u7279\u6b8a\u5b57\u7b26\u8fdb\u884c\u8f6c\u79fb, \u8fd9\u6837\u5c31\u907f\u514d\u4e86\u8f93\u51fa\u6076\u610f\u811a\u672c</li> </ul> </li> <li>\u529f\u80fd<ul> <li>\u6761\u4ef6\u5224\u65ad\u3001\u5faa\u73af</li> <li>\u7ee7\u627f<ul> <li>Nunjucks\u6a21\u677f\u5f15\u64ce\u6700\u5f3a\u5927\u7684\u529f\u80fd\u5728\u4e8e\u6a21\u677f\u7684\u7ee7\u627f\u3002\u4ed4\u7ec6\u89c2\u5bdf\u5404\u79cd\u7f51\u7ad9\u53ef\u4ee5\u53d1\u73b0\uff0c\u7f51\u7ad9\u7684\u7ed3\u6784\u5b9e\u9645\u4e0a\u662f\u7c7b\u4f3c\u7684\uff0c\u5934\u90e8\u3001\u5c3e\u90e8\u90fd\u662f\u56fa\u5b9a\u683c\u5f0f\uff0c\u53ea\u6709\u4e2d\u95f4\u9875\u9762\u90e8\u5206\u5185\u5bb9\u4e0d\u540c\u3002\u5982\u679c\u6bcf\u4e2a\u6a21\u677f\u90fd\u91cd\u590d\u5934\u5c3e\uff0c\u4e00\u65e6\u8981\u4fee\u6539\u5934\u90e8\u6216\u5c3e\u90e8\uff0c\u90a3\u5c31\u9700\u8981\u6539\u52a8\u6240\u6709\u6a21\u677f\u3002</li> </ul> </li> </ul> </li> </ul> <pre><code>&lt;!-- \u5faa\u73af\u8f93\u51fa\u540d\u5b57 --&gt;\n&lt;body&gt;\n    &lt;h3&gt;Fruits List&lt;/h3&gt;\n    {% for f in fruits %}\n    &lt;p&gt;{{ f }}&lt;/p&gt;\n    {% endfor %}\n&lt;/body&gt;\n\n&lt;!-- base.html --&gt;\n&lt;html&gt;&lt;body&gt;\n{% block header %} &lt;h3&gt;Unnamed&lt;/h3&gt; {% endblock %}\n{% block body %} &lt;div&gt;No body&lt;/div&gt; {% endblock %}\n{% block footer %} &lt;div&gt;copyright&lt;/div&gt; {% endblock %}\n&lt;/body&gt;\n\n&lt;!-- extend.html --&gt;\n{% extends 'base.html' %}\n{% block header %}&lt;h1&gt;{{ header }}&lt;/h1&gt;{% endblock %}\n{% block body %}&lt;p&gt;{{ body }}&lt;/p&gt;{% endblock %}\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#mvc","title":"\u4f7f\u7528MVC","text":"<ul> <li>MVC\uff1aModel-View-Controller\uff0c\u4e2d\u6587\u540d\u201c\u6a21\u578b-\u89c6\u56fe-\u63a7\u5236\u5668\u201d\u3002<ul> <li>\u5f02\u6b65\u51fd\u6570\u662fC\uff1aController\uff0cController\u8d1f\u8d23\u4e1a\u52a1\u903b\u8f91\uff0c\u6bd4\u5982\u68c0\u67e5\u7528\u6237\u540d\u662f\u5426\u5b58\u5728\uff0c\u53d6\u51fa\u7528\u6237\u4fe1\u606f\u7b49\u7b49\uff1b</li> <li>\u5305\u542b\u53d8\u91cf<code>{{ name }}</code>\u7684\u6a21\u677f\u5c31\u662fV\uff1aView\uff0cView\u8d1f\u8d23\u663e\u793a\u903b\u8f91\uff0c\u901a\u8fc7\u7b80\u5355\u5730\u66ff\u6362\u4e00\u4e9b\u53d8\u91cf\uff0cView\u6700\u7ec8\u8f93\u51fa\u7684\u5c31\u662f\u7528\u6237\u770b\u5230\u7684HTML\u3002</li> <li>Model\u662f\u7528\u6765\u4f20\u7ed9View\u7684\uff0c\u8fd9\u6837View\u5728\u66ff\u6362\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u4eceModel\u4e2d\u53d6\u51fa\u76f8\u5e94\u7684\u6570\u636e\u3002</li> </ul> </li> </ul> <p>\u5177\u4f53\u800c\u8a00</p> <ul> <li>router \u903b\u8f91<ul> <li>\u5728 <code>controller</code> \u6587\u4ef6\u5939\u4e2d, \u5b9e\u73b0 <code>async (ctx, next) =&gt; {}</code> \u8fd9\u4e9b\u5f02\u6b65\u51fd\u6570, \u4ea4\u7ed9 koa \u8fdb\u884c\u5904\u7406</li> <li>\u8fd9\u91cc\u76f4\u63a5\u5199\u4e86 <code>ctx.render('index.html', {})</code>, \u5176\u4e2d\u7684 render \u662f\u6211\u4eec\u5b9a\u4e49\u5728 ctx \u4e0a\u7684\u51fd\u6570, \u7528 nonjucks \u6e32\u67d3\u6a21\u677f</li> </ul> </li> <li>\u7f16\u5199 view<ul> <li>\u5199\u4e00\u4e2a base.html \u4f5c\u4e3a\u9aa8\u67b6, \u5176\u4ed6\u6a21\u677f\u76f4\u63a5\u7ee7\u627f\u5373\u53ef</li> </ul> </li> <li>\u96c6\u6210 Nunjucks<ul> <li>\u96c6\u6210Nunjucks\u5b9e\u9645\u4e0a\u4e5f\u662f\u7f16\u5199\u4e00\u4e2amiddleware\uff0c\u8fd9\u4e2amiddleware\u7684\u4f5c\u7528\u662f\u7ed9<code>ctx</code>\u5bf9\u8c61\u7ed1\u5b9a\u4e00\u4e2a<code>render(view, model)</code>\u7684\u65b9\u6cd5\uff0c\u8fd9\u6837\uff0c\u540e\u9762\u7684Controller\u5c31\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u6e32\u67d3\u6a21\u677f\u4e86\u3002</li> </ul> </li> <li>\u7f16\u5199 middleware<ul> <li>\u7b2c\u4e00\u4e2amiddleware\u662f\u8bb0\u5f55URL\u4ee5\u53ca\u9875\u9762\u6267\u884c\u65f6\u95f4</li> <li>\u7b2c\u4e8c\u4e2amiddleware\u5904\u7406\u9759\u6001\u6587\u4ef6<ul> <li>\u5982\u679c\u662f\u9759\u6001\u6587\u4ef6, \u8fd4\u56de\u5373\u53ef!</li> <li>\u5982\u679c\u4e0d\u662f, <code>next()</code></li> </ul> </li> <li>\u7b2c\u4e09\u4e2amiddleware\u89e3\u6790POST\u8bf7\u6c42</li> <li>\u7b2c\u56db\u4e2amiddleware\u8d1f\u8d23\u7ed9<code>ctx</code>\u52a0\u4e0a<code>render()</code>\u6765\u4f7f\u7528Nunjucks<ul> <li>\u6ce8\u610f, \u8fd9\u91cc\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8bf7\u6c42, \u90fd\u9700\u8981\u52a0\u4e0a render \u65b9\u6cd5, \u7136\u540e\u8c03\u7528 <code>next()</code> (\u5728\u4e0b\u9762\u7684\u8def\u6709\u4e2d\u51b3\u5b9a\u6e32\u67d3\u54ea\u4e00\u4e2a\u6a21\u677f)</li> </ul> </li> <li>\u6700\u540e\u4e00\u4e2amiddleware\u5904\u7406URL\u8def\u7531</li> </ul> </li> <li>\u5f00\u53d1/\u751f\u4ea7\u73af\u5883<ul> <li>\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u5e38\u91cf <code>isProduction</code> \u6839\u636e\u73af\u5883\u53d8\u91cf <code>process.env.NODE_ENV</code> \u5224\u65ad\u662f\u5426\u4e3a\u5f00\u53d1\u73af\u5883</li> <li>\u5f00\u53d1:<ul> <li>Nonjucks: \u5f00\u53d1\u73af\u5883\u4e0b\uff0c\u5173\u95ed\u7f13\u5b58\u540e\uff0c\u6211\u4eec\u4fee\u6539View\uff0c\u53ef\u4ee5\u76f4\u63a5\u5237\u65b0\u6d4f\u89c8\u5668\u770b\u5230\u6548\u679c\uff0c\u5426\u5219\uff0c\u6bcf\u6b21\u4fee\u6539\u90fd\u5fc5\u987b\u91cd\u542fNode\u7a0b\u5e8f\uff0c\u4f1a\u6781\u5927\u5730\u964d\u4f4e\u5f00\u53d1\u6548\u7387</li> <li>\u5f00\u53d1\u73af\u5883\u4e0b, \u6211\u4eec\u7528 koa \u5904\u7406\u9759\u6001\u6587\u4ef6, \u800c\u751f\u4ea7\u7aef\u76f4\u63a5\u4ea4\u7ed9 Nginx \u5904\u7406</li> </ul> </li> </ul> </li> <li>\u6280\u5de7: \u62d3\u5c55<ul> <li>\u6ce8\u610f\u5230<code>ctx.render</code>\u5185\u90e8\u6e32\u67d3\u6a21\u677f\u65f6\uff0cModel\u5bf9\u8c61\u5e76\u4e0d\u662f\u4f20\u5165\u7684model\u53d8\u91cf\uff0c\u800c\u662f <code>ctx.response.body = env.render(view, Object.assign({}, ctx.state || {}, model || {}));</code></li> <li>\u9996\u5148\uff0c<code>model || {}</code>\u786e\u4fdd\u4e86\u5373\u4f7f\u4f20\u5165<code>undefined</code>\uff0cmodel\u4e5f\u4f1a\u53d8\u4e3a\u9ed8\u8ba4\u503c<code>{}</code></li> <li><code>ctx.state || {}</code> \u76ee\u7684\u662f\u4e3a\u4e86\u80fd\u628a\u4e00\u4e9b\u516c\u5171\u7684\u53d8\u91cf\u653e\u5165<code>ctx.state</code>\u5e76\u4f20\u7ed9View<ul> <li>\u4f8b\u5982\uff0c\u67d0\u4e2amiddleware\u8d1f\u8d23\u68c0\u67e5\u7528\u6237\u6743\u9650\uff0c\u5b83\u53ef\u4ee5\u628a\u5f53\u524d\u7528\u6237\u653e\u5165<code>ctx.state</code>\u4e2d</li> <li>\u8fd9\u6837\u5c31\u6ca1\u6709\u5fc5\u8981\u5728\u6bcf\u4e2aController\u7684async\u51fd\u6570\u4e2d\u90fd\u628auser\u53d8\u91cf\u653e\u5165model\u4e2d</li> </ul> </li> <li>\u4f7f\u7528 <code>Object.assign()</code> \u5c06\u9664\u4e86\u7b2c\u4e00\u4e2a\u53c2\u6570\u610f\u5916\u7684\u5bf9\u8c61\u5c5e\u6027\u90fd\u590d\u5236\u5230\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e2d</li> </ul> </li> </ul> <p>\u5efa\u8bae\u76f4\u63a5\u770b\u4ee3\u7801, \u6ce8\u610f koa \u6dfb\u52a0 run \u51fd\u6570\u7684\u6267\u884c\u903b\u8f91.</p>"},{"location":"code/JavaScript/node-js-note/#mysql","title":"mysql","text":"<ul> <li>\u5f00\u6e90\u6570\u636e\u5e93<ul> <li>MySQL\uff0c\u5927\u5bb6\u90fd\u5728\u7528\uff0c\u4e00\u822c\u9519\u4e0d\u4e86\uff1b</li> <li>PostgreSQL\uff0c\u5b66\u672f\u6c14\u606f\u6709\u70b9\u91cd\uff0c\u5176\u5b9e\u633a\u4e0d\u9519\uff0c\u4f46\u77e5\u540d\u5ea6\u6ca1\u6709MySQL\u9ad8\uff1b</li> <li>sqlite\uff0c\u5d4c\u5165\u5f0f\u6570\u636e\u5e93\uff0c\u9002\u5408\u684c\u9762\u548c\u79fb\u52a8\u5e94\u7528\u3002</li> </ul> </li> <li>\u5b89\u88c5<ul> <li><code>brew install mysql</code></li> <li><code>brew services start mysql</code></li> <li><code>mysql -uroot</code></li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#sequelize","title":"Sequelize","text":"<pre><code>// \u5982\u679c\u76f4\u63a5\u4f7f\u7528`mysql2`\u5305\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u6211\u4eec\u7f16\u5199\u7684\u4ee3\u7801\u5c31\u6bd4\u8f83\u5e95\u5c42\uff0c\u4f8b\u5982\uff0c\u67e5\u8be2\u4ee3\u7801\nconnection.query('SELECT * FROM users WHERE id = ?', ['123'], function(err, rows) {\n    if (err) {\n        // error\n    } else {\n        for (let row in rows) {\n            processRow(row);\n        }\n    }\n});\n\n// Sequelize \u65b9\u5f0f\nPet.findAll()\n   .then(function (pets) {\n       for (let pet in pets) {\n           console.log(`${pet.id}: ${pet.name}`);\n       }\n   }).catch(function (err) {\n       // error\n   });\n\n// \u91c7\u7528 async \u65b9\u5f0f\n(async () =&gt; {\n    // \u6ce8\u610f await \u5fc5\u987b\u5728 async \u51fd\u6570\u4e2d\u4f7f\u7528\n    var pets = await Pet.findAll();\n})();\n</code></pre> <p>\u751f\u6210\u6570\u636e</p> <pre><code>-- create\ncreate database test;\nuse test;\n\n-- create &amp; grant user\ncreate user 'www'@'%' identified by 'www';\ngrant all privileges on test.* to 'www'@'%';\n\n-- create table\ncreate table pets (\n    id varchar(50) not null,\n    name varchar(100) not null,\n    gender bool not null,\n    birth varchar(10) not null,\n    createdAt bigint not null,\n    updatedAt bigint not null,\n    version bigint not null,\n    primary key (id)\n) engine=innodb;\n</code></pre> <ul> <li>\u4f7f\u7528 sequelize<ul> <li>\u5b89\u88c5 <code>sequelize, mysql2</code></li> <li>\u7b2c\u4e00\u6b65\uff0c\u521b\u5efa\u4e00\u4e2asequelize\u5bf9\u8c61\u5b9e\u4f8b</li> <li>\u7b2c\u4e8c\u6b65\uff0c\u5b9a\u4e49 \u6a21\u578b Pet\uff0c\u544a\u8bc9Sequelize\u5982\u4f55\u6620\u5c04\u6570\u636e\u5e93\u8868<ul> <li>\u7528 <code>sequelize.define()</code> \u5b9a\u4e49Model\u65f6\uff0c\u4f20\u5165\u540d\u79f0 <code>pet</code>\uff0c\u9ed8\u8ba4\u7684\u8868\u540d\u5c31\u662f <code>pets</code>\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u5217\u540d\u548c\u6570\u636e\u7c7b\u578b\uff0c\u5982\u679c\u662f\u4e3b\u952e\uff0c\u9700\u8981\u66f4\u8be6\u7ec6\u5730\u6307\u5b9a\u3002\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u989d\u5916\u7684\u914d\u7f6e\uff0c\u6211\u4eec\u4f20\u5165<code>{ timestamps: false }</code>\u662f\u4e3a\u4e86\u5173\u95edSequelize\u7684\u81ea\u52a8\u6dfb\u52a0timestamp\u7684\u529f\u80fd\u3002</li> </ul> </li> <li>\u64cd\u4f5c<ul> <li><code>create</code> \u63d2\u5165\u6570\u636e</li> <li><code>findAll</code> \u67e5\u8be2<ul> <li>\u5bf9\u67e5\u8be2\u5230\u7684\u5b9e\u4f8b\u8c03\u7528 <code>save, destory</code></li> </ul> </li> </ul> </li> </ul> </li> </ul> <pre><code>const Sequelize = require('sequelize');\nconst config = require('./config');\n// \u7b2c\u4e00\u6b65\uff0c\u521b\u5efa\u4e00\u4e2asequelize\u5bf9\u8c61\u5b9e\u4f8b\nvar sequelize = new Sequelize(config.database, config.username, config.password, {\n    host: config.host,\n    dialect: 'mysql',\n    pool: {\n        max: 5,\n        min: 0,\n        idle: 30000\n    }\n});\n// \u7b2c\u4e8c\u6b65\uff0c\u5b9a\u4e49\u6a21\u578bPet\uff0c\u544a\u8bc9Sequelize\u5982\u4f55\u6620\u5c04\u6570\u636e\u5e93\u8868\nvar Pet = sequelize.define('pet', {\n    id: {\n        type: Sequelize.STRING(50),\n        primaryKey: true\n    },\n    name: Sequelize.STRING(100),\n    gender: Sequelize.BOOLEAN,\n    birth: Sequelize.STRING(10),\n    createdAt: Sequelize.BIGINT,\n    updatedAt: Sequelize.BIGINT,\n    version: Sequelize.BIGINT\n}, {\n        timestamps: false // \u5173\u95edSequelize\u7684\u81ea\u52a8\u6dfb\u52a0timestamp\u7684\u529f\u80fd\n    });\n</code></pre> <ul> <li>Model<ul> <li>\u6211\u4eec\u628a\u901a\u8fc7<code>sequelize.define()</code>\u8fd4\u56de\u7684<code>Pet</code>\u79f0\u4e3a Model\uff0c\u5b83\u8868\u793a\u4e00\u4e2a\u6570\u636e\u6a21\u578b\u3002</li> <li>\u6211\u4eec\u628a\u901a\u8fc7<code>Pet.findAll()</code>\u8fd4\u56de\u7684\u4e00\u4e2a\u6216\u4e00\u7ec4\u5bf9\u8c61\u79f0\u4e3aModel \u5b9e\u4f8b\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7<code>JSON.stringify</code>\u5e8f\u5217\u5316\u4e3aJSON\u5b57\u7b26\u4e32\u3002\u4f46\u662f\u5b83\u4eec\u548c\u666e\u901aJSON\u5bf9\u8c61\u76f8\u6bd4\uff0c\u591a\u4e86\u4e00\u4e9b\u7531Sequelize\u6dfb\u52a0\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982<code>save()</code>\u548c<code>destroy()</code>\u3002\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u66f4\u65b0\u6216\u8005\u5220\u9664\u64cd\u4f5c\u3002</li> </ul> </li> <li>\u6240\u4ee5\uff0c\u4f7f\u7528Sequelize\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u4e00\u822c\u6b65\u9aa4\u5c31\u662f\uff1a<ul> <li>\u9996\u5148\uff0c\u901a\u8fc7\u67d0\u4e2aModel\u5bf9\u8c61\u7684<code>findAll()</code>\u65b9\u6cd5\u83b7\u53d6\u5b9e\u4f8b\uff1b<ul> <li>\u6ce8\u610f<code>findAll()</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u6536<code>where</code>\u3001<code>order</code>\u8fd9\u4e9b\u53c2\u6570\uff0c\u8fd9\u548c\u5c06\u8981\u751f\u6210\u7684SQL\u8bed\u53e5\u662f\u5bf9\u5e94\u7684\u3002</li> </ul> </li> <li>\u5982\u679c\u8981\u66f4\u65b0\u5b9e\u4f8b\uff0c\u5148\u5bf9\u5b9e\u4f8b\u5c5e\u6027\u8d4b\u65b0\u503c\uff0c\u518d\u8c03\u7528<code>save()</code>\u65b9\u6cd5</li> <li>\u5982\u679c\u8981\u5220\u9664\u5b9e\u4f8b\uff0c\u76f4\u63a5\u8c03\u7528<code>destroy()</code>\u65b9\u6cd5\u3002</li> </ul> </li> </ul> <pre><code>// await \u5199\u6cd5 create\n(async () =&gt; {\n    var dog = await Pet.create({\n        id: \"d-\" + now,\n        name: \"Odie\",\n        gender: false,\n        birth: \"2008-08-08\",\n        createdAt: now,\n        updatedAt: now,\n        version: 0,\n    });\n    console.log(\"created: \" + JSON.stringify(dog));\n})();\n\n/* find &amp; save &amp; destroy \u67e5\u8be2, \u4fee\u6539, \u5220\u9664 */\n(async () =&gt; {\n    var pets = await Pet.findAll({\n        where: {\n            name: \"Gaffey\",\n        },\n    });\n    console.log(`find ${pets.length} pets:`);\n    for (let p of pets) {\n        console.log(JSON.stringify(p));\n        console.log(\"update pet...\");\n        p.gender = true;\n        p.updatedAt = Date.now();\n        p.version++;\n        await p.save();\n        if (p.version === 3) {\n            await p.destroy();\n            console.log(`${p.name} was destroyed.`);\n        }\n    }\n})();\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#model","title":"\u5efa\u7acb Model","text":"<p>\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u7edf\u4e00\u7684\u6a21\u578b\uff0c\u5f3a\u8feb\u6240\u6709Model\u90fd\u9075\u5b88\u540c\u4e00\u4e2a\u89c4\u8303\uff0c\u8fd9\u6837\u4e0d\u4f46\u5b9e\u73b0\u7b80\u5355\uff0c\u800c\u4e14\u5bb9\u6613\u7edf\u4e00\u98ce\u683c\u3002</p> <ol> <li>\u7edf\u4e00\u4e3b\u952e\uff0c\u540d\u79f0\u5fc5\u987b\u662f<code>id</code>\uff0c\u7c7b\u578b\u5fc5\u987b\u662f<code>STRING(50)</code>\uff1b</li> <li>\u4e3b\u952e\u53ef\u4ee5\u81ea\u5df1\u6307\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u7531\u6846\u67b6\u81ea\u52a8\u751f\u6210\uff08\u5982\u679c\u4e3anull\u6216undefined\uff09\uff1b</li> <li>\u6240\u6709\u5b57\u6bb5\u9ed8\u8ba4\u4e3a<code>NOT NULL</code>\uff0c\u9664\u975e\u663e\u5f0f\u6307\u5b9a\uff1b</li> <li>\u7edf\u4e00timestamp\u673a\u5236\uff0c\u6bcf\u4e2aModel\u5fc5\u987b\u6709<code>createdAt</code>\u3001<code>updatedAt</code>\u548c<code>version</code>\uff0c\u5206\u522b\u8bb0\u5f55\u521b\u5efa\u65f6\u95f4\u3001\u4fee\u6539\u65f6\u95f4\u548c\u7248\u672c\u53f7\u3002\u5176\u4e2d\uff0c<code>createdAt</code>\u548c<code>updatedAt</code>\u4ee5<code>BIGINT</code>\u5b58\u50a8\u65f6\u95f4\u6233\uff0c\u6700\u5927\u7684\u597d\u5904\u662f\u65e0\u9700\u5904\u7406\u65f6\u533a\uff0c\u6392\u5e8f\u65b9\u4fbf\u3002<code>version</code>\u6bcf\u6b21\u4fee\u6539\u65f6\u81ea\u589e\u3002</li> </ol> <p>\u56e0\u6b64, \u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a <code>defineModel</code> \u51fd\u6570, \u5236\u5b9e\u73b0\u4e0a\u8ff0\u89c4\u5219\u3002</p> <ul> <li>Sequelize\u5728\u521b\u5efa\u3001\u4fee\u6539Entity\u65f6\u4f1a\u8c03\u7528\u6211\u4eec\u6307\u5b9a\u7684\u51fd\u6570\uff0c\u8fd9\u4e9b\u51fd\u6570\u901a\u8fc7<code>hooks</code>\u5728\u5b9a\u4e49Model\u65f6\u8bbe\u5b9a\u3002\u6211\u4eec\u5728<code>beforeValidate</code>\u8fd9\u4e2a\u4e8b\u4ef6\u4e2d\u6839\u636e\u662f\u5426\u662f<code>isNewRecord</code>\u8bbe\u7f6e\u4e3b\u952e\uff08\u5982\u679c\u4e3b\u952e\u4e3a<code>null</code>\u6216<code>undefined</code>\uff09\u3001\u8bbe\u7f6e\u65f6\u95f4\u6233\u548c\u7248\u672c\u53f7\u3002</li> </ul> <pre><code>/* \u8c03\u7528\u5f62\u5f0f */\ndb.defineModel('users', {\n    email: {\n        type: db.STRING(100),\n        unique: true\n    },\n    passwd: db.STRING(100),\n    name: db.STRING(100),\n    gender: db.BOOLEAN\n});\n\n/* \u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a `defineModel` \u51fd\u6570, \u5236\u5b9e\u73b0\u4e0a\u8ff0\u89c4\u5219\u3002 */\nfunction defineModel(name, attributes) {\n    var attrs = {};\n    for (let key in attributes) {\n        let value = attributes[key];\n        if (typeof value === 'object' &amp;&amp; value['type']) {\n            value.allowNull = value.allowNull || false;\n            attrs[key] = value;\n        } else {\n            attrs[key] = {\n                type: value,\n                allowNull: false\n            };\n        }\n    }\n    attrs.id = {\n        type: ID_TYPE,\n        primaryKey: true\n    };\n    attrs.createdAt = {\n        type: Sequelize.BIGINT,\n        allowNull: false\n    };\n    attrs.updatedAt = {\n        type: Sequelize.BIGINT,\n        allowNull: false\n    };\n    attrs.version = {\n        type: Sequelize.BIGINT,\n        allowNull: false\n    };\n    return sequelize.define(name, attrs, {\n        tableName: name,\n        timestamps: false,\n        hooks: {\n            beforeValidate: function (obj) {\n                let now = Date.now();\n                if (obj.isNewRecord) {\n                    if (!obj.id) {\n                        obj.id = generateId();\n                    }\n                    obj.createdAt = now;\n                    obj.updatedAt = now;\n                    obj.version = 0;\n                } else {\n                    obj.updatedAt = Date.now();\n                    obj.version++;\n                }\n            }\n        }\n    });\n}\n</code></pre> <ul> <li>\u6211\u4eec\u5176\u5b9e\u4e0d\u9700\u8981\u521b\u5efa\u8868\u7684SQL\uff0c\u56e0\u4e3aSequelize\u63d0\u4f9b\u4e86\u4e00\u4e2a<code>sync()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u81ea\u52a8\u521b\u5efa\u6570\u636e\u5e93\u3002<ul> <li>\u8fd9\u4e2a\u529f\u80fd\u5728\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u4e2d\u6ca1\u6709\u4ec0\u4e48\u7528\uff0c\u4f46\u662f\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u975e\u5e38\u6709\u7528\u3002\u6d4b\u8bd5\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7528<code>sync()</code>\u65b9\u6cd5\u81ea\u52a8\u521b\u5efa\u51fa\u8868\u7ed3\u6784\uff0c\u800c\u4e0d\u662f\u81ea\u5df1\u7ef4\u62a4SQL\u811a\u672c\u3002\u8fd9\u6837\uff0c\u53ef\u4ee5\u968f\u65f6\u4fee\u6539Model\u7684\u5b9a\u4e49\uff0c\u5e76\u7acb\u523b\u8fd0\u884c\u6d4b\u8bd5\u3002</li> <li>\u5f00\u53d1\u73af\u5883\u4e0b\uff0c\u9996\u6b21\u4f7f\u7528<code>sync()</code>\u4e5f\u53ef\u4ee5\u81ea\u52a8\u521b\u5efa\u51fa\u8868\u7ed3\u6784\uff0c\u907f\u514d\u4e86\u624b\u52a8\u8fd0\u884cSQL\u7684\u95ee\u9898\u3002</li> </ul> </li> </ul> <pre><code>/* \u66b4\u9732 sync \u51fd\u6570 */\nmodule.exports = {\n    sync: () =&gt; {\n        // only allow create ddl in non-production environment:\n        if (process.env.NODE_ENV !== \"production\") {\n            sequelize.sync({ force: true });\n        } else {\n            throw new Error(\n                \"Cannot sync() when NODE_ENV is set to 'production'.\"\n            );\n        }\n    },\n};\n\n/* init-db.js */\nconst model = require('./model.js');\nmodel.sync();\nconsole.log('init db ok.');\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#mocha","title":"mocha","text":"<ul> <li>mocha\u662fJavaScript\u7684\u4e00\u79cd\u5355\u5143\u6d4b\u8bd5\u6846\u67b6\uff0c\u65e2\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u5728Node.js\u73af\u5883\u4e0b\u8fd0\u884c\u3002</li> <li>\u7279\u70b9<ul> <li>\u65e2\u53ef\u4ee5\u6d4b\u8bd5\u7b80\u5355\u7684JavaScript\u51fd\u6570\uff0c\u53c8\u53ef\u4ee5\u6d4b\u8bd5\u5f02\u6b65\u4ee3\u7801\uff0c\u56e0\u4e3a\u5f02\u6b65\u662fJavaScript\u7684\u7279\u6027\u4e4b\u4e00\uff1b</li> <li>\u53ef\u4ee5\u81ea\u52a8\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\uff0c\u4e5f\u53ef\u4ee5\u53ea\u8fd0\u884c\u7279\u5b9a\u7684\u6d4b\u8bd5\uff1b</li> <li>\u53ef\u4ee5\u652f\u6301before\u3001after\u3001beforeEach\u548cafterEach\u6765\u7f16\u5199\u521d\u59cb\u5316\u4ee3\u7801\u3002</li> </ul> </li> </ul> <p>\u5982\u4f55\u6267\u884c\u6d4b\u8bd5?</p> <ul> <li>\u65b9\u6cd5\u4e00 <code>node_modules\\mocha\\bin\\mocha</code></li> <li>\u65b9\u6cd5\u4e8c\uff0c\u6211\u4eec\u5728<code>package.json</code>\u4e2d\u6dfb\u52a0npm\u547d\u4ee4<ul> <li>\u5728 scripts \u4e2d\u6dfb\u52a0 <code>\"test\": \"mocha\"</code></li> <li>\u7136\u540e <code>npm test</code> \u5373\u53ef</li> </ul> </li> <li>\u65b9\u6cd5\u4e09\uff0c\u6211\u4eec\u5728VS Code\u4e2d\u521b\u5efa\u914d\u7f6e\u6587\u4ef6<code>.vscode/launch.json</code><ul> <li><code>\"program\": \"${workspaceRoot}/node_modules/mocha/bin/mocha\"</code></li> <li><code>\"type\": \"node\",</code></li> <li>\u5176\u5b9e\u5c31\u662f\u8fd0\u884c\u4e86 <code>node node_modules/mocha/bin/mocha</code> !</li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#_8","title":"\u7f16\u5199\u6d4b\u8bd5","text":"<pre><code>const assert = require('assert');\nconst sum = require('../hello');\n\ndescribe('#hello.js', () =&gt; {\n    describe('#sum()', () =&gt; {\n        before(function () {\n            console.log('before:');\n        });\n\n        after(function () {\n            console.log('after.');\n        });\n\n        beforeEach(function () {\n            console.log('  beforeEach:');\n        });\n\n        afterEach(function () {\n            console.log('  afterEach.');\n        });\n\n        it('sum() should return 0', () =&gt; {\n            assert.strictEqual(sum(), 0);\n        });\n\n        it('sum(1) should return 1', () =&gt; {\n            assert.strictEqual(sum(1), 1);\n        });\n    });\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_9","title":"\u5f02\u6b65\u6d4b\u8bd5","text":"<ul> <li>\u5982\u679c\u8981\u6d4b\u8bd5\u540c\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u4f20\u5165\u65e0\u53c2\u6570\u51fd\u6570\u5373\u53ef<ul> <li><code>it(' description', function () {}</code></li> <li>\u7136\u540e\u5728\u5176\u4e2d assert \u5224\u65ad\u5373\u53ef</li> </ul> </li> <li>\u5982\u679c\u8981\u6d4b\u8bd5\u5f02\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u8981\u4f20\u5165\u7684\u51fd\u6570\u9700\u8981\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u901a\u5e38\u547d\u540d\u4e3a<code>done</code><ul> <li><code>it(' description', function (done) {}</code></li> <li>\u7136\u540e\u5728\u5176\u4e2d\u8fd0\u884c\u4ee3\u6d4b\u8bd5\u7684\u51fd\u6570 f</li> <li>\u624b\u52a8\u8c03\u7528<code>done()</code>\u8868\u793a\u6d4b\u8bd5\u6210\u529f\uff0c<code>done(err)</code>\u8868\u793a\u6d4b\u8bd5\u51fa\u9519</li> </ul> </li> <li>\u5bf9\u4e8e async \u51fd\u6570, \u66f4\u65b9\u4fbf\u7684\u662f\u76f4\u63a5\u5c06\u5176\u8f6c\u5316\u4e3a\u540c\u6b65\u51fd\u6570\u6d4b\u8bd5<ul> <li>\u4f8b\u5982, \u4f20\u5165 <code>async () =&gt; { assert.strictEqual(await f(), groundTruth) }</code></li> </ul> </li> </ul> <pre><code>// \u5982\u679c\u8981\u6d4b\u8bd5\u540c\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u4f20\u5165\u65e0\u53c2\u6570\u51fd\u6570\u5373\u53ef\nit('test sync function', function () {\n    // sycnFunc()\n    assert(true);\n});\n\n// \u5982\u679c\u8981\u6d4b\u8bd5\u5f02\u6b65\u51fd\u6570\uff0c\u6211\u4eec\u8981\u4f20\u5165\u7684\u51fd\u6570\u9700\u8981\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u901a\u5e38\u547d\u540d\u4e3a`done`\nit('test async function', function (done) {\n    // \u8981\u6d4b\u8bd5\u7684\u5f02\u6b65\u51fd\u6570, \u4f8b\u5982\u8fd9\u91cc\u7684 fs.readFile\n    fs.readFile('filepath', function (err, data) {\n        // \u6d4b\u8bd5\u5f02\u6b65\u51fd\u6570\u9700\u8981\u5728\u51fd\u6570\u5185\u90e8\u624b\u52a8\u8c03\u7528`done()`\u8868\u793a\u6d4b\u8bd5\u6210\u529f\uff0c`done(err)`\u8868\u793a\u6d4b\u8bd5\u51fa\u9519\u3002\n        if (err) {\n            done(err);\n        } else {\n            done();\n        }\n    });\n});\n\n// \u5bf9\u4e8e await \u51fd\u6570\n// 0. \u53ef\u4ee5\u7528 try...catch \u6d4b\u8bd5\nit('#async with done', (done) =&gt; {\n    (async function () {\n        try {\n            let r = await hello();\n            assert.strictEqual(r, 15);\n            done();\n        } catch (err) {\n            done(err);\n        }\n    })();\n});\n// 1. \u66f4\u65b9\u4fbf\u7684, \u5c31\u662f\u76f4\u63a5\u628aasync\u51fd\u6570\u5f53\u6210\u540c\u6b65\u51fd\u6570\u6765\u6d4b\u8bd5\nit('#async function', async () =&gt; {\n    let r = await hello();\n    assert.strictEqual(r, 15);\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#http_1","title":"Http \u6d4b\u8bd5","text":"<ul> <li>\u4ece <code>app.js</code> \u4e2d\u5206\u79bb\u76f4\u63a5\u8fd0\u884c (listen) \u7684\u4ee3\u7801, \u4ee4\u5176\u53ea\u8d1f\u8d23\u521b\u5efa<code>app</code>\u5b9e\u4f8b\uff0c\u5e76\u4e0d\u76d1\u542c\u7aef\u53e3<ul> <li>\u4ece\u800c\u53ef\u4ee5\u5728\u6d4b\u8bd5\u4e2d\u5bfc\u5165 app \u7136\u540e <code>let server = app.listen(9900);</code></li> </ul> </li> <li>\u5229\u7528 <code>supertest</code> \u7b80\u5316 HTTP assertions<ul> <li><code>request = require('supertest')</code></li> <li>\u4f7f\u7528 <code>let res = await request(server).get('/');</code> \u6784\u9020\u4e00\u4e2aGET\u8bf7\u6c42\uff0c\u53d1\u9001\u7ed9koa\u7684\u5e94\u7528\uff0c\u7136\u540e\u83b7\u5f97\u54cd\u5e94</li> <li>\u53ef\u4ee5\u624b\u52a8\u68c0\u67e5\u54cd\u5e94\u5bf9\u8c61\uff0c\u4f8b\u5982\uff0c<code>res.body</code>\uff0c\u8fd8\u53ef\u4ee5\u5229\u7528<code>supertest</code>\u63d0\u4f9b\u7684<code>expect()</code>\u66f4\u65b9\u4fbf\u5730\u65ad\u8a00\u54cd\u5e94\u7684HTTP\u4ee3\u7801\u3001\u8fd4\u56de\u5185\u5bb9\u548cHTTP\u5934\u3002\u65ad\u8a00HTTP\u5934\u65f6\u53ef\u7528\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f<ul> <li>\u4f8b\u5982 <code>.expect('Content-Type', /text\\/html/)</code> \u53ef\u7528\u6210\u529f\u5339\u914d\u5230<code>Content-Type</code>\u4e3a<code>text/html</code>\u3001<code>text/html; charset=utf-8</code>\u7b49\u503c\u3002</li> </ul> </li> </ul> </li> </ul> <p>\u53c2\u89c1 https://www.npmjs.com/package/supertest \u4e2d\u7684 macha \u90e8\u5206</p> <pre><code>// app-test.js\n\nconst\n    request = require('supertest'),\n    app = require('../app');\n\ndescribe('#test koa app', () =&gt; {\n\n    let server = app.listen(9900);\n\n    describe('#test server', () =&gt; {\n\n        it('#test GET /', async () =&gt; {\n            let res = await request(server)\n                .get('/')\n                .expect('Content-Type', /text\\/html/)\n                .expect(200, '&lt;h1&gt;Hello, world!&lt;/h1&gt;');\n        });\n\n        it('#test GET /path?name=Bob', async () =&gt; {\n            let res = await request(server)\n                .get('/path?name=Bob')\n                .expect('Content-Type', /text\\/html/)\n                .expect(200, '&lt;h1&gt;Hello, Bob!&lt;/h1&gt;');\n        });\n    });\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#websocket","title":"WebSocket","text":"<ul> <li>WebSocket\u662f HTML5 \u65b0\u589e\u7684\u534f\u8bae\uff0c\u5b83\u7684\u76ee\u7684\u662f\u5728\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u4e0d\u53d7\u9650\u7684\u53cc\u5411\u901a\u4fe1\u7684\u901a\u9053\uff0c\u6bd4\u5982\u8bf4\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u5728\u4efb\u610f\u65f6\u523b\u53d1\u9001\u6d88\u606f\u7ed9\u6d4f\u89c8\u5668\u3002<ul> <li>HTTP\u534f\u8bae\u662f\u4e00\u4e2a\u8bf7\u6c42\uff0d\u54cd\u5e94\u534f\u8bae\uff0c\u8bf7\u6c42\u5fc5\u987b\u5148\u7531\u6d4f\u89c8\u5668\u53d1\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u624d\u80fd\u54cd\u5e94\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u518d\u628a\u6570\u636e\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6d4f\u89c8\u5668\u4e0d\u4e3b\u52a8\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u662f\u6ca1\u6cd5\u4e3b\u52a8\u53d1\u6570\u636e\u7ed9\u6d4f\u89c8\u5668\u7684\u3002</li> </ul> </li> <li>\u4e5f\u80fd\u5b9e\u73b0, \u4f46\u662f\u6548\u7387\u4f4e. \u6bd4\u5982\u7528\u8f6e\u8be2\u6216\u8005Comet\u3002<ul> <li>\u8f6e\u8be2\u662f\u6307\u6d4f\u89c8\u5668\u901a\u8fc7JavaScript\u542f\u52a8\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u7136\u540e\u4ee5\u56fa\u5b9a\u7684\u95f4\u9694\u7ed9\u670d\u52a1\u5668\u53d1\u8bf7\u6c42\uff0c\u8be2\u95ee\u670d\u52a1\u5668\u6709\u6ca1\u6709\u65b0\u6d88\u606f\u3002\u8fd9\u4e2a\u673a\u5236\u7684\u7f3a\u70b9\u4e00\u662f\u5b9e\u65f6\u6027\u4e0d\u591f\uff0c\u4e8c\u662f\u9891\u7e41\u7684\u8bf7\u6c42\u4f1a\u7ed9\u670d\u52a1\u5668\u5e26\u6765\u6781\u5927\u7684\u538b\u529b\u3002</li> <li>Comet\u672c\u8d28\u4e0a\u4e5f\u662f\u8f6e\u8be2\uff0c\u4f46\u662f\u5728\u6ca1\u6709\u6d88\u606f\u7684\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u5148\u62d6\u4e00\u6bb5\u65f6\u95f4\uff0c\u7b49\u5230\u6709\u6d88\u606f\u4e86\u518d\u56de\u590d\u3002\u8fd9\u4e2a\u673a\u5236\u6682\u65f6\u5730\u89e3\u51b3\u4e86\u5b9e\u65f6\u6027\u95ee\u9898\uff0c\u4f46\u662f\u5b83\u5e26\u6765\u4e86\u65b0\u7684\u95ee\u9898\uff1a\u4ee5\u591a\u7ebf\u7a0b\u6a21\u5f0f\u8fd0\u884c\u7684\u670d\u52a1\u5668\u4f1a\u8ba9\u5927\u90e8\u5206\u7ebf\u7a0b\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u5904\u4e8e\u6302\u8d77\u72b6\u6001\uff0c\u6781\u5927\u5730\u6d6a\u8d39\u670d\u52a1\u5668\u8d44\u6e90\u3002\u53e6\u5916\uff0c\u4e00\u4e2aHTTP\u8fde\u63a5\u5728\u957f\u65f6\u95f4\u6ca1\u6709\u6570\u636e\u4f20\u8f93\u7684\u60c5\u51b5\u4e0b\uff0c\u94fe\u8def\u4e0a\u7684\u4efb\u4f55\u4e00\u4e2a\u7f51\u5173\u90fd\u53ef\u80fd\u5173\u95ed\u8fd9\u4e2a\u8fde\u63a5\uff0c\u800c\u7f51\u5173\u662f\u6211\u4eec\u4e0d\u53ef\u63a7\u7684\uff0c\u8fd9\u5c31\u8981\u6c42Comet\u8fde\u63a5\u5fc5\u987b\u5b9a\u671f\u53d1\u4e00\u4e9bping\u6570\u636e\u8868\u793a\u8fde\u63a5\u201c\u6b63\u5e38\u5de5\u4f5c\u201d\u3002</li> </ul> </li> <li>\u4e3a\u4ec0\u4e48WebSocket\u8fde\u63a5\u53ef\u4ee5\u5b9e\u73b0\u5168\u53cc\u5de5\u901a\u4fe1\u800cHTTP\u8fde\u63a5\u4e0d\u884c\u5462\uff1f\u5b9e\u9645\u4e0aHTTP\u534f\u8bae\u662f\u5efa\u7acb\u5728TCP\u534f\u8bae\u4e4b\u4e0a\u7684\uff0cTCP\u534f\u8bae\u672c\u8eab\u5c31\u5b9e\u73b0\u4e86\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u4f46\u662fHTTP\u534f\u8bae\u7684\u8bf7\u6c42\uff0d\u5e94\u7b54\u673a\u5236\u9650\u5236\u4e86\u5168\u53cc\u5de5\u901a\u4fe1\u3002WebSocket\u8fde\u63a5\u5efa\u7acb\u4ee5\u540e\uff0c\u5176\u5b9e\u53ea\u662f\u7b80\u5355\u89c4\u5b9a\u4e86\u4e00\u4e0b\uff1a\u63a5\u4e0b\u6765\uff0c\u54b1\u4eec\u901a\u4fe1\u5c31\u4e0d\u4f7f\u7528HTTP\u534f\u8bae\u4e86\uff0c\u76f4\u63a5\u4e92\u76f8\u53d1\u6570\u636e\u5427\u3002<ul> <li>\u5b89\u5168\u7684WebSocket\u8fde\u63a5\u673a\u5236\u548cHTTPS\u7c7b\u4f3c\u3002\u9996\u5148\uff0c\u6d4f\u89c8\u5668\u7528<code>wss://xxx</code>\u521b\u5efaWebSocket\u8fde\u63a5\u65f6\uff0c\u4f1a\u5148\u901a\u8fc7HTTPS\u521b\u5efa\u5b89\u5168\u7684\u8fde\u63a5\uff0c\u7136\u540e\uff0c\u8be5HTTPS\u8fde\u63a5\u5347\u7ea7\u4e3aWebSocket\u8fde\u63a5\uff0c\u5e95\u5c42\u901a\u4fe1\u8d70\u7684\u4ecd\u7136\u662f\u5b89\u5168\u7684SSL/TLS\u534f\u8bae\u3002</li> </ul> </li> <li>\u670d\u52a1\u5668<ul> <li>\u7531\u4e8eWebSocket\u662f\u4e00\u4e2a\u534f\u8bae\uff0c\u670d\u52a1\u5668\u5177\u4f53\u600e\u4e48\u5b9e\u73b0\uff0c\u53d6\u51b3\u4e8e\u6240\u7528\u7f16\u7a0b\u8bed\u8a00\u548c\u6846\u67b6\u672c\u8eab\u3002Node.js\u672c\u8eab\u652f\u6301\u7684\u534f\u8bae\u5305\u62ecTCP\u534f\u8bae\u548cHTTP\u534f\u8bae\uff0c\u8981\u652f\u6301WebSocket\u534f\u8bae\uff0c\u9700\u8981\u5bf9Node.js\u63d0\u4f9b\u7684HTTPServer\u505a\u989d\u5916\u7684\u5f00\u53d1\u3002\u5df2\u7ecf\u6709\u82e5\u5e72\u57fa\u4e8eNode.js\u7684\u7a33\u5b9a\u53ef\u9760\u7684WebSocket\u5b9e\u73b0\uff0c\u6211\u4eec\u76f4\u63a5\u7528npm\u5b89\u88c5\u4f7f\u7528\u5373\u53ef\u3002</li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#ws","title":"ws \u534f\u8bae","text":"<pre><code>GET ws://localhost:3000/ws/chat HTTP/1.1\nHost: localhost\nUpgrade: websocket\nConnection: Upgrade\nOrigin: http://localhost:3000\nSec-WebSocket-Key: client-random-string\nSec-WebSocket-Version: 13\n</code></pre> <p>\u8be5\u8bf7\u6c42\u548c\u666e\u901a\u7684HTTP\u8bf7\u6c42\u6709\u51e0\u70b9\u4e0d\u540c\uff1a</p> <ol> <li>GET\u8bf7\u6c42\u7684\u5730\u5740\u4e0d\u662f\u7c7b\u4f3c<code>/path/</code>\uff0c\u800c\u662f\u4ee5<code>ws://</code>\u5f00\u5934\u7684\u5730\u5740\uff1b</li> <li>\u8bf7\u6c42\u5934<code>Upgrade: websocket</code>\u548c<code>Connection: Upgrade</code>\u8868\u793a\u8fd9\u4e2a\u8fde\u63a5\u5c06\u8981\u88ab\u8f6c\u6362\u4e3aWebSocket\u8fde\u63a5\uff1b</li> <li><code>Sec-WebSocket-Key</code>\u662f\u7528\u4e8e\u6807\u8bc6\u8fd9\u4e2a\u8fde\u63a5\uff0c\u5e76\u975e\u7528\u4e8e\u52a0\u5bc6\u6570\u636e\uff1b</li> <li><code>Sec-WebSocket-Version</code>\u6307\u5b9a\u4e86WebSocket\u7684\u534f\u8bae\u7248\u672c\u3002</li> </ol> <p>\u670d\u52a1\u5668\u7684\u54cd\u5e94:</p> <pre><code>HTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Accept: server-random-string\n</code></pre> <p>\u8be5\u54cd\u5e94\u4ee3\u7801<code>101</code>\u8868\u793a\u672c\u6b21\u8fde\u63a5\u7684HTTP\u534f\u8bae\u5373\u5c06\u88ab\u66f4\u6539\uff0c\u66f4\u6539\u540e\u7684\u534f\u8bae\u5c31\u662f<code>Upgrade: websocket</code>\u6307\u5b9a\u7684WebSocket\u534f\u8bae\u3002</p>"},{"location":"code/JavaScript/node-js-note/#_10","title":"\u6848\u4f8b: \u7f16\u5199\u804a\u5929\u5ba4","text":""},{"location":"code/JavaScript/node-js-note/#_11","title":"\u5982\u4f55\u5171\u7528\u7aef\u53e3","text":"<p>koa\u901a\u8fc73000\u7aef\u53e3\u54cd\u5e94HTTP\uff0c\u6211\u4eec\u8981\u65b0\u52a0\u7684WebSocketServer\u8fd8\u80fd\u5426\u4f7f\u75283000\u7aef\u53e3\uff1f\u53ef\u4ee5!</p> <ul> <li>\u5b9e\u9645\u4e0a\uff0c3000\u7aef\u53e3\u5e76\u975e\u7531koa\u76d1\u542c\uff0c\u800c\u662fkoa\u8c03\u7528Node\u6807\u51c6\u7684http\u6a21\u5757\u521b\u5efa\u7684http.Server\u76d1\u542c\u7684\u3002koa\u53ea\u662f\u628a\u54cd\u5e94\u51fd\u6570\u6ce8\u518c\u5230\u8be5http.Server\u4e2d\u4e86\u3002\u7c7b\u4f3c\u7684\uff0cWebSocketServer\u4e5f\u53ef\u4ee5\u628a\u81ea\u5df1\u7684\u54cd\u5e94\u51fd\u6570\u6ce8\u518c\u5230http.Server\u4e2d\uff0c\u8fd9\u6837\uff0c\u540c\u4e00\u4e2a\u7aef\u53e3\uff0c\u6839\u636e\u534f\u8bae\uff0c\u53ef\u4ee5\u5206\u522b\u7531koa\u548cws\u5904\u7406</li> <li>\u628aWebSocketServer\u7ed1\u5b9a\u5230\u540c\u4e00\u4e2a\u7aef\u53e3\u7684\u5173\u952e\u4ee3\u7801\u662f\u5148\u83b7\u53d6koa\u521b\u5efa\u7684<code>http.Server</code>\u7684\u5f15\u7528\uff0c\u518d\u6839\u636e<code>http.Server</code>\u521b\u5efaWebSocketServer</li> </ul> <pre><code>// koa app\u7684listen()\u65b9\u6cd5\u8fd4\u56dehttp.Server:\nlet server = app.listen(3000);\n\n// \u521b\u5efaWebSocketServer:\nlet wss = new WebSocketServer({\n    server: server\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#cookie","title":"\u5982\u4f55\u8bc6\u522b\u7528\u6237\u8eab\u4efd: cookie","text":"<p>Note</p> <p>\u603b\u7ed3: \u603b\u4f53\u800c\u8a00, cookie \u662f\u4e00\u4e2a\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u76f8\u4e92\u914d\u5408\u7684\u8fc7\u7a0b. (\u4ee5\u8fd9\u4e2a\u6848\u4f8b\u4e3a\u51c6, <code>/singin</code> \u9875\u9762\u8fdb\u884c\u767b\u9646, <code>/</code> \u9875\u9762\u4e3a\u804a\u5929\u5ba4)</p> <ol> <li>\u6d4f\u89c8\u5668\u8bf7\u6c42 <code>/</code>, \u521d\u59cb\u7684\u65f6\u5019\u8fd8\u6ca1\u6709 cookie, koa \u8fdb\u884c\u5224\u65ad, \u5c06\u9875\u9762\u91cd\u5b9a\u5411\u5230 <code>/signin</code>;</li> <li>\u7528\u6237\u586b\u5199\u8eab\u4efd\u4fe1\u606f, \u53d1\u9001 post \u8bf7\u6c42;</li> <li>\u670d\u52a1\u5668\u751f\u6210 cookie (\u4e0b\u9762\u7684 \u201cPOST /signin\u201d \u5bf9\u5e94\u7684\u51fd\u6570), \u91cd\u5b9a\u5411\u56de <code>/</code> \u804a\u5929\u9875\u9762 (\u8fd9\u91cc\u4e0d\u8003\u8651\u7528\u6237\u4fe1\u606f\u51fa\u9519\u7684\u60c5\u51b5)</li> <li>\u6d4f\u89c8\u5668\u518d\u6b21\u8bf7\u6c42 <code>/</code>, \u6b64\u65f6\u53d1\u9001\u7684\u662f\u5e26\u6709 cookie \u7684, koa \u9a8c\u8bc1 cookie (\u5728 middleware \u4e2d\u6ce8\u518c\u4e86 parseUser \u51fd\u6570), \u6210\u529f\u540e\u6e32\u67d3\u9875\u9762\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668 (\u2018GET /\u2019 \u5bf9\u5e94\u7684\u51fd\u6570)</li> <li>\u5728 <code>/</code> \u9875\u9762\u4e2d\u5305\u542b\u4e86\u5efa\u7acb ws \u8fde\u63a5\u7684\u4ee3\u7801, \u6d4f\u89c8\u5668\u53d1\u8d77 ws \u8fde\u63a5\u8bf7\u6c42 <code>new WebSocket('ws://localhost:3000/ws/chat')</code> (\u5728 <code>room.html</code> \u6a21\u677f\u4e2d)</li> <li>\u670d\u52a1\u5668\u9a8c\u8bc1 cookie (\u5728\u54cd\u5e94 \u2018connection\u2019 \u7684\u65f6\u5019\u8c03\u7528 parseUser), \u5efa\u7acb\u8fde\u63a5</li> <li>\u7136\u540e, \u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u53d1\u9001\u6d88\u606f\u5c31\u901a\u8fc7\u8fd9\u6761\u5efa\u7acb\u597d\u7684 ws \u8fde\u63a5\u6765\u901a\u4fe1\u4e86!</li> </ol> <ul> <li>\u5728koa\u5e94\u7528\u4e2d\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u8ba4\u8bc1\u7528\u6237\uff0c\u4f8b\u5982\uff0c\u901a\u8fc7session\u6216\u8005cookie\uff0c\u4f46\u662f\uff0c\u5728\u54cd\u5e94WebSocket\u8bf7\u6c42\u65f6\uff0c\u5982\u4f55\u8bc6\u522b\u7528\u6237\u8eab\u4efd\uff1f</li> <li>\u4e00\u4e2a\u7b80\u5355\u53ef\u884c\u7684\u65b9\u6848\u662f\u628a\u7528\u6237\u767b\u5f55\u540e\u7684\u8eab\u4efd\u5199\u5165Cookie\uff0c\u5728koa\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528middleware\u89e3\u6790Cookie\uff0c\u628a\u7528\u6237\u7ed1\u5b9a\u5230<code>ctx.state.user</code>\u4e0a\u3002</li> <li>WS\u8bf7\u6c42\u4e5f\u662f\u6807\u51c6\u7684HTTP\u8bf7\u6c42\uff0c\u6240\u4ee5\uff0c\u670d\u52a1\u5668\u4e5f\u4f1a\u628aCookie\u53d1\u9001\u8fc7\u6765\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u5728\u7528WebSocketServer\u5904\u7406WS\u8bf7\u6c42\u65f6\uff0c\u5c31\u53ef\u4ee5\u6839\u636eCookie\u8bc6\u522b\u7528\u6237\u8eab\u4efd\u3002</li> <li>\u5904\u7406\u903b\u8f91<ul> <li>\u5728 koa \u4e2d, (\u5728 middleware \u6ce8\u518c parseUser \u51fd\u6570), \u5c06 cookie \u4fdd\u5b58\u5728 <code>ctx.state</code> \u4e2d. \u7531\u4e8e\u5904\u7406\u7684\u90fd\u662f http \u8bf7\u6c42, \u53ef\u4ee5\u5bb9\u6613\u5f97\u5230</li> <li>\u800c\u5bf9\u4e8e ws, \u6211\u4eec\u9700\u8981\u5728\u521d\u59cb\u5efa\u7acb connection \u7684\u65f6\u5019\u521b\u5efa cookie, \u7136\u540e\u7ed1\u5b9a\u5230 WebSocket\u5bf9\u8c61 \u4e0a.</li> </ul> </li> </ul> <pre><code>/* server \u65b0\u7528\u6237\u767b\u9646, \u6784\u9020 user \u5bf9\u8c61, \u751f\u6210 base64 \u7f16\u7801\u7684 cookie \u2014\u2014 \u7136\u540e\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\ncontroller/signin.js */\n    \"POST /signin\": async (ctx, next) =&gt; {\n        index++;\n        let name = ctx.request.body.name || \"\u8def\u4eba\u7532\";\n        let user = {\n            id: index,\n            name: name,\n            image: index % 10,\n        };\n        let value = Buffer.from(JSON.stringify(user)).toString(\"base64\");\n        console.log(`Set cookie value: ${value}`);\n        ctx.cookies.set(\"name\", value);\n        ctx.response.redirect(\"/\"); // \u91cd\u5b9a\u5411\u56de\u9996\u9875\n    },\n/* controller/index.js */\n    'GET /': async (ctx, next) =&gt; {\n        let user = ctx.state.user;\n        if (user) {\n            ctx.render('room.html', {\n                user: user\n            });\n        } else {\n            ctx.response.redirect('/signin');\n        }\n    }\n\n/* \u8bc6\u522b\u7528\u6237\u8eab\u4efd\u7684\u903b\u8f91\n\u4f20\u5165\u7684 obj \u53ef\u4ee5\u662f 1. cookie \u5b57\u7b26\u4e32; 2. request \u5bf9\u8c61 */\nfunction parseUser(obj) {\n    if (!obj) {\n        return;\n    }\n    console.log('try parse: ' + obj);\n    let s = '';\n    if (typeof obj === 'string') {\n        s = obj;\n    } else if (obj.headers) {\n        let cookies = new Cookies(obj, null);\n        s = cookies.get('name');\n    }\n    if (s) {\n        try {\n            let user = JSON.parse(Buffer.from(s, 'base64').toString());\n            console.log(`User: ${user.name}, ID: ${user.id}`);\n            return user;\n        } catch (e) {\n            // ignore\n        }\n    }\n}\n\n// \u5728koa\u7684middleware\u4e2d\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u8bc6\u522b\u7528\u6237\napp.use(async (ctx, next) =&gt; {\n    ctx.state.user = parseUser(ctx.cookies.get('name') || '');\n    await next();\n});\n\n// \u5728WebSocketServer\u4e2d\uff0c\u5c31\u9700\u8981\u54cd\u5e94`connection`\u4e8b\u4ef6\uff0c\u7136\u540e\u8bc6\u522b\u7528\u6237\nwss.on('connection', function (ws) {\n    // ws.upgradeReq\u662f\u4e00\u4e2a (http) request\u5bf9\u8c61:\n    let user = parseUser(ws.upgradeReq);\n    if (!user) {\n        // Cookie\u4e0d\u5b58\u5728\u6216\u65e0\u6548\uff0c\u76f4\u63a5\u5173\u95edWebSocket:\n        ws.close(4001, 'Invalid user');\n    }\n    // \u8bc6\u522b\u6210\u529f\uff0c\u628auser\u7ed1\u5b9a\u5230\u8be5 WebSocket \u5bf9\u8c61:\n    ws.user = user;\n    // \u7ed1\u5b9aWebSocketServer\u5bf9\u8c61:\n    ws.wss = wss;\n});\n</code></pre> <p>\u6d4f\u89c8\u5668</p> <pre><code>/* room.html */\n/* \u521d\u59cb\u5316\u9875\u9762\u7684\u65f6\u5019, \u548c\u670d\u52a1\u5668\u5efa\u7acb ws \u8fde\u63a5, \u8bbe\u7f6e onmessage \u76d1\u542c\u903b\u8f91 */\n    var ws = new WebSocket('ws://localhost:3000/ws/chat');\n\n    ws.onmessage = function(event) {\n        var data = event.data;\n        console.log(data);\n        var msg = JSON.parse(data);\n        if (msg.type === 'list') {\n            vmUserList.users = msg.data;\n        } else if (msg.type === 'join') {\n            addToUserList(vmUserList.users, msg.user);\n            addMessage(vmMessageList.messages, msg);\n        } else if (msg.type === 'left') {\n            removeFromUserList(vmUserList.users, msg.user);\n            addMessage(vmMessageList.messages, msg);\n        } else if (msg.type === 'chat') {\n            addMessage(vmMessageList.messages, msg);\n        }\n    };\n\n/* \u62e6\u622a\u6d88\u606f\u53d1\u9001\u8fd9\u4e2a\u8868\u5355 (id\u4e3a form-chat), \u4f7f\u7528 ws \u8fdb\u884c\u53d1\u9001\u6d88\u606f */\n    $('#form-chat').submit(function (e) {\n        e.preventDefault();\n        var input = $(this).find('input[type=text]');\n        var text = input.val().trim();\n        console.log('[chat] ' + text);\n        if (text) {\n            input.val('');\n            ws.send(text);\n        }\n    });\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_12","title":"\u804a\u5929\u5ba4\u903b\u8f91","text":"<ul> <li>\u6211\u4eec\u8981\u5bf9\u6bcf\u4e2a\u521b\u5efa\u6210\u529f\u7684WebSocket\u7ed1\u5b9a<code>message</code>\u3001<code>close</code>\u3001<code>error</code>\u7b49\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u3002\u5bf9\u4e8e\u804a\u5929\u5e94\u7528\u6765\u8bf4\uff0c\u6bcf\u6536\u5230\u4e00\u6761\u6d88\u606f\uff0c\u5c31\u9700\u8981\u628a\u8be5\u6d88\u606f\u5e7f\u64ad\u5230\u6240\u6709WebSocket\u8fde\u63a5\u4e0a\u3002</li> <li>\u5904\u7406\u903b\u8f91:<ul> <li>\u67d0\u4e2aWebSocket\u6536\u5230\u6d88\u606f, \u5e7f\u64ad\u5230\u6240\u6709\u8fde\u63a5</li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#_13","title":"\u9875\u9762\u7aef","text":"<ul> <li>\u804a\u5929\u5ba4\u9875\u9762\u53ef\u4ee5\u5212\u5206\u4e3a\u5de6\u4fa7\u4f1a\u8bdd\u5217\u8868\u548c\u53f3\u4fa7\u7528\u6237\u5217\u8868\u4e24\u90e8\u5206</li> <li>\u5728\u804a\u5929\u5ba4\u5e94\u7528\u4e2d, DOM\u9700\u8981\u52a8\u6001\u66f4\u65b0\uff0c\u56e0\u6b64\uff0c\u72b6\u6001\u7ba1\u7406\u662f\u9875\u9762\u903b\u8f91\u7684\u6838\u5fc3\u3002<ul> <li>\u4e3a\u4e86\u7b80\u5316\u72b6\u6001\u7ba1\u7406\uff0c\u6211\u4eec\u7528 <code>Vue</code> \u63a7\u5236\u5de6\u53f3\u4e24\u4e2a\u5217\u8868</li> </ul> </li> </ul> <p>\u7d27\u63a5\u7740\uff0c\u521b\u5efaWebSocket\u8fde\u63a5\uff0c\u54cd\u5e94\u670d\u52a1\u5668\u6d88\u606f\uff0c\u5e76\u4e14\u66f4\u65b0\u4f1a\u8bdd\u5217\u8868\u548c\u7528\u6237\u5217\u8868</p> <pre><code>// \u4e3a\u4e86\u5efa\u7acb ws \u8fde\u63a5, \u53d1\u9001\u7684\u8fd8\u662f http \u8bf7\u6c42, \nvar ws = new WebSocket('ws://localhost:3000/ws/chat');\n\nws.onmessage = function(event) {\n    var data = event.data;\n    console.log(data);\n    var msg = JSON.parse(data);\n    if (msg.type === 'list') {\n        vmUserList.users = msg.data;\n    } else if (msg.type === 'join') {\n        addToUserList(vmUserList.users, msg.user);\n        addMessage(vmMessageList.messages, msg);\n    } else if (msg.type === 'left') {\n        removeFromUserList(vmUserList.users, msg.user);\n        addMessage(vmMessageList.messages, msg);\n    } else if (msg.type === 'chat') {\n        addMessage(vmMessageList.messages, msg);\n    }\n};\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_14","title":"\u914d\u7f6e\u53cd\u5411\u4ee3\u7406","text":"<ul> <li>\u5982\u679c\u7f51\u7ad9\u914d\u7f6e\u4e86\u53cd\u5411\u4ee3\u7406\uff0c\u4f8b\u5982Nginx\uff0c\u5219HTTP\u548cWebSocket\u90fd\u5fc5\u987b\u901a\u8fc7\u53cd\u5411\u4ee3\u7406\u8fde\u63a5Node\u670d\u52a1\u5668\u3002<ul> <li>HTTP\u7684\u53cd\u5411\u4ee3\u7406\u975e\u5e38\u7b80\u5355\uff0c\u4f46\u662f\u8981\u6b63\u5e38\u8fde\u63a5WebSocket\uff0c\u4ee3\u7406\u670d\u52a1\u5668\u5fc5\u987b\u652f\u6301WebSocket\u534f\u8bae\u3002</li> <li>Nginx \u4e3a\u4f8b, \u5b98\u65b9\u535a\u5ba2\uff1aUsing NGINX as a WebSocket Proxy</li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#rest","title":"REST","text":"<ul> <li>\u81ea\u4eceRoy Fielding\u535a\u58eb\u57282000\u5e74\u4ed6\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u63d0\u51faREST\uff08Representational State Transfer\uff09\u98ce\u683c\u7684\u8f6f\u4ef6\u67b6\u6784\u6a21\u5f0f\u540e\uff0cREST\u5c31\u57fa\u672c\u4e0a\u8fc5\u901f\u53d6\u4ee3\u4e86\u590d\u6742\u800c\u7b28\u91cd\u7684SOAP\uff0c\u6210\u4e3aWeb API\u7684\u6807\u51c6\u4e86\u3002</li> <li>\u7f16\u5199API\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f<ul> <li>\u7531\u4e8eAPI\u5c31\u662f\u628aWeb App\u7684\u529f\u80fd\u5168\u90e8\u5c01\u88c5\u4e86\uff0c\u6240\u4ee5\uff0c\u901a\u8fc7API\u64cd\u4f5c\u6570\u636e\uff0c\u53ef\u4ee5\u6781\u5927\u5730\u628a\u524d\u7aef\u548c\u540e\u7aef\u7684\u4ee3\u7801\u9694\u79bb\uff0c\u4f7f\u5f97\u540e\u7aef\u4ee3\u7801\u6613\u4e8e\u6d4b\u8bd5\uff0c\u524d\u7aef\u4ee3\u7801\u7f16\u5199\u66f4\u7b80\u5355\u3002</li> <li>\u6b64\u5916\uff0c\u5982\u679c\u6211\u4eec\u628a\u524d\u7aef\u9875\u9762\u770b\u4f5c\u662f\u4e00\u79cd\u7528\u4e8e\u5c55\u793a\u7684\u5ba2\u6237\u7aef\uff0c\u90a3\u4e48API\u5c31\u662f\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u6570\u636e\u3001\u64cd\u4f5c\u6570\u636e\u7684\u63a5\u53e3\u3002<ul> <li>\u8fd9\u79cd\u8bbe\u8ba1\u53ef\u4ee5\u83b7\u5f97\u6781\u9ad8\u7684\u6269\u5c55\u6027\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u9700\u8981\u5728\u624b\u673a\u4e0a\u8d2d\u4e70\u5546\u54c1\u65f6\uff0c\u53ea\u9700\u8981\u5f00\u53d1\u9488\u5bf9iOS\u548cAndroid\u7684\u4e24\u4e2a\u5ba2\u6237\u7aef\uff0c\u901a\u8fc7\u5ba2\u6237\u7aef\u8bbf\u95eeAPI\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u901a\u8fc7\u6d4f\u89c8\u5668\u9875\u9762\u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u800c\u540e\u7aef\u4ee3\u7801\u57fa\u672c\u65e0\u9700\u6539\u52a8\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#rest-api","title":"\u7f16\u5199 REST API","text":"<ul> <li>\u7f16\u5199REST API\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u7f16\u5199\u5904\u7406HTTP\u8bf7\u6c42\u7684async\u51fd\u6570\uff0c\u4e0d\u8fc7\uff0cREST\u8bf7\u6c42\u548c\u666e\u901a\u7684HTTP\u8bf7\u6c42\u6709\u51e0\u4e2a\u7279\u6b8a\u7684\u5730\u65b9\uff1a<ul> <li>REST\u8bf7\u6c42\u4ecd\u7136\u662f\u6807\u51c6\u7684HTTP\u8bf7\u6c42\uff0c\u4f46\u662f\uff0c\u9664\u4e86GET\u8bf7\u6c42\u5916\uff0cPOST\u3001PUT\u7b49\u8bf7\u6c42\u7684body\u662fJSON\u6570\u636e\u683c\u5f0f\uff0c\u8bf7\u6c42\u7684<code>Content-Type</code> \u4e3a <code>application/json</code></li> <li>REST\u54cd\u5e94\u8fd4\u56de\u7684\u7ed3\u679c\u662fJSON\u6570\u636e\u683c\u5f0f\uff0c\u56e0\u6b64\uff0c\u54cd\u5e94\u7684 <code>Content-Type</code>\u4e5f\u662f<code>application/json</code>\u3002</li> </ul> </li> <li>REST\u89c4\u8303\u5b9a\u4e49\u4e86\u8d44\u6e90\u7684\u901a\u7528\u8bbf\u95ee\u683c\u5f0f\uff0c\u867d\u7136\u5b83\u4e0d\u662f\u4e00\u4e2a\u5f3a\u5236\u8981\u6c42\uff0c\u4f46\u9075\u5b88\u8be5\u89c4\u8303\u53ef\u4ee5\u8ba9\u4eba\u6613\u4e8e\u7406\u89e3\u3002<ul> <li>\u83b7\u53d6\u8d44\u6e90, \u4f7f\u7528 GET<ul> <li>\u8d44\u6e90\u8fd8\u53ef\u4ee5\u6309\u5c42\u6b21\u7ec4\u7ec7</li> <li>\u5f53\u6211\u4eec\u53ea\u9700\u8981\u83b7\u53d6\u90e8\u5206\u6570\u636e\u65f6\uff0c\u53ef\u901a\u8fc7\u53c2\u6570\u9650\u5236\u8fd4\u56de\u7684\u7ed3\u679c\u96c6</li> </ul> </li> <li>\u65b0\u5efa\u4e00\u4e2aProduct\u4f7f\u7528POST\u8bf7\u6c42\uff0cJSON\u6570\u636e\u5305\u542b\u5728body\u4e2d</li> <li>\u66f4\u65b0\u4e00\u4e2aProduct\u4f7f\u7528PUT\u8bf7\u6c42</li> <li>\u5220\u9664\u4e00\u4e2aProduct\u4f7f\u7528DELETE\u8bf7\u6c42</li> </ul> </li> </ul> <pre><code>GET /api/products // \u83b7\u53d6\u6240\u6709\u5546\u54c1\nGET /api/products/123/reviews\nGET /api/products/123/reviews?page=2&amp;size=10&amp;sort=time // \u8fd4\u56de\u7b2c2\u9875\u8bc4\u8bba\uff0c\u6bcf\u987510\u9879\uff0c\u6309\u65f6\u95f4\u6392\u5e8f\n\nPOST /api/products // \u65b0\u5efa, JSON \u6570\u636e\u653e\u5728 body\u4e2d\n\nPUT /api/products/123 // \u66f4\u65b0\n\nDELETE /api/products/123\n</code></pre> <p>\u5728koa\u4e2d\u5904\u7406REST\u8bf7\u6c42\u662f\u975e\u5e38\u7b80\u5355\u7684\u3002<code>bodyParser()</code>\u8fd9\u4e2amiddleware\u53ef\u4ee5\u89e3\u6790\u8bf7\u6c42\u7684JSON\u6570\u636e\u5e76\u7ed1\u5b9a\u5230<code>ctx.request.body</code>\u4e0a\uff0c\u8f93\u51faJSON\u65f6\u6211\u4eec\u5148\u6307\u5b9a<code>ctx.response.type = 'application/json'</code>\uff0c\u7136\u540e\u628aJavaScript\u5bf9\u8c61\u8d4b\u503c\u7ed9<code>ctx.response.body</code>\u5c31\u5b8c\u6210\u4e86REST\u8bf7\u6c42\u7684\u5904\u7406\u3002</p>"},{"location":"code/JavaScript/node-js-note/#rest-api_1","title":"\u5f00\u53d1 REST API","text":"<ul> <li>\u4f7f\u7528REST\u867d\u7136\u975e\u5e38\u7b80\u5355\uff0c\u4f46\u662f\uff0c\u8bbe\u8ba1\u4e00\u5957\u5408\u7406\u7684REST\u6846\u67b6\u5374\u9700\u8981\u4ed4\u7ec6\u8003\u8651\u5f88\u591a\u95ee\u9898\u3002</li> <li>\u95ee\u9898\u4e00\uff1a\u5982\u4f55\u7ec4\u7ec7URL<ul> <li>\u5728\u5b9e\u9645\u5de5\u7a0b\u4e2d\uff0c\u4e00\u4e2aWeb\u5e94\u7528\u65e2\u6709REST\uff0c\u8fd8\u6709MVC\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u96c6\u6210\u5176\u4ed6\u7b2c\u4e09\u65b9\u7cfb\u7edf\u3002\u5982\u4f55\u7ec4\u7ec7URL\uff1f</li> <li>\u4e00\u4e2a\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u901a\u8fc7\u56fa\u5b9a\u7684\u524d\u7f00\u533a\u5206\u3002\u4f8b\u5982\uff0c<code>/static/</code>\u5f00\u5934\u7684URL\u662f\u9759\u6001\u8d44\u6e90\u6587\u4ef6\uff0c\u7c7b\u4f3c\u7684\uff0c<code>/api/</code>\u5f00\u5934\u7684URL\u5c31\u662fREST API\uff0c\u5176\u4ed6URL\u662f\u666e\u901a\u7684MVC\u8bf7\u6c42\u3002</li> </ul> </li> <li>\u95ee\u9898\u4e8c\uff1a\u5982\u4f55\u7edf\u4e00\u8f93\u51faREST<ul> <li>\u6ce8\u610f\u5230, \u670d\u52a1\u7aef\u6bcf\u6b21\u8fd4\u56de\u7684\u90fd\u662f\u4e00\u4e2a json \u5185\u5bb9, \u9700\u8981\u56fa\u5b9a\u8bbe\u7f6e <code>ctx.response.type = 'application/json';</code></li> <li>\u56de\u5fc6\u6211\u4eec\u96c6\u6210Nunjucks\u6a21\u677f\u5f15\u64ce\u7684\u65b9\u6cd5\uff1a\u901a\u8fc7\u4e00\u4e2amiddleware\u7ed9<code>ctx</code>\u6dfb\u52a0\u4e00\u4e2a<code>render()</code>\u65b9\u6cd5\uff0cController\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>ctx.render('view', model)</code>\u6765\u6e32\u67d3\u6a21\u677f\uff0c\u4e0d\u5fc5\u7f16\u5199\u91cd\u590d\u7684\u4ee3\u7801\u3002</li> <li>\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2amiddleware\u7ed9<code>ctx</code>\u6dfb\u52a0\u4e00\u4e2a<code>rest()</code>\u65b9\u6cd5</li> </ul> </li> <li>\u95ee\u9898\u4e09\uff1a\u5982\u4f55\u5904\u7406\u9519\u8bef<ul> <li>\u7b2c\u4e00\uff0c\u5f53REST API\u8bf7\u6c42\u51fa\u9519\u65f6\uff0c\u6211\u4eec\u5982\u4f55\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\uff1f<ul> <li>\u7c7b\u4f3c403\uff0c404\uff0c500\u7b49\u9519\u8bef\uff0c\u8fd9\u4e9b\u9519\u8bef\u5b9e\u9645\u4e0a\u662fHTTP\u8bf7\u6c42\u53ef\u80fd\u53d1\u751f\u7684\u9519\u8bef. \u670d\u52a1\u7aef\u4e0d\u7528\u7ba1</li> </ul> </li> <li>\u7b2c\u4e8c\uff0c\u5f53\u5ba2\u6237\u7aef\u6536\u5230REST\u54cd\u5e94\u540e\uff0c\u5982\u4f55\u5224\u65ad\u662f\u6210\u529f\u8fd8\u662f\u9519\u8bef\uff1f<ul> <li>\u8fd4\u56de\u9519\u8bef\u4fe1\u606f, \u4e00\u4e2aJSON\u5b57\u7b26\u4e32</li> </ul> </li> </ul> </li> <li>\u95ee\u9898\u56db\uff1a\u5982\u4f55\u5b9a\u4e49\u9519\u8bef\u7801<ul> <li>\u76f8\u8f83\u4e8e\u7528\u6570\u5b57, \u4e0d\u5982\u76f4\u63a5\u7528\u5b57\u7b26\u4e32, \u5373\u8bbe\u5b9a <code>\"code\": \"\u9519\u8bef\u4ee3\u7801\",</code> \u548c <code>\"message\": \"\u9519\u8bef\u63cf\u8ff0\u4fe1\u606f\"</code></li> <li>\u4f8b\u5982, \u4e00\u4e2a\u9519\u8bef\u4ee3\u7801\u53ef\u4ee5\u662f <code>auth:bad_password</code></li> </ul> </li> <li>\u95ee\u9898\u4e94\uff1a\u5982\u4f55\u8fd4\u56de\u9519\u8bef<ul> <li>\u4e00\u4e2a\u76f4\u89c2\u7684\u60f3\u6cd5\u662f (\u5728\u63a7\u5236\u6d41\u7a0b\u7684\u5404\u4e2a\u90e8\u5206) \u8c03\u7528<code>ctx.rest()</code></li> <li>\u66f4\u597d\u7684\u65b9\u5f0f\u662f\u5f02\u6b65\u51fd\u6570\u76f4\u63a5\u7528<code>throw</code>\u8bed\u53e5\u629b\u51fa\u9519\u8bef\uff0c\u8ba9middleware\u53bb\u5904\u7406\u9519\u8bef</li> <li>\u4e0b\u9762\u5b9e\u73b0\u4e00\u4e2a restify \u4e2d\u95f4\u5c42: \u4ec5\u4ec5\u5904\u7406\u524d\u7f00\u4e3a <code>/api/</code> \u7684\u8bf7\u6c42, \u5bf9\u4e8e\u5176\u4ed6\u8bf7\u6c42\u76f4\u63a5 next<ul> <li>\u7ed1\u5b9a <code>ctx.rest()</code> \u65b9\u6cd5 (\u95ee\u9898\u4e8c\uff1a\u5982\u4f55\u7edf\u4e00\u8f93\u51faREST)</li> <li>\u7528 <code>try...catch</code> \u7edf\u4e00\u5904\u7406\u9519\u8bef (\u5728 controller \u90e8\u5206\u76f4\u63a5\u629b\u51fa\u9519\u8bef\u5373\u53ef).</li> <li>\u53d7\u76ca\u4e8easync/await\u8bed\u6cd5\uff0c\u6211\u4eec\u5728middleware\u4e2d\u53ef\u4ee5\u76f4\u63a5\u7528<code>try...catch</code>\u6355\u83b7\u5f02\u5e38\u3002\u5982\u679c\u662fcallback\u6a21\u5f0f\uff0c\u5c31\u65e0\u6cd5\u7528<code>try...catch</code>\u6355\u83b7\uff0c\u4ee3\u7801\u7ed3\u6784\u5c06\u6df7\u4e71\u5f97\u591a\u3002</li> </ul> </li> </ul> </li> </ul> <pre><code>module.exports = {\n    APIError: function (code, message) {\n        this.code = code || \"internal:unknown_error\";\n        this.message = message || \"\";\n    },\n    restify: (pathPrefix) =&gt; {\n        // REST API\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3a/api/:\n        pathPrefix = pathPrefix || \"/api/\";\n        return async (ctx, next) =&gt; {\n            // \u662f\u5426\u662fREST API\u524d\u7f00?\n            if (ctx.request.path.startsWith(pathPrefix)) {\n                // \u7ed1\u5b9arest()\u65b9\u6cd5:\n                console.log(\n                    `Process API ${ctx.request.method} ${ctx.request.url}...`\n                );\n                ctx.rest = (data) =&gt; {\n                    ctx.response.type = \"application/json\";\n                    ctx.response.body = data;\n                };\n                try {\n                    await next();\n                } catch (e) {\n                    console.log(\"Process API error...\");\n                    ctx.response.status = 400;\n                    ctx.response.type = \"application/json\";\n                    ctx.response.body = {\n                        code: e.code || \"internal:unknown_error\",\n                        message: e.message || \"\",\n                    };\n                }\n            } else {\n                // \u8fd9\u91cc\u4ec5\u5904\u7406 /api \u5f00\u5934\u7684\u8bf7\u6c42, \u5bf9\u4e8e\u5176\u4ed6\u7684\u8bf7\u6c42, \u76f4\u63a5 next \u8df3\u8fc7\n                await next();\n            }\n        };\n    },\n};\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#mvvm","title":"MVVM","text":"<ul> <li>MVVM\u662fModel-View-ViewModel\u7684\u7f29\u5199\u3002</li> <li>\u7528JavaScript\u5728\u6d4f\u89c8\u5668\u4e2d\u64cd\u4f5cHTML\uff0c\u7ecf\u5386\u4e86\u82e5\u5e72\u53d1\u5c55\u9636\u6bb5\uff1a<ul> <li>\u7b2c\u4e00\u9636\u6bb5\uff0c\u76f4\u63a5\u7528JavaScript\u64cd\u4f5cDOM\u8282\u70b9\uff0c\u4f7f\u7528\u6d4f\u89c8\u5668\u63d0\u4f9b\u7684\u539f\u751fAPI</li> <li>\u7b2c\u4e8c\u9636\u6bb5\uff0c\u7531\u4e8e\u539f\u751fAPI\u4e0d\u597d\u7528\uff0c\u8fd8\u8981\u8003\u8651\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\uff0cjQuery\u6a2a\u7a7a\u51fa\u4e16</li> <li>\u7b2c\u4e09\u9636\u6bb5\uff0cMVC\u6a21\u5f0f\uff0c\u9700\u8981\u670d\u52a1\u5668\u7aef\u914d\u5408\uff0cJavaScript\u53ef\u4ee5\u5728\u524d\u7aef\u4fee\u6539\u670d\u52a1\u5668\u6e32\u67d3\u540e\u7684\u6570\u636e</li> </ul> </li> <li>MVVM \u7684\u6838\u5fc3\u601d\u8def: \u5173\u6ce8Model\u7684\u53d8\u5316\uff0c\u8ba9MVVM\u6846\u67b6\u53bb\u81ea\u52a8\u66f4\u65b0DOM\u7684\u72b6\u6001\uff0c\u4ece\u800c\u628a\u5f00\u53d1\u8005\u4ece\u64cd\u4f5cDOM\u7684\u7e41\u7410\u6b65\u9aa4\u4e2d\u89e3\u8131\u51fa\u6765\uff01</li> <li>MVVM<ul> <li>MVVM\u6700\u65e9\u7531\u5fae\u8f6f\u63d0\u51fa\u6765\uff0c\u5b83\u501f\u9274\u4e86\u684c\u9762\u5e94\u7528\u7a0b\u5e8f\u7684MVC\u601d\u60f3\uff0c\u5728\u524d\u7aef\u9875\u9762\u4e2d\uff0c\u628aModel\u7528\u7eafJavaScript\u5bf9\u8c61\u8868\u793a\uff0cView\u8d1f\u8d23\u663e\u793a\uff0c\u4e24\u8005\u505a\u5230\u4e86\u6700\u5927\u9650\u5ea6\u7684\u5206\u79bb\u3002</li> <li>\u628aModel\u548cView\u5173\u8054\u8d77\u6765\u7684\u5c31\u662fViewModel\u3002ViewModel\u8d1f\u8d23\u628aModel\u7684\u6570\u636e\u540c\u6b65\u5230View\u663e\u793a\u51fa\u6765\uff0c\u8fd8\u8d1f\u8d23\u628aView\u7684\u4fee\u6539\u540c\u6b65\u56deModel\u3002</li> <li>ViewModel\u5982\u4f55\u7f16\u5199\uff1f\u9700\u8981\u7528JavaScript\u7f16\u5199\u4e00\u4e2a\u901a\u7528\u7684ViewModel\uff0c\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u590d\u7528\u6574\u4e2aMVVM\u6a21\u578b\u4e86\u3002</li> </ul> </li> <li>\u5982\u679c\u662f\u7528jQuery\u5b9e\u73b0\u4fee\u6539DOM\u8282\u70b9, \u9700\u8981\u5148\u5b9a\u4f4d\u51fa DOM \u8282\u70b9, \u7136\u540e\u4fee\u6539\u5176\u5185\u5bb9; \u7136\u800c, \u5728 MVVM \u4e2d, \u6211\u4eec\u4e0d\u5173\u5fc3DOM\u7ed3\u6784, \u53ea\u5173\u5fc3\u6570\u636e\u662f\u600e\u4e48\u5b58\u50a8\u7684 \u2014\u2014 \u4f8b\u5982\u4f5c\u4e3a js \u5bf9\u8c61, \u56e0\u6b64\u76f4\u63a5\u5728\u4ee3\u7801\u4e2d\u4fee\u6539\u5bf9\u8c61\u503c\u5373\u53ef, DOM \u540c\u6b65\u4fee\u6539!<ul> <li>\u4f8b\u5982, \u5bf9\u4e8e <code>var person = {name: 'Bart'}</code>, \u6211\u4eec\u628a\u53d8\u91cf<code>person</code>\u770b\u4f5cModel\uff0c\u628aHTML\u67d0\u4e9bDOM\u8282\u70b9\u770b\u4f5cView\uff0c\u5e76\u5047\u5b9a\u5b83\u4eec\u4e4b\u95f4\u88ab\u5173\u8054\u8d77\u6765\u4e86\u3002</li> <li>\u901a\u8fc7\u6539\u53d8JavaScript\u5bf9\u8c61\u7684\u72b6\u6001\uff0c\u4f1a\u5bfc\u81f4DOM\u7ed3\u6784\u4f5c\u51fa\u5bf9\u5e94\u7684\u53d8\u5316</li> </ul> </li> <li>\u8457\u540d\u7684 MVVM \u6846\u67b6<ul> <li>Angular\uff1aGoogle\u51fa\u54c1\uff0c\u540d\u6c14\u5927\uff0c\u4f46\u662f\u5f88\u96be\u7528\uff1b</li> <li>Backbone.js\uff1a\u5165\u95e8\u975e\u5e38\u56f0\u96be\uff0c\u56e0\u4e3a\u81ea\u8eabAPI\u592a\u591a\uff1b</li> <li>Ember\uff1a\u4e00\u4e2a\u5927\u800c\u5168\u7684\u6846\u67b6\uff0c\u60f3\u5199\u4e2aHello world\u90fd\u5f88\u56f0\u96be\u3002</li> <li>\u6700\u4f73\u9009\u62e9\u662f\u5c24\u96e8\u6eaa\u5927\u795e\u5f00\u53d1\u7684MVVM\u6846\u67b6\uff1aVue.js</li> </ul> </li> </ul> <pre><code>/* \u7b2c\u4e00\u9636\u6bb5 */\nvar dom = document.getElementById('name');\ndom.innerHTML = 'Homer';\ndom.style.color = 'red';\n\n/* \u7b2c\u4e8c\u9636\u6bb5 */\n$('#name').text('Homer').css('color', 'red');\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#vue","title":"Vue \u5355\u5411\u7ed1\u5b9a","text":"<ul> <li>\u5728Vue\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u5199<code>{{ name }}</code>\u7ed1\u5b9a\u67d0\u4e2a\u5c5e\u6027\u3002\u5982\u679c\u5c5e\u6027\u5173\u8054\u7684\u662f\u5bf9\u8c61\uff0c\u8fd8\u53ef\u4ee5\u7528\u591a\u4e2a<code>.</code>\u5f15\u7528\uff0c\u4f8b\u5982\uff0c<code>{{ address.zipcode }}</code>\u3002</li> <li>\u53e6\u4e00\u79cd\u662f\u628a\u6307\u4ee4\u5199\u5728HTML\u8282\u70b9\u7684\u5c5e\u6027\u4e0a\uff0c\u5b83\u4f1a\u88abVue\u89e3\u6790\uff0c\u8be5\u8282\u70b9\u7684\u6587\u672c\u5185\u5bb9\u4f1a\u88ab\u7ed1\u5b9a\u4e3aModel\u7684\u6307\u5b9a\u5c5e\u6027\uff0c\u6ce8\u610f\u4e0d\u80fd\u518d\u5199\u53cc\u82b1\u62ec\u53f7<code>{{ }}</code>\u3002<ul> <li><code>&lt;p&gt;Hello, &lt;span v-text=\"name\"&gt;&lt;/span&gt;!&lt;/p&gt;</code></li> </ul> </li> </ul> <p>\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u5728 <code>&lt;head&gt;</code> \u5185\u90e8\u7f16\u5199\u7684JavaScript\u4ee3\u7801\uff0c\u9700\u8981\u7528jQuery\u628aMVVM\u7684\u521d\u59cb\u5316\u4ee3\u7801\u63a8\u8fdf\u5230\u9875\u9762\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c\uff0c\u5426\u5219\uff0c\u76f4\u63a5\u5728 <code>&lt;head&gt;</code> \u5185\u6267\u884cMVVM\u4ee3\u7801\u65f6\uff0cDOM\u8282\u70b9\u5c1a\u672a\u88ab\u6d4f\u89c8\u5668\u52a0\u8f7d\uff0c\u521d\u59cb\u5316\u5c06\u5931\u8d25\u3002</p> <p>\u6765\u770b\u521b\u5efa\u4e00\u4e2a VM \u7684\u6838\u5fc3\u4ee3\u7801:</p> <ul> <li><code>el</code> \u6307\u5b9a\u4e86\u8981\u628aModel\u7ed1\u5b9a\u5230\u54ea\u4e2aDOM\u6839\u8282\u70b9\u4e0a\uff0c\u8bed\u6cd5\u548cjQuery\u7c7b\u4f3c\u3002\u8fd9\u91cc\u7684<code>'#vm'</code>\u5bf9\u5e94ID\u4e3a<code>vm</code>\u7684\u4e00\u4e2a<code>&lt;div&gt;</code>\u8282\u70b9<ul> <li>\u5728\u8be5\u8282\u70b9\u4ee5\u53ca\u8be5\u8282\u70b9\u5185\u90e8\uff0c\u5c31\u662fVue\u53ef\u4ee5\u64cd\u4f5c\u7684View\u3002Vue\u53ef\u4ee5\u81ea\u52a8\u628aModel\u7684\u72b6\u6001\u6620\u5c04\u5230View\u4e0a\uff0c\u4f46\u662f\u4e0d\u80fd\u64cd\u4f5cView\u8303\u56f4\u4e4b\u5916\u7684\u5176\u4ed6DOM\u8282\u70b9\u3002</li> </ul> </li> </ul> <pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;!-- \u5f15\u7528jQuery --&gt;\n&lt;script src=\"/static/js/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;!-- \u5f15\u7528Vue --&gt;\n&lt;script src=\"/static/js/vue.js\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\n// \u521d\u59cb\u5316\u4ee3\u7801:\n$(function () {\n    var vm = new Vue({\n        el: '#vm',\n        data: {\n            name: 'Robot',\n            age: 15\n        }\n    });\n    window.vm = vm;\n});\n&lt;/script&gt;\n\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div id=\"vm\"&gt;\n        &lt;p&gt;Hello, {{ name }}!&lt;/p&gt;\n        &lt;p&gt;You are {{ age }} years old!&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;html&gt;\n</code></pre> <p>\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u89e3\u6790\u7528\u6237\u8f93\u5165, \u6267\u884c\u547d\u4ee4\u7684\u4ee3\u7801:</p> <ul> <li>\u7528 jQuery \u5f97\u5230\u8f93\u5165\u5185\u5bb9</li> <li>\u901a\u8fc7 <code>new Function(...)</code> \u89e3\u6790\u4ee3\u7801\u5b57\u7b26\u4e32</li> </ul> <p>\u5c06\u8be5\u51fd\u6570\u7ed1\u5b9a\u5230\u9875\u9762\u4e0a\u7684\u4e00\u4e2a button \u5373\u53ef.</p> <pre><code>function executeJs() {\n    try {\n        var code = $('#code').val();\n        var fn = new Function('var vm = window.vm;\\n' + code);\n        fn();\n    } catch (e) {}\n    return false;\n}\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#vue_1","title":"Vue \u53cc\u5411\u7ed1\u5b9a","text":"<ul> <li>\u53cc\u5411\u7ed1\u5b9a, \u5373\u7528\u6237\u66f4\u65b0\u4e86View\uff0cModel\u7684\u6570\u636e\u4e5f\u81ea\u52a8\u88ab\u66f4\u65b0</li> <li>\u4ec0\u4e48\u60c5\u51b5\u4e0b\u7528\u6237\u53ef\u4ee5\u66f4\u65b0View\u5462\uff1f\u586b\u5199\u8868\u5355\u5c31\u662f\u4e00\u4e2a\u6700\u76f4\u63a5\u7684\u4f8b\u5b50\u3002\u5f53\u7528\u6237\u586b\u5199\u8868\u5355\u65f6\uff0cView\u7684\u72b6\u6001\u5c31\u88ab\u66f4\u65b0\u4e86\uff0c\u5982\u679c\u6b64\u65f6MVVM\u6846\u67b6\u53ef\u4ee5\u81ea\u52a8\u66f4\u65b0Model\u7684\u72b6\u6001\uff0c\u90a3\u5c31\u76f8\u5f53\u4e8e\u6211\u4eec\u628aModel\u548cView\u505a\u4e86\u53cc\u5411\u7ed1\u5b9a</li> <li>\u53cc\u5411\u7ed1\u5b9a\u6700\u5927\u7684\u597d\u5904\u662f\u6211\u4eec\u4e0d\u518d\u9700\u8981\u7528jQuery\u53bb\u67e5\u8be2\u8868\u5355\u7684\u72b6\u6001\uff0c\u800c\u662f\u76f4\u63a5\u83b7\u5f97\u4e86\u7528JavaScript\u5bf9\u8c61\u8868\u793a\u7684Model\u3002</li> </ul>"},{"location":"code/JavaScript/node-js-note/#_15","title":"\u5904\u7406\u4e8b\u4ef6","text":"<ul> <li>\u5f53\u7528\u6237\u63d0\u4ea4\u8868\u5355\u65f6\uff0c\u4f20\u7edf\u7684\u505a\u6cd5\u662f\u54cd\u5e94<code>onsubmit</code>\u4e8b\u4ef6\uff0c\u7528jQuery\u83b7\u53d6\u8868\u5355\u5185\u5bb9\uff0c\u68c0\u67e5\u8f93\u5165\u662f\u5426\u6709\u6548\uff0c\u6700\u540e\u63d0\u4ea4\u8868\u5355\uff0c\u6216\u8005\u7528AJAX\u63d0\u4ea4\u8868\u5355\u3002</li> <li>\u73b0\u5728\uff0c\u83b7\u53d6\u8868\u5355\u5185\u5bb9\u5df2\u7ecf\u4e0d\u9700\u8981\u4e86\uff0c\u56e0\u4e3a\u53cc\u5411\u7ed1\u5b9a\u76f4\u63a5\u8ba9\u6211\u4eec\u83b7\u5f97\u4e86\u8868\u5355\u5185\u5bb9\uff0c\u5e76\u4e14\u83b7\u5f97\u4e86\u5408\u9002\u7684\u6570\u636e\u7c7b\u578b\u3002</li> <li>\u54cd\u5e94<code>onsubmit</code>\u4e8b\u4ef6\u4e5f\u53ef\u4ee5\u653e\u5230VM\u4e2d\u3002\u6211\u4eec\u5728<code>&lt;form&gt;</code>\u5143\u7d20\u4e0a\u4f7f\u7528\u6307\u4ee4<ul> <li><code>&lt;form id=\"vm\" v-on:submit.prevent=\"register\"&gt;</code></li> <li>\u5176\u4e2d\uff0c<code>v-on:submit=\"register\"</code>\u6307\u4ee4\u5c31\u4f1a\u81ea\u52a8\u76d1\u542c\u8868\u5355\u7684<code>submit</code>\u4e8b\u4ef6\uff0c\u5e76\u8c03\u7528<code>register</code>\u65b9\u6cd5\u5904\u7406\u8be5\u4e8b\u4ef6\u3002\u4f7f\u7528<code>.prevent</code>\u8868\u793a\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\uff0c\u8fd9\u6837\uff0c\u6d4f\u89c8\u5668\u4e0d\u518d\u5904\u7406<code>&lt;form&gt;</code>\u7684<code>submit</code>\u4e8b\u4ef6\u3002<ul> <li>\u8865\u5145: 1\u3001prevent\u662fpreventDefault,\u963b\u6b62\u6807\u7b7e\u9ed8\u8ba4\u884c\u4e3a\uff0c\u6709\u4e9b\u6807\u7b7e\u6709\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4f8b\u5982a\u6807\u7b7e\u7684\u8df3\u8f6c\u94fe\u63a5\u5c5e\u6027href\u7b49\u3002 2\u3001submit\u70b9\u51fb\u9ed8\u8ba4\u884c\u4e3a\u662f\u63d0\u4ea4\u8868\u5355\uff0c\u8fd9\u91cc\u5e76\u4e0d\u9700\u8981\u5b83\u63d0\u4ea4\uff0c\u53ea\u9700\u8981\u6267\u884cregister\u65b9\u6cd5\uff0c\u6545\u963b\u6b62\u4e3a\u5999\u3002 3\u3001stop\u662fstopPropagation\uff0c\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\uff0c\u70b9\u51fb\u54ea\u4e2a\u5143\u7d20\uff0c\u5c31\u53ea\u54cd\u5e94\u8fd9\u4e2a\u5143\u7d20\uff0c\u7236\u7ea7\u5c31\u4e0d\u4f1a\u54cd\u5e94\u4e86</li> </ul> </li> <li>\u56e0\u4e3a\u6211\u4eec\u6307\u5b9a\u4e86\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u662f<code>register</code>\uff0c\u6240\u4ee5\u9700\u8981\u5728\u521b\u5efaVM\u65f6\u6dfb\u52a0\u4e00\u4e2a<code>register</code>\u51fd\u6570<ul> <li>\u5728<code>register()</code>\u51fd\u6570\u5185\u90e8\uff0c\u6211\u4eec\u53ef\u4ee5\u7528AJAX\u628aJSON\u683c\u5f0f\u7684Model\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u5c31\u5b8c\u6210\u4e86\u7528\u6237\u6ce8\u518c\u7684\u529f\u80fd\u3002</li> </ul> </li> </ul> </li> </ul> <pre><code>// \u5728 VM \u4e2d\u5b9a\u4e49\u7684 register \u51fd\u6570\nvar vm = new Vue({\n    el: '#vm',\n    data: {\n        ...\n    },\n    methods: {\n        register: function () {\n            // \u663e\u793aJSON\u683c\u5f0f\u7684Model:\n            alert(JSON.stringify(this.$data));\n            // AJAX POST...\n        }\n    }\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#dom-v-for","title":"\u540c\u6b65DOM\u7ed3\u6784: v-for","text":"<ul> <li>\u9664\u4e86\u7b80\u5355\u7684\u5355\u5411\u7ed1\u5b9a\u548c\u53cc\u5411\u7ed1\u5b9a\uff0cMVVM\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u7528\u9014\uff0c\u5c31\u662f\u8ba9Model\u548cDOM\u7684\u7ed3\u6784\u4fdd\u6301\u540c\u6b65\u3002</li> <li><code>v-for</code>\u6307\u4ee4\u628a\u6570\u7ec4\u548c\u4e00\u7ec4<code>&lt;li&gt;</code>\u5143\u7d20\u7ed1\u5b9a\u4e86\u3002\u5728<code>&lt;li&gt;</code>\u5143\u7d20\u5185\u90e8\uff0c\u7528\u5faa\u73af\u53d8\u91cf<code>t</code>\u5f15\u7528\u67d0\u4e2a\u5c5e\u6027\uff0c\u4f8b\u5982\uff0c<code>{{ t.name }}</code>\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u5982\u4f55\u66f4\u65b0Model\uff0c\u4e0d\u5173\u5fc3\u5982\u4f55\u589e\u5220DOM\u8282\u70b9\uff0c\u5927\u5927\u7b80\u5316\u4e86\u6574\u4e2a\u9875\u9762\u7684\u903b\u8f91\u3002</li> <li>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cVue\u4e4b\u6240\u4ee5\u80fd\u591f\u76d1\u542cModel\u72b6\u6001\u7684\u53d8\u5316\uff0c\u662f\u56e0\u4e3aJavaScript\u8bed\u8a00\u672c\u8eab\u63d0\u4f9b\u4e86Proxy\u6216\u8005Object.observe()\u673a\u5236\u6765\u76d1\u542c\u5bf9\u8c61\u72b6\u6001\u7684\u53d8\u5316\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u6570\u7ec4\u5143\u7d20\u7684\u8d4b\u503c\uff0c\u5374\u6ca1\u6709\u529e\u6cd5\u76f4\u63a5\u76d1\u542c<ul> <li><code>vm.todos[0] = {}</code> \u8fd9\u6837\u7684\u8d4b\u503c\u65e0\u6cd5\u88ab\u76d1\u542c/\u540c\u6b65\u4fee\u6539, Vue\u65e0\u6cd5\u66f4\u65b0View</li> <li>\u800c\u5e94\u8be5\u8fd9\u6837\u4fee\u6539 <code>vm.todos[0].name = 'New name';</code></li> <li>\u6216\u8005\uff0c\u901a\u8fc7<code>splice()</code>\u65b9\u6cd5\uff0c\u5220\u9664\u67d0\u4e2a\u5143\u7d20\u540e\uff0c\u518d\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\uff0c\u8fbe\u5230\u201c\u8d4b\u503c\u201d\u7684\u6548\u679c<ul> <li><code>vm.todos.splice(index, 1, {});</code></li> <li>Vue\u53ef\u4ee5\u76d1\u542c\u6570\u7ec4\u7684 <code>splice</code>\u3001<code>push</code>\u3001<code>unshift</code> \u7b49\u65b9\u6cd5\u8c03\u7528</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/JavaScript/node-js-note/#api","title":"\u96c6\u6210 API","text":"<ul> <li>\u4e0a\u4e00\u8282\u4e2d\u7684 TODO \u4ec5\u4ec5\u662f\u5728\u6d4f\u89c8\u5668, \u6211\u4eec\u9700\u8981\u8ddf\u670d\u52a1\u7aef\u540c\u6b65.</li> <li>\u5982\u679c\u8981\u628a\u8fd9\u4e2a\u7b80\u5355\u7684TODO\u5e94\u7528\u53d8\u6210\u4e00\u4e2a\u7528\u6237\u80fd\u4f7f\u7528\u7684Web\u5e94\u7528\uff0c\u6211\u4eec\u9700\u8981\u89e3\u51b3\u51e0\u4e2a\u95ee\u9898\uff1a   1. \u7528\u6237\u7684TODO\u6570\u636e\u5e94\u8be5\u4ece\u540e\u53f0\u8bfb\u53d6\uff1b   2. \u5bf9TODO\u7684\u589e\u5220\u6539\u5fc5\u987b\u540c\u6b65\u5230\u670d\u52a1\u5668\u540e\u7aef\uff1b   3. \u7528\u6237\u5728View\u4e0a\u5fc5\u987b\u80fd\u591f\u4fee\u6539TODO\u3002</li> <li>\u7b2c1\u4e2a\u548c\u7b2c2\u4e2a\u95ee\u9898\u90fd\u662f\u548cAPI\u76f8\u5173\u7684\u3002\u53ea\u8981\u6211\u4eec\u5b9e\u73b0\u4e86\u5408\u9002\u7684API\u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u5728MVVM\u5185\u90e8\u66f4\u65b0Model\u7684\u540c\u65f6\uff0c\u901a\u8fc7API\u628a\u6570\u636e\u66f4\u65b0\u53cd\u6620\u5230\u670d\u52a1\u5668\u7aef\uff0c\u8fd9\u6837\uff0c\u7528\u6237\u6570\u636e\u5c31\u4fdd\u5b58\u5230\u4e86\u670d\u52a1\u5668\u7aef\uff0c\u4e0b\u6b21\u6253\u5f00\u9875\u9762\u65f6\u5c31\u53ef\u4ee5\u8bfb\u53d6TODO\u5217\u8868\u3002<ul> <li>\u5b9e\u73b0 API<ul> <li>GET /api/todos\uff1a\u8fd4\u56de\u6240\u6709TODO\u5217\u8868\uff1b</li> <li>POST /api/todos\uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684TODO\uff0c\u5e76\u8fd4\u56de\u521b\u5efa\u540e\u7684\u5bf9\u8c61\uff1b</li> <li>PUT /api/todos/:id\uff1a\u66f4\u65b0\u4e00\u4e2aTODO\uff0c\u5e76\u8fd4\u56de\u66f4\u65b0\u540e\u7684\u5bf9\u8c61\uff1b</li> <li>DELETE /api/todos/:id\uff1a\u5220\u9664\u4e00\u4e2aTODO\u3002</li> </ul> </li> <li>\u51c6\u5907\u597dAPI\u540e\uff0c\u5728Vue\u4e2d\uff0c\u6211\u4eec\u5982\u4f55\u628aModel\u7684\u66f4\u65b0 \u540c\u6b65\u5230\u670d\u52a1\u5668\u7aef\uff1f<ul> <li>\u4e00\u662f\u76f4\u63a5\u7528jQuery\u7684AJAX\u8c03\u7528REST API\uff0c\u4e0d\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6bd4\u8f83\u9ebb\u70e6\u3002</li> <li>\u7b2c\u4e8c\u4e2a\u65b9\u6cd5\u662f\u4f7f\u7528vue-resource\u8fd9\u4e2a\u9488\u5bf9Vue\u7684\u6269\u5c55\uff0c\u5b83\u53ef\u4ee5\u7ed9VM\u5bf9\u8c61\u52a0\u4e0a\u4e00\u4e2a<code>$resource</code>\u5c5e\u6027\uff0c\u901a\u8fc7<code>$resource</code>\u6765\u65b9\u4fbf\u5730\u64cd\u4f5cAPI\u3002</li> </ul> </li> </ul> </li> <li>\u5982\u4f55\u5b9e\u73b0\u4fee\u6539?<ul> <li>\u7528<code>contenteditable=\"true\"</code> \u8ba9DOM\u8282\u70b9\u53d8\u6210\u53ef\u7f16\u8f91\u7684\uff0c\u7528<code>v-on:blur=\"update(t, 'name', $event)\"</code>\u5728\u7f16\u8f91\u7ed3\u675f\u65f6\u8c03\u7528<code>update()</code>\u65b9\u6cd5\u5e76\u4f20\u5165\u53c2\u6570\uff0c\u7279\u6b8a\u53d8\u91cf<code>$event</code>\u8868\u793aDOM\u4e8b\u4ef6\u672c\u8eab\u3002</li> </ul> </li> </ul> <pre><code>&lt;div id=\"vm\"&gt;\n    &lt;h3&gt;{{ title }}&lt;/h3&gt;\n    &lt;ol&gt;\n        &lt;li v-for=\"t in todos\"&gt;\n            &lt;dl&gt;\n                &lt;dt contenteditable=\"true\" v-on:blur=\"update(t, 'name', $event)\"&gt;{{ t.name }}&lt;/dt&gt;\n                &lt;dd contenteditable=\"true\" v-on:blur=\"update(t, 'description', $event)\"&gt;{{ t.description }}&lt;/dd&gt;\n                &lt;dd&gt;&lt;a href=\"#0\" v-on:click=\"remove(t)\"&gt;Delete&lt;/a&gt;&lt;/dd&gt;\n            &lt;/dl&gt;\n        &lt;/li&gt;\n    &lt;/ol&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#vue-resource","title":"vue-resource","text":"<p>\u4f7f\u7528: <code>&lt;script src=\"https://cdn.jsdelivr.net/vue.resource/1.0.3/vue-resource.min.js\"&gt;&lt;/script&gt;</code></p> <pre><code>var vm = new Vue({\n    el: '#vm',\n    data: {\n        title: 'TODO List',\n        todos: []\n    },\n    // \u521b\u5efa\u540e\u6267\u884c init \u51fd\u6570\n    created: function () {\n        this.init();\n    },\n    methods: {\n        init: function () {\n            var that = this;\n            that.$resource('/api/todos').get().then(function (resp) {\n                // \u8c03\u7528API\u6210\u529f\u65f6\u8c03\u7528json()\u5f02\u6b65\u8fd4\u56de\u7ed3\u679c:\n                resp.json().then(function (result) {\n                    // \u66f4\u65b0VM\u7684todos:\n                    that.todos = result.todos;\n                });\n            }, function (resp) {\n                // \u8c03\u7528API\u5931\u8d25:\n                alert('error');\n            });\n\n        create: function (todo) {\n            var that = this;\n            that.$resource('/api/todos').save(todo).then(function (resp) {\n                resp.json().then(function (result) {\n                    that.todos.push(result);\n                });\n            }, showError);\n        },\n        update: function (todo, prop, e) {\n            ...\n        },\n        remove: function (todo) {\n            ...\n        }\n        }\n    }\n});\n</code></pre>"},{"location":"code/JavaScript/node-js-note/#_16","title":"\u5728\u7ebf\u7535\u5b50\u8868\u683c","text":"<ul> <li>\u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49Model\u7684\u7ed3\u6784\uff0c\u5b83\u7684\u4e3b\u8981\u6570\u636e\u5c31\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5355\u5143\u683c\u7528\u4e00\u4e2aJavaScript\u5bf9\u8c61\u8868\u793a<ul> <li>\u5b9a\u4e49\u7b2c\u4e00\u884c header <code>{ row: 0, col: 0, text: '' },</code></li> <li>\u4ece\u7b2c\u4e8c\u884c\u5f00\u59cb\u4e3a\u6570\u636e <code>{ row: 1, col: 1, text: '' },</code></li> <li>\u8bb0\u5f55\u5f53\u524d\u6d3b\u52a8\u5355\u5143\u683c (<code>selectedRowIndex, selectedColIndex</code>)</li> </ul> </li> <li>\u7d27\u63a5\u7740\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628aModel\u7684\u7ed3\u6784\u6620\u5c04\u5230\u4e00\u4e2a<code>&lt;table&gt;</code>\u4e0a</li> <li>\u7528Vue\u628aModel\u548cView\u5173\u8054\u8d77\u6765\uff0c\u8fd9\u4e2a\u7535\u5b50\u8868\u683c\u7684\u539f\u578b\u5df2\u7ecf\u53ef\u4ee5\u8fd0\u884c\u4e86\uff01</li> </ul> <pre><code>data: {\n    title: 'New Sheet',\n    header: [ // \u5bf9\u5e94\u9996\u884c A, B, C...\n        { row: 0, col: 0, text: '' },\n        { row: 0, col: 1, text: 'A' },\n        { row: 0, col: 2, text: 'B' },\n        { row: 0, col: 3, text: 'C' },\n        ...\n        { row: 0, col: 10, text: 'J' }\n    ],\n    rows: [\n        [\n         { row: 1, col: 0, text: '1' },\n         { row: 1, col: 1, text: '' },\n         { row: 1, col: 2, text: '' },\n            ...\n         { row: 1, col: 10, text: '' },\n        ],\n        [\n         { row: 2, col: 0, text: '2' },\n         { row: 2, col: 1, text: '' },\n         { row: 2, col: 2, text: '' },\n            ...\n         { row: 2, col: 10, text: '' },\n        ],\n        ...\n        [\n         { row: 10, col: 0, text: '10' },\n         { row: 10, col: 1, text: '' },\n         { row: 10, col: 2, text: '' },\n            ...\n         { row: 10, col: 10, text: '' },\n        ]\n    ],\n    selectedRowIndex: 0, // \u5f53\u524d\u6d3b\u52a8\u5355\u5143\u683c\u7684row\n    selectedColIndex: 0 // \u5f53\u524d\u6d3b\u52a8\u5355\u5143\u683c\u7684col\n}\n</code></pre> <pre><code>&lt;table id=\"sheet\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th v-for=\"cell in header\" v-text=\"cell.text\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;tr v-for=\"tr in rows\"&gt;\n            &lt;td v-for=\"cell in tr\" v-text=\"cell.text\"&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre> <ul> <li>\u4e0b\u4e00\u6b65\uff0c\u6211\u4eec\u60f3\u5728\u5355\u5143\u683c\u5185\u8f93\u5165\u4e00\u4e9b\u6587\u672c. \u9700\u8981\u5224\u65ad: \u9996\u884c\u548c\u9996\u5217\u4e0d\u80fd\u7f16\u8f91<ul> <li>\u9996\u884c\u5bf9\u5e94\u7684\u662f<code>&lt;th&gt;</code>\uff0c\u9ed8\u8ba4\u662f\u4e0d\u53ef\u7f16\u8f91\u7684\uff0c\u9996\u5217\u5bf9\u5e94\u7684\u662f\u7b2c\u4e00\u5217\u7684<code>&lt;td&gt;</code>\uff0c\u6240\u4ee5\uff0c\u9700\u8981\u5224\u65ad\u67d0\u4e2a<code>&lt;td&gt;</code>\u662f\u5426\u53ef\u7f16\u8f91\uff0c\u6211\u4eec\u7528<code>v-bind</code>\u6307\u4ee4\u7ed9\u67d0\u4e2aDOM\u5143\u7d20\u7ed1\u5b9a\u5bf9\u5e94\u7684HTML\u5c5e\u6027</li> <li>\u5728Model\u4e2d\u7ed9\u6bcf\u4e2a\u5355\u5143\u683c\u5bf9\u8c61\u52a0\u4e0a<code>contentEditable</code>\u5c5e\u6027\uff0c\u5c31\u53ef\u4ee5\u51b3\u5b9a\u54ea\u4e9b\u5355\u5143\u683c\u53ef\u7f16\u8f91\u3002</li> <li><code>&lt;td v-for=\"cell in tr\" v-bind:contenteditable=\"cell.contentEditable\" v-text=\"cell.text\"&gt;&lt;/td&gt;</code></li> </ul> </li> <li>\u6700\u540e\uff0c\u7ed9<code>&lt;td&gt;</code>\u7ed1\u5b9aclick\u4e8b\u4ef6\uff0c\u8bb0\u5f55\u5f53\u524d\u6d3b\u52a8\u5355\u5143\u683c\u7684row\u548ccol\uff0c\u518d\u7ed1\u5b9ablur\u4e8b\u4ef6\uff0c\u5728\u5355\u5143\u683c\u5185\u5bb9\u7f16\u8f91\u7ed3\u675f\u540e\u66f4\u65b0Model<ul> <li></li> </ul> </li> </ul> <pre><code>var vm = new Vue({\n    ...\n    methods: {\n        focus: function (cell) {\n            this.selectedRowIndex = cell.row;\n            this.selectedColIndex = cell.col;\n        },\n        change: function (e) {\n            // change\u4e8b\u4ef6\u4f20\u5165\u7684e\u662fDOM\u4e8b\u4ef6\n            var\n                rowIndex = this.selectedRowIndex,\n                colIndex = this.selectedColIndex,\n                text;\n            if (rowIndex &gt; 0 &amp;&amp; colIndex &gt; 0) {\n                text = e.target.innerText; // \u83b7\u53d6td\u7684innerText\n                this.rows[rowIndex - 1][colIndex].text = text;\n            }\n        }\n    }\n});\n</code></pre> <ul> <li>\u603b\u7ed3 MVVM \u9002\u7528\u8303\u56f4<ul> <li>\u4ece\u51e0\u4e2a\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cMVVM\u6700\u5927\u7684\u4f18\u52bf\u662f\u7f16\u5199\u524d\u7aef\u903b\u8f91\u975e\u5e38\u590d\u6742\u7684\u9875\u9762\uff0c\u5c24\u5176\u662f\u9700\u8981\u5927\u91cfDOM\u64cd\u4f5c\u7684\u903b\u8f91\uff0c\u5229\u7528MVVM\u53ef\u4ee5\u6781\u5927\u5730\u7b80\u5316\u524d\u7aef\u9875\u9762\u7684\u903b\u8f91\u3002</li> <li>\u5bf9\u4e8e\u4ee5\u5c55\u793a\u903b\u8f91\u4e3a\u4e3b\u7684\u9875\u9762\uff0c\u4f8b\u5982\uff0c\u65b0\u95fb\uff0c\u535a\u5ba2\u3001\u6587\u6863\u7b49\uff0c\u4e0d\u80fd\u4f7f\u7528MVVM\u5c55\u793a\u6570\u636e\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u9875\u9762\u9700\u8981\u88ab\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\uff0c\u800c\u641c\u7d22\u5f15\u64ce\u65e0\u6cd5\u83b7\u53d6\u4f7f\u7528MVVM\u5e76\u901a\u8fc7API\u52a0\u8f7d\u7684\u6570\u636e\u3002</li> <li>\u6240\u4ee5\uff0c\u9700\u8981SEO\uff08Search Engine Optimization\uff09\u7684\u9875\u9762\uff0c\u4e0d\u80fd\u4f7f\u7528MVVM\u5c55\u793a\u6570\u636e\u3002\u4e0d\u9700\u8981SEO\u7684\u9875\u9762\uff0c\u5982\u679c\u524d\u7aef\u903b\u8f91\u590d\u6742\uff0c\u5c31\u9002\u5408\u4f7f\u7528MVVM\u5c55\u793a\u6570\u636e\uff0c\u4f8b\u5982\uff0c\u5de5\u5177\u7c7b\u9875\u9762\uff0c\u590d\u6742\u7684\u8868\u5355\u9875\u9762\uff0c\u7528\u6237\u767b\u5f55\u540e\u624d\u80fd\u64cd\u4f5c\u7684\u9875\u9762\u7b49\u7b49\u3002</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/","title":"Python note","text":"<p>\u57fa\u4e8e\u8bfe\u7a0b\u6559\u6848, \u6458\u5f55\u6027\u8d28; \u7ef4\u62a4\u5174\u81f4\u7f3a\u7f3a, \u6682\u4e14\u5982\u6b64.</p>"},{"location":"code/Python/Python-note/#_1","title":"\u6559\u6848\u76ee\u5f55","text":"<ul> <li>\u8865\u5145\uff1a\u7f16\u7a0b\u6982\u8ff0</li> <li>Python \u8bed\u8a00\u6982\u8ff0\u548c\u5b89\u88c5</li> <li>Python \u57fa\u7840\u77e5\u8bc6<ul> <li>\u5bf9\u8c61</li> <li>\u53d8\u91cf</li> <li>\u53d8\u91cf\u540d</li> <li>\u6570\u5b57\u7c7b\u578b</li> <li>\u5b57\u7b26\u4e32\u5b57\u9762\u91cf</li> <li>\u5b57\u7b26\u96c6\u548c\u76f8\u5173\u5185\u7f6e\u51fd\u6570</li> <li>\u5b57\u7b26\u4e32\u652f\u6301\u7684\u8fd0\u7b97\u7b26</li> </ul> </li> <li>\u6a21\u5757\u548c__name__</li> <li>\u51fd\u6570\u5b9a\u4e49\u548c\u8c03\u7528</li> <li>\u5217\u8868<ul> <li>\u5217\u8868\u7684\u4e0b\u6807</li> <li>\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e0efor\u5faa\u73af\uff0crange\u5bf9\u8c61</li> <li>\u521b\u5efa\u5217\u8868</li> <li>\u5217\u8868\u5143\u7d20\u7684\u589e\u52a0</li> <li>\u5217\u8868\u5143\u7d20\u7684\u5220\u9664</li> <li>\u5217\u8868\u5143\u7d20\u7684\u8bbf\u95ee</li> <li>\u5207\u7247</li> <li>\u6392\u5e8f</li> </ul> </li> <li>\u5143\u7ec4<ul> <li>\u5e8f\u5217\u89e3\u5305</li> <li>\u5143\u7ec4\u4e4bzip\u548cenumerate</li> </ul> </li> <li>\u9009\u62e9\u7ed3\u6784\u4e4b\u6761\u4ef6\u8868\u8fbe\u5f0f</li> <li>\u9009\u62e9\u7ed3\u6784\u4e4b\u591a\u5206\u652f\u7ed3\u6784</li> <li>\u5faa\u73af\u7ed3\u6784\u4e4bwhile\u5faa\u73af</li> <li>\u5faa\u73af\u7ed3\u6784\u4e4bfor\u5faa\u73af\u5faa\u73af\u7ed3\u6784</li> <li>\u9012\u5f52\u51fd\u6570\uff08\u62d3\u5c55\uff09</li> <li>\u5217\u8868\u8fdb\u9636<ul> <li>for\u5faa\u73af+\u5220\u9664\u5143\u7d20</li> <li>\u5217\u8868\u63a8\u5bfc\u5f0f</li> <li>\u751f\u6210\u5668\u8868\u8fbe\u5f0f</li> <li>\u77e9\u9635\u4ecb\u7ecd</li> </ul> </li> <li>\u5b57\u5178<ul> <li>\u5b57\u5178\u7684\u5b9a\u4e49\u548c\u5b57\u5178\u5e8f\u5217\u89e3\u5305</li> <li>\u8bbf\u95ee\u5b57\u5178\u7684\u5143\u7d20\u548c\u904d\u5386\u5b57\u5178</li> <li>\u4fee\u6539\u5b57\u5178</li> </ul> </li> <li>\u96c6\u5408</li> <li>sorted\u65b9\u6cd5\u7684\u5b9e\u8df5\u5e94\u7528</li> <li>\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u3010\u7565\u3011<ul> <li>\u56de\u987e\u5b57\u7b26\u4e32\u4e0e%\u683c\u5f0f\u5316\u8fd0\u7b97\u7b26</li> <li>\u5b57\u7b26\u4e32\u7684format\u65b9\u6cd5\u548cformat\u51fd\u6570</li> <li>\u5b57\u7b26\u4e32\u7684\u586b\u5145\u5bf9\u9f50\u65b9\u6cd5</li> <li>f-string\u4ee5\u53ca\u4e2d\u82f1\u6587\u6df7\u5408\u7684\u683c\u5f0f\u5316</li> </ul> </li> <li>\u5b57\u7b26\u4e32\u65b9\u6cd5<ul> <li>strip\u7cfb\u5217\uff1astrip/lstrip/rstrip</li> <li>is\u7cfb\u5217\uff1aisdigit/islower/isupper/isspace</li> <li>split\u548cjoin</li> <li>\u66ff\u6362\u7cfb\u5217: lower/upper/replace</li> <li>\u67e5\u627e\u7cfb\u5217: startswith/endswith/rindex/find/rfind/partition/rpartition</li> <li>\u591a\u4e2a\u5b57\u7b26\u66ff\u6362: maketrans/translate</li> </ul> </li> <li>\u5b57\u7b26\u4e32\u5e94\u7528</li> <li>\u5b57\u7b26\u4e32\u7f16\u7801\uff1astr\u4e0ebytes\u5bf9\u8c61\u4e4b\u95f4\u7684\u8f6c\u6362(\u7f16\u7801\u548c\u89e3\u7801\uff09</li> <li>\u6587\u4ef6\u7684\u8bfb\u5199<ul> <li>\u7edd\u5bf9\u8def\u5f84\u548c\u76f8\u5bf9\u8def\u5f84</li> <li>\u4e8c\u8fdb\u5236\u6587\u4ef6</li> <li>\u6587\u672c\u6587\u4ef6</li> </ul> </li> <li>\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff1apickle\u3001json \u548c csv \u6a21\u5757</li> <li>\u5f02\u5e38\u5904\u7406<ul> <li>raise \u8bed\u53e5</li> <li>assert \u8bed\u53e5</li> </ul> </li> <li>traceback \u6a21\u5757</li> <li>re\u6a21\u5757\u7684\u4f7f\u7528<ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li>sub \u548c split \u65b9\u6cd5</li> </ul> </li> <li>\u51fd\u6570\u5b9a\u4e49\u548c\u8c03\u7528\uff1a\u53ef\u53d8\u957f\u53c2\u6570\u4ee5\u53ca\u53c2\u6570\u5339\u914d</li> <li>\u51fd\u6570\u6848\u4f8b\u7cbe\u9009</li> <li>\u53d8\u91cf\u4f5c\u7528\u57df</li> <li>\u51fd\u6570\u7684\u8fdb\u9636\u4f7f\u7528</li> <li>\u9012\u5f52\u51fd\u6570</li> </ul>"},{"location":"code/Python/Python-note/#_2","title":"\u5bf9\u8c61\u4e0e\u53d8\u91cf","text":"<ul> <li>\u5bf9\u8c61(object)\uff1aPython\u4e2d\u5404\u79cd\u6570\u636e\u7684\u62bd\u8c61</li> <li>\u8868\u8fbe\u5f0f(expression): \u5404\u4e2a\u5bf9\u8c61\u901a\u8fc7\u8fd0\u7b97\u7b26(operator)\u8fd0\u7b97\u4e4b\u540e\u7684\u7ed3\u679c</li> <li>\u53d8\u91cf(variable): \u8868\u793a\u5bf9\u4e8e\u67d0\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff08reference\uff09</li> <li>\u5bf9\u8c61\u6709\u4e09\u4e2a\u57fa\u672c\u7684\u5c5e\u6027\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u5bf9\u8c61\u8fd8\u53ef\u5305\u62ec\u5176\u4ed6\u5c5e\u6027<ul> <li>\u6807\u8bc6ID(identity): \u5bf9\u8c61\u4e00\u65e6\u521b\u5efa\u5176ID\u4e0d\u518d\u6539\u53d8\uff0c\u53ef\u4ee5\u770b\u6210\u8be5\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u7684\u5730\u5740<ul> <li>id(x) \u8fd4\u56de\u5bf9\u8c61x\u7684ID\u3002a is b \u5224\u522b a\u548cb\u662f\u5426\u540c\u4e00\u4e2a\u5bf9\u8c61\uff08ID\u662f\u5426\u76f8\u540c \uff09\uff0c\u7ed3\u679c\u4e3aTrue\u6216False</li> </ul> </li> <li>\u7c7b\u578b(type)\uff1a\u51b3\u5b9a\u4e86\u5bf9\u8c61\u53ef\u80fd\u53d6\u503c\u7684\u8303\u56f4\u4ee5\u53ca\u652f\u6301\u7684\u64cd\u4f5c\u3002\u5bf9\u8c61\u7684\u7c7b\u578b\u4e0d\u53ef\u53d8\uff0c\u5373Python\u662f\u4e00\u79cd\u5f3a\u7c7b\u578b\u8bed\u8a00<ul> <li>type(x) \u8fd4\u56de\u5bf9\u8c61x\u7684\u7c7b\u578b</li> <li>\u5bf9\u8c61\u662f\u7c7b\u578b\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff08instance\uff09</li> </ul> </li> <li>\u503c(value): \u503c\u53ef\u4ee5\u88ab\u6539\u53d8\u6216\u4e0d\u53ef\u53d8\uff0c\u51b3\u5b9a\u4e8e\u5176\u7c7b\u578b<ul> <li>\u4e0d\u53ef\u53d8(immutable)\uff1a\u6709\u4e9b\u5bf9\u8c61\u4e00\u65e6\u521b\u5efa\u5176\u503c\u4e0d\u53ef\u53d8\uff0c\u6bd4\u5982\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5143\u7ec4\u7b49</li> <li>\u53ef\u53d8(mutable): \u5bf9\u8c61\u7684\u503c\u53ef\u4ee5\u6539\u53d8\uff0c\u6bd4\u5982\u5217\u8868\u3001\u5b57\u5178\u7b49</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_3","title":"\u8fd0\u7b97","text":"<ul> <li>\u6574\u9664 // : \u6c42\u6574\u5546 , \u6709\u6d6e\u70b9\u6570\u65f6\u7ed3\u679c\u4e3a\u6d6e\u70b9\u6570\uff0c\u5426\u5219\u6574\u6570<ul> <li>8 // 3 = 2</li> <li>-8 // 3 = -3</li> <li>Python\u7684\u5b9e\u73b0\u4e3a\u5411\u8d1f\u65e0\u7a77\u65b9\u5411\u820d\u5165\uff08floor()\u51fd\u6570\uff09</li> <li>C/C++\u3001Java\u4e3a\u5411\u539f\u70b9(0)\u65b9\u5411\u820d\u5165 (trunc()\u51fd\u6570)</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#scope","title":"\u547d\u540d\u7a7a\u95f4\u4e0e\u53d8\u91cf\u4f5c\u7528\u57df(scope)","text":"<ul> <li>\u53d8\u91cf(\u901a\u8fc7\u540d\u5b57\u6807\u8bc6)\u4fdd\u5b58\u7684\u662f\u5bf9\u8c61\u7684\u5f15\u7528</li> <li>\u540d\u5b57\u7a7a\u95f4\uff08namespace\uff09 \u662f\u540d\u5b57\uff08\u53d8\u91cf\uff09\u548c\u5bf9\u8c61\u7684\u6620\u5c04\uff0c\u91c7\u7528dict\u5b9e\u73b0</li> <li>\u5141\u8bb8\u6709\u591a\u4e2a\u540d\u5b57\u7a7a\u95f4\uff0c\u4e00\u4e2a\u540d\u5b57\u53ef\u4ee5\u5728\u591a\u4e2a\u540d\u5b57\u7a7a\u95f4\u91cc\u9762\u51fa\u73b0\uff0c\u4ee3\u8868\u4e0d\u540c\u540d\u5b57\u7a7a\u95f4\u7684\u540d\u5b57</li> <li>\u6a21\u5757\u7684\u5168\u5c40\u540d\u5b57\u7a7a\u95f4\uff1a<code>globals()</code> \u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u7684\u5168\u5c40\u540d\u5b57\u7a7a\u95f4\u7684\u540d\u5b57<ul> <li>\u5728\u52a0\u8f7d\u8be5\u6a21\u5757\u65f6\u521b\u5efa\uff0c\u4e00\u822c\u5728\u89e3\u91ca\u5668\u9000\u51fa\u65f6\u7ed3\u675f</li> <li>\u6a21\u5757\u5185\u5b9a\u4e49(\u8d4b\u503c)\u4e14\u4e0d\u5728\u51fd\u6570\u5185\u5b9a\u4e49(\u8d4b\u503c)\u7684\u53d8\u91cf\u5c5e\u4e8e\u8be5\u540d\u5b57\u7a7a\u95f4\uff0c\u79f0\u4e3a\u5168\u5c40\u53d8\u91cf\uff0c\u5176\u6709\u6548\u8303\u56f4\u4e3a\u5b9a\u4e49\u5b83\u7684\u6a21\u5757</li> <li>\u901a\u8fc7global\u8bed\u53e5\u660e\u786e\u58f0\u660e\u7684\u53d8\u91cf\u4e5f\u5c5e\u4e8e\u5168\u5c40\u540d\u5b57\u7a7a\u95f4</li> </ul> </li> <li>\u51fd\u6570\u7684\u672c\u5730\u540d\u5b57\u7a7a\u95f4\uff1a<code>locals()</code> \u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u672c\u5730\u540d\u5b57\u7a7a\u95f4\u7684\u540d\u5b57<ul> <li>\u5728\u51fd\u6570\u8c03\u7528\u65f6\u521b\u5efa\uff0c\u5728\u8c03\u7528\u7ed3\u675f\u65f6\u9500\u6bc1</li> <li>\u4e00\u822c\u800c\u8a00\uff0c\u5728\u51fd\u6570\u5185\u90e8\u5b9a\u4e49(\u5373\u8d4b\u503c\uff0c\u4e14\u6ca1\u6709\u4f7f\u7528global\u6216nonlocal\u8bed\u53e5\u58f0\u660e\uff09\u7684\u53d8\u91cf(\u5305\u62ec \u53c2\u6570)\u5c5e\u4e8e\u8be5\u540d\u5b57\u7a7a\u95f4\uff0c\u79f0\u4e3a\u5c40\u90e8\u53d8\u91cf\uff0c\u5176\u6709\u6548\u8303\u56f4\u4e3a\u51fd\u6570\u4f53</li> </ul> </li> <li>\u5185\u7f6e(built-in)\u540d\u5b57\u7a7a\u95f4\uff1a<ul> <li>\u5728\u8fdb\u5165\u89e3\u91ca\u5668\u65f6\u521b\u5efa\uff0c\u9000\u51fa\u89e3\u91ca\u5668\u65f6\u7ed3\u675f</li> <li>\u5305\u542b\u4e86\u5185\u7f6e\u51fd\u6570\u4ee5\u53ca\u5f02\u5e38\u7c7b\u578b, <code>dir(__builtins__)</code>\u53ef\u4ee5\u67e5\u770b\u8be5\u540d\u5b57\u7a7a\u95f4\u7684\u540d\u5b57</li> </ul> </li> <li>\u4e00\u4e2a\u540d\u5b57\uff08\u53d8\u91cf\uff09\u4e0d\u7528\u6307\u5b9a\u540d\u5b57\u7a7a\u95f4\u5c31\u53ef\u8bbf\u95ee\u7684\uff08\u4ee3\u7801\uff09\u8303\u56f4\u79f0\u4e3a\u8be5\u53d8\u91cf\u7684\u4f5c \u7528\u57df</li> <li>\u3010\u8bf4\u660e\u3011<ul> <li>\u53ea\u6709\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u624d\u4f1a\u5f15\u5165\u65b0\u7684\u540d\u5b57\u7a7a\u95f4</li> <li>\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\uff08\u9009\u62e9\u3001\u5faa\u73af\u3001\u51fd\u6570\u5185\u90e8\u3001\u5f02\u5e38 \u5904\u7406\uff09\u5b9a\u4e49\u51fd\u6570\uff0c\u53ea\u8981\u8be5\u5904\u652f\u6301\u8bed\u53e5</li> <li>\u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u518d\u5b9a\u4e49\u51fd\u6570\uff0c\u5728\u8fd9\u4e2a\u65b0\u5b9a\u4e49\u7684\u51fd\u6570 \u53c8\u53ef\u4ee5\u518d\u5b9a\u4e49\u51fd\u6570\uff0c\u5373\u652f\u6301\u51fd\u6570\u7684\u5d4c\u5957\u5b9a\u4e49</li> <li>\u9009\u62e9\u548c\u5faa\u73af\u7ed3\u6784\u4e0d\u4f1a\u6539\u53d8\u53d8\u91cf\u7684\u4f5c\u7528\u57df\uff1a\u5728\u9000\u51fa\u5faa\u73af\u4e4b\u540e\u8be5\u53d8\u91cf\u4ecd\u7136\u6709\u6548</li> <li>\u5f02\u5e38\u5904\u7406\u4e0d\u4f1a\u6539\u53d8\u53d8\u91cf\u7684\u4f5c\u7528\u57df<ul> <li>\u4f46Exception as instance\u4e2d\u5f15\u5165\u7684instance\u53d8\u91cf \u4ec5\u4ec5\u5728\u5176\u5bf9\u5e94\u7684Exception\u5757\u4e2d\u6709\u6548</li> </ul> </li> <li>\u5217\u8868\u63a8\u5bfc\u5f0f(\u7c7b\u4f3c\u4e8e\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570\u5e76\u8c03\u7528\u8be5\u51fd\u6570) \u4e2d\u5f15\u5165\u7684\u53d8\u91cf\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u9000\u51fa\u4e4b\u540e\u4e0d\u518d\u6709\u6548</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_4","title":"\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u641c\u7d22","text":"<ul> <li><code>global x</code>: \u663e\u5f0f\u5730\u8bf4\u660ex\u4e3a\u5168\u5c40\u540d\u5b57\u7a7a\u95f4\u4e2d\u7684\u53d8\u91cf</li> <li><code>nonlocal x</code>: \u7528\u4e8e\u51fd\u6570\u5d4c\u5957\uff0c\u8868\u793ax\u4e0d\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u800c\u662f\u5916\u5c42\u7684\u67d0\u4e2a\u51fd\u6570\u7684\u540d\u5b57\u7a7a\u95f4\u4e2d\u7684\u53d8\u91cf\uff0c\u79f0\u4e3a\u81ea\u7531\u53d8\u91cf\u3002\u5e94\u8be5\u8df3\u8fc7\u5f53\u524d\u51fd\u6570\u7684\u540d\u5b57\u7a7a\u95f4\uff0c\u4ece\u91cc\u5230\u5916\u5f80\u5916\u5c42\u51fd\u6570\uff08\u4f46\u4e0d\u4f1a\u5230\u6700\u5916\u5c42\u51fd\u6570\u5916\uff09\u641c\u7d22</li> <li>\u8d4b\u503c\u8bed\u53e5 x = obj<ul> <li>\u51fa\u73b0\u5728\u51fd\u6570\u4f53\u5185\uff08\u4e0d\u7ba1\u51fa\u73b0\u5728\u524d\u9762\u8fd8\u662f\u540e\u9762\uff09\uff0c\u4e14\u6ca1\u6709global/nonlocal\u58f0\u660e\uff0c\u8bf4\u660ex\u4e3a\u672c\u5730\u540d\u5b57\u7a7a\u95f4\u7684\u53d8\u91cf</li> <li>\u4e0d\u5728\u4efb\u4f55\u51fd\u6570\u4f53\u5185\uff0c\u8bf4\u660ex\u4e3a\u5168\u5c40\u540d\u5b57\u7a7a\u95f4\u7684\u53d8\u91cf</li> </ul> </li> <li>\u7531\u4e8e\u540d\u5b57\u7a7a\u95f4\u4e2d\u7684\u540d\u5b57\u7684\u6709\u6548\u8303\u56f4\u4f1a\u6709\u91cd\u53e0\uff0c\u5728 \u8bbf\u95ee\u53d8\u91cf(\u6ce8\u610f\u4e0d\u662f\u8d4b\u503c)\u65f6\uff0c\u600e\u4e48\u77e5\u9053\u67d0\u5904\u4ee3\u7801 \u4e2d\u7684\u540d\u5b57\u5230\u5e95\u662f\u5c5e\u4e8e\u54ea\u4e2a\u540d\u5b57\u7a7a\u95f4\u5462\uff1f</li> <li>LEGB\u89c4\u5219\uff1aLocal - Enclosing - Global - Builtin<ul> <li>\u6309\u7167\u987a\u5e8f\u641c\u7d22\u76f8\u5e94\u7684\u540d\u5b57\u7a7a\u95f4\uff0c\u76f4\u5230\u5230\u8fbe\u9650\u5b9a\u7684\u540d\u5b57 \u7a7a\u95f4\u8303\u56f4\u6216\u627e\u5230\u5339\u914d\u4e3a\u6b62</li> <li>\u5982\u679cnonlocal\u6216global\u9650\u5b9a\uff0c\u5219\u4ec5\u5728\u6307\u5b9a\u7684\u540d\u5b57\u7a7a\u95f4 (\u5373Enclosing\u6216\u5168\u5c40\u540d\u5b57\u7a7a\u95f4\uff09\u641c\u7d22</li> <li>\u5982\u679c\u5728\u51fd\u6570\u4f53\u5185\u51fa\u73b0\u5bf9\u5e94\u7684\u8d4b\u503c\u8bed\u53e5(\u4e0d\u8003\u8651\u5177\u4f53\u4f4d\u7f6e)\uff0c\u5219\u4ec5\u5728\u51fd\u6570\u7684\u5f53\u524d\u540d\u5b57\u7a7a\u95f4\u4e2d\u641c\u7d22</li> <li>\u5176\u4ed6\u60c5\u51b5\u6309LEGB\u987a\u5e8f\u5f80\u5916\u5c42\u641c\u7d22\uff0c\u76f4\u5230\u5339\u914d\u4e3a\u6b62</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_5","title":"\u5c40\u90e8\u53d8\u91cf\u548c\u5168\u5c40\u53d8\u91cf","text":"<ul> <li>\u7531\u4e8e\u540d\u5b57\u7a7a\u95f4\u4e2d\u7684\u540d\u5b57\u7684\u6709\u6548\u8303\u56f4\u4f1a\u6709\u91cd\u53e0\uff0c\u5185\u5c42\u7684\uff08\u5c40\u90e8\uff09\u53d8\u91cf\u4f1a\u9690\u85cf\u66f4\u5916\u5c42\u540c\u540d\u7684\uff08\u5168\u5c40\uff09\u53d8\u91cf</li> <li>\u53ef\u901a\u8fc7\u6a21\u5757\u5bf9\u8c61\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf <code>sys.modules[**name**].X)</code>\u3010\u6ce8\u610f <code>sys.modules[__name__]</code> \u8fd4\u56de\u5f53\u524d\u7684\u6a21\u5757\u5bf9\u8c61\uff0c\u662f module \u5b9e\u4f8b\u3011</li> <li>\u53ef\u901a\u8fc7globals()\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf <code>globals()['X']</code> \u3010\u6ce8\u610f globals() \u8fd4\u56de\u4e00\u4e2a\u5b57\u5178\u3011</li> </ul>"},{"location":"code/Python/Python-note/#_6","title":"\u95ed\u5305\u4e0e\u81ea\u7531\u53d8\u91cf","text":"<ul> <li>\u5d4c\u5957\u51fd\u6570\uff1a\u5728\u51fd\u6570\u4f53\u5185\u518d\u5b9a\u4e49\u65b0\u7684\u51fd\u6570</li> <li>\u81ea\u7531\u53d8\u91cf\uff1a\u5728\u51fd\u6570\u4f53\u5185\u4f7f\u7528\u4f46\u662f\u4e0d\u5c5e\u4e8e\u672c\u5730\u540d\u5b57\u7a7a\u95f4\u548c\u5168\u5c40\u540d\u5b57\u7a7a\u95f4\u7684\u53d8\u91cf\u3010\u611f\u89c9\u5c31\u662f nonlocal\u3011</li> <li>\u542b\u6709\u81ea\u7531\u53d8\u91cf\u7684\u4ee3\u7801\u5757\u79f0\u4e3a\u95ed\u5305(closure)</li> <li>\u4e0eglobal\u8bed\u53e5\u7c7b\u4f3c\uff0c\u5982\u679c\u5728\u5185\u5c42\u51fd\u6570\u8981\u5bf9\u5916\u5c42\u7684\u81ea\u7531\u53d8\u91cf\u8d4b\u503c\uff0c\u9700\u8981\u4f7f\u7528nonlocal\u8bed\u53e5\uff0c\u4f7f\u5f97\u51fd\u6570\u4f53\u7684\u8d4b\u503c\u8bed\u53e5\u4e0d\u4f1a\u5bfc\u81f4\u8be5\u53d8\u91cf\u53d8\u4e3a\u672c\u5730\u53d8\u91cf\uff0c\u800c\u662f\u5916\u5c42\u51fd\u6570\u7684\u81ea\u7531\u53d8\u91cf</li> <li>\u51fd\u6570\u5b9a\u4e49\u65f6\u53ef\u901a\u8fc7\u5206\u6790\u8bed\u53e5\uff08\u8d4b\u503c\uff0cglobal/nonlocal\u8bed\u53e5\uff09\u786e\u5b9a\u5176\u4e2d\u7684\u53d8\u91cf(\u540d\u5b57)\u4e2d\u54ea\u4e9b\u662f\u672c\u5730\u53d8\u91cf\uff0c\u54ea\u4e9b\u662f\u5168\u5c40\u53d8\u91cf\uff0c\u54ea\u4e9b\u662f\u81ea\u7531\u53d8\u91cf\u4ee5\u53ca\u8be5\u81ea\u7531\u53d8\u91cf\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u540d\u5b57\u7a7a\u95f4<ul> <li>\u901a\u8fc7global\u5b9a\u4e49\u7684\u53d8\u91cf\u4e3a\u5168\u5c40\u53d8\u91cf\uff1b\u901a\u8fc7nonlocal\u5b9a\u4e49\u7684\u4e3a\u81ea\u7531\u53d8\u91cf\uff1b\u51fd\u6570\u53c2\u6570\u4ee5\u53ca\u8d4b\u503c\u8fc7\u7684\u90a3\u4e9b\u53d8\u91cf\u4e3a\u672c\u5730\u53d8\u91cf</li> <li>\u5176\u4ed6\u6ca1\u6709\u5b9a\u4e49\u7684\u53d8\u91cf\u6309\u7167LEGB\u89c4\u5219\uff0c\u5f80\u5916\u5c42\u51fd\u6570\u4e2d\u5bfb\u627e\uff0c\u5982\u679c\u627e\u5230\u76f8\u5e94\u7684\u540d\u5b57\uff0c\u5219\u8be5\u53d8\u91cf\u662f\u81ea \u7531\u53d8\u91cf\uff0c\u540c\u65f6\u8bb0\u5f55\u8be5\u81ea\u7531\u53d8\u91cf\u6240\u5728\u7684\u540d\u5b57\u7a7a\u95f4\u3002\u5982\u679c\u5916\u5c42\u51fd\u6570\u4e2d\u6ca1\u6709\u627e\u5230\uff0c\u8be5\u53d8\u91cf\u4e3a\u5168\u5c40\u53d8\u91cf</li> <li>nonlocal\u58f0\u660e\u7684\u81ea\u7531\u53d8\u91cf\uff0c\u4e5f\u8981\u5f80\u5916\u5c42\u51fd\u6570\u4e2d\u5bfb\u627e\uff0c\u627e\u5230\u76f8\u5e94\u7684\u540d\u5b57\u540e\u8bb0\u5f55\u5176\u6240\u5728\u7684\u540d\u5b57\u7a7a\u95f4</li> </ul> </li> <li>\u81ea\u7531\u53d8\u91cf\u7684\u76f8\u5173\u4fe1\u606f\u4fdd\u5b58\u5728 <code>func.__closure__</code> \u4e2d</li> <li>\u5168\u5c40\u548c\u672c\u5730\u53d8\u91cf\u5728\u8c03\u7528\u65f6\u624d\u4f1a\u7ed1\u5b9a</li> <li>\u81ea\u7531\u53d8\u91cf\u5728\u5b9a\u4e49\u65f6\u786e\u5b9a\u6240\u5c5e\u7684\u540d\u5b57\u7a7a\u95f4\u88ab\u79fb\u8d70(\u5373\u8be5\u540d\u5b57\u7a7a\u95f4\u5bf9\u5e94\u7684\u51fd\u6570\u8fd4\u56de)\u6216\u8005\u8c03\u7528\u65f6\u7ed1\u5b9a</li> </ul> <pre><code>def linear(a, b):\n    def result(x):\n        return a * x + b\n    print(result.__closure__)   # \u6253\u5370\u8be5\u51fd\u6570\u7684\u81ea\u7531\u53d8\u91cf\n    return result\nfunc_1_1 = linear(1, 1)\nfunc_2_1 = linear(2, 1)\nprint('f(x) = x+1, f(10) = ', func_1_1(10))\nprint('f(x) = 2x+1, f(10) = ', func_2_1(10))\n</code></pre>"},{"location":"code/Python/Python-note/#_7","title":"\u53c2\u6570\u7c7b\u578b","text":"<ul> <li>\u51fd\u6570\u5b9a\u4e49\u65f6\uff0c\u53c2\u6570\uff08\u5f62\u53c2\uff09\u53ef\u4ee5\u662f<ul> <li>\u666e\u901a(\u4f4d\u7f6e)\u53c2\u6570</li> <li>\u7f3a\u7701\u503c\u53c2\u6570\uff0c\u76f8\u5e94\u4f4d\u7f6e\u6ca1\u6709\u53c2\u6570\u4f20\u9012\u65f6\u4f7f\u7528\u7f3a\u7701\u503c</li> <li>\u53ef\u53d8\u957f\u5ea6\u4f4d\u7f6e\u53c2\u6570 *args\uff0c\u8c03\u7528\u65f6\u76f8\u5e94\u4f4d\u7f6e\u53ef\u4ee5\u4f20\u90120\u4e2a\u6216\u8005\u591a\u4e2a\u4f4d\u7f6e\u53c2\u6570\uff08\u5b9e\u53c2\uff09</li> <li>\u53ef\u53d8\u957f\u5ea6\u5b57\u5178\u53c2\u6570 **kwargs\uff0c\u8c03\u7528\u65f6\u53ef\u4ee5\u4f20\u90120\u4e2a\u6216\u591a\u4e2a\u5173\u952e\u5b57\u53c2\u6570\uff08\u5b9e\u53c2\uff09</li> <li>keyword-only\u53c2\u6570\uff0c\u5982\u679c\u8981\u4f20\u9012\u503c\u65f6\u53ea\u80fd\u901a\u8fc7\u5173\u952e\u5b57\u53c2\u6570\uff08\u5b9e\u53c2\uff09\u65b9\u5f0f\u4f20\u9012</li> </ul> </li> <li>\u9ed8\u8ba4\u503c\u4fdd\u5b58\u5728\u51fd\u6570\u5bf9\u8c61\u7684\u5c5e\u6027__defaults__\u4e2d\uff0c\u8be5\u5c5e\u6027\u4e3a\u5143\u7ec4\u7c7b\u578b\uff0c\u4fdd\u5b58\u4e86\u6240\u6709\u9ed8\u8ba4\u503c\u53c2\u6570\u7684\u5f53\u524d\u503c</li> </ul>"},{"location":"code/Python/Python-note/#_8","title":"\u6a21\u5757\u5bfc\u5165","text":"<ul> <li>\u5982\u679c\u7b2c\u4e00\u6b21\u5bfc\u5165\uff0c\u5219\u5bfb\u627e\u6a21\u5757\u6e90\u7a0b\u5e8f\uff0c\u52a0\u8f7d(\u4e5f\u5c31\u662f\u6267\u884c)\u6a21\u5757\uff0c\u4fdd\u5b58\u6a21\u5757\u5bf9\u8c61<ul> <li>\u4ece<code>sys.path</code>\u7ed9\u51fa\u7684\u76ee\u5f55\u5217\u8868\u4e2d\u67e5\u627e\u540d\u5b57\u4e3a\u6a21\u5757\u540d\u7684py\u6e90\u7a0b\u5e8f\uff0c\u52a0\u8f7d\u7b2c\u4e00\u4e2a\u627e\u5230\u7684\u6a21\u5757\u6587\u4ef6\u3010sys.path\u7ed9\u51fa\u4e86\u6a21\u5757\u6587\u4ef6\u641c\u7d22\u7684\u76ee\u5f55\u5217\u8868, \u9010\u6b65\u641c\u7d22\u627e\u5230\u4e3a\u6b62\u3011</li> <li>\u5bfc\u5165\u7684\u6a21\u5757\u4fdd\u5b58\u5728\u5b57\u5178<code>sys.modules</code>, key\u4e3a\u6a21\u5757\u540d\uff0c\u800cvalue\u4e3a\u6a21\u5757\u5bf9\u8c61\u3010sys.modules\u4fdd\u5b58\u4e86\u6a21\u5757\u540d\u4e0e\u6a21\u5757\u5bf9\u8c61\u7684\u6620\u5c04\u3011</li> </ul> </li> <li>\u53ef\u4ee5\u591a\u6b21\u8c03\u7528import\uff0c\u4f46\u662f\u53ea\u52a0\u8f7d\u6267\u884c\u4e00\u6b21<ul> <li>\u5982\u679c\u8be5\u6a21\u5757\u540d\u5df2\u7ecf\u51fa\u73b0\u5728sys.modules\u6216\u8005\u4e3a\u5185\u7f6e\u6a21\u5757\uff0c\u5219\u627e\u5230\u5bf9\u5e94\u7684\u6a21\u5757\u5bf9\u8c61\uff0c\u6dfb\u52a0\u76f8\u5e94\u7684\u5bf9\u8c61\u5f15\u7528</li> <li>\u53ef\u901a\u8fc7importlib.reload(obj)\u6765\u91cd\u65b0\u52a0\u8f7d\u5df2\u7ecf\u52a0\u8f7d\u8fc7\u7684\u6a21\u5757\uff0c\u8f83\u5c11\u4f7f\u7528</li> </ul> </li> <li><code>sys.builtin_module_names</code>\u7ed9\u51fa\u4e86Python\u89e3\u91ca\u5668\u5185\u7f6e\u7684\u6a21\u5757</li> <li>\u5c3d\u7ba1\u5185\u7f6e\u6a21\u5757\u5df2\u7ecf\u52a0\u8f7d\uff0c \u4f46\u662f\u8981\u4f7f\u7528\u5185\u7f6e\u6a21\u5757\u7684\u51fd\u6570\u4ecd\u7136\u8981\u6267\u884c import\uff08\u5982 sys, bulitins\uff09\u3010\u56e0\u4e3a <code>import builtins as __builtins__</code> \u3011</li> <li>\u6211\u4eec\u7684\u8bfe\u7a0b\u4f1a\u4ecb\u7ecd\u6a21\u5757 builtins, math, sys, time</li> </ul> <pre><code>import builtins\ndir(builtins)\nhelp(builtins)\nhelp(builtins.super)\n</code></pre> <ul> <li>\u9664\u4e86\u5728\u6e90\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u7684\u540d\u5b57\u5916\uff0cpython\u89e3\u91ca\u5668\u8fd8\u4f1a\uff08\u5728\u6a21\u5757\u771f\u6b63\u6267\u884c\u4e4b\u524d\uff09\u5b9a\u4e49\u4e00\u4e9b\u5185\u90e8\u7684\u540d\u5b57\uff0c\u5305\u62ec <code>__name__, __doc__, __file__</code> \u7b49</li> <li><code>__name__</code> \u6a21\u5757\u7684\u540d\u5b57\uff0c\u4ee5\u811a\u672c\u65b9\u5f0f\u8fd0\u884c\u65f6\u8bbe\u7f6e\u4e3a <code>__main__</code>\uff0c import\u65b9\u5f0f\u8fd0\u884c\u65f6\u8bbe\u7f6e\u4e3a\u6a21\u5757\u7684\u6587\u4ef6\u540d(\u4e0d\u5305\u62ec.py)</li> <li><code>__file__</code> \u6a21\u5757\u6e90\u7a0b\u5e8f\u7684\u5b8c\u6574\u8def\u5f84\u540d</li> <li><code>__doc__</code> \u6587\u6863\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u6a21\u5757\u7684\u7b2c\u4e00\u4e2a\u8bed\u53e5\u4e3a\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\uff0c\u5219\u8be5\u5b57\u7b26\u4e32\u4f5c\u4e3a\u6587\u6863\u5b57\u7b26\u4e32\u4fdd\u5b58\u5728__doc__\u4e2d</li> <li>\u6a21\u5757\u4e00\u822c\u6709\u4e24\u79cd\u65b9\u5f0f\u6267\u884c<ul> <li>\u5728IDLE\u73af\u5883\u4e2d\u4ee5Run Module\u65b9\u5f0f\u8fd0\u884c\uff0c\u5373\u8be5\u6a21\u5757\u4e3a\u4e3b\u5165\u53e3\u7a0b\u5e8f\uff0c\u4e5f\u79f0\u4e3a\u811a\u672c(script)\u65b9\u5f0f\u8fd0\u884c<ul> <li>\u4e3b\u5165\u53e3(\u811a\u672c)\u65b9\u5f0f\u8fd0\u884c\u65f6\uff0c__name__\u88ab\u8bbe\u7f6e\u4e3a\u201cmain\u201d</li> <li>\u6bcf\u4e2a\u6a21\u5757\u7ecf\u5e38\u4f1a\u5305\u542b\u4e00\u4e9b\u6d4b\u8bd5\u4ee3\u7801\u6d4b\u8bd5\u5176\u6240\u5b9a\u4e49\u7684\u51fd\u6570\uff0c\u8fd9\u4e9b\u6d4b\u8bd5\u4ee3\u7801\u5728\u4ee5\u811a\u672c\u65b9\u5f0f\u65f6\u5e94\u8be5\u6267\u884c</li> </ul> </li> <li>\u4f5c\u4e3a\u6a21\u5757\u88ab\u5bfc\u5165(\u5373\u88ab\u5176\u4ed6\u6a21\u5757import)\uff0c\u5982\u679c\u4e3a\u7b2c\u4e00\u6b21\u5bfc\u5165\uff0c\u5219\u6267\u884c\u8be5\u6a21\u5757\u6e90\u7a0b\u5e8f\u4e2d\u7684\u4ee3\u7801<ul> <li>\u4ee5import\u65b9\u5f0f\u6267\u884c\u7684\u6a21\u5757\u4e2d\u81ea\u52a8\u589e\u52a0\u7684\u540d\u5b57\u4e2d\uff0c__name__\u88ab\u8bbe\u7f6e\u4e3a\u8be5\u6a21\u5757\u7684\u6a21\u5757\u540d</li> <li>\u6a21\u5757\u4e2d\u7ecf\u5e38\u5305\u542b\u7684\u6d4b\u8bd5\u4ee3\u7801\u5728import\u65f6\u4e0d\u5e94\u8be5\u6267\u884c\u3010<code>if __name__ == '__main__'</code>\u3011</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#package","title":"\u5305\uff08package)","text":"<ul> <li>\u6309\u7167\u76ee\u5f55\u6765\u7ec4\u7ec7\u6a21\u5757\uff0c\u79f0\u4e3a\u5305(package)<ul> <li>\u907f\u514d\u6a21\u5757\u540d\u5b57\u76f8\u540c</li> <li>\u7ef4\u62a4\u6a21\u5757\u4e4b\u95f4\u7684\u8054\u7cfb</li> </ul> </li> <li>\u5305\u7684\u6bcf\u4e2a\u76ee\u5f55\uff08\u6bd4\u5982foo)\u4e2d\u90fd\u5fc5\u987b\u5305\u542b\u4e00\u4e2a__init__.py\u6587\u4ef6<ul> <li>\u7528\u4e8e\u8868\u793a\u8be5\u76ee\u5f55\u662f\u4e00\u4e2a\u5305\u3002\u5982\u679c\u6ca1\u6709\uff0c\u88ab\u5f53\u4f5c\u4e00\u4e2a\u666e\u901a\u7684\u76ee\u5f55</li> <li>\u8be5\u6587\u4ef6(<code>__init__.py</code>) \u751a\u81f3\u53ef\u4ee5\u662f\u4e00\u4e2a\u7a7a\u6587\u4ef6</li> <li><code>__init__.py</code>\u4e5f\u662f\u4e00\u4e2a\u6a21\u5757\uff0c\u6a21\u5757\u540d\u4e3a\u76ee\u5f55\u540d(foo)</li> <li>\u4e00\u822c__init__.py\u6587\u4ef6\u7684\u4e3b\u8981\u7528\u9014\u662f\u8bbe\u7f6e__all__\u53d8\u91cf\u4ee5\u53ca\u6240\u5305\u542b\u7684\u5305\u521d\u59cb\u5316 \u6240\u9700\u7684\u4ee3\u7801\u3002\u5176\u4e2d__all__\u53d8\u91cf\u5217\u51fa\u7684\u5bf9\u8c61\u53ef\u4ee5\u5728\u4f7f\u7528<code>from \u2026 import *</code>\u65f6\u5168\u90e8\u5bfc\u5165</li> <li>\u53ef\u4ee5\u6709\u591a\u7ea7\u76ee\u5f55\uff0c\u7ec4\u6210\u591a\u7ea7\u5c42\u6b21\u7684\u5305\u7ed3\u6784</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#python","title":"Python\u6587\u4ef6\u540d","text":"<ul> <li>.py\uff1aPython\u6e90\u6587\u4ef6\uff0c\u7531Python\u89e3\u91ca\u5668\u8d1f\u8d23\u89e3\u91ca\u6267\u884c</li> <li>.pyw\uff1aPython\u6e90\u6587\u4ef6\uff0c\u5e38\u7528\u4e8e\u56fe\u5f62\u754c\u9762\u7a0b\u5e8f\u6587\u4ef6</li> <li>.pyc\uff1aPython\u5b57\u8282\u7801\u6587\u4ef6\uff0c\u53ef\u7528\u4e8e\u9690\u85cfPython\u6e90\u4ee3\u7801\u548c\u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6<ul> <li>\u5bf9\u4e8ePython\u6a21\u5757\uff0c\u7b2c\u4e00\u6b21\u88ab\u5bfc\u5165\u65f6\u5c06\u88ab\u7f16\u8bd1\u6210\u5b57\u8282\u7801\u7684\u5f62\u5f0f\uff0c\u4e00\u822c\u4fdd\u5b58\u5728 pychache \u5b50\u76ee\u5f55\u4e2d</li> <li>\u4e0b\u6b21\u8fd0\u884c\u518d\u5bfc\u5165\u6a21\u5757\u65f6\uff0c\u4f1a\u4f18\u5148\u5bfc\u5165\u76f8\u5e94\u7684pyc\u6587\u4ef6\uff0c\u5982\u679c\u76f8\u5e94\u7684pyc\u6587\u4ef6\u4e0e py\u6587\u4ef6\u65f6\u95f4\u4e0d\u76f8\u7b26\uff0c\u5219\u5bfc\u5165py\u6587\u4ef6\u5e76\u4ea7\u751fpyc\u6587\u4ef6</li> </ul> </li> <li>.pyo\uff1a\u4f18\u5316\u7684Python\u5b57\u8282\u7801\u6587\u4ef6\uff0c\u4f7f\u7528\u201cpython \u2013O -m py_compile file.py\u201d\u6216 \u201cpython \u2013OO -m py_compile file.py\u201d\u8fdb\u884c\u4f18\u5316\u7f16\u8bd1\uff0cPEP 488\u5efa\u8bae\u5e9f\u9664pyo\u6587\u4ef6</li> <li>.pyd\uff1a\u4e00\u822c\u662f\u7531\u5176\u4ed6\u8bed\u8a00\u7f16\u5199\u5e76\u7f16\u8bd1\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5e38\u7528\u4e8e\u5b9e\u73b0\u67d0\u4e9b\u8f6f\u4ef6\u5de5\u5177\u7684 Python\u7f16\u7a0b\u63a5\u53e3\u63d2\u4ef6\u6216Python\u52a8\u6001\u94fe\u63a5\u5e93</li> </ul>"},{"location":"code/Python/Python-note/#_9","title":"\u5b57\u7b26\u4e32","text":"<ul> <li>\u5b57\u7b26\u4e32\u5c5e\u4e8e\u4e0d\u53ef\u53d8\u5e8f\u5217\uff0c\u8868\u793a\u4e00\u4e32\u5b57\u7b26\u7ec4\u6210\u7684\u6587\u672c\uff0c\u901a\u8fc7\u5b57\u7b26\u4e32\u754c\u5b9a\u7b26\u6765\u5b9a\u4e49</li> <li>\u4e0e\u5176\u4ed6\u8bed\u8a00\u4e00\u822c\u7528\u53cc\u5f15\u53f7\u5b9a\u4e49\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u4e0d\u540c\uff0cPython\u53ef\u4ee5\u4f7f\u7528\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7<ul> <li>\u4e00\u822c\u5efa\u8bae\u91c7\u7528\u5355\u5f15\u53f7\u5b9a\u4e49</li> <li>\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u6709\u53cc\u5f15\u53f7\uff0c\u5219\u53ef\u4f7f\u7528\u5355\u5f15\u53f7\u5b9a\u4e49\uff0c\u53cd\u4e4b\u4ea6\u7136</li> <li>\u77ed\u5b57\u7b26\u4e32\u5b9a\u4e49\uff1a\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\u4e0d\u80fd\u8de8\u8d8a\u591a\u884c\uff0c\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u4e2d\u60f3\u8981\u6709\u6362\u884c\u9700\u8981\u4f7f\u7528\u5b57\u7b26\u8f6c\u4e49\\n\uff0c\u6216\u8005\u4e09\u5f15\u53f7\u957f\u5b57\u7b26\u4e32</li> </ul> </li> <li>\u5b57\u7b26\u4e32\u53ef\u4ee5\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5373\u4e0d\u5305\u542b\u4efb\u4f55\u5b57\u7b26\uff0c\u53ef\u7528\u4e24\u4e2a\u8fde\u7eed\u7684\u754c\u5b9a\u7b26\u5b9a\u4e49\uff0c\u6bd4\u5982\u8fde\u7eed\u7684\u5355\u5f15\u53f7\u2019\u2018</li> <li>\u4e24\u4e2a\u4ee5\u4e0a\u8fde\u7eed\uff08\u4e2d\u95f4\u53ef\u7528\u7a7a\u683c\u7b49\u5206\u9694\uff09\u7684\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u88ab\u5408\u5e76\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32</li> </ul>"},{"location":"code/Python/Python-note/#_10","title":"\u5b57\u7b26\u4e32\u8f6c\u4e49","text":"<ul> <li>\u5982\u679c\u4e00\u4e2a\u5b57\u7b26\u4e32\u5185\u5bb9\u4e2d\u51fa\u73b0\u754c\u5b9a\u7b26(\u5982\u5355\u53cc\u5f15\u53f7)\u672c\u8eab\uff0c\u5219\u9700\u8981\u901a\u8fc7\u5728\u5f15\u53f7\u524d\u52a0\u4e0a\u8f6c\u4e49\u5b57\u7b26\\\u8868\u793a\u5176\u4e0d\u662f\u5b57\u7b26\u4e32 \u754c\u5b9a\u7b26\uff0c\u800c\u662f\u666e\u901a\u7684\u5f15\u53f7<ul> <li>' \u8868\u793a\u5355\u5f15\u53f7\u672c\u8eab\uff0c \"\u8868\u793a\u53cc\u5f15\u53f7\u672c\u8eab</li> <li>\\\u8868\u793a\u5355\u4e2a\u7684\u53cd\u659c\u6760</li> </ul> </li> <li>\u8fd8\u53ef\u901a\u8fc7\u8f6c\u4e49\u63cf\u8ff0\u4e00\u4e9b\u63a7\u5236\u5b57\u7b26\uff1a\\r\u8868\u793a\u56de\u8f66(CarriageReturn) \\n\u8868\u793a\u6362\u884c(NewLine)\uff0c\\t\u8868\u793a\u5236\u8868\u7b26\u7b49</li> </ul> <ul> <li>\u4e00\u4e9b\u5e38\u89c1\u7684\u8f6c\u4e49\u5b57\u7b26<ul> <li>\\r Carriage Return CR \u56de\u8f66</li> <li>\\b Backspace</li> <li>\\ddd</li> <li>\\xhh</li> <li>\\uxxxx</li> <li>\\Uxxxxxxxx</li> </ul> </li> <li>\u5c0f\u7ed3<ul> <li>\\\u8868\u793a\u540e\u9762\u7684\u5b57\u7b26\u53ef\u80fd\u4e0d\u662f\u539f\u6709\u7684\u542b\u4e49\uff0c\u9700\u8981\u7279\u522b\u5bf9\u5f85\uff0c\u5373\u53ef\u80fd\u5177\u6709\u7279\u6b8a\u542b\u4e49</li> <li>\u5982\u679c\u540e\u9762\u7684\u5b57\u7b26\u7684\u786e\u6709\u7279\u6b8a\u7684\u542b\u4e49\uff0c\u5219\u8f6c\u4e49\u5b57\u7b26\u79fb\u8d70\uff0c\u4f7f\u7528\u7279\u6b8a\u7684\u542b\u4e49</li> <li>\u5982\u679c\u540e\u9762\u7684\u5b57\u7b26\u5e76\u6ca1\u6709\u7279\u6b8a\u7684\u542b\u4e49\uff0c\u5219\u8f6c\u4e49\u5b57\u7b26\u4ecd\u7136\u4fdd\u7559\uff0c\u6bd4\u5982 \u2018\\c\u2019\u5305\u542b\u4e24\u4e2a\u5b57\u7b26\uff1a\u53cd\u659c\u6760\u548cc</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_11","title":"\u539f\u59cb\u5b57\u7b26\u4e32","text":"<ul> <li>\u77ed\u5b57\u7b26\u4e32\u548c\u957f\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u4e2d\u5982\u679c\u6709\u8bb8\u591a\u5b57\u7b26\u9700\u8981\u8fdb\u884c\u8f6c\u4e49\u4f1a\u6bd4\u8f83\u7e41\u7410</li> <li>\u5b57\u7b26\u4e32\u754c\u5b9a\u7b26\u524d\u9762\u52a0\u5b57\u6bcdr\u6216R\u8868\u793a\u539f\u59cb(raw)\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d\u7684\u7279\u6b8a\u5b57\u7b26\u4e0d\u9700\u8981\u8f6c\u4e49<ul> <li>\u4f8b\u5b50\uff1a<code>text = r'''\u8981\u8ba9\u53d8\u91cfa\u6307\u5411\u5b57\u7b26\u4e32\"C:\\Program Files (x86)\\Python35\\bin\" \u5e94\u8be5\u8fd9\u6837\u5b9a\u4e49\uff1aa = \"C:\\\\Program Files (x86)\\\\Python35\\\\bin\" '''</code></li> </ul> </li> <li>\u4e0d\u662f\u6240\u6709\u7684\u5b57\u7b26\u4e32\u90fd\u53ef\u4ee5\u91c7\u7528\u539f\u59cb\u5b57\u7b26\u4e32\u5b9a\u4e49\uff0c\u6bd4\u5982\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u5982\u679c\u4e3a\\<ul> <li>python\u89e3\u91ca\u5668\u5728\u8fdb\u884c\u8bcd\u6cd5\u5206\u6790\u65f6\u4f1a\u89e3\u91ca\u8f6c\u4e49\u5b57\u7b26\u4ee5\u786e\u5b9a\u539f\u59cb\u5b57\u7b26\u4e32\u662f\u5426\u7ed3\u675f\uff0c\u4f46\u662f\u4e00\u65e6\u786e\u5b9a\u4e86\u539f\u59cb\u5b57\u7b26\u4e32\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u540e\uff0c\u4e4b\u95f4\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f5c\u4e3a\u539f\u59cb\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\uff0c\u5373\u8f6c\u4e49\u7b26\u53c8\u5931\u53bb\u4e86\u539f\u6765\u7684\u610f\u4e49</li> <li>\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4e3a\\\u65f6\u53ef\u4f7f\u7528\u539f\u59cb\u5b57\u7b26\u4e32(\u6700\u540e\u7684\\\u4e4b\u524d\u7684\u5185\u5bb9) + \u2018\\\u2018\u5b9e\u73b0</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_12","title":"\u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u7f16\u7801","text":"<ul> <li>\u5b57\u7b26\u96c6(Charset): \u7cfb\u7edf\u652f\u6301\u7684\u591a\u4e2a\u62bd\u8c61\u5b57\u7b26\u7684\u96c6\u5408\uff0c\u6bcf\u4e2a\u5b57\u7b26\u5728\u8be5\u5b57\u7b26\u96c6\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u79f0\u4e3a\u7801\u70b9 (Code Point)\u7684\u6570\u5b57\u552f\u4e00\u6807\u8bc6</li> <li>\u5b57\u7b26\u7f16\u7801(Encoding)\uff1a\u5b57\u7b26\u96c6\u4e2d\u7684\u5b57\u7b26\u5728\u8ba1\u7b97\u673a\u5185\u90e8\u5b58\u50a8\u65f6\u5982\u4f55\u8868\u793a\uff0c\u53ef\u6620\u5c04\u4e3a1\u4e2a\u5b57\u8282\u6216\u8005\u591a\u4e2a\u5b57\u8282\uff08\u79f0\u4e3aCode Unit\uff09</li> <li>Code Page: \u5185\u7801\u8868<ul> <li>\u6700\u521dIBM\u5f15\u5165\u7684\u6982\u5ff5\uff0c\u63cf\u8ff0\u5b57\u7b26\u4e0e\u8ba1\u7b97\u673a\u5185\u90e8\u5b58\u50a8\u7684\u5b57\u8282\u4e4b\u95f4\u6620\u5c04\u7684\u8868\u683c</li> <li>\u5fae\u8f6f/SAP/Apple\u7b49\u901a\u8fc7\u4e0d\u540c\u7f16\u53f7\u7684\u5185\u7801\u8868\u6765\u63cf\u8ff0\u5b57\u7b26\u96c6\u4e0e\u5185\u90e8\u5b58\u50a8\u4e4b\u95f4\u7684\u6620\u5c04\uff08\u5373\u5b57\u7b26\u7f16\u7801\uff09</li> </ul> </li> <li>\u53ef\u5c06\u5185\u7801\u8868\u3001\u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u7f16\u7801\u770b\u6210\u540c\u4e00\u5b9e\u4f53\u7684\u4e0d\u540c\u89d2\u5ea6\u63cf\u8ff0</li> <li>Python3\u7684\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u5c5e\u4e8eUnicode\u5b57\u7b26\u96c6</li> <li>\u6211\u4eec\u901a\u8fc7IDLE\u7b49\u7f16\u5199\u7684\u6e90\u6587\u4ef6(.py)\u91c7\u7528Unicode\u5b57\u7b26\u96c6\uff0c\u5176\u7f16\u7801\u65b9\u5f0f\u4e3aUTF-8\u7f16\u7801\u65b9\u5f0f</li> <li>Unicode<ul> <li><code>unicodedata</code>\u6a21\u5757\u7ed9\u51fa\u4e86\u8bbf\u95eeunicode\u6570\u636e\u5e93\u7684\u4e00\u4e9b\u65b9\u6cd5\uff0c\u5305\u62ec\u6240\u5c5e\u7684category\u3001name\u3001\u5b57\u7b26 \u5bbd\u5ea6(east_asian_width) \u7b49</li> <li>\u5185\u7f6e\u51fd\u6570<code>ord</code>\u8fd4\u56de\u5b57\u7b26\u5bf9\u5e94\u7684unicode\u3002\u5df2\u77e5unicode\uff0c\u53ef\u4f7f\u7528\u5185\u7f6e\u51fd\u6570<code>chr</code>\u8fd4\u56de\u5bf9\u5e94\u7684\u5b57\u7b26</li> <li>\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u5b9a\u4e49\u4e2d\u53ef\u4ee5\u901a\u8fc7\\ddd\u3001\\xhh\u3001\\uxxxx\u6216\\Uxxxxxxxx\u7b49\u63cf\u8ff0\u76f8\u5e94\u7801\u70b9\u5bf9\u5e94\u7684\u5b57\u7b26</li> <li>Unicode\u5b57\u7b26\u53ef\u91c7\u7528UTF-8,UTF-16,UTF-32\u8fdb\u884c\u7f16\u7801,\u5c06unicode\u5bf9\u5e94\u7684\u5b57\u7b26\u8f6c\u6362\u6210\u5b57\u8282\u5e8f\u5217</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_13","title":"\u5b57\u7b26\u4e32\u76f8\u5173\u5185\u7f6e\u51fd\u6570","text":"<ul> <li>str(obj) \u8fd4\u56de\u4e00\u4e2a\u5bf9\u4eba\u53cb\u597d\u7684printable\u5b57\u7b26\u4e32\uff0c\u8ba9\u7528\u6237\u4e86\u89e3\u8be5\u5bf9\u8c61\u7684\u76f8\u5173\u4fe1\u606f\u3002print\u51fd\u6570\u7684\u53c2\u6570 \u53ef\u4e3a\u4efb\u610f\u5bf9\u8c61obj\uff0c\u5b9e\u9645\u4e0a\u8f93\u51fa\u7684\u662fstr(obj)</li> <li><code>repr(obj)</code> \u8fd4\u56de\u63cf\u8ff0\u5bf9\u8c61\u7684\u5185\u90e8\u8868\u793a\u7684\u5b57\u7b26\u4e32\uff0c\u8ba9\u7a0b\u5e8f\u5458\u4e86\u89e3\u8be5\u5bf9\u8c61\u3002\u8be5\u5b57\u7b26\u4e32\u5b58\u50a8\u7684\u4e00\u822c\u662f\u53ef\u4ee5\u5199\u5728\u7a0b\u5e8f\u4e2d\u7684\u5b57\u9762\u91cf</li> <li>ascii(obj) \u4e0erepr\u7c7b\u4f3c\uff0c\u53ea\u662f\u975eASCII\u5b57\u7b26\u4ee5\\u\u2026\\U\u7b49\u8f6c\u4e49\u65b9\u5f0f, \u5236\u8868\u56de\u8f66\u6362\u884c\u4ee5\\t\\r\\n\uff0c\u5176 \u4ed6ASCII\u63a7\u5236\u5b57\u7b26\u4ee5\\x\u2026\u5f62\u5f0f\u63cf\u8ff0</li> <li>\u683c\u5f0f\u8bf4\u660e\u7b26  </li> </ul>"},{"location":"code/Python/Python-note/#iterable-iterator","title":"\u53ef\u8fed\u4ee3\u5bf9\u8c61 iterable \u548c\u8fed\u4ee3\u5668iterator","text":"<ul> <li>iterable \u5bf9\u8c61(\u5982 str, list, range, tuple, dict, set \u7b49): \u7c7b\u6bd4\u4e8e\u4e00\u4e2a\u9b54\u76d2<ul> <li>\u5982\u4f55\u77e5\u9053\u662f\u5426\u4e3aiterable\u5bf9\u8c61? dir(iterable)\u53ef\u770b\u5230\u5176\u6709<code>__iter__()</code>\u65b9\u6cd5</li> <li>\u5185\u7f6e\u51fd\u6570 <code>iter(iterable)</code>\u5c31\u662f\u8c03\u7528\u8be5\u5bf9\u8c61\u7684__iter__\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668 iterator</li> </ul> </li> <li>iterator: \u7c7b\u6bd4\u4e8e\u4e00\u4e2a\u6253\u5f00\u7684\u9b54\u76d2\uff0c\u6bcf\u6b21\u6309\u4e00\u4e0b\u8fd4\u56de\u4e0b\u4e00\u4e2a\u5143\u7d20<ul> <li>\u5982\u4f55\u77e5\u9053\u662f\u5426\u4e3aiterator\u5bf9\u8c61\uff0cdir(iterator)\u53ef\u770b\u5230\u6709<code>__next__()</code>\u65b9\u6cd5</li> <li>\u8fed\u4ee3\u5668\u4e00\u822c\u4e5f\u662f\u53ef\u8fed\u4ee3(iterable)\u5bf9\u8c61\uff0c\u5176__iter__()\u65b9\u6cd5\u8fd4\u56de\u5c31\u662f\u81ea\u8eab</li> <li>\u5185\u7f6e\u51fd\u6570<code>next(iterator)</code>\u5c31\u662f\u8c03\u7528\u8be5\u5bf9\u8c61\u7684__next__\u65b9\u6cd5\uff0c\u4ece\u8fed\u4ee3\u5668\u8fd4\u56de\u4e0b \u4e00\u4e2a\u5143\u7d20\uff0c\u6ca1\u6709\u66f4\u591a\u7684\u5143\u7d20\u65f6\u629b\u51fa\u5f02\u5e38<code>StopIteration</code></li> <li>\u5185\u7f6e\u51fd\u6570 sorted/reversed()/zip()/enumerate \u7b49\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3010sorted \u597d\u50cf\u4e0d\u662f\uff0c\u8fd4\u56de\u5217\u8868\u3011</li> </ul> </li> <li>\u4e00\u4e2a\u4e00\u822c\u7684\u9b54\u76d2(iterable)\u53ef\u4ee5\u6253\u5f00\u591a\u6b21\uff0c \u6bcf\u6b21\u8fd4\u56de\u4e00\u4e2a\u4e0d\u540c\u7684\u6253\u5f00\u7684\u9b54\u76d2 (iterator)\u3002\u4f46\u6ce8\u610f\u5982\u679c\u9b54\u76d2(iterable)\u6709 \u53d8\u5316\u65f6\uff0c\u6253\u5f00\u7684\u9b54\u76d2(iterator)\u540c\u6837\u4e5f\u4f1a \u6709\u5f71\u54cd</li> <li>\u4e00\u4e2a\u6253\u5f00\u7684\u9b54\u76d2(iterator)\u4e00\u822c\u4e5f\u662f\u4e00\u4e2a \u9b54\u76d2(iterable)\uff0c\u518d\u6253\u5f00\u65f6\u8fd4\u56de\u7684\u5c31\u662f\u540c \u4e00\u4e2a\u6253\u5f00\u7684\u9b54\u76d2(iterator)</li> <li>\u4f7f\u7528 for \u5faa\u73af\u6765\u8bbf\u95ee iterable \u5bf9\u8c61\u7684\u5143\u7d20<ul> <li>\u8be5for\u5faa\u73af\u4f1a\u9996\u5148\u8c03\u7528iter(iterable)\u83b7\u5f97\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61</li> <li>\u7136\u540e\u53d6\u8fed\u4ee3\u5668\u5bf9\u8c61\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c\u6267\u884c\u4e00\u7cfb\u5217\u8bed\u53e5</li> <li>\u7136\u540e\u53d6\u8fed\u4ee3\u5668\u5bf9\u8c61\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c\u518d\u6b21\u6267\u884c\u4e00\u7cfb\u5217\u8bed\u53e5\uff0c \u5982\u6b64\u7ee7\u7eed\u2026</li> <li>\u76f4\u5230\u53d6\u4e0b\u4e00\u4e2a\u5143\u7d20\u51fa\u73b0StopIteration\u65f6\u5faa\u73af\u7ed3\u675f</li> </ul> </li> <li>range\u51fd\u6570<ul> <li>range(start, stop[, step])</li> <li>\u8fd4\u56de\u4e00\u4e2arange\u5bf9\u8c61 \uff0c\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u4ea7\u751f\u4e00\u7cfb\u5217\u7684 \u6574\u6570\uff0c\u8303\u56f4[start,stop) \u534a\u95ed\u534a\u5f00\u533a\u95f4</li> <li>\u53ef\u4ee5\u7528list()\u51fd\u6570\u5c06range\u5bf9\u8c61\u8f6c\u5316\u4e3a\u5217\u8868</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_14","title":"\u5217\u8868","text":"<ul> <li>\u5173\u4e8e <code>x = [[None] * 2] * 3</code> \u7684\u5f62\u5f0f<ul> <li>\u5728\u8c03\u7528list\u65b9\u6cd5\u6784\u9020\u5217\u8868\u3001\u8c03\u7528\u5217\u8868\u7684\u65b9\u6cd5\u589e\u52a0\u5143\u7d20\u6216\u8005\u91c7\u7528\u52a0\u6cd5\u548c\u4e58\u6cd5\u8fd0\u7b97\u7b26\u5f97\u5230\u65b0\u5217\u8868\uff0c\u4f1a\u6709 \u591a\u4e2a\u5f15\u7528(\u6bd4\u5982\u5217\u8868\u4e2d\u7684\u5143\u7d20\uff09\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61</li> <li>\u5bf9\u4e8e\u4e58\u6cd5\u8fd0\u7b97\u7b26\u5c24\u5176\u5982\u6b64\uff0c\u65b0\u5217\u8868\u4f1a\u6709\u591a\u4e2a\u5143\u7d20\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61(\u539f\u5217\u8868\u4e2d\u7684\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5143\u7d20\u6240\u6307\u5411\u7684\u5bf9\u8c61\uff09</li> <li>\u5217\u8868\u5143\u7d20\u4e3a\u53ef\u53d8\u5bf9\u8c61\u65f6\uff0c\u5217\u8868\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u8fd0\u7b97\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f</li> <li>\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\uff0c\u5982\u679c\u6709\u591a\u4e2a\u5f15\u7528\uff08\u53d8\u91cf\u6216\u8005\u67d0\u4e2a\u5bb9\u5668\u5bf9\u8c61\u7684\u5143\u7d20\uff09\u6307\u5411\u8be5\u53ef\u53d8\u5bf9\u8c61\u3002 \u901a\u8fc7\u5176\u4e2d\u4e00\u4e2a\u5f15\u7528\u6765\u6539\u53d8\u53ef\u53d8\u5bf9\u8c61\u7684\u503c\uff0c\u53e6\u5916\u7684\u5f15\u7528\u4e5f\u4f1a\u89c2\u6d4b\u5230\u503c\u6709\u53d8\u5316</li> </ul> </li> <li>\u5173\u4e8e\u4e0b\u6807\u3001\u5207\u7247\u3001\u4e0e\u62f7\u8d1d<ul> <li>\u4e0b\u6807\u4e3a\u6574\u6570\u65f6\uff0clist_obj[index] \u51fa\u73b0\u5728\u8868\u8fbe\u5f0f\u4e2d\uff0c\u8868\u793a\u8bbf \u95ee\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5217\u8868\u5143\u7d20</li> <li>\u4e0b\u6807\u4e3a\u5207\u7247\u65f6\uff0clist_obj[slice] \u51fa\u73b0\u5728\u8868\u8fbe\u5f0f\u4e2d\uff0c\u8868\u793a \u5217\u8868\u4e2d\u7684\u90a3\u4e9b\u6307\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u5217\u8868</li> <li>\u8be5\u65b0\u5217\u8868\u7684\u5143\u7d20\u4e0e\u539f\u5217\u8868\u7684\u5bf9\u5e94\u5143\u7d20\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c \u5373\u65b0\u7684\u5217\u8868\u8fd4\u56de\u7684\u662f\u5217\u8868\u5143\u7d20\u7684\u6d45\u62f7\u8d1d(shallow copy)</li> <li>\u5230\u73b0\u5728\u4e3a\u6b62\u4ecb\u7ecd\u7684\u5217\u8868\u64cd\u4f5c(\u5305\u62eclist\u51fd\u6570)\u90fd\u662f\u6d45\u62f7\u8d1d</li> <li><code>copy</code> \u6a21\u5757\u7684 <code>deepcopy</code> \u65b9\u6cd5\u8fdb\u884c\u6df1\u62f7\u8d1d\uff0c\u5373\u9012\u5f52\u62f7\u8d1d\u90a3\u4e9b\u7c7b\u578b\u4e3a\u5bb9\u5668\u5bf9\u8c61\u7684\u5143\u7d20</li> <li>\u4e0e\u4f7f\u7528\u4e0b\u6807\u8bbf\u95ee\u5217\u8868\u5143\u7d20\u7684\u65b9\u6cd5\u4e0d\u540c\uff0c\u5207\u7247\u64cd\u4f5c\u4e0d\u4f1a\u56e0\u4e3a\u4e0b\u6807\u8d8a\u754c\u800c\u629b\u51fa\u5f02\u5e38\uff0c \u4e0b\u6807\u8d85\u51fa\u8303\u56f4\u65f6\uff0c\u4ec5\u8fd4\u56de\u80fd\u904d\u5386\u5230\u7684\u5143\u7d20\u6216\u7a7a\u5217\u8868\uff0c\u4ee3\u7801\u5177\u6709\u66f4\u5f3a\u7684\u5065\u58ee\u6027</li> <li>\u5207\u7247\u4e0b\u6807\u9664\u4e86\u5192\u53f7\u5f62\u5f0f\u5916\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2aslice\u5bf9\u8c61\u3002\u5185\u7f6e\u51fd\u6570slice\u4e0erange\u7684\u7528\u6cd5\u7c7b\u4f3c\u3010\u7565\u3011</li> </ul> </li> <li>\u5207\u7247\u64cd\u4f5c<ul> <li>\u529f\u80fd1\uff1a\u53ef\u4ee5\u4f7f\u7528\u5207\u7247\u8bbf\u95ee\u539f\u5217\u8868\u4e2d\u591a\u4e2a\u4f4d\u7f6e\u7684\u5143\u7d20\uff0c\u7ec4\u6210 \u65b0\u5217\u8868</li> <li>\u529f\u80fd2\uff1a\u53ef\u4ee5\u4f7f\u7528\u5207\u7247\u539f\u5730\u4fee\u6539\u5217\u8868\u5185\u5bb9\uff1a\u6dfb\u52a0\u591a\u4e2a\u65b0\u5143\u7d20<ul> <li>list_obj[i:i] = iterable</li> </ul> </li> <li>\u529f\u80fd3\uff1a\u53ef\u4ee5\u4f7f\u7528\u5207\u7247\u539f\u5730\u4fee\u6539\u5217\u8868\u5185\u5bb9, \u66ff\u6362\u6216\u8005\u5220\u9664\u5143\u7d20\u3010RFS \u7684\u957f\u5ea6\u53ef\u4ee5\u4e0d\u7b49\u4e8e LFS \u957f\u5ea6\uff0c\u4f46\u5f53 step \u4e0d\u4e3a 1 \u65f6\u5fc5\u987b\u76f8\u7b49\u3011<ul> <li>list_obj[start:stop:step] = iterable</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_15","title":"\u5217\u8868\u6392\u5e8f","text":"<ul> <li>\u4f7f\u7528\u5217\u8868\u5bf9\u8c61\u7684sort\u65b9\u6cd5\u8fdb\u884c\u539f\u5730\u6392\u5e8f\u3002 help(list.sort)<ul> <li>L.sort(key=None, reverse=False) -&gt; \u8fd4\u56deNone\uff0c \u9ed8\u8ba4\u57fa\u4e8e\u5143\u7d20\u95f4\u7684\u5927\u5c0f\u5173\u7cfb\u6392\u5e8f\uff0c\u5347\u5e8f\u6392\u5217</li> <li>key\u7f3a\u7701\u4e3aNone\uff0c\u8868\u793a\u57fa\u4e8e\u5143\u7d20\u95f4\u7684\u5927\u5c0f\u5173\u7cfb\u6392\u5e8f\u3002\u4e5f\u53ef\u4f20\u9012\u51fd\u6570\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u6392\u5e8f\u7684\u57fa\u51c6</li> </ul> </li> <li>\u4f7f\u7528\u5185\u7f6e\u51fd\u6570sorted\u5bf9\u53ef\u8fed\u4ee3\u5bf9\u8c61(\u5217\u8868/\u5b57\u7b26\u4e32/\u5143\u7ec4\u7b49)\u8fdb\u884c\u6392\u5e8f\u5e76\u8fd4\u56de\u65b0\u5217\u8868<ul> <li>sorted(iterable, key=None, reverse=False)</li> </ul> </li> <li>\u4f7f\u7528\u5217\u8868\u5bf9\u8c61\u7684reverse\u65b9\u6cd5\u5c06\u5143\u7d20\u539f\u5730\u9006\u5e8f(\u5373\u5217\u8868\u4e2d\u5143\u7d20\u51fa\u73b0\u7684\u76f8\u53cd\u987a\u5e8f\uff09\uff0c\u6ce8\u610f\u4e0d\u7b49\u540c \u4e8e L.sort(reverse=True)</li> <li>\u4f7f\u7528\u5185\u7f6e\u51fd\u6570reversed\u5bf9\u53ef\u8fed\u4ee3\u5bf9\u8c61(\u5982\u5217\u8868)\u7684\u5143\u7d20\u8fdb\u884c\u9006\u5e8f\u6392\u5217\u5e76\u8fd4\u56dereversed\u5bf9\u8c61<ul> <li>sorted\u51fd\u6570\u8fd4\u56de\u65b0\u7684\u5217\u8868\uff0c\u4f46\u662freversed\u51fd\u6570\u8fd4\u56de\u7684\u4e0d\u662f\u5217\u8868</li> <li>reversed\u5bf9\u8c61\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u66f4\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668</li> </ul> </li> <li>len(seq)\uff1a\u8fd4\u56de\u5bb9\u5668\u5bf9\u8c61seq\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u9002\u7528\u4e8e \u5217\u8868\u3001range\u3001\u5143\u7ec4\u3001\u5b57\u5178\u3001\u96c6\u5408\u3001\u5b57\u7b26\u4e32\u7b49</li> <li>max\u548cmin\uff1a\u4e24\u79cd\u8bed\u6cd5<ul> <li>max(arg1, arg2, args, key=func)\u3001min(arg1, arg2,args, key=func): \u4f20\u9012\u7684\u53c2\u6570\u4e2d\u7684\u6700\u5927\u6216\u6700\u5c0f\u503c</li> <li>max(iterable, default=obj, key=func)\u3001 min(iterable default=obj, key=func)\uff1a\u8fd4\u56de\u8fed\u4ee3 \u5bf9\u8c61\u4e2d\u7684\u6700\u5927\u6216\u6700\u5c0f\u5143\u7d20\uff0c\u5982\u679c\u4e3a\u7a7a\uff0c\u8fd4\u56deobj</li> <li>key\u6307\u51fa\u5982\u4f55\u6bd4\u8f83\u5927\u5c0f\uff0c\u5373\u57fa\u4e8e\u8c03\u7528\u51fd\u6570key(item)\u7684\u5927\u5c0f\u6765\u5224\u65ad\u3002\u7f3a\u7701\u6bd4\u8f83\u53c2\u6570\u6216\u8005\u5143\u7d20\u7684\u5927\u5c0f</li> </ul> </li> <li><code>sum(iterable, start=0)</code>\uff1a\u5bf9\u6570\u503c\u578b\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5143\u7d20\u8fdb\u884c\u6c42\u548c\u8fd0\u7b97\uff0c\u6700\u540e\u52a0\u4e0astart\uff08\u7f3a\u7701\u4e3a0\uff09\u3002 \u5143\u7d20\u4e3a\u975e\u6570\u503c\u578b\u65f6\u629b\u51fa\u5f02\u5e38TypeError</li> </ul>"},{"location":"code/Python/Python-note/#sequence-unpacking","title":"\u5e8f\u5217\u89e3\u5305(sequence unpacking)","text":"<ul> <li>\u5e8f\u5217\u89e3\u5305\u4e5f\u79f0\u4e3a iterable unpacking\uff0c\u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61\u62c6\u5206\u6210\u5404\u4e2a\u5143\u7d20\uff0c\u8d4b\u503c\u7ed9\u591a\u4e2a\u5bf9\u8c61\u5f15\u7528(\u5982\u53d8\u91cf)<ul> <li>\u5bf9\u8c61\u5f15\u7528\u53ef\u4ee5\u662f\u53d8\u91cf\u540d\uff0c\u53ef\u4ee5\u662f\u5c5e\u6027\uff0c\u53ef\u4ee5\u662f\u901a\u8fc7\u4e0b\u6807\u63cf\u8ff0\u7684\u5bb9\u5668\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u662f\u901a\u8fc7 \u5207\u7247\u63cf\u8ff0\u7684\u5217\u8868\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20</li> </ul> </li> <li>\u8d4b\u503c\u8bed\u53e5(LHS=RHS)\u4e2d\u5de6\u8fb9LHS\u4e3a\u901a\u8fc7\u5143\u7ec4\u6216\u5217\u8868\u5f62\u5f0f\u63cf\u8ff0\u7684\u591a\u4e2a\u53d8\u91cf\u5f15\u7528\u65f6\uff0c\u8868\u793a\u5e8f\u5217\u89e3\u5305<ul> <li>LHS\u901a\u8fc7\u5706\u62ec\u53f7\u548c\u65b9\u62ec\u53f7(\u4e0d\u5f15\u8d77\u6b67\u4e49\u65f6\u53ef\u7701\u7565\uff09\u7ec4\u7ec7\u5bf9\u8c61\u5f15\u7528\uff0c\u901a\u8fc7\u9017\u53f7\u5206\u5272\u5f15\u7528</li> <li>RHS\u53ef\u4ee5\u662f\u4efb\u4f55\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5305\u62ectuple\u3001list\u3001dict\u3001range\u3001str\u7b49\uff0c\u9010\u4e2a\u6309\u987a\u5e8f\uff08\u4ece\u5de6\u5230\u53f3) \u53d6 \u8be5\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5143\u7d20\u8d4b\u4e88\u5de6\u8fb9\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5bf9\u8c61\u5f15\u7528</li> <li>\u57fa\u672c\u5e8f\u5217\u89e3\u5305\uff0c\u8981\u6c42\u5de6\u8fb9LHS\u4e2d\u7684\u5bf9\u8c61\u5f15\u7528\u4e2a\u6570\u4e0eRHS\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\u76f8\u540c</li> <li>\u6269\u5c55\u5e8f\u5217\u89e3\u5305\uff0c\u5141\u8bb8RHS\u7684\u5143\u7d20\u4e2a\u6570\u5927\u4e8e\u5de6\u8fb9\u5bf9\u8c61\u5f15\u7528\u7684\u4e2a\u6570\uff0c\u53ef\u4f7f\u7528\u5e26\u661f\u53f7\u7684\u5bf9\u8c61\u5f15\u7528 \uff08*seq\uff09\u6765\u6536\u96c6RHS\u4e2d\u7684\u591a\u4f59\u5143\u7d20</li> </ul> </li> <li>\u5e8f\u5217\u89e3\u5305\u4e0d\u4ec5\u4ec5\u7528\u4e8e\u8d4b\u503c\u8bed\u53e5\uff0c\u800c\u4e14\u53ef\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u4e2d <code>func(x, y, *seq, **map)</code><ul> <li>*seq \u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61seq\u7684\u5404\u4e2a\u5143\u7d20\u62c6\u5206\u540e\u4f5c\u4e3a\u4f4d\u7f6e\u5b9e\u53c2</li> <li>**map \u5c06map\u5bf9\u8c61(\u6bd4\u5982\u5b57\u5178)\u7684\u5404\u4e2a\u5143\u7d20\u62c6\u5206\u540e\u4f5c\u4e3a\u5173\u952e\u5b9e\u53c2 (var=value)</li> </ul> </li> <li>Python 3.5\u8fdb\u4e00\u6b65\u6269\u5145\u4e86\u5e8f\u5217\u89e3\u5305\u7684\u4f7f\u7528\u8303\u56f4</li> <li>\u5e8f\u5217\u89e3\u5305\u4e5f\u53ef\u7528\u4e8e\u5e8f\u5217(list,tuple,set,dict) \u5b57\u9762\u91cf\u5b9a\u4e49\u4e2d<ul> <li>*seq \u8868\u793a\u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61seq\u7684\u5404\u4e2a\u5143\u7d20\u62c6\u5206\u4e3a\u591a\u4e2a\u5143\u7d20</li> <li>**map \u8868\u793a\u5c06 map \u5bf9\u8c61\uff08\u6bd4\u5982\u5b57\u5178\uff09\u7684\u5404\u4e2a\u5143\u7d20\u62c6\u5206\u4e3a\u591a\u4e2a key:value \u5bf9</li> </ul> </li> </ul> <pre><code>*range(4), 4    # \u5143\u7ec4\u5b57\u9762\u91cf\u5b9a\u4e49\n*[range(4), 4]  # \u5217\u8868\u5b57\u9762\u91cf\u5b9a\u4e49\n{*range(4), 4}  # \u96c6\u5408\u5b57\u9762\u91cf\u5b9a\u4e49\n{'x': 1, **{'y': 2}}    # \u5b57\u5178\u5b57\u9762\u91cf\u5b9a\u4e49\n</code></pre>"},{"location":"code/Python/Python-note/#zipenumerate","title":"zip\u548cenumerate","text":"<ul> <li><code>zip(iter1,iter2,\u2026)</code>:\u8fd4\u56de\u4e00\u4e2azip\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668(iterator)\u5bf9\u8c61<ul> <li>\u4f20\u9012\u7684\u53c2\u6570\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61(\u5217\u8868\u3001\u5b57\u7b26\u4e32\u3001\u5143\u7ec4\u3001range\u7b49\uff0c\u751a\u81f3\u5305\u62ec\u5b57\u5178\uff09</li> <li>\u6bcf\u6b21\u8c03\u7528next(zip_object)\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4\uff0c\u8be5\u5143\u7ec4\u7684\u5143\u7d20\u4e3a\u5404\u4e2a\u53c2\u6570\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5bf9\u8c61\uff0c \u7b2c\u4e00\u6b21\u4e3a\u6240\u6709\u53c2\u6570\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u7b2c\u4e8c\u6b21\u4e3a\u6240\u6709\u53c2\u6570\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u2026</li> <li>\u5982\u679c\u8fd9\u4e9b\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u957f\u5ea6\u4e0d\u4e00\u81f4\uff0c\u5219\u8be5\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u4e2a\u6570\u4e3a\u8fd9\u4e9b\u957f\u5ea6\u7684\u6700\u5c0f\u503c</li> </ul> </li> <li>itertools\u6a21\u5757\u5305\u542b\u4e86\u8bb8\u591a\u8fed\u4ee3\u5668\uff0c\u5176\u4e2d <code>zip_longest(iter1, iter2, ..., fillvalue=None)</code> \u8fd4\u56dezip_longest \u5bf9\u8c61<ul> <li>\u4e0ezip\u7c7b\u4f3c\uff0c\u53ea\u662f\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u4e2a\u6570\u4e3a\u6240\u6709\u53ef\u8fed\u4ee3\u5bf9\u8c61\u53c2\u6570\u7684\u5143\u7d20\u4e2a\u6570\u7684\u6700\u5927\u503c</li> <li>\u5982\u679c\u67d0\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u53c2\u6570\u6ca1\u6709\u66f4\u591a\u7684\u5143\u7d20\u4e86\uff0c\u76f8\u5f53\u4e8e\u4e0b\u4e00\u4e2a\u5143\u7d20\u4e3afillvalue\uff0c\u7f3a\u7701\u4e3aNone</li> </ul> </li> <li><code>enumerate(iterable[, start])</code>\uff1a\u8fd4\u56de\u679a\u4e3e\u5bf9\u8c61\uff0c\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u5176\u6bcf\u4e2a\u5143\u7d20\u4e3a\u5305\u542b \u4e0b\u6807\u548c\u5bf9\u5e94\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5143\u7d20\u7684\u5143\u7ec4\u3002\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u6807\u4ecestart\u5f00\u59cb\uff0c\u7f3a\u7701\u4e3a0</li> </ul>"},{"location":"code/Python/Python-note/#_16","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f","text":"<ul> <li>\u5e03\u5c14(Boolean)\u7c7b\u578b\u7684\u503c\u53ea\u6709True\u548cFalse</li> <li>bool\u7c7b\u578b\u53ef\u4ee5\u770b\u6210\u6574\u6570\u7c7b\u578b\u7684\u7279\u4f8b\uff0cTrue\u548cFalse\u7684\u503c\u5206\u522b\u4e3a\u6574\u65701\u548c0</li> <li>\u7b97\u672f\u8fd0\u7b97\u65f6, bool\u7c7b\u578b\u7684\u5bf9\u8c61obj\u9996\u5148\u8f6c\u6362\u4e3a\u6574\u6570\uff0c\u5373<code>int(obj)</code>\uff0c\u7136\u540e\u8ba1\u7b97</li> <li>\u6570\u5b57\u7c7b\u578b(\u5305\u62ecint/float/complex)\u7684\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u8f6c\u53d8\u4e3abool\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u79f0\u4e3a\u771f\u503c\u5224\u65ad<ul> <li>\u975e0\u7684\u6570\u5b57\u5bf9\u8c61\u8f6c\u53d8\u4e3aTrue\uff0c\u503c\u4e3a0\u7684\u6570\u5b57\u5bf9\u8c61\u8f6c\u53d8\u4e3aFalse\uff0c\u6bd4\u5982bool(4) bool(-2) bool(0.0)</li> </ul> </li> <li>\u51fa\u73b0\u5728if/while\u4e2d\u4f5c\u4e3a\u51b3\u5b9a\u5206\u652f\u8d70\u5411\u6216\u5faa\u73af\u7ed3\u675f\u7684\u6761\u4ef6\u7684\u6761\u4ef6\u8868\u8fbe\u5f0fexpr<ul> <li>\u4e00\u822c\u5305\u62ec\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff0c\u5224\u65ad\u8fd0\u7b97\u7684\u7ed3\u679c\u662fTrue/False</li> <li>\u4e5f\u53ef\u4ee5\u662f\u4efb\u4f55\u8868\u8fbe\u5f0f\uff0c\u4f1a\u8fdb\u884c\u771f\u503c\u5224\u65ad bool(expr)</li> <li>\u4e00\u4e2a\u5bf9\u8c61\u4e00\u822c\u771f\u503c\u5224\u65ad\u4e3a\u771f\uff0c\u9664\u975e(\u771f\u503c\u5224\u65ad\u4e3a\u5047)\uff1a<ul> <li>\u5305\u542b\u4e86<code>__bool__</code>\u65b9\u6cd5\uff0c\u7531\u5176\u8fd4\u56de\u503c\u786e\u5b9a\uff0c\u6216\u8005<code>__len__</code>\u65b9\u6cd5\u8fd4\u56de\u957f\u5ea6\u4e3a0\u8868\u793a\u4e3a\u5047</li> <li>False/None/\u503c\u4e3a0\u7684\u6570\u503c\u5bf9\u8c61/\u957f\u5ea6\u4e3a0\u7684\u7a7a\u5e8f\u5217\u5bf9\u8c61</li> </ul> </li> <li>\u771f\u503c\u5224\u65ad\u4e3aTrue: \u975e0\u6570\u503c\u5bf9\u8c61\u3001\u975e\u7a7a\u5e8f\u5217\u5bf9\u8c61</li> </ul> </li> <li>\u903b\u8f91\uff08\u5e03\u5c14\uff09\u8fd0\u7b97\u7b26<ul> <li>and:\u903b\u8f91\u4e0e <code>expr1 and expr2 and expr3</code> \u6bd4\u5982n&gt;= 0 and n &lt; 10</li> <li>and\u8fd0\u7b97\u91c7\u7528\u5de6\u7ed3\u5408\u5f8b\uff0c\u5373\u4ece\u5de6\u5230\u53f3\u8fdb\u884c\u8fd0\u7b97</li> <li>\u77ed\u8def\u903b\u8f91(short-circuit logic) \u6216\u60f0\u6027\u6c42\u503c(lazy evaluation\uff09<ul> <li>\u5982\u679c\u524d\u9762\u771f\u503c\u5224\u65ad\u4e3a\u5047\uff0c\u4e0d\u7ba1\u540e\u9762\u6761\u4ef6(\u8868\u8fbe\u5f0f)\u600e\u6837\uff0c\u6700\u7ec8\u4e5f\u662f\u5047\u503c\u3002\u540e\u9762\u8868\u8fbe\u5f0f\u4e0d\u9700\u8981\u8ba1\u7b97</li> </ul> </li> <li>\u6ce8\u610f\u4e0e\u5176\u4ed6\u8bed\u8a00\u4e0d\u540c\uff0cand/or\u8fd0\u7b97\u8fd4\u56de\u7684\u7ed3\u679c\u5e76\u4e0d\u4e00\u5b9a\u662fTrue\u6216\u8005False\uff0c\u800c\u662f\u8fd4\u56de\u67d0\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c (\u7528\u4e8eif/while\u4e2d\u7684\u6761\u4ef6\u65f6\u518d\u8fdb\u884c\u771f\u503c\u5224\u65ad\uff09<ul> <li>and \u8fd4\u56de\u7684\u662f\u6700\u540e\u4e00\u4e2a\u51b3\u5b9a\u771f\u503c\u5224\u65ad\u7684\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u5373\u7b2c\u4e00\u4e2a\u5047\u7684\u8868\u8fbe\u5f0f\uff08\u5df2\u7ecf\u77e5\u9053\u6700\u7ec8\u4e3a\u5047\u503c)\u6216\u8005\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff08\u6700\u7ec8\u7684\u771f\u503c\u5224\u65ad\u7531\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u51b3\u5b9a\uff09</li> <li>and : \u8fd4\u56de\u7b2c\u4e00\u4e2a\u5047(None\u3001\u7a7a\u6216\u8005\u6570\u503c0)\u7684\u8868\u8fbe\u5f0f\u6216\u8005\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f</li> </ul> </li> <li>or: \u903b\u8f91\u6216\u8fd0\u7b97 <code>expr1 or expr2 or expr3</code><ul> <li>\u8fd4\u56de\u7b2c\u4e00\u4e2a\u771f\uff08\u975eNone\u3001\u975e\u7a7a\u6216\u8005\u975e0\uff09\u7684\u8868\u8fbe\u5f0f\u6216\u8005\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f</li> </ul> </li> <li>\u4e09\u4e2a\u903b\u8f91\u8fd0\u7b97\u7b26\u4e2d: not\u4f18\u5148\u7ea7\u6700\u9ad8\uff0cand\u7b2c\u4e8c\uff0cor\u4f18\u5148\u7ea7\u6700\u4f4e</li> <li>if/else\u4e09\u5143\u8868\u8fbe\u5f0f: <code>value1 if condition else value2</code><ul> <li>\u5f53\u6761\u4ef6\u8868\u8fbe\u5f0fcondition\u7684\u503c\u4e3aTrue\u65f6\uff0c\u8868\u8fbe\u5f0f\u7684\u503c\u4e3avalue1\uff0c\u5426\u5219\u503c\u4e3avalue2</li> <li>\u77ed\u8def\u903b\u8f91\uff1a\u4e0d\u4f1a\u540c\u65f6\u5bf9value1 \u548cvalue2 \u6c42\u503c</li> <li>\u5176\u4ed6\u8bed\u8a00\u7684\u4e09\u5143\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u4e00\u822c\u4e3a condition?value1:value2</li> </ul> </li> </ul> </li> <li>\u5728\u8bbe\u8ba1\u6761\u4ef6\u8868\u8fbe\u5f0f\u65f6, \u82e5\u80fd\u5927\u6982\u9884\u6d4b\u4e0d\u540c\u6761\u4ef6\u5931\u8d25\u7684\u6982\u7387\u6216\u8005\u6839\u636e\u8868\u8fbe\u5f0f\u8fd0\u7b97\u7684\u5f00\u9500, \u53ef\u5c06\u591a\u4e2a\u6761 \u4ef6\u6839\u636e\u201dand\u201d\u548c\u201dor\u201d\u8fd0\u7b97\u7684\u77ed\u8def\u7279\u6027\u8fdb\u884c\u7ec4\u7ec7, \u63d0\u9ad8\u7a0b\u5e8f\u8fd0\u884c\u6548\u7387<ul> <li>\u8868\u8fbe\u5f0f\u8fd0\u7b97\u5f00\u9500\u5c0f\u7684\u5e94\u8be5\u5728\u524d\u9762\u8fdb\u884c\u6c42\u503c</li> <li>and\u8fd0\u7b97\u65f6\u5931\u8d25\u6982\u7387\u9ad8\uff0cor\u8fd0\u7b97\u65f6\u6210\u529f\u6982\u7387\u9ad8\u7684\u8868\u8fbe\u5f0f\u5e94\u8be5\u5728\u524d\u9762\u6c42\u503c</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_17","title":"\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7","text":"<ul> <li>\u9664\u4e86**\u4e3a\u53f3\u7ed3\u5408\u5916\uff0c\u5176\u4ed6\u8fd0\u7b97\u7b26\u90fd\u662f\u5de6\u7ed3\u5408</li> <li>lambda &lt; if-else &lt; \u903b\u8f91\u8fd0\u7b97\u7b26(or,and,not) &lt; \u6bd4\u8f83\u8fd0 \u7b97\u7b26 &lt; \u4e24\u5143\u4f4d\u8fd0\u7b97 &lt; \u7b97\u672f\u8fd0\u7b97 &lt; \u4e00\u5143\u8fd0\u7b97 &lt; \u6c42\u5e42\u8fd0 \u7b97 &lt; \u4e0b\u6807\u3001\u5207\u7247\u3001\u51fd\u6570\u8c03\u7528\u3001\u5b57\u9762\u91cf\u5b9a\u4e49\u7b49</li> <li>\u8d4b\u503c\u4e0d\u662f\u8fd0\u7b97\u7b26\uff0c\u5176\u91c7\u7528\u53f3\u7ed3\u5408\u65b9\u5f0f</li> <li>\u9996\u5148\u5b9a\u4e49\u5bf9\u8c61\uff0c\u7136\u540e\u624d\u53ef\u4ee5\u8fd0\u7b97 \u2192 \u5b57\u9762\u91cf\u4f18\u5148\u7ea7\u6700\u9ad8</li> <li>\u51fd\u6570\u8c03\u7528\u3001\u4e0b\u6807\u548c\u5207\u7247\u3001\u5c5e\u6027\u7b49\u8fd4\u56de\u5bf9\u8c61 \u2192 \u4f18\u5148\u7ea7\u6b21\u4e4b</li> <li>\u6709\u4e86\u5bf9\u8c61\uff0c\u53ef\u4ee5\u8fdb\u884c\u8ba1\u7b97 \u2192 \u7b97\u672f\u8fd0\u7b97\u7b26\u6b21\u4e4b\uff0c\u4e00\u5143\u7684\u4f18\u5148\u7ea7\u66f4\u9ad8</li> <li>\u8ba1\u7b97\u540e\u53ef\u4ee5\u8fdb\u884c\u6bd4\u8f83 \u2192 \u6bd4\u8f83\u8fd0\u7b97\u7b26\u6bd4\u7b97\u672f\u8fd0\u7b97\u7b26\u66f4\u4f4e</li> <li>\u6bd4\u8f83\u4ee5\u53ca\u6210\u5458\u5224\u65ad\u7684\u7ed3\u679c\u4e3aTrue/False\uff0c\u53ef\u4ee5\u8fdb\u884c\u903b\u8f91\u8fd0 \u7b97 \u2192 \u903b\u8f91\u8fd0\u7b97\u6bd4\u6bd4\u8f83\u8fd0\u7b97\u7b26\u4f4e\uff0c\u5355\u76ee\u903b\u8f91\u8fd0\u7b97\u7b26(not)\u66f4\u9ad8</li> <li>\u4e09\u5143\u8fd0\u7b97\u7b26\u53calambda\u8868\u8fbe\u5f0f\u4f18\u5148\u7ea7\u6700\u4f4e </li> </ul>"},{"location":"code/Python/Python-note/#_18","title":"\u5faa\u73af\u8bed\u53e5","text":"<ul> <li>while \u5faa\u73af<ul> <li>\u5faa\u73af\u53d8\u91cf\uff1a\u5728\u5faa\u73af\u8fc7\u7a0b\u4e2d\u6539\u53d8\u4e14\u4f5c\u4e3a\u5faa\u73af\u6761\u4ef6\u7684\u53d8\u91cf</li> <li>\u2605\u5728\u5faa\u73af\u4f53\u5c3e\u90e8\u4ee5\u53cacontinue\u5904\u5e94\u8be5\u4fdd\u8bc1 \u5faa\u73af\u53d8\u91cf\u6709\u66f4\u65b0</li> <li>\u5faa\u73af\u4f53\u4e2d\uff1a<ul> <li>break\u8bed\u53e5\uff0c\u5faa\u73af\u63d0\u524d\u7ed3\u675f</li> <li>continue\u8bed\u53e5\uff0c\u5f53\u524d\u8f6e\u6b21\u7ed3\u675f\uff0c\u63d0\u524d\u8fdb\u5165\u4e0b\u8f6e</li> </ul> </li> <li>while\u8fd8\u652f\u6301\u53ef\u9009\u7684else\u5b50\u53e5\uff0c\u5f53\u5faa\u73af\u81ea\u7136\u7ed3\u675f\u65f6 \uff08\u4e0d\u662f\u56e0\u4e3a\u6267\u884c\u4e86break\u800c\u7ed3\u675f\uff09\u6267\u884celse\u7ed3\u6784\u4e2d\u7684\u8bed\u53e5</li> </ul> </li> <li>\u5faa\u73af\u7684\u4e09\u79cd\u601d\u8def<ul> <li>\u7528 <code>while True:</code> \u5728\u5faa\u73af\u4e2d\u5224\u65ad\u5faa\u73af\u53d8\u91cf\u662f\u5426\u8fbe\u5230\u7ec8\u6b62\u6761\u4ef6\uff0c\u7528 break \u8df3\u51fa\u5faa\u73af\uff1b</li> <li>\u4e0d\u4f7f\u7528 break \u8bed\u53e5\uff0c\u5c06\u5faa\u73af\u7ed3\u675f\u6761\u4ef6\u5f52\u5e76\u5230 while \u540e\u9762\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\uff1b</li> <li>\u4e0d\u4f7f\u7528 break\uff0c\u5f15\u5165 done \u53d8\u91cf\uff08<code>while not done</code>\uff09\uff0c\u5728\u5faa\u73af\u4f53\u53d1\u73b0\u5faa\u73af\u7ed3\u675f\u65f6\uff0c\u8bbe\u7f6e done=True</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_19","title":"\u5217\u8868\u63a8\u5bfc\u5f0f","text":"<ul> <li>\u5217\u8868\u63a8\u5bfc\u5f0f/\u89e3\u6790\u5f0f\uff08list comprehension\uff09\u662f\u5229\u7528\u5176\u4ed6\u53ef\u8fed\u4ee3\u5bf9\u8c61(\u6bd4\u5982\u5217\u8868)\u4e2d\u7684\u5404\u4e2a\u5143\u7d20 \u6216\u8005\u67d0\u4e9b\u5143\u7d20\u521b\u5efa\u65b0\u5217\u8868\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u975e\u5e38\u7b80\u6d01\uff0c\u4ee3\u7801\u5177\u6709\u5f3a\u53ef\u8bfb\u6027<ul> <li>\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\uff0c\u901a\u8fc7\u8868\u8fbe\u5f0f\u8fdb\u884c\u8fdb\u4e00\u6b65\u8fd0\u7b97\uff0c\u5bf9\u5e94\u65b0\u5217\u8868\u4e2d\u7684\u5143\u7d20</li> <li>if\u5b50\u53e5\u8fc7\u6ee4\u6389\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u4e00\u4e9b\u5143\u7d20</li> <li>\u5217\u8868\u63a8\u5bfc\u5f0f\u4e2d\u5f15\u5165\u7684\u53d8\u91cf\u76f8\u5f53\u4e8e\u672c\u5730\u53d8\u91cf\uff0c\u4ec5\u5728\u5217\u8868\u63a8\u5bfc\u5f0f\u4e2d\u6709\u610f\u4e49</li> <li>\u5217\u8868\u63a8\u5bfc\u5f0f\u4e2d\u7684\u8868\u8fbe\u5f0f\u53ef\u662f\u51fd\u6570\u8c03\u7528\u3001\u5143\u7ec4\u5217\u8868\u7b49\u5b57\u9762\u91cf\u5b9a\u4e49\u3001\u590d\u6742\u8868\u8fbe\u5f0f\uff0c\u8fd8\u53ef\u4ee5\u662f\u4e00\u4e2a\u5217\u8868\u63a8\u5bfc\u5f0f</li> </ul> </li> <li>\u591a\u4e2afor/if\u5b50\u53e5<ul> <li>\u7b2c\u4e00\u4e2afor(\u52a0\u4e0a\u53ef\u9009\u7684if)\u4e4b\u540e\u53ef\u4ee5\u8ddf0\u6216\u591a\u4e2afor(\u52a0\u4e0a\u53ef\u9009\u7684if)</li> <li>\u4ece\u4e00\u4e2a\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u53d6value\uff0c\u5728\u6b64\u57fa\u7840\u4e0a \u4ece\u7b2c\u4e8c\u4e2a\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u53d6value2\uff0c\u5982\u6b64\u2026</li> <li>\u4ece\u6700\u540e\u4e00\u4e2a\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u53d6valueN\uff0c\u8fd9\u4e9b value\u8fdb\u884c\u8fd0\u7b97\u4f5c\u4e3a\u65b0\u5217\u8868\u4e2d\u7684\u5143\u7d20</li> </ul> </li> <li>\u8865\u5145:\u5b57\u5178\u63a8\u5bfc\u5f0f\u548c\u96c6\u5408\u63a8\u5bfc\u5f0f<ul> <li>\u5b57\u5178\u63a8\u5bfc\u5f0f\u53ef\u7528\u6765\u751f\u6210\u5b57\u5178<ul> <li><code>{k:v for k,v in zip(['a','b','c'],[1,2,3])}</code></li> </ul> </li> <li>\u96c6\u5408\u63a8\u5bfc\u5f0f\u53ef\u7528\u6765\u751f\u6210\u96c6\u5408<ul> <li><code>{2*x for x in range(5)}</code></li> </ul> </li> </ul> </li> </ul> <pre><code>[[i * j for j in range(1, 4)] for i in range(1, 4)] # \u5217\u8868\u63a8\u5bfc\u5f0f\u4e2d\u7684\u8868\u8fbe\u5f0f\u4e5f\u662f\u4e00\u4e2a\u5217\u8868\u63a8\u5bfc\u5f0f\n\n# \u4ea7\u751f\u5305\u542b\u4e86\u6240\u6709\u4e24\u4f4d\u5076\u6570\u7684\u5217\u8868\ns1 = list(range(10, 100, 2))\ns2 = [10 * x + y for x in range(1, 10)\n      for y in range(0, 10, 2)]     # \u591a\u4e2a for \u8bed\u53e5\ns3 = [10 * x + y for x in range(0, 10) if x != 0\n      for y in range(10) if y % 2 == 0]\n\n# \u751f\u6210 100 \u4ee5\u5185\u7684\u6240\u6709\u7d20\u6570\nprime = 0 not in [p % d for d in range(2, int(math.sqrt(p) + 1))]   # \u8fd9\u4e2a\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5224\u65ad p \u662f\u5426\u4e3a\u7d20\u6570\n[p for p in range(2, 100) if 0 not in [p % d for d in range(2, int(math.sqrt(p) + 1))]]  \n</code></pre>"},{"location":"code/Python/Python-note/#_20","title":"\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":"<ul> <li>\u751f\u6210\u5668\u8868\u8fbe\u5f0f(Generator Expression)\u7684\u8bed\u6cd5\u4e0e\u5217\u8868\u63a8\u5bfc\u5f0f\u57fa\u672c\u76f8\u540c\uff0c\u552f\u4e00\u7684\u533a\u522b\u5c31 \u4f7f\u7528\u5706\u62ec\u53f7\uff0c\u5217\u8868\u63a8\u5bfc\u5f0f\u4f7f\u7528\u65b9\u62ec\u53f7</li> <li>\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u8fd0\u7b97\u7684\u7ed3\u679c\u5e76\u4e0d\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u800c\u662f\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61</li> <li>\u751f\u6210\u5668\u5bf9\u8c61\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u5f53\u7136\u4e5f\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528for\u5faa\u73af\u8bbf\u95ee\uff0c\u4e5f\u53ef\u8f6c\u6362\u4e3a\u5217\u8868\u7b49</li> <li>\u3010\u5176\u548c\u5217\u8868\u63a8\u5bfc\u5f0f\u7684\u533a\u522b\u5728\u4e8e\uff0c\u8fd9\u91cc\u662f\u751f\u6210\u4e86\u4e00\u4e2a iterator\uff0c\u56e0\u6b64\u5728\u5f53\u4ec5\u9700\u8981\u5f97\u5230\u5176\u4e2d\u524d\u51e0\u4e2a\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u6548\u7387\u4f1a\u6bd4\u8f83\u9ad8\u3002\u3011\u5982\u4e0b\u4f8b\uff0c\u52fe\u80a1\u6570 (pythogorian triplets)\uff1a\u5b58\u5728{x,y,z}, 0&lt;x&lt;y&lt;z,\u4f7f\u5f97x^2+y^2=z^2\u3010\u56e0\u4e3a\u8981\u4e00\u6b21\u6027\u751f\u6210 1000^3 \u7684\u7ed3\u679c\uff0c\u7b2c\u4e00\u4e2d\u5b9e\u73b0\u7684\u4ee3\u4ef7\u5f88\u9ad8\uff0c\u5bf9\u6bd4\u4e0b\u6765\u82e5\u53ea\u9700\u8981\u751f\u6210\u524d\u5341\u4e2a\u52fe\u80a1\u6570\uff0c\u5219\u5217\u8868\u63a8\u5bfc\u5f0f\u9700\u8981 21s \u800c\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4ec5\u9700 0.0004s\u3011</li> </ul> <pre><code>def pyt_firstN_list(nums):\n    pyt = [(x,y,z) for z in range(1, 1000) for y in range(1,z)\n           for x in range(1,y) if x*x + y*y == z*z ]\n    firstN_pyt = pyt[:nums]\n    print(*firstN_pyt)\n\ndef pyt_firstN_generator(nums):\n    pyt = ((x,y,z) for z in range(1, 10000) for y in range(1, z)\n           for x in range(1, y) if x*x + y*y == z*z)\n    firstN_pyt = [next(pyt) for x in range(nums)]\n    print(*firstN_pyt)\n</code></pre>"},{"location":"code/Python/Python-note/#_21","title":"\u9012\u5f52\u8c03\u7528","text":"<ul> <li>\u786e\u5b9a\u9012\u5f52\u5173\u7cfb\uff0c\u5c06\u9012\u5f52\u51fd\u6570\u770b\u6210\u4e00\u4e2a\u9ed1\u76d2\u5b50\uff0c\u5199\u51fa\u9012\u5f52\u8c03\u7528\u7684\u4ee3\u7801</li> <li>\u786e\u5b9a\u9012\u5f52\u7ed3\u675f\u6761\u4ef6</li> <li>\u9012\u5f52\u51fd\u6570\u7684\u4e3b\u8981\u95ee\u9898\u662f\u4e0d\u80fd\u8d85\u8fc7\u7cfb\u7edf\u5141\u8bb8\u7684\u9012\u5f52\u6df1\u5ea6</li> <li>\u9012\u5f52\u8c03\u7528\u7ecf\u5e38\u91c7\u7528\u8bb0\u5fc6\u65b9\u6cd5(memorization) \u63d0\u5347\u6027\u80fd\uff0c\u8bb0\u5f55\u5df2\u7ecf\u6c42\u51fa\u7684\u503c\u3010\u5982\u4e0b\u4f8b\uff0c\u5229\u7528\u7ec4\u5408\u6570\u7684\u6027\u8d28\uff0c\u7b2c\u4e00\u79cd\u65b9\u5f0f\u76f4\u63a5\u9012\u5f52\uff0c\u540e\u9762\u7684\u4e24\u79cd\u65b9\u5f0f\u91c7\u7528\u4e86 memory \u8bb0\u5f55\u5df2\u8ba1\u7b97\u7684\u7ed3\u679c\u4ece\u800c\u63d0\u5347\u6548\u7387\uff08\u7b2c\u4e09\u79cd\u901a\u8fc7\u5d4c\u5957\u51fd\u6570\u5b9a\u4e49\u4f7f\u7528\u95ed\u5305(Closure)\uff0c\u907f\u514d\u4e86\u5168\u5c40\u53d8\u91cf\uff09\uff1b\u5b9e\u9645\u6765\u770b\uff0c\u5f53\u53c2\u6570\u4e3a 50, 5 \u65f6\uff0c\u7b2c\u4e00\u79cd\u65b9\u6cd5\u9700 0.5s \u800c\u540e\u9762\u4e24\u79cd\u5747\u9700 0.00015s\uff0c\u7b2c\u4e09\u79cd\u7684\u901f\u5ea6\u8981\u7a0d\u5feb\u4e8e\u91c7\u7528\u5168\u5c40\u53d8\u91cf\u7684\u3002\u3011</li> </ul> <pre><code>def combination(n, i):\n    \"\"\" C(n,i) = C(n-1, i) + C(n-1, i-1) \"\"\"\n    if n == i or i == 0:\n        return 1\n    return combination(n - 1, i) + combination(n - 1, i - 1)\n\ncombination_memories = dict() # \u8bb0\u5f55\u5df2\u7ecf\u6c42\u51fa\u7684C(n,i)\u7684\u503c, key=(n, i)\ndef combination2(n, i):\n    if n == i or i == 0:\n        return 1\n    if (n, i) not in combination_memories:\n        combination_memories[(n, i)] = combination2(n - 1, i) + combination2(n - 1, i - 1)\n    return combination_memories[(n, i)]\n\ndef combination_calc(n, i):\n    memories = dict() # \u8bb0\u5f55\u5df2\u7ecf\u6c42\u51fa\u7684C(n,i)\u7684\u503c, key=(n, i)\n    def combination(n, i):\n        if n == i or i == 0:\n            return 1\n        if (n, i) not in memories:\n            memories[(n, i)] = combination(n - 1, i) + combination(n - 1, i - 1)\n        return memories[(n, i)]\n    return combination(n, i)    \n</code></pre>"},{"location":"code/Python/Python-note/#_22","title":"\u5b57\u5178","text":"<ul> <li>\u5217\u8868\u3001\u5143\u7ec4\u7b49\u5e8f\u5217\u5bf9\u8c61\u6309\u987a\u5e8f\u5b58\u50a8\u591a\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7\u6574\u6570\u4e0b\u6807\u6765\u5feb\u901f\u8bbf\u95ee</li> <li>\u5b57\u5178\u662f\u5305\u542b\u952e-\u503c\u5bf9(key-value pair)\u7684\u6620\u5c04(map)\u7c7b\u578b\u7684\u53ef\u53d8\u5e8f\u5217\uff1a key\u6620\u5c04\u5230\u4e00\u4e2avalue<ul> <li>\u4fdd\u5b58\u7684\u5bf9\u8c61(value)\u662f\u65e0\u5e8f\u7684\u30103.7 \u4e4b\u540e\u4e8b\u5b9e\u4e0a\u662f\u6709\u5e8f\u7684\u3011\uff0c\u901a\u8fc7key\u53ef\u4ee5\u5f88\u5feb\u5730\u627e\u5230\u5176\u6620\u5c04\u7684value: dictobj[key]<ul> <li>\u4e0d\u662f\u6309\u7167key\u7684\u5927\u5c0f\u987a\u5e8f\u6392\u5217\uff0c\u5177\u4f53\u987a\u5e8f\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u7684\u5185\u90e8\u5b9e\u73b0</li> <li>python3.7\u5f00\u59cb\uff0c\u4fdd\u7559\u63d2\u5165\u987a\u5e8f\uff0c\u904d\u5386\u65f6\u6309\u7167\u63d2\u5165\u7684\u987a\u5e8f</li> </ul> </li> <li>\u5df2\u77e5\u5bf9\u8c61(value)\u8981\u627e\u5230\u5176\u5bf9\u5e94\u7684key\u5219\u9700\u8981\u8bb8\u591a\u989d\u5916\u7684\u5de5\u4f5c</li> <li>\u952e(keys)\u4e0d\u5141\u8bb8\uff08==\u5173\u7cfb\u610f\u4e49\u4e0a\u7684\uff09\u91cd\u590d<ul> <li>\u5404\u4e2a\u5143\u7d20\u7684key\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\uff0c\u4f46\u5fc5\u987b\u662f\u53efhashable\u7684\u5bf9\u8c61\uff0c\u5373\u53ef\u8c03\u7528hash(obj)\u5f97 \u5230\u4e00\u4e2a\u503c</li> <li>\u6574\u6570\u3001\u5b9e\u6570\u3001\u590d\u6570\u3001\u5b57\u7b26\u4e32\u7b49\u4e0d\u53ef\u53d8\u5bf9\u8c61\u53ef\u4ee5\u4f5c\u4e3akey</li> <li>\u4e0d\u53ef\u53d8\u7684\u5bb9\u5668\u5bf9\u8c61(\u5982\u5143\u7ec4\uff09\u6709\u53ef\u80fd\u53ef\u4ee5\u4f5c\u4e3akey\uff0c\u5982(1,2)\u53ef\u4ee5\uff0c\u4f46(1, 2, [1])\u4e0d\u53ef\u4ee5</li> </ul> </li> <li>\u503c(values)\u53ef\u662f\u4efb\u4f55\u5bf9\u8c61</li> </ul> </li> <li>\u5b57\u5178\u5b9a\u4e49<ul> <li>1 \u53ef\u4ee5\u901a\u8fc7\u5b57\u5178\u5b57\u9762\u91cf(literal)\u521b\u5efadict\u5bf9\u8c61\uff1a\u6309\u7167\u5148\u540e\u987a\u5e8f\u5c06\u5143\u7d20\u52a0\u5165\u5b57\u5178\uff0c \u5982\u679c\u540e\u9762\u7684\u5143\u7d20\u7684key\u4e0e\u4e4b\u524d\u7684\u4e00\u81f4\uff0c\u5219\u66f4\u65b0\u5176\u5bf9\u5e94\u7684\u503c<ul> <li><code>{key1:value1 ,key2:value2, \u2026 ,keyN:valueN}</code></li> </ul> </li> <li>2 \u53ef\u4ee5\u901a\u8fc7dict()\u51fd\u6570\u6765\u521b\u5efadict\u5bf9\u8c61<ul> <li>dict() \u521b\u5efa\u7a7a\u5b57\u5178</li> <li>dict(mapping) \u4ece\u4e00\u4e2amapping\u5bf9\u8c61(\u63cf\u8ff0\u591a\u4e2akey:value\u5bf9\uff0c\u6bd4\u5982\u5b57\u5178) \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u5178</li> <li>dict(iterable) \u65b0\u5b57\u5178\u7684\u5143\u7d20\u6765\u81ea\u4e8eiterable\uff0citerable\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5fc5\u987b\u662f\u4e00\u4e2a\u5305\u542b2\u4e2a\u5b50\u5143\u7d20\u7684\u5bb9\u5668\u5bf9\u8c61\u3002\u7b2c\u4e00\u4e2a\u5b50\u5143\u7d20\u4f5c\u4e3akey\uff0c\u7b2c\u4e8c\u4e2a\u5b50\u5143\u7d20\u4e3avalue</li> <li><code>dict(**kwargs)</code> \u6839\u636e\u51fd\u6570\u8c03\u7528\u65f6\u4f20\u9012\u7684\u5173\u952e\u5b57\u53c2\u6570(keyvar=value)\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u5178, \u8be5\u5b57\u5178 \u7684key\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8be5\u5b57\u7b26\u4e32\u4fdd\u5b58\u4e86\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\u7ed9\u51fa\u7684\u53d8\u91cf\u540d\uff0c\u800c\u5bf9\u5e94 \u7684\u503c\u4e3a\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\u7684\u503c\uff0c\u5373\u5bf9\u5e94\u7684\u952e\u503c\u5bf9\u4e3a \u2018keyvar\u2019:value<ul> <li><code>d1 = dict(one=1, two=2, three=3)</code></li> <li>\u5b9e\u9645\u521b\u5efa\u7684\u5b57\u5178\u4e3a <code>{'one': 1, 'two': 2, 'three': 3}</code></li> </ul> </li> </ul> </li> <li>3 \u901a\u8fc7dict\u7c7b\u65b9\u6cd5fromkeys\u521b\u5efa\u65b0\u5b57\u5178\uff0c\u6bcf\u4e2a\u5143\u7d20\u7684key\u6765\u81ea\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u503c\u8bbe\u7f6e\u4e3avalue\uff0c \u7f3a\u7701\u4e3aNone<ul> <li><code>dict.fromkeys(iterable[,value])</code></li> </ul> </li> <li>4 \u652f\u6301\u5b57\u5178\u63a8\u5bfc\u5f0f\u751f\u6210\u5b57\u5178 </li> </ul> </li> </ul> <ul> <li>\u904d\u5386\u5b57\u5178<ul> <li>len(d) \u8fd4\u56de\u5b57\u5178\u4e2d\u5143\u7d20\u7684\u4e2a\u6570</li> <li>d.keys() \u8fd4\u56de\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5176\u4e2d\u5143\u7d20\u4e3a\u5b57\u5178\u4e2d\u7684\u6240\u6709key</li> <li>d.values() \u8fd4\u56de\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5176\u4e2d\u5143\u7d20\u4e3a\u5b57\u5178\u4e2d\u7684\u6240\u6709value</li> <li>d.items() \u8fd4\u56de\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5176\u4e2d\u5143\u7d20\u4e3a\u5305\u62ec\u4e86(key,value)\u7684\u5143\u7ec4</li> <li><code>iter(d)</code> \u8fd4\u56de\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u5176\u4e2d\u5143\u7d20\u4e3a\u5b57\u5178\u4e2d\u7684\u6240\u6709key\uff0c\u7c7b\u4f3c\u4e8e<code>iter(d.keys())</code> \u610f\u5473\u7740d\u4f5c\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u65f6\uff0c\u5176\u5143\u7d20\u4e3a\u5b57\u5178\u7684key</li> </ul> </li> <li>\u66f4\u65b0\u5b57\u5178<ul> <li>d[key]=value: \u5982\u679ckey\u5b58\u5728\uff0c\u5219\u66f4\u65b0\u5b57\u5178\u4e2d\u952e=key\u7684\u5143\u7d20\u7684\u503c\u4e3avalue\uff1b\u5982\u679ckey\u4e0d\u5b58\u5728\uff0c \u5219\u6dfb\u52a0key:value</li> <li>\u66f4\u65b0(update)\u591a\u4e2a\u952e\u503c\uff0c\u3010update\u7684\u53c2\u6570\u4e0edict()\u7684\u53c2\u6570\u7c7b\u4f3c\u3011<ul> <li>\u5c06\u53e6\u4e00\u4e2a\u5b57\u5178another\u7684\u952e\u3001\u503c\u5bf9\u6dfb\u52a0\u5230\u5f53\u524d\u5b57\u5178\u5bf9\u8c61</li> <li>\u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61another\u4e2d\u952e\u3001\u503c\u5bf9\u6dfb\u52a0\u5230\u5f53\u524d\u5b57\u5178\u5bf9\u8c61\uff0c\u8981\u6c42another\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u4e3a\u5305\u542b\u4e24 \u4e2a\u5143\u7d20\u7684\u5bb9\u5668\u5bf9\u8c61</li> <li>\u53ef\u91c7\u7528\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012</li> </ul> </li> <li><code>dictobj.update(another); dictobj.update(key1=value1,key2=value2)</code></li> </ul> </li> <li>\u5b57\u5178\u5143\u7d20\u7684\u6dfb\u52a0\u4e0e\u4fee\u6539\uff1asetdefault<ul> <li>get(key[, default]) \u8fd4\u56ded[key]\u6216\u8005default</li> <li><code>setdefault(key[,default])</code>, \u8fd4\u56ded[key]\u6216\u8005default\uff0c\u4f46\u662f\u5982\u679ckey\u4e0d\u5728\u5b57\u5178\uff0c\u4f1a\u6dfb\u52a0key:default\u3010\u7528\u6765\u67e5\u8be2 key \u8fd4\u56de\u5bf9\u5e94\u7684 value\uff0c\u82e5 key \u4e0d\u518d\u5b57\u5178\u4e2d\u5219\u4f1a\u5728\u5b57\u5178\u4e2d\u6dfb\u52a0\u8be5\u8bb0\u5f55\uff0c\u800c\u4e0d\u662f\u50cf get(key[, default]) \u4e00\u6837\u8fd4\u56de\u6307\u5b9a\u7684\u9ed8\u8ba4\u503c\uff08\u9ed8\u8ba4\u4e3a None\uff09\u3011 </li> </ul> </li> <li>\u5220\u9664\u5143\u7d20<ul> <li>del d[key] \u5220\u9664\u5143\u7d20\uff0c\u5982\u679ckey\u4e0d\u5b58\u5728\uff0craise KeyError</li> <li>pop(key) \u5982\u679ckey\u5b58\u5728\uff0c\u5220\u9664\u5bf9\u5e94\u5143\u7d20\u5e76\u8fd4\u56de\u503c\uff0c\u5426\u5219raise KeyError</li> <li>pop(key,value) \u5982\u679ckey\u5b58\u5728\uff0c\u5220\u9664\u5bf9\u5e94\u5143\u7d20\u5e76\u8fd4\u56de\u503c\uff0c\u5426\u5219\u8fd4\u56devalue</li> <li>popitem() \u79fb\u8d70\u5e76\u8fd4\u56de\u67d0\u4e00\u4e2a(key,value\uff09\u5bf9\uff0c\u5982\u679c\u4e3a\u7a7a raise KeyError</li> <li>clear() \u6e05\u9664\u6240\u6709\u5143\u7d20</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#defaultdict","title":"defaultdict","text":"<ul> <li>\u6a21\u5757collections\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u7279\u522b\u7684\u5b57\u5178\u7c7b\u578bdefaultdict</li> <li><code>defaultdict(factory[,\u2026])</code>\u7528\u4e8e\u521b\u5efa\u4e00\u4e2adefaultdict\u5bf9\u8c61<ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61factory\uff08\u51fd\u6570\uff09\uff0c\u5176\u4f59\u53c2\u6570\u4e0edict\u51fd\u6570\u7684\u53c2\u6570\u4e00\u6837\u3010\u4f8b\u5982\u7c7b\u7684\u6784\u9020\u51fd\u6570\u3011</li> <li>\u5b57\u5178\u7684key:value\u5bf9\u7684value\u7f3a\u7701\u503c\u4e3a \u8c03\u7528factory()\u6240\u8fd4\u56de\u7684\u7ed3\u679c</li> </ul> </li> <li>dict\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u53ef\u7528\u4e8edefaultdict</li> <li>\u5728\u901a\u8fc7dictobj[key]\u8bbf\u95ee\u5143\u7d20\u65f6\uff1a<ul> <li>\u5982\u679ckey\u5b58\u5728\uff0c\u8fd4\u56dedictobj[key]</li> <li>\u5982\u679ckey\u4e0d\u5b58\u5728\uff0c\u4f1a\u9996\u5148\u8bbe\u7f6edictobj[key]\u4e3a\u4e00\u4e2a\u7f3a\u7701\u503c\uff0c\u7136\u540e\u8fd4\u56dedictobj[key]</li> <li>dictobj[key] = value = factory(); return value</li> <li>\u526f\u4f5c\u7528\u662f\u5982\u679c\u4e0d\u5c0f\u5fc3\u5199\u9519\u4e86key\uff0c\u4f1a\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u5143\u7d20</li> </ul> </li> </ul> <pre><code># key\u4e3a\u67d0\u4e2a\u540c\u5b66\u7684\u59d3\u540d\uff0c\u800c\u5bf9\u5e94\u7684value\u4e3a\u4e00\u4e2a\u5217\u8868\uff0c\u8bb0\u5f55\u4e86\u591a\u6b21\u8003\u8bd5\u7684\u5206\u6570\u3002\n# \u5047\u8bbe\u67d0\u6b21\u8003\u8bd5\u6210\u7ee9\u51fa\u6765\u4e86\uff0c\u8981\u4fdd\u5b58\u540d\u4e3aname\u7684\u540c\u5b66\u7684\u6210\u7ee9score \n# name, score = 'tony', 98\nfrom collections import defaultdict\nd5 = defaultdict(list) #\u521b\u5efa\u4e00\u4e2a\u7a7a\u5b57\u5178\uff0c\u503c\u7684\u7f3a\u7701\u503c\u4e3a list()\uff0c\u5373\u7a7a\u5217\u8868 []\nd5['tony'].append(98)\n</code></pre>"},{"location":"code/Python/Python-note/#iterable-unpacking","title":"\u5e8f\u5217\u89e3\u5305(iterable unpacking)","text":"<p>\u3010\u6240\u8c13\u7684 map \u7c7b\u578b\uff0c\u53ef\u7406\u89e3\u4e3a\u5b57\u5178\u3011</p> <ul> <li>\u5e8f\u5217\uff08\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff09\u89e3\u5305\uff0c\u53ef\u7528\u5728<ul> <li>\u8d4b\u503c\u8bed\u53e5 x, y, z = 1, 2, 3; x, *y, z = range(10)</li> <li>\u51fd\u6570\u8c03\u7528: print(*[1, 2, 3])</li> <li>\u8865\u5145\uff0c\u5b57\u9762\u91cf\u5b9a\u4e49\u4e2d\uff1a <code>[*[1, 2, 3], 4, 5]</code></li> </ul> </li> <li>\u8865\u5145\uff0c\u5728\u5b57\u5178\u5b57\u9762\u91cf\u5b9a\u4e49\u548c\u51fd\u6570\u8c03\u7528\u65f6\u5f15\u5165\u6620\u5c04\u89e3\u5305(mapping unpacking )<ul> <li>\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u5f15\u5165<code>**dictobj</code>\uff0cdictobj\u7684key\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u76f8\u5f53\u4e8e\u4f20\u9012\u591a\u4e2a\u5173\u952e\u5b57\u53c2\u6570\uff0c\u6bcf\u4e2a\u5173\u952e\u5b57\u53c2\u6570\u7684\u540d\u79f0\u4e3a\u5b57\u5178\u5bf9\u8c61\u7684\u5143\u7d20\u7684key(\u5b57\u7b26\u4e32)\u5305\u542b\u7684\u540d\u5b57(\u8981\u6ee1\u8db3\u53d8\u91cf\u540d\u7684\u8981\u6c42\uff09\uff0c\u800c\u5173\u952e\u5b57\u53c2\u6570\u7684\u503c\u4e3a\u5b57\u5178\u5bf9\u8c61\u4e2dkey\u5bf9\u5e94\u7684\u503c</li> <li>\u5b57\u5178\u5b57\u9762\u91cf\u5b9a\u4e49\u65f6\uff0c\u5f15\u5165**dictobj\uff0c\u8868\u793a\u5c06\u8be5\u5b57\u5178\u5c55\u5f00\u6210\u952e\u503c\u5bf9\u7684\u5f62\u5f0f</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_23","title":"\u96c6\u5408","text":"<ul> <li> <p>{ } \u5b9a\u4e49\u7684\u662f\u7a7a\u5b57\u5178\uff0c\u800c\u4e0d\u662f\u7a7a\u96c6\u5408\uff0cset()\u521b\u5efa\u7a7a\u96c6\u5408\u5bf9\u8c61  </p> </li> <li> <p>set\u63a8\u5bfc\u5f0f</p> <ul> <li>{2*x for x in range(5)}</li> </ul> </li> <li>\u4e0d\u53ef\u53d8\u96c6\u5408frozenset<ul> <li>frozenset\u4e3a\u4e0d\u53ef\u53d8\u96c6\u5408\u5bf9\u8c61\uff0c\u53ea\u80fd\u901a\u8fc7forzenset()\u51fd\u6570\u521b\u5efa\uff0c\u4e0eset()\u51fd\u6570\u7c7b\u4f3c</li> <li>\u9664\u4e86\u96c6\u5408\u5143\u7d20\u7684\u66f4\u6539\u7c7b\u7684\u64cd\u4f5c\u4e0d\u652f\u6301\u5916\uff0cset\u7684\u5176\u4ed6\u64cd\u4f5c\u90fd\u53ef\u5e94\u7528\u4e8e frozenset</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#sorted","title":"sorted() \u518d\u8c08\u6392\u5e8f","text":"<ul> <li>L.sort(key=None, reverse=False) \u539f\u5730\u6392\u5e8f\u5217\u8868\uff0c\u8fd4\u56deNone</li> <li>sorted(iterable, key=None, reverse=False) \u5bf9\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5143\u7d20\u6392\u5e8f\uff0c\u8fd4\u56de\u65b0\u7684\u5217\u8868</li> <li>key\u4e5f\u53ef\u4f20\u9012\u51fd\u6570\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u6392\u5e8f\u7684\u57fa\u51c6<ul> <li>\u5728\u8c03\u7528\u65f6\u4f20\u9012\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4e3a\u8981\u6392\u5e8f\u7684iterable\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20</li> <li>\u51fd\u6570\u8c03\u7528\u7684\u8fd4\u56de\u503c\u4f5c\u4e3a\u7ed9iterable\u5bf9\u8c61\u4e2d\u5bf9\u5e94\u5143\u7d20\u6392\u5e8f\u7684\u57fa\u51c6</li> <li>\u5b9a\u4e49\u65f6\u4e00\u822c\u4e5f\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff08\u5b9e\u9645\u4e0a\u53ef\u6709\u591a\u4e2a\u53c2\u6570\uff0c\u4f46\u540e\u9762\u7684\u53c2\u6570\u5e94\u8be5\u4e3a\u7f3a\u7701\u503c\u53c2\u6570\uff09</li> <li>\u6392\u5e8f\u7b97\u6cd5\u662f\u7a33\u5b9a\u7684\uff0c\u5728\u57fa\u51c6\u76f8\u540c\u65f6\u6309\u7167\u539f\u6709\u51fa\u73b0\u7684\u987a\u5e8f\u6392\u5217</li> </ul> </li> <li>\u3010\u6709\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u6309\u7167\u4e24\u79cd\u6807\u51c6\u8fdb\u884c\u6392\u5e8f\uff0c\u4f8b\u5982\u5bf9\u4e8e\u4e00\u4e2a\u300c\u4eba\u7269\u300d\u8d44\u6599\u5bf9\u8c61\uff0c\u5148\u6309\u59d3\u540d\u5347\u5e8f\u6392\u5e8f\uff0c\u59d3\u540d\u76f8\u540c\u7684\u6309\u5e74\u9f84\u964d\u5e8f\u6392\u5e8f\u2014\u2014\u8fd9\u65f6\u5019 key \u8fd4\u56de\u7684\u57fa\u51c6\u5e94\u8be5\u6709\u4e24\u4e2a\uff0c\u501f\u52a9 lambda \u8868\u8fbe\u5f0f\u5982\u4e0b\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u7136\u540e key \u8c03\u7528\u8be5\u51fd\u6570\uff09\u3011</li> </ul> <pre><code># \u5bf9\u4e8epersons\u8fdb\u884c\u6392\u5e8f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5217\u8868\uff1a\u5148\u6309\u59d3\u540d\u5347\u5e8f\u6392\u5e8f\uff0c\u59d3\u540d\u76f8\u540c\u7684\u6309\u5e74\u9f84\u964d\u5e8f\u6392\u5e8f\npersons = [{'name':'Dong', 'age':37}, {'name':'Zhang', 'age':40},\n           {'name':'Li', 'age':50}, {'name':'Dong', 'age':43}]\nsorted(persons, key=lambda person: (person['name'], -person['age']), reverse=False)\n</code></pre> <ul> <li>\u3010\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8981\u6c42\u53bb\u9664\u5217\u8868\u4e2d\u91cd\u590d\u7684\u5143\u7d20\uff0c\u4fdd\u7559\u5143\u7d20\u51fa\u73b0\u7684\u987a\u5e8f\uff1b\u5f53\u7136\u8fd9\u91cc\u6307\u7684\u662f\u5143\u7d20\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u5730\u65b9\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528\u5217\u8868\u7684 index(value) \u65b9\u6cd5\uff0c\u4f5c\u4e3a key \u8fdb\u884c\u6392\u5e8f\u3011</li> </ul> <pre><code>import random\nlistRandom = [random.choice(range(10000)) for i in range(100)]\nnoRepeat = list(set(listRandom))\nnewList = sorted(noRepeat, key=listRandom.index)    \n# \u6ce8\u610f key \u4f20\u5165\u7684\u662f\u51fd\u6570\uff0c\u8fd9\u91cc\u8c03\u7528\u4e86\u539f\u672c\u5217\u8868 listRandom \u7684 index \u65b9\u6cd5\uff0c\u53c2\u6570\u4e3a noRepeat \u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\n</code></pre>"},{"location":"code/Python/Python-note/#2","title":"\u5b57\u7b26\u4e32 2\uff1a\u5b57\u7b26\u4e32\u65b9\u6cd5","text":""},{"location":"code/Python/Python-note/#unicode","title":"\u5b57\u7b26\u4e32\u7c7b\u578b\u5224\u65ad\uff1a \u6839\u636eUnicode\u5b57\u7b26\u96c6\u4e2d\u7684\u7c7b\u578b\u5224\u65ad","text":""},{"location":"code/Python/Python-note/#splitrsplit","title":"\u5206\u5272\u548c\u7ec4\u5408: split\u548crsplit","text":"<ul> <li>split(sep=None, maxsplit=-1)</li> <li>rsplit(sep=None, maxsplit=-1)</li> <li>\u4ee5\u6307\u5b9a\u5b57\u7b26\u4e32sep\u4e3a\u5206\u9694\u7b26\u5206\u5272\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u5143\u7d20\u4e3a\u5206\u5272\u51fa\u6765\u7684\u5b57\u7b26\u4e32(\u4e0d\u5305\u62ec\u5206\u9694 \u7b26)\u3002\u5982\u679c\u5b57\u7b26\u4e32\u4e2dsep\u8fde\u7eed\u51fa\u73b0\uff0c\u8fd9\u4e9bsep\u4e4b\u95f4\u4f1a\u5206\u5272\u51fa\u7a7a\u5b57\u7b26\u4e32</li> <li>sep\u4e00\u822c\u4e3a\u5355\u4e2a\u5b57\u7b26\uff0c\u4f46\u4e5f\u53ef\u4ee5\u662f\u591a\u4e2a\u5b57\u7b26</li> <li>\u5982\u679c<code>sep==None</code>\uff1a<ul> <li>\u6240\u6709\u7a7a\u767d\u7c7b\u5b57\u7b26\uff08\u5305\u62ec\u7a7a\u683c\u3001\u6362\u884c\u7b26\u3001\u5236\u8868\u7b26\u7b49\u7b49\uff09\u90fd\u5c06\u88ab\u8ba4\u4e3a\u662f\u5206\u9694\u7b26</li> <li>\u591a\u4e2a\u8fde\u7eed\u7684\u7a7a\u767d\u7c7b\u5b57\u7b26\u5f53\u6210\u4e00\u4e2a\u6574\u4f53\uff0c\u5373\u76f8\u5f53\u4e8e\u4e00\u4e2a\u7a7a\u767d\u5206\u9694\u7b26\u3002\u8fd9\u6837\u4e2d\u95f4\u4e0d\u4f1a\u6709\u7a7a\u5b57\u7b26\u4e32\u51fa\u73b0</li> <li>\u5b57\u7b26\u4e32\u6700\u524d\u9762\u548c\u6700\u540e\u9762\u5206\u5272\u51fa\u6765\u7684\u7a7a\u5b57\u7b26\u4e32\u4f1a\u88ab\u79fb\u8d70</li> <li>\u6240\u6709\u7a7a\u5b57\u7b26\u4e32\u4f1a\u88ab\u79fb\u8d70\uff0c\u6bcf\u4e2a\u5b57\u7b26\u4e32\u9996\u5c3e\u90fd\u6ca1\u6709\u7a7a\u683c\u7c7b\u5b57\u7b26</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#splitlines","title":"\u5206\u5272\u548c\u7ec4\u5408: splitlines","text":"<ul> <li>splitlines([keepends=False])</li> <li>\u5b57\u7b26\u4e32\u6839\u636e\u6362\u884c\u7c7b\u5b57\u7b26(\u5305\u62ec\u2019\\n\u2019)\u5206\u5272\u6210\u591a\u4e2a\u5b50\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u8fd9\u4e9b\u5b50\u5b57\u7b26\u4e32\u7684\u5217\u8868\u3002\u5b57\u7b26\u4e32\u6700\u540e\u4e3a\u6362\u884c\u5b57\u7b26\u65f6\uff0c\u5728\u8be5\u5206\u9694\u7b26\u4e4b\u540e\u4e0d\u4f1a\u51fa\u73b0\u7a7a\u5b57\u7b26\u4e32\u3010\u4f46\u82e5\u5f00\u5934\u4e3a\u6362\u884c\u5219\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5982 <code>s3 = '\\nab c\\n\\nde fgkl\\n'; s3.splitlines()</code> \u7684\u7ed3\u679c\u4e3a <code>['', 'ab c', '', 'de fgkl']</code>\uff0c\u8bbe\u7f6e\u4fdd\u7559\u6362\u884c\u7b26\u7684\u7ed3\u679c\u4e3a <code>['\\n', 'ab c\\n', '\\n', 'de fgkl\\n']</code>\u3011</li> <li>\u7a7a\u5b57\u7b26\u4e32\u8c03\u7528\u672c\u51fd\u6570\u65f6\u8fd4\u56de\u7a7a\u5217\u8868</li> <li><code>keepends=True</code>\u8868\u793a\u4fdd\u7559\u5206\u9694\u7b26(\u6362\u884c\u5b57\u7b26)</li> </ul>"},{"location":"code/Python/Python-note/#partition-rpartition","title":"\u5206\u5272\u548c\u7ec4\u5408: partition rpartition","text":"<ul> <li>partition(sep) rpartition(sep)</li> <li>\u4ee5\u6307\u5b9a\u5b57\u7b26\u4e32sep\u4e3a\u5206\u9694\u7b26\u5206\u5272\u6700\u591a\u4e00\u6b21\uff0c\u5c06\u539f\u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u5305\u62ec3\u90e8\u5206\u7684\u5143\u7ec4\uff0c\u5373sep\u524d\u7684\u5b57 \u4e32\u3001sep\u3001sep\u540e\u7684\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u6307\u5b9a\u7684\u5206\u9694\u7b26\u4e0d\u5728\u539f\u5b57\u7b26\u4e32\u4e2d\uff0c\u5219\u8fd4\u56de\u539f\u5b57\u7b26\u4e32\u548c\u4e24\u4e2a\u7a7a\u5b57\u7b26\u4e32</li> </ul>"},{"location":"code/Python/Python-note/#join","title":"\u5206\u5272\u548c\u7ec4\u5408: join","text":"<ul> <li>strobj.join(iterable)</li> <li>\u5c06iterable\u5bf9\u8c61(\u5217\u8868,\u5b57\u7b26\u4e32\u7b49)\u4e2d \u7684\u591a\u4e2a\u5143\u7d20\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5143\u7d20\u95f4 \u63d2\u5165\u76f8\u5e94\u7684\u5206\u5272\u5b57\u7b26\u4e32strobj\uff0c \u8fd4\u56de\u65b0\u7684\u5b57\u7b26\u4e32</li> <li>\u6ce8\u610f iterable \u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u662f\u5b57\u7b26\u4e32</li> </ul>"},{"location":"code/Python/Python-note/#_24","title":"\u5927\u5c0f\u5199\u8f6c\u6362","text":"<ul> <li>lower() \u8fd4\u56de\u5c0f\u5199\u683c\u5f0f\u7684\u5b57\u7b26\u4e32</li> <li>upper() \u8fd4\u56de\u5927\u5199\u683c\u5f0f\u7684\u5b57\u7b26\u4e32</li> <li>capitalize() \u8fd4\u56de\u5b57\u7b26\u4e32\u4e2d\u9996\u5b57\u6bcd\u5927\u5199,\u5176\u4ed6\u5b57\u6bcd\u5c0f\u5199</li> <li>title() \u8fd4\u56de\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u5176\u4ed6\u5c0f\u5199</li> <li>swapcase() \u8fd4\u56de\u5b57\u7b26\u4e32\u4e2d\u5927\u5c0f\u5199\u4e92\u6362</li> </ul>"},{"location":"code/Python/Python-note/#prefixsuffix","title":"\u6d4b\u8bd5\u548c\u67e5\u627e\uff1a\u662f\u5426\u4ee5prefix\u5f00\u5934\u6216suffix\u7ed3\u5c3e","text":"<ul> <li>startswith(prefix[,start[,end]])</li> <li>endswith(suffix[,start[,end]])</li> <li>prefix\u548csuffix\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32</li> <li>\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u5176\u6bcf\u4e2a\u5143\u7d20\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u662f\u5426\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5f00\u5934\u6216\u7ed3\u5c3e</li> </ul>"},{"location":"code/Python/Python-note/#_25","title":"\u6210\u5458\u5224\u65ad\u548c\u67e5\u627e","text":"<ul> <li>\u6709\u5e8f\u5e8f\u5217\u90fd\u652f\u6301 in, count, index, str\u4e5f\u4e0d\u4f8b\u5916<ul> <li>sub in S sub not in S \u5224\u65ad\u5b50\u4e32sub\uff08\u4e0d\u4ec5\u662f\u5355\u4e2a\u5b57\u7b26\uff09\u662f\u5426\u5728S\u4e2d\u51fa\u73b0</li> <li>index(sub[,start[,end]]) \u8fd4\u56de\u5b50\u4e32sub\u5728\u6307\u5b9a\u8303\u56f4\u5185\u9996\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e(\u4e0b\u6807)\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u629b \u5f02\u5e38ValueError</li> <li>count(sub[,start[,end]]) \u8fd4\u56de\u5b50\u4e32sub\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u627e\u5230\u4e00\u4e2a\u5b50\u4e32\u540e\uff0c\u5728\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u7ee7\u7eed\u627e\u2026</li> </ul> </li> <li>rindex(sub[,start[,end]]) \u8fd4\u56de\u5b50\u4e32sub\u5728\u6307\u5b9a\u8303\u56f4\u5185\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e(\u4e0b\u6807)\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u629b\u5f02\u5e38ValueError</li> <li><code>find(sub[,start[,end]]) rfind(sub[,start[,end]])</code> \u4e0eindex/rindex\u7c7b\u4f3c\uff0c\u8fd4\u56de\u5b50\u4e32sub\u5728\u6307\u6216\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u8fd4\u56de-1</li> </ul>"},{"location":"code/Python/Python-note/#maketrans-translate","title":"\u5b57\u7b26\u4e32\u8f6c\u6362: maketrans translate","text":"<ul> <li>replace\u65b9\u6cd5\u53ea\u80fd\u4e32\u884c\u66ff\u4ee3\uff0c\u800c\u4e0d\u80fd\u5e76\u884c\u66ff\u4ee3!</li> <li>\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u67d0\u4e9b\u5b57\u7b26\u5e76\u884c\u66ff\u4ee3\u4e3a\u53e6\u5916\u4e00\u4e9b\u5b57\u7b26\u6216\u5220\u9664: \u9996\u5148maketrans\u6784\u9020\u6620\u5c04\u8868\uff0c \u7136\u540etranslate\u8fdb\u884c\u5b9e\u9645\u7684\u66ff\u6362\u3010\u4e8b\u5b9e\u4e0a\u5c31\u662f\u6784\u9020 Unicode \u6570\u5b57\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u89c1\u4e0b\u4f8b\u3011</li> <li>\u9759\u6001\u65b9\u6cd5maketrans(x,y[,z]]) \u5982\u679c\u6709\u4e24\u4e2a\u4ee5\u4e0a\u53c2\u6570\uff0cx\u548cy\u5fc5\u987b\u957f\u5ea6\u4e00\u81f4\uff0c\u6bcf\u4e00\u4e2a\u5728x \u51fa\u73b0\u7684\u5b57\u7b26\u8f6c\u6362\u4e3ay\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u5982\u679c\u6709\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u5728z\u4e2d\u51fa\u73b0\u7684\u5b57\u7b26\u8f6c\u6362 \u4e3aNone\uff0c\u5373\u5220\u9664</li> <li>strobj.translate(table)\u6309\u7167\u6620\u5c04\u8868\u5bf9strobj\u8fdb\u884c\u8f6c\u6362\uff0c\u8fd4\u56de\u8f6c\u6362\u540e\u7684\u65b0\u5b57\u7b26\u4e32</li> <li>\u9759\u6001\u65b9\u6cd5maketrans\u521b\u5efa\u7684\u6620\u5c04\u8868\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2adict\uff0c\u8be5\u5b57\u5178\u7684key\u4e3a\u5b57\u7b26\u7684unicode(\u6574 \u6570)\uff0c\u800cvalue\u4e3a<ul> <li>\u5982\u679c\u4e3a\u6574\u6570\uff0c\u5219\u662f\u8981\u66ff\u6362\u4e3a\u7684\u5b57\u7b26\u7684Unicode</li> <li>\u5982\u679c\u4e3aNone\uff0c\u5219\u8868\u793a\u5220\u9664</li> <li>\u5982\u679c\u4e3a\u5b57\u7b26\u4e32\uff0c\u5219\u539f\u6765\u7684\u5b57\u7b26\u66ff\u6362\u4e3a\u76f8\u5e94\u5b57\u7b26\u4e32</li> </ul> </li> <li>maketrans(mapping)\uff0c\u53ea\u4f20\u9012\u4e00\u4e2a\u5b57\u5178\u53c2\u6570\uff0c\u5c06\u67d0\u4e2a\u5b57\u7b26\u6620\u5c04\u4e3a\u4e00\u4e2a\u5b57\u7b26\u6216\u591a\u4e2a\u5b57\u7b26\u6216None<ul> <li>\u8be5\u5b57\u5178\u7684key\u5e94\u8be5\u4e3a\u4e00\u4e2a\u5355\u4e2a\u5b57\u7b26ch\u6216\u8005ord(ch)\u8fd4\u56de\u7684\u6574\u6570(\u5373unicode\u7801\u70b9)\u3010\u4f46\u662f\u53ef\u80fd\u4e3a\u5b57\u7b26\u4e32\u3011</li> <li>\u503c\u53ef\u4ee5\u662f<ul> <li>None\uff0c\u8868\u793a\u5220\u9664\u8be5\u5b57\u7b26</li> <li>\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u66ff\u4ee3\u4e3a\u8be5\u5b57\u7b26\u4e32</li> <li>\u6574\u6570n\uff0c\u8868\u793a\u66ff\u6362\u4e3achr(n)</li> </ul> </li> </ul> </li> </ul> <pre><code># \u5229\u7528 maketrans translate \u65b9\u6cd5\u5b9e\u73b0\u7b80\u5355\u7684\u52a0\u5bc6\ns = 'Great hopes make great man.'\ntab = str.maketrans('abcde', 'uvwxy', '.?'))\n# tab: {97: 117, 98: 118, 99: 119, 100: 120, 101: 121, 46: None, 63: None}\nss = s.translate(tab)\n# 'Gryut hopys muky gryut mun'\nss.translate(str.maketrans('uvwxy', 'abcde')) # \u89e3\u5bc6\n\n# \u5c06\u5b57\u7b26\u66ff\u6362\u4e3a\u5b57\u7b26\u4e32\ns2 = 'dlmao@fudan.edu.cn'\ntab3 = str.maketrans({'@':' AT ', '.':' DOT '})\ns2.translate(tab3)\n# 'dlmao AT fudan DOT edu DOT cn'\n</code></pre>"},{"location":"code/Python/Python-note/#2str-bytes","title":"\u5b57\u7b26\u4e32\u7f16\u7801 2\uff1astr \u4e0e bytes","text":"<ul> <li>\u5b57\u7b26\u96c6(Charset):\u7cfb\u7edf\u652f\u6301\u7684\u591a\u4e2a\u62bd\u8c61\u5b57\u7b26\u7684\u96c6\u5408\uff0c\u8fd9\u4e9b\u5b57\u7b26\u5728\u8be5\u5b57\u7b26\u96c6\u4e2d\u901a\u8fc7\u4e00\u4e2a\u79f0\u4e3a\u7801\u70b9 (Code Point)\u7684\u6570\u5b57\u552f\u4e00\u6807\u8bc6<ul> <li>\u5e38\u7528\u5b57\u7b26\u96c6\u5305\u62ecASCII/GBK/Unicode</li> </ul> </li> <li>\u4fdd\u5b58\u5728\u5916\u90e8\u5b58\u50a8(\u786c\u76d8/U\u76d8\u7b49\uff09\u4e2d\u7684\u6570\u636e\u4ee5\u5b57\u8282\u65b9\u5f0f\u4fdd\u5b58</li> <li>\u57fa\u4e8e\u67d0\u79cd(UTF-8)\u7f16\u7801\u65b9\u5f0f\uff0c\u5c06\u5176\u89e3\u91ca\u4e3aUnicode\u5b57\u7b26\u96c6\u4e2d\u7684\u5b57\u7b26\u4e32str</li> <li>\u3010\u6587\u4ef6\u4ee5 UTF-8 \u6216\u8005\u5176\u4ed6\u7f16\u7801\u65b9\u5f0f\u4fdd\u5b58\u4e3a\u5b57\u8282 bytes\uff0c\u7ecf\u8fc7\u89e3\u7801\u5f97\u5230\u5b57\u7b26\u4e32 str\uff0c\u4e3a Unicode code point\uff1b\u540c\u6837\u5b57\u7b26\u4e32\u7ecf\u8fc7\u7f16\u7801\u5f97\u5230\u5b57\u8282 bytes\u3011<ul> <li>Python3\u7684\u5b57\u7b26\u4e32\u4e3aUnicode \u5b57\u7b26\u4e32\uff0c\u91c7\u7528UTF-8 \u7f16\u7801</li> <li>\u6211\u4eec\u901a\u8fc7IDLE\u7b49\u7f16\u5199\u7684\u6e90\u6587 \u4ef6(.py)\u5176\u7f16\u7801\u65b9\u5f0f\u4e3aUTF-8</li> </ul> </li> <li>unicode\u5b57\u7b26\u4e32str\u4e0e\u5b57\u8282\u4e32bytes\u4e4b\u95f4\u7684\u8f6c\u6362<ul> <li>\u7c7b\u578bbytes\u7c7b\u4f3c\u4e8estr\uff0c\u4e5f\u662f\u4e00\u4e2a\u4e0d\u53ef\u53d8\u7684\u6709\u5e8f\u5e8f\u5217\u7c7b\u578b\uff0c \u53ea\u662f\u5176\u5143\u7d20\u4e3a\u5355\u4e2a\u5b57\u8282\uff0c\u800cstr\u4e2d\u6bcf\u4e2a\u5143\u7d20\u4e3a\u5355\u4e2a\u5b57\u7b26<ul> <li>\u5b57\u9762\u91cf\u5b9a\u4e49\uff1a\u548cstr\u7c7b\u4f3c\uff0c\u53ea\u662f\u5728\u4e4b\u524d\u6dfb\u52a0b\u6216\u8005B\u5373\u53ef\uff0c\u6bd4\u5982<code>b'abcd'</code></li> <li>\u7c7b\u578bbytearray\u4e0ebytes\u7c7b\u4f3c\uff0c\u53ea\u662f\u5176\u4e3a\u53ef\u53d8\u5e8f\u5217\u7c7b\u578b</li> </ul> </li> <li><code>str_obj.encode(encoding='utf-8', errors='strict')</code></li> <li>encoding\u53c2\u6570\u7ed9\u51fa\u7f16\u7801\u65b9\u5f0f\uff0c\u7f3a\u7701\u4e3autf-8\uff0c\u5e38\u7528\u7684\u7f16\u7801\u8fd8\u5305\u62ecascii, latin1, gbk\u7b49</li> <li>errors\u53c2\u6570\u6307\u51fa\u5728\u7f16\u7801/\u89e3\u7801\u8fc7\u7a0b\u4e2d\u65e0\u6cd5\u8f6c\u6362\u65f6\u600e\u4e48\u529e\uff1f\u7f3a\u7701\u2018strict\u2019\uff0c\u5373 \u6bd4\u5982\u67d0\u4e9b\u5b57\u7b26\u4e0d\u5c5e\u4e8e\u76f8\u5e94\u5b57\u7b26\u96c6\u4e2d\u7684\u5b57\u7b26\uff0c\u6216\u8005\u67d0\u4e9b\u5b57\u8282\u4e0d\u662f\u5408\u6cd5\u7684\u5b57\u8282\u5e8f\u5217  </li> <li>errors\u53c2\u6570\u6307\u51fa\u5728\u7f16\u7801\u8fc7\u7a0b\u4e2d\u7531\u4e8e\u67d0\u4e9b\u5b57\u7b26\u4e0d\u5c5e\u4e8e\u76f8\u5e94\u5b57\u7b26\u96c6\u4e2d\u7684\u5b57\u7b26\u4ece\u800c\u65e0\u6cd5\u8f6c\u6362\u65f6\u600e\u4e48\u529e<ul> <li>strict(\u7f3a\u7701):\u629b\u51fa\u5f02\u5e38UnicodeEncodeError</li> <li>ignore\uff1a\u5ffd\u7565\u5e76\u8df3\u8fc7\u65e0\u6cd5\u7f16\u7801\u7684\u5b57\u7b26</li> <li>replace:\u65e0\u6cd5\u7f16\u7801\u65f6\u66ff\u6362\u4e3a\u7f3a\u7701\u66ff\u6362\u5b57\u7b26\uff0c\u4e00\u822c\u4e3a?</li> <li>backslashreplace:\u65e0\u6cd5\u7f16\u7801\u65f6\u66ff\u6362\u4e3a\u901a\u8fc7\\\u8fdb\u884c\u8f6c\u4e49\u7684\u8f6c\u4e49\u5e8f\u5217</li> <li>xmlcharrefreplace\uff1a\u65e0\u6cd5\u7f16\u7801\u65f6\u66ff\u6362\u4e3aXML\u8868\u793a\u65b9\u5f0f</li> <li>namereplace: \u66ff\u6362\u4e3a\u7528\u540d\u5b57\u63cf\u8ff0\u7684Unicode\u5b57\u7b26\u7279\u6027\\N{\u2026}</li> </ul> </li> <li><code>bytesobj.decode(encoding='utf-8', errors='strict)</code></li> <li><code>str(bytes_or_buffer[, encoding='utf-8' [, errors='strict']]) -&gt; str</code></li> </ul> </li> <li>\u7cfb\u7edf\u7f3a\u7701\u7684\u7f16\u7801\u65b9\u5f0f<ul> <li>\u6a21\u5757sys\u548clocale\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684\u65b9\u6cd5\u6765\u67e5\u770b\u4e0e\u5b57\u7b26\u4e32\u7f16\u7801\u76f8\u5173\u7684\u4fe1\u606f</li> <li>locale\u63cf\u8ff0\u4e86\u672c\u5730\u5316\u8bbe\u7f6e\uff0c\u8bed\u8a00_\u533a\u57df.\u5b57\u7b26\u96c6\uff0c\u8868\u793a\u5728\u6307\u5b9a\u533a\u57df\u8bf4\u67d0\u79cd\u8bed\u8a00\u7684\u4eba\u7684\u4e00\u4e9b\u57fa\u672c\u7684\u4e60\u60ef(\u65f6\u95f4\u3001\u6570\u5b57\u3001\u5b57\u7b26\u7c7b\u578b\u548c\u6392\u5e8f\u7b49) \uff0c\u6bd4\u5982zh_CN.UTF-8\uff0c en_US.UTF-8\u7b49</li> </ul> </li> </ul> <pre><code>import sys, locale\nsys.getdefaultencoding() # \u89e3\u91ca\u5668\u6240\u91c7\u7528\u7684\u7f3a\u7701\u5b57\u7b26\u4e32\u7f16\u7801\u65b9\u5f0f, python3\u4e00\u5b9a\u662f'u 'utf-8'\nsys.getfilesystemencoding() # \u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u540d\u4e0eunicode\u6587\u4ef6\u540d\u4e4b\u95f4\u8f6c\u6362\u91c7\u7528\u7684\u7f16\u7801\u65b9\u5f0f\nlocale.getdefaultlocale() # \u83b7\u5f97\u672c\u5730\u5316\u8bbe\u7f6e\uff0c(\u8bed\u8a00,\u7f16\u7801)\nlocale.getpreferredencoding() # \u83b7\u5f97\u7528\u6237\u6253\u5f00\u6587\u672c\u6587\u4ef6\u7f3a\u7701\u7684\u7f16\u7801\u65b9\u5f0f, cp936 = GBK\n</code></pre>"},{"location":"code/Python/Python-note/#_26","title":"\u6587\u4ef6\u64cd\u4f5c","text":"<ul> <li>\u6309\u7167\u6570\u636e\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u6587\u4ef6\u53ef\u5206\u4e3a\u6587\u672c\u6587\u4ef6\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6</li> <li>\u4e8c\u8fdb\u5236\u6587\u4ef6<ul> <li>\u5b58\u50a8\u7684\u662f\u4e00\u4e2a\u4e00\u4e2a\u7684\u5b57\u8282\uff0c\u65e0\u6cd5\u7528\u5e38\u89c4\u7684\u6587\u672c\u7f16\u8f91\u5668\u8bfb\u5199</li> <li>\u5305\u542b\uff1a\u6570\u636e\u5e93\u6587\u4ef6\u3001\u56fe\u50cf\u6587\u4ef6\u3001\u53ef\u6267\u884c\u6587\u4ef6\u3001\u97f3\u89c6\u9891\u6587\u4ef6\u3001Office\u6587\u6863\u7b49</li> </ul> </li> <li>\u6587\u672c\u6587\u4ef6<ul> <li>\u5b58\u50a8\u6587\u672c\u5b57\u7b26\u4e32\uff0c\u7531\u82e5\u5e72\u884c\u7ec4\u6210\uff0c\u884c\u4e4b\u95f4\u4ee5\u884c\u5206\u9694\u7b26(EOL, linebreak)\u9694\u5f00</li> <li>\u53ef\u901a\u8fc7\u6587\u672c\u7f16\u8f91\u5668\u6b63\u5e38\u663e\u793a\u3001\u7f16\u8f91\uff0c\u4eba\u7c7b\u80fd\u591f\u76f4\u63a5\u9605\u8bfb\u548c\u7406\u89e3</li> <li>\u6587\u672c\u6587\u4ef6\u91cc\u9762\u7684\u5b57\u7b26\u91c7\u7528\u67d0\u79cd\u7f16\u7801\u65b9\u5f0f\u7f16\u7801\u540e\u4fdd\u5b58\u5230\u5b58\u50a8\u8bbe\u5907\u4e0a</li> </ul> </li> <li>\u5c3d\u7ba1\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u7684\u884c\u5206\u9694\u7b26\u53ef\u80fd\u5404\u4e0d\u4e00\u6837\uff0c\u4f46\u662fpython\u89e3\u91ca\u5668\u5728\u8fdb\u884c\u6587\u672c\u6587\u4ef6\u7684\u8bfb\u5199\u65f6\u7edf\u4e00\u7528<code>\\n</code>(new line)\u4f5c\u4e3a\u884c\u5206\u9694\u7b26\uff0c\u4f1a\u81ea\u52a8\u8fdb\u884c\u76f8\u5e94\u7684\u8f6c\u6362<ul> <li>\u7cfb\u7edf\u7f3a\u7701\u884c\u5206\u9694\u7b26\uff1aWindows \u4e3a \u2018\\r\\n\u2019\uff0cLinux \u4e3a \u2018\\n\u2019\uff0cmacOS \u4e3a \u2018\\r\u2019</li> <li>\u53ef\u901a\u8fc7 <code>import os; os.linesep</code> \u67e5\u770b</li> </ul> </li> <li>\u4e3a\u4ec0\u4e48\u6709\u56de\u8f66\u6362\u884c\uff1f\u65e9\u671f\u82f1\u6587\u6253\u5b57\u673a\u4e0a\uff1a<ul> <li>\u56de\u8f66\u7b26(Carriage Return, \\r): \u56de\u5230carriage\u5f00\u59cb\u7684\u4f4d\u7f6e\uff08\u6700\u5de6\u8fb9)</li> <li>\u6362\u884c\u7b26(Line Feed, \\n): \u5f80\u4e0b\u79fb\u52a8\u4e00\u884c</li> </ul> </li> <li>\u6587\u4ef6\u548c\u76ee\u5f55<ul> <li>\u6bcf\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u53ef\u4ee5\u901a\u8fc7\u76ee\u5f55\u6811\u4e2d\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u6309\u7167\u6811\u7684\u7ed3\u6784\u627e\u5230\u5176\u5b50\u8282\u70b9\uff0c\u5982\u6b64\u7ee7\u7eed \u76f4\u5230\u5230\u8fbe\u6307\u5b9a\u7684\u4f4d\u7f6e<ul> <li>\u5728Linux\u548cMacOS\u7cfb\u7edf\u4e2d\u53ea\u6709\u4e00\u68f5\u76ee\u5f55\u6811\uff0c\u800c\u5fae\u8f6f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u5bf9\u4e8e\u6bcf\u4e2a\u9a71\u52a8\u5668\u7ef4\u62a4\u4e00\u68f5 \u76ee\u5f55\u6811(C:; D:\u2026)</li> <li>\u8def\u5f84\u540d(pathname): \u4ece\u8d77\u70b9\u5f00\u59cb\u76f4\u5230\u7ed3\u675f\u4f4d\u7f6e\u9014\u4e2d\u7ecf\u8fc7\u7684\u8282\u70b9\u540d\u5b57\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u4e4b\u95f4\u901a\u8fc7\u8def\u5f84\u5206\u9694\u7b26\u9694\u5f00<ul> <li>Linux\u548cMacOS\u7cfb\u7edf\u4e2d\u4e3a\u2019/\u2019\uff0c\u800c\u5fae\u8f6f\u7cfb\u7edf\u4e2d\u4e3a\u2019\\\u2018</li> <li>\u5728\u5b9e\u8df5\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528/\u5206\u5272\u8def\u5f84\u540d\uff0cpython\u4f1a\u8f6c\u6362\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u6240\u91c7\u7528\u7684\u8def\u5f84\u5206\u9694\u7b26</li> <li>\u53ef\u901a\u8fc7 <code>os.sep</code> \u67e5\u770b</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u6253\u5f00\u6587\u4ef6</p> <ul> <li><code>open(file, mode='r', encoding=None, errors=None)</code></li> <li>\u4ee5\u6307\u5b9a\u6a21\u5f0f\u6253\u5f00\u76f8\u5e94\u7684\u6587\u4ef6\uff0c\u8fd4\u56de\u67d0\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u5bf9\u8c61</li> <li>\u6587\u4ef6\u540dfile: \u53ef\u5305\u62ec\u8def\u5f84\u90e8\u5206\uff0c\u5982\u679c\u8def\u5f84\u5206\u9694\u7b26\u4e3a\\\uff0c\u5219\u9700\u8981\u8f6c\u4e49\uff0c \u6216\u8005\u91c7\u7528\u539f\u59cb\u5b57\u7b26\u4e32\u5b9a\u4e49\u3002\u6216\u8005/\u4f5c\u4e3a\u8def\u5f84\u5206\u9694\u7b26</li> <li> <p>\u8bbf\u95ee\u6a21\u5f0f(mode)\uff1a\u7b2c2\u4e2a\u53c2\u6570\uff0c\u6253\u5f00\u6587\u4ef6\u540e\u7684\u5904\u7406\u65b9\u5f0f</p> <ul> <li><code>rwxa</code> \u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\uff0c\u4e14\u53ea\u80fd\u6307\u5b9a\u4e00\u4e2a</li> <li><code>tb+</code> (\u7ea2\u8272\u6807\u8bb0\u503c) \u53ef\u9009\uff0c\u7f3a\u7701\u4e3at\uff0c\u5373\u6587\u672c\u65b9\u5f0f\u6253\u5f00</li> <li>\u5982\u679c\u4e0d\u6307\u5b9amode\uff0c\u9ed8\u8ba4\u4e3a\u2018r\u2019\uff0c\u5373\u6253\u5f00\u6587\u672c\u6587\u4ef6\u8bfb </li> </ul> </li> <li> <p>\u7f16\u7801\u65b9\u5f0f(encoding)\uff1a\u4ee5\u6587\u672c\u65b9\u5f0f\u6253\u5f00\u65f6\u6240\u91c7\u7528\u7684\u7f16\u7801\u65b9\u5f0f</p> <ul> <li>\u7f3a\u7701\u4e3a<code>locale. getpreferredencoding()</code> \u8fd4\u56de\u7684\u7f16\u7801\u65b9\u5f0f</li> <li>\u5982\u679c\u4e3a\u2019cp936\u2019\uff0c\u8868\u793aGBK</li> </ul> </li> <li>errors: \u6587\u672c\u6587\u4ef6\u8bfb\u5199\u65f6\u7f16\u7801\u6216\u89e3\u7801\u51fa\u73b0\u9519\u8bef\u65f6\u600e\u6837\u5904\u7406</li> <li>\u6587\u4ef6\u5bf9\u8c61\u7684\u5c5e\u6027</li> <li>name \u6587\u4ef6\u540d</li> <li>mod_e \u6253\u5f00\u6a21\u5f0f</li> <li>encoding \u7f16\u7801\u65b9\u5f0f\uff0c\u4ec5\u5bf9\u6587\u672c\u65b9\u5f0f\u6709\u6548</li> <li>errors \u7f16\u89e3\u7801\u51fa\u9519\u65f6\u7684\u5904\u7406\u65b9\u5f0f</li> <li>closed \u662f\u5426_\u5df2\u7ecf\u5173\u95ed</li> <li>\u6587\u4ef6\u5bf9\u8c61\u7684\u64cd\u4f5c </li> <li>\u6587\u672c\u6587\u4ef6\u8bfb\uff1a read</li> <li>\u6253\u5f00\u6587\u672c\u6587\u4ef6\u8bfb\uff0c\u6a21\u5f0f\u4e3a\u2019rt\u2019\u6216\u8005\u5176\u4ed6\u8bfb\u5199\u6a21\u5f0f\uff08\u5982\u2019w+\u2019)\uff0c\u6587\u672c\u6a21\u5f0f(t)\u53ef\u7701\u7565\uff1b\u5982\u679c\u4e0d\u6307\u5b9a\u7f16\u7801(encoding)\uff0c\u7f3a\u7701\u4e3alocale.getpreferredecoding()</li> <li>read(size=-1)\uff1a\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6size\u4e2a\u5b57\u7b26\uff08\u6ce8\u610f\u4e0d\u662f\u5b57\u8282\uff0c\u800c\u662funicode\u5b57\u7b26)\uff0c\u6216\u8005\u5230\u6587\u4ef6 \u7ed3\u5c3e\u4e3a\u6b62\uff0c\u5982\u679csize\u5c0f\u4e8e0\u5219\u8868\u793a\u8bfb\u53d6\u4e4b\u540e\u7684\u6240\u6709\u5185\u5bb9</li> <li>seek(offset, whence=0)<ul> <li>\u53ef\u4ee5\u5c06\u6587\u4ef6\u6307\u9488\u79fb\u52a8\u5230\u6587\u4ef6\u7684\u67d0\u4e2a\u4f4d\u7f6e \uff08\u504f\u79fb\u91cf\uff09</li> <li>\u7f3a\u7701\u4e3a\u4ece\u6587\u4ef6\u5f00\u59cb\u5904\u7b97\u8d77\u7684\u7b2c\u51e0\u4e2a\u5b57\u8282\uff1bwhence=0\u8868\u793a\u4ece\u6587\u4ef6\u5f00\u59cb\uff1bwhence=1\u8868\u793a\u5f53\u524d\u4f4d\u7f6e,whence=2\u8868\u793a\u6587\u4ef6\u7ed3\u5c3e</li> <li>\u5bf9\u4e8e\u6587\u672c\u6587\u4ef6\u800c\u8a00\uff0cwhence\u5fc5\u987b\u4e3a0\uff0c\u4e0d\u652f\u6301\u975e0\u7684\u504f\u79fb</li> </ul> </li> <li>tell(): \u8fd4\u56de\u5f53\u524d\u6587\u4ef6\u7684\u6307\u9488\u6240\u5728\u4f4d\u7f6e(\u8ddd\u79bb\u6587\u4ef6 \u5f00\u59cb\u591a\u5c11\u4e2a\u5b57\u8282\uff09</li> <li>file\u652f\u6301iterator\u534f\u8bae\uff0c\u610f\u5473\u7740\u8c03\u7528next(file)\u83b7\u5f97\u4e0b\u4e00\u884c\uff0c\u5373\u76f8\u5f53\u4e8efile.readline()</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_27","title":"\u5e8f\u5217\u5316","text":"<ul> <li>pickle\u6a21\u5757\u63d0\u4f9b\u4e86\u5c06python\u5bf9\u8c61\u5e8f\u5217\u5316\u6210\u5b57\u8282\u6d41\u4ee5\u53ca\u4ece\u5b57\u8282\u6d41\u4e2d\u53cd\u5e8f\u5217\u5316\u7684\u529f\u80fd</li> <li>marshal\u6a21\u5757\u63d0\u4f9b\u4e0epickle\u6a21\u5757\u7c7b\u4f3c\u7684\u529f\u80fd\uff0c\u4e3b\u8981\u7528\u4e8e\u8bfb\u5199.pyc\u6587\u4ef6\uff0c\u5176\u4e3b\u8981\u95ee\u9898\u662f\u4e0d\u80fd\u5e8f\u5217\u5316 \u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5bf9\u8c61\uff0c\u4e14\u4e0d\u540c\u7248\u672c\u7684python\u89e3\u91ca\u5668\u5e8f\u5217\u5316\u540e\u7684\u7ed3\u679c\u4e0d\u517c\u5bb9</li> <li>json\u6a21\u5757\u63d0\u4f9b\u7c7b\u4f3c\u4e8epickle\u6a21\u5757\u7684\u63a5\u53e3\uff0c\u53ea\u662f\u5728python\u5bf9\u8c61\u4e0ejson\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362</li> <li>shelve\u6a21\u5757\u5728pickle\u6a21\u5757\u7684\u57fa\u7840\u4e0a\u91c7\u7528\u7c7b\u4f3c\u4e8e\u5b57\u5178\u65b9\u5f0f\u6765\u5e8f\u5217\u5316\u5bf9\u8c61</li> <li>\u53ef\u4ee5\u5e8f\u5217\u5316\u7684\u5bf9\u8c61\u5305\u62ec<ul> <li>None\uff0c\u5e03\u5c14\u3001\u6574\u6570\u3001\u6d6e\u70b9\u6570\u548c\u590d\u6570</li> <li>\u5b57\u7b26\u4e32\uff0cbytes\u548cbytearray</li> <li>tuple/list/set/dictionary\uff0c\u4f46\u8981\u6c42\u5176\u5143\u7d20\u4e5f\u662f\u53ef \u4ee5\u5e8f\u5217\u5316\u7684\u5bf9\u8c61</li> <li>\u6a21\u5757\u9876\u5c42\u901a\u8fc7def\u5b9a\u4e49\u7684\u51fd\u6570\u548c\u7c7b</li> <li>\u81ea\u5b9a\u4e49\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4f46\u6709\u4e00\u4e9b\u8981\u6c42\uff08\u7565\u8fc7\uff09</li> <li>\u6ce8\u610f\u51fd\u6570\u548c\u7c7b\u5e8f\u5217\u5316\u65f6\u4ec5\u4fdd\u5b58\u6a21\u5757\u540d+\u51fd\u6570\u540d\u6216\u7c7b\u540d\uff0c\u5176\u4ee3\u7801\u548c\u5c5e\u6027\u7b49\u5e76\u6ca1\u6709\u5e8f\u5217\u5316</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#pickle","title":"pickle","text":"<ul> <li>dumps(obj) \u5c06\u5bf9\u8c61obj\u5e8f\u5217\u5316\u4e3a\u4e00\u4e2abytes\u5bf9\u8c61\u5e76\u8fd4\u56de</li> <li>dump(obj, file) \u5c06\u5bf9\u8c61obj\u5e8f\u5217\u5316\u540e\u5199\u5165\u5230\u6587\u4ef6\u5bf9\u8c61file\u4e2d</li> <li>loads(bytes_obj\uff09 \u4ecebytes_obj\u4e2d\u53cd\u5e8f\u5217\u5316\u540e\u8fd4\u56de\u4e00\u4e2apython \u5bf9\u8c61</li> <li>load(file) \u4ecefile\u4e2d\u53cd\u5e8f\u5217\u5316\u4e00\u4e2apython\u5bf9\u8c61\u540e\u8fd4\u56de, \u5982\u679c\u6587\u4ef6\u7ed3\u5c3e\uff0c\u629b\u51fa\u5f02\u5e38EOFError</li> </ul>"},{"location":"code/Python/Python-note/#json","title":"JSON","text":"<ul> <li>JSON(JavaScript Object Notation) \u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u6570\u636e\u4ea4\u6362\u683c\u5f0f\u3002\u65b9\u4fbf\u9605\u8bfb\u548c\u7f16\u5199\uff0c\u4e5f\u65b9\u4fbf\u673a\u5668\u89e3\u6790\u548c\u751f\u6210\u3002\u5b83\u57fa\u4e8eJavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c \u91c7\u7528\u5b8c\u5168\u72ec\u7acb\u4e8e\u8bed\u8a00\u7684\u6587\u672c\u683c\u5f0f\uff0c\u8981\u6c42\u91c7\u7528UTF\u7f16\u7801\u65b9\u5f0f\uff0c\u5efa\u8baeUTF-8<ul> <li>\u5b57\u7b26\u4e32\u91c7\u7528\u53cc\u5f15\u53f7\u5b9a\u4e49\uff0c\u652f\u6301\u8f6c\u4e49</li> <li>\u6574\u6570\u548c\u6d6e\u70b9\u6570</li> <li>true/false/null</li> <li>array:\u76f8\u5f53\u4e8epython\u4e2d\u7684\u5217\u8868</li> <li>object(\u5bf9\u8c61)\u76f8\u5f53\u4e8epython\u4e2d\u7684\u5b57\u5178\uff0c\u4f46\u662f\u5176 key \u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32</li> </ul> </li> <li>json.load(fp) / json.loads(s) \u4ece\u6587\u4ef6\u5bf9\u8c61fp(\u53ea\u8981\u652f\u6301read\u5373\u53ef)/ \u4ece\u5b57\u7b26\u4e32\u6216bytes\u5bf9\u8c61\u4e2d \u53cd\u5e8f\u5217\u5316json\u5bf9\u8c61\uff0c\u8fd4\u56de\u76f8\u5e94\u7684python\u5bf9\u8c61</li> <li>json.dumps(obj,....) \u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\uff0c\u8fd4\u56de\u5e8f\u5217\u5316\u540e\u7684\u5b57\u7b26\u4e32</li> <li><code>json.dump(obj, fp, *, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent= None, separators=None, default=None, sort_keys=False, **kw)</code> \u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u6210\u5b57\u7b26\u4e32\u5e76\u5199\u5230\u6587\u4ef6\u5bf9\u8c61fp\uff0c\u8981\u6c42fp \u652f\u6301write\u65b9\u6cd5\u5373\u53ef</li> </ul>"},{"location":"code/Python/Python-note/#csv","title":"csv","text":"<ul> <li>CSV(Comma-Separated Values \uff09</li> <li>excel(\u4e00\u822c\u4e3axlsx\u6216xls\u683c\u5f0f)\u53ef\u4ee5\u5c06\u7535\u5b50\u8868\u683c(spreadsheet)\u4ee5csv\u683c\u5f0f\u4fdd\u5b58\u3002 RFC 4180 \u5b9a\u4e49\u4e86CSV\u7684\u6807\u51c6\u683c\u5f0f</li> <li>\u4e00\u4e2a\u7535\u5b50\u8868\u683c\u5305\u62ec\u591a\u4e2a\u8bb0\u5f55(\u884c)\uff0c\u6bcf\u4e2a\u8bb0\u5f55\u5305\u62ec\u4e86\u591a\u4e2a\u5b57\u6bb5\u3002\u4e00\u822c\u7b2c\u4e00\u6761\u8bb0\u5f55\u7ed9\u51fa\u4e86\u5404\u4e2a\u5b57\u6bb5\u7684\u540d\u5b57</li> <li>\u8bb0\u5f55\u4e4b\u95f4\u901a\u8fc7\\r\\n\u5206\u5272\uff1b\u5b57\u6bb5\u4e4b\u95f4\u901a\u8fc7\u9017\u53f7\u5206\u5272</li> <li>\u5b57\u6bb5\u4e2d\u5982\u679c\u5305\u542b\u4e86\u8bb0\u5f55\u5206\u9694\u7b26\u6216\u5b57\u6bb5\u5206\u9694\u7b26\u65f6\uff0c\u9700\u8981\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u5982\u679c\u53cc\u5f15\u53f7\u51fa\u73b0\u5728\u5b57\u6bb5\u4e2d\uff0c\u5219\u7528 \u4e24\u4e2a\u8fde\u7eed\u7684\u53cc\u5f15\u53f7\u4ee3\u66ff</li> <li>\u5185\u7f6e\u6a21\u5757csv\u63d0\u4f9b\u4e86\u5bf9\u4e8ecsv\u683c\u5f0f\u7684\u6587\u6863\u7684\u8bfb\u5199\u652f\u6301</li> <li><code>csv.reader(csvfile, dialect='excel', **fmtparams)</code><ul> <li>csvfile\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61, \u5176\u6bcf\u4e2a\u5143\u7d20\u4e3a\u5b57\u7b26\u4e32\u3002\u5982\u679ccsvfile\u4e3a\u6587\u4ef6\u5bf9\u8c61\uff0c\u5efa\u8bae <code>newline=''</code>\u3010\u4f8b\u5982\uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u7684\u5e8f\u5217\u3002\u6ce8\u610f\uff0copen \u6253\u5f00\u7684\u6587\u4ef6\u4e5f\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5373 open(file, newline=\u2019\u2018)\u3011\u3010\u8fd9\u91cc\u8bbe\u7f6e newline=\u2019\u2019 \u5e94\u8be5\u8bbe\u4e3a\u4e86\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u9ed8\u8ba4\u5206\u9694\u7b26\u7684\u4e0d\u540c\u5e26\u6765\u7684\u95ee\u9898\u3011<ul> <li>On input, if\u00a0newline\u00a0is None, universal newlines mode is enabled. Lines in the input can end in \u2018\\n\u2019, \u2018\\r\u2019, or \u2018\\r\\n\u2019, and these are translated into \u2018\\n\u2019 before being returned to the caller. If it is \u2018\u2019, universal newline mode is enabled, but line endings are returned to the caller untranslated. If it has any of the other legal values, input lines are only terminated by the given string, and the line ending is returned to the caller untranslated.</li> <li>On output, if\u00a0newline\u00a0is None, any \u2018\\n\u2019 characters written are translated to the system default line separator,os.linesep. If\u00a0newline\u00a0is \u2018\u2019, no translation takes place. If\u00a0new line\u00a0is any of the other legal values, any \u2018\\n\u2019 characters written are translated to the given string.</li> </ul> </li> <li>dialect\u7ed9\u51fa\u4e86csv\u6587\u4ef6\u7684\u82e5\u5e72\u914d\u7f6e\u53c2\u6570\u7684\u7f3a\u7701\u503c\uff0c\u5bf9\u4e8e excel\u800c\u8a00\uff0cdelimiter=\u2019,\u2019, lineterminator=\u2019\\r\\n\u2019, quotechar=\u2019\u201c\u2019, doublequote=True, quoting=QUOTE_MINIMAL, skipinitialspace=False (\u662f\u5426\u5ffd\u7565\u5b57\u6bb5\u524d\u9762\u7684\u7a7a\u683c\uff09</li> <li>\u8fd4\u56dereader\u5bf9\u8c61\uff0c\u5176\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u4e00\u6761\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u8bb0\u5f55\u4ee5\u5b57\u7b26\u4e32\u5217\u8868\u65b9\u5f0f\u5448\u73b0</li> </ul> </li> <li><code>csv.writer(csvfile, dialect='excel', **fmtparams)</code><ul> <li>csvfile\u4e3a\u652f\u6301write\u7684\u5bf9\u8c61\uff0c\u5efa\u8baenewline=\u2019\u2018</li> <li>\u8fd4\u56dewriter\u5bf9\u8c61\uff0c\u53ef\u901a\u8fc7writerow\u65b9\u6cd5\u5199\u5165\u4e00\u6761\u8bb0\u5f55\uff0c\u5176\u53c2\u6570\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20 \u5bf9\u5e94\u8bb0\u5f55\u7684\u5b57\u6bb5\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u540e\u5199\u5165\u5230csv\u6587\u4ef6</li> </ul> </li> <li>csv.DictReader(csvfile,\u2026)</li> <li>csv.DictWriter(csvfile, fieldnames=\u2026,)<ul> <li>\u6bcf\u4e00\u5217\u901a\u8fc7\u5b57\u6bb5\u540d\u63cf\u8ff0\uff0c\u4f20\u9012\u7684\u8bb0\u5f55\u4e0d \u662f\u4ee5\u5217\u8868\u7b49</li> </ul> </li> </ul> <pre><code>import csv\ndef csv_writer(file='eggs.csv'):\n    with open(file, 'w', newline='') as csvfile:\n        writer = csv.writer(csvfile)\n        writer.writerow(['Spam'] * 5 + ['Baked Beans'])\n        writer.writerow(['Spam','Lovely Spam','Wonderful Spam'])\ndef csv_reader(file='eggs.csv'):\n    with open(file, newline='') as csvfile:\n        reader = csv.reader(csvfile)\n        for row in reader:\n            print(', '.join(row))\n</code></pre>"},{"location":"code/Python/Python-note/#shelve","title":"shelve","text":"<ul> <li>\u5728pickle\u6a21\u5757\u7684\u57fa\u7840\u4e0a\u63d0\u4f9b\u7c7b\u4f3c\u4e8e\u5b57\u5178\u7684\u63a5\u53e3<ul> <li>\u5b57\u5178\u7684key\u4e3a\u5b57\u7b26\u4e32\uff0c\u800c\u503c\u4e3a\u8981\u5e8f\u5217\u5316\u7684python\u5bf9\u8c61</li> <li>\u5e95\u5c42\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u4e00\u4e2a\u6570\u636e\u5e93\u6765\u4fdd\u5b58\u5e8f\u5217\u5316\u7684\u5bf9\u8c61</li> <li>\u901a\u8fc7\u8d4b\u503c\u8bed\u53e5\u6765\u66f4\u65b0key:value\u65f6\u8868\u793a\u5e8f\u5217\u5316\u5bf9\u5e94\u7684python\u5bf9\u8c61</li> <li>\u901a\u8fc7key\u6765\u8bbf\u95ee\u5bf9\u5e94\u7684value\u65f6\u8868\u793a\u53cd\u5e8f\u5217\u5316</li> </ul> </li> <li><code>open(filename, flag='c', writeback=False)</code></li> <li>\u8868\u793a\u4ee5\u8bfb\u5199\u65b9\u5f0f\u6253\u5f00\u4e00\u4e2a\u540d\u4e3afilename\u7684\u6570\u636e\u5e93\uff0c\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u5b57\u5178\u7684shelve\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528dict\u652f \u6301\u7684\u6240\u6709\u65b9\u6cd5\u3002\u6253\u5f00\u7684\u6570\u636e\u5e93\u5b9e\u9645\u5bf9\u5e94\u7684\u53ef\u80fd\u662f\u591a\u4e2a\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u524d\u7f00\u4e00\u81f4\uff0c\u800c\u540e\u7f00\u4e0d\u4e00\u6837\u3010\u5185\u90e8\u4f7f\u7528 pickle\u5e8f\u5217\u5316\u3011</li> <li>\u53c2\u6570flag\u8868\u793a\u5982\u4f55\u6253\u5f00\u6570\u636e\u5e93\uff0c\u7f3a\u7701c\u8868\u793a\u4e3a\u4ee5\u8bfb\u5199\u65b9\u5f0f\u6253\u5f00\uff0c\u4e0d\u5b58\u5728\u65f6\u9996\u5148\u521b\u5efa\u518d\u6253\u5f00\u3002\u5176\u4ed6\u53d6\u503c\u53ef \u4e3a\u2019r\u2019 \u2018w\u2019\u7b49\uff0c\u8868\u793a\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u3001\u8bfb\u5199\u65b9\u5f0f\u6253\u5f00</li> <li>\u7f3a\u7701writeback\u4e3aFalse\uff0c\u8868\u793a\u53ea\u6709\u5728\u8d4b\u503c\u66f4\u65b0key:value\u65f6\u624d\u4f1a\u5e8f\u5217\u5316\u5230\u6570\u636e\u5e93\u4e2d</li> <li> <p>\u5982\u679cwriteback=True\uff0c\u8868\u793a\u901a\u8fc7\u5b57\u5178\u8bbf\u95ee\u7684\u5bf9\u8c61\u4fdd\u5b58\u5728cache\u4e2d\uff0c\u5728sync\u548cclose\u65f6\u81ea\u52a8\u5c06cache\u4e2d\u7684 python\u5bf9\u8c61\u5e8f\u5217\u5316\u5230\u6570\u636e\u5e93\u4e2d\u3002\u5176\u7f3a\u70b9\u662f\u7f13\u5b58\u5bf9\u8c61\u9700\u8981\u66f4\u591a\u7684\u5185\u5b58\uff0c\u5e26\u6765\u6027\u80fd\u7684\u4e0b\u964d </p> </li> <li> <p>\u6253\u5f00shelve\u5bf9\u8c61\u4f20\u9012\u53c2\u6570writeback=False\u65f6</p> <ul> <li>del d[\u2018key\u2019] \u5220\u9664\u2019key\u2019\u5bf9\u5e94\u7684\u5e8f\u5217\u5316\u540e\u7684\u5bf9\u8c61</li> <li><code>d['0001']=person</code>: \u5e8f\u5217\u5316\u5bf9\u8c61\u3010\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u82e5\u9700\u8981\u4fee\u6539\u6570\u636e\u5e93\u4e2d\u7684\u8bb0\u5f55\u53ea\u80fd\u91c7\u53d6\u8fd9\u79cd\u65b9\u5f0f\u800c\u4e0d\u80fd\u50cf\u4e0b\u9762\u8fd9\u6837\u3011</li> <li>d[\u20180001\u2019] \u5728\u8868\u8fbe\u5f0f\u4e2d\u8868\u793a\u4ece\u6570\u636e\u5e93\u4e2d\u53cd\u5e8f\u5217\u5316\u5bf9\u8c61\u3010\u56e0\u6b64\u7528 append \u7b49\u64cd\u4f5c\u65e0\u6cd5\u8fdb\u884c\u4fee\u6539\uff01\uff01\u3011</li> <li>d[\u20180002\u2019][\u2018phones\u2019].append(\u2018137xxxx\u2019) \u4e0d\u4f1a\u66f4\u6539d[\u20180002\u2019]\u7684\u503c</li> </ul> </li> <li>\u6253\u5f00shelve\u5bf9\u8c61\u4f20\u9012\u53c2\u6570writeback=True\u65f6<ul> <li>\u5185\u5b58\u4e2d\u901a\u8fc7cache\u6765\u7f13\u5b58\u6570\u636e\u5e93\u7684\u5bf9\u8c61</li> <li>\u901a\u8fc7sync()\u6216close()\u540c\u6b65cache\u5230\u6570\u636e\u5e93\u4e2d\u3010\u4f46\u662f d[\u20180002\u2019][\u2018phones\u2019].append(\u2018137xxxx\u2019) \u540c\u6837\u4e0d\u4f1a\u66f4\u6539d[\u20180002\u2019]\u7684\u503c\u3011 </li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_28","title":"\u5f02\u5e38","text":"<ul> <li>\u5728\u5176\u4ed6\uff08\u7f16\u8bd1\u578b\uff0c\u6bd4\u5982C\uff09\u7f16\u7a0b\u8bed\u8a00\u4e2d\u8bed\u6cd5\u9519\u8bef\u4e0d\u5c5e\u4e8e\u5f02\u5e38</li> <li>Python\u4e3a\u89e3\u91ca\u578b\u8bed\u8a00\uff0c\u4f46\u662f\u5728\u8fd0\u884c\u65f6\u89e3\u91ca\u5668\u4e5f\u4f1a\u9996\u5148\u5c06\u4ee3\u7801\u8f6c\u6362\u4e3a\u4e2d\u95f4\u4ee3\u7801\uff0c\u5982\u679c\u53d1\u73b0\u8bed\u6cd5\u6709\u9519\u8bef\uff0c\u5c31\u4f1a\u62a5\u8bed\u6cd5\u9519 SyntaxError</li> <li>\u6267\u884c\u8fc7\u7a0b\u4e2d\u68c0\u6d4b\u5230\u4e00\u4e2a\u5f02\u5e38\u65f6\uff0c\u5982\u679c\u4e0d\u6355\u83b7\u5f02\u5e38\uff0c\u89e3\u91ca\u5668\u5c31\u4f1a\u6307\u51fa\u5f53\u524d\u4ee3\u7801\u5df2\u65e0\u6cd5\u7ee7\u7eed\u6267 \u884c\u4e0b\u53bb\u800c\u9000\u51fa\u3002\u4f46\u8981\u6ce8\u610f\u5bfc\u81f4\u5f02\u5e38\u51fa\u73b0\u7684\u771f\u6b63\u539f\u56e0\u53ef\u80fd\u5728\u4e4b\u524d</li> <li>\u903b\u8f91\u9519\u8bef\u4e0d\u5c5e\u4e8e\u5f02\u5e38\uff1a\u903b\u8f91\u9519\u8bef\u4e5f\u662f\u6700\u96be\u53d1\u73b0\u7684bug\u4e4b\u4e00</li> <li>\u53ef\u4ee5\u9996\u5148\u901a\u8fc7\u5e38\u89c4\u7684\u68c0\u67e5\uff0c\u5982if\u2026else\u5224\u65ad\uff0c\u907f\u514d\u4ee3\u7801\u51fa\u73b0\u5f02\u5e38\u3002\u5728\u5e38\u89c4\u68c0\u67e5\u548c\u76f4\u63a5\u4f9d\u8d56\u5f02 \u5e38\u5904\u7406\u4e24\u8005\u4e4b\u95f4\u8fdb\u884c\u6743\u8861</li> <li>\u5f53\u7a0b\u5e8f\u51fa\u73b0\u9519\u8bef\uff0cpython\u4f1a\u81ea\u52a8\u5f15\u53d1\u5f02\u5e38\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7raise\u663e\u5f0f\u5730\u5f15\u53d1\u5f02\u5e38</li> <li><code>dir(__builtins__)</code> \u67e5\u770b\u5185\u7f6e\u51fd\u6570\u4ee5\u53ca\u5185\u7f6e\u7684\u5f02\u5e38\u7c7b\u578b </li> <li>\u5e38\u7528\u5f02\u5e38\u7c7b<ul> <li>Exception \u51e0\u4e4e\u6240\u6709\u5f02\u5e38\u7684\u57fa\u7c7b(base class)</li> <li>SyntaxError \u8bed\u6cd5\u9519\u8bef</li> <li>NameError \u8bbf\u95ee\u4e00\u4e2a\u6ca1\u6709\u5b9a\u4e49\u7684\u53d8\u91cf</li> <li>AttributeError \u8bbf\u95ee\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\u51fa\u9519</li> <li>IndexError \u4e0b\u6807\u4e0d\u5b58\u5728</li> <li>KeyError \u5b57\u5178\u7684key\u4e0d\u5b58\u5728</li> <li>TypeError \u5185\u7f6e\u7684\u8fd0\u7b97\u7b26\u6216\u8005\u67d0\u4e2a\u51fd\u6570\u4f5c\u7528\u7684\u5bf9\u8c61\u7684\u7c7b\u578b\u4e0d\u7b26</li> <li>ValueError \u5185\u7f6e\u7684\u8fd0\u7b97\u7b26\u6216\u67d0\u4e2a\u51fd\u6570\u4f5c\u7528\u7684\u5bf9\u8c61\u7c7b\u578b\u76f8\u7b26\uff0c\u4f46\u662f\u503c\u4e0d\u5408\u9002</li> <li>ZeroDivisionError \u9664\u6cd5\u7c7b\u8fd0\u7b97\u4e2d\u9664\u6570\u4e3a0</li> <li>OSError \u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u64cd\u4f5c\u65f6\u51fa\u73b0\u9519\u8bef\uff0c\u6bd4\u5982\u6587\u4ef6\u4e0d\u5b58\u5728\u7b49</li> <li>AssertionError \u65ad\u8a00\u5f02\u5e38</li> </ul> </li> </ul> <pre><code>try:\n &lt;body&gt; # \u6267\u884c&lt;body&gt;\u4e2d\u7684\u4ee3\u7801\nexcept [expression [as identifier]]:\n &lt;exceptionBody&gt;\n# \u53ef\u4ee5\u6709\u591a\u4e2aexcept\u5b50\u53e5\uff0c\u51fa\u73b0\u5f02\u5e38\u65f6\u6309\u5e8f\u5339\u914d\u627e\u5230\u5bf9\u5e94\u7684exception\u4e3a\u6b62\u3002\u4e0d\u5e26\u8868\u8fbe\u5f0f\u7684except\u7b49\u4ef7\u4e8e except Exception\uff0c\u5e94\u8be5\u662f\u6700\u540e\u4e00\u4e2a\nexcept [expression [as identifier]]:\n &lt;exceptionBody&gt;\nelse: # \u53ef\u9009\u7684\uff0c&lt;body&gt;\u987a\u5e8f\u6267\u884c\u5b8c\u4e14\u6ca1\u6709\u5f02\u5e38\u51fa\u73b0\u65f6\u4f1a\u6267\u884c\u8be5\u5757\u7684\u4ee3\u7801\n &lt;elseBody&gt; \nfinally: # \u53ef\u9009\u7684\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u5f02\u5e38(\u751a\u81f3\u662f\u4ecebody \u4e2dbreak/continue/return)\uff0c\u5f02\u5e38\u662f\u5426\u6355\u83b7\u90fd\u8981\u6267\u884c\n &lt;finallyBody&gt;\n</code></pre> <ul> <li>except\u5173\u952e\u5b57\u540e\u9762\u7684expression\u5e94\u8be5\u4e3a\uff1a<ul> <li>\u5f02\u5e38\u7c7b,\u6bd4\u5982ValueError, KeyError\u7b49</li> <li>\u5f02\u5e38\u7c7b\u7684\u5143\u7ec4\uff0c\u8868\u793a\u5176\u4e2d\u4efb\u4e00\u5f02\u5e38\u51fa\u73b0\uff0c\u5982 (ValueError, TypeError)</li> </ul> </li> <li>raise\u8bed\u53e5: \u4e3b\u52a8\u629b\u51fa\u5f02\u5e38<ul> <li><code>raise [expression [from orig_exception]]</code></li> <li>expression\u5fc5\u987b\u662f\uff1a<ul> <li>\u4e00\u4e2a\u5f02\u5e38\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61</li> <li>\u4e00\u4e2a\u5f02\u5e38\u7c7b\uff0c\u6b64\u65f6\u7cfb\u7edf\u4f1a\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u8be5\u7c7b\u7684\u5b9e\u4f8b(\u53c2\u6570\u4e3a\u7a7a)\uff0c\u7136\u540e\u629b\u51fa\u8be5\u5f02\u5e38\u5bf9\u8c61</li> </ul> </li> <li>from orig_exception: \u7ed9\u51fa\u4e86\u5c06\u4e24\u4e2a\u5f02\u5e38\u8fde\u63a5\u8d77\u6765\u7684\u65b9\u6cd5\uff0c\u8868\u793a\u5f02\u5e38\u662f\u7531\u4e8e\u53e6\u4e00\u4e2a\u5f02\u5e38(orig_exception)\u5f15\u8d77\u7684</li> <li>\u5355\u72ec\u7684raise\u4e00\u822c\u51fa\u73b0\u5728except\u5757\u4e2d\uff0c\u8868\u793a\u91cd\u65b0\u629b\u51fa\u6b63\u5728\u5339\u914d\u7684\u5f02\u5e38\uff0c\u5982\u679c\u5f53\u524d\u6ca1\u6709\uff0c\u5219\u629b\u51faRuntimeError\u5f02\u5e38 (No active exception to reraise)</li> </ul> </li> <li>\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b<ul> <li>\u5e94\u8be5\u7ee7\u627fException\u7c7b\u6216\u8005\u5176\u5b50\u7c7b\uff1aException\u4e3a\u6240\u6709\u53ef\u80fd\u9700\u8981\u6355\u83b7\u7684\u5f02\u5e38\u7c7b\u7684\u57fa\u7c7b<ul> <li>\u901a\u8fc7\u8c03\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5f02\u5e38\u5bf9\u8c61</li> <li>print(t)\u7b49\u4ef7\u4e8e\u8c03\u7528print(str(t))</li> <li>\u5f02\u5e38\u5bf9\u8c61\u7684args\u5c5e\u6027\u4e3a\u5143\u7ec4\uff0c\u7ed9\u51fa\u4e86\u6784\u9020\u5f02\u5e38\u5bf9\u8c61\u65f6\u4f20\u9012\u7684\u53c2\u6570</li> </ul> </li> </ul> </li> </ul> <pre><code>class MyError(Exception):\n    def __init__(self, value):\n        self.value = value\n    def __str__(self):\n        return repr(self.value)\n\ntry:\n    raise MyError(2*2)\nexcept MyError as e:\n    print('My exception occurred', e)\n    raise\n</code></pre> <ul> <li>finally<ul> <li>\u4e0d\u7ba1\u6709\u6ca1\u6709\u5f02\u5e38\u51fa\u73b0\uff0c\u6709\u6ca1\u6709\u6355\u83b7\uff0cfinally\u4ee3\u7801\u90fd\u4f1a\u6267\u884c</li> <li>\u5982\u679c\u5f02\u5e38\u6ca1\u6709\u88ab\u6355\u83b7\uff0cfinally\u4ee3\u7801\u6267\u884c\u5b8c\u540e\u91cd\u65b0\u629b\u51fa\u5f02\u5e38\uff0c\u4f46\u662f\uff1a<ul> <li>\u5982\u679cfinally\u4ee3\u7801\u4e2d\u51fa\u73b0return\u4ee5\u53cabreak\uff0c\u5219\u5f02\u5e38\u88ab\u53d6\u6d88\uff0c\u4e0d\u4f1a\u518d\u629b\u51fa</li> <li>python3.7\u4e4b\u524d\uff0cfinally\u4ee3\u7801\u4e2d\u4e0d\u80fd\u4f7f\u7528continue\u8bed\u53e5\uff0c python3.8\u53d6\u6d88\u4e86\u8fd9\u4e00\u9650\u5236\uff0c\u663e\u7136 finally\u90e8\u5206\u6709continue\u4e5f\u4f1a\u5bfc\u81f4\u5f02\u5e38\u88ab\u53d6\u6d88</li> <li>(try\u8bed\u53e5\u5728\u5faa\u73af\u4e2d\u624d\u53ef\u4f7f\u7528break\uff0c\u5728\u51fd\u6570\u4f53\u5185\u624d\u53ef\u4f7f\u7528return\uff09</li> </ul> </li> <li>\u4e00\u4e9b\u7279\u6b8a\u7684\u60c5\u5f62\u7684\u603b\u7ed3\uff1a<ul> <li>\u5982\u679c\u5728try body\u4e2d\u6267\u884c\u5230break/continue/return\u65f6\uff0c\u4e0d\u4f1a\u6267\u884celse block\u7684\u5185\u5bb9</li> <li>finally\u4e00\u5b9a\u4f1a\u6267\u884c\uff0c\u5982\u679c\u6267\u884c\u5230break/continue/return\u65f6\uff0c\u8be5\u8bed\u53e5\u8d77\u4f5c\u7528\uff0c\u4e4b\u524d\u672c\u6765\u8981\u6267\u884c\u7684\u52a8\u4f5c\u4e0d\u518d\u6267\u884c\u3010\u4f8b\u5982\u672c\u6765\u51fd\u6570\u8fd0\u884c\u6b63\u786e return \u67d0\u4e2a\u503c\uff0c\u82e5\u5728 finally \u4e2d\u8fd8\u6709 return \u8bed\u53e5\u7684\u8bdd\u4f1a\u4f7f\u5f97 try \u4e2d\u7684 return \u5931\u6548\uff01\u3011</li> <li>\u53ea\u6709\u5728\u6ca1\u6709\u5f02\u5e38\uff0c\u6216\u6709\u5f02\u5e38\u4e14\u5df2\u6355\u83b7\uff0c\u4e14\u6ca1\u6709\u6267\u884c\u5230break/continue/return\u65f6\uff0c\u624d\u4f1a\u987a\u5e8f \u6267\u884ctry\u8bed\u53e5\u540e\u7684\u8bed\u53e5</li> </ul> </li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#traceback","title":"traceback","text":"<ul> <li>\u53d1\u751f\u5f02\u5e38\u65f6\uff0cPython\u53ef\u4ee5\u56de\u6eaf\u5f02\u5e38\uff0c\u7ed9\u51fa\u5927\u91cf\u7684\u63d0\u793a</li> <li>\u5728\u6709\u5f02\u5e38\u51fa\u73b0\u65f6\uff0c\u53ef\u901a\u8fc7sys\u6a21\u5757\u7684exc_info()\u83b7\u5f97\u6b63\u5728\u53d1\u751f\u7684\u5f02\u5e38\u7684\u4fe1\u606f\uff0c\u8fd4\u56de\u7684\u4e09\u5143\u7ec4\u5305\u542b\u5f02\u5e38\u7c7b\u578b\u3001 \u5f02\u5e38\u5bf9\u8c61\u4ee5\u53ca\u4e00\u4e2a\u5305\u542b\u8c03\u7528\u6808\u4fe1\u606f\u7684traceback\u5bf9\u8c61</li> <li>traceback\u6a21\u5757\u7684print_exc()\u4f1a\u6253\u5370\u6700\u8fd1\u5f02\u5e38\uff08\u5305\u62ec\u8c03\u7528\u6808\u5728\u5185\uff09\u4fe1\u606f\u3002 \u800cformat_exc()\u4e0eprint_exc()\u7c7b\u4f3c\uff0c \u53ea\u662f\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32 </li> </ul> <pre><code>import sys,traceback\ntry:\n    4 / 0\nexcept Exception as e:\n    ex_type, ex_info, ex_traceback = sys.exc_info()\n    print(ex_type, ex_info, ex_traceback)\n    traceback.print_tb(ex_traceback)    # \u6253\u5370\u8c03\u7528\u6808\u4fe1\u606f\n    # \u5c06\u5f02\u5e38\u7c7b\u578b\u3001\u5f02\u5e38\u5bf9\u8c61\u4ee5\u53catraceobj\u8f93\u51fa\u7684\u6587\u4ef6file\u4e2d\uff0c\u9ed8\u8ba4\u7684 file=None \u8868\u793a\u8f93\u51fa\u5230 stdout\n    traceback.print_exception(ex_type, ex_info, ex_traceback, file=None)\n    traceback.print_exc()   # \u548c\u4e0a\u9762\u7684 print_exception \u7ed3\u679c\u4e00\u6837\n\n    # \u4e0b\u9762\u662f\u6355\u83b7\u4e86\u9519\u8bef\uff0c\u4f46\u662f\u6355\u83b7\u4e4b\u540e\u65e0\u6cd5\u67e5\u770b\u8c03\u7528\u6808\u4e86\uff1f\n    print()\n    print(type(e), e)\n</code></pre>"},{"location":"code/Python/Python-note/#evalexec","title":"eval()\u548cexec()\u51fd\u6570","text":"<ul> <li><code>eval(source, globals=None, locals=None)</code><ul> <li>\u6267\u884csource\u4e2d\u7684\u4ee3\u7801\uff0csource\u4e00\u822c\u4e3a\u5b57\u7b26\u4e32\uff0c\u5305\u542b\u7684\u4ee3\u7801\u5fc5\u987b\u4e3a\u8868\u8fbe\u5f0f\u3002\u8be5\u8868\u8fbe\u5f0f\u5728globals\u548clocals\u6307\u51fa\u7684\u73af\u5883\uff08\u7f3a\u7701\u4e3a\u5f53\u524d\u73af\u5883\uff09\u4e0b\u6267\u884c\uff0c\u8fd0\u7b97\u540e\u7684\u5bf9\u8c61\u4f5c\u4e3a\u8fd4\u56de\u503c\u3002\u5982\u679c\u6307\u5b9a\u4e86globals\u548clocals\uff0c\u5219\u53ea\u4f1a\u67e5\u627e\u6307\u5b9a\u540d\u5b57\u7a7a\u95f4\u7684\u540d\u5b57</li> </ul> </li> <li><code>exec(source, globals=None, locals=None)</code><ul> <li>\u4e0eeval\u7c7b\u4f3c\uff0c\u6267\u884csource\u5bf9\u5e94\u7684\u4ee3\u7801\uff0c\u8fd4\u56deNone</li> </ul> </li> <li>\u6ce8\u610f\uff0ceval \u8bed\u53e5\u53ef\u80fd\u662f\u4e0d\u5b89\u5168\u7684<ul> <li>\u4f8b\u5982\u5728 Windows \u4e0b <code>cmd = \"__import__('os').startfile(r'C:\\\\Windows\\\\notepad.exe')\"; eval(cmd)</code> \u5c31\u6709\u53ef\u80fd\u6253\u5f00 Notebook</li> <li>__import__\u4e3a\u6a21\u5757builtins\u5bf9\u8c61\uff08builtins\uff09\u4e2d\u7684\u5185\u7f6e\u51fd\u6570\uff0ceval\u53ef\u4ee5\u4f20\u9012\u7b2c\u4e8c\u4e2a\u53c2\u6570(\u540d\u5b57\u7a7a\u95f4)\uff0c\u8fd9\u6837\u5728\u8ba1\u7b97\u8868\u8fbe\u5f0f\u65f6\u4f1a\u67e5\u770b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7ed9\u51fa\u7684\u540d\u5b57\u7a7a\u95f4\u4e2d\u7684\u540d\u5b57\u3010\u89c1\u4e0b\u4f8b\u3011</li> <li>\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u91c7\u7528 ast \u6a21\u5757</li> </ul> </li> </ul> <pre><code>cmd = \"os.startfile(r'C:\\\\Windows\\\\notepad.exe')\"   # \u53ea\u6709 Windows \u5e73\u53f0\u4e0b\n\n# \u4fee\u6539\u547d\u540d\u7a7a\u95f4\u4ee5\u4fdd\u8bc1\u5b89\u5168\nsafe_dict = {\"__builtins__\": {}, \"os\": None }\neval(cmd, safe_dict)\n\n# \u8fd8\u53ef\u5229\u7528 ast \u6a21\u5757\nimport ast\nast.literal_eval(cmd)\n</code></pre> <ul> <li>\u5f53\u7136\uff0cexec \u6709\u7740\u7c7b\u578b\u7684\u95ee\u9898</li> </ul> <pre><code># \u5229\u7528 exec \u6267\u884c\u7cfb\u7edf\u6307\u4ee4\uff08\u6253\u5f00\u5176\u4ed6\u8f6f\u4ef6\uff09\ntxt = \"import os; os.system('open /Applications/iTerm.app')\"\nexec(txt)\n</code></pre>"},{"location":"code/Python/Python-note/#_29","title":"\u4e0a\u4e0b\u6587\u7ba1\u7406","text":"<ul> <li>with \u8bed\u53e5<ul> <li>\u4f7f\u7528with\u8bed\u53e5\u8fdb\u884c\u4e0a\u4e0b\u6587\u7ba1\u7406\uff0c\u5728with block\u7ed3\u675f\u65f6\u4f1a\u91ca\u653e\u8d44\u6e90</li> <li>\u4e0d\u7ba1\u5f02\u5e38\u662f\u5426\u51fa\u73b0\u90fd\u4f1a\u91ca\u653e\u5728\u8fdb\u5165\u65f6\u83b7\u5f97\u7684\u8d44\u6e90</li> <li>\u907f\u514d\u4e86try\u2026finally\u7ed3\u6784\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898</li> </ul> </li> <li>\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u67d0\u4e2a\u8d44\u6e90\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406:<ul> <li>\u4f9d\u8d56\u4e8epython\u8bed\u8a00\u7684magic method(\u4e0a\u4e0b\u6587\u7ba1\u7406\u534f\u8bae)\uff0c\u5b9e\u73b0<code>__enter__()</code>\u548c<code>__exit__()</code>\u4e24\u4e2a\u65b9\u6cd5\u3010\u89c1\u4e0b\u4f8b\u3011</li> <li>\u6216\u8005\u901a\u8fc7 <code>import contextlib</code>\uff0c\u5e76\u4f7f\u7528 <code>@contextlib.contextmanager</code> \u65b9\u5f0f\u5b9e\u73b0</li> </ul> </li> </ul> <pre><code># with \u8bed\u53e5\u8fdb\u884c\u4e0a\u4e0b\u6587\u7ba1\u7406\nwith context_expr [as obj]:\n    with_block\n\n# \u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684 magic method \u5b9e\u73b0\nobj = context_expr\nobj.__enter__()\ntry:\n    with_block \nfinally:\n    obj.__exit__()    \n</code></pre>"},{"location":"code/Python/Python-note/#re","title":"re \u6a21\u5757","text":"<ul> <li>\u5f15\u5165\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a<ul> <li>\u53ef\u4ee5\u5224\u65ad\u67d0\u4e2a\u6a21\u5f0f(pattern)\u662f\u5426\u5728\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0 <code>matchobj = re.search(pattern)</code></li> <li>\u53ef\u4ee5\u77e5\u9053\u6a21\u5f0f\u5728\u5b57\u7b26\u4e32\u51fa\u73b0\u7684\u4f4d\u7f6e\u4ee5\u53ca\u5339\u914d\u7684\u5185\u5bb9 matchobj.span() matchobj.group()</li> <li>\u53ef\u4ee5\u6839\u636e\u6a21\u5f0f\u6765\u5206\u5272\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u6839\u636e\u6a21\u5f0f\u6765\u66ff\u6362\u5b57\u7b26\u4e32 re.split(\u2026) re.sub(\u2026)</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#group","title":"\u6b63\u5219\u8868\u8fbe\u5f0f: \u5b50\u6a21\u5f0f/group","text":"<ul> <li>\u5206\u7ec4 (group)</li> <li>\u8981\u5339\u914d\u7684\u6a21\u5f0f\u4e2d\uff0c\u53ef\u4ee5\u5c06\u5176\u5206\u6210\u591a\u4e2a\u90e8\u5206\uff0c\u5176\u4e2d\u7684\u51e0\u4e2a\u7279\u5b9a\u7684\u90e8\u5206\u52a0\u4e0a\u62ec \u53f7\uff0c\u8fd9\u4e9b\u52a0\u62ec\u53f7\u7684\u90e8\u5206\u79f0\u4e3agroup\u6216\u5b50\u6a21\u5f0f</li> <li>\u5f15\u5165\u5b50\u6a21\u5f0f\u7684\u76ee\u7684\uff1a\u83b7\u53d6\u5b50\u6a21\u5f0f\u5339\u914d\u7684\u5185\u5bb9\uff1b\u5b50\u6a21\u5f0f\u4f5c\u4e3a\u6574\u4f53\u53ef\u91cd\u590d\u591a\u6b21</li> <li>\u6bcf\u4e2agroup\u6709\u4e00\u4e2a\u7f16\u53f7: \u6309\u7167\u4ece\u5de6\u5230\u53f3\u7684\u5de6\u62ec\u53f7\u7684\u987a\u5e8f\u4ece1\u5f00\u59cb\u8fdb\u884c\u7f16\u53f7\u3002 \u7f16\u53f70\u8868\u793a\u6574\u4e2a\u5339\u914d\u7684\u6a21\u5f0f</li> <li>group\u53ef\u4ee5\u5d4c\u5957\uff0c\u5982\u2019((jump)ed for) (food)\u2019</li> </ul>"},{"location":"code/Python/Python-note/#_30","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a\u6a21\u5f0f\u5bf9\u8c61","text":"<ul> <li>\u9996\u5148\u8c03\u7528re\u6a21\u5757\u7684<code>compile</code>\u65b9\u6cd5\u5c06\u5176\u7f16\u8bd1\u6210\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f(\u6216\u6a21\u5f0f)\u5bf9\u8c61(\u7c7b\u578b\u4e3are.Pattern)\u3002\u6a21\u5f0f\u5bf9\u8c61\u7684\u5c5e\u6027pattern\u4fdd\u5b58\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f</li> <li><code>re.compile(pattern[,flags])</code></li> <li>\u5176\u4e2d pattern \u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u63cf\u8ff0\u8981\u5339\u914d\u7684\u6a21\u5f0f</li> <li>flags \u63cf\u8ff0\u5339\u914d\u65f6\u7684\u6240\u91c7\u7528\u7684\u9009\u9879\u3002re\u6a21\u5757\u5b9a\u4e49\u4e86\u591a\u4e2a\u5e38\u91cf\uff0c\u901a\u8fc7\u8fd0\u7b97\u7b26 | (\u6309\u4f4d\u6216) \u5305\u542b\u591a\u4e2a\u9009\u9879</li> <li>\u5339\u914d\u9009\u9879\u53ef\u4ee5\u91c7\u7528\u77ed\u683c\u5f0f(\u5982re.I)\uff0c\u4e5f\u53ef\u91c7\u7528\u957f\u683c\u5f0f(\u5982re.IGNORECASE)\uff0c\u591a\u4e2a\u9009\u9879 \u53ef\u4ee5\u901a\u8fc7|\u8fd0\u7b97\u7b26\uff08\u4f4d\u8fd0\u7b97\u7b26\u6216\uff09\u7ec4\u5408\uff0c \u6bd4\u5982 <code>re.I | re.A</code>\u3010\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u7a7a\u767d\u7b26\u5b9a\u4e49\u57fa\u4e8e ASCII\uff0c\u5e76\u4e14\u6709\u9ed8\u8ba4\u7684\u9009\u9879\uff0c\u7a7a\u767d\u7b26\u5b9a\u4e49\u57fa\u4e8e Unicode\uff08re.ASCII == 256, re.UNICODE == 32\uff09\u3011 </li> <li>\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u4f7f\u7528\u591a\u884c\u5339\u914d\u6a21\u5f0f\uff1f<ul> <li>\u8c03\u7528file.read()\u5f97\u5230\u7684\u662f\u591a\u884c\u5b57\u7b26\u4e32\uff0c \u4e14\u5339\u914d\u6a21\u5f0f\u65f6\u5e0c\u671b\u901a\u8fc7^ $\u7b49\u6765\u9010\u884c \u5339\u914d\u65f6</li> <li>\u5982\u679cfile.readline()\u5f97\u5230\u7684\u662f\u4e00\u884c\u7684\u5185 \u5bb9\uff0c\u5219\u4e0d\u9700\u8981\u7528\u591a\u884c\u6a21\u5f0f</li> </ul> </li> <li>re.VERBOSE<ul> <li>\u5ffd\u7565\u6a21\u5f0f\u4e2d\u7684\u7a7a\u683c\u7c7b\u5b57\u7b26\uff08\u8fd9\u6837\u53ef\u4ee5\u5199\u6210\u591a\u884c\uff0c\u4e5f\u53ef\u6dfb\u52a0 \u7a7a\u683c\uff09\uff0c\u5e76\u53ef\u4ee5\u4f7f\u7528#\u6ce8\u91ca\uff0c\u63d0\u9ad8\u53ef\u8bfb\u6027</li> </ul> </li> </ul> <pre><code>pattern = r\"\"\" \n(?P&lt;first_three&gt;[\\d]{3}) # The first three digits\u2026\n- # A literal hyphen\u2026\n(?P&lt;last_four&gt;[\\d]{4}) # The last four digits\u2026 \n\"\"\"\nm = re.search(pattern, '867-5309', re.VERBOSE)\n</code></pre>"},{"location":"code/Python/Python-note/#_31","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a\u6a21\u5f0f\u5bf9\u8c61\u7684\u4e3b\u8981\u65b9\u6cd5","text":""},{"location":"code/Python/Python-note/#search","title":"search","text":"<ul> <li><code>match = regexp.search(text)</code></li> <li>\u5728\u5b57\u7b26\u4e32string\u6216\u5176\u6307\u5b9a\u8303\u56f4string[pos:endpos)\u641c\u7d22\u7b2c\u4e00\u4e2a\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u5185\u5bb9\u3002\u82e5\u627e\u5230\uff0c\u8fd4\u56de\u4e00\u4e2a\u63cf\u8ff0\u5339\u914d\u4fe1\u606f\u7684Match\u5bf9\u8c61\uff0c\u5426\u5219\u8fd4\u56de None </li> <li>\u3010\u5bf9\u4e8e regexp.search(text) \u6240\u8fd4\u56de\u7684 Match \u5bf9\u8c61\uff0c\u6709\u4e0a\u9762\u7684\u51e0\u4e2a\u5e38\u7528\u65b9\u6cd5\uff0c\u7528\u6cd5\u8be6\u89c1\u4e0b\u9762\u7684 finditer \u4e2d\u7684\u4f8b\u5b50\u3011</li> </ul>"},{"location":"code/Python/Python-note/#match","title":"match","text":"<ul> <li><code>match(string[, pos[, endpos]])</code>\u4e0esearch\u7c7b\u4f3c\uff0c\u53ea\u662f\u8981\u6c42\u6a21\u5f0f(pattern)\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u5f00\u5934\u6216\u6307\u5b9a\u8303\u56f4\u7684\u5f00\u5934\uff0c\u7b49\u4ef7\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u4e3a<code>^pattern</code></li> <li><code>fullmatch(string[, pos[, endpos]])</code> \u8981\u6c42\u6a21\u5f0f\u5b8c\u6574\u5339\u914d\u5b57\u7b26\u4e32\uff0c\u5373\u6a21\u5f0f\u7684\u6700\u524d\u9762\u4e3a\u5b57\u7b26\u4e32\u5f00\u5934\u6216 \u6307\u5b9a\u8303\u56f4\u7684\u5f00\u5934\uff0c\u6700\u540e\u9762\u4e3a\u5b57\u7b26\u4e32\u5c3e\u90e8\u6216\u6307\u5b9a\u8303\u56f4\u7684\u5c3e\u90e8\uff0c\u7b49\u4ef7\u4e8e <code>^pattern$</code></li> </ul>"},{"location":"code/Python/Python-note/#finditer","title":"finditer","text":"<ul> <li>search\u65b9\u6cd5\u53ea\u80fd\u627e\u5230\u7b2c\u4e00\u4e2a\u4e0e\u6a21\u5f0f\u5339\u914d\u7684match\u5bf9\u8c61</li> <li>finditer(string[, pos[, endpos]]): \u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u8be5\u8fed\u4ee3\u5668\u4f1a\u6bcf\u6b21\u8fd4\u56de\u5339\u914d \u7684\u4e0b\u4e00\u4e2amatch\u5bf9\u8c61</li> </ul> <pre><code>regexp = re.compile('((jump)ed for) (food)')\ntext = 'The quick brown fox jumped for food. The lazy black dog jumped for food.'\nmatches_iter = regexp.finditer(text)\nfor count, match in enumerate(matches_iter, 1):\n    print('{} found \"{}\" at [{},{}]'.format(count, match.group(), *match.span()))\n    for k, v in enumerate(match.groups(), 1):\n        print(' group %d: %s, span %s' % (k, v, match.span(k)))\n</code></pre>"},{"location":"code/Python/Python-note/#findall","title":"findall","text":"<ul> <li><code>findall(string[, pos[, endpos]])</code></li> <li>\u5728\u5b57\u7b26\u4e32\u6216\u6307\u5b9a\u8303\u56f4\u641c\u7d22\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u5305\u542b\u4e86\u6240\u6709\u5339\u914d\u7684\u5185\u5bb9</li> <li>\u5982\u679c\u6a21\u5f0f\u4e2d\u6ca1\u6709\u7ec4(\u5b50\u6a21\u5f0f) \uff0c\u5219\u5217\u8868\u7684\u6bcf\u4e2a\u5143\u7d20\u4e3a\u6240\u6709\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u5185\u5bb9</li> <li>\u5982\u679c\u6a21\u5f0f\u4e2d\u6709\u7ec4(\u5b50\u6a21\u5f0f) \uff0c\u5219\u5339\u914d\u7ed3\u679c\u4e2d\u4ec5\u5305\u62ec\u4e0e\u5b50\u6a21\u5f0f\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u6574\u4e2a\u6a21\u5f0f\u5339\u914d\u7684\u5185\u5bb9 (group 0)\u5e76\u6ca1\u6709\u5305\u542b\u5728\u5185\u3002\u5982\u679c\u6709\u591a\u4e2a\u7ec4(\u5b50\u6a21\u5f0f) \uff0c\u5219\u6bcf\u6b21\u5339\u914d\u7684\u7ed3\u679c\u4ee5tuple\u5f62\u5f0f\u7ec4\u7ec7\uff0c\u5373 [(group 1,group2\u2026,groupN), (.....), ....., (.....)]</li> <li>\u5982\u679c\u6700\u540e\u7684\u8f93\u51fa\u65e2\u60f3\u8981\u5b50\u6a21\u5f0f\u4e5f\u60f3\u8981\u6a21\u5f0f\u5339\u914d\u7684\u5185\u5bb9\uff0c\u5219\u6a21\u5f0f\u5b9a\u4e49\u4e2d\u5e94\u8be5\u7528group\u5305\u542b\u6240\u6709\u7684\u5185\u5bb9\u3010\u6700\u5916\u9762\u7528 () \u5305\u542b\u8d77\u6765\u3011</li> </ul>"},{"location":"code/Python/Python-note/#_32","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a\u6a21\u5757\u7684\u65b9\u6cd5","text":"<ul> <li>\u524d\u9762\u7684\u4f8b\u5b50\u90fd\u662f\u8c03\u7528re.compile\u521b\u5efa\u4e00\u4e2a\u6a21\u5f0f\u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528\u6a21\u5f0f\u5bf9\u8c61\u7684\u65b9\u6cd5</li> <li> <p>re\u6a21\u5757\u4e5f\u63d0\u4f9b\u7c7b\u4f3c\u7684\u65b9\u6cd5\uff1a re.search(pattern, string, flags) \u7b49\u4ef7\u4e8e re.compile(pattern, flags).search(string)</p> <ul> <li>\u4f20\u9012\u7684\u53c2\u6570\u662f\u6b63\u5219\u8868\u8fbe\u5f0fpattern\u3001\u5f85\u67e5\u627e\u7684\u5b57\u7b26\u4e32\u548c\u5339\u914d\u9009\u9879</li> <li>re\u6a21\u5757\u7684\u65b9\u6cd5\u65e0\u6cd5\u4f20\u9012pos/endpos\u53c2\u6570\uff0c\u5373\u641c\u7d22\u7684\u8303\u56f4\u53ea\u80fd\u4e3a\u6574\u4e2a\u5b57\u7b26\u4e32</li> <li>\u8fd4\u56de\u7684\u5bf9\u8c61\u4e0e\u6a21\u5f0f\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e00\u81f4\uff0c\u5982\u679c\u627e\u5230\u5339\u914d\u7ed3\u679c\uff0c\u8fd4\u56deMatch\u5bf9\u8c61\uff0c\u6ca1\u6709\u627e\u5230\uff0c\u8fd4\u56deNone </li> </ul> </li> <li> <p>\u4e24\u79cd\u65b9\u6cd5\u90fd\u53ef\u4ee5\u4f7f\u7528</p> </li> <li>\u5728\u8c03\u7528re\u6a21\u5757\u7684search\u2026/sub/split\u7b49\u65b9\u6cd5\u65f6\uff0c\u5176\u5185\u90e8\u5b9e\u73b0\u4e5f\u662f\u9996\u5148\u8c03\u7528compile\u521b\u5efa\u4e00\u4e2a\u6a21\u5f0f \u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528\u6a21\u5f0f\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u800c\u4e14\u5176\u5185\u90e8\u5bf9\u4e8e\u6a21\u5f0f\u5bf9\u8c61\u8fdb\u884c\u4e86\u7f13\u5b58\uff0c\u4e0b\u6b21\u518d\u4f20\u9012\u76f8\u540c\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u65f6\u4f1a\u91cd\u7528\u524d\u9762compile\u7684\u6a21\u5f0f\u5bf9\u8c61</li> <li>\u5982\u679c\u5728\u5faa\u73af\u5916\u90e8\u8c03\u7528\uff0c\u4e24\u8005\u7684\u6027\u80fd\u6ca1\u6709\u4ec0\u4e48\u533a\u522b</li> <li>\u5982\u679c\u5728\u4e00\u4e2a\u5faa\u73af\u5185\u90e8\u8c03\u7528\uff0c\u5219\u4f7f\u7528\u6a21\u5f0f\u5bf9\u8c61\u7684\u65b9\u6cd5\u53ef\u8282\u7701\u591a\u6b21\u51fd\u6570\u8c03\u7528\uff08\u4e0d\u9700\u8981\u6bcf\u6b21\u8c03\u7528 compile\u2026)</li> </ul>"},{"location":"code/Python/Python-note/#_33","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<ul> <li>\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u5143\u5b57\u7b26\u5305\u62ec <code>. ^ $ * + ? { } [ ] \\ | ( )</code> </li> </ul>"},{"location":"code/Python/Python-note/#_34","title":"\u5143\u5b57\u7b26 \u8f6c\u4e49\u5b57\u7b26","text":"<p>\u3010\u6ce8\u610f\u8f6c\u4e49\u5b57\u7b26  \u540e\u9762\u53ea\u6709\u63a5\u5b57\u6bcd\u6216\u6570\u5b57\u624d\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u63a5\u5176\u4ed6\u5b57\u7b26\u90fd\u8868\u793a\u5339\u914d\u8be5\u5b57\u7b26\uff08\u4f8b\u5982  \u672c\u8eab\uff09\u3011</p> <ul> <li>\\\u540e\u8ddf\u7740\u67d0\u4e9b(\u82f1\u6587\u5b57\u6bcd)\u5b57\u7b26\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u8868\u793a\u9884\u5b9a\u4e49\u5b57\u7b26\u96c6\u6216\u8fb9\u754c\u5339\u914d\u7b49\uff0c \\A \\b \\B \\d \\D \\s \\S \\w \\W \\Z</li> <li>\u8fd8\u652f\u6301\u4e0e\u5b57\u7b26\u4e32\u7c7b\u4f3c\u7684\u6807\u51c6\u8f6c\u4e49\u5e8f\u5217\uff0c\u5305\u62ec\\a \\t \\n \\v \\f \\r \\xhh(\u5341\u516d\u8fdb\u5236\u7684ASCII\u7801\u5bf9\u5e94\u7684\u5b57\u7b26) \\uXXX \\UXXXX (\u5341\u516d\u8fdb\u5236\u7684Unicode\u7801\u5bf9\u5e94\u7684\u5b57\u7b26\uff09\uff0c\u6ce8\u610f\u5b57\u7b26\u4e32\u4e2d\\b\u8868\u793aBackspace\u5b57\u7b26\uff0c\u4f46\u662f\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d \\b\u8868\u793a\u5355\u8bcd\u7684\u5f00\u59cb\u6216\u7ed3\u675f\u4f4d\u7f6e</li> <li>\\\u540e\u8ddf\u82f1\u6587\u5b57\u6bcd\uff0c\u4e14\u4e0d\u5728\u4e0a\u9762\u7ed9\u51fa\u7684\u5408\u6cd5\u5e8f\u5217\u4e2d\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38(bad escape)</li> <li>\\\u540e\u8ddf\u6570\u5b57N\uff0c\u8868\u793a\u5339\u914d\u524d\u9762\u7f16\u53f7\u4e3aN\u7684\u5b50\u6a21\u5f0f(\u7ec4)\u5339\u914d\u7684\u5185\u5bb9</li> <li>\\\u540e\u8ddf\u7740\u975e\u6570\u5b57\u548c\u975e\u82f1\u6587\u5b57\u6bcd\u7684\u5b57\u7b26\uff0c\u8868\u793a\u5339\u914d\u8be5\u5b57\u7b26(\u524d\u9762\u7684\\\u53bb\u9664)\uff0c\u6bd4\u5982\\ \u5339\u914d\u53cd\u659c\u6760 ( \u5339\u914d\u5de6\u62ec\u53f7</li> </ul> <p></p> <ul> <li>\u3010\u5c0f\u7ed3\u3011\u5982\u4f55\u4f20\u9012\u6b63\u5219\u8868\u8fbe\u5f0f\u53c2\u6570\uff1f\uff08\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u63cf\u8ff0\uff09<ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684 pattern \u53c2\u6570\u662f str \u7c7b\u578b\u7684\uff0c\u9700\u8981\u901a\u8fc7\u5b57\u7b26\u4e32\u7684\u5b57\u9762\u91cf\u5b9a\u4e49\u4f20\u5165\uff1b</li> <li>\u4e00\u65b9\u9762\uff0cpython \u5728\u63a5\u53d7\u5b57\u9762\u91cf\u5b9a\u4e49\u7684\u65f6\u5019\u9700\u8981\u8fdb\u884c\u8f6c\u4e49\uff1b\u53e6\u4e00\u65b9\u9762 re \u89e3\u91ca\u5b57\u7b26\u4e32\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u9700\u8981\u8fdb\u884c\u8f6c\u4e49\uff1b\u800c\u4e24\u8005\u7684\u8f6c\u4e49\u5b57\u7b26\u5747\u4e3a <code>\\</code>\uff0c\u4f46\u89e3\u91ca\u7684\u65b9\u5f0f\u4e0d\u540c\uff08\u4f8b\u5982 \u2018\\s\u2019 \u5728\u5b57\u9762\u91cf\u5b9a\u4e49\u65f6\u7531\u4e8e\u6ca1\u6709\u5339\u914d\u56e0\u6b64\u5c31\u662f\u53cd\u659c\u6760+s\uff0c\u800c\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d \u2018\\s\u2019 \u5219\u8868\u793a\u7a7a\u5b57\u7b26\uff09\uff1b</li> <li>\u56e0\u6b64\uff0c\u5b89\u5168\u65b9\u4fbf\u7684\u505a\u6cd5\u662f\u7528\u539f\u59cb\u5b57\u7b26\u4e32\u5b9a\u4e49 pattern\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u800c\u4e0d\u9700\u8981\u5173\u6ce8\u5b57\u9762\u91cf\u5b9a\u4e49\u65f6\u7684\u8f6c\u4e49\u8bed\u6cd5</li> </ul> </li> </ul> <pre><code>s = r't\\s t t\\\\s'   # \u5b9a\u4e49\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\uff0c\u6ca1\u6709 \\s \u6240\u4ee5\u4f1a\u4fdd\u7559 '\\s'\nprint(re.findall('\\s',s))\nprint(re.findall('\\\\s',s)) # \u6b63\u5219\u8868\u8fbe\u5f0f\u4e3a\\s, \u5339\u914d\u7a7a\u683c\u7c7b\u5b57\u7b26\uff0c\u8f93\u51fa[' ', ' ']\nprint(re.findall(r'\\\\s',s))\nprint(re.findall('\\\\\\\\s',s))\nprint(re.findall(re.escape('\\\\s'),s))   #\u6b63\u5219\u8868\u8fbe\u5f0f\u4e3a\\\\s, \u5339\u914d\\s\uff0c\u8f93\u51fa['\\\\s', '\\\\s']\n</code></pre>"},{"location":"code/Python/Python-note/#reescapepattern","title":"re.escape(pattern)","text":"<ul> <li>\u8fd4\u56de\u5b57\u7b26\u4e32\uff0c\u8be5\u5b57\u7b26\u4e32\u5bf9\u4e8epattern\u4e2d\u90a3\u4e9b\u4e0d\u662fASCII\u5b57\u6bcd\u3001\u6570\u5b57\u4ee5\u53ca_\u7684\u5b57\u7b26\u524d\u9762\u63d2\u5165\u4e00\u4e2a\u53cd\u659c\u6760\uff0c\u4f5c\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u65f6\u5339\u914dpattern\u672c\u8eab</li> <li>\\\u540e\u8ddf\u7740\u975e\u6570\u5b57\u548c\u975e\u82f1\u6587\u5b57\u6bcd\u7684\u5b57\u7b26\uff0c\u8868\u793a\u5339\u914d\u8be5\u5b57\u7b26\uff0c\u6bd4\u5982\\ \u5339\u914d\u53cd\u659c\u6760 ( \u5339\u914d\u5de6\u62ec\u53f7</li> <li>re.escape(pattern)\u7528\u4e8e\u52a8\u6001\u6784\u5efa\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8981\u6c42\u5339\u914dpattern\u91cc\u9762\u7684\u5b57\u7b26\uff0c\u907f\u514dpattern\u91cc \u9762\u7684\u5b57\u7b26\u88abre\u89e3\u91ca\u4e3a\u7279\u6b8a\u7684\u542b\u4e49</li> <li>\u3010\u4f8b\u5b50\u3011\u4e0b\u4f8b\u4e2d\uff0c\u7b2c\u4e09\u4e2a\u5b9a\u4e49\u7684\u5b57\u9762\u91cf \u2018\\t\u2019 \u9996\u5148\u88ab\u89e3\u91ca\u4e3a tab \u7b26\u53f7\uff1bre.escape() \u5728\u5176\u524d\u9762\u63d2\u5165\u4e86\u4e00\u4e2a\u53cd\u659c\u6760\uff08\u5339\u914d\u7684\u65f6\u5019\u5ffd\u7565\u53cd\u659c\u6760\uff09</li> </ul> <pre><code>print('\\t')             # tab \u7b26\u53f7\nprint(r'\\t')            #  \\t\nprint(re.escape('\\t'))  # \u53cd\u659c\u6760+tab \u7b26\u53f7\nprint(re.escape(r'\\t')) # \\\\t\n</code></pre>"},{"location":"code/Python/Python-note/#-","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26-\u5b57\u7b26\u96c6","text":"<ul> <li>\u5b57\u7b26\u96c6\uff1a\u7531\u4e00\u5bf9[]\u65b9\u62ec\u53f7\u62ec\u8d77\u6765\u7684\u5b57\u7b26\u96c6\u5408\uff0c\u5b9a\u4e49\u65b9\u5f0f\u5982\u4e0b</li> <li><code>[xyz]</code>:\u679a\u4e3e\u5b57\u7b26\u96c6\uff0c\u5339\u914d\u62ec\u53f7\u4e2d\u4efb\u610f\u5b57\u7b26</li> <li><code>[a-z]</code>:\u6307\u5b9a\u8303\u56f4\u7684\u5b57\u7b26\uff0c\u5339\u914d\u6307\u5b9a\u8303\u56f4\u7684\u4efb\u610f\u5b57\u7b26\u3002<ul> <li>\u2018[a-zA-Z0-9]\u2019\u53ef\u4ee5\u5339\u914d\u4e00\u4e2a\u4efb\u610f\u5927\u5c0f\u5199\u5b57\u6bcd\u6216\u6570\u5b57</li> <li>\u8fde\u5b57\u7b26\u653e\u5728\u6700\u524d\u9762\u6216\u6700\u540e\u9762\uff0c\u8868\u793a\u8fde\u5b57\u7b26\u672c\u8eab\uff0c\u6bd4\u5982 \u2018[0-]\u2019</li> </ul> </li> <li><code>[^xyz]</code>:\u5426\u5b9a\u679a\u4e3e\u5b57\u7b26\u96c6\uff0c\u5339\u914d\u4e0d\u5728\u540e\u9762\u7ed9\u51fa\u7684\u5b57\u7b26\u96c6\u4e2d\u7684\u4efb\u610f\u5b57\u7b26<ul> <li>^\u53ea\u6709\u51fa\u73b0\u5728\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u624d\u8868\u793a\u5426\u5b9a</li> <li>\u2019[^a-z]\u2019 \u53ef\u4ee5\u5339\u914d\u975e\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u7684\u5b57\u7b26\uff0c\u4f46 [a-z^] \u5339\u914d\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u6216\u8005^</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#-_1","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26-\u9884\u5b9a\u4e49\u5b57\u7b26\u96c6","text":"<ul> <li>\u9884\u5b9a\u4e49\u5b57\u7b26\u96c6\uff1a\u4e00\u4e9b\u5b57\u7b26\u96c6\u7ecf\u5e38\u4f1a\u7528\u5230\uff0c\u7cfb\u7edf\u5b9a\u4e49\u4e86\u82e5\u5e72\u9884\u5b9a\u4e49\u5b57\u7b26\u96c6\u3002\u7f3a\u7701\u7684\u5339\u914d\u9009\u9879\u9690\u542b\u4e86re.U\uff0c \u8868\u793a\u662funicode\u610f\u4e49\u4e0a\u7684\u6570\u5b57\u3001\u5b57\u6bcd\u7684\u5b9a\u4e49\u3002\u9009\u9879 re.A\u8868\u793a\u662fASCII\u5b57\u7b26\u96c6\u4e2d\u7684\u6570\u5b57\u3001\u5b57\u6bcd\u7684\u5b9a\u4e49</li> </ul>"},{"location":"code/Python/Python-note/#-_2","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26-\u8fb9\u754c\u5339\u914d\u7b26","text":"<ul> <li>0\u5bbd\u5ea6\u8fb9\u754c\u5339\u914d\u7b26\uff1a\u5b57\u7b26\u4e32\u5339\u914d\u5f80\u5f80\u6d89\u53ca\u4ece\u67d0\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\uff0c\u4f8b\u5982\u884c\u7684\u5f00\u5934\u7ed3\u5c3e\u3001\u5355\u8bcd\u8fb9\u754c\u7b49\uff0c\u8fb9\u754c\u5339\u914d\u7b26\u7528\u4e8e\u5339\u914d\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\uff0c\u4e0d\u4f1a\u6d88\u8017\u6a21\u5f0f\u4e2d\u7684\u5b57\u7b26</li> </ul>"},{"location":"code/Python/Python-note/#-_3","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26-\u91cd\u590d\u9650\u5b9a\u7b26","text":"<ul> <li>\u91cd\u590d\u9650\u5b9a\u7b26\uff1a\u6307\u5b9a\u91cd\u590d\u7684\u6b21\u6570\uff0c\u9ed8\u8ba4\u91c7\u7528\u8d2a\u5a6a\u5339\u914d\u7b97\u6cd5</li> <li>X\u53ef\u4e3a\u5355\u4e2a\u5b57\u7b26\u6216\u901a\u8fc7\u5c0f\u62ec\u53f7\u5305\u542b\u7684\u5b50\u6a21\u5f0f\uff08\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\uff09</li> <li>\u8d2a\u5a6a\u5339\u914d\u7b97\u6cd5\u662f\u6307\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\u5c3d\u53ef\u80fd\u591a\uff08leftmost or largest)\u5339\u914d\u8981\u91cd\u590d\u7684\u524d\u5bfc\u5b57\u7b26\u6216\u5b50\u6a21\u5f0f\uff0c\u53ea\u6709\u5f53\u8fd9\u79cd\u91cd\u590d\u5f15\u8d77\u6574\u4e2a\u6a21\u5f0f\u5339\u914d\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\uff0c\u5f15\u64ce\u624d\u4f1a\u8fdb\u884c\u56de\u6eaf\uff08\u5c1d\u8bd5\u7a0d\u77ed\u7684\u5339\u914d\uff09</li> </ul> <ul> <li>\u5982\u679c\u5728\u91cd\u590d\u9650\u5b9a\u7b26\u540e\u9762\u52a0\u540e\u7f00\u201d?\u201d\uff0c\u8868\u793a\u4f7f\u7528\u61d2\u60f0\u5339\u914d\u7b97\u6cd5</li> <li>\u61d2\u60f0\u5339\u914d\u7b97\u6cd5\u662f\u6307\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\u5c3d\u53ef\u80fd\u5c11\u5730\u8fdb\u884c\u91cd\u590d\u5339\u914d\uff0c\u53ea\u6709\u5f53\u8fd9\u79cd\u91cd\u590d\u5f15\u8d77\u6574\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\uff0c\u5f15\u64ce\u4f1a\u8fdb\u884c\u56de\u6eaf(\u5339\u914d\u66f4\u591a\u7684\u5b57\u7b26\uff09</li> <li>\u3010\u4f8b\u3011\u60f3\u8981\u5339\u914d <code>&lt;book&gt;&lt;title&gt;Python&lt;/title&gt;&lt;author&gt;Dong&lt;/author&gt;&lt;/book&gt;</code> \u4e2d\u7528\u65b9\u62ec\u53f7\u6807\u8bc6\u7684\uff0c\u4e0d\u80fd\u91c7\u7528 <code>&lt;.+&gt;</code> \u56e0\u4e3a\u8d2a\u5a6a\u5339\u914d\u4f1a\u5c06\u6574\u4e2a\u5b57\u7b26\u4e32\u5305\u542b\u8fdb\u53bb\uff1b<ul> <li>\u53ef\u7528 <code>&lt;.+?&gt;</code> \u5c3d\u53ef\u80fd\u5c11\u5730\u5339\u914d\u4e00\u4e2a\u4ee5\u4e0a\u5b57\u7b26\uff0c\u540e\u9762\u4e3a&gt;</li> <li>\u8fd8\u53ef\u4ee5\u7528 <code>&lt;[^&gt;]+&gt;</code> \u5c3d\u53ef\u80fd\u591a\u5730\u5339\u914d\u4e00\u4e2a\u4ee5\u4e0a\u975e&gt;\u5b57\u7b26\uff0c\u540e\u9762\u4e3a&gt;</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#-_4","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26-\u5206\u7ec4\u7b26","text":"<ul> <li>\u5206\u7ec4\u7b26\u201d()\u201d\uff1a\u5c06\u8981\u5339\u914d\u7684\u6a21\u5f0f\u8fdb\u4e00\u6b65\u5206\u7ec4\uff0c\u4e5f\u79f0\u4e3a\u5b50\u6a21\u5f0f<ul> <li>\u5728\u83b7\u5f97\u5339\u914d\u7684\u6a21\u5f0f\u7684\u540c\u65f6\u4e5f\u53ef\u4ee5\u83b7\u5f97\u5404\u4e2a\u5339\u914d\u7684\u5b50\u6a21\u5f0f</li> <li>()\u5305\u542b\u7684\u5b50\u6a21\u5f0f\u5185\u7684\u5185\u5bb9\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u51fa\u73b0,\u53ef\u4ee5\u5e94\u7528\u524d\u9762\u4ecb\u7ecd\u7684\u91cd\u590d\u9650\u5b9a\u7b26\uff0c\u8868\u793a\u5b50\u6a21\u5f0f\u91cd\u590d\u591a\u6b21<ul> <li>\u5b50\u6a21\u5f0f\u91cd\u590d\u9650\u5b9a\u7b26\u4e4b\u540e\u4e5f\u5141\u8bb8\u9644\u52a0\u4e00\u4e2a?\uff0c\u8868\u793a\u91c7\u7528\u61d2\u60f0\u5339\u914d</li> </ul> </li> </ul> </li> <li>\u4e00\u65e6\u5f15\u5165\u5206\u7ec4\uff0c\u5219findall\u8fd4\u56de\u7684\u5217\u8868\u4e2d\u4ec5\u4ec5\u5305\u542b\u5206\u7ec4\u6240\u5339\u914d\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u5982\u679c\u60f3\u8981\u5305\u542b\u5168\u90e8\u5339\u914d\u7684\u6a21\u5f0f\uff0c\u9700 \u8981\u4f7f\u7528\u5206\u7ec4\u7b26\u5c06\u6240\u6709\u8981\u5339\u914d\u7684\u5185\u5bb9\u5305\u542b\u8d77\u6765</li> <li>search/finditer\u65b9\u6cd5\u8fd4\u56de\u7684\u662fmatch\u5bf9\u8c61\uff0c\u53ef\u4ee5\u901a\u8fc7match.group()\u6765\u8fd4\u56de\u5168\u90e8\u5339\u914d\u7684\u6a21\u5f0f(\u5373group 0)</li> <li>\u3010\u4f8b\u3011<code>pattern1 = r'((\\d{2})-)?(\\d{2,3})-(\\d{7,8})'</code> \u7528\u6765\u5339\u914d\u53ef\u80fd\u6709\u7684\u56fd\u5bb6\u53f7-\u533a\u53f7-\u672c\u5730\u53f7\u7801\u683c\u5f0f</li> </ul> <pre><code>text = '202.120.225.10 8.8.8.8 127.0.0.1'\nre.findall(r'\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}', text) \n# ['202.120.225.10', '8.8.8.8', '127.0.0.1']\nre.findall(r'(\\d{1,3}\\.){3}\\d{1,3}', text) \n# ['225.', '8.', '0.']\nre.findall(r'((\\d{1,3}\\.){3}\\d{1,3})', text)\n# [('202.120.225.10', '225.'), ('8.8.8.8', '8.'), ('127.0.0.1', '0.')]\n</code></pre>"},{"location":"code/Python/Python-note/#_35","title":"\u4e0d\u6355\u83b7\u5206\u7ec4 (?","text":"<ul> <li>\u6709\u7684\u65f6\u5019\u53ef\u80fd\u8981\u8fdb\u884c\u5206\u7ec4\uff0c\u4f46\u7528\u6237\u5e76\u4e0d\u5173\u5fc3\u67d0\u4e2a\u5b50\u6a21\u5f0f\u5177\u4f53\u5339\u914d\u7684\u5185\u5bb9\u662f\u4ec0\u4e48</li> <li>\u53ef\u4ee5\u901a\u8fc7\u5728(\u540e\u9762\u6dfb\u52a0?: \u8868\u793a\u5bf9\u8be5\u5206\u7ec4\u5339\u914d\u7684\u5185\u5bb9\u4e0d\u611f\u5174\u8da3\uff0c\u4e0d\u6355\u83b7\uff0c\u5373(?:pattern)</li> <li>\u4e0d\u611f\u5174\u8da3\u7684\u7ec4\u4e5f\u4e0d\u5360\u7528\u7ec4\u7f16\u53f7</li> <li>\u3010\u4f8b\u3011<code>pattern2 = r'(?:(\\d{2})-)?(\\d{2,3})-(\\d{7,8})'</code> \u5176\u4e2d\u7b2c\u4e00\u4e2a\u5206\u7ec4\u52a0\u4e86 (?: \u8868\u793a\u4e0d\u6355\u83b7</li> </ul>"},{"location":"code/Python/Python-note/#_36","title":"\u547d\u540d\u5206\u7ec4","text":"<ul> <li>\u53ef\u4ee5\u7ed9\u5206\u7ec4(\u5b50\u6a21\u5f0f)\u547d\u540d\uff0c\u65b9\u4fbf\u5f15\u7528\uff0c\u800c\u4e14\u66f4\u6539\u6b63\u5219\u8868\u8fbe\u5f0f\u4e5f\u4e0d\u4f1a\u6709\u5f71\u54cd</li> <li>\u3010\u4f8b\u3011<code>pattern3 = r'(?:(?P&lt;country&gt;\\d{2})-)?(?P&lt;city&gt;\\d{2,3})(?P&lt;phone&gt;\\d{7,8})'</code> \u5206\u522b\u7ed9\u4e86\u4e09\u4e2a\u5206\u7ec4\u547d\u540d</li> </ul>"},{"location":"code/Python/Python-note/#_37","title":"\u5206\u7ec4\u5f15\u7528","text":"<ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd8\u652f\u6301\u5206\u7ec4\u5f15\u7528(backreference)\uff0c\u8868\u793a\u8981\u5339\u914d\u524d\u9762\u76f8\u5e94\u5b50\u6a21\u5f0f\u6240\u5339\u914d\u7684\u5185\u5bb9<ul> <li><code>\\N</code> \u8868\u793a\u5339\u914d\u7684\u5185\u5bb9\u4e3a\u524d\u9762\u7f16\u53f7\u4e3aN\u7684\u5206\u7ec4\u5339\u914d\u7684\u5185\u5bb9\uff0c\u6ce8\u610fN\u4e0d\u80fd\u662f\u540e\u9762\u7684\u5206\u7ec4\u7f16\u53f7\uff0c\u4e5f\u4e0d\u80fd\u4e3a0</li> <li><code>(?P=name)</code> \u8868\u793a\u5f15\u7528\u524d\u9762\u7ec4\u540d\u4e3aname\u7684\u547d\u540d\u5206\u7ec4\u5339\u914d\u7684\u5185\u5bb9</li> </ul> </li> <li>\u3010\u4f8b\u3011\u5339\u914d\u8fde\u7eed\u51fa\u73b0\u7684\u4e24\u4e2a\u76f8\u540c\u5355\u8bcd<ul> <li><code>pattern = r'(\\b\\w+)\\s+\\1'</code></li> <li><code>pattern = r'(?P&lt;word&gt;\\b\\w+)\\s+(?P=word)'</code></li> <li>\u4e0a\u9762\u7684\u4e24\u79cd pattern \u5747\u53ef\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u8fde\u7eed\u51fa\u73b0\u7684\u4e24\u4e2a\u76f8\u540c\u5355\u8bcd\uff1b\u4f46\u662f\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u91cc\u4e0d\u80fd\u7528 findall \u5f97\u5230\u5b8c\u6574\u7684\u5339\u914d\u7ed3\u679c\u3010\u6ce8\u610f\u7531\u4e8e\u9700\u8981\u5206\u7ec4\u5f15\u7528\u8fd9\u65f6\u4e0d\u80fd\u7528 (?: \u6765\u5ffd\u7565\u8be5\u5206\u7ec4\u3011\uff1b1. \u53ef\u4ee5\u5728\u6700\u5916\u9762\u52a0\u4e0a\u4e00\u4e2a () \u5f97\u5230\u5b8c\u6574\u5339\u914d\uff1b2. \u53ef\u4ee5\u7528 match \u65b9\u6cd5</li> </ul> </li> </ul> <pre><code>pattern = r'(?P&lt;word&gt;\\b\\w+)\\s+(?P=word)'    # \u91c7\u7528\u5206\u7ec4\u547d\u540d\u5b9e\u73b0\u5206\u7ec4\u5f15\u7528\nmatch = re.search(pattern,'Paris in the the spring')\nprint('group word:', match.group('word'))   # \u53ef\u4ee5\u7528 match.group('word') \u5f97\u5230\u6240\u5339\u914d\u7684\u547d\u540d\u5206\u7ec4\nprint(match.group())\n</code></pre>"},{"location":"code/Python/Python-note/#_38","title":"\u5206\u7ec4/\u5b50\u6a21\u5f0f\u6269\u5c55\u8bed\u6cd5","text":""},{"location":"code/Python/Python-note/#-_5","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26-\u9009\u62e9\u7b26","text":"<ul> <li><code>pattern1|pattern2|pattern3</code></li> <li>\u9009\u62e9\u7b26\u201d|\u201d\uff0c\u7528\u4e8e\u9009\u62e9\u5339\u914d\u591a\u4e2a\u53ef\u80fd\u7684\u5b50\u6a21\u5f0f\uff08\u6ce8\u610f\u4e0d\u4e00\u5b9a\u662f\u5355\u4e2a\u5b57\u7b26\uff09\u4e2d\u7684\u4e00\u4e2a</li> <li>\u9009\u62e9\u7b26\u201d|\u201d\u7684\u4f18\u5148\u7ea7\u6700\u4f4e\uff08\u6700\u540e\u8ba1\u7b97\uff09\uff0c\u5982\u9700\u8981\u53ef\u4f7f\u7528( )\u6765\u9650\u5236\u9009\u62e9\u7b26\u7684\u4f5c\u7528\u8303\u56f4 (pattern1|pattern2|pattern3)</li> </ul>"},{"location":"code/Python/Python-note/#re_1","title":"re\u6a21\u5757\u4e3b\u8981\u65b9\u6cd5","text":""},{"location":"code/Python/Python-note/#sub","title":"sub","text":"<ul> <li><code>re.sub(pattern, replace, string[, count=0])</code></li> <li>\u5c06\u5b57\u7b26\u4e32string\u4e2d\u4e0epattern\u5339\u914d\u7684\u5185\u5bb9\u7528replace\u66ff\u6362\uff0c\u8fd4\u56de\u65b0\u7684\u5b57\u7b26\u4e32\u3002count\u8868\u793a\u6700\u591a\u66ff\u6362\u591a\u5c11\u6b21\uff0c\u7f3a\u7701\u4e3a0\uff0c\u8868\u793a\u5168\u90e8\u66ff\u6362\u3002\u66ff\u6362\u5b57\u7b26\u4e32replace\u53ef\u4ee5\u5305\u542b\u5206\u7ec4\u5f15\u7528 \\N(\u4e0d\u652f\u6301\u5206\u7ec40\uff09\uff0c\u8868\u793a\u7b2cN\u4e2a\u5206\u7ec4\u5339\u914d\u7684\u5185\u5bb9</li> <li>re.subn(pattern, replace, string[, count=0]) \u4e0esub\u7c7b\u4f3c\uff0c\u53ea\u662f\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e3a\u66ff\u6362\u540e\u4ea7\u751f\u7684\u65b0\u5b57\u7b26\u4e32\uff0c\u800c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u4e3a\u603b\u5171\u66ff\u6362\u7684\u6b21\u6570</li> <li><code>reobj.sub(replace, string [, count=0])</code></li> <li>\u3010\u8865\u5145\u3011\u53c2\u6570 replace<ul> <li>\u53c2\u6570replace\u4f20\u9012\u7684\u4e3a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u66ff\u6362\u6210replace\uff0c\u5728replace\u4e2d\u53ef\u5305\u542b\u5206\u7ec4\u5f15\u7528\\N</li> <li>\u53c2\u6570replace\u4e5f\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u8be5\u51fd\u6570\u7684\u53c2\u6570\u4e3apattern\u6240\u5339\u914d\u7684match\u5bf9\u8c61\u3002\u8868\u793a\u66ff\u6362\u4e3a\u8c03\u7528replace(matchobj)\u6240\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u3010\u4e0b\u9762\u7ed9\u4e86\u4e00\u4e2a\u5f88\u50bb\u7684\u4f8b\u5b50\uff0c\u5b9a\u4e49\u4e86\u51fd\u6570 repl_func(match) \u8981\u5c06\u4e00\u4e2a\u6bd4\u8f83\u8bed\u53e5\u7528\u76f8\u53cd\u7684\u5f62\u5f0f\u8868\u8fbe\u51fa\u6765\u3002\u3011</li> </ul> </li> </ul> <pre><code>def re_sub_func():\n    text = 'Banana is better than apple'\n    pattern = r'\\b([BC]\\w*)\\b\\s+is\\s+(better|worse)\\s+than\\s+(\\w+)\\b'\n    # B\u6216C\u5f00\u5934\u7684\u5355\u8bcd \u4e00\u4e2a\u4ee5\u4e0a\u7a7a\u683c is \u7a7a\u683c better\u6216worse \u7a7a\u683c than \u7a7a\u683c \u5355\u8bcd\n    def repl_func(match):\n        first = match.group(1)\n        last = match.group(3)\n        return '%s is %s than %s' % (last.capitalize(), 'worse' if match.group(2) == 'better' else 'better', first.lower())\n    text_ = re.sub(pattern, repl_func, text)\n    print()\n    print(text_)\n</code></pre>"},{"location":"code/Python/Python-note/#split","title":"split","text":"<ul> <li><code>re.split(pattern, string[,maxsplit=0])</code></li> <li><code>reobj.split(string[, maxpslit=0])</code></li> <li>\u6839\u636epattern\u5206\u5272\u5b57\u7b26\u4e32string\uff0c\u8fd4\u56de\u5206\u5272\u540e\u7684\u5b57\u7b26\u4e32\u5217\u8868\uff0cmaxsplit\u4e3a\u5206\u5272\u7684\u6700\u5927\u6b21\u6570\uff0c\u7f3a\u7701\u4e3a\u5c3d\u6700\u5927\u53ef\u80fd\u5206\u5272<ul> <li>\u3010\u4e0d\u6307\u5b9a pattern \u5c31\u662f\u9ed8\u8ba4\u7528\u7a7a\u767d\u5b57\u7b26\u5206\u5272\uff0c\u8fd8\u4f1a\u53bb\u9664\u524d\u540e\u7684\u7a7a\u767d\u5b57\u7b26\uff0c\u89c1\u4e0b\u4f8b\u3011</li> </ul> </li> <li>\u62d3\u5c55\uff1a\u5982\u679cpattern\u4e2d\u5305\u542b\u6355\u83b7\u5b50\u6a21\u5f0f\uff0c\u5219\u4f5c\u4e3a\u5206\u9694\u7b26\u7684\u5176\u4e2d\u6240\u6709\u5b50\u6a21\u5f0f\u7684\u5185\u5bb9\u4e5f\u5728\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u5217\u8868\u4e2d \u2192 \u901a\u8fc7(?:\u2026)\u8868\u793a\u4e0d\u8981\u6355\u83b7\u8be5\u5b50\u6a21\u5f0f</li> </ul> <pre><code># \u4f8b\u5b50\uff0c\u53bb\u9664\u5b57\u7b26\u4e32\u4e2d\u591a\u4e8e\u7684\u7a7a\u767d\u5b57\u7b26\ntext = 'aaa\\t bb \\n c dd ffff   '\n\nprint(' '.join(text.split()))   # str\u7684split\u65b9\u6cd5\u7528\u7a7a\u683c\u7c7b\u5b57\u7b26\u5206\u5272\u5b57\u7b26\u4e32\nprint(' '.join(re.split('\\s+',text.strip())))\nprint(re.sub('\\s+', ' ', text.strip()))\n</code></pre>"},{"location":"code/Python/Python-note/#_39","title":"\u5b9e\u4f8b","text":"<p>\u3010\u4e0b\u9762\u662f\u51e0\u4e2a\u4f5c\u4e1a\u9898\u3011</p> <ul> <li>\u9a8c\u8bc1\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u4e00\u6709\u6548\u7535\u5b50\u90ae\u4ef6\u683c\u5f0f</li> <li>\u4ece\u8f93\u5165\u5b57\u7b26\u4e32\u4e2d\u6e05\u9664HTML\u6807\u8bb0</li> </ul> <pre><code># \u9a8c\u8bc1\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u4e00\u6709\u6548\u7535\u5b50\u90ae\u4ef6\u683c\u5f0f\nmail = 'cs@fudan.edu.cn'\npattern = re.compile(r'(?P&lt;name&gt;\\w+)@(?P&lt;url&gt;(?:\\w+\\.){1,2}\\w+)')  # \u5339\u914d\u57df\u540d\u957f\u5ea6\u4e3a 2-3\n# \u53ef\u7528\u4e24\u4e2a\u547d\u540d\u5206\u7ec4\nmatch = re.match(pattern, mail.strip())\nprint(match['name'], match['url'])\n\n# \u4ece\u8f93\u5165\u5b57\u7b26\u4e32\u4e2d\u6e05\u9664HTML\u6807\u8bb0\ntxt = '&lt;a href=\"index.htm\"&gt;Welcome to Fudan University!&lt;/a&gt;'\nre.sub(r'&lt;.+?&gt;', '', txt)\n</code></pre>"},{"location":"code/Python/Python-note/#_40","title":"\u51fd\u6570","text":"<ul> <li>\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u51fd\u6570<ul> <li>\u63a5\u6536\u76f8\u5e94\u7684\u53c2\u6570\uff0c\u901a\u8fc7\u6267\u884c\u4e00\u7cfb\u5217\u7684\u8bed\u53e5\u6765\u5b8c\u6210\u76f8\u5e94\u7684\u529f\u80fd\uff0c\u6700\u540e\u518d\u8fd4\u56de\u7ed3\u679c</li> <li>\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u6709\u8bb8\u591a\u64cd\u4f5c\u662f\u5b8c\u5168\u76f8\u540c\u6216\u975e\u5e38\u76f8\u4f3c\u7684\uff0c\u4ec5\u4ec5\u662f\u8981\u5904\u7406\u7684\u6570\u636e\u4e0d\u540c</li> <li>\u901a\u8fc7\u5c06\u53ef\u80fd\u9700\u8981\u53cd\u590d\u6267\u884c\u7684\u4ee3\u7801\u5c01\u88c5\u4e3a\u51fd\u6570\uff0c\u5b9e\u73b0\u4ee3\u7801\u7684\u590d\u7528\uff0c\u4fdd\u8bc1\u4ee3\u7801\u7684\u4e00\u81f4\u6027</li> <li>\u6bcf\u4e2a\u51fd\u6570\u89e3\u51b3\u4e00\u4e2a\u76f8\u5bf9\u72ec\u7acb\u7684\u95ee\u9898\uff0c\u4e0d\u8981\u592a\u590d\u6742</li> <li>\u5c3d\u91cf\u51cf\u5c11\u5168\u5c40\u53d8\u91cf\u7684\u4f7f\u7528\uff0c\u901a\u8fc7\u53c2\u6570\u4f20\u9012\u4f53\u73b0\u8c03\u7528\u8005\u548c\u51fd\u6570\u5b9e\u73b0\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u51cf\u5c11\u526f\u4f5c\u7528</li> </ul> </li> </ul>"},{"location":"code/Python/Python-note/#_41","title":"\u51fd\u6570\u53c2\u6570\u7c7b\u578b","text":"<ul> <li>Python\u51fd\u6570\u7684\u5b9a\u4e49\u975e\u5e38\u7075\u6d3b\uff0c\u5728\u5b9a\u4e49\u51fd\u6570\u65f6\u53ea\u9700\u8981\u6307\u5b9a\u53c2\u6570\u7684\u540d\u5b57\uff0c\u800c\u4e0d\u9700\u8981\u6307\u5b9a\u53c2\u6570\u7684\u7c7b\u578b</li> <li>\u5f62\u53c2\u7684\u7c7b\u578b\u5b8c\u5168\u7531\u8c03\u7528\u8005\u4f20\u9012\u7684\u5b9e\u53c2\u7c7b\u578b\u4ee5\u53caPython\u89e3\u91ca\u5668\u7684\u7406\u89e3\u548c\u63a8\u65ad\u6765\u51b3\u5b9a\uff0c\u7c7b\u4f3c\u4e8e\u91cd\u8f7d\u548c\u6cdb\u578b(polymorphism)</li> <li>\u51fd\u6570\u7f16\u5199\u5982\u679c\u6709\u95ee\u9898\uff0c\u53ea\u6709\u5728\u8c03\u7528\u65f6\u624d\u80fd\u88ab\u53d1\u73b0\uff0c\u4f20\u9012\u67d0\u4e9b\u53c2\u6570\u65f6\u53ef\u80fd\u6267\u884c\u6b63\u786e\uff0c\u800c\u4f20\u9012\u53e6 \u4e00\u4e9b\u7c7b\u578b\u7684\u53c2\u6570\u65f6\u53ef\u80fd\u51fa\u73b0\u9519\u8bef</li> <li>type hint: \u7ed9\u53d8\u91cf\u3001\u53c2\u6570\u548c\u8fd4\u56de\u503c\u52a0\u4e0aannotations\uff0c\u96c6\u6210\u5f00\u53d1\u73af\u5883\u53ef\u68c0\u67e5\u8c03\u7528\u548c\u6267\u884c\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u7c7b\u578b\u9519\u8bef\u3010\u5982\u4e0b\u4f8b\u3011</li> </ul> <pre><code>def func(text: str, times: int) -&gt; None:\n    print(text * times)\n    return None\n</code></pre> <ul> <li>\u51fd\u6570\u5b9a\u4e49\u4e2d\u7684\u5f62\u53c2\u987a\u5e8f<ul> <li>\u4f4d\u7f6e\u53c2\u6570 - \u7f3a\u7701\u503c\u53c2\u6570 - \u53ef\u53d8\u957f\u5ea6\u4f4d\u7f6e\u53c2\u6570 - \u4ec5\u5141\u8bb8\u5173\u952e\u5b57\u4f20\u9012\u53c2\u6570\uff08\u53ef\u5b9a\u4e49\u7f3a\u7701\u503c\uff0c\u4e5f\u53ef\u4e0d\u5b9a\u4e49\uff09 - \u53ef\u53d8\u957f\u5ea6\u5173\u952e\u5b57\u53c2\u6570</li> </ul> </li> <li>\u51fd\u6570\u8c03\u7528\u4e2d\u7684\u5b9e\u53c2\u987a\u5e8f: \u4f4d\u7f6e\u53c2\u6570 \u2192 \u5173\u952e\u5b57\u53c2\u6570</li> <li>\u3010\u4f8b\u3011_trace\u51fd\u6570: \u8ddf\u8e2a\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u51fd\u6570\u7684\u8c03\u7528\uff0c\u5229\u7528\u51fd\u6570\u5bf9\u8c61\u7684\u5c5e\u6027(\u8fd9 \u91cc\u4f7f\u7528calls)\u6765\u4fdd\u5b58\u51fd\u6570\u8c03\u7528\u7684\u72b6\u6001\u4fe1\u606f(\u8c03\u7528\u4e86\u591a\u5c11\u6b21)\u3002\u6ce8\u610f\u5185\u7f6e\u51fd\u6570\u4e0d\u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027</li> </ul> <pre><code>def _trace(func,*args,**kwargs):\n    if hasattr(func, 'calls'):  #\u5bf9\u8c61func\u662f\u5426\u6709\u5c5e\u6027calls\u5b58\u5728\n        func.calls += 1\n    else:\n        func.calls = 1\n    if not kwargs:\n        txt = '[%d] calling function: %s(%s)'% (func.calls, func.__name__,\n                                                ','.join([str(item) for item in args]))\n    else:\n        kws = ','.join(['{}={}'.format(key, str(value)) for key, value in kwargs.items()])\n        _args = ','.join([str(i) for i in args])\n        txt = '[{}] calling function: {}({}, {})'.format(func.calls, func.__name__, _args , kws)\n    print(txt)\n    return func(*args,**kwargs) # \u51fd\u6570\u8c03\u7528\u65f6\u7684\u5e8f\u5217\u89e3\u5305\n\ndef demo(a,b=4,*x, **y):\n    print(a, b, x, y)\n\n_trace(demo, 1)\n_trace(demo, 1, 2)\n_trace(demo, 1, 2, 3, 4, c=9, d=8)\n</code></pre>"},{"location":"code/Python/Python-note/#_42","title":"\u6848\u4f8b","text":"<ul> <li>\u7f16\u5199\u51fd\u6570, \u63a5\u6536\u4e00\u4e2a\u5217\u8868lst\u548c\u4e00\u4e2a\u6574\u6570k\u4f5c\u4e3a\u53c2\u6570, \u5c06lst\u4e2d\u5143\u7d20\u539f\u5730\u5faa\u73af\u5de6\u79fbk\u4f4d, \u79fb\u51fa\u7684\u5143\u7d20\u8f6c \u79fb\u5230lst\u540e\u90e8. \u8981\u6c42: \u4e0d\u5f97\u4f7f\u7528\u5176\u5b83\u5217\u8868\u4fdd\u5b58\u4e2d\u95f4\u503c.</li> </ul> <pre><code># \u7f16\u5199\u51fd\u6570, \u63a5\u6536\u4e00\u4e2a\u5217\u8868lst\u548c\u4e00\u4e2a\u6574\u6570k\u4f5c\u4e3a\u53c2\u6570, \u5c06lst\u4e2d\u5143\u7d20\u539f\u5730\u5faa\u73af\u5de6\u79fbk\u4f4d, \u79fb\u51fa\u7684\u5143\u7d20\u8f6c \u79fb\u5230lst\u540e\u90e8. \u8981\u6c42: \u4e0d\u5f97\u4f7f\u7528\u5176\u5b83\u5217\u8868\u4fdd\u5b58\u4e2d\u95f4\u503c.\n# \u7b97\u6cd5\u601d\u8def: \u5c06lst\u4e2d\u4e0b\u6807k\u4e4b\u524d\uff08\u4e0d\u5305\u62ec\uff09\u7684\u5143\u7d20\u9006\u5e8f, \u4e0b\u6807k\u53ca\u5176\u540e\u7684\u5143\u7d20\u9006\u5e8f, \u6700\u540e\u5c06\u6574\u4e2a\u5217\u8868\u9006\u5e8f\ndef demo4(lst, k):\n    x = lst[:k]\n    x.reverse()\n    y = lst[k:]\n    y.reverse()\n    r = x + y\n    r.reverse()\n    return r\n\ndef demo4_2(lst, k):\n    \"\"\"\u539f\u5730\u4fee\u6539\"\"\"\n    lst[:k] = reversed(lst[:k])\n    # lst[:k] = lst[k-1::-1] \u4e5f\u53ef\u4ee5\n    lst[k:] = reversed(lst[k:])\n    lst.reverse()\n</code></pre>"},{"location":"code/Python/Python-note/#map","title":"map","text":"<ul> <li>\u5185\u7f6e\u51fd\u6570map\u5c06\u4e00\u4e2a\u51fd\u6570\u4f5c\u7528\u5230\u4e00\u4e2a\u5e8f\u5217\u6216\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e0a</li> <li>map(func, iterable) : \u8fd4\u56de\u4e00\u4e2amap\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5176\u6bcf\u4e2a\u5143\u7d20\u4e3a\u5bf9iterable \u5bf9\u8c61\u7684\u5143\u7d20\u8c03\u7528\u76f8\u5e94\u51fd\u6570func\u7684\u7ed3\u679c\uff0c\u5373\u6bcf\u4e2a\u5143\u7d20\u4e3afunc(element)</li> <li>\u7b49\u4ef7\u4e8e <code>(func(i) for i in iterable)</code></li> <li>\u5728Python\u8bed\u8a00\u7684\u53d1\u5c55\u8fc7\u7a0b\u4e2d\uff0c\u662f\u9996\u5148\u6709map/filter\u8fd9\u4e9b\u5185\u7f6e\u51fd\u6570\uff0c\u540e\u6765\u5f15 \u5165\u5217\u8868\u63a8\u5bfc\u5f0f</li> <li>map\u548cfilter\u7684\u529f\u80fd\u4e5f\u53ef\u7528</li> </ul>"},{"location":"code/Python/Python-note/#filter","title":"filter","text":"<ul> <li>\u5185\u7f6e\u51fd\u6570filter\u5c06\u4e00\u4e2a\u51fd\u6570\u4f5c\u7528\u5230\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e0a</li> <li>filter(func, iterable) : \u8fd4\u56de\u4e00\u4e2afilter\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0citeralbe\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\u8c03\u7528func\uff0c\u5982\u679cfunc(element)\u8fd4\u56deTrue\uff0c\u5219\u8be5\u5143\u7d20\u4f5c\u4e3afilter\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u3002\u5982\u679cfilter\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3aNone\uff0c\u5219iterable\u5bf9\u8c61\u7684\u5143\u7d20\u771f\u503c\u5224\u65ad\u4e3aTrue\u65f6\u4f5c\u4e3afilter\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20</li> <li><code>filter(None, iterable)</code> None \u8868\u793a\u5224\u65ad\u5143\u7d20\u662f\u5426\u975e\u7a7a\uff0c\u7b49\u4ef7\u4e8e <code>filter(lambda x: x, iterable</code>\uff0c\u4e5f\u7b49\u4ef7\u4e8e (i for i in iterable if i)</li> <li><code>filter(func, iterable)</code> \u6839\u636e\u51fd\u6570\u8fd4\u56de\u503c\u8fdb\u884c filter\uff0c\u7b49\u4ef7\u4e8e (i for i in iterable if func(i))</li> </ul> <pre><code>s = 1, 2, '', 0, -1, []\nlist(filter(None, seq))\n\ns = ['foo', 'x41', '?!', '***']\nlist(filter(lambda x:x.isalnum(), s))\n[x for x in s if x.isalnum()]   # \u7b49\u4ef7\n</code></pre>"},{"location":"code/Python/Python-note/#functoolsreducefunc-iterable","title":"functools.reduce(func, iterable)","text":"<ul> <li>\u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u6240\u6709\u5143\u7d20\u8fdb\u884c\u5f52\u7ea6\uff0c\u5c06\u5b83\u4eec\u5f52\u5e76\u5728\u4e00\u8d77</li> <li>func\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u524d\u9762\u89c4\u7ea6\u7684\u7ed3\u679c\uff08\u521d\u59cb\u4e3a\u7b2c\u4e00\u4e2a\u5143\u7d20\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5f53\u524d\u5143\u7d20\uff0c\u8fd4\u56de\u5c06\u5f53\u524d\u5143\u7d20\u5f52\u7ea6\u540e\u7684\u7ed3\u679c</li> <li>\u521d\u59cb\u5f52\u7ea6\u7ed3\u679c\u4e3a\u7b2c1\u4e2a\u5143\u7d20\uff0c\u4ece\u7b2c2\u4e2a\u5143\u7d20\u5f00\u59cb\u8c03\u7528func(sum,element)\uff0c\u76f4\u5230\u6700\u540e\u4e00\u4e2a\u5143\u7d20</li> </ul> <pre><code>from functools import reduce\n\nseq=[1, 2, 3, 4, 5, 6, 7, 8, 9]\ndef add(x, y):\n    return x + y\nreduce(add, range(10))\nreduce(add, map(str, range(10)))\nreduce(lambda x,y:x + y, seq)\n</code></pre>"},{"location":"code/Python/Python-note/#yield","title":"\u751f\u6210\u5668\u51fd\u6570 yield","text":"<ul> <li>\u7b2c\u4e8c\u7ae0\u4ecb\u7ecd\u4e86\u751f\u6210\u5668\u8868\u8fbe\u5f0f\uff0c\u8fd0\u7b97\u7ed3\u679c\u4e3a\u751f\u6210\u5668\u5bf9\u8c61\uff1a ( x ** 2 for x in range(10))<ul> <li>\u4e0d\u662f\u4e00\u6b21\u8fd4\u56de\u5168\u90e8\u6570\u636e\uff0c\u800c\u662f\u4e00\u4e2aiterator\u5bf9\u8c61\uff0c\u901a\u8fc7next\u5185\u7f6e\u51fd\u6570\u83b7\u5f97\u4e0b\u4e00\u4e2a\u5143\u7d20</li> </ul> </li> <li>\u751f\u6210\u5668\u51fd\u6570\u53ef\u521b\u5efa\u751f\u6210\u5668\u5bf9\u8c61<ul> <li>\u751f\u6210\u5668\u51fd\u6570\u662f\u51fd\u6570\u7684\u4e00\u79cd\uff0c\u666e\u901a\u51fd\u6570\u539f\u6765\u901a\u8fc7return\u8bed\u53e5\u8fd4\u56de\u503c\uff0c\u73b0\u5728\u901a\u8fc7yield expression\u8bed\u53e5\u8fd4\u56de\u503c</li> <li>\u8c03\u7528\u751f\u6210\u5668\u51fd\u6570\u7684\u7ed3\u679c\u662f\u5f97\u5230\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61\uff0c\u8c03\u7528next\u65f6\u5f97\u5230\u4e00\u4e2a\u5143\u7d20</li> <li>\u6bcf\u6b21\u8c03\u7528next\u65f6\u76f8\u5f53\u4e8e\uff1a<ul> <li>\u6267\u884c\u751f\u6210\u5668\u51fd\u6570\u4e2d\u7ed9\u51fa\u7684\u4ee3\u7801\u76f4\u5230\u9047\u5230yield\u8bed\u53e5\u6216 \u8005\u4ece\u751f\u6210\u5668\u51fd\u6570\u4e2d\u8fd4\u56de</li> <li>\u5982\u679c\u9047\u5230yield\u8bed\u53e5\uff0c\u6682\u505c\u751f\u6210\u5668\u51fd\u6570\u7684\u6267\u884c\uff0c\u5e76\u8fd4 \u56deyield\u8bed\u53e5\u6240\u7ed9\u51fa\u7684\u8868\u8fbe\u5f0f</li> <li>\u4e0b\u6b21next\u8c03\u7528\u65f6\u4ece\u6682\u505c\u7684\u5730\u65b9\u6062\u590d\u7ee7\u7eed\u6267\u884c</li> <li>\u8bed\u53e5\u6267\u884c\u5230\u4ece\u751f\u6210\u5668\u51fd\u6570\u4e2d\u8fd4\u56de\uff0c\u5219\u629b\u51fa\u5f02\u5e38 <code>StopIteration</code></li> </ul> </li> </ul> </li> <li>yield from iterable: \u8c03\u7528next\u65f6\u8fd4 \u56de\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\u3010\u89c1\u4e0b\u4f8b\u3011</li> <li>itertools\u6a21\u5757\u4e2d\u5305\u542b\u4e86\u591a\u4e2a\u8fed\u4ee3\u5668\uff0c \u5305\u62eccount/cycle/repeat/chain\u7b49</li> </ul> <pre><code>def f():\n    # for i in 'welcome to the python world.':\n    #     yield i\n    txt = 'welcome to the python world.'\n    yield from txt\n\nprint(list(f()))\n</code></pre> <ul> <li>\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e2a\u7ecf\u5178\u7684\u4f8b\u5b50\uff1a\u751f\u6210 Fibonacci \u6570\u5217</li> </ul> <pre><code>def fib(n):\n    \"\"\"\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8e n \u7684\u6590\u6ce2\u90a3\u5951\u6570\"\"\"\n    prev, curr = 1, 1\n    while prev &lt; n:\n        # print(prev, end=' ')\n        prev, curr = curr, prev + curr\n        # print()\n    return prev\n\ndef fib2():\n    \"\"\"\u751f\u6210\u5668\u51fd\u6570\uff1a\u8fd4\u56de\u4e00\u4e2a\u751f\u6210\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u751f\u6210\u5668\"\"\"\n    prev, curr = 1, 1\n    while True:\n        yield prev\n        prev, curr = curr, prev + curr\n\n# \u5f97\u5230\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u5927\u4e8e 10 \u7684\u90a3\u4e2a\u6570\nprint(fib(10))  # \u7528\u7b2c\u4e00\u79cd\u65b9\u5f0f\n# \u7528\u751f\u6210\u5668\u51fd\u6570\u7684\u65b9\u5f0f\nf = fib2()\ni = next(f)\nwhile i &lt; 10:\n    i = next(f)\nprint(i)\n\n\n# \u8fd4\u56de\u524d10\u4e2a\u6570\uff1a 1 1 2 3 5 8 13 21 34 55\na = fib2()\nfor i in range(10):\n    print(next(a), end=' ')\nprint()\n\n# \u8fd4\u56de1000\u4ee5\u5185\u7684fibonacci\u6570\ncount = 0\nfor i in fib2():\n    if i &gt; 1000:\n        break\n    print(i, end='\\t')\n    count += 1\n    if count % 5 == 0:\n        print()\n</code></pre>"},{"location":"code/Python/Python-note/#decorator","title":"\u88c5\u9970\u5668(decorator)","text":"<ul> <li>\u88c5\u9970\u5668\u4e3a\u88ab\u88c5\u9970\u5668\u5bf9\u8c61\u6dfb\u52a0\u989d\u5916\u529f\u80fd</li> <li>\u5728\u51fd\u6570\u5b9a\u4e49\u884c\u524d\u9762\u901a\u8fc7@before\uff0c\u7ed9\u51fd\u6570\u6dfb\u52a0\u88c5\u9970\u5668before\uff0c\u7b49\u4ef7\u4e8e\uff1a<code>func = before(func)</code></li> <li>\u4f7f\u7528\u88c5\u9970\u5668\u540e\u4e00\u822c\u5e76\u4e0d\u9700\u8981\u6539\u53d8\u539f\u6765\u8c03\u7528\u8be5\u51fd\u6570\u7684\u4ee3\u7801</li> </ul> <pre><code>def before(func):\n    def wrapper_before(*args, **kwargs):\n        print('calling %s' % func.__name__)\n        return func(*args, **kwargs)\n    # print('Clousure: ', wrapper_before.__closure__)\n    return wrapper_before\n\n@before\ndef f(x, y, z):\n    print(x, y, z)\n\nf(1, 2, z=4)\n</code></pre>"},{"location":"code/Python/Python-note/#_43","title":"\u5e38\u7528\u6a21\u5757","text":""},{"location":"code/Python/Python-note/#string","title":"string","text":""},{"location":"code/Python/Python-note/#random","title":"random","text":""},{"location":"code/Python/Python-note/#sys","title":"sys","text":"<ul> <li>argv \u8be5\u5217\u8868\u4fdd\u5b58\u4e86\u4f20\u9012\u7ed9\u89e3\u91ca\u5668\u7684\u547d \u4ee4\u884c\u53c2\u6570, argv[0]\u4e3a\u811a\u672c\u540d\u3002\u5e38\u4f7f \u7528<code>argparse</code>\u6a21\u5757\u5206\u6790</li> <li>exit([status]) \u9000\u51fa\u89e3\u91ca\u5668\uff0cstatus\u7ed9\u51fa\u4e86\u7a0b\u5e8f\u6267\u884c\u662f\u5426\u6210\u529f</li> <li>\u4e0b\u9762\u7b80\u5355\u7528 sys \u6a21\u5757\uff0c\u5b9e\u73b0\u5728\u547d\u4ee4\u884c\u4e2d\u5224\u65ad\u662f\u5426\u4e3a debug \u6a21\u5f0f</li> </ul> <pre><code>import sys\nargs = sys.argv[1:]     # \u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570\uff0csys.argv \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u811a\u672c\u6587\u4ef6\u540d\ndebug = args and args[0] == '-d'\nif debug:\n    args = args[1:]     # \u83b7\u53d6 -d \u6a21\u5f0f\u4e0b\u7684\u53c2\u6570\n    print('[Debuging]...')\n    print(args)\n</code></pre>"},{"location":"code/Python/Python-note/#time","title":"time","text":""},{"location":"code/Python/Python-note/#datetime","title":"datetime","text":""},{"location":"code/Python/Python-note/#collections","title":"collections","text":"<p>\u3010collections\u5f15\u5165\u4e86\u66f4\u591a\u7684\u7c7b\u578b\u6765\u652f\u6301\u66f4\u591a\u7684\u6570\u636e\u7ed3\u6784\u3011</p> <ul> <li>defaultdict \u7279\u6b8a\u7684\u5b57\u5178\uff0c\u5728\u6ca1\u6709\u6307\u5b9avalue\u65f6\u91c7\u7528\u7f3a\u7701\u503cfactory()</li> <li>OrderedDict \u6709\u5e8f\u7684\u5b57\u5178\uff0c\u4fdd\u7559\u5143\u7d20\u63d2\u5165\u7684\u987a\u5e8f</li> <li>Counter \u4fdd\u5b58\u5bf9\u8c61\u51fa\u73b0\u6b21\u6570\u7684\u5b57\u5178</li> <li>ChainMap \u7528\u4e8e\u5c06\u591a\u4e2a\u5b57\u5178\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u63d0\u4f9b\u7c7b\u4f3c\u4e8e\u5b57\u5178\u7684\u63a5\u53e3</li> <li>UserDict \u5c01\u88c5\u4e86\u4e00\u4e2a\u5b57\u5178\u5bf9\u8c61\uff0c\u4fbf\u4e8e\u6269\u5145\u7f16\u5199\u81ea\u5df1\u5b9a\u5236\u7684\u5b57\u5178</li> <li>deque \u53cc\u5411\u961f\u5217\uff0c\u63d0\u4f9b\u7c7b\u4f3c\u4e8e\u5217\u8868\u7684\u63a5\u53e3\uff0c\u5728\u961f\u5217\u5934\u548c\u5c3e\u90e8\u589e\u52a0\u548c\u5220\u9664\u5143\u7d20\u65f6\u975e\u5e38\u5feb</li> <li>UserList \u5c01\u88c5\u4e86\u4e00\u4e2a\u5217\u8868\u5bf9\u8c61\uff0c\u4fbf\u4e8e\u6269\u5145\u7f16\u5199\u81ea\u5df1\u5b9a\u5236\u7684\u5217\u8868</li> <li>UserString \u5c01\u88c5\u4e86\u4e00\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u4fbf\u4e8e\u6269\u5145\u7f16\u5199\u81ea\u5df1\u5b9a\u5236\u7684\u5b57\u7b26\u4e32</li> <li>namedtuple \u7279\u6b8a\u7684\u5143\u7ec4\uff0c\u53ef\u4ee5\u901a\u8fc7\u540d\u5b57\u6765\u8bbf\u95ee\u5143\u7ec4\u4e2d\u7684\u5143\u7d20</li> </ul>"},{"location":"code/Python/Python-note/#collectionsdefaultdict","title":"collections.defaultdict","text":"<pre><code>from collections import defaultdict\nd5 = defaultdict(list) #\u521b\u5efa\u4e00\u4e2a\u7a7a\u5b57\u5178\uff0c\u503c\u7684\u7f3a\u7701\u503c\u4e3a list()\uff0c\u5373\u7a7a\u5217\u8868\nd5['tony'].append(98)\n</code></pre>"},{"location":"code/Python/Python-note/#collectionsordereddict","title":"collections.OrderedDict","text":"<ul> <li>\u4ece\u8bed\u8a00\u7684\u89d2\u5ea6\uff0cPython\u5185\u7f6e\u5b57\u5178\u5bf9\u4e8e\u5e94\u7528\u6765\u8bf4\u662f\u65e0\u5e8f\u7684<ul> <li>Python3.6\u4ee5\u524d\u7684\u7248\u672c\u4e0d\u4fdd\u7559\u63d2\u5165\u7684\u987a\u5e8f</li> <li>Python3.6\u7684\u5b9e\u73b0\u4e2d\u4fdd\u7559\u63d2\u5165\u7684\u987a\u5e8f</li> <li>python3.7\u4e2d\u786e\u8ba4python\u8bed\u8a00\u4e2d\u5b57\u5178\u4fdd\u7559\u63d2\u5165\u7684\u987a\u5e8f</li> </ul> </li> <li>\u5982\u679c\u8981\u6c42\u4fdd\u7559\u63d2\u5165\u987a\u5e8f\uff0c\u5e94\u8be5\u91c7\u7528collections.OrderedDict\uff0cdict\u7684\u6240\u6709\u65b9 \u6cd5\u90fd\u53ef\u4ee5\u4f7f\u7528</li> </ul>"},{"location":"code/Python/Python-note/#collectionscounter","title":"collections.Counter","text":"<ul> <li>\u4e00\u79cd\u7279\u6b8a\u7684\u5b57\u5178\uff0c\u5728\u4f20\u9012\u975emap\u7c7b\u578b\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\u65f6\uff0c\u6709\u7279\u522b\u7684\u5904\u7406\uff0c\u4fdd\u5b58\u4e86\u5404\u4e2a\u5143\u7d20\u51fa\u73b0\u7684\u6b21\u6570</li> <li>\u5728\u8c03\u7528\u6784\u9020\u51fd\u6570\u521b\u5efaCounter\u5bf9\u8c61\u65f6:<ul> <li>\u5982\u679c\u4f20\u9012\u7684\u4e3amap\u7c7b\u578b\uff0c\u5219\u76f8\u5f53\u4e8e\u539f\u6709map\u7c7b\u578b\u7684shallow copy</li> <li>\u5982\u679c\u901a\u8fc7\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\uff0c\u4e0e\u539f\u6709dict\u7c7b\u578b\u7c7b\u4f3c\uff0c\u7b49\u540c\u4e8e\u6784\u9020\u4e00\u4e2a\u5b57\u5178</li> <li>\u5982\u679c\u4f20\u9012\u7684\u4e3a\u975emap\u7c7b\u578b\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5219\u521b\u5efa\u7684Counter\u5bf9\u8c61\u4e2d\uff0ckey\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5143\u7d20\uff0c \u800cvalue\u4e3a\u8be5key\u5728\u539f\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u51fa\u73b0\u7684\u6b21\u6570 \u5373<code>iterable.count(key)</code></li> </ul> </li> <li>Counter\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5b57\u5178\uff0c\u6240\u4ee5\u539f\u6709\u5b57\u5178\u4e2d\u7684\u65b9\u6cd5(get,setdefault, k pop,popitem)\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u53ea\u662fCounter\u5bf9\u4e8eupdate\u65b9\u6cd5\u6709\u4e86\u6539\u53d8\uff0c\u53e6\u5916\u8fd8\u589e\u52a0\u4e00\u4e9b\u65b0\u7684\u65b9\u6cd5\uff0c\u4e5f \u652f\u6301 + - \u8fd0\u7b97\u7b26</li> <li><code>update(another)</code>\u65b9\u6cd5\u4e0d\u662f\u66ff\u4ee3\u539f\u6709\u7684key:value\uff0c\u800c\u662f \u5728\u539f\u6709\u7684value\u57fa\u7840\u4e0a\u52a0\u4e0aanother\u4e2d\u76f8\u5e94\u5143\u7d20\u51fa\u73b0\u7684 \u6b21\u6570</li> <li>\u5f15\u5165<code>subtract(another)</code>\uff1a\u5f53\u524d\u8ba1\u6570\u5668\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u51fa \u73b0\u7684\u6b21\u6570\u51cf\u53bbanother\u5bf9\u8c61\u4e2d\u5143\u7d20\u51fa\u73b0\u7684\u6b21\u6570</li> <li>\u8fd8\u652f\u6301\u4e0e\u53e6\u5916\u4e00\u4e2aCounter\u5bf9\u8c61\u7684\u52a0\u51cf\u6cd5\u8fd0\u7b97\uff0c\u5305\u62ec += -= + - \u8fd0\u7b97\u7b26</li> <li><code>elements()</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5176\u5143\u7d20\u4e3aCounter\u4e2d\u7684 key\uff0c\u5982\u679c\u8be5key\u5bf9\u5e94\u7684\u503c\u5927\u4e8e1\uff0c\u5219key\u4f1a\u91cd\u590d\u51fa\u73b0\u76f8 \u5e94\u7684\u6b21\u6570</li> <li><code>most_common(n=None)</code> : \u8fd4\u56de\u4e00\u4e2an\u4e2a\u5143\u7d20\u7684\u5217\u8868\uff0c \u6bcf\u4e2a\u5143\u7d20\u4e3a(key, value)\uff0c\u6309\u7167key\u51fa\u73b0\u7684\u6b21\u6570(value) \u4ece\u5927\u5230\u5c0f\u6392\u5217\uff0c\u5373\u8fd4\u56de\u524d\u9762n\u4e2a\u51fa\u73b0\u6b21\u6570\u6700\u591a\u7684 (key,value)\u3002\u5982\u679cn=None\uff0c\u8fd4\u56de\u5305\u62ec\u6240\u6709\u5143\u7d20\u7684\u5217\u8868</li> </ul>"},{"location":"code/Python/Python-note/#collectionsnamedtuple","title":"collections.namedtuple","text":"<ul> <li>\u8981\u8bbf\u95ee\u5143\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u9700\u8981\u901a\u8fc7\u4e0b\u6807\u8bbf\u95ee\uff0c\u53ef\u8bfb\u6027\u4e0d\u5f3a\uff0c\u4fee\u6539\u4ee3\u7801\u4e5f\u4e0d\u65b9\u4fbf</li> <li>\u5e0c\u671b\u80fd\u591f\u5728\u5143\u7ec4\u7c7b\u578b\u7684\u57fa\u7840\u4e0a\uff0c\u4e3a\u539f\u6765\u7684\u5143\u7ec4\u7684\u4e0b\u6807\u52a0\u4e0a\u4e00\u4e2a\u5b57\u6bb5\u540d(\u522b\u540d)\uff0c\u9664\u4e86\u4ecd\u7136\u53ef\u4ee5\u7528\u4e0b\u6807\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u6765\u8bbf\u95ee\u5143\u7ec4\u4e2d\u7684\u5143\u7d20</li> <li>\u51fd\u6570namedtuple(typename, fieldname)\u662f\u4e00\u4e2a\u5de5\u5382\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662f\u4e00\u4e2a\u7279\u522b\u7684\u5143\u7ec4\u7c7b\u578b\uff0c\u4e0etuple\u7c7b\u4f3c\uff0c\u53ea\u662f\u9664\u4e86\u652f\u6301tuple\u539f\u6765\u7684\u65b9\u6cd5\u548c\u8fd0\u7b97\u7b26\u5916\uff0c\u4f5c\u4e86\u4e00\u4e9b\u6269\u5c55<ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570typename\u4e3a\u5b57\u7b26\u4e32\uff0c\u7ed9\u51fa\u4e86\u65b0\u7c7b\u578b\u7684\u540d\u79f0</li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570fieldname\u7ed9\u51fa\u4e86\u5143\u7ec4\u5bf9\u5e94\u4f4d\u7f6e\u7684\u522b\u540d<ul> <li>\u53ef\u4ee5\u662f\u4e00\u4e2a\u5143\u7d20\u4e3a\u5b57\u7b26\u4e32\u7684\u8fed\u4ee3\u5bf9\u8c61\uff0c \u6bd4\u5982[\u2018x\u2019, \u2018y\u2019]</li> <li>fieldname\u4e5f\u53ef\u4ee5\u662f\u901a\u8fc7\u7a7a\u683c\u5206\u5272\u7684\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u6216\u901a\u8fc7\u9017\u53f7\u5206\u5272\u7684\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c \u6bd4\u5982\u2019x y\u2019\u6216\u8005\u2019x, y\u2018</li> <li>fieldname\u4e2d\u5305\u542b\u7684\u5b57\u6bb5\u540d\u5fc5\u987b\u6ee1\u8db3python\u6807\u8bc6\u7b26\u7684\u8981\u6c42\uff0c\u4e14\u4e0d\u80fd\u4ee5\u4e0b\u5212\u7ebf\u5f00\u5934</li> </ul> </li> </ul> </li> <li><code>New_Type = collections.namedtuple('Point', 'x y')</code></li> <li>\u76f8\u8f83\u4e8e tuple     </li> </ul> <ol> <li>\u9996\u5148\u7528\u51fd\u6570namedtuple(typename, fieldname) \u521b\u5efa\u4e00\u4e2a\u7279\u522b\u7684\u5143\u7ec4\u7c7b\u578b\uff0c\u4e3a\u539f\u6765\u7684\u5143\u7ec4\u7684\u4e0b\u6807\u52a0\u4e0a\u4e00\u4e2a\u5b57\u6bb5\u540d(\u522b\u540d)\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u6765\u8bbf\u95ee\u5143\u7ec4\u4e2d\u7684\u5143\u7d20\uff0c\u589e\u5f3a\u4e86\u53ef\u8bfb\u6027</li> <li>\u4f7f\u7528\u4e0a\u8ff0\u521b\u5efa\u7684\u65b0\u7c7b\u578b\uff0c\u8c03\u7528\u76f8\u5e94\u7684\u6784\u9020\u51fd\u6570\uff08\u901a\u8fc7\u4f4d\u7f6e\u53c2\u6570\u6216\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\u6765\u6307\u5b9a\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5143\u7d20\uff09\u521b\u5efa\u4e00\u4e2a\u547d\u540d\u5143\u7ec4\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528\u539f\u6709\u5143\u7ec4\u7c7b\u578b\u7684\u6240\u6709\u65b9\u6cd5</li> <li>\u53ef\u4ee5\u901a\u8fc7\u5bf9\u8c61\u7684\u5c5e\u6027\u6765\u8bbf\u95ee\u547d\u540d\u5143\u7ec4\u5bf9\u8c61\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5143\u7d20</li> <li>\u65b0\u7c7b\u578b\u8fd8\u652f\u6301\u591a\u4e2a\u65b0\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u4ee5\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u907f\u514d\u4e0e\u5b57\u6bb5\u540d\u51b2\u7a81<ul> <li>\u5305\u62ec\u5c5e\u6027<code>_fields</code>\u3001\u7c7b\u65b9\u6cd5<code>_make(iterable)</code>\u3001<code>_replace(**kwargs)</code>\u548c <code>_asdict()</code></li> </ul> </li> </ol>"},{"location":"code/Python/Python-note/#logging","title":"logging","text":"<pre><code>import logging\nlogging.basicConfig(filename='main.log',\n                    format='%(asctime)s [%(levelname)s] %(message)s',\n                    level=logging.DEBUG)\nlogging.info('logging started.')\n</code></pre> <ul> <li>level \u54ea\u4e9b\u7ea7\u522b\u4e4b\u4e0a(\u4ece\u4f4e\u5230\u9ad8\u5206\u522b\u4e3a DEBUG,INFO,WARNING, ERROR,FATAL)\u7684\u6d88\u606f\u8bb0\u5f55\uff0c\u7f3a\u7701 WARNING</li> <li>filename \u8bb0\u5f55\u5728\u54ea\u4e2a\u6587\u4ef6\uff0c\u7f3a\u7701\u6807\u51c6\u8f93\u51fa</li> <li>format \u65e5\u5fd7\u683c\u5f0f\u5982\u4f55\uff0c\u7f3a\u7701 <code>'%(levelname)s:%(name)s:% (message)s'</code></li> <li>\u4e3b\u8981\u65b9\u6cd5<ul> <li>debug(msg)</li> <li>info(msg)</li> <li>warning(msg)</li> <li>error(msg)</li> <li>fatal(msg)</li> <li>exception(e)</li> </ul> </li> </ul>"},{"location":"os/Arch/","title":"Arch Linux","text":"<ul> <li>\u5165\u95e8<ul> <li>Help:Reading (\u7b80\u4f53\u4e2d\u6587) Arch wiki \u9605\u8bfb\u6307\u5357</li> <li>\u5305\u7ba1\u7406\u5de5\u5177 Category:Package management<ul> <li>Pacman</li> <li>AUR helpers \u6bd4\u5982\u5176\u4e2d\u7684 <code>yay</code></li> <li>\u8f6f\u4ef6\u5305\u81ea\u52a8\u7f16\u8bd1\u811a\u672c makepkg</li> <li>\u53e6\u5916\u8fd8\u5c1d\u8bd5\u8fc7 <code>snapd</code></li> </ul> </li> <li>\u7cfb\u7edf\u7ef4\u62a4 System maintenance \u5907\u4efd\u3001\u66f4\u65b0\u3001\u6e05\u7406\u3001\u68c0\u67e5\u9519\u8bef</li> </ul> </li> <li>Important<ul> <li>Wiki \u7d22\u5f15 General recommendations</li> <li>Arch \u5b89\u88c5\u6559\u7a0b Install</li> <li>UEFI \u7edf\u4e00\u53ef\u6269\u5c55\u56fa\u4ef6\u754c\u9762. \u4f8b\u5982\u5176\u4e2d\u63d0\u5230\u4f7f\u7528 <code>efibootmgr</code> \u6765\u64cd\u4f5c UEFI \u56fa\u4ef6\u542f\u52a8\u7ba1\u7406\u5668\u8bbe\u7f6e, \u4f3c\u4e4e\u5f88\u8d5e!</li> <li>\u5f15\u5bfc\u8fc7\u7a0b Arch Boot Process</li> <li>Rsync \u5e26\u6709\u6743\u9650\u5168\u76d8\u62f7\u8d1d</li> <li>\u5206\u533a partition</li> <li>\u6587\u4ef6\u7cfb\u7edf file system</li> <li>fstab</li> <li>GRUB</li> </ul> </li> <li>\u5b9e\u7528<ul> <li>Arch \u8fc1\u79fb\u5230\u53e6\u5916\u7684\u786c\u76d8 migrate installation</li> <li>\u7f16\u8f91\u5668 Vim</li> <li>\u8f6f\u4ef6\u5217\u8868 List of Applications</li> </ul> </li> <li>\u53c2\u8003<ul> <li>\u7bdd\u30ce\u96fe\u679d\u7684\u9b54\u6cd5\u5b66\u9662\uff5chttps://archlinuxstudio.github.io/ArchLinuxTutorial/#/ \u5b89\u88c5\u548c\u4f7f\u7528\u6307\u5357</li> </ul> </li> </ul>"},{"location":"os/Arch/#_1","title":"\u5305\u7ba1\u7406","text":"<p>\u5305\u7ba1\u7406\u57fa\u672c\u8bed\u6cd5; \u5b89\u88c5\u8f6f\u4ef6</p> <pre><code># pacman\n# \u5378\u8f7d\npacman -Qs gold # \u67e5\u8be2\u76f8\u5173\u8f6f\u4ef6\nsudo pacman -Rs goldendict # \u5378\u8f7d\u5305\u53ca\u7528\u4e0d\u5230\u7684\u4f9d\u8d56\n\n# yay\n# \u6ce8\u610f yay \u4e0d\u8981\u7528 sudo\nyay -S google-chrome\nyay -S eudic        # \u6b27\u9646\u8bcd\u5178\nyay -S notion-app   # Notion\n</code></pre> <pre><code>sudo pacman -S package_name     # \u5b89\u88c5\u8f6f\u4ef6\u5305\nsudo pacman -Syyu               # \u5347\u7ea7\u7cfb\u7edf yy\u6807\u8bb0\u5f3a\u5236\u5237\u65b0 u\u6807\u8bb0\u5347\u7ea7\u52a8\u4f5c\nsudo pacman -R package_name     # \u5220\u9664\u8f6f\u4ef6\u5305\nsudo pacman -Rs package_name    # \u5220\u9664\u8f6f\u4ef6\u5305\uff0c\u53ca\u5176\u6240\u6709\u6ca1\u6709\u88ab\u5176\u4ed6\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\u4f7f\u7528\u7684\u4f9d\u8d56\u5305\nsudo pacman -Qdt                # \u627e\u51fa\u5b64\u7acb\u5305 Q\u4e3a\u67e5\u8be2\u672c\u5730\u8f6f\u4ef6\u5305\u6570\u636e\u5e93 d\u6807\u8bb0\u4f9d\u8d56\u5305 t\u6807\u8bb0\u4e0d\u9700\u8981\u7684\u5305 dt\u5408\u5e76\u6807\u8bb0\u5b64\u7acb\u5305\nsudo pacman -Rs $(pacman -Qtdq) # \u5220\u9664\u5b64\u7acb\u8f6f\u4ef6\u5305\nsudo pacman -Fy                 # \u66f4\u65b0\u547d\u4ee4\u67e5\u8be2\u6587\u4ef6\u5217\u8868\u6570\u636e\u5e93\nsudo pacman -F xxx              # \u5f53\u4e0d\u77e5\u9053\u67d0\u4e2a\u547d\u4ee4\u5c5e\u4e8e\u54ea\u4e2a\u5305\u65f6\uff0c\u7528\u6765\u67e5\u8be2\u67d0\u4e2axxx\u547d\u4ee4\u5c5e\u4e8e\u54ea\u4e2a\u5305\n</code></pre> <p>\u4e00\u4e2a\u56fe\u5f62\u5316\u5305\u7ba1\u7406\u8f6f\u4ef6</p> <pre><code>yay -S octopi # \u5305\u7ba1\u7406\u5668\u524d\u7aef\u754c\u9762\n</code></pre>"},{"location":"os/Arch/#_2","title":"\u8f6f\u4ef6\u5217\u8868","text":"<pre><code>yay -S visual-studio-code-bin\n</code></pre>"},{"location":"os/Arch/#_3","title":"\u5b89\u88c5","text":"<ul> <li>\u7981\u7528reflector</li> <li>\u786e\u4fdd\u4e3aUEFI\u6a21\u5f0f</li> <li>\u7f51\u7edc<ul> <li>\u65e0\u7ebf iwctl</li> </ul> </li> <li>\u66f4\u65b0\u7cfb\u7edf\u59cb\u7ec8</li> <li>\u66f4\u6362\u56fd\u5185\u6e90</li> <li>\u5206\u533a</li> <li>\u683c\u5f0f\u5316</li> <li>\u6302\u8f7d</li> <li>\u5b89\u88c5\u7cfb\u7edf</li> <li>\u751f\u6210 fstab \u6587\u4ef6</li> <li>Change root</li> <li>\u8bbe\u7f6e\u4e3b\u673a\u540d\u548c\u65f6\u533a</li> <li>\u786c\u4ef6\u65f6\u95f4\u8bbe\u7f6e</li> <li>\u8bbe\u7f6eLocale</li> <li>Root \u5bc6\u7801</li> <li>\u5b89\u88c5\u5fae\u7801</li> <li>\u5b89\u88c5\u5f15\u5bfc\u7a0b\u5e8f</li> </ul> <pre><code># \u7981\u752811\nsystemctl stop reflector.service\n\n# \u82e5\u6709\u8f93\u51fa\u5219\u4e3a UEFI\nls /sys/firmware/efi/efivars\n\n# \u7f51\u7edc\n# \u65e0\u7ebf\u7528 iwctl\niwctl                           #\u8fdb\u5165\u4ea4\u4e92\u5f0f\u547d\u4ee4\u884c\ndevice list                     #\u5217\u51fa\u8bbe\u5907\u540d\uff0c\u6bd4\u5982\u65e0\u7ebf\u7f51\u5361\u770b\u5230\u53eb wlan0\nstation wlan0 scan              #\u626b\u63cf\u7f51\u7edc\nstation wlan0 get-networks      #\u5217\u51fa\u7f51\u7edc \u6bd4\u5982\u60f3\u8fde\u63a5CMCC-5AQ7\u8fd9\u4e2a\u65e0\u7ebf\nstation wlan0 connect CMCC-5AQ7 #\u8fdb\u884c\u8fde\u63a5 \u8f93\u5165\u5bc6\u7801\u5373\u53ef\nexit                            #\u6210\u529f\u540eexit\u9000\u51fa\n# \u6d4b\u8bd5\u7f51\u7edc\nping www.gnu.org\n\n# \u66f4\u65b0\u7cfb\u7edf\u65f6\u949f\ntimedatectl set-ntp true    #\u5c06\u7cfb\u7edf\u65f6\u95f4\u4e0e\u7f51\u7edc\u65f6\u95f4\u8fdb\u884c\u540c\u6b65\ntimedatectl status          #\u68c0\u67e5\u670d\u52a1\u72b6\u6001\n\n# \u56fd\u5185\u6e90\nvim /etc/pacman.d/mirrorlist    #\u4e0d\u4f1avim\u7684\u540c\u5b66\uff0c\u6b64\u5904\u6ce8\u610f\u89c6\u9891\u4e2d\u7684vim\u64cd\u4f5c\u6b65\u9aa4\n# \u628a ustc \u7684\u653e\u5230\u6700\u524d\u9762\n\n# \u5206\u533a\n# \u5c06\u78c1\u76d8\u8f6c\u4e3a GPT \u7c7b\u578b\nlsblk                       #\u663e\u793a\u5206\u533a\u60c5\u51b5\nparted /dev/sdx             #\u6267\u884cparted\uff0c\u8fdb\u884c\u78c1\u76d8\u7c7b\u578b\u53d8\u66f4\n(parted)mktable             #\u8f93\u5165mktable\nNew disk label type? gpt    #\u8f93\u5165gpt \u5c06\u78c1\u76d8\u7c7b\u578b\u8f6c\u6362\u4e3agpt \u5982\u78c1\u76d8\u6709\u6570\u636e\u4f1a\u8b66\u544a\uff0c\u8f93\u5165yes\u5373\u53ef\nquit                        #\u6700\u540equit\u9000\u51faparted\u547d\u4ee4\u884c\u4ea4\u4e92\n# \u7528 cfdisk \u8fdb\u884c\u5206\u533a\ncfdisk /dev/sdx #\u6765\u6267\u884c\u5206\u533a\u64cd\u4f5c,\u5206\u914d\u5404\u4e2a\u5206\u533a\u5927\u5c0f\uff0c\u7c7b\u578b\nfdisk -l #\u590d\u67e5\u78c1\u76d8\u60c5\u51b5\n\n# \u683c\u5f0f\u5316\n#\u78c1\u76d8\u82e5\u6709\u6570\u636e\u4f1a\u95ee 'proceed any way?' y\u56de\u8f66 \u5373\u53ef\nmkfs.ext4  /dev/sdax            #\u683c\u5f0f\u5316\u6839\u76ee\u5f55\u548chome\u76ee\u5f55\u7684\u4e24\u4e2a\u5206\u533a\nmkfs.vfat  /dev/sdax            #\u683c\u5f0f\u5316efi\u5206\u533a\n\n# \u6302\u8f7d\nmount /dev/sdax  /mnt\nmkdir /mnt/home\nmount /dev/sdax /mnt/home\nmkdir /mnt/efi\nmount /dev/sdax /mnt/efi\n\n# \u5b89\u88c5\u7cfb\u7edf\n# \u57fa\u7840\u5305\npacstrap /mnt base base-devel linux linux-firmware  #base-devel\u5728AUR\u5305\u7684\u5b89\u88c5\u662f\u5fc5\u987b\u7684\n# \u529f\u80fd\u6027\u8f6f\u4ef6\npacstrap /mnt dhcpcd iwd vim sudo bash-completion   #\u4e00\u4e2a\u6709\u7ebf\u6240\u9700 \u4e00\u4e2a\u65e0\u7ebf\u6240\u9700 \u4e00\u4e2a\u7f16\u8f91\u5668  \u4e00\u4e2a\u63d0\u6743\u5de5\u5177 \u4e00\u4e2a\u8865\u5168\u5de5\u5177 iwd\u4e5f\u9700\u8981dhcpcd\n\n# \u751f\u6210 fstab\ngenfstab -U /mnt &gt;&gt; /mnt/etc/fstab\ncat /mnt/etc/fstab #\u68c0\u67e5\n\n# \u5c06\u73af\u5883\u5207\u6362\u5230\u65b0\u7cfb\u7edf\u7684 /mnt \u4e0b\narch-chroot /mnt\n\n# \u4e3b\u673a\u540d\nvim /etc/hostname        # \u6bd4\u5982\u5199 myarch\n# hosts\nvim /etc/hosts\n#127.0.0.1   localhost\n#::1         localhost\n#127.0.1.1   myarch.localdomain    myarch\n# \u8bbe\u7f6e\u65f6\u533a\nln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n\n# \u7cfb\u7edf\u65f6\u95f4\u540c\u6b65\u5230\u786c\u4ef6\u65f6\u95f4\nhwclock --systohc\n\n# \u8bbe\u7f6e Locale\nvim /etc/locale.gen\n# \u53bb\u6389 en_US.UTF-8 \u548c zh_CN.UTF-8  \u524d\u7684\u6ce8\u91ca\n# \u751f\u6210 locale\nlocale-gen\necho 'LANG=en_US.UTF-8'  &gt; /etc/locale.conf\n\n# root \u5bc6\u7801\npasswd root\n\n# \u5fae\u7801\uff0832\u4f4d\u652f\u6301\uff1f\uff09\npacman -S intel-ucode   # Intel\npacman -S amd-ucode     # AMD\n\n# \u5b89\u88c5\u5f15\u5bfc\u7a0b\u5e8f\npacman -S grub efibootmgr   # grub\u662f\u542f\u52a8\u5f15\u5bfc\u5668\uff0cefibootmgr\u88ab grub \u811a\u672c\u7528\u6765\u5c06\u542f\u52a8\u9879\u5199\u5165 NVRAM\u3002\ngrub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=GRUB # \u53d6\u540d\u4e3aGRUB \u5e76\u5c06grubx64.efi\u5b89\u88c5\u5230\u4e4b\u524d\u7684\u6307\u5b9a\u4f4d\u7f6e\n# \u8fd9\u91cc\u4ec5\u751f\u6210 /efi/EFI/GRUB/grubx64.efi \u8fd9\u4e00\u4efd\u6587\u4ef6\uff08efi\u5206\u533a\u4e2d\u4ec5\u6709\uff09\n# \u7f16\u8f91\nvim /etc/default/grub\n# \u751f\u6210\u914d\u7f6e\u6587\u4ef6\ngrub-mkconfig -o /boot/grub/grub.cfg\n\n# \u5b8c\u6210\u5b89\u88c5\nexit                # \u9000\u56de\u5b89\u88c5\u73af\u5883#\numount -R  /mnt     # \u5378\u8f7d\u65b0\u5206\u533a\nreboot              # \u91cd\u542f\n# \u91cd\u542f\u540e\u8fde\u63a5\u7f51\u7edc\uff0c\u8981\u5f00\u542f hdcp \u670d\u52a1\nsystemctl start dhcpcd  # \u7acb\u5373\u542f\u52a8dhcp\nping www.gnu.org      # \u6d4b\u8bd5\u7f51\u7edc\u8fde\u63a5\n# \u82e5\u662f\u65e0\u7ebf\u4ecd\u7136\u8981 iwctl\nsystemctl start iwd # \u7acb\u5373\u542f\u52a8iwd\niwctl               # \u548c\u4e4b\u524d\u7684\u65b9\u5f0f\u4e00\u6837\uff0c\u8fde\u63a5\u65e0\u7ebf\u7f51\u7edc\n</code></pre>"},{"location":"os/Arch/#grub","title":"\u5b89\u88c5Grub\u5f15\u5bfc\u7a0b\u5e8f","text":"<p>\u63a5\u4e0b\u6765\u7f16\u8f91/etc/default/grub \u6587\u4ef6\uff0c\u53bb\u6389 <code>GRUB_CMDLINE_LINUX_DEFAULT</code> \u4e00\u884c\u4e2d\u6700\u540e\u7684 quiet \u53c2\u6570\uff0c\u540c\u65f6\u628a log level \u7684\u6570\u503c\u4ece 3 \u6539\u6210 5\u3002\u8fd9\u6837\u662f\u4e3a\u4e86\u540e\u7eed\u5982\u679c\u51fa\u73b0\u7cfb\u7edf\u9519\u8bef\uff0c\u65b9\u4fbf\u6392\u9519\u3002\u540c\u65f6\u52a0\u5165 nowatchdog \u53c2\u6570\uff0c\u8fd9\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u5f00\u5173\u673a\u901f\u5ea6\u3002</p> <pre><code>GRUB_DEFAULT=0 \nGRUB_TIMEOUT=5 \nGRUB_DISTRIBUTOR=\"Arch\" \nGRUB_CMDLINE_LINUX_DEFAULT=\"loglevel=5 quiet nowatchdog\" \nGRUB_CMDLINE_LINUX=\"\"\n</code></pre>"},{"location":"os/Arch/#_4","title":"\u684c\u9762\u73af\u5883","text":"<ul> <li>\u7cfb\u7edf\u66f4\u65b0</li> <li>\u975e root \u7528\u6237</li> <li>\u5b89\u88c5 KDE Plasma \u684c\u9762</li> <li>\u914d\u7f6e greeter sddm</li> <li>\u8bbe\u7f6e\u4ea4\u6362\u6587\u4ef6 swap</li> <li>\u5f00\u542f 32 \u4f4d\u652f\u6301\u5e93\u4e0e ArchLinuxCN \u652f\u6301\u5e93</li> <li>\u5b89\u88c5\u57fa\u7840\u529f\u80fd\u5305</li> <li>\u8bbe\u7f6e\u7cfb\u7edf\u4e3a\u4e2d\u6587<ul> <li>\u6253\u5f00 System Settings &gt; Regional Settings &gt; Language -&gt; Add languages \u4e2d\u9009\u62e9\u4e2d\u6587\u52a0\u5165\uff0c\u518d\u62d6\u62fd\u5230\u7b2c\u4e00\u4f4d</li> <li>\u518d\u5c06System Settings &gt; Regional Settings &gt; Formats \u4e2d\u7684\u503c\u8bbe\u4e3a<code>\u4e2d\u6587-\u7b80\u4f53\u4e2d\u6587(zh_CN)</code></li> <li>\u91cd\u65b0\u767b\u9646\u751f\u6548</li> </ul> </li> <li>\u8f93\u5165\u6cd5<ul> <li>\u6253\u5f00 \u7cfb\u7edf\u8bbe\u7f6e &gt; \u533a\u57df\u8bbe\u7f6e &gt; \u8f93\u5165\u6cd5\uff0c\u5148\u70b9\u51fb<code>\u8fd0\u884cFcitx</code>\u5373\u53ef\uff0c\u62fc\u97f3\u4e3a\u9ed8\u8ba4\u6dfb\u52a0\u9879\u3002\u5982\u4f60\u8fd8\u9700\u8981\u66f4\u591a\u8f93\u5165\u6cd5\u5982\u4e94\u7b14\uff0c\u5219\u518d\u70b9\u51fb<code>\u6dfb\u52a0\u8f93\u5165\u6cd5</code>\uff0c\u627e\u5230\u7b80\u4f53\u4e2d\u6587\u4e0b\u7684\u4e94\u7b14 \uff0c\u70b9\u51fb\u6dfb\u52a0\u5373\u53ef\u52a0\u5165\u4e94\u7b14\u8f93\u5165\u6cd5</li> <li>\u63a5\u4e0b\u6765\u70b9\u51fb \u62fc\u97f3 \u53f3\u4fa7\u7684\u914d\u7f6e\u6309\u94ae\uff0c\u70b9\u9009<code>\u4e91\u62fc\u97f3</code>\u548c<code>\u5728\u7a0b\u5e8f\u4e2d\u663e\u793a\u9884\u7f16\u8f91\u6587\u672c</code> \u6700\u540e\u5e94\u7528</li> <li>\u56de\u5230\u8f93\u5165\u6cd5\u8bbe\u7f6e\uff0c\u70b9\u51fb<code>\u914d\u7f6e\u9644\u52a0\u7ec4\u4ef6</code>\uff0c\u627e\u5230 \u7ecf\u5178\u7528\u6237\u754c\u9762 \u5728\u4e3b\u9898\u91cc\u9009\u62e9\u4e00\u4e2a\u4f60\u559c\u6b22\u7684\u989c\u8272 \u6700\u540e\u5e94\u7528</li> <li>\u91cd\u65b0\u767b\u9646</li> </ul> </li> <li>\u914d\u7f6e\u7cfb\u7edf\u9ed8\u8ba4\u7f16\u8f91\u5668</li> <li>\u542f\u52a8\u84dd\u7259</li> </ul> <pre><code>pacman -Syyu    #\u5347\u7ea7\u7cfb\u7edf\u4e2d\u5168\u90e8\u5305\n\nuseradd -m -G wheel -s /bin/bash testuser  # wheel\u9644\u52a0\u7ec4\u53efsudo\u8fdb\u884c\u63d0\u6743 -m\u540c\u65f6\u521b\u5efa\u7528\u6237\u5bb6\u76ee\u5f55\npasswd testuser\nEDITOR=vim visudo\n# \u53bb\u6389\u8fd9\u4e00\u884c\u7684\u6ce8\u91ca\u7b26\n#%wheel ALL=(ALL) ALL\n\n# plasma\npacman -S plasma-meta konsole dolphin  # \u5b89\u88c5plasma-meta\u5143\u8f6f\u4ef6\u5305\u4ee5\u53ca\u7ec8\u7aef\u548c\u6587\u4ef6\u7ba1\u7406\u5668\n\n# sddm\nsystemctl enable sddm\n\n# swap\ndd if=/dev/zero of=/swapfile bs=1M count=16384 status=progress # \u521b\u5efa16G\u7684\u4ea4\u6362\u7a7a\u95f4 \u5927\u5c0f\u6839\u636e\u9700\u8981\u81ea\u5b9a\nchmod 600 /swapfile # \u8bbe\u7f6e\u6b63\u786e\u7684\u6743\u9650\nmkswap /swapfile # \u683c\u5f0f\u5316swap\u6587\u4ef6\nswapon /swapfile # \u542f\u7528swap\u6587\u4ef6\n# \u5728/etc/fstab \u4e2d\u8ffd\u52a0\n#/swapfile none swap defaults 0 0\n\n# archlinuxCN\nvim /etc/pacman.conf\n# \u53bb\u6389 [multilib] \u4e00\u8282 \u4e2d\u7684\u6ce8\u91ca\uff0c\u5f00\u542f32\u4f4d\u5e93\u652f\u6301\n#[archlinuxcn]\n#Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch\npacman -Syyu\n\n# \u684c\u9762\u7cfb\u7edf\u4e2d\u7684\u7f51\u7edc\u8bbe\u7f6e\nsudo systemctl disable iwd                                                  # \u786e\u4fddiwd\u5f00\u673a\u5904\u4e8e\u5173\u95ed\u72b6\u6001\uff0c\u5176\u65e0\u7ebf\u8fde\u63a5\u4f1a\u4e0eNetworkManager\u51b2\u7a81\nsudo systemctl stop iwd                                                     # \u540c\u4e0a\uff0c\u7acb\u5373\u5173\u95ediwd\nsudo systemctl enable --now NetworkManager       \n# \u57fa\u7840\u529f\u80fd\u5305\nsudo pacman -S ntfs-3g                                                      # \u8bc6\u522bNTFS\u683c\u5f0f\u7684\u786c\u76d8\nsudo pacman -S adobe-source-han-serif-cn-fonts wqy-zenhei                   # \u5b89\u88c5\u51e0\u4e2a\u5f00\u6e90\u4e2d\u6587\u5b57\u4f53 \u4e00\u822c\u88c5\u4e0a\u6587\u6cc9\u9a7f\u5c31\u80fd\u89e3\u51b3\u5927\u591awine\u5e94\u7528\u4e2d\u6587\u65b9\u5757\u7684\u95ee\u9898\nsudo pacman -S noto-fonts-cjk noto-fonts-emoji noto-fonts-extra             # \u5b89\u88c5\u8c37\u6b4c\u5f00\u6e90\u5b57\u4f53\u53ca\u8868\u60c5\nsudo pacman -S firefox chromium                                             # \u5b89\u88c5\u5e38\u7528\u7684\u706b\u72d0\u3001\u8c37\u6b4c\u6d4f\u89c8\u5668\nsudo pacman -S ark                                                          # \u4e0edolphin\u540c\u7528\u53f3\u952e\u89e3\u538b \u6ce8\u610f\u53ef\u540c\u65f6\u5b89\u88c5\u53ef\u9009\u89e3\u538b\u652f\u6301\u9879\nsudo pacman -S packagekit-qt5 packagekit appstream-qt appstream             # \u786e\u4fddDiscover(\u8f6f\u4ef6\u4e2d\u5fc3\uff09\u53ef\u7528 \u9700\u91cd\u542f\nsudo pacman -S gwenview                                                     # \u56fe\u7247\u67e5\u770b\u5668\nsudo pacman -S steam      \n# archlinuxcn \u6e90\nsudo pacman -S archlinuxcn-keyring                                          # cn\u6e90\u4e2d\u7684\u7b7e\u540d(archlinuxcn-keyring\u5728archLinuxCn)\nsudo pacman -S yay  \n\n# \u8f93\u5165\u6cd5\nsudo pacman -S fcitx5-im # \u57fa\u7840\u5305\u7ec4\nsudo pacman -S fcitx5-chinese-addons # \u5b98\u65b9\u4e2d\u6587\u8f93\u5165\u5f15\u64ce\nsudo pacman -S fcitx5-anthy # \u65e5\u6587\u8f93\u5165\u5f15\u64ce\nsudo pacman -S fcitx5-pinyin-moegirl # \u840c\u5a18\u767e\u79d1\u8bcd\u5e93 \u4e8c\u523a\u733f\u5fc5\u5907(ArchLinuxCn)\nsudo pacman -S fcitx5-material-color # \u4e3b\u9898       \n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cfkonsole \u4ee5\u53ca dophin \u90fd\u9700\u8981\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\uff0c\u5012\u662f chrome \u548c firefox \u90fd\u4e0d\u9700\u8981\u5c31\u53ef\u4ee5\u8f93\u5165\u4e2d\u6587\nsudo vim /etc/environment\n# GTK_IM_MODULE=fcitx\n# QT_IM_MODULE=fcitx\n# XMODIFIERS=@im=fcitx\n# SDL_IM_MODULE=fcitx\n\n# \u9ed8\u8ba4\u7f16\u8f91\u5668\nvim ~/.bashrc \n#export EDITOR='vim'\n\n# \u84dd\u7259\nsudo systemctl enable --now bluetooth\n</code></pre>"},{"location":"os/CentOS/","title":"CentOS","text":"<pre><code># \u6362\u6e90\u53c2\u89c1 https://mirrors.tuna.tsinghua.edu.cn/help/centos/ \n\n######### zsh\n# plugin\nsudo yum install autojump-zsh   # \u4e0d\u540c\u4e8e apt \u4e0b\u7684 autojump\uff0cyum \u4e2d\u7684 autojump \u751f\u6210\u7684\u6587\u4ef6\u5939 /usr/share/autojump \u4e2d\u7f3a\u5931 autojump.zsh\ngit clone https://github.com/zsh-users/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting\n\n########## miniconda \n# see https://docs.conda.io/en/latest/miniconda.html \u8fd9\u91cc\u662f Linux 3.7\nwget https://repo.anaconda.com/miniconda/Miniconda3-py37_4.10.3-Linux-x86_64.sh\nbash Miniconda3-py37_4.10.3-Linux-x86_64.sh\n</code></pre>"},{"location":"os/CentOS/#software","title":"Software","text":""},{"location":"os/CentOS/#_1","title":"\u8f6f\u4ef6\u5b89\u88c5","text":"<ul> <li>EPEL \u6e90<ul> <li>EPEL (Extra Packages for Enterprise Linux\uff0c\u4f01\u4e1a\u7248Linux\u7684\u989d\u5916\u8f6f\u4ef6\u5305) \u662fFedora\u5c0f\u7ec4\u7ef4\u62a4\u7684\u4e00\u4e2a\u8f6f\u4ef6\u4ed3\u5e93\u9879\u76ee\uff0c\u4e3aRHEL/CentOS\u63d0\u4f9b\u4ed6\u4eec\u9ed8\u8ba4\u4e0d\u63d0\u4f9b\u7684\u8f6f\u4ef6\u5305\u3002\u8fd9\u4e2a\u6e90\u517c\u5bb9RHEL\u53ca\u50cfCentOS\u548cScientific Linux\u8fd9\u6837\u7684\u884d\u751f\u7248\u672c\u3002</li> </ul> </li> </ul> <p>\u5f00\u542f</p> <pre><code>sudo yum -y install epel-release\nsudo yum repolist\n\n# \u6765\u8bd5\u8bd5\u770b\nsudo yum install htop\n</code></pre>"},{"location":"os/CentOS/#nvidia-driver","title":"NVIDIA driver","text":"<ul> <li>\u53c2\u89c1 Centos 7 \u5b89\u88c5 Nvidia GPU \u9a71\u52a8\u53ca CUDA \uff1b\u53e6 How to install Nvidia driver on CentOS 7 Linux</li> <li>\u4e0b\u8f7d\u94fe\u63a5 http://www.nvidia.com/Download/Find.aspx</li> <li>Oficial https://docs.nvidia.com/datacenter/tesla/tesla-installation-notes/index.html#centos8</li> </ul> <pre><code># 0. \u5217\u51faGPU\nlspci | grep -i nvidia\n# \u9a8c\u8bc1\u7cfb\u7edf\u662f\u5426\u662f\u652f\u6301\u7684\nuname -m &amp;&amp; cat /etc/redhat-release\n\n# 1. \u5b89\u88c5\u4f9d\u8d56\n# install kernel-devel and gcc kernel \u9700\u8981\u5b89\u88c5 gcc\nsudo yum group install \"Development Tools\"\nsudo yum install kernel-devel\n# \u6216\u8005\uff5c\u9a8c\u8bc1\u7cfb\u7edf\u662f\u5426\u5b89\u88c5\u4e86\u6b63\u786e\u7684\u5185\u6838\u5934\u6587\u4ef6\u548c\u5f00\u53d1\u5305\nsudo yum install kernel-devel-$(uname -r) kernel-headers-$(uname -r)\n\n# 3. \u7981\u7528 nouveau\n# nouveau\u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u5f00\u6e90\u7684Nvidia\u9a71\u52a8\uff0c\u4e00\u822cLinux\u5b89\u88c5\u7684\u65f6\u5019\u9ed8\u8ba4\u4f1a\u5b89\u88c5\u8fd9\u4e2a\u9a71\u52a8\u3002 \u8fd9\u4e2a\u9a71\u52a8\u4f1a\u4e0eNvidia\u5b98\u65b9\u7684\u9a71\u52a8\u51b2\u7a81\uff0c\u5728\u5b89\u88c5Nvidia\u9a71\u52a8\u548c\u548cCUDA\u4e4b\u524d\u5e94\u5148\u7981\u7528nouveau\n# \u67e5\u770b\u662f\u5426\u5728\u4f7f\u7528\nlsmod | grep nouveau\n# \u65b0\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\nsudo vim /etc/modprobe.d/blacklist-nouveau.conf\n# \u914d\u7f6e\nblacklist nouveau\noptions nouveau modeset=0\n# \u5907\u4efd\u5f53\u524d\u7684\u955c\u50cf\nsudo mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak\n# \u5efa\u7acb\u65b0\u7684\u955c\u50cf\nsudo dracut /boot/initramfs-$(uname -r).img $(uname -r)\n# \u91cd\u542f\nsudo reboot\n# \u6700\u540e\u8f93\u5165\u4e0a\u9762\u7684\u547d\u4ee4\u9a8c\u8bc1\nlsmod | grep nouveau\n\n# 4. \u4e0b\u8f7d\u3001\u5b89\u88c5\n# \u65b9\u68481\nrpm -i nvidia-diag-driver-local-repo-rhel7-396.82-1.0-1.x86_64.rpm\n# \u6e05\u9664\u7f13\u5b58\nyum clean all\nyum install cuda-drivers\n# \u65b9\u68482\uff1a\u6211\u4e0b\u8f7d\u5230\u7684\u662f Linux 64 \u7edf\u4e00\u7684\u4e00\u4e2a .run\nudo bash NVIDIA-Linux-x86_64-470.63.01.run\n\n# \u91cd\u542fshell\u540e\u68c0\u9a8c\nnvidia-smi\n</code></pre>"},{"location":"os/CentOS/#_2","title":"\u5f00\u673a\u542f\u52a8","text":"<ul> <li>\u53c2\u89c1 CentOS\u8bbe\u7f6e\u7a0b\u5e8f\u5f00\u673a\u81ea\u542f\u52a8\u7684\u65b9\u6cd5</li> </ul> <p>\u51e0\u4e2a\u65b9\u6848</p> <ul> <li>\u5199\u547d\u4ee4\u5728\u6587\u4ef6 <code>/etc/rc.d/rc.local</code> \u4e2d\uff0c\u6ce8\u610f\u4fee\u6539\u4e3a +x</li> <li>\u628a\u5199\u597d\u7684\u542f\u52a8\u811a\u672c\u6dfb\u52a0\u5230\u76ee\u5f55 /etc/rc.d/init.d/\uff0c\u7136\u540e\u4f7f\u7528\u547d\u4ee4chkconfig\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8</li> </ul> <pre><code>chkconfig \u529f\u80fd\u8bf4\u660e\uff1a\u68c0\u67e5\uff0c\u8bbe\u7f6e\u7cfb\u7edf\u7684\u5404\u79cd\u670d\u52a1\u3002\n\u8bed\u6cd5\uff1achkconfig [--add][--del][--list][\u7cfb\u7edf\u670d\u52a1] \u6216 chkconfig [--level &lt;\u7b49\u7ea7\u4ee3\u53f7&gt;][\u7cfb\u7edf\u670d\u52a1][on/off/reset]\n--add \u6dfb\u52a0\u670d\u52a1\n--del \u5220\u9664\u670d\u52a1\n--list \u67e5\u770b\u5404\u670d\u52a1\u542f\u52a8\u72b6\u6001\n</code></pre>"},{"location":"os/CentOS/#_3","title":"\u5173\u95ed\u56fe\u5f62\u754c\u9762","text":"<p>\u53c2\u89c1\u8fd9\u91cc</p> <p>\u53ef\u4ee5\u67e5\u770b <code>/etc/inittab</code>\uff0c\u5927\u6982\u5c31\u662f</p> <pre><code># \u67e5\u770b\u9ed8\u8ba4\u7684target\uff0c\u6267\u884c\uff1a\nsystemctl get-default\n\n# \u5f00\u673a\u4ee5\u547d\u4ee4\u6a21\u5f0f\u542f\u52a8\uff0c\u6267\u884c\uff1a\nsystemctl set-default multi-user.target\n# \u5f00\u673a\u4ee5\u56fe\u5f62\u754c\u9762\u542f\u52a8\uff0c\u6267\u884c\uff1a\nsystemctl set-default graphical.target\n</code></pre>"},{"location":"os/CentOS/#apt","title":"apt","text":""},{"location":"os/CentOS/#certificate-verification-failed-the-certificate-is-not-trusted","title":"Certificate verification failed: The certificate is NOT trusted. \u8bc1\u4e66\u94fe\u8fc7\u671f\uff1f","text":"<p>\u62a5\u9519\u5982\u4e0b</p> <pre><code>Ign:8 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-updates InRelease\nIgn:9 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-backports InRelease\nIgn:10 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-security InRelease\nErr:11 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic Release\n  Certificate verification failed: The certificate is NOT trusted. The certificate chain uses expired certificate.  Could not handshake: Error in the certificate verification. [IP: 101.6.15.130 443]\n\nReading package lists... Done\nE: The repository 'https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic Release' does not have a Release file.\nN: Updating from such a repository can't be done securely, and is therefore disabled by default.\nN: See apt-secure(8) manpage for repository creation and user configuration details.\n</code></pre> <ul> <li>\u6e05\u534e\u6e90 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ \u6709\u8fd9\u4e2a\u95ee\u9898</li> <li>\u4e2d\u79d1\u5927\u7684 https://mirrors.ustc.edu.cn/help/ubuntu.html \u5c31\u6ca1\u6709\uff0c\u914d\u7f6e\u89c1 https://mirrors.ustc.edu.cn/repogen/</li> </ul>"},{"location":"os/CentOS/#sudo-apt-upgrade-distro-info-data","title":"sudo apt upgrade \u5931\u8d25 distro-info-data","text":"<pre><code>\u4e0b\u5217\u8f6f\u4ef6\u5305\u6709\u672a\u6ee1\u8db3\u7684\u4f9d\u8d56\u5173\u7cfb\uff1a\n distro-info-data : \u7834\u574f: distro-info (&lt; 0.18ubuntu0.18.04.1~) \u4f46\u662f 0.14ubuntu0.2 \u6b63\u8981\u88ab\u5b89\u88c5\nE: \u7834\u635f\u7684\u8f6f\u4ef6\u5305\n</code></pre> <p>\u539f\u56e0\u662f\u4e4b\u524d\u6e05\u534e\u6e90\u5d29\u4e86\uff0c\u6362\u6210\u4e86\u4e2d\u79d1\u5927\u6e90\uff0c\u5bfc\u81f4\u9ed8\u8ba4\u914d\u7f6e\u7684\u7248\u672c\u4ee3\u53f7\u662f16.04\u7684Bionic\uff0c\u4e0e55\u7684Focal\u4e0d\u4e00\u81f4\uff1b\u5c06\u6e90\u914d\u7f6e\u6539\u56de\u6765\u5c31\u597d\u4e86\uff08\u914d\u7f6e\u53c2\u8003\u8fd9\u91cc\uff09\u3002</p> <p>Ubuntu\u4e0d\u540c\u7684\u7248\u672c\u4ee3\u53f7\uff1a20.04\uff1a<code>focal</code>\uff1b18.04\uff1a<code>bionic</code>\uff1b16.04\uff1a<code>xenial</code>\uff1b14.04\uff1a<code>trusty</code> </p>"},{"location":"os/CentOS/#gpg-key","title":"GPG key \u7f3a\u5931","text":"<pre><code>Err:1 http://mirrors.aliyun.com/ubuntu xenial-security InRelease\n  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 40976EAF437D05B5  NO_PUBKEY 3B4FE6ACC0B21F32\n</code></pre> <p>\u4eceserver\u5904\u6dfb\u52a0\u516c\u94a5\uff0c\u6700\u540e\u7684\u516c\u94a5\u6362\u6210\u62a5\u7f3a\u5931\u7684\u90a3\u4e2a</p> <pre><code>apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 6A030B21BA07F4FB\n</code></pre>"},{"location":"os/CentOS/#couldnt-create-temporary-file-tmpaptconfohifbe-for-passing-config-to-apt-key","title":"Couldn\u2019t create temporary file /tmp/apt.conf.OHIfbE for passing config to apt-key","text":"<p>\u5982\u9519\u8bef\u63cf\u8ff0\u6240\u8a00\uff0c\u7f3a\u5c11\u6743\u9650\u3002\u4fee\u6539\u5373\u53ef\uff1a</p> <pre><code>sudo chmod 777 /tmp\n</code></pre>"},{"location":"os/CentOS/#debug","title":"Debug","text":""},{"location":"os/CentOS/#_4","title":"\u7f51\u7edc\u81ea\u52a8\u8fde\u63a5","text":"<p>\u914d\u7f6e <code>/etc/sysconfig/network-scripts/</code> \u4e0b\u7684\u7f51\u5361\uff0c\u4fee\u6539\u4e3a <code>ONBOOT=yes</code></p>"},{"location":"os/EFI/","title":"EFI \u76f8\u5173","text":"<ul> <li>Windows \u542f\u52a8\u903b\u8f91 UEFI \u4e0b Windows \u542f\u52a8\u5f15\u5bfc\u7684\u987a\u5e8f\uff08\u9644\u5e26 linux \u53cc\u7cfb\u7edf\uff09</li> </ul>"},{"location":"os/EFI/#_1","title":"\u76f8\u5173\u8f6f\u4ef6","text":"<ul> <li>Windows \u4e0b\u53ef\u4ee5\u7528 <code>EasyUEFI</code> \u6216\u8005 BOOTICE</li> <li>\u78c1\u76d8\u5de5\u5177 <code>DiskGenius</code></li> </ul>"},{"location":"os/EFI/#grub","title":"GRUB","text":"<ul> <li>Arch GRUB; \u4f8b\u5982\u7528\u5230\u4e86\u5176\u4e2d\u7684 rescue</li> </ul> <pre><code># \u914d\u7f6e\u6587\u4ef6\nls /etc/grub.d/        # /etc/default/grub\n\n## Ubuntu\nsudo update-grub\n# \u751f\u6210\u4f4d\u7f6e\nls /boot/efi/EFI/ubuntu\n\n## CentOS\ngrub2-mkconfig -o \"$(readlink -e /etc/grub2.cfg)\"\n# \u751f\u6210\u7ed3\u679c\n# /etc/grub2.cfg -&gt; ../boot/grub2/grub.cfg        # \u53d6\u51b3\u4e8e\u662f BIOS \u8fd8\u662f UEFI\n</code></pre>"},{"location":"os/EFI/#grub-rescue","title":"grub rescue \u8fdb\u5165\u7cfb\u7edf","text":"<p>\u53c2\u89c1 linux \u5f00\u673a\u5982\u4f55\u8fdb\u5165 grub \u547d\u4ee4\u884c\u6a21\u5f0f\uff0c\u5e76\u901a\u8fc7 grub \u547d\u4ee4\u8fdb\u5165\u7cfb\u7edf</p> <pre><code># rescue\ngrub rescue&gt; set prefix=(hdX,Y)/boot/grub # ls \u627e\u5230\u7cfb\u7edf\u5206\u533a\ngrub rescue&gt; insmod (hdX,Y)/boot/grub/i386-pc/normal.mod # \u53ef\u80fd\u662f /boot/grub/x86_64-efi/normal.mod\nrescue:grub&gt; normal\n</code></pre>"},{"location":"os/Hackintosh/","title":"Hackintosh","text":"<p>\u5173\u8054: [[macOS.md]]</p> <p>220617\u66f4\u65b0: \u56e0\u4e3a\u6b7b\u673a\u7684\u95ee\u9898, \u8111\u6b8b\u76f4\u63a5\u91cd\u7f6e\u4e86BIOS\u800c\u6ca1\u6709\u4fdd\u5b58\u8bbe\u7f6e\u4fe1\u606f; \u76f4\u63a5\u5bfc\u81f4\u4e22\u5931OC\u5f15\u5bfc\u4ee5\u53ca\u65e0\u6cd5\u8fdbmacOS: 1) \u901a\u8fc7 EasyUEFI \u627e\u56de; 2) \u6309\u7167\u4e0b\u9762\u56fd\u5149\u7684 BIOS\u914d\u7f6e \u6210\u529f\u8fdb\u4e86\u7cfb\u7edf.</p> <p>\u9ed1\u82f9\u679c\u5b89\u88c5\u8bb0\u5f55. \u56e0\u4e3a\u786c\u4ef6\u57fa\u672c\u662f\u6309\u7167\u9ed1\u82f9\u679c\u9700\u6c42\u914d\u7f6e\u7684, \u7b2c\u4e00\u904d\u5b89 Clover \u6ca1\u8ffd\u6c42\u7ec6\u8282\u4fbf\u987a\u5229\u4e0a\u8f66; \u4e4b\u540e\u7531\u4e8e\u5206\u533a\u7ba1\u7406\u95ee\u9898\u653e\u5f03; 22\u5e74\u6625\u8282\u91cd\u65b0\u6298\u817e\u4e86 OpenCore.</p> <p>Apple Silicon \u65f6\u4ee3\u8fd8\u53bb\u9f13\u6363\u9ed1\u82f9\u679c\u5b9e\u5728\u662f\u8d39\u529b\u4e0d\u8ba8\u597d\u7684\u4e8b\u60c5; \u6709\u6240\u5931\u4e5f\u603b\u5f52\u6709\u6240\u5f97; \u5c24\u5176\u662f Marak \u4e8b\u4ef6\u4e4b\u540e, \u770b\u5230\u9ed1\u82f9\u679c\u5f00\u6e90\u793e\u533a, \u6559\u7a0b\u7f16\u5199\u8005\u95e8\u7684\u5de5\u4f5c\u4e5f\u5341\u5206\u611f\u52a8.</p> <p>\u9006\u52bf\u6240\u4e3a, \u770b\u4e2a\u4eba\u9009\u62e9\u5427, \u4ee5\u4e0b\u7b80\u5355\u505a\u94fe\u63a5\u6c47\u603b.</p>"},{"location":"os/Hackintosh/#_1","title":"\u8f6f\u4ef6","text":"<ul> <li>Hackintool</li> <li>OpenCore Configurator: OC\u914d\u7f6e; EFI\u6302\u8f7d</li> </ul>"},{"location":"os/Hackintosh/#nuc-2","title":"NUC 2","text":"<p>\u8d2d\u4e70\uff1ahttps://mianbaoduo.com/o/bread/mbd-Y5mTkp8= \u7ef4\u5947\u5927\u5927\u7684 NUC8\u5728\u7ebf\u5b89\u88c5\u5de5\u5177\uff1b \u8fd8\u6709 NUC \u7684 QA https://zhuanlan.zhihu.com/p/165596210</p>"},{"location":"os/Hackintosh/#opencore","title":"OpenCore \u5b89\u88c5","text":"<ul> <li>\u4e3b\u6559\u7a0b | \u56fd\u5149\u7684\u9ed1\u82f9\u679c\u5b89\u88c5\u6559\u7a0b https://apple.sqlsec.com/</li> <li>\u5b98\u65b9\u6559\u7a0b https://dortania.github.io/OpenCore-Install-Guide/</li> <li>OC \u7f16\u8f91\u5668<ul> <li>ProperTree</li> <li>OpenCore Configurator</li> </ul> </li> <li>\u53ef\u4ee5\u5148\u627e\u4e00\u4e2a\u7c7b\u4f3c\u7684\u914d\u7f6e\u597d\u7684 EFI \u53c2\u8003\uff0c\u4f8b\u5982 hackintosh-opencore-z390-aorus-pro-wifi; \u6211\u7684\u653e\u5728\u4e86 here</li> </ul>"},{"location":"os/Hackintosh/#debug","title":"Debug","text":"<ul> <li>\u84dd\u7259<ul> <li>\u539f\u672c\u4ee5\u4e3a\u4e0d\u80fd\u7528\u662f\u7f51\u5361\u7684\u95ee\u9898, \u5c1d\u8bd5 BrcmPatchRAM \u65e0\u679c; \u7ed3\u679c\u8fd8\u662f USB \u7684\u95ee\u9898</li> </ul> </li> <li>\u6709\u7ebf\u7f51\u5361<ul> <li>IntelMausi</li> </ul> </li> <li>\u591a\u5f15\u5bfc<ul> <li>Fight Windows \u5f15\u5bfc: \u8fd8\u662f\u76f4\u63a5\u770b\u56fd\u5149\u7684 \u6559\u7a0b6.6 \u5427, \u5c31\u662f\u7528 EasyUEFI \u914d\u7f6e</li> <li>\u8be6\u89c1 \u6559\u7a0b</li> </ul> </li> <li>HDMI \u7761\u7720\u540e\u663e\u793a\u5668\u65e0\u6cd5\u5524\u9192: \u542f\u52a8\u53c2\u6570\u6dfb\u52a0 <code>igfxonln=1</code>; from here<ul> <li>\u4f11\u7720\u7684\u95ee\u9898\u6bd4\u8f83\u590d\u6742, \u6559\u7a0b</li> <li>\u5c1d\u8bd5\u8fc7 HibernationFixup \u6ca1\u4f5c\u7528</li> <li>\u5173\u4e8e macOS \u7684\u7761\u7720\u79cd\u7c7b\u53c2\u89c1 here</li> </ul> </li> <li>USB \u6620\u5c04<ul> <li>\u9047\u5230\u7684: \u8981\u4e48\u662f USB3.0 \u5931\u6548, \u8981\u4e48 USB2.0 \u5931\u6548: \u9700\u8981\u7528\u5230 USBInjectAll \u548c USBMap.</li> <li>\u5177\u4f53\u7684 USB map \u53c2\u89c1 \u6559\u7a0b</li> <li>\u53e6\u5916\u53f8\u6ce2\u56fe\u4e5f\u6709\u4e00\u4e2a\u81ea\u5df1\u5b9a\u5236\u7684 \u6559\u7a0b</li> </ul> </li> <li>\u5173\u4e8e NTFS \u6302\u8f7d<ul> <li>\u540c\u4e00\u5f20\u786c\u76d8\u4e0a\u7684\u5206\u533a\u4f1a\u88ab\u81ea\u52a8\u53ea\u8bfb\u5f62\u5f0f\u6302\u8f7d, \u770b\u7740\u6709\u70b9\u96be\u53d7</li> <li>\u5c1d\u8bd5\u914d\u7f6e\u4e86 fstab \u4f46\u597d\u50cf\u4e0d\u592a\u884c; \u53c2\u89c1 here; \u53e6\u5916\u53c2\u89c1 \u89e3\u51b3Linux\u65e0\u6cd5\u8bfb\u5199U\u76d8\u4e2d\u7684NTFS\u95ee\u9898</li> <li>\u770b\u5230\u6709\u7528 ntfs-3g \u5b9e\u73b0 \u7684, \u6709\u9700\u6c42\u5c1d\u8bd5\u5427</li> </ul> </li> <li>\u5173\u4e8e\u66f4\u65b0<ul> <li>\u770b\u5230\u5c0f\u7ea2\u70b9\u6ca1\u5fcd\u4f4f, \u5c1d\u8bd5\u4ece Monterey 10.1 \u66f4\u65b0\u5230 10.2, \u679c\u7136\u5931\u8d25\u4e86; \u7136\u540e\u53d1\u73b0 OC \u597d\u50cf\u56de\u5f52\u5230\u4e86\u5f88\u65e9\u7684\u4e00\u4e2a\u7248\u672c, \u65e0\u8bba\u600e\u6837\u4fee\u6539 plist \u90fd\u6ca1\u7528, \u6700\u540e \u91cd\u7f6e NVRAM \u89e3\u51b3\u4e86</li> <li>No zuo, no die</li> </ul> </li> <li>\u6dfb\u52a0\u5176\u4ed6\u7cfb\u7edf\u7684\u5f15\u5bfc<ul> <li>\u53c2\u89c1 OpenCore\u6dfb\u52a0ubuntu\u5f15\u5bfc\uff0c\u5f15\u5bfc\u4e09\u7cfb\u7edf\uff08Macos+Windows+Linux\uff09 \u5176\u5b9e\u5c31\u662f\u5728 OC \u7684\u914d\u7f6e\u9879\u4e2d\u6dfb\u52a0\u4e86\u4e00\u5217</li> </ul> </li> </ul>"},{"location":"os/Hackintosh/#clover","title":"\u56de\u987e Clover \u5b89\u88c5","text":"<p>\u603b\u7ed3\u4e00\u4e0b\u4e4b\u524d\u5199\u7684 Clover \u5b89\u88c5\u8fc7\u7a0b, \u4ee5\u8d44\u6bd4\u8f83.</p> <ul> <li>\u5b89\u88c5\u4e3b\u8981\u53c2\u8003\u4e86 Sleele \u5927\u4f6c\u7684 \u9ed1\u82f9\u679c\u5165\u95e8\u6559\u7a0b</li> <li>\u8d44\u6e90\u6765\u81ea \u9ed1\u679c\u5c0f\u5175\u7684\u90e8\u843d\u683c</li> <li>\u9009\u8d2d\u6307\u5357 TonyMacX86</li> </ul> <p>\u5b89\u88c5\u6d41\u7a0b</p> <ul> <li>\u4e0b\u8f7d, \u5236\u4f5c\u5b89\u88c5 U\u76d8<ul> <li>\u8fd9\u91cc\u7528\u7684\u662f App Store \u4e0b\u8f7d\u7684\u65b9\u5f0f, <code>sudo /Applications/Install\\ macOS\\ Mojave.app/Contents/Resources/createinstallmedia --volume /Volumes/MyVolume</code> \u5373\u53ef</li> <li>\u627e\u5230\u7684\u5bf9\u5e94\u673a\u578b\u7684 EFI \u6587\u4ef6\u590d\u5236\u5230\u542f\u52a8\u76d8\u7684 EFI \u5206\u533a\u4e0b, \u53c2\u89c1 Hackintosh \u9ed1\u82f9\u679c\u957f\u671f\u7ef4\u62a4\u673a\u578b EFI \u53ca\u5b89\u88c5\u6559\u7a0b\u6574\u7406</li> </ul> </li> <li>U\u76d8 \u542f\u52a8, \u5b89\u88c5\u7cfb\u7edf</li> <li>\u914d\u7f6e EFI<ul> <li>\u7b2c\u4e00\u6b21\u5f88\u987a\u5229, \u76f4\u63a5\u7528\u4e86\u4ed6\u4eba\u914d\u7f6e\u597d\u7684 EFI \u5c31\u4e0a\u8f66\u4e86, \u56e0\u6b64\u6ca1\u6709\u592a\u591a\u7814\u7a76</li> <li>\u7528 <code>sudo diskutil mount disk0s1</code> \u6302\u8f7d\u66ff\u6362 EFI \u5373\u53ef; \u6216\u8005\u7528 Clover Configurator \u6302\u8f7d</li> </ul> </li> </ul> <p>\u5b9a\u5236 USB</p> <ul> <li>\u7528\u4e86 sleele \u7684 \u4f7f\u7528Hackintool\u5b9a\u5236\u9ed1\u82f9\u679cUSB\u9a71\u52a8</li> <li>\u5173\u4e8e WiFi \u7b49\u95ee\u9898, \u7531\u4e8e\u7528\u4e86 PCIE \u7f51\u5361, \u9700\u8981\u7981\u7528\u4e3b\u677f WiFi</li> </ul>"},{"location":"os/Ubuntu/","title":"Ubuntu","text":""},{"location":"os/Ubuntu/#_1","title":"\u5305\u7ba1\u7406","text":"<p>\u4e00\u822c\u7684deb\u5305\uff08\u5305\u62ec\u65b0\u7acb\u5f97\u6216\u8005apt-get\u4e0b\u8f7d\u7684\uff09\u90fd\u5728 <code>/usr/share</code> \u3002\u81ea\u5df1\u4e0b\u8f7d\u7684\u538b\u7f29\u5305\u6216\u8005\u7f16\u8bd1\u7684\u5305\uff0c\u6709\u4e9b\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5\u76ee\u5f55\uff0c\u4e00\u822c\u653e\u5728 <code>/usr/local/</code> \uff0c\u4e5f\u6709\u5728 <code>/opt</code> \u7684\u3002</p> <p>Ubuntu\u8f6f\u4ef6\u5305\u683c\u5f0f\u4e3adeb\uff0c\u5b89\u88c5\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>dpkg -i package.deb \u5b89\u88c5\u5305\ndpkg -r package \u5220\u9664\u5305\ndpkg -P package \u5220\u9664\u5305\uff08\u5305\u62ec\u914d\u7f6e\u6587\u4ef6\uff09\ndpkg -L package \u5217\u51fa\u4e0e\u8be5\u5305\u5173\u8054\u7684\u6587\u4ef6\ndpkg -l package \u663e\u793a\u8be5\u5305\u7684\u7248\u672c\ndpkg \u2013unpack package.deb \u89e3\u5f00 deb \u5305\u7684\u5185\u5bb9\ndpkg -S keyword \u641c\u7d22\u6240\u5c5e\u7684\u5305\u5185\u5bb9\ndpkg -l \u5217\u51fa\u5f53\u524d\u5df2\u5b89\u88c5\u7684\u5305\ndpkg -c package.deb \u5217\u51fa deb \u5305\u7684\u5185\u5bb9\ndpkg \u2013configure package \u914d\u7f6e\u5305\n</code></pre>"},{"location":"os/Ubuntu/#apt-get","title":"apt-get \u7ba1\u7406\u5305","text":"<pre><code>apt-cache search # ------(package \u641c\u7d22\u5305) \napt-cache show # ------(package \u83b7\u53d6\u5305\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u5982\u8bf4\u660e\u3001\u5927\u5c0f\u3001\u7248\u672c\u7b49) \nsudo apt-get install # ------(package \u5b89\u88c5\u5305) \nsudo apt-get install # -----(package - - reinstall \u91cd\u65b0\u5b89\u88c5\u5305) \nsudo apt-get -f install # -----(\u5f3a\u5236\u5b89\u88c5?#\"-f = --fix-missing\"\u5f53\u662f\u4fee\u590d\u5b89\u88c5\u5427...) \nsudo apt-get remove # -----(package \u5220\u9664\u5305, \u4fdd\u7559\u914d\u7f6e\u6587\u4ef6) \nsudo apt-get remove --purge # ------(package \u5220\u9664\u5305\uff0c\u5305\u62ec\u5220\u9664\u914d\u7f6e\u6587\u4ef6\u7b49) \nsudo apt-get autoremove --purge # ----(package \u5220\u9664\u5305\u53ca\u5176\u4f9d\u8d56\u7684\u8f6f\u4ef6\u5305+\u914d\u7f6e\u6587\u4ef6\u7b49\uff08\u53ea\u5bf96.10\u6709\u6548\uff0c\u5f3a\u70c8\u63a8\u8350\uff09) \nsudo apt-get update # ------\u66f4\u65b0\u6e90 \nsudo apt-get upgrade # ------\u66f4\u65b0\u5df2\u5b89\u88c5\u7684\u5305 \nsudo apt-get dist-upgrade # ---------\u5347\u7ea7\u7cfb\u7edf \nsudo apt-get dselect-upgrade # ------\u4f7f\u7528 dselect \u5347\u7ea7 \napt-cache depends # -------(package \u4e86\u89e3\u4f7f\u7528\u4f9d\u8d56) \napt-cache rdepends # ------(package \u4e86\u89e3\u67d0\u4e2a\u5177\u4f53\u7684\u4f9d\u8d56?#\u5f53\u662f\u67e5\u770b\u8be5\u5305\u88ab\u54ea\u4e9b\u5305\u4f9d\u8d56\u5427...) \nsudo apt-get build-dep # ------(package \u5b89\u88c5\u76f8\u5173\u7684\u7f16\u8bd1\u73af\u5883) \napt-get source # ------(package \u4e0b\u8f7d\u8be5\u5305\u7684\u6e90\u4ee3\u7801) \nsudo apt-get clean &amp;&amp; sudo apt-get autoclean # --------\u6e05\u7406\u4e0b\u8f7d\u6587\u4ef6\u7684\u5b58\u6863 &amp;&amp; \u53ea\u6e05\u7406\u8fc7\u65f6\u7684\u5305 \nsudo apt-get check # -------\u68c0\u67e5\u662f\u5426\u6709\u635f\u574f\u7684\u4f9d\u8d56 \n</code></pre>"},{"location":"os/Ubuntu/#_2","title":"\u8f6f\u4ef6\u5217\u8868","text":"<pre><code>sudo apt-get install gparted # GParted \u5206\u533a\u7ba1\u7406\nsudo apt-get install filezilla # FileZilla FTP\u5de5\u5177\nsudo apt-get install vlc -y # VLC \u64ad\u653e\u5668\nsudo apt-get install gedit\nsudo apt-get install transmission # BitTorrent \u5ba2\u6237\u7aef\u8f6f\u4ef6\nsudo apt-get install thunderbird # \u90ae\u7bb1\nsudo apt-get install shutter # \u622a\u56fe\n\n# Chrome\nwget -q -O - https://raw.githubusercontent.com/longhr/ubuntu1604hub/master/linux_signing_key.pub | sudo apt-key add\nsudo sh -c 'echo \"deb [ arch=amd64 ] http://dl.google.com/linux/chrome/deb/ stable main\" &gt;&gt; /etc/apt/sources.list.d/google-chrome.list'\nsudo apt-get update\nsudo apt-get install google-chrome-stable\n</code></pre>"},{"location":"os/Ubuntu/#debug","title":"Debug","text":""},{"location":"os/Ubuntu/#root","title":"\u9996\u6b21 Root \u767b\u9646","text":"<p>\u5982\u679c\u662f\u6b63\u5e38 GUI \u5b89\u88c5\u7684 Ubuntu\uff0c\u9ed8\u8ba4\u662f\u666e\u901a\u7528\u6237\u767b\u9646\uff0c\u6b64\u65f6\u6ca1\u6709 root \u8d26\u6237\u7684\u5bc6\u7801\uff1b\u56e0\u6b64</p> <pre><code>sudo passwd root\n</code></pre>"},{"location":"os/Ubuntu/#root_1","title":"\u91cd\u7f6e/\u5fd8\u8bb0 root \u5bc6\u7801","text":"<p>\u7f16\u8f91\u542f\u52a8\u9879\uff08\u5728 GRUB \u754c\u9762\u6309 <code>e</code> \u7f16\u8f91\uff09\uff1b\u53c8\u770b\u5230\u4e24\u79cd</p> <ul> <li>Ubuntu \u57fa\u672c\u9009\u9879\uff0c\u5c06 <code>ro quiet splash $vt_handoff</code> \u90e8\u5206\u4fee\u6539\u4e3a <code>rw init=/bin/bash</code>\uff0c\u76ee\u7684\u662f\u7ed9root\u6587\u4ef6\u7cfb\u7edf\u8bbe\u7f6e\u8bfb\u548c\u5199\u7684\u547d\u4ee4</li> <li>\u9ad8\u7ea7\u7684 recovery mode\uff0c\u4fee\u6539 <code>ro recovery nomodeset</code> \u4e3a <code>quiet splash rw init=/bin/bash</code></li> </ul> <p>\u7136\u540e\u901a\u8fc7 Ctrl + x \u6216 F10 \u542f\u52a8\uff1b\u5229\u7528 passwd \u4fee\u6539\u5bc6\u7801\u540e\uff0c<code>exec /sbin/init</code> \u91cd\u542f\u8fdb\u5165Ubuntu\u7cfb\u7edf</p>"},{"location":"os/Ubuntu/#host","title":"\u4fee\u6539HOST, \u91cd\u542f\u7f51\u7edc","text":"<p>\u4fee\u6539\u5b8c\u4e4b\u540e\u8981\u91cd\u542f\u7f51\u7edc\u3002</p> <pre><code>sudo /etc/init.d/networking restart\n</code></pre>"},{"location":"os/Ubuntu/#_3","title":"\u5feb\u6377\u952e","text":"<ol> <li>\u6700\u5168\u6574\u7406 | 121\u4e2aUbuntu\u7ec8\u7aef\u5e38\u7528\u5feb\u6377\u952e</li> </ol>"},{"location":"os/Ubuntu/#terminal","title":"Terminal","text":"<p><code>CTRL+ALT+T</code>\uff1a\u6253\u5f00\u7ec8\u7aef</p> <p><code>CRTL+SHIFT+V</code>\uff1a\u7c98\u8d34</p>"},{"location":"os/Ubuntu/#desktop","title":"Desktop","text":"<ol> <li><code>Alt+F2</code> : Run console</li> <li><code>Super</code> : Opens Activities search</li> <li><code>Super+L</code> or <code>Ctrl+Alt+L</code> : Locks the screen</li> <li><code>Super+D</code> or <code>Ctrl+Alt+D</code> : Show desktop \u663e\u793a\u684c\u9762\u3001\u9690\u85cf\u684c\u9762</li> <li><code>Super+A</code> : Shows the application menu</li> <li><code>Super+Tab</code> or <code>Alt+Tab</code> : Switch between running applications</li> <li><code>Super+Arrow</code> : Snap windows</li> <li><code>Super+M</code> : Toggle notification tray</li> <li><code>Super+Space</code> : Change input keyboard (for multilingual setup)</li> <li><code>Ctrl+Alt+arrow</code> : Move between workspaces \u5207\u6362\u5de5\u4f5c\u533a</li> <li><code>ALT+F4</code> : \u5173\u95ed\u7a97\u53e3</li> </ol>"},{"location":"os/Windows/","title":"Windows","text":""},{"location":"os/Windows/#_1","title":"\u8f6f\u4ef6\u5217\u8868","text":"<ul> <li>\u7cfb\u7edf\u76f8\u5173<ul> <li>\u9c81\u5927\u5e08?</li> <li>refus, <code>balenaEtcher</code> USB\u5237\u5199</li> <li>CPU-Z\uff0c GPU-Z</li> <li>DiskGenius \u78c1\u76d8\u7ba1\u7406</li> <li>CrystalDisk</li> <li>EasyUEFI \u76f4\u63a5\u914d\u7f6e BIOS, \u7c7b\u4f3c <code>efibootmgr</code></li> </ul> </li> <li>\u6548\u7387<ul> <li><code>SpaceSniffer</code> \u7a7a\u95f4\u7ba1\u7406</li> <li><code>Uninstall Tool</code> \u2b50\ufe0f</li> </ul> </li> <li>\u7cfb\u7edf\u76d1\u63a7 \u72b6\u6001\u680f\u5de5\u5177 XMeters https://entropy6.com/xmeters/; \u8fd8\u6709\u8fd9\u6b3e\u5f00\u6e90\u7684 https://github.com/zhongyang219/TrafficMonitor</li> <li>\u5de5\u4f5c<ul> <li>Office \u7cfb\u5217?</li> <li>IDM \u4e0b\u8f7d</li> <li>PotPlayer</li> <li>Everything</li> </ul> </li> <li>Code<ul> <li>Xftp, Xshell</li> <li>VS Code</li> </ul> </li> </ul> <p>\u53ef\u4ee5\u8bd5\u4e00\u8bd5\u7684\u8f6f\u4ef6\uff1f</p> <ul> <li>Wox \u542f\u52a8\u5668\uff0c\u7c7b\u4f3c macOS \u7684 Spotlight</li> <li>\u7cfb\u7edf\u76d1\u63a7<ul> <li>\u627e\u4e86\u8fd9\u6b3e\u72b6\u6001\u680f\u5de5\u5177 XMeters https://entropy6.com/xmeters/</li> <li>\u8fd8\u6709\u5f88\u591a\u4eba\u63a8\u8350\u8fd9\u6b3e\u5f00\u6e90\u7684 https://github.com/zhongyang219/TrafficMonitor</li> </ul> </li> </ul>"},{"location":"os/Windows/#debug","title":"Debug","text":""},{"location":"os/Windows/#httppacwin10-microsoft-store","title":"\u5f00\u542fhttp\u4ee3\u7406\u6216\u914d\u7f6epac\u540e\u5bfc\u81f4win10 MICROSOFT STORE\u65e0\u6cd5\u8054\u7f51","text":"<p>\u5173\u8054 Github \u4e0a\u7684 \u8fd9\u4e2a\u95ee\u9898 \uff1b\u4e4b\u524d\u8fd8\u50bb\u516e\u516e\u4e0b\u8f7d\u4e86 Fidder\uff0c\u539f\u6765 Clash \u81ea\u5e26\u4e86 <code>UWP Loopback</code>\u3002</p>"},{"location":"os/Windows/#_2","title":"\u547d\u4ee4\u884c\u5de5\u5177\u9009\u62e9","text":"<ul> <li>Git Bash \u4e2d\u65e0\u6cd5\u4f7f\u7528 conda\uff0c\u5e94\u8be5\u662f\u6ca1\u6709\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff08\u5b89\u88c5 miniconda \u7684\u65f6\u5019\u63d0\u793a\u4e0d\u5efa\u8bae\u8bbe\u7f6e\uff09\uff1b</li> <li>\u76ee\u524d\u5728 Anaconda Powershell Prompt \u4e2d\u53ef\u4f7f\u7528 <code>ls, conda, git</code> \u8fd8\u7b97\u591f\u7528\u3002</li> </ul>"},{"location":"os/Windows/#_3","title":"\u547d\u4ee4\u884c\u4ee3\u7406","text":"<p>\u53c2\u8003 Clash \u7ed9\u51fa\u7684\u547d\u4ee4\uff0c\u6ce8\u610f CMD \u548c Power Shell \u662f\u4e0d\u540c\u7684</p> <pre><code>$Env:http_proxy=\"http://127.0.0.1:7890\";$Env:https_proxy=\"http://127.0.0.1:7890\"\nset http_proxy=http://127.0.0.1:7890 &amp; set https_proxy=http://127.0.0.1:7890\n\n# git\ngit config --global http.proxy 'http://127.0.0.1:1080'\ngit config --global https.proxy 'http://127.0.0.1:1080'\n</code></pre>"},{"location":"os/Windows/#_4","title":"\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8","text":"<ul> <li>\u7b80\u8a00\u4e4b\uff0c\u5c31\u662f\u6253\u5f00 <code>C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\StartUp</code>\uff0c\u628a\u60f3\u8981\u7684\u8f6f\u4ef6\u521b\u5efa\u4e00\u4e2a\u5feb\u6377\u65b9\u5f0f\u5373\u53ef\u3002</li> </ul>"},{"location":"os/Windows/#_5","title":"\u622a\u56fe","text":"<ul> <li>Win \u81ea\u5e26\u7684 <code>Win+Shift+S</code>\uff1b</li> <li>Shipaste\uff1a\u4e0b\u8f7d https://zh.snipaste.com/download.html</li> </ul>"},{"location":"os/macOS-intro/","title":"\u5199\u7ed9Windows\u7528\u6237\u7684macOS\u5165\u95e8\u6307\u5357 | \u4f5c\u4e3a\u8fb9\u7f18\u79d1\u6280\u5b85\u7684\u788e\u788e\u5ff5","text":""},{"location":"os/macOS-intro/#macos","title":"\u5f15 | \u4f55\u4ee5macOS?","text":"<p>\u7b2c\u4e00\u4e2a\u95ee\u9898\u5c31\u662fmacOS\u7cfb\u7edf\u4e0eWindows\u6216Linux\u7cfb\u7edf\u7684\u6bd4\u8f83, \u4ec0\u4e48\u7406\u7531\u8ba9\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u76f8\u5bf9\u5c01\u95ed\u7684\u7cfb\u7edf? </p> <ul> <li>UI. \u4e0d\u53ef\u5426\u8ba4Windows\u7684\u5f88\u591a\u65b0\u7684\u8bbe\u8ba1\u8bed\u8a00\u8db3\u591f\u4f18\u79c0, \u4f46\u5728\u5386\u53f2\u5305\u88b1\u4e4b\u4e0b\u603b\u80fd\u5728\u67d0\u4e9b\u65f6\u5019\u603b\u80fd\u611f\u89c9\u5230\u5272\u88c2, \u800cmacOS\u53cd\u800c\u56e0\u5176\u72ec\u88c1\u800c\u53c8\u7740\u6781\u9ad8\u7684\u4e00\u4f53\u6027. </li> <li>\u5feb\u6377\u952e. \u8fdeVim\u90fd\u7528\u4e0d\u592a\u6765\u8005\u4f3c\u4e4e\u6ca1\u8d44\u683c\u9ad8\u8c08\u5feb\u6377\u952e, \u5f88\u591aLinux\u4e0a\u7684\u64cd\u4f5c\u4e5f\u786e\u5b9e\u5f88\u65b9\u4fbf, \u4f46\u4e0d\u5f97\u4e0d\u8bf4cmd\u7684\u4f4d\u7f6e\u548c\u8bed\u6cd5\u7528\u8d77\u6765\u5f88\u987a\u624b. </li> <li>\u8f6f\u4ef6\u751f\u6001. \u8f83\u9ad8\u7684\u7528\u6237\u57fa\u6570\u548c\u4e00\u5b9a\u7684\u4ed8\u8d39\u610f\u613f\u7684\u4ea7\u7269. \u5f53\u7136\u5b98\u65b9\u8f6f\u4ef6\u7684\u6613\u7528\u6027\u4e5f\u786e\u5b9e\u8db3\u591f\u7528. </li> </ul> <p>\u5f53\u7136, \u5b9e\u9645\u4e0a\u90fd\u662f\u4e00\u4e9b\u5f88\u300c\u8f6f\u300d\u7684\u65b9\u9762. \u4f46\u4f53\u9a8c\u6b63\u6765\u6e90\u4e00\u4e9b\u65e5\u5e38\u7ec6\u8282. \u4e0d\u6c42\u6298\u817e\u7684\u987a\u624b (\u672c\u610f), \u63a5\u53d7\u4e00\u5b9a\u89c4\u8bad\u7684\u4fbf\u6377, \u5927\u6982\u7b97\u662fmacOS\u7684\u4f7f\u7528\u54f2\u5b66. </p> <p>\u8fd9\u7bc7\u6709\u4e9b\u5565? </p> <ul> <li>\u7cfb\u7edf\u7684\u57fa\u672c\u4f7f\u7528; </li> <li>\u4e2a\u4eba\u5411\u7684\u4f7f\u7528\u4e60\u60ef\u4f20\u6559; </li> <li>\u57fa\u672c(DL\u5f00\u53d1)\u8f6f\u4ef6\u4ecb\u7ecd; </li> </ul>"},{"location":"os/macOS-intro/#basics","title":"basics","text":"<ul> <li>\u57fa\u672c\u7684\u7528\u6237\u4ea4\u4e92, \u5305\u62ec \u9f20\u6807/\u89e6\u63a7\u677f\u65b9\u5411, cmd\u6309\u952e \u7b49, \u5e94\u8be5\u5728\u6fc0\u6d3b\u65f6\u6709\u4e00\u4e2a\u57fa\u672c\u7684\u4ecb\u7ecd, \u53e6\u5916\u53c2\u89c1\u5b98\u65b9\u7684 \u300amacOS \u4f7f\u7528\u624b\u518c\u300b (\u70b9\u5f00\u76ee\u5f55\u627e\u91cd\u70b9).</li> <li>\u4e00\u4e9b\u91cd\u8981\u7684\u7cfb\u7edf\u8f6f\u4ef6<ul> <li><code>Finder</code> \u6587\u4ef6\u7ba1\u7406\u5668, \u4f5c\u4e3a\u6700\u57fa\u672c\u7684\u8f6f\u4ef6, \u53ef\u4ee5\u8fdbPreference\u770b\u770b\u914d\u7f6e\u9879. </li> <li><code>System Preference</code> \u7cfb\u7edf\u914d\u7f6e, \u96c6\u6210\u5ea6\u5f88\u9ad8, \u521d\u8fdb\u7cfb\u7edf\u53ef\u4ee5\u7ffb\u7ffb, \u6bd4windows\u7684\u7cfb\u7edf\u8bbe\u7f6e\u8981\u7b80\u5355\u592a\u591a\u4e86. </li> <li><code>Activity Monitor</code> \u7cfb\u7edf\u8d44\u6e90\u76d1\u63a7, \u4f5c\u4e3a\u5e95\u914d\u7528\u6237\u9700\u8981\u8003\u8651\u4e00\u4e9b\u8f6f\u4ef6\u7684\u7cfb\u7edf\u5360\u7528, \u9ad8\u914d\u7528\u6237\u53ef\u80fd\u7528\u4e0d\u5230. </li> <li><code>Terminal</code> \u4e0d\u4ec5\u662f\u7a0b\u5e8f\u5458\u4e00\u822c\u4eba\u4e5f\u9700\u8981\u638c\u63e1\u7684\u4ea4\u4e92\u65b9\u5f0f, \u6709\u5f88\u591a\u4eba\u63a8\u8350\u7684\u66ff\u4ee3\u4ea7\u54c1 <code>iTerm</code> \u4f46\u5b9e\u9645\u4e0a\u7684\u529f\u80fd\u6ca1\u591a\u5927\u5dee\u522b. </li> </ul> </li> <li>\u5176\u4ed6\u53ef\u4ee5\u770b\u770b\u7684\u5185\u7f6e\u8f6f\u4ef6<ul> <li>Notes: \u7b80\u5355\u7684\u7b14\u8bb0\u8f6f\u4ef6, \u4f18\u52bf\u5728iOS\u540c\u6b65.</li> <li>Maps: \u684c\u9762\u7aef\u505a\u5f97\u6700\u597d\u7684\u5730\u56fe\u8f6f\u4ef6.</li> <li>Contacts: \u901a\u8baf\u5f55\u7ba1\u7406 (\u5bfc\u5165\u5bfc\u51facsv\u7f16\u8f91\u5f88\u65b9\u4fbf).</li> <li>Automator: \u81ea\u52a8\u5316\u5de5\u5177, \u6709\u4e00\u5b9a\u7684\u5b66\u4e60\u6210\u672c (Apple Script). </li> <li>App Store (MAS): macOS\u4e0a\u7684\u5546\u5e97, \u76f8\u8f83\u4e8eiOS\u7684, \u5bf9\u4e8e\u81ea\u5df1\u7684\u5b58\u5728\u611f\u4e0d\u662f\u5f88\u5927. </li> <li>Photos: \u7167\u7247\u7ba1\u7406\u4e00\u7ea7\u68d2. </li> <li>Music: \u4ea4\u4e92\u8bbe\u8ba1\u4e0a\u6709\u4e9b\u4e0d\u592a\u80fd\u63a5\u53d7, \u4f46\u5176\u5b9e\u8fd8\u633a\u597d\u7528. </li> </ul> </li> </ul> <p>\u4e00\u4e9b\u57fa\u672c\u5feb\u6377\u952e. \u60f3\u8981\u591a\u770b\u770b\u7684\u8bdd\u63a8\u8350\u5b89\u88c5 <code>CheatSheet</code> \u968f\u65f6\u67e5\u770b. </p> <pre><code>cmd+C/V\ncmd+W   withdraw?\ncmd+Q   quit\ncmd+T   new tab\ncmd+N   new\n</code></pre>"},{"location":"os/macOS-intro/#_1","title":"\u7a0b\u5e8f\u733f\u5411\u73af\u5883\u63a8\u4ecb","text":"<p>Note</p> <p>first step: connect to the internet!</p>"},{"location":"os/macOS-intro/#_2","title":"\u547d\u4ee4\u884c\u4f7f\u7528\u6307\u5317","text":"<p>\u5c5e\u4e8e\u6ca1\u6709\u80fd\u529b\u4f46\u559c\u6b22\u6298\u817e\u7684\u4eba, \u6240\u4ee5\u53ef\u80fd\u5c1d\u8bd5\u8fc7\u5f88\u591a\u4e71\u4e03\u516b\u7cdf\u7684\u65b0\u5947\u73a9\u610f, \u7559\u4e0b\u6765\u7684\u5374\u90fd\u662f\u5165\u624b\u95e8\u69db\u4f4e\u597d\u7528\u7684~ (\u57fa\u672c\u90fd\u53ef\u4ee5brew\u5b89\u88c5)</p> <pre><code>tldr    \u89e3\u51b3man\u9875\u9762 TL;DR \u7684\u95ee\u9898, \u5217\u51fa\u4e86\u547d\u4ee4\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u5f0f\u2b50\ufe0f\nbrew    \u8f6f\u4ef6\u5b89\u88c5, \u89c1\u4e0b\nhtop    \u7cfb\u7edf\u76d1\u63a7\nzsh     \u4f18\u70b9\u662f\u517c\u5bb9bash, \u8fd8\u6709\u4e00\u4e9b\u597d\u7528\u7684\u63d2\u4ef6. \u89c1\u4e0b.\n</code></pre> <p>\u5176\u4ed6\u7684\u4e00\u4e9b\u547d\u4ee4\u884c\u5de5\u5177</p> <pre><code>tree    \u6587\u4ef6\u7ed3\u6784\nwget    \u57fa\u672c/\u5f3a\u5927\u7684\u4e0b\u8f7d\u529f\u80fd\naxel    \u7b80\u4ecb\u597d\u7528\u7684\u591a\u7ebf\u7a0b\u4e0b\u8f7d\nbat     cat\u589e\u5f3a\ntrash   rm\u589e\u5f3a\nncdu    \u6587\u4ef6\u5939\u7a7a\u95f4\u5360\u7528/\u7ba1\u7406\n\nsmartmontools\n</code></pre>"},{"location":"os/macOS-intro/#brew","title":"brew: \u8f6f\u4ef6\u7ba1\u7406","text":"<p>\u8eab\u4e3a\u591a\u8bbe\u5907\u7528\u6237, brew \u9010\u6e10\u6210\u4e3a\u4e86\u6700\u4e3b\u8981\u7684\u8f6f\u4ef6\u5b89\u88c5\u65b9\u5f0f. \u53ea\u9700\u8981\u5728\u547d\u4ee4\u884c\u641c\u7d22, \u4e00\u952e\u5b89\u88c5, \u6709\u9700\u6c42\u7684\u8bdd\u8fd8\u53ef\u4ee5\u914d\u7f6e\u6574\u4f53\u8fc1\u79fb. </p> <p>\u57fa\u672c\u4f7f\u7528</p> <pre><code>tldr brew   # \u8bb0\u5f97\u7528 tdlr \u67e5\u770b\u4e00\u4e0b\u5c31\u77e5\u9053\u4e03\u4e03\u516b\u516b\u4e86.\n\n# \u641c\u7d22, \u5b89\u88c5\nbrew search visual-studio-code      # \u4e5f\u53ef\u4ee5 https://brew.sh/ \u641c\u7d22\nbrew install visual-studio-code\n# \u6709\u65f6\u53ef\u80fd\u9700\u8981\u6ce8\u610f --cask\n\n# \u67e5\u770b\u5217\u8868\nbrew list\n</code></pre> <ul> <li>\u8f6f\u4ef6 cask \u6e90<ul> <li>\u5565\u610f\u601d? \u201cTo install, drag this icon\u2026\u201d no more. \u5c31\u662f\u53ef\u80fd\u6709\u4e00\u4e9b\u975e\u5f00\u6e90\u7684\u8f6f\u4ef6, \u63d0\u4f9b\u4e86\u4e00\u79cd\u4e00\u952e\u4e0b\u8f7d\u5b89\u88c5\u7684\u65b9\u5f0f.</li> <li>\u6ce8\u610f, \u6709\u4e9b\u8f6f\u4ef6 Formulae\u548cCasks \u540c\u540d, \u4f8b\u5982 <code>tailscale</code>, \u5b98\u65b9\u7684\u5f00\u6e90\u7248\u672c\u6ca1\u6709GUI, \u56e0\u6b64\u82e5\u8981\u5b89\u88c5\u53d1\u5e03\u7684\u7248\u672c\u9700\u8981\u52a0\u4e0a <code>brew install --cask tailscale</code>.</li> </ul> </li> </ul> <p>\u4f8b\u5982\u4e0b\u9762\u662f\u6211\u76ee\u524d\u4e00\u53f0\u673a\u5668\u7684\u5217\u8868. \u5e38\u7528\u7684GUI\u8f6f\u4ef6\u57fa\u672c\u5c31\u662f Casks \u7684\u90a3\u4e9b~</p> <pre><code>(base) \u279c  ~ brew list\n==&gt; Formulae\nautojump   gettext    libssh2    mpdecimal   qrencode   wget\naxel    go    libunistring   ncdu    readline   xz\nbat    google-authenticator-libpam libuv    ncurses    rust    zstd\nbrotli    htop    libzip    node@16    smartmontools\nc-ares    icu4c    lz4    openssl@1.1   sqlite\nca-certificates   libidn2    mongodb-community@5.0  pandoc    tldr\ncmake    libnghttp2   mongodb-database-tools  pkg-config   trash\ngdbm    libpng    mongosh    python@3.10   tree\n\n==&gt; Casks\nadrive    iina    neteasemusic   sensei    tencent-meeting   wechat\nalt-tab    iterm2    obsidian   sublime-text   thunder\ncalibre    karabiner-elements  openinterminal   syncthing   ticktick\ncinebench   mathpix-snipping-tool  postman    tailscale   utools\neudic    microsoft-edge   qq    telegram   visual-studio-code\ngeekbench   miniforge   rar    tencent-lemon   visual-studio-code-insiders\n</code></pre> <p>\u9664\u4e86\u8f6f\u4ef6, brew \u8fd8\u53ef\u4ee5\u8fdb\u884c\u7cfb\u7edf\u670d\u52a1\u7ba1\u7406 (\u7c7b\u4f3c systemctl/services), \u89c1 <code>brew services --help</code>.</p>"},{"location":"os/macOS-intro/#_3","title":"\u5f00\u53d1\u76f8\u5173\u8f6f\u4ef6\u63a8\u8350","text":"<p>Note</p> <p>\u57fa\u672c\u539f\u5219: \u503e\u5411\u4e8e\u5f00\u6e90\u7684\u514d\u8d39\u8f6f\u4ef6, \u6536\u8d39\u8f6f\u4ef6\u786e\u5b9e\u6709\u9700\u6c42\u7684\u8bdd\u8003\u8651\u8d2d\u5165.</p> <pre><code># \u4e0b\u9762\u7684\u8f6f\u4ef6\u4e00\u822c\u90fd\u53ef\u4ee5 `brew install --cask microsoft-edge` \u7684\u5f62\u5f0f\u5b89\u88c5\n\nvisual-studio-code \u6700\u597d\u6709\u7684\u7f16\u8f91\u5668, \u751a\u81f3\u65e5\u5e38\u5199md\u7b14\u8bb0\u4e5f\u662f. \u552f\u4e00\u7684\u7f3a\u70b9\u662fElectron\u6709\u70b9\u5403\u5185\u5b58. \u2b50\ufe0f \u6709\u65f6\u95f4\u6574\u7406\u4e00\u4e0b\u5f53\u524d\u7684\u4f7f\u7528\u65b9\u6848.\nminiforge/miniconda Python\u5305\u7ba1\u7406\u8f6f\u4ef6. DL\u5f00\u53d1\u5fc5\u5907. \u5728 Apple silicon \u4e0a\u4f3c\u4e4e\u63a8\u8350 miniforge.\niterm2 \u524d\u8ff0\u7ec8\u7aef\u8f6f\u4ef6\nsublime-text \u7b80\u6d01\u9ad8\u6027\u80fd\u7684\u4ee3\u7801\u7f16\u8f91\u5668, \u4e0d\u8fc7\u65e5\u5e38\u7528vscode\nopeninterminal \u63d0\u4f9b\u4e86\u5728Finder\u4e2d\u9009\u62e9\u76ee\u5f55, \u5feb\u901f\u5728 vscode/iterm \u4e2d\u6253\u5f00\u7684\u529f\u80fd\npostman API\u8c03\u8bd5\u5de5\u5177\n\n# texshop \u4e0d\u8fc7Latex\u7a7a\u95f4\u5360\u7528\u786e\u5b9e\u5f88\u9ad8.\n</code></pre>"},{"location":"os/macOS-intro/#_4","title":"\u5176\u4ed6\u4e00\u4e9b\u6536\u8d39\u8f6f\u4ef6","text":"<pre><code>transmit SFTP\u5de5\u5177, \u540c\u6b65\u914d\u7f6e\u5f88\u65b9\u4fbf\nnavicat-premium \u6570\u636e\u5e93\u8fde\u63a5\u5de5\u5177\n</code></pre>"},{"location":"os/macOS-intro/#_5","title":"\u5176\u4ed6\u8f6f\u4ef6\u63a8\u4ecb","text":"<p>\u7b80\u8981\u5217\u8868: brew\u5b89\u88c5\u7684</p> <pre><code># \u4e0b\u9762\u7684\u8f6f\u4ef6\u4e00\u822c\u90fd\u53ef\u4ee5 `brew install --cask microsoft-edge` \u7684\u5f62\u5f0f\u5b89\u88c5\n\n# \u7f51\u7edc\nmicrosoft-edge \u65b0\u5ba0\u6d4f\u89c8\u5668, \u770b\u6765\u5fae\u8f6f\u4e0d\u4ec5\u662f\u300c\u6700\u4f73\u82f9\u679c\u5f00\u53d1\u8005\u300d, \u8fd8\u662f\u6700\u4f73 Chromium\u5f00\u53d1\u8005.\ntailscale \u7ec4\u865a\u62df\u5185\u7f51, \u4ece\u800c\u5b9e\u73b0\u4e0d\u9700\u8981\u8fdeVPN\u7684\u60c5\u51b5\u4e0b\u8fde\u63a5\u670d\u52a1\u5668\u7b49\u9700\u6c42.\nsyncthing \u591a\u7aef\u540c\u6b65\u9700\u6c42\nadrive \u963f\u91cc\u4e91\u76d8, \u8fd8\u633a\u597d\u7528.\nthunder \u4e0b\u8f7d. \n\n# \u5de5\u5177\ntencent-lemon \u826f\u5fc3\u7684\u8f85\u52a9\u8f6f\u4ef6. \u63d0\u4f9b\u4e86\u57fa\u672c\u591f\u7528\u7684\u529f\u80fd \u2b50\ufe0f\ncheatsheet \u957f\u6309cmd\u67e5\u770b\u5f53\u524d\u73af\u5883\u4e0b\u7684\u5feb\u6377\u952e.\nutools \u826f\u5fc3\u7684\u7cfb\u7edf\u5c0f\u5de5\u5177.\nalt-tab \u63d0\u4f9b\u4e86 `opt+tab` \u5728\u540c\u4e00\u8f6f\u4ef6\u7684\u4e0d\u540c windows \u5207\u6362\u7684\u529f\u80fd\nkarabiner-elements \u6539\u5efa, \u4f46\u5b9e\u9645\u4e0a\u4e0d\u548b\u7528.\n\n# \u6587\u5b57\neudic \u5b57\u5178\nmathpix-snipping-tool \u597d\u7528\u7684\u516c\u5f0f/\u6587\u5b57\u8bc6\u522b\u5de5\u5177 \u2b50\ufe0f\nobsidian \u633a\u597d\u7528\u7684\u7b14\u8bb0\u8f6f\u4ef6, \u80fd\u548cvscode\u517c\u5bb9.\n\n# \u5176\u4ed6\niina macOS\u4e0a\u5f88\u5f3a\u5927\u7684\u97f3\u89c6\u9891\u64ad\u653e\u8f6f\u4ef6\ntelegram \u597d\u7528\u7684\u901a\u8baf\u8f6f\u4ef6\n</code></pre> <p>\u5176\u4ed6</p> <pre><code>ishot \u597d\u7528\u7684\u622a\u56fe\u8f6f\u4ef6, \u514d\u8d39, \u4f46\u8981 MAS \u5b89\u88c5.\n</code></pre>"},{"location":"os/macOS-intro/#_6","title":"\u4e00\u4e9b\u6536\u8d39\u8f6f\u4ef6","text":"<p>Warning</p> <p>\u6709\u4e9b\u662f\u4e00\u4e9b\u5c0f\u529f\u80fd, \u4f46\u786e\u5b9e\u5e26\u6765\u4e86\u4e00\u5b9a\u7684\u4fbf\u6377\u6027. \u4f46\u5b9e\u9645\u9700\u6c42\u5e76\u4e0d\u9ad8.</p> <pre><code># \u6587\u5b57\nmweb-pro \u5f88\u826f\u5fc3\u7684mk\u7b14\u8bb0\u8f6f\u4ef6, \u5f00\u53d1\u8005\u4eba\u8d85\u597d (\u867d\u7136\u5df2\u8f6c\u5411vscode)\n\n# \u5b9e\u7528\u5c0f\u5de5\u5177\nmagnet \u7a97\u53e3\u7ba1\u7406\u5c0f\u5de5\u5177.\npopclip \u6ed1\u8bcd\u4e4b\u540e\u5f39\u51fa\u4e00\u4e9b\u5c0f\u5de5\u5177.\ntinycal \u6f02\u4eae\u7684\u72b6\u6001\u680f\u65e5\u5386\n\n# \u7cfb\u7edf\u5de5\u5177\napp-cleaner \u597d\u7528\u7684\u8f6f\u4ef6\u7ba1\u7406/\u6e05\u7406\u5de5\u5177\nkeyboard-maestro \u597d\u7528\u7684\u952e\u76d8/\u5feb\u6377\u952e\u5de5\u5177.\ndaisydisk \u597d\u7528\u7684\u78c1\u76d8\u53ef\u89c6\u5316\u5173\u8054\u5de5\u5177 (\u7a7a\u95f4\u4e0d\u591f\u7684\u65f6\u95f4\u633a\u6709\u7528)\n</code></pre>"},{"location":"os/macOS-softwares/","title":"macOS \u8f6f\u4ef6\u5217\u8868","text":"<p>Note</p> <p>\u6574\u7406\u5728\u7528/\u5c1d\u8bd5\u8fc7\u7684\u8f6f\u4ef6. \u5783\u573e\u6876\u72b6\u6001.</p>"},{"location":"os/macOS-softwares/#homebrewshell","title":"Homebrew+shell","text":"<ul> <li>https://brew.sh/</li> <li>https://formulae.brew.sh/</li> <li>\u7a0b\u5e8f\u5458 Homebrew \u4f7f\u7528\u6307\u5317 \u4e00\u7bc7\u975e\u5e38\u5168\u9762\u7684\u4ecb\u7ecd Homebrew \u7684\u6587\u7ae0\uff0c\u5305\u62ec\u4e86\u5982\u4f55\u5c06 Homebrew \u5b89\u88c5\u7684\u8f6f\u4ef6\u5168\u90e8\u8fc1\u79fb\u5230\u65b0\u8bbe\u5907\u7b49</li> </ul>"},{"location":"os/macOS-softwares/#zshconda","title":"zsh+conda+\u8f6f\u4ef6\u5b89\u88c5","text":"<pre><code># \u5b89\u88c5 brew\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n\n# vim \u590d\u5236\u5df2\u6709\u7684\u914d\u7f6e\u6587\u4ef6\ncp code/00-config/configs/shell/.vimrc ~/\n\n# \u914d\u7f6e zsh\nbrew install --cask iterm2      # iterm2\n# Install Oh My Zsh\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\nchsh -s $(which zsh) # \u4f3c\u4e4e  Monterey \u9ed8\u8ba4\u5c31\u662f zsh?\n# ! \u56e0\u4e3a\u5907\u4efd\u4e86\u914d\u7f6e, \u76f4\u63a5\u590d\u5236\u8fc7\u6765\ncp code/00-config/configs/shell/.zshrc ~/\nsource ~/.zshrc\n# \u5b89\u88c5\u63d2\u4ef6: zsh-syntax-highlighting, zsh-autosuggestions autojump\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\ngit clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\nbrew install autojump # j\nsource ~/.zshrc\n\n# \u57fa\u672c\u8f6f\u4ef6\nbrew install htop   # htop\nbrew install tree   # tree\nbrew install trash  # \u7528 trash \u66ff\u6362 rm\nbrew install carlocab/personal/unrar # x=extract \u89e3\u538b rar \u6587\u4ef6\u8c03\u7528\nbrew install bat    # \u589e\u5f3a cat\n\n# \nbrew install wget\n\n# VS Code; Sublime\nbrew install --cask visual-studio-code # \u5b98\u65b9\u4e0b\u8f7d\u5b89\u88c5\u5305\u597d\u6162\u6765\u7740\nbrew install --cask sublime-text\n\n# conda\nbrew install --cask miniconda\nconda init zsh\n\n# go\nbrew install go # VS Code \u53ef\u4ee5\u81ea\u52a8\u8bc6\u522b\u5b89\u88c5\u76f8\u5173\u8c03\u8bd5\u5de5\u5177\n\n# Applications\nbrew install --cask neteasemusic # \u7f51\u6613\u4e91\u97f3\u4e50\nbrew install --cask iina # IINA\nbrew install --cask wechat qq # WeChat QQ\n# brew install --cask keka # \u538b\u7f29\u8f6f\u4ef6\n\n# Tools\nbrew install --cask utools # uTools\n# brew \u5b89\u88c5\u7684\u4e0d\u77e5\u9053\u4e3a\u5565\u6709\u65f6\u5019\u65e0\u6cd5\u8f93\u5165\u4e2d\u6587? \u8fd8\u662f MAS\u5b89\u88c5\u5427\n# brew install --cask eudic # \u6b27\u8def\u8bcd\u5178\nbrew install --cask karabiner-elements # \u6539\u952e\n</code></pre>"},{"location":"os/macOS-softwares/#brew","title":"\u5e38\u7528 brew \u547d\u4ee4","text":"<p>\u5e38\u7528\u7684\u6709 <code>search, install, info, services</code> \u7b49</p> <pre><code>brew \u2013version\u6216\u8005brew -v \u663e\u793abrew\u7248\u672c\u4fe1\u606f\nbrew install &lt;formula&gt; \u5b89\u88c5\u6307\u5b9a\u8f6f\u4ef6\nbrew unistall &lt;formula&gt; \u5378\u8f7d\u6307\u5b9a\u8f6f\u4ef6\nbrew list \u663e\u793a\u6240\u6709\u7684\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\nbrew search text \u641c\u7d22\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93\u7684\u8f6f\u4ef6\uff0c\u5df2\u5b89\u88c5\u4f1a\u663e\u793a\u7eff\u8272\u7684\u52fe\nbrew search /text/ \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u8f6f\u4ef6\nbrew update \u81ea\u52a8\u5347\u7ea7homebrew\uff08\u4ecegithub\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\uff09\nbrew outdated \u68c0\u6d4b\u5df2\u7ecf\u8fc7\u65f6\u7684\u8f6f\u4ef6\nbrew upgrade \u5347\u7ea7\u6240\u6709\u5df2\u8fc7\u65f6\u7684\u8f6f\u4ef6\uff0c\u5373\u5217\u51fa\u7684\u4ee5\u8fc7\u65f6\u8f6f\u4ef6\nbrew upgrade &lt;formula&gt;\u5347\u7ea7\u6307\u5b9a\u7684\u8f6f\u4ef6\nbrew pin &lt;formula&gt; \u7981\u6b62\u6307\u5b9a\u8f6f\u4ef6\u5347\u7ea7\nbrew unpin &lt;formula&gt; \u89e3\u9501\u7981\u6b62\u5347\u7ea7\nbrew upgrade \u2013all \u5347\u7ea7\u6240\u6709\u7684\u8f6f\u4ef6\u5305\uff0c\u5305\u62ec\u672a\u6e05\u7406\u5e72\u51c0\u7684\u65e7\u7248\u672c\u7684\u5305\nbrew services \u2013help \u67e5\u770bbrew\u5982\u4f55\u7ba1\u7406\u670d\u52a1\n</code></pre>"},{"location":"os/macOS-softwares/#services","title":"\u7cfb\u7edf services \u7ba1\u7406","text":"<pre><code>brew services list\uff1a \u67e5\u770b\u6240\u6709\u670d\u52a1\nbrew services run [\u670d\u52a1\u540d]: \u5355\u6b21\u8fd0\u884c\u67d0\u4e2a\u670d\u52a1\nbrew services start [\u670d\u52a1\u540d]: \u8fd0\u884c\u67d0\u4e2a\u670d\u52a1\uff0c\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\u3002\nbrew services stop [\u670d\u52a1\u540d]\uff1a\u505c\u6b62\u67d0\u4e2a\u670d\u52a1\nbrew services restart\uff1a\u91cd\u542f\u67d0\u4e2a\u670d\u52a1\u3002\n</code></pre>"},{"location":"os/macOS-softwares/#brew_1","title":"brew \u5b89\u88c5\u7684\u8f6f\u4ef6\u8fc1\u79fb\u5230\u65b0\u7535\u8111","text":"<pre><code># \u65e7\u7535\u8111: \u5b89\u88c5 bundle \u5e76 dump, \u4f1a\u751f\u6210\u6587\u4ef6 Brewfile\nbrew bundle dump\ncat Brewfile\n\n# \u590d\u5236 Brewfile \u5230\u65b0\u7535\u8111; \u5b89\u88c5\nbrew bundle\n</code></pre>"},{"location":"os/macOS-softwares/#_1","title":"\u547d\u4ee4\u884c","text":""},{"location":"os/macOS-softwares/#_2","title":"\u547d\u4ee4\u884c\u5feb\u6377\u952e","text":"<p>\u53ef\u53c2\u8003 iTerm2 \u5feb\u6377\u952e\u5927\u5168\uff0c\u4f46\u5176\u5b9e\u5e38\u7528\u7684\u4e5f\u4e0d\u662f\u5f88\u591a\uff0c\u4e3b\u8981\u662f Ctrl \u7684\u7ec4\u5408\u952e\uff1a</p> <ul> <li><code>Ctrl+A</code>, <code>Ctrl+E</code> \u79fb\u52a8\u5149\u6807\u5728\u884c\u9996/\u884c\u5c3e\uff1b</li> <li><code>Ctrl+W</code>, <code>Ctrl+K</code> \u5220\u9664\u5149\u6807\u524d/\u540e\u7684\u5185\u5bb9\uff1b</li> <li><code>Ctrl+U</code> \u6e05\u9664\u4e00\u884c\uff08\u4e0d\u8fc7 <code>Ctrl+C</code> \u597d\u50cf\u53ef\u4ee5\u66ff\u4ee3\uff1f\uff09\uff1b</li> <li><code>Ctrl+L</code> \u6e05\u7a7a\u5c4f\u5e55</li> </ul>"},{"location":"os/macOS-softwares/#_3","title":"\u8f6f\u4ef6\u5217\u8868 (\u7b80)","text":""},{"location":"os/macOS-softwares/#_4","title":"\u6548\u7387/\u5de5\u5177\u7c7b","text":"<p>Menubar \u5de5\u5177</p> <ul> <li>\u7cfb\u7edf\u76d1\u63a7<ul> <li>iStat Menus, Sensei</li> <li>App Tamer: \u9650\u5236APP\u7684CPU\u5360\u7528</li> <li>Macs Fan Control \u5982\u5176\u540d\u63a7\u5236\u98ce\u6247</li> <li>TG Pro \u6e29\u5ea6\u548c\u98ce\u6247\u76d1\u63a7</li> </ul> </li> <li>\u663e\u793a\u5668\u4eae\u5ea6\u97f3\u91cf\u8c03\u8282: MonitorControl \u4f46\u8bd5\u7528\u4e86\u4e24\u6b21\u90fd\u9ed1\u5c4f\u6216\u8005\u95ea\u70c1, \u6682\u65f6\u6ca1\u627e\u5230\u597d\u7684</li> <li>\u7a97\u53e3<ul> <li>\u7a97\u53e3\u7ba1\u7406: Moom</li> <li>HazeOver: \u6a21\u7cca\u80cc\u666f\u4ee5\u7a81\u51fa\u5f53\u524d\u7a97\u53e3</li> <li>SlidePad: menubar\u4e0a\u7684\u5e38\u9a7b\u5c0f\u6d4f\u89c8\u5668</li> </ul> </li> <li>\u65e5\u5386/\u4ee3\u529e<ul> <li>Tinycal: \u633a\u597d\u7528\u7684menubar\u65e5\u5386. \u7c7b\u4f3c\u7684\u6709 Istycal</li> <li>TickTick \u6ef4\u7b54\u6e05\u5355: \u652f\u6301\u5168\u5c40\u5feb\u6377\u952e\u633a\u65b9\u4fbf</li> </ul> </li> <li>\u5de5\u5177<ul> <li>uTools \u7cfb\u7edf\u5de5\u5177</li> <li>Bartender 4: \u89e3\u51b3Menu\u4e0d\u591f\u653e\u7684\u95ee\u9898</li> <li><code>Mathpix Snipping Tool</code>: \u597d\u7528\u7684\u6587\u5b57+\u516c\u5f0f\u8bc6\u522b\u5de5\u5177. \u76f8\u8f83\u800c\u8a00 <code>iText</code> \u5c31\u900a\u8272\u5f88\u591a\u4e86</li> <li><code>PopClip</code>: \u9009\u4e2d\u5f39\u51fa\u5feb\u6377\u5de5\u5177</li> <li>Xnip: \u622a\u957f\u56fe\u5de5\u5177</li> </ul> </li> </ul> <p>\u540e\u53f0\u5de5\u5177</p> <ul> <li>\u5feb\u6377\u952e<ul> <li>CheatSheet: \u67e5\u770b\u5feb\u6377\u952e</li> <li>ShortcutDetective: \u67e5\u770b\u5feb\u6377\u952e\u51b2\u7a81</li> </ul> </li> <li>\u4e13\u6709\u8f6f\u4ef6<ul> <li>Logitech Options</li> </ul> </li> <li>Karabiner-Elements: \u6539\u952e\u5de5\u5177</li> <li>AltTab: \u91c7\u7528 Opt+Tab \u8fdb\u884c\u540c\u4e00\u5e94\u7528\u4e0d\u540c\u7a97\u53e3\u4e4b\u95f4\u7684\u5207\u6362</li> </ul> <p>\u7cfb\u7edf\u5de5\u5177</p> <ul> <li>App Cleaner &amp; Uninstaller: \u7cfb\u7edf\u6e05\u7406/\u7ba1\u7406; \u2b50\ufe0f</li> <li>Tencent Lemon: \u817e\u8baf\u5c11\u6709\u7684\u826f\u5fc3\u8f6f\u4ef6</li> <li>\u78c1\u76d8\u7ba1\u7406<ul> <li><code>DaisyDisk</code>: \u7a7a\u95f4\u7ba1\u7406 \u2b50\ufe0f</li> <li>\u642d\u914d\u547d\u4ee4\u884c <code>ncdu</code> \u4f7f\u7528</li> </ul> </li> <li>\u901a\u8baf<ul> <li>Telegram: \u5b87\u5b99\u7b2c\u4e00\u901a\u8baf\u8f6f\u4ef6 \u2b50\ufe0f</li> </ul> </li> <li>\u955c\u50cf\u70e7\u5f55: <code>balenaEtcher</code></li> <li>\u6bd4\u8f83\u6587\u4ef6/\u6587\u4ef6\u5939: \u4eceLinux\u8fc7\u6765\u7684 <code>Meld</code>.</li> </ul>"},{"location":"os/macOS-softwares/#code","title":"code/\u5f00\u53d1","text":"<ul> <li>\u7f16\u8f91\u5668<ul> <li>VS Code: \u4e3b\u529b\u8f6f\u4ef6 \u2b50\ufe0f\u2b50\ufe0f</li> <li>Sublime Text: \u6027\u80fd\u4e0d\u9519, \u8f7b\u91cf\u7ea7, \u73b0\u5728\u53ea\u7528\u6765\u6b63\u5219\u66ff\u6362\ud83d\ude02</li> <li>PyCharm \u5b66\u751f\u8d26\u53f7\u7684\u8bdd\u53ef\u4ee5\u8bd5\u8bd5</li> </ul> </li> <li>\u7ec8\u7aef<ul> <li>iTerm2 \u53ef\u4ee5\u5bfc\u5165\u914d\u7f6e\u6587\u4ef6 \u2b50\ufe0f</li> </ul> </li> <li>Transmit: SFTP\u5de5\u5177, \u540c\u6b65\u914d\u7f6e</li> <li>Postman: API \u5de5\u5177</li> <li>Docker</li> <li>\u6570\u636e\u5e93<ul> <li>Navicat</li> <li>DataGrid</li> </ul> </li> <li>LaTex<ul> <li>VS Code \u63d2\u4ef6</li> <li>TexShop</li> </ul> </li> </ul> <p>\u7528\u8fc7\u7684\u4e00\u4e9b\u540e\u7aef (brew \u5b89\u88c5)</p> <ul> <li>nginx</li> <li>mongodb-community</li> <li>elasticsearch-full</li> <li>kibana-full</li> <li>redis</li> </ul>"},{"location":"os/macOS-softwares/#_5","title":"\u6587\u672c: \u7b14\u8bb0/\u6587\u6863\u7ba1\u7406\u8f6f\u4ef6","text":"<ul> <li>\u7b14\u8bb0<ul> <li>\u57fa\u672c\u65b9\u6848: VSCode Markdown + meida \u672c\u5730\u5b58\u50a8 + iCloud + git \u7ba1\u7406</li> <li>Obsidian: \u975e\u4e13\u4e1a\u7684\u4e2a\u4eba\u6536\u96c6\u653e\u8fd9\u91cc, \u63d2\u4ef6\u4f53\u7cfb\u5f88\u5b8c\u5584</li> <li>Typora \u7f16\u8f91\u548c\u6d4f\u89c8\u4f53\u9a8c\u6781\u4f73, \u5927\u6587\u4ef6\u6027\u80fd\u4e0d\u884c; \u957f\u671f\u516c\u6d4b\u540e\u7ec8\u4e8e\u6536\u8d39\u4e86</li> <li><code>MWeb</code>: \u4e2a\u4eba\u5f00\u53d1\u7684\u8d85\u8d5e Markdown \u7b14\u8bb0\u8f6f\u4ef6</li> <li>Notion: \u901f\u5ea6\u592a\u6162, \u5f03\u4e86</li> <li>Lark \u98de\u4e66: \u66ff\u4ee3 Notion\u7684\u6570\u636e\u5e93\u529f\u80fd?</li> <li>Bear: UI\u633a\u597d\u770b</li> <li>\u5176\u4ed6\u5c1d\u8bd5\u8fc7\u7684: Logseq, Draft, Quiver. \u6ca1\u6709\u6df1\u5165\u4f53\u9a8c.</li> </ul> </li> <li>\u5199\u4f5c\u5de5\u5177<ul> <li>DeepL</li> <li>Xmind: \u8111\u56fe</li> <li>OmniFocus: \u5927\u7eb2</li> </ul> </li> <li>\u9605\u8bfb<ul> <li><code>DEVONthink</code>: \u5185\u5bb9 #\u7ba1\u7406</li> <li>Calibre: \u514d\u8d39\u7684\u7535\u5b50\u4e66 #\u7ba1\u7406 + \u9605\u8bfb\u5668. \u5f53\u7136, \u81ea\u5e26\u7684 Reader UI\u5f88\u7b80\u6d01.</li> <li><code>Reeder</code>: SSR\u9605\u8bfb\u5668</li> <li>Klib: \u6216\u8bb8\u7528\u5f97\u5230\u7684\u7b14\u8bb0\u5bfc\u51fa\u6574\u5408\u5de5\u5177</li> <li><code>PDF Expert</code> \u2b50\ufe0f</li> <li>Clearview: \u6709\u70b9\u4e11</li> </ul> </li> <li>\u6587\u6863\u7ba1\u7406<ul> <li>Zotero</li> </ul> </li> </ul>"},{"location":"os/macOS-softwares/#_6","title":"\u7f51\u7edc/\u6d4f\u89c8\u5668/\u5b58\u50a8","text":"<ul> <li>\u6d4f\u89c8\u5668<ul> <li>Chrome<ul> <li>Chrome \u5feb\u6377\u952e</li> </ul> </li> </ul> </li> <li>\u79d1\u5b66\u4e0a\u7f51<ul> <li>ClashX, ClashX Pro, Clash for Windows</li> <li>Proxifier \u4f46\u5b9e\u9645\u4e0a\u4e00\u76f4\u6ca1\u600e\u4e48\u7528\u8fc7</li> </ul> </li> <li>\u4e91\u76d8<ul> <li>\u963f\u91cc\u4e91\u76d8 aDriver, \u575a\u679c\u4e91</li> <li>BaiduNetdisk \u65e0\u5948\u7559\u7740</li> </ul> </li> <li>\u4e0b\u8f7d<ul> <li>\u8fc5\u96f7: \u975e\u76f4\u94fe\u4e0b\u8f7d\u7684\u8fd8\u662f\u7528\u56de\u4e86\u8fc5\u96f7, \u901f\u5ea6\u8fd8\u53ef\u4ee5\u63a5\u53d7.</li> <li>\u6709\u76f4\u94fe\u7684\u8bdd\u76f4\u63a5 <code>axel</code></li> <li>Downie 4: \u89c6\u9891\u4e0b\u8f7d</li> <li><code>Batch Link Downloader</code>: \u6d4f\u89c8\u5668\u63d2\u4ef6, \u7528\u4e8e\u6279\u91cf\u4e0b\u8f7d PDF \u7b49</li> <li>Aria2</li> </ul> </li> <li>\u5de5\u5177<ul> <li>\u6d4b\u901f: Speedtest</li> <li>\u6587\u4ef6\u4f20\u8f93: <code>Transmit</code> \u591a\u7aef\u540c\u6b65\u7684\u529f\u80fd\u5f88\u597d\u7528</li> <li>Synology Drive Client: Synology \u76f8\u5173\u8f6f\u4ef6\u4e0b\u8f7d</li> </ul> </li> <li>VPN<ul> <li>EasyConnect: \u5b66\u6821 VPN, download</li> </ul> </li> </ul>"},{"location":"os/macOS-softwares/#_7","title":"\u5176\u4ed6","text":"<ul> <li>Artpaper: \u4e00\u6b3e\u514d\u8d39\u7684\u58c1\u7eb8\u5de5\u5177</li> </ul>"},{"location":"os/macOS-softwares/#_8","title":"\u5de5\u5177\u7c7b\u8f6f\u4ef6\u793a\u4f8b","text":""},{"location":"os/macOS-softwares/#utools","title":"uTools","text":"<p>\u89c1 [[uTools.md]]</p> <ul> <li>\u733f\u6599\u793e\u533a: https://yuanliao.info/</li> <li>Doc https://u.tools/docs/guide/about-uTools.html \u5165\u95e8\u53ca\u5176\u7b80\u8981\uff0c\u4f46\u6709\u63d2\u4ef6\u5f00\u53d1\u6307\u5357</li> <li>\u76f8\u5173\u63d2\u4ef6<ul> <li>\u7f51\u9875\u5feb\u5f00; \u805a\u5408\u7ffb\u8bd1; \u989c\u8272\u52a9\u624b; \u526a\u5207\u677f</li> </ul> </li> </ul>"},{"location":"os/macOS-softwares/#automator","title":"Automator","text":"<ul> <li>\u5b98\u65b9\u6559\u7a0b Automator User Guide</li> <li>Mac \u5229\u7528 Automator \u81ea\u52a8\u5316\u4f60\u7684\u5de5\u4f5c\uff08pod\u3001git\u7b49\u7ec8\u7aef\u64cd\u4f5c\uff09</li> </ul>"},{"location":"os/macOS-softwares/#pdf","title":"\u6848\u4f8b: PDF \u538b\u7f29","text":"<p>\u53c2\u89c1 \u5982\u4f55\u7528 Automator \u5728 Mac \u4e0a\u6279\u91cf\u538b\u7f29 PDF \uff0c\u5176\u4e2d\u7b2c\u4e8c\u4e2a workflow \u53ef\u5b9e\u73b0\u539f\u5730\u538b\u7f29 PDF \u6587\u4ef6\u3002</p> <p>\u4e3b\u8981\u7684\u601d\u8def\u662f\uff1a1. \u5148\u63a5\u53d7\u4f20\u8f93\u7684\u6587\u4ef6 filePath\uff1b2. \u8fd0\u884c shell \u811a\u672c <code>dirname \"$1\"</code> \u83b7\u5f97\u5f53\u524d\u7684\u76ee\u5f55 floderName\uff1b3. \u83b7\u53d6 filePath \u7684\u503c\u4f20\u5165\u8fdb\u884c\u538b\u7f29\uff1b4. \u79fb\u52a8\u8f93\u51fa\u7684\u6587\u4ef6\u5230 folderName\u3002</p>"},{"location":"os/macOS-softwares/#_9","title":"\u5176\u4ed6\u8f6f\u4ef6","text":""},{"location":"os/macOS-softwares/#word","title":"Word \u4f7f\u7528","text":"<ul> <li>\u751f\u6210\u76ee\u5f55\uff08\u786e\u4fdd\u6587\u7ae0\u7684\u6807\u9898\u5c42\u7ea7\uff09Word\u5199\u8bba\u6587\u5982\u4f55\u751f\u6210\u76ee\u5f55\uff1f</li> <li>\u516c\u5f0f\u7f16\u53f7\uff08\u624b\u52a8\u8bbe\u7f6e\u683c\u5f0f\uff09word\u516c\u5f0f\u7f16\u53f7\u4e0e\u5f15\u7528\u8be6\u7ec6\u6559\u7a0b\u2013\u5236\u8868\u7b26\u3001\u9898\u6ce8\u3001\u4ea4\u53c9\u5f15\u7528<ul> <li>\u6ce8\u610f\u6253\u5f00\u6807\u5c3a\u53ef\u80fd\u5c3a\u5ea6\u6709\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u7684\u662f\u663e\u793a\u5b57\u7b26\u7684\u6570\u91cf\uff0c\u5728\u300c\u8bbe\u7f6e-\u5e38\u89c4-\u663e\u793a\u5ea6\u91cf\u5355\u4f4d\u300d\u91cc\u9009\u62e9\u300c\u6d3e\u5361\u300d\uff1f</li> </ul> </li> <li>\u516c\u5f0f\u8f6c\u6362<ul> <li>\u548cLatex\u8bed\u6cd5\u5e76\u4e0d\u4e00\u81f4\uff0c\u5bf9\u4e8e\u652f\u6301\u7684\u8bed\u6cd5\uff0c\u53ef\u4ee5\u70b9\u51fb\u300c\u8bbe\u8ba1\u3001\u8f6c\u6362\u3001\u5f53\u524d\u4e13\u4e1a\u300d\u6216\u8005\u76f4\u63a5\u70b9\u51fb\u516c\u5f0f\u53f3\u8fb9\u7684\u4e09\u89d2\u5f62\u6309\u94ae\u9009\u300c\u4e13\u4e1a\u300d</li> <li>\u6216\u8005\u7528 Mathpix Snip \u6216\u8005 Pages \u8f6c\u6362\uff1f</li> </ul> </li> </ul>"},{"location":"os/macOS-softwares/#_10","title":"\u56fe\u7247\u7ba1\u7406\u65b9\u6848 (\u6784\u5efa\u4e2d)","text":"<ul> <li>\u53c2\u89c1 \u5982\u4f55\u9ad8\u6548\u5730\u6574\u7406\u7167\u7247\u53ca\u7ba1\u7406\u7167\u7247\uff1f</li> </ul> <p>\u5c1d\u8bd5\u7684\u8f6f\u4ef6</p> <ul> <li>Billfish</li> <li>Lightroom</li> <li>Photos</li> <li>Inboard</li> <li>Picsee \u56fe\u7247\u5206\u7c7b\u548c\u7ba1\u7406\uff0c\u539f\u751f\u4f3c\u4e4e\u66f4\u597d\u7528</li> <li>Mylio \u548c\u539f\u751f\u7684 Photos \u5f88\u7c7b\u4f3c\uff1b\u6bd4\u5982\u6309\u7167\u65e5\u5386\u5f62\u5f0f\u5c55\u73b0\u7684\u7279\u6027\u5f88\u597d\uff1b\u4f46\u4f7f\u7528\u5c42\u9762\u4e0a\u4ece\u6d41\u7545\u6027\u3001\u7cfb\u7edf\u96c6\u6210\u5ea6\u3001\u7f16\u8f91\u7684\u76f4\u89c2 \u90fd\u8981\u843d\u540e\u4e8e\u539f\u751f</li> </ul> <p>\u5927\u7231\u539f\u751f\u7684 photos</p> <ul> <li>Docs https://support.apple.com/zh-cn/guide/photos/welcome/mac<ul> <li>Title Caption \u7b49 https://support.apple.com/zh-cn/guide/photos/phta4e5a733f/mac</li> </ul> </li> <li>\u63d2\u4ef6<ul> <li>Mimeo Photos \u4e0d\u662f\u5f88\u597d\u7528\u7684\u76f8\u518c\u5236\u4f5c\u63d2\u4ef6</li> </ul> </li> </ul>"},{"location":"os/macOS-softwares/#archive","title":"Archive","text":"<p>Note</p> <p>\u6709\u540c\u7c7b\u578b\u66ff\u6362\u7684\u3001\u4e0d\u518d\u4f7f\u7528\u7684\u3001\u505c\u6b62\u7ef4\u62a4\u7684</p>"},{"location":"os/macOS-softwares/#alfred","title":"Alfred","text":"<p>\u6700\u91cd\u8981\u7684\uff0c\u8fd8\u662f\u67e5\u770b\u5b98\u65b9\u6587\u6863 Getting Started with Alfred 4 for Mac\u3002</p> <p>\u81ea\u5df1\u7b80\u5355\u770b\u4e86\u5c11\u6570\u6d3e\u4e0a\u7684 \u4ece\u96f6\u5f00\u59cb\u5b66\u4e60 Alfred\uff1a\u57fa\u7840\u529f\u80fd\u53ca\u8bbe\u7f6e\uff0c\u5c31\u662f\u5f88\u7b80\u5355\u5730\u7f57\u5217\u4e86 Feature \u4e2d\u4e0d\u540c\u9009\u9879\u7684\u610f\u601d\uff1b</p> <p>\u6bd4\u5982\u6211\u76ee\u524d\u7528\u5230\u7684</p> <ul> <li>\u5e94\u7528\u3001\u6587\u4ef6\u641c\u7d22<ul> <li><code>/</code> <code>~</code> \u53ef\u5b9a\u4f4d\u5230\u6839\u76ee\u5f55\u6216\u7528\u6237\u6587\u4ef6\u5939\uff1b</li> </ul> </li> <li>Bookmark \u641c\u7d22\uff0c\u53ef\u60dc\u597d\u50cf\u4e0d\u80fd\u641c\u7d22\u7f51\u9875\u540d\u5b57\u800c\u662f\u76f4\u63a5\u68c0\u7d22\u7f51\u9875\u5730\u5740\uff1b</li> <li>\u81ea\u5b9a\u4e49\u7f51\u9875\u641c\u7d22 Web Search\uff1b</li> <li><code>Opt+Cmd+C</code> \u526a\u5207\u677f\u5386\u53f2</li> </ul>"},{"location":"os/macOS/","title":"macOS","text":"<p>\u5173\u8054 [[Hackintosh.md]]; [[macOS-softwares.md]];</p>"},{"location":"os/macOS/#_1","title":"\u684c\u9762\u7ba1\u7406","text":"<ul> <li>\u6700\u591a\u8bbe\u7f6e\u4e09\u4e2aWindow<ul> <li>\u4e3b\u5de5\u4f5c\u533a</li> <li>\u526f\u5de5\u4f5c\u533a</li> <li>\u4f11\u95f2\u533a: \u89c6\u9891, \u9605\u8bfb, LeetCode</li> </ul> </li> </ul>"},{"location":"os/macOS/#_2","title":"\u529f\u80fd: \u540c\u6b65","text":"<ul> <li>iCloud<ul> <li>\u8bbe\u7f6e iCloud Drive \u540c\u6b65\u684c\u9762\u548c\u6587\u6863\u6587\u4ef6\u5939</li> </ul> </li> <li>TamperMonkey \u53ef\u4ee5\u901a\u8fc7 Google Drive \u540c\u6b65</li> </ul>"},{"location":"os/macOS/#_3","title":"\u5feb\u6377\u952e","text":"<p>\u4e00\u4e9b\u5e38\u89c1\u7684\u5c31\u4e0d\u8bb2\u4e86\uff0c\u5982 <code>Cmd+N</code>, <code>Cmd+T</code>, <code>Cmd+W</code>, <code>Cmd+Q</code>, <code>Cmd+,</code>\u3002\u8fd9\u7bc7\u6587\u7ae0 \u8fd8\u4ecb\u7ecd\u4e86</p> <ul> <li><code>Cmd+`</code> \u5728\u540c\u4e00\u8f6f\u4ef6\u7684\u4e0d\u540c Window \u95f4\u5207\u6362\uff0c\u7c7b\u4f3c <code>Cmd+Tab</code> \uff1b</li> <li><code>Cmd+Shift+[</code> \u6216 <code>Cmd+Shift+]</code>\uff0c\u5728\u4e0d\u540c\u6807\u7b7e\u4e0b\u79fb\u52a8\uff1b</li> <li><code>Cmd+Control+Space</code> \u81ea\u5e26\u7684\u7279\u6b8a\u7b26\u53f7\u548c\u8868\u60c5\uff1b</li> <li><code>F11</code> \u67e5\u770b\u684c\u9762\uff1b</li> </ul> <p>\u81ea\u884c\u8bbe\u7f6e\u7684\u5168\u5c40\u5feb\u6377\u952e</p> <ul> <li>AltTab<ul> <li><code>Option+`</code> \u5728\u540c\u4e00\u8f6f\u4ef6\u7684\u4e0d\u540ctab\u4e0b\u5207\u6362</li> </ul> </li> <li>Ticktick<ul> <li><code>Shift+Cmd+A</code> \u663e\u793aTicktick\u754c\u9762</li> </ul> </li> </ul>"},{"location":"os/macOS/#_4","title":"\u5feb\u6377\u952e\u8fc1\u79fb","text":"<ul> <li>\u5feb\u6377\u952e\u8fc1\u79fb\uff1a\u5982\u4f55\u5c06\u6240\u6709\u952e\u76d8\u5feb\u6377\u952e\u4ece\u4e00\u53f0Mac\u8fc1\u79fb\u5230\u53e6\u4e00\u53f0?<ul> <li>\u7528 <code>defaults find NSUserKeyEquivalents</code> \u67e5\u770b\u81ea\u5b9a\u4e49\u5e94\u7528\u5feb\u6377\u952e</li> </ul> </li> </ul>"},{"location":"os/macOS/#_5","title":"\u67e5\u770b\u5feb\u6377\u952e\u5360\u7528","text":"<p>\u53c2\u89c1 How to Find Conflicting Keyboard Shortcuts on Mac\uff0c\u91cc\u9762\u63d0\u5230\u7684 ShortcutDetective  \u8f6f\u4ef6\u5f88\u597d\u7528\uff0c\u4f7f\u7528\u524d\u9700\u8981 Accessibility \u6743\u9650\u3002</p> <p>\u4e00\u5207\u7684\u539f\u56e0\uff0c\u662f\u56e0\u4e3a Alfred \u7684 <code>Opt+Space</code> \u88ab\u5360\u7528\u4e86\uff0c\u6700\u540e\u901a\u8fc7\u8fd9\u4e2a\u8f6f\u4ef6\u627e\u5230\u5c45\u7136\u662f Eudic\u2026\u2026</p> <p>\u53e6\u5916\uff0c\u53d1\u73b0\u8fd9\u4e2a\u7f51\u7ad9\u4f3c\u4e4e\u8fd8\u4e0d\u9519 https://www.irradiatedsoftware.com</p>"},{"location":"os/macOS/#_6","title":"\u9700\u6c42\u4e0e\u914d\u7f6e","text":""},{"location":"os/macOS/#finder","title":"\u91cd\u542f Finder","text":"<ul> <li>\u6309\u4f4f Option \u540e\u53f3\u952e Docker \u4e0a\u7684 Finder \u56fe\u6807</li> <li>\u7ec4\u5408\u952e <code>Command+Option+Escape</code> \u53ef\u4ee5\u5f3a\u5236\u5173\u95ed\u5e94\u7528</li> <li>\u5f53\u7136\u4e5f\u53ef\u4ee5\u6253\u5f00 <code>Activity Monitor</code> \u5173\u95ed</li> <li>Terminal <code>killall Finder</code></li> </ul>"},{"location":"os/macOS/#time-machine","title":"Time Machine \u5907\u4efd\u901f\u5ea6\u52a0\u901f","text":"<ul> <li>\u52a0\u5feb Time Machine \u7684\u5907\u4efd\u901f\u5ea6 Time Machine \u5f00\u542f\u5168\u901f\u5907\u4efd \u5176\u5b9e\u53ea\u9700\u8981\u4e00\u6761\u6307\u4ee4\u5373\u53ef\uff1a<code>sudo sysctl debug.lowpri_throttle_enabled=0</code>\uff0c\u82e5\u8981\u91cd\u7f6e\u5219\u91cd\u65b0\u8bbe\u7f6e\u4e3a 1 \u5373\u53ef\u3002</li> <li>\u6392\u67e5\u5907\u4efd\u6587\u4ef6 \u89e3\u51b3Time Machine\u6bcf\u6b21\u5907\u4efd\u90fd\u5f88\u5927\u95ee\u9898</li> </ul>"},{"location":"os/macOS/#_7","title":"\u5149\u6807\u79fb\u52a8\u6162","text":"<p>\u8bbe\u7f6e: <code>System Preference - Keyboard</code> \u4e2d\u5c06 <code>Key Repeat</code> \u548c <code>Delay Until Repeat</code> \u8c03\u5230\u6700\u5feb\u5373\u53ef\u3002</p>"},{"location":"os/macOS/#_8","title":"\u542f\u52a8\u9879\u7ba1\u7406","text":"<ul> <li>\u5728 <code>System Preference - Users &amp; Groups - Login Items</code> \u4e2d\u8bbe\u7f6e\u5373\u53ef\u3002</li> <li>\u5f53\u7136\u4e5f\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u914d\u7f6e\u4e5f\u53ef</li> </ul>"},{"location":"os/macOS/#debug","title":"Debug","text":""},{"location":"os/macOS/#smc","title":"\u91cd\u5236 SMC\uff08\u7cfb\u7edf\u7ba1\u7406\u63a7\u5236\u5668\uff09","text":"<p>\u6211\u91cd\u7f6e\u4e86\u4e00\u6b21 SMC \u5373\u89e3\u51b3\u4e86\u95ee\u9898\uff1a\u5728\u5173\u673a\u72b6\u6001\u4e0b\u957f\u6309 <code>Shift+Control+Option+\u7535\u6e90\u952e</code> \u4f1a\u4eae\u4e00\u4e0b\u56fe\u6807\uff1b\u7b49\u5f85\u5341\u79d2\u4e4b\u540e\u518d\u5f00\u673a\u5373\u53ef\u3002\u3010\u6839\u636e\u662f\u5426\u6709 T2 \u82af\u7247\u4f3c\u4e4e\u8981\u5206\u522b\u6309\u5de6\u53f3 Shift\uff0c\u8be6\u89c1\u5b98\u65b9\u6559\u7a0b\u3011 \u6458\u5f55 \u7cfb\u7edf\u7ba1\u7406\u63a7\u5236\u5668 (SMC) \u7684\u4f5c\u7528\uff1a\u7535\u6e90\uff0c\u5305\u62ec\u7535\u6e90\u6309\u94ae\u548c USB \u7aef\u53e3\u7684\u7535\u6e90\uff1b\u7535\u6c60\u548c\u5145\u7535\uff1b\u98ce\u6247\u548c\u5176\u4ed6\u70ed\u80fd\u7ba1\u7406\u529f\u80fd\uff1b\u6307\u793a\u706f\u6216\u611f\u5e94\u5668\uff0c\u4f8b\u5982\u72b6\u6001\u6307\u793a\u706f\uff08\u7761\u7720\u72b6\u6001\u3001\u7535\u6c60\u5145\u7535\u72b6\u6001\u7b49\uff09\u3001\u7a81\u53d1\u79fb\u52a8\u611f\u5e94\u5668\u3001\u73af\u5883\u5149\u4f20\u611f\u5668\u548c\u952e\u76d8\u80cc\u5149\uff1b\u6253\u5f00\u548c\u5408\u4e0a\u7b14\u8bb0\u672c\u7535\u8111\u76d6\u65f6\u7684\u884c\u4e3a\u3002 \u7b80\u800c\u8a00\u4e4b\uff0cSMC \u5bf9\u5e94\u7684\u662f \u4e0e\u7761\u7720\u3001\u5524\u9192\u3001\u7535\u6e90\u3001\u4e3a Mac \u7b14\u8bb0\u672c\u7535\u8111\u7535\u6c60\u5145\u7535\u6709\u5173\u7684\u95ee\u9898\u6216\u5176\u4ed6\u4e0e\u7535\u6e90\u76f8\u5173\u7684\u75c7\u72b6\u3002</p>"},{"location":"os/macOS/#nvram-pram","title":"\u91cd\u7f6e NVRAM \u548c PRAM","text":"<p>\u987a\u4fbf\u6458\u5f55 NVRAM \u548c PRAM \u7684\u4f5c\u7528\uff1a \u300cNVRAM\uff08\u975e\u6613\u5931\u6027\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668\uff09\u662f\u4e00\u5c0f\u90e8\u5206\u5185\u5b58\uff0cMac \u4f7f\u7528\u8fd9\u4e9b\u5185\u5b58\u6765\u50a8\u5b58\u67d0\u4e9b\u8bbe\u7f6e\u5e76\u5bf9\u5176\u8fdb\u884c\u5feb\u901f\u8bbf\u95ee\u3002PRAM\uff08\u53c2\u6570 RAM\uff09\u50a8\u5b58\u7740\u7c7b\u4f3c\u7684\u4fe1\u606f\uff0c\u4e14 NVRAM \u548c PRAM \u7684\u91cd\u7f6e\u6b65\u9aa4\u76f8\u540c\u3002 \u53ef\u50a8\u5b58\u5728 NVRAM \u4e2d\u7684\u8bbe\u7f6e\u5305\u62ec\u97f3\u91cf\u3001\u663e\u793a\u5c4f\u5206\u8fa8\u7387\u3001\u542f\u52a8\u78c1\u76d8\u9009\u62e9\u3001\u65f6\u533a\uff0c\u4ee5\u53ca\u6700\u8fd1\u7684\u5185\u6838\u5d29\u6e83\u4fe1\u606f\u3002\u50a8\u5b58\u5728 NVRAM \u4e2d\u7684\u8bbe\u7f6e\u53d6\u51b3\u4e8e\u60a8\u7684 Mac \u4ee5\u53ca\u4e0e\u8fd9\u53f0 Mac \u642d\u914d\u4f7f\u7528\u7684\u8bbe\u5907\u3002 \u5982\u679c\u60a8\u9047\u5230\u4e0e\u8fd9\u4e9b\u8bbe\u7f6e\u6216\u5176\u4ed6\u8bbe\u7f6e\u6709\u5173\u7684\u95ee\u9898\uff0c\u90a3\u4e48\u91cd\u7f6e NVRAM \u53ef\u80fd\u4f1a\u6709\u5e2e\u52a9\u3002\u4f8b\u5982\uff0c\u5982\u679c Mac \u5e76\u975e\u4ece\u201c\u542f\u52a8\u78c1\u76d8\u201d\u504f\u597d\u8bbe\u7f6e\u4e2d\u9009\u5b9a\u7684\u78c1\u76d8\u542f\u52a8\uff0c\u6216\u8005\u5728 Mac \u542f\u52a8\u524d\u77ed\u6682\u5730\u663e\u793a\u4e86\u4e00\u4e2a\u95ee\u53f7\u56fe\u6807\uff0c\u5219\u53ef\u80fd\u9700\u8981\u91cd\u7f6e NVRAM\u3002\u300d \u91cd\u7f6e\u7684\u65b9\u6cd5\u662f\u5728\u5173\u673a\u72b6\u6001\u4e0b\u957f\u6309 <code>Option+Command+P+R</code> \u7ea6 20 \u79d2\u3002</p> <p>\u53e6\u5916\u6458\u5f55\u4f7f\u7528\u300c\u7cfb\u7edf\u8bca\u65ad\u300d\u7684\u65b9\u6cd5\uff1aIntel CPU \u7684\u7535\u8111\u662f\u5728\u542f\u52a8\u65f6\u957f\u6309 <code>D</code> \u952e\u8fdb\u5165\u3002</p>"},{"location":"os/vscode-markdown/","title":"VSCode Markdown \u7b14\u8bb0\u65b9\u6848","text":"<p>\u8bf4\u660e: \u672c\u7bc7\u4ecb\u7ecd VSCode \u4e2d\u7684markdown\u7f16\u8f91\u4ecb\u7ecd, \u4e3b\u8981\u7528\u4f5c\u4e2a\u4eba\u7b14\u8bb0\u4ed3\u5e93, \u4f46\u76f8\u5173\u63d2\u4ef6\u5728\u65e5\u5e38, \u6bd4\u5982 README \u7684\u7f16\u8f91\u8fc7\u7a0b\u4e2d\u4e5f\u5f88\u597d\u7528. vscode \u7684\u4ecb\u7ecd\u548c\u4f7f\u7528\u63a8\u4ecb\u53c2\u89c1 [[vscode]]. </p> <p>ref</p> <ul> <li>doc</li> <li>\u53c2\u89c1 \u5728VSCode\u4e2d\u9ad8\u6548\u7f16\u8f91markdown\u7684\u6b63\u786e\u65b9\u5f0f. \u672c\u6587\u90e8\u5206\u53c2\u8003\u4e86</li> </ul>"},{"location":"os/vscode-markdown/#_1","title":"\u57fa\u672c\u4ecb\u7ecd","text":"<p>vscode \u539f\u751f\u652f\u6301\u7684\u76f8\u5173\u529f\u80fd</p> <ul> <li>\u81ea\u5e26\u9884\u89c8\u529f\u80fd</li> <li>\u5927\u7eb2\u89c6\u56fe\uff1a\u5927\u7eb2\u89c6\u56fe\u662f\u6587\u4ef6\u8d44\u6e90\u7ba1\u7406\u5668\u5e95\u90e8\u7684\u5355\u72ec\u90e8\u5206</li> <li>\u4e3a markdown \u63d0\u4f9b snippets</li> <li>\u5b89\u5168\u9884\u89c8. \u5b89\u5168\u8003\u8651\u9ed8\u8ba4\u4ec5\u7528\u4e86\u4e00\u4e9b\u529f\u80fd. \u53ef\u4ee5\u901a\u8fc7 <code>Markdown: Change preview security settings</code> \u4fee\u6539</li> <li>\u683c\u5f0f\u5316: <code>\"editor.defaultFormatter\": \"vscode.markdown-language-features\"</code></li> </ul>"},{"location":"os/vscode-markdown/#_2","title":"\u7b14\u8bb0\u7ba1\u7406\u788e\u788e\u5ff5","text":"<p>\u4e2a\u4eba\u7b14\u8bb0\u4ed3\u5e93\u642d\u5efa\u7ecf\u9a8c</p> <ul> <li>\u57fa\u672c\u601d\u8def: \u7eaf\u6587\u672c + Markdown\u8bed\u6cd5 + \u672c\u5730\u56fe\u7247 + \u7248\u672c\u7ba1\u7406</li> <li>\u4e3a\u4f55\u9009\u62e9\u7eaf\u6587\u672c? (\u800c\u4e0d\u4ea4\u7ed9\u67d0\u4e9b\u8f6f\u4ef6/\u5728\u7ebf\u670d\u52a1) \u7eaf\u6587\u672c\u7684\u597d\u5904\u5305\u62ec<ul> <li>\u68c0\u7d22\u529f\u80fd; \u8f6f\u4ef6\u517c\u5bb9\u6027</li> <li>vscode \u4e2d\u7f16\u8f91\u4f53\u9a8c\u6781\u4f73</li> <li>\u901f\u5ea6\u54cd\u5e94\u66f4\u5feb</li> </ul> </li> <li>\u8bed\u6cd5\u9009\u62e9: Markdown\u8bed\u6cd5<ul> <li>\u8bed\u6cd5\u7b80\u5355, \u5b66\u4e60\u6210\u672c\u4f4e</li> <li>\u914d\u5408\u63d2\u4ef6\u7684\u5feb\u6377\u952e\u751f\u6001.</li> <li>\u56fe\u7247\u7ba1\u7406: md \u6700\u56f0\u6270\u6211\u7684\u5e94\u8be5\u5c31\u662f\u56fe\u7247\u7ba1\u7406\u4e86, \u5c1d\u8bd5\u8fc7\u56fe\u5e8a\u4f46 \u514d\u8d39+\u7a33\u5b9a\u6027 \u4e0d\u53ef\u517c\u5f97, \u7d22\u6027\u672c\u5730\u7ba1\u7406, \u5c3d\u91cf\u51cf\u5c11\u56fe\u7247\u7684\u4f7f\u7528. <ul> <li>\u4fdd\u5b58\u76ee\u5f55: \u540c\u7ea7\u76ee\u5f55\u4e0b\u7684 <code>media/&lt;fname&gt;</code> \u4e0b</li> <li>\u6587\u6863\u79fb\u52a8: \u5728\u4fdd\u8bc1\u6587\u4ef6\u4e0d\u91cd\u540d\u7684\u57fa\u7840\u4e0a, \u81ea\u5df1\u5199\u4e86\u4e00\u4e2aPython\u811a\u672c\u7ba1\u7406.</li> </ul> </li> </ul> </li> <li>\u6587\u4ef6\u7ba1\u7406: \u5c3d\u91cf\u96c6\u4e2d\u5728\u540c\u4e00\u4e2a repo \u4e2d; \u5c42\u7ea7\u7ba1\u7406; \u914d\u5408\u7d22\u5f15\u5f62\u6210<ul> <li>\u6574\u5408\u5728\u4e00\u4e2arepo\u7684\u597d\u5904: <ul> <li>\u76ee\u5f55\u6e05\u6670\u76f4\u89c2; \u6d4f\u89c8\u4f53\u9a8c</li> <li>\u914d\u5408vscode\u7684\u641c\u7d22\u5339\u914d\u529f\u80fd, \u68c0\u7d22</li> <li>\u94fe\u63a5: wiki\u8bed\u6cd5 (\u89c1\u4e0b Foam)</li> </ul> </li> <li>\u5f88\u70ed\u7684\u300c\u53cc\u5411\u94fe\u63a5\u300d? \u914d\u5408 Foam \u63d2\u4ef6\u76f4\u63a5\u517c\u5bb9. \u4f46\u672c\u8d28\u4e0a, \u53cc\u94fe\u7684\u65e0\u5e8f\u6027\u8fd8\u662f\u62b5\u4e0d\u8fc7\u5c42\u7ea7\u7ba1\u7406\u7684\u77e5\u8bc6\u7ed3\u6784.</li> <li>\u7d22\u5f15: \u6839\u636ewiki\u8bed\u6cd5\u6784\u5efa\u4e00\u4e9b\u624b\u52a8\u7d22\u5f15\u9875, \u914d\u5408 Foam \u7684 wiki\u56fe+tag \u529f\u80fd.</li> </ul> </li> <li>\u6298\u817e<ul> <li>\u5c06\u7b14\u8bb0\u589e\u91cf\u540c\u6b65\u5230\u535a\u5ba2, \u89c1 \u589e\u91cf\u540c\u6b65</li> </ul> </li> </ul>"},{"location":"os/vscode-markdown/#_3","title":"\u56fe\u7247\u7ba1\u7406","text":"<p>\u56fe\u7247\u4fdd\u5b58: \u76ee\u524d\u7528\u4e86 Paste Image <code>mushan.vscode-paste-image</code> \u8fd9\u4e2a\u63d2\u4ef6, \u8bbe\u7f6e\u4e86\u5feb\u6377\u952e <code>Cmd+Shift+V</code> \u4fdd\u5b58\u5230\u76f8\u5e94\u76ee\u5f55\u4e0b.</p> <pre><code>// settings.json\n\"pasteImage.path\": \"${currentFileDir}/media/${currentFileNameWithoutExt}\",\n</code></pre> <p>\u56fe\u7247\u79fb\u52a8: \u672c\u5730\u7ba1\u7406\u7684\u4e00\u4e2a\u75db\u70b9\u662f, \u79fb\u52a8\u672c\u5730\u6587\u4ef6\u540e, \u56fe\u7247\u7684\u76f8\u5bf9\u94fe\u63a5\u5931\u6548. \u4e3a\u6b64, \u5199\u4e86\u4e00\u4e2aPython\u811a\u672c, \u89c1 \u56fe\u7247\u79fb\u52a8</p>"},{"location":"os/vscode-markdown/#markdown","title":"Markdown \u63d2\u4ef6","text":"<p>\u57fa\u4e8e\u4e00\u4e9b\u597d\u7528\u7684\u63d2\u4ef6\u6784\u5efa\u7b14\u8bb0\u4f53\u7cfb.</p> <p>\u63d2\u4ef6\u5217\u8868</p> <ul> <li>Markdown All in One <code>yzhang.markdown-all-in-one</code> \u63d0\u4f9b\u4e86\u8f83\u591a\u7684md\u7f16\u8f91\u8f85\u52a9<ul> <li>\u5305\u62ec: keyboard shortcuts, table of contents, auto preview and more</li> </ul> </li> <li>markdownlint <code>DavidAnson.vscode-markdownlint</code> \u8bed\u6cd5\u68c0\u67e5<ul> <li>Markdown linting and style checking for Visual Studio Code</li> </ul> </li> <li>Foam <code>foam.foam-vscode</code> \u65b0\u5ba0, \u63d0\u4f9b\u4e86tag, wiki\u8bed\u6cd5, \u7b14\u8bb0\u94fe\u63a5\u56fe\u7b49\u529f\u80fd. \u66ff\u6362\u4e86\u4e4b\u524d\u7684\u4e24\u4e2a\u63d2\u4ef6 <ul> <li>repo: https://github.com/foambubble/foam</li> </ul> </li> </ul> <p>\u4e00\u4e9b\u88ab\u5f03\u7528\u7684\u63d2\u4ef6</p> <ul> <li>Markdown Preview Enhanced(MPE) \u589e\u5f3a\u7684\u9884\u89c8\u529f\u80fd, \u4f46\u6027\u80fd\u5360\u7528\u7a0d\u9ad8, \u53d1\u73b0\u539f\u751f\u7684\u5c31\u4e0d\u9519.<ul> <li>\u53c2\u89c1 here</li> </ul> </li> <li>Markdown Notes <code>kortina.vscode-markdown-notes</code> \u63d0\u4f9b\u4e86\u4e0b\u9762\u7684\u4e00\u4e9b\u8bed\u6cd5, \u88ab foam \u66ff\u6362\u4e86<ul> <li>Use\u00a0<code>[[wiki-links]]</code>,\u00a0<code>backlinks</code>,\u00a0<code>#tags</code>\u00a0and\u00a0<code>@bibtex-citations</code>\u00a0for fast-navigation of markdown notes.</li> </ul> </li> <li>markdown-hashtags <code>vanadium23.markdown-hashtags</code> tag\u5217\u8868, \u540c\u88ab foam \u66ff\u6362<ul> <li>Hashtags for markdown: autocomplete, tree view and references.</li> </ul> </li> <li>markdown-formatter <code>mervin.markdown-formatter</code> \u683c\u5f0f\u5316md\u6587\u4ef6, \u88ab markdownlint \u53d6\u4ee3.<ul> <li>\u8fd9\u91cc \u7684\u914d\u7f6e\u9879\u5199\u5f97\u5f88\u6e05\u695a</li> </ul> </li> <li>learn-markdown <code>docsmsft.docs-markdown</code> \u5fae\u8f6f\u7684<ul> <li>\u597d\u50cf\u662f http://learn.microsoft.com/ \u7684\u589e\u5f3a\u8bed\u6cd5, \u4e00\u4e9b\u7406\u5ff5\u8fd8\u4e0d\u9519. \u53c2\u89c1 here</li> </ul> </li> </ul>"},{"location":"os/vscode-markdown/#markdown-all-in-one","title":"Markdown All in One","text":"<p>\u63d0\u4f9b\u4e86\u4e00\u4e9b\u597d\u7528\u7684md\u7f16\u8f91\u4f53\u9a8c. \u4ee5\u4e0b\u7565\u770b. </p> <ul> <li>\u589e\u5f3a\u7684\u5217\u8868\u7f16\u8f91\u529f\u80fd</li> <li>\u76f4\u63a5\u5728\u9009\u5b9a\u6587\u672c\u4e0a\u4f7f\u7528 <code>Ctrl+v</code> \u6765\u63d2\u5165\u94fe\u63a5</li> <li>\u589e\u5f3a\u7684\u5f15\u7528\u7f16\u8f91\u529f\u80fd</li> <li>\u683c\u5f0f\u5316\u8868\u683c</li> <li>\u652f\u6301\u5904\u7406\u548c\u9884\u89c8 GFM</li> </ul> <p>\u81ea\u52a8\u8865\u5168\uff1a\u5728 <code>settings.json</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0</p> <pre><code>  \"[markdown]\": {\n  // \u5feb\u901f\u8865\u5168\n  \"editor.quickSuggestions\": {\n  \"other\": true,\n  \"comments\": true,\n  \"strings\": true\n  },\n  // \u663e\u793a\u7a7a\u683c\n  \"editor.renderWhitespace\": \"all\",\n  // snippet \u63d0\u793a\u4f18\u5148\uff08\u770b\u4e2a\u4eba\u559c\u6b22\uff09\n  \"editor.snippetSuggestions\": \"top\",\n  \"editor.tabCompletion\": \"on\",\n  // \u4f7f\u7528enter \u63a5\u53d7\u63d0\u793a\n  // \"editor.acceptSuggestionOnEnter\": \"on\",\n  },\n</code></pre> <ul> <li>\u8f93\u5165 <code>code</code> \u5c31\u4f1a\u5f39\u51fa\u884c\u5185\u4ee3\u7801\u548c\u4ee3\u7801\u5757\u4e24\u79cd\u8865\u5168\u63d0\u793a</li> <li>\u8f93\u5165 <code>ul</code> \u6216 <code>li</code> \u5c31\u4f1a\u5f39\u51fa\u5217\u8868\u8865\u5168\u63d0\u793a</li> <li>\u7c7b\u4f3c\u7684\u8fd8\u6709 <code>bold</code> \u3001<code>image</code>\u3001<code>italic</code>\u3001<code>link</code> \u3001<code>quote</code> \u7b49\u3002</li> </ul> <p>\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5feb\u6377\u65b9\u5f0f</p> <p><code>Ctrl/Cmd + B</code> Toggle bold <code>Ctrl/Cmd + I</code> Toggle italic <code>Ctrl/Cmd + Shift + ]</code> Toggle heading (uplevel) <code>Ctrl/Cmd + Shift + [</code> Toggle heading (downlevel) <code>Ctrl/Cmd + M</code> Toggle math environment <code>Alt + C</code> Check/Uncheck task list item <code>cmd+]</code> \u7f29\u8fdb. \u662f\u6bd4\u884c\u9996Tab\u66f4\u89c4\u8303\u4e00\u822c\u7684\u7528\u6cd5.</p>"},{"location":"os/vscode-markdown/#makrdownlint","title":"makrdownlint","text":"<p><code>markdownlint</code> Markdown \u8bed\u6cd5\u68c0\u67e5\u6269\u5c55\u5de5\u5177. \u914d\u5408\u9ed8\u8ba4\u7684\u683c\u5f0f\u5316\u5de5\u5177.</p> <ul> <li>repo https://github.com/DavidAnson/vscode-markdownlint</li> <li>\u914d\u7f6e\u9879: \u89c4\u5219\u5217\u8868. \u4e00\u4e2a \u4e2d\u6587\u8bf4\u660e</li> <li>Makrdown style https://cirosantilli.com/markdown-style-guide/</li> </ul> <p>\u914d\u7f6e\u9009\u9879</p> <pre><code>\"markdownlint.config\": {\n        \"default\": true,\n        \"MD003\": { \"style\": \"atx_closed\" },\n        \"MD007\": { \"indent\": 4 },\n        //\u7981\u7528\u67d0\u6761\u89c4\u5219\n        \"MD013\": false,\n        //\u4e5f\u53ef\u4ee5\u4f7f\u7528\u67d0\u6761\u89c4\u5219\u7684\u522b\u540d\u6765\u914d\u7f6e\n        \"no-hard-tabs\": false\n    }\n</code></pre>"},{"location":"os/vscode-markdown/#foam","title":"Foam","text":"<ul> <li>https://foambubble.github.io/foam/</li> </ul> <p>\u76f8\u5173\u7684Command</p> <pre><code>Foam: Show Graph\nFoam: Create New Note from Template\nFoam: Open Daily Note\nFoam: Open Random Note\n</code></pre> <p>\u5b9e\u7528\u529f\u80fd</p> <ul> <li>wiki \u8bed\u6cd5 &amp; \u6784\u6210\u7684\u56fe<ul> <li>\u8bed\u6cd5<ul> <li>\u57fa\u672c\u8bed\u6cd5: <code>[[wiki]]</code></li> <li>\u94fe\u63a5\u5230\u6587\u6863\u7684 section: <code>[[resource#Section Title]]</code></li> <li>Link Alias: <code>[[wikilink|alias]]</code></li> </ul> </li> <li>Note embed: <code>![[note.md]]</code> (\u5728\u9884\u89c8\u4e2d\u5d4c\u5165\u6240\u5f15\u7528\u7684\u6587\u6863\u5185\u5bb9)</li> <li>\u53ef\u89c6\u5316: Graph; \u4fa7\u680f\u4e2d\u7684 Backlinks.</li> </ul> </li> <li>Tag \u6807\u7b7e\u529f\u80fd<ul> <li>\u8bed\u6cd5: <ul> <li>\u957f\u8bcd: <code>#my-tag1</code></li> <li>\u5c42\u7ea7 <code>#parent/child</code></li> </ul> </li> </ul> </li> </ul>"},{"location":"os/vscode-markdown/#_4","title":"\u4ecb\u7ecd\u7684\u529f\u80fd","text":"<p>wiki \u94fe\u63a5\u76f8\u5173\u7684\u7279\u6027. </p> <ul> <li>Graph Visualization: \u5728Command\u4e2d\u8f93\u5165 <code>Foam: Show Graph</code> \u5c55\u73b0\u5f53\u524d\u7684\u7b14\u8bb0\u94fe\u63a5\u5173\u7cfb \u2b50\ufe0f</li> <li>Link Autocompletion: \u63d0\u4f9b\u4e86wiki\u8bed\u6cd5 <code>[[wiki]]</code>, \u94fe\u63a5\u81ea\u52a8\u8865\u5168.</li> <li>Sync links on file rename: \u6587\u4ef6\u91cd\u547d\u540d\u7684\u65f6\u5019, \u81ea\u52a8\u66f4\u65b0wiki\u94fe\u63a5.</li> <li>Unique identifiers across directories</li> <li>Link Preview and Navigation</li> <li>Go to definition, Peek References</li> <li>Note embed: <code>![[note.md]]</code> \u8bed\u6cd5</li> <li>Support for sections: \u4e5f\u662f wiki \u8bed\u6cd5 standard wiki syntax of\u00a0<code>[[resource#Section Title]]</code>.</li> <li>Link Alias: <code>[[wikilink|alias]]</code></li> </ul> <p>\u5176\u4ed6\u7684\u4e00\u4e9b\u529f\u80fd</p> <ul> <li>Templates<ul> <li>\u8bed\u6cd5\u89c1 doc</li> </ul> </li> <li>Daily note<ul> <li>\u89c1 doc</li> </ul> </li> </ul> <p>\u53ef\u89c6\u5316</p> <ul> <li>Backlinks Panel</li> <li>Tag Explorer Panel</li> <li>Orphans and Placeholder Panels</li> <li>Syntax highlight</li> </ul>"},{"location":"os/vscode-markdown/#markdown-notes","title":"Markdown Notes","text":"<p>Use\u00a0<code>[[wiki-links]]</code>,\u00a0<code>backlinks</code>,\u00a0<code>#tags</code>\u00a0and\u00a0<code>@bibtex-citations</code>\u00a0for fast-navigation of markdown notes.</p>"},{"location":"os/vscode-markdown/#markdown-preview-enhancedmpe","title":"Markdown Preview Enhanced(MPE)","text":"<ul> <li><code>Markdown Preview Enhanced(MPE)</code> \u63d2\u4ef6<ul> <li>\u6269\u5c55\u8bed\u6cd5\u7684\u652f\u6301\uff0c\u4f8b\u5982 <code>==</code> \u9ad8\u4eae</li> <li>\u56fe\u7247\u52a9\u624b</li> <li>\u56fe\u7247\u6e32\u67d3<ul> <li>Mermaid</li> </ul> </li> </ul> </li> </ul> <p>\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3b\u9898\uff1f\u9009\u62e9 <code>none.css</code> \u7528\u539f\u751f\u7684\u5c31\u5f88\u597d\uff01</p>"},{"location":"os/vscode-markdown/#_5","title":"\u9644\u5f55","text":""},{"location":"os/vscode-markdown/#_6","title":"\u56fe\u7247\u79fb\u52a8","text":"<p>\u79fb\u52a8md\u6587\u4ef6\u540e\u79fb\u52a8\u5f15\u7528\u7684\u56fe\u7247</p> <p>\u89c1 https://gist.github.com/Lightblues/76467909fb70d14a8f5135e91774c261</p>"},{"location":"os/vscode-markdown/#_7","title":"\u589e\u91cf\u540c\u6b65","text":"<p>\u89c1 https://gist.github.com/Lightblues/c80533ffc29f901eecfd859eeb72abde</p>"},{"location":"os/vscode/","title":"VS Code \u4f7f\u7528\u6307\u5357","text":"<p>v1 221012 @Lightblues</p> <p>\u8bf4\u660e</p> <ol> <li>\u672c\u6587\u6863\u662f\u4ec0\u4e48? \u4e2a\u4ebavscode\u5de5\u4f5c\u6d41. </li> <li>\u5982\u4f55\u4f7f\u7528? \u642d\u914d\u53c2\u8003\u94fe\u63a5; \u5b9e\u8df5\u7b2c\u4e00. </li> <li>\u63d2\u4ef6\u4f7f\u7528</li> <li>\u63d2\u4ef6\u914d\u7f6e: \u5728\u8fdb\u884c\u63d2\u4ef6\u914d\u7f6e\u65f6, \u6ce8\u610f\u53c2\u770b\u9644\u7684 settings.json, \u66f4\u52a0\u65b9\u4fbf.</li> <li>\u63d2\u4ef6\u9009\u62e9: \u5bf9\u4e8e\u4e0d\u662f\u901a\u7528\u7684\u63d2\u4ef6, \u53ef\u4ee5\u9009\u62e9\u300c\u5de5\u4f5c\u533a\u6253\u5f00\u300d\u6253\u5f00\u800c\u975e\u5168\u5c40\u5f00\u542f, \u7b80\u6d01\u5e76\u63d0\u5347\u6027\u80fd.</li> <li>\u6027\u80fd\u8bf4\u660e: </li> <li>\u5185\u5b58: \u4f8b\u5982\u5bf9\u4e8e8G\u7684Mac\u6765\u8bf4, \u9700\u8981\u8003\u8651\u7684\u662f\u5185\u5b58\u5360\u7528\u95ee\u9898. Electron \u6846\u67b6\u4e0b\u6ca1\u5565\u529e\u6cd5, \u4e2a\u4eba\u7ecf\u9a8c\u662f\u5c11\u5f00\u70b9\u7a97\u53e3 (\u4e2a\u4eba\u7ecf\u5e38\u5f005+\u4e2a\u9879\u76ee\u5c31\u53ef\u80fd\u4e0d\u592a\u884c\u4e86)</li> <li>\u63d2\u4ef6: \u7cbe\u7b80\u4e3a\u5999. </li> </ol> <p>todo</p> <ul> <li>Python \u5de5\u4f5c\u6d41\u4ecb\u7ecd @221012</li> <li>debug (launch.json) \u8bf4\u660e: \u89c1 Python \u90e8\u5206 @221012</li> <li>markdown \u7b14\u8bb0\u5de5\u4f5c\u6d41. @221012</li> </ul>"},{"location":"os/vscode/#vscode","title":"vscode \u57fa\u672c","text":"<p>\u7406\u89e3vscode\u7684\u5404\u4e2a\u7a97\u53e3, \u57fa\u672c\u8981\u7d20</p> <ul> <li>Command Palette: \u547d\u4ee4\u9762\u677f, \u641c\u7d22\u5339\u914d\u8f6f\u4ef6\u548c\u63d2\u4ef6\u7684\u4e00\u4e9b\u529f\u80fd. \u2b50\ufe0f</li> <li>\u63d2\u4ef6\u751f\u6001: vscode\u7684\u597d\u7528\u5f88\u5927\u7a0b\u5ea6\u4e0a\u6765\u6e90\u4e8e\u5176\u6781\u5176\u5f3a\u5927\u7684\u63d2\u4ef6\u751f\u6001. \u89c1\u4e0b</li> <li>\u4e0b\u4fa7\u9762\u677f: Terminal, \u8c03\u8bd5\u63a7\u5236\u680f, \u4e0d\u540c\u7ec4\u4ef6\u7684\u8f93\u51fa\u8bb0\u5f55.</li> <li>\u5feb\u6377\u952e: \u63d0\u5347\u7f16\u8f91\u4f53\u9a8c, \u4f46\u9700\u8981\u4e00\u4e9b\u808c\u8089\u8bb0\u5fc6.</li> <li>\u4e2a\u6027\u5316: \u4e3b\u9898\u914d\u7f6e.</li> <li>\u540c\u6b65: \u4f5c\u4e3a\u591a\u8bbe\u5907\u7528\u6237, \u5de6\u4e0b\u89d2 GitHub \u8d26\u53f7\u767b\u9646\u540c\u6b65\u529f\u80fd\u5f88\u597d\u7528.</li> </ul>"},{"location":"os/vscode/#command-palette","title":"Command Palette \u547d\u4ee4\u9762\u677f","text":"<p>\u9ed8\u8ba4\u6309 <code>Cmd/Ctrl + Shift + P</code> \u5524\u51fa (<code>F1</code> \u597d\u50cf\u4e5f\u53ef\u4ee5)</p> <p>\u4e0b\u9762\u662f\u6211\u7528\u7684\u4e00\u4e9b\u5e38\u7528\u547d\u4ee4. todo</p> <pre><code># \u5e38\u7528\u7684 Commands.\nHelp: Interactive editor playground     # \u5b66\u4e60vscode\u7f16\u8f91\u65b9\u5f0f\nPreferences: Open User Settings (JSON)  # \u6253\u5f00\u7528\u6237\u914d\u7f6e\u6587\u4ef6\nPreferences: Open Keyboard Shortcuts    # vscode \u5feb\u6377\u952e\u8bbe\u7f6e.\nDeveloper: Reload Window                # \u91cd\u65b0\u52a0\u8f7d\u7a97\u53e3, \u6709\u4e00\u4e9b\u63d2\u4ef6\u505c\u7528\u6216\u8005\u7a97\u53e3\u6709bug\u7684\u65f6\u5019\u53ef\u4ee5\u8bd5\u8bd5.\nDeveloper: Open Process Explorer        # \u8d44\u6e90\u7ba1\u7406\u5668, \u67e5\u770b vscode \u5360\u7528\n\n# \u4e00\u7cfb\u5217\u7684 fold/unfold \u6307\u4ee4, \u770b\u6bd4\u8f83\u957f\u7684\u4ee3\u7801\u7684\u65f6\u5019\u5f88\u6709\u7528\nFold Level 2\n\n# \u9488\u5bf9\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u914d\u7f6e snippets, \u81ea\u52a8\u8865\u5168\nSnippets\n\n# \u6587\u4ef6\u7f16\u7801\nChange File Encoding        # \u4ee5\u4e0d\u540c\u7684\u7f16\u7801 \u6253\u5f00/\u4fdd\u5b58\n\n# \u67e5\u770b\u5f53\u524d\u53d8\u91cf\u7684\u5b9a\u4e49/\u996e\u7528. \u7528\u9f20\u6807\u5373\u53ef\u64cd\u4f5c.\nPeek Definition\nPeek References\n\n# ================ \u4e00\u4e9b\u63d2\u4ef6\u7684 commands\n# sftp: \u914d\u7f6e\u672c\u5730\u4ee3\u7801\u540c\u6b65\u5230\u8fdc\u7a0b\nsftp: config\n# markdown all in one: mk\u7f16\u8f91\u76f8\u5173\u5feb\u6377\u952e\nmarkdown all in one: toggle list    # \u7ed9\u9009\u4e2d\u884c\u5feb\u901f\u8bbe\u7f6e\u4e3alist\n</code></pre>"},{"location":"os/vscode/#_1","title":"\u5feb\u6377\u952e","text":"<p>\u8bf4\u660e: \u5e38\u7528\u7684\u5feb\u6377\u952e\u5176\u5b9e\u5e76\u4e0d\u591a, \u4e0b\u9762\u6839\u636e\u6307\u5357\u505a\u4e86\u6458\u5f55, \u6709\u673a\u4f1a\u7f29\u51cf\u4e00\u4e0b\u2026 \u5b9e\u9645\u4e0a\u76f4\u63a5 Command\u680f <code>Help: Interactive editor playground</code> \u8fc7\u4e00\u904d\u5373\u53ef\u2026</p> <ul> <li>doc Key Bindings for Visual Studio Code \u4e0b\u9762\u7684\u5185\u5bb9\u6458\u5f55from\u6b64.</li> <li>\u5b98\u65b9\u7684\u5feb\u6377\u952e\u6e05\u5355 https://code.visualstudio.com/shortcuts/keyboard-shortcuts-macos.pdf\uff0c</li> <li>\u53e6\u89c1\u547d\u4ee4\u884c <code>Help: Interactive editor playground</code>\uff1b</li> </ul> <p>\u57fa\u672c</p> <ul> <li><code>cmd+\\</code> \u62c6\u5206\u7f16\u8f91\u5668</li> <li><code>cmd+O</code> \u6253\u5f00\u6587\u4ef6</li> <li><code>ctrl+R</code> \u6253\u5f00\u6700\u8fd1\u9879\u76ee</li> <li><code>cmd+J</code> \u5207\u6362\u89c6\u56fe\uff0c\u9690\u85cf terminal \u680f</li> <li><code>cmd+B</code> \u89c6\u56fe\uff1a\u4fa7\u8fb9\u680f\uff1b\u4f46\u662f\u5728 Markdown \u73af\u5883\u4e0b <code>markdown.extension.editing.toggleBold</code> \u51b2\u7a81\u00b7</li> <li><code>cmd+K cmd+S</code> \u952e\u76d8\u5feb\u6377\u65b9\u5f0f</li> </ul> <p>\u6211\u81ea\u5b9a\u4e49\u7684\u4e00\u4e9b\u5feb\u6377\u952e</p> <ul> <li><code>ctrl+Space</code> \u4ee3\u7801\u8865\u5168\u548c macOS \u7684\u8f93\u5165\u6cd5\u5207\u6362\u649e\u4e86\uff1b\u6682\u65e0</li> <li><code>shift+opt+~</code> \u65b0\u5efaTerminal, \u597d\u53cd\u4eba\u7c7b\uff0c\u6362\u6210\u4e86 <code>cmd+T</code></li> </ul>"},{"location":"os/vscode/#_2","title":"\u5bfc\u822a","text":"<ul> <li><code>opt</code> \u914d\u5408\u5de6\u53f3\u662f\u8bcd\u7ea7\u522b\uff1b<code>cmd</code> \u53e5\u5b50\u7ea7\u522b</li> <li><code>cmd</code> \u4e0a\u4e0b \u79fb\u52a8\u5230\u6587\u6863\u5934\u5c3e</li> <li><code>opt</code> \u914d\u5408\u4e0a\u4e0b\uff0c\u79fb\u52a8\u6574\u884c</li> <li><code>shift</code> \u4fee\u9970\uff0c\u8fdb\u884c\u9009\u62e9</li> <li><code>cmd+]</code> \u63a7\u5236\u6574\u884c\u7684\u7f29\u8fdb</li> </ul>"},{"location":"os/vscode/#multi-cursor-editing","title":"Multi-cursor editing","text":"<ul> <li><code>opt+cmd+</code> \u4e0a\u4e0b \u8fdb\u884c\u8fdb\u884c\u591a cursor\uff1b<code>opt</code> \u914d\u5408\u9f20\u6807\u6dfb\u52a0\u4e00\u4e2a cursor</li> </ul>"},{"location":"os/vscode/#line-actions","title":"Line actions","text":"<ul> <li><code>shift+opt+</code> \u4e0a\u4e0b \u590d\u5236\u6574\u884c</li> <li><code>shift+cmd+K</code> \u5220\u9664\u6574\u884c</li> <li><code>opt</code> \u914d\u5408\u4e0a\u4e0b\uff0c\u79fb\u52a8\u6574\u884c</li> </ul>"},{"location":"os/vscode/#rename-refactoring","title":"Rename refactoring","text":"<ul> <li><code>F2</code> \u6216\u8005\u53f3\u952e\u9009\u62e9</li> </ul>"},{"location":"os/vscode/#formatting","title":"Formatting","text":"<ul> <li><code>shift+opt+F</code> \u683c\u5f0f\u5316\u6574\u4e2a\u6587\u6863</li> <li><code>cmd+k cmd+F</code> \u683c\u5f0f\u5316\u5f53\u524d\u884c</li> </ul> <p>\u53ef\u4ee5\u914d\u7f6e <code>editor.formatOnSave</code> \u81ea\u52a8</p>"},{"location":"os/vscode/#code-folding","title":"Code folding","text":"<ul> <li><code>opt+cmd+[/]</code> \u6536\u7f29\u5c55\u5f00 fold/unfold. \u6dfb\u52a0\u4e86\u65b0\u7684\u5feb\u6377\u952e <code>opt+q/w</code></li> <li><code>cmd+K cmd+0</code> <code>cmd+K cmd+]</code> \u5b8c\u5168\u6536\u7f29/\u5c55\u5f00</li> </ul>"},{"location":"os/vscode/#errors-and-warnings","title":"Errors and warnings","text":"<ul> <li><code>F8</code> \u5b9a\u4f4d\u5230\u9519\u8bef\u5904</li> </ul>"},{"location":"os/vscode/#_3","title":"\u4e3b\u9898\u914d\u7f6e","text":"<p>\u4e3a\u5565\u6298\u817e\u7f16\u8f91\u5668\u4e3b\u9898? \u597d\u7684\u4e3b\u9898\u770b\u4e0a\u53bb\u6bd4\u8f83\u8212\u670d (\u6bd4\u5982\u5728\u4e0d\u540c\u7684\u5149\u7ebf\u73af\u5883\u4e0b); \u65b0\u9c9c\u7684, \u4f18\u96c5\u7684UI\u63d0\u5347\u5de5\u4f5c\u6548\u7387.</p> <p>\u914d\u7f6e\u65b9\u6cd5: Commands\u641c\u7d22 <code>theme</code>, \u5305\u62ec Color, File Icon, Dark/Light \u5207\u6362.</p>"},{"location":"os/vscode/#color-theme","title":"Color Theme \u989c\u8272\u4e3b\u9898","text":"<p>\u63a8\u8350</p> <ul> <li>Light: Quiet, Solarized, defaults.</li> <li>Dark: defaults, One Dark Pro.</li> </ul>"},{"location":"os/vscode/#file-icon","title":"File Icon \u6587\u4ef6\u56fe\u6807\u4e3b\u9898","text":"<p>\u9700\u8981\u641c\u7d22\u4e0b\u8f7d\u63d2\u4ef6. \u63a8\u8350</p> <ul> <li>VSCode Icons</li> <li>Material Icon Theme</li> </ul>"},{"location":"os/vscode/#_4","title":"\u63a8\u8350\u63d2\u4ef6","text":"<p>\u4e00\u4e9b\u57fa\u672c\u597d\u7528\u7684vscode\u63d2\u4ef6, \u914d\u5408\u81ea\u5df1\u7684\u5de5\u4f5c\u6d41. \u5177\u4f53\u7f16\u7a0b\u8bed\u8a00\u7684\u73af\u5883\u914d\u7f6e\u89c1\u4e0b. </p> <p>\u5f3a\u63a8\u7684</p> <ul> <li>\u4ee3\u7801\u8865\u5168: GitHub Copilot <code>GitHub.copilot</code> Your AI pair programmer \u2b50\ufe0f</li> <li>\u8fdc\u7a0b\u5f00\u53d1: Remote - SSH <code>ms-vscode-remote.remote-ssh</code> \u2b50\ufe0f<ul> <li>\u6253\u5f00\u8fdc\u7a0b\u670d\u52a1\u5668, \u76f4\u63a5 \u7f16\u8f91/\u8c03\u8bd5, \u8d85\u597d\u7528. </li> <li>\u63a8\u8350\u5de5\u4f5c\u6d41: \u672c\u5730\u7f16\u8f91, \u914d\u5408\u4e0b\u9762\u7684 SFTP\u8fdb\u884c\u4ee3\u7801\u4e0a\u4f20, \u7136\u540e\u8fdc\u7a0b\u8c03\u8bd5. </li> <li>\u5bf9\u5e94\u4e86\u4fa7\u8fb9\u680f\u7684 <code>Remote Explorer</code> \u9875, \u8fd8\u8bb0\u5f55\u4e86\u5386\u53f2\u8bbf\u95ee, \u5f88\u65b9\u4fbf.<ul> <li>\u9ed8\u8ba4\u4f1a\u8bfb\u53d6 <code>~/.ssh/config</code> \u4e2d\u7684SSH\u914d\u7f6e\u9879, \u663e\u793a\u5728\u4fa7\u8fb9\u680f. </li> </ul> </li> <li>\u5982\u4f55\u5173\u8054\u670d\u52a1\u5668? \u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u7f16\u8f91 <code>~/.ssh/config</code> \u6587\u4ef6, \u8fd8\u53ef\u4ee5\u642d\u914dssh\u7684\u514d\u5bc6\u767b\u5f55\u65b9\u6848.</li> </ul> </li> <li>\u6587\u4ef6\u540c\u6b65: SFTP <code>Natizyskunk.sftp</code></li> <li>\u6d4f\u89c8\u5668\u6253\u5f00: Live Server <code>ritwickdey.LiveServer</code><ul> <li>Launch a development local Server with live reload feature for static &amp; dynamic pages</li> </ul> </li> <li>ASCII\u7f16\u7801\u8f6c\u6362: Native-ASCII Converter <code>cwan.native-ascii-converter</code><ul> <li>Convert characters with Unicode escapes or vice versa. The same as \u2018native2ascii\u2019 tool of JDK.</li> <li>\u4f8b\u5982\u4e00\u4e9b Unicode escapes \u7684JSON\u6587\u4ef6, \u53ef\u4ee5\u8f6c\u4e3a\u4e2d\u6587\u5b57\u7b26.</li> </ul> </li> </ul> <p>\u5176\u4ed6\u7684</p> <ul> <li>\u4e2d\u6587\u63d2\u4ef6: <code>MS-CEINTL.vscode-language-pack-zh-hans</code> \u5f71\u54cd\u4e0d\u5927, \u4f46\u4e2d\u6587\u7ffb\u8bd1\u4e0d\u9519</li> <li>\u4e8c\u8fdb\u5236\u6587\u4ef6\u67e5\u770b: Hex Editor <code>ms-vscode.hexeditor</code> \u7528\u7684\u4e0d\u591a</li> <li>\u6587\u4ef6\u6a21\u677f: <code>rhangai.file-template</code>. \u6bd4\u8f83\u5c0f\u4f17\u7684\u9700\u6c42? </li> <li>\u80cc\u5355\u8bcd: Qwerty Learner <code>kaiyi.qwerty-learner</code> \u808c\u8089\u8bb0\u5fc6\u80cc\u5355\u8bcd. \u6478\ud83d\udc1f\u7248</li> </ul>"},{"location":"os/vscode/#copilot","title":"Copilot","text":"<p>\u5fae\u8f6fnb! \u7533\u8bf7 GitHub \u5b66\u751f\u8ba4\u8bc1\u4e4b\u540e\u5f00\u7bb1\u5373\u7528.</p>"},{"location":"os/vscode/#sftp","title":"SFTP","text":"<p>\u4f5c\u7528: \u5728\u672c\u5730\u7f16\u8f91\u6587\u4ef6, \u4fdd\u5b58\u7684\u65f6\u5019\u81ea\u52a8\u4e0a\u4f20\u5230\u670d\u52a1\u5668. \u597d\u5904\u662f\u5728\u672c\u5730\u7559\u6709\u4ee3\u7801\u5b58\u6863, \u800c\u4ee3\u7801\u8fd0\u884c\u548c\u6a21\u578b\u6587\u4ef6\u90fd\u5728\u670d\u52a1\u5668\u4e0a. </p> <ul> <li>\u7248\u672c\u8bf4\u660e: \u539f\u5148\u7684\u4e00\u4e2a\u597d\u50cf\u4e0d\u7ef4\u62a4\u4e86, \u73b0\u5728\u7528\u7684\u662f <code>Natizyskunk.sftp</code> \u8fd9\u4e2a\u7248\u672c</li> <li>\u9700\u6c42<ul> <li>\u5982\u4f55\u540c\u6b65\u5230\u591a\u53f0\u670d\u52a1\u5668? \u82e5\u662f\u5206\u522b\u540c\u6b65\u4e0d\u540c\u7684\u6587\u4ef6\u5939, \u89c1\u4e0b. \u82e5\u8981\u76f4\u63a5\u540c\u6b65, \u6682\u4e0d\u6e05\u695a, \u6211\u7684\u89e3\u51b3\u65b9\u6848\u662f\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5 <code>syncthing</code>.</li> </ul> </li> </ul>"},{"location":"os/vscode/#_5","title":"\u9700\u6c42: \u591a\u4e2a\u670d\u52a1\u5668\u540c\u6b65","text":"<p>from Liximomo \u7248\u672c\u7684\u63d2\u4ef6\u8bf4\u660e https://github.com/liximomo/vscode-sftp#multiple-context \uff1b</p> <p>\u591a\u4e2a\u670d\u52a1\u5668\u540c\u6b65\uff1a\u76ee\u524d\u7528 <code>multi-context</code> \uff0c\u8fd9\u91cc context \u6307\u7684\u662f\uff08\u89c1wiki\uff09 string - A path relative to the workspace root folder. Using this when you want to map a subfolder to the remotePath.</p> <p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u914d\u7f6e\u4e2d\uff0c\u5206\u522b\u5c06 build \u548c src \u4e24\u4e2a\u6587\u4ef6\u5939\u90e8\u7f72\u5230\u4e86\u4e24\u53f0\u670d\u52a1\u5668\u4e0a\u3002</p> <pre><code>[\n  {\n  \"name\": \"server1\",\n  \"context\": \"project/build\",\n  \"host\": \"host\",\n  \"username\": \"username\",\n  \"password\": \"password\",\n  \"remotePath\": \"/remote/project/build\"\n  },\n  {\n  \"name\": \"server2\",\n  \"context\": \"project/src\",\n  \"host\": \"host\",\n  \"username\": \"username\",\n  \"password\": \"password\",\n  \"remotePath\": \"/remote/project/src\"\n  }\n]\n</code></pre>"},{"location":"os/vscode/#_6","title":"\u5404\u7f16\u7a0b\u8bed\u8a00\u63d2\u4ef6\u914d\u7f6e","text":""},{"location":"os/vscode/#markdown","title":"Markdown","text":"<p>\u5728\u7b14\u8bb0\u8f6f\u4ef6\u4e0a\u6298\u817e\u4e86\u633a\u591a, \u73b0\u5728\u7684\u57fa\u672c\u65b9\u6848\u662f vscode \u4e3a\u4e3b\u8fdb\u884c\u7eaf\u6587\u672c\u7f16\u8f91, \u5e76\u8003\u8651\u4e00\u5b9a\u7684\u8f6f\u4ef6\u517c\u5bb9\u6027. \u7531\u4e8e\u5185\u5bb9\u8f83\u591a, \u53e6\u89c1 [[vscode-markdown.md]]</p>"},{"location":"os/vscode/#python","title":"Python","text":"<p>read official doc first!</p> <ul> <li>\u53c2\u89c1 https://code.visualstudio.com/docs/python/python-tutorial. \u2b50\ufe0f<ul> <li>\u5176\u5b9e\u5b98\u65b9\u7684\u90a3\u4e00\u4e2a\u62d3\u5c55\u57fa\u672c\u5c31\u591f\u7528\u4e86, Python\u7684\u914d\u7f6e\u96be\u5ea6\u5f88\u4f4e. \u914d\u5408 Copilot \u4f7f\u7528\u4f53\u9a8c\u66f4\u4f73.</li> <li>\u6709\u4e00\u4e9b\u504f\u5411 Python\u5f00\u53d1\u7684\u914d\u62d3\u5c55\u5305 (Python Extension Pack), \u4f8b\u5982 <code>donjayamanne.python-extension-pack</code> \u7b49. \u4f46\u4e0d\u592a\u9002\u5408DL\u7f16\u7a0b, \u4e0d\u5efa\u8bae\u5168\u90e8\u5b89\u88c5.</li> </ul> </li> <li>testing https://code.visualstudio.com/docs/python/testing</li> <li>torch https://code.visualstudio.com/docs/datascience/pytorch-support</li> </ul> <p>\u5728\u7528\u7684\u62d3\u5c55</p> <ul> <li>\u5b98\u65b9\u7684 Python \u62d3\u5c55 <code>ms-python.python</code> \u5f88\u597d\u7528 \u2b50\ufe0f <ul> <li>IntelliSense (Pylance), Linting, Debugging (multi-threaded, remote), Jupyter Notebooks, code formatting, refactoring, unit tests, and more.</li> </ul> </li> <li>\u7f29\u8fdb <code>KevinRose.vsc-python-indent</code> Python Indent \u63d0\u4f9b\u4e86\u66f4\u65b9\u4fbf\u7684Python\u4ee3\u7801\u7f16\u8f91\u4f53\u9a8c<ul> <li>Correct python indentation. </li> </ul> </li> <li>IntelliCode <code>VisualStudioExptTeam.vscodeintellicode</code> \u6d4b\u8bd5\u4f7f\u7528\u4e2d.<ul> <li>AI-assisted development</li> <li>\u6ce8\u610f\u9700\u8981\u914d\u7f6e <code>Pylance</code>\u00a0as the Python language server</li> </ul> </li> </ul> <p>\u5176\u4ed6/\u6ca1\u7528\u8fc7\u7684</p> <ul> <li>\u73af\u5883\u7ba1\u7406 <code>donjayamanne.python-environment-manager</code> Python Environment Manager<ul> <li>View and manage Python environments &amp; pacakges.</li> <li>\u4f46\u4e00\u822c\u76f4\u63a5\u7528conda\u547d\u4ee4\u6765\u7ba1\u7406\u4e5f\u5f88\u65b9\u4fbf, \u6ca1\u548b\u7528\u8fc7.</li> </ul> </li> <li>\u81ea\u52a8\u5316\u6587\u6863 <code>njpwerner.autodocstring</code> autoDocstring - Python Docstring Generator<ul> <li>Generates python docstrings automatically \u6709\u52a9\u4e8e\u5199\u6bd4\u8f83\u89c4\u8303\u7684\u6587\u6863, \u6b63\u5f0f\u5f00\u53d1\u53ef\u80fd\u6709\u7528? </li> </ul> </li> </ul>"},{"location":"os/vscode/#python_1","title":"Python \u57fa\u672c\u914d\u7f6e","text":"<p>\u89c1\u5b98\u65b9\u7684tutorial. \u57fa\u672c\u6d41\u7a0b</p> <ul> <li>vscode \u5b98\u65b9\u63d2\u4ef6; \u914d\u7f6e\u597d Python Interpreter</li> <li>\u6253\u5f00\u4e00\u4e2a\u9879\u76ee: Start VS Code in a project (workspace) folder</li> <li>\u9009\u62e9Python\u89e3\u91ca\u5668 Select a Python interpreter<ul> <li>\u53ef\u4ee5\u901a\u8fc7 <code>Python: Select Interpreter</code> \u547d\u4ee4, \u76f4\u63a5\u53f3\u4e0b\u89d2\u9009\u62e9\u4e5f\u884c. </li> </ul> </li> <li>\u5982\u4f55\u8fd0\u884c Run? \u4e0d\u50cf cpp\u4f1a\u6709\u4e00\u4e9b\u914d\u7f6e\u9879, \u8fd9\u91cc\u5c31\u975e\u5e38\u7b80\u5355, \u76f4\u63a5\u70b9\u53f3\u4e0a\u89d2\u7684\u4e09\u89d2\u5373\u53ef, \u4e00\u822c\u6ca1\u5565\u95ee\u9898.</li> <li>Install and use packages \u5305\u7ba1\u7406\u4e60\u60ef\u671f\u95f4, \u76f4\u63a5\u547d\u4ee4\u884c conda+pip \u5c31\u5f88\u65b9\u4fbf.</li> </ul>"},{"location":"os/vscode/#python-debug","title":"Python Debug \u8c03\u8bd5","text":"<p>\u53ef\u4ee5\u770b\u770b\u4e0b\u9762\u7684\u6559\u7a0b. \u4e3b\u8981\u53ef\u4ee5\u770b\u914d\u7f6e\u9879\u7684\u8bf4\u660e, \u89c1\u4e0b.</p> <ul> <li>debugging https://code.visualstudio.com/docs/python/debugging</li> </ul> <p>\u7b80\u8981</p> <ul> <li>\u901a\u8fc7 <code>.vscode/launch.json</code> \u914d\u7f6e<ul> <li>\u53ef\u8fdb\u884c\u591a\u4e2a\u914d\u7f6e, \u5de6\u4e0b\u89d2\u9009\u62e9 (\u4e0d\u540c\u7684\u901a\u8fc7 name \u533a\u5206)</li> </ul> </li> <li>\u53f3\u4e0b\u89d2\u9009\u62e9 Python \u89e3\u91ca\u5668.</li> <li>\u5982\u4f55\u5f00\u59cb\u8c03\u8bd5<ul> <li>\u5355\u4e2a\u6587\u4ef6: \u76f4\u63a5\u70b9\u53f3\u4e0a\u89d2\u7684\u6309\u952e\u5373\u53ef. </li> <li>\u9700\u8981\u4e2a\u6027\u5316\u914d\u7f6e: \u5728 launch\u4e2d\u8bbe\u7f6e, \u7136\u540e\u5de6\u4e0b\u89d2\u6216\u8005 F5\u5f00\u59cb. </li> </ul> </li> </ul> <pre><code>        // \u914d\u7f6e\u9879\u8bf4\u660e\u89c1: https://code.visualstudio.com/docs/python/debugging#_set-configuration-options\n        {\n            // name: Provides the name for the debug configuration that appears in the VS Code dropdown list.\n            \"name\": \"Python: Current File\",\n            \"type\": \"python\",\n            // \u4e24\u79cd\u6a21\u5f0f: 1) launch: \u76f4\u63a5\u8c03\u8bd5 program \u4e2d\u6240\u5b9a\u4e49\u7684\u6587\u4ef6; 2) attach: \u9644\u52a0\u5230\u4e00\u4e2a\u5df2\u7ecf\u8fd0\u884c\u7684\u8fdb\u7a0b. \n            \"request\": \"launch\",\n            \"program\": \"${file}\",\n            \"console\": \"integratedTerminal\",\n            \"justMyCode\": true, \n            // env: \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf. Sets optional environment variables for the debugger process beyond system environment variables, which the debugger always inherits. The values for these variables must be entered as strings.\n            // \"env\": {\n            //     \"PYTHONPATH\": \"${workspaceFolder}/src\"\n            // }\n            // cwd: \u8bbe\u7f6e\u6839\u76ee\u5f55 Specifies whether to enable subprocess debugging. Defaults to\u00a0`false`, set to\u00a0`true`\u00a0to enable. For more information, see\u00a0[multi-target debugging](https://code.visualstudio.com/docs/editor/debugging#_multitarget-debugging).\n            // \"cwd\": \"${workspaceFolder}\"\n            // python: \u4f7f\u7528\u7684Python\u89e3\u91ca\u5668, \u9ed8\u8ba4\u5c31\u662f workspace \u7684, \u53ef\u4ee5\u901a\u8fc7\u53f3\u4e0b\u89d2\u9009\u62e9\u4e0d\u540c\u7684.\n            // \"python\": \"${command:python.interpreterPath}\",\n            // module \u6a21\u5757: Provides the ability to specify the name of a module to be debugged, similarly to the\u00a0`-m`\u00a0argument when run at the command line. For more information, see\u00a0[Python.org](https://docs.python.org/3/using/cmdline.html#cmdoption-m)\n            // \"module\": \"\"\n        },\n</code></pre>"},{"location":"os/vscode/#cc","title":"C/C++","text":"<p>refs</p> <ul> <li>\u5b98\u65b9\u7684\u57fa\u672c\u914d\u7f6e\u6559\u7a0b https://code.visualstudio.com/docs/languages/cpp. </li> <li>\u642d\u914d\u66f4\u8be6\u7ec6\u7684\u6587\u6863, \u6839\u636e\u4e0d\u540c\u7684\u7f16\u8bd1\u73af\u5883\u6709\u533a\u522b, \u4f8b\u5982 macOS \u4e0b\u7684 clang https://code.visualstudio.com/docs/cpp/config-clang-mac. \u4e0b\u9762\u57fa\u672c\u662f\u6559\u7a0b\u7ffb\u8bd1.</li> </ul> <p>\u63d2\u4ef6</p> <ul> <li>\u5b98\u65b9\u7684 C/C++ <code>ms-vscode.cpptools</code> \u2b50\ufe0f<ul> <li>C/C++ IntelliSense, debugging, and code browsing.</li> </ul> </li> </ul> <p>\u5176\u4ed6\u6ca1\u7528\u8fc7\u7684\u63d2\u4ef6</p> <ul> <li>ms-vscode.cpptools-themes: UI Themes for C/C++ extension.</li> <li>twxs.cmake: CMake langage support for Visual Studio Code</li> <li>ms-vscode.cmake-tools: Extended CMake support in Visual Studio Code</li> <li>The bleeding edge of the C++ syntax: Let me generate Doxygen documentation from your source code for you.<ul> <li>jeff-hykin.better-cpp-syntax: The bleeding edge of the C++ syntax</li> </ul> </li> <li><code>mitaki28.vscode-clang</code> C/C++ Clang Command Adapter<ul> <li>Completion and Diagnostic for C/C++/Objective-C using Clang Command</li> </ul> </li> </ul>"},{"location":"os/vscode/#c-run","title":"C++ Run (\u8fd0\u884c)","text":"<p>\u5173\u8054\u540d\u8bcd: \u751f\u6210 Build </p> <ul> <li>\u548c Run \u7684\u533a\u522b, \u5927\u6982\u5728\u4e8e, \u4ec5\u7f16\u8bd1\u4e0d\u8fd0\u884c</li> <li>\u5982\u4f55Build? \u70b9\u51fb <code>Terminal &gt; Run Build Task</code> (\u7ec8\u7aef/\u8fd0\u884c\u751f\u6210\u4efb\u52a1); \u5feb\u6377\u952e <code>Shift+cmd+B</code>. </li> <li>\u6ca1\u6709 bug\u7684\u8bdd\u53ef\u4ee5\u5728\u76f8\u540c\u76ee\u5f55\u4e0b\u770b\u5230\u751f\u6210\u7684\u6587\u4ef6\u4e86.</li> </ul> <p>\u57fa\u672c\u7684 Run</p> <ul> <li>\u5982\u4f55\u914d\u7f6eRun? \u540c\u6837\u53ef\u4ee5\u70b9\u9009 <code>Terminal &gt; Configure Default Build Task</code> (\u7ec8\u7aef/\u8fd0\u884c\u4efb\u52a1) \u6765\u8fd0\u884c\u914d\u7f6e\u597d\u7684\u4efb\u52a1. \u5bf9\u4e8eactive\u7684\u6587\u4ef6, \u4e5f\u53ef\u4ee5\u7b80\u5355\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u4e09\u89d2\u5f62, \u300cRun C/C++ Code\u300d\u4ee5\u8fd0\u884c. <ul> <li>\u7b2c\u4e00\u6b21\u51fa\u6765\u4f1a\u63d0\u793a\u9009\u62e9\u914d\u7f6e. \u4f8b\u5982macOS\u73af\u5883\u4e0b\u53ef\u4ee5\u9009\u62e9 <code>clang++</code></li> <li>\u914d\u7f6e\u6587\u4ef6\u89c1\u4e0b</li> </ul> </li> <li>\u8fd0\u884c\u7684\u65f6\u5019\u53d1\u751f\u4e86\u4ec0\u4e48? \u5148 Build \u7136\u540e\u8fd0\u884c.<ul> <li>\u5177\u4f53\u800c\u8a00, \u6839\u636e\u914d\u7f6etask\u6267\u884c\u76f8\u5e94\u7684\u547d\u4ee4\u884c\u547d\u4ee4.</li> <li>\u672c\u8d28\u4e0a, tasks \u7684\u914d\u7f6e\u5f71\u54cd\u4e86vscode\u5982\u4f55\u8c03\u7528\u547d\u4ee4\u884c\u547d\u4ee4\u6765\u8fdb\u884c\u7f16\u8bd1.</li> <li>\u4f8b\u5982, \u4e0b\u9762\u7684\u914d\u7f6e\u5c31\u4f1a\u8fd0\u884c <code>/usr/bin/clang++ -fcolor-diagnostics -fansi-escape-codes -g \"xxx.cpp\" -o \"xxx\"</code></li> <li>\u70b9\u51fb\u8fd0\u884c, \u53ef\u4ee5\u5728Terminal\u7a97\u53e3\u770b\u5230\u7f16\u8bd1\u8bb0\u5f55; \u5728 Debug \u7a97\u53e3\u770b\u5230\u7a0b\u5e8f\u7684\u8f93\u51fa\u7ed3\u679c.</li> </ul> </li> </ul> <p><code>tasks.json</code> \u6587\u4ef6: </p> <ul> <li>\u6839\u636e\u4e0a\u9762\u7684\u9009\u62e9, \u4f1a\u5728 <code>.vscode/tasks.json</code> \u4e2d\u8bb0\u5f55\u914d\u7f6e\u9879. \u89c1\u4e0b\u9762\u9ed8\u8ba4\u751f\u6210\u7684\u914d\u7f6e.</li> <li>\u53ef\u4ee5\u6709\u591a\u6761\u914d\u7f6e\u7684 task, \u901a\u8fc7 group.isDefault \u8fdb\u884c\u63a7\u5236\u9ed8\u8ba4\u8fd0\u884c\u54ea\u4e2a.</li> <li>\u76f8\u5173\u53c2\u6570<ul> <li><code>args</code>: \u7f16\u8bd1\u9009\u9879</li> </ul> </li> </ul> <p>\u8865\u5145: \u82e5\u662f\u5b89\u88c5\u4e86 <code>Code Runner</code> \u63d2\u4ef6, \u4e5f\u53ef\u4ee5\u5728\u4e09\u89d2\u5f62\u4e0a\u70b9\u300cRun Code\u300d, \u76f4\u63a5\u53ef\u4ee5\u8fd0\u884c, \u4e0d\u9700\u8981\u914d\u7f6e tasks \u8fd8\u4e0d\u4f1a\u751f\u6210 <code>*.dSYM</code> \u6587\u4ef6\u5939, \u63a8\u8350 \u2b50\ufe0f</p> <pre><code>// .vscode/tasks.json\n// \u914d\u7f6e\u9879\u8bf4\u660e\u89c1 https://code.visualstudio.com/docs/editor/variables-reference\n{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        // \u81ea\u52a8\u751f\u6210\u7684 clang++ \u914d\u7f6e\u6587\u4ef6.\n        // \u8fd0\u884c\u7684\u547d\u4ee4: /usr/bin/clang++ -fcolor-diagnostics -fansi-escape-codes -g \"xxx.cpp\" -o \"xxx\"\n        {\n            \"type\": \"cppbuild\",\n            \"label\": \"C/C++: clang++ \u751f\u6210\u6d3b\u52a8\u6587\u4ef6\",\n            \"command\": \"/usr/bin/clang++\",\n            \"args\": [\n                \"-fcolor-diagnostics\",\n                \"-fansi-escape-codes\",\n                \"-g\",\n                \"${file}\",\n                \"-o\",\n                \"${fileDirname}/${fileBasenameNoExtension}\"\n            ],\n            \"options\": {\n                \"cwd\": \"${fileDirname}\"\n            },\n            \"problemMatcher\": [\n                \"$gcc\"\n            ],\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true\n            },\n            \"detail\": \"\u8c03\u8bd5\u5668\u751f\u6210\u7684\u4efb\u52a1\u3002\"\n        }\n    ]\n}\n</code></pre>"},{"location":"os/vscode/#c-debug","title":"C++ Debug (\u8c03\u8bd5)","text":"<ul> <li>\u57fa\u672c\u4f7f\u7528: \u548c Run\u4e00\u6837, \u5728\u53f3\u4e0a\u89d2\u7684\u4e09\u89d2\u7684\u5730\u65b9, \u4e0b\u62c9\u9009\u62e9\u300c\u8c03\u8bd5 C/C++ \u6587\u4ef6\u300d\u5373\u53ef.<ul> <li>\u8c03\u8bd5\u63a7\u5236\u680f\u6bd4\u8f83\u76f4\u89c2, \u8be6\u89c1doc</li> </ul> </li> </ul> <p>\u81ea\u5b9a\u4e49\u8c03\u8bd5: <code>F5</code> </p> <ul> <li>\u662f\u4ec0\u4e48? \u76f8\u8f83\u4e8e\u4e0a\u9762\u7684\u57fa\u672c\u8c03\u8bd5\u65b9\u5f0f, \u8fd8\u53ef\u4ee5\u6309 <code>F5</code> \u8fdb\u884c\u4e2a\u6027\u5316\u7684\u914d\u7f6e. \u4e00\u4e2a\u9700\u6c42: specifying arguments to pass to the program at runtime.</li> <li>\u5982\u4f55\u914d\u7f6e? \u5728active\u7684\u6587\u4ef6\u4e2d, \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u2699\ufe0f \u8fdb\u884c\u914d\u7f6e (\u597d\u50cf\u4e5f\u53ef\u4ee5 <code>Run/Add Configuration...</code> \u6dfb\u52a0). \u540c\u6837\u9009\u62e9 clang++</li> <li>\u5982\u4f55\u5f00\u59cb\u8c03\u8bd5? start debug with <code>Run &gt; Start Debugging</code> or simply press <code>F5</code></li> </ul> <p><code>launch.json</code> \u6587\u4ef6 </p> <ul> <li>\u9ed8\u8ba4\u4e5f\u4f1a\u751f\u6210 <code>.vscode/launch.json</code> \u914d\u7f6e\u6587\u4ef6. \u76f8\u5173\u9009\u9879\u8bf4\u660e\u89c1\u4e0b.</li> <li>\u76f8\u5173\u53c2\u6570<ul> <li><code>program</code>: \u6307\u5b9a\u8c03\u8bd5\u7684\u6587\u4ef6</li> <li><code>args</code>: \u4f20\u5165\u7684\u547d\u4ee4\u884c\u53c2\u6570</li> <li><code>preLaunchTask</code>: \u8fd0\u884c\u7684\u7f16\u8bd1\u547d\u4ee4, \u6ce8\u610f\u8981\u548c <code>tasks.json</code> \u4e2d\u7684\u76f8\u5bf9\u5e94!!</li> </ul> </li> </ul> <pre><code>// .vscode/launch.json\n// \u914d\u7f6e\u8bf4\u660e\u89c1 https://code.visualstudio.com/docs/editor/debugging#_launch-configurations\n{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"C/C++: clang++ \u751f\u6210\u548c\u8c03\u8bd5\u6d3b\u52a8\u6587\u4ef6\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            // The\u00a0`program`\u00a0setting specifies the program you want to debug.\n            \"program\": \"${fileDirname}/${fileBasenameNoExtension}\",\n            // The\u00a0`args`\u00a0property is an array of arguments to pass to the program at runtime.\n            \"args\": [],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${fileDirname}\",\n            \"environment\": [],\n            // Change the\u00a0`stopAtEntry`\u00a0value to\u00a0`true`\u00a0to cause the debugger to stop on the\u00a0`main`\u00a0method when you start debugging.\n            \"externalConsole\": false,\n            \"MIMode\": \"lldb\",\n            // Ensure that the\u00a0`preLaunchTask`\u00a0value matches the\u00a0`label`\u00a0of the build task in the\u00a0`tasks.json`\u00a0file.\n            \"preLaunchTask\": \"C/C++: clang++ \u751f\u6210\u6d3b\u52a8\u6587\u4ef6\"\n        }\n    ]\n}\n</code></pre>"},{"location":"os/vscode/#cc-configuration","title":"C/C++ configuration","text":"<ul> <li>\u4ec0\u4e48\u7528? </li> <li>\u5728 Command \u4e2d\u641c\u7d22 <code>C/C++: Edit Configurations (UI)</code> \u53ef\u4ee5\u6253\u5f00\u914d\u7f6eUI, \u5bf9\u5e94\u4e86\u6587\u4ef6 <code>.vscode/c_cpp_properties.json</code></li> <li>\u4e00\u4e9b\u9009\u9879\u8bf4\u660e<ul> <li><code>includePath</code>: \u7528\u4e8e\u7528\u4e8e\u4e00\u4e9b\u975e\u6807\u51c6\u5e93</li> <li><code>compilerPath</code>: \u6307\u5b9a\u7f16\u8bd1\u5668\u8def\u5f84, \u63d2\u4ef6\u4ee5\u6b64\u6765\u63a8\u65ad\u5934\u6587\u4ef6\u4f4d\u7f6e, \u4ee5\u542f\u7528\u66f4\u51c6\u786e\u7684 IntelliSense</li> <li><code>cppStandard</code>: \u5f71\u54cd\u63d2\u4ef6\u7684\u8bed\u6cd5\u9ad8\u4eae\u548c\u6807\u9519\u7b49\u884c\u4e3a</li> </ul> </li> </ul> <pre><code>{\n    \"configurations\": [\n        {\n            \"name\": \"Mac\",\n            // You only need to modify the Include path setting if your program includes header files that are not in your workspace or the standard library path.\n            \"includePath\": [\n                \"${workspaceFolder}/**\"\n                // \"/usr/local/Cellar/gcc/11.3.0_1/include/c++/11/x86_64-apple-darwin20\"\n                // \"/usr/bin/**\"\n            ],\n            \"defines\": [],\n\n            // Mac framework path. ensure that Mac framework path points to the system header files. \n            \"macFrameworkPath\": [\n                \"/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Frameworks\"\n            ],\n            // Compiler path \u91cd\u8981!! \u6307\u5b9a\u6b63\u5728\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u7684\u5b8c\u6574\u8def\u5f84(\u4f8b\u5982 /usr/bin/gcc), \u63d2\u4ef6\u4ee5\u6b64\u6765\u63a8\u65ad\u5934\u6587\u4ef6\u4f4d\u7f6e, \u4ee5\u542f\u7528\u66f4\u51c6\u786e\u7684 IntelliSense\n            // \u4f8b\u5982, \u51b3\u5b9a\u4e86 smart completions and Go to Definition navigation \u8fd9\u4e9b\u529f\u80fd\n            // The extension uses it to infer the path to the C++ standard library header files. \n            \"compilerPath\": \"/usr/bin/clang++\",\n\n            // \u7528\u4e8e IntelliSense \u7684 C \u8bed\u8a00\u6807\u51c6\u7684\u7248\u672c\u3002\u6ce8\u610f: GNU \u6807\u51c6\u4ec5\u7528\u4e8e\u67e5\u8be2\u8bbe\u7f6e\u7f16\u8bd1\u5668\u4ee5\u83b7\u53d6 GNU \u5b9a\u4e49\uff0c\u5e76\u4e14 IntelliSense \u5c06\u6a21\u62df\u7b49\u6548\u7684 C \u6807\u51c6\u7248\u672c\u3002\n            \"cStandard\": \"c11\",\n            // \u7528\u4e8e IntelliSense \u7684 C++ \u8bed\u8a00\u6807\u51c6\u7684\u7248\u672c\u3002\u6ce8\u610f: GNU \u6807\u51c6\u4ec5\u7528\u4e8e\u67e5\u8be2\u8bbe\u7f6e\u7528\u6765\u83b7\u53d6 GNU \u5b9a\u4e49\u7684\u7f16\u8bd1\u5668\uff0c\u5e76\u4e14 IntelliSense \u5c06\u6a21\u62df\u7b49\u6548\u7684 C++ \u6807\u51c6\u7248\u672c\u3002\n            \"cppStandard\": \"c++17\",\n            // \u8981\u4f7f\u7528\u7684\u3001\u6620\u5c04\u5230 MSVC\u3001gcc \u6216 Clang \u7684\u5e73\u53f0\u548c\u4f53\u7cfb\u7ed3\u6784\u53d8\u4f53\u7684 IntelliSense \u6a21\u5f0f\u3002\n            \"intelliSenseMode\": \"clang-x64\"\n            // \u53ef\u4e3a\u6e90\u6587\u4ef6\u63d0\u4f9b IntelliSense \u914d\u7f6e\u4fe1\u606f\u7684 VS Code \u6269\u5c55\u7684 ID\u3002\n            // \"configurationProvider\": \"ms-vscode.makefile-tools\"\n        }\n    ],\n    \"version\": 4\n}\n</code></pre>"},{"location":"os/vscode/#go","title":"go","text":"<p>ref</p> <ul> <li>\u4e2d\u6587\u6559\u7a0b\uff0c\u8bb2\u5f97\u5f88\u7cfb\u7edf https://learnku.com/courses/go-video/2022</li> <li>base https://code.visualstudio.com/docs/languages/go</li> <li>debugging https://github.com/golang/vscode-go/blob/master/docs/debugging.md</li> <li>install go: https://golang.org/dl/</li> <li>go\u8bed\u8a00\u57fa\u7840 Go\u8bed\u8a00\u5b66\u4e60\u4e4b\u8def/Go\u8bed\u8a00\u6559\u7a0b</li> </ul> <p>\u63d2\u4ef6</p> <ul> <li><code>Go</code>: Rich Go language support for Visual Studio Code</li> </ul> <p>\u4ee5\u4e0b from learnku</p> <ul> <li>\u60ac\u505c\u4fe1\u606f</li> <li>\u4ee3\u7801\u8865\u5168</li> <li>\u5305\u81ea\u52a8\u5f15\u5165</li> <li>\u53c2\u6570\u8f85\u52a9<ul> <li>\u4e66\u5199\u51fd\u6570\uff0c\u5728\u4f20\u53c2\u62ec\u53f7\u91cc\u8f93\u5165 <code>,</code>  \u5373\u53ef\u67e5\u770b\u53c2\u6570\u4fe1\u606f</li> </ul> </li> <li>\u4ee3\u7801\u8df3\u8f6c<ul> <li>\u6309\u4f4f Command \u9f20\u6807\u70b9\u51fb\u51fd\u6570\u540d\u79f0</li> <li>\u6309\u4f4f Control \u52a0 - \u53f7\uff08\u51cf\u53f7\uff09</li> </ul> </li> <li>\u67e5\u627e\u8c03\u7528<ul> <li>\u5149\u6807\u653e\u7f6e\u4e8e\u51fd\u6570\u4e0a\uff0c\u53f3\u952e <code>Go to References</code></li> <li>\u5149\u6807\u653e\u7f6e\u4e8e\u51fd\u6570\u4e0a\uff0c\u53f3\u952e <code>Show call Hierarchy</code></li> </ul> </li> <li>\u81ea\u52a8\u683c\u5f0f\u5316\uff08\u9ed8\u8ba4\uff0c\u65e0\u9700\u914d\u7f6e\uff09</li> <li>\u63d0\u53d6\u53d8\u91cf\uff08\u9009\u4e2d\u4e00\u4e2a\u8868\u793a\u5f0f\u4e4b\u540e\uff0c\u524d\u9762\u81ea\u52a8\u51fa\u73b0\u4e00\u4e2a\u5c0f\u9ec4\u706f\uff09</li> <li>\u4ee3\u7801\u751f\u6210<ul> <li>\u751f\u6210 tag</li> <li>\u751f\u6210 struct</li> <li>\u751f\u6210\u5355\u5143\u6d4b\u8bd5</li> <li>\u751f\u6210\u63a5\u53e3\u7684\u5b9e\u73b0\u4ee3\u7801</li> </ul> </li> <li>\u91cd\u6784\u51fd\u6570\u540d\u548c\u53d8\u91cf</li> <li>\u4ee3\u7801\u8c03\u8bd5 \u2014\u2014 Debuging</li> </ul>"},{"location":"os/vscode/#java","title":"Java","text":"<p>\u7565</p> <ul> <li><code>vscjava.vscode-java-pack</code> \u62d3\u5c55\u5305<ul> <li>redhat.java Language Support for Java(TM) by Red Hat<ul> <li>Java Linting, Intellisense, formatting, refactoring, Maven/Gradle support and more\u2026</li> </ul> </li> <li>vscjava.vscode-java-debug A lightweight Java debugger for Visual Studio Code</li> </ul> </li> </ul>"},{"location":"os/vscode/#r","title":"R","text":"<p>R\u8bed\u8a00\u7684\u652f\u6301\u4f3c\u4e4e\u6ca1\u6709 Rstudio \u7684\u4f53\u9a8c\u90a3\u4e48\u597d. \u7565.</p> <ul> <li><code>R</code> Extension for Visual Studio Code https://github.com/REditorSupport/vscode-R base<ul> <li><code>radian</code>: A modern R console that corrects many limitations of the official R terminal and supports many features such as syntax highlighting and auto-completion.</li> <li><code>VSCode-R-Debugger</code>: A VS Code extension to support R debugging capabilities.</li> <li><code>httpgd</code>: An R package to provide a graphics device that asynchronously serves SVG graphics via HTTP and WebSockets.</li> <li>installation: https://github.com/REditorSupport/vscode-R/wiki/Installation:-macOS</li> <li>R Markdown: https://github.com/REditorSupport/vscode-R/wiki/R-Markdown</li> </ul> </li> <li><code>TianyiShi.rmarkdown</code> R Markdown All in One<ul> <li>R Markdown, Bookdown and Blogdown Support</li> </ul> </li> </ul>"},{"location":"os/vscode/#sql","title":"SQL","text":"<p>\u8bf4\u660e: vscode \u5199sql\u7684\u4f18\u52bf\u5728\u4e8e\u7f16\u8f91\u4f53\u9a8c+\u8865\u5168\u7b49\u529f\u80fd. \u4e0d\u8fc7\u6570\u636e\u5e93\u7ba1\u7406\u7b49\u8fd8\u662f\u7528 Navicat \u66f4\u4e3a\u76f4\u89c2.</p> <ul> <li>SQL Tools <code>mtxr.sqltools</code> \u63d2\u4ef6\u672c\u4f53. \u9700\u8981\u642d\u914d\u4e0d\u540c\u7c7b\u578bsql\u7684\u76f8\u5e94\u7684\u9a71\u52a8<ul> <li>Database management done right. Connection explorer, query runner, intellisense, bookmarks, query history.</li> <li>doc: https://vscode-sqltools.mteixeira.dev/</li> <li>SQLTools MySQL/MariaDB <code>mtxr.sqltools-driver-mysql</code> \u642d\u914d\u7684 mysql \u9a71\u52a8</li> </ul> </li> </ul> <p>\u8fd0\u884c: \u9009\u4e2d\u67e5\u8be2\u8bed\u53e5, \u7136\u540e\u4e24\u6b21 <code>Cmd+E</code> \u6267\u884c.</p> <p>\u914d\u7f6e\u5982\u4e0b:</p> <pre><code>// \u9879\u76ee settings.json\n    // see https://vscode-sqltools.mteixeira.dev/en/drivers/mysql/\n    \"sqltools.connections\": [\n        {\n            \"mysqlOptions\": {\n                \"authProtocol\": \"default\"\n            },\n            \"previewLimit\": 50,\n            \"server\": \"[ip]\",\n            \"port\": 3306,\n            \"driver\": \"MySQL\",\n            \"name\": \"[name]\",\n            \"database\": \"[database]\",\n            \"username\": \"[username]\",\n            \"password\": \"[password]\"\n        },\n    ]\n</code></pre>"},{"location":"os/vscode/#latex","title":"Latex","text":"<p>\u6574\u7406\u4e2d, \u7565.</p>"},{"location":"os/vscode/#vscode-latex-workshop","title":"VSCode-LaTeX-Workshop","text":"<p>\u53c2\u89c1: Latex \u9879\u76ee\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6.</p> <ul> <li>\u7b80\u5355\u914d\u7f6e\u65b9\u6848\uff1aMacOS10.15.3+MacTex (TexLive2019)+VS Code\u7684LaTex\u6559\u7a0b<ul> <li>\u66f4\u8be6\u7ec6\u7684\u53c2\u6570\u53c2\u89c1 Visual Studio Code (vscode)\u914d\u7f6eLaTeX</li> </ul> </li> <li>\u82e5\u8981\u914d\u7f6e\u5916\u90e8PDF\u6d4f\u89c8\u5668\uff08Skim\uff09\uff0c\u53c2\u89c1 macOS \u914d\u7f6e LaTeX\uff08MacTeX + VSCode + Skim\uff09</li> <li>Latex \u8d44\u6e90<ul> <li>ElegantLatex https://elegantlatex.org/cn/ \u63d0\u4f9b\u4e86\u4e09\u5957\u6a21\u7248</li> </ul> </li> <li>\u8521\u8001\u677f\u7684\u4f5c\u4e1a\u6a21\u7248 https://github.com/YZ-Cai/latex-homework-template</li> </ul> <p>\u6ce8\u610f\u4e00\u5b9a\u8981\u6dfb\u52a0 Latex \u8def\u5f84 <code>export PATH=/Library/Tex/texbin:$PATH</code></p> <pre><code>export PATH=/usr/local/texlive/2021/bin/x86_64-linux:$PATH\nexport PATH=/usr/local/texlive/2021/texmf-dist/scripts/latexindent:$PATH\nexport MANPATH=/usr/local/texlive/2021/texmf-dist/doc/man:$MANPATH\nexport INFOPATH=/usr/local/texlive/2021/texmf-dist/doc/info:$INFOPATH\n</code></pre> <p>\u5feb\u6377\u952e</p> <pre><code>\u7f16\u8bd1\u5feb\u6377\u952e\uff1aCommand+Option+B\n\u663e\u793a\u5feb\u6377\u952e\uff1aCommand+Option+V\n\u6b63\u5411\u641c\u7d22\uff1a\u9009\u4e2d\u4ee3\u7801Command+Option+J\n\u53cd\u5411\u641c\u7d22\uff1ashift+command\u70b9\u51fb\u9884\u89c8PDF\n</code></pre>"},{"location":"os/vscode/#vs-code_1","title":"\u4f7f\u7528 VS Code \u8fdc\u7a0b\u7f16\u8bd1","text":"<ul> <li>\u53c2\u89c1 \u4f7f\u7528 VSCode \u7f16\u5199 LaTeX \u2b50\ufe0f</li> <li>\u4e1c\u5357\u5927\u5b66\u7814\u7a76\u751f Latex \u6a21\u7248<ul> <li>\u5176\u4e2d\u7528\u5230\u7684\u5b57\u4f53 CodeSwift-Comment</li> </ul> </li> </ul> <p>\u8fdc\u7a0b\u5b89\u88c5 TexLive</p> <pre><code># \u5b89\u88c5 TexLive\nsudo apt update\nsudo apt upgrade\nsudo apt install texlive-full\n</code></pre> <p>VS Code \u8fdc\u7a0b\u8fde\u63a5\uff0c\u5b89\u88c5 LaTeX Workshop \u62d3\u5c55</p> <p>\u8fdb\u884c\u914d\u7f6e\uff0c\u6ce8\u610f Preferences: Open Workspace Settings (JSON) \uff08Ctrl + Shift + P \u547d\u4ee4\u9762\u677f\uff09\u7b49\u9009\u9879\u4e2d\uff0c\u5de5\u4f5c\u533a\u8bbe\u7f6e\u3001\u8fdc\u7a0b\u8bbe\u7f6e\u3001\u672c\u5730\u8bbe\u7f6e \u8fd9\u4e9b\u533a\u522b\u3002\u6ce8\u610f\u914d\u7f6e\u66f4\u65b0\u4e4b\u540e Reload Window \u91cd\u65b0\u52a0\u8f7d\u7a97\u53e3\u3002</p> <p>\u53e6\u5916\uff0c\u5b57\u4f53\u95ee\u9898\uff0c\u4ece \u8fd9\u91cc \u4e0b\u8f7d\u653e\u7f6e\u597d\u4e4b\u540e\uff0c\u4ee5\u4e0b\u5237\u65b0\u5b57\u4f53\u7f13\u5b58</p> <pre><code># \u67e5\u770b\u5b57\u4f53\nfc-list :lang=zh\n\n# \u5728 /usr/share/fonts/myfonts \u4e2d\u4e0b\u8f7d\u5b57\u4f53\uff0c\u66f4\u65b0\u5b57\u4f53\u7f13\u5b58\nmkfontscale\n# \u5982\u679c\u63d0\u793a mkfontscale: command not found\n# sudo apt install ttf-mscorefonts-installer\nmkfontdir\nfc-cache -fv\n# \u5982\u679c\u63d0\u793a fc-cache: command not found\n# sudo apt install fontconfig\n</code></pre> <p>Latex \u6709\u5f88\u591a\u7f16\u8bd1\u5de5\u5177\uff0c\u5e38\u89c1\u7684\u4e3b\u8981\u6709 LaTeXmk\u3001pdfLaTeX\u3001XeLaTeX\u3001LuaLaTeX \u7b49\uff0c\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u8f93\u51fa\u5305\u542b\u4e2d\u6587\u7684 PDF\uff0c\u56e0\u6b64\u6211\u4eec\u4f7f\u7528 XeLaTeX \u5de5\u5177\u3002</p>"},{"location":"os/vscode/#archive","title":"archive","text":"<p>\u4e0d\u518d\u4f7f\u7528\u7684\u63d2\u4ef6, archive</p> <ul> <li>Bracket Pair Colorizer 2 \u9ad8\u4eae\u533a\u5206\u5339\u914d\u7684\u62ec\u53f7\uff0c\u65b9\u4fbf\u67e5\u770b\u4ee3\u7801\u5757 (vscode \u81ea\u5e26\u4e86)</li> <li>Emmet HTML \u7b80\u5199\uff08vscode \u81ea\u5e26\u4e86\uff09</li> <li>Bookmark \u4ee3\u7801\u6807\u8bb0</li> <li>Rest Client API \u5f00\u53d1</li> <li>Thunder Client API\u5f00\u53d1\uff0c\u53c2\u89c1 https://www.boredapi.com/</li> <li>Prettier \u5f00\u542f format on save \u529f\u80fd</li> <li>Auto Close Tag \u81ea\u52a8\u5173\u95ed\u6807\u7b7e</li> <li>Auto Rename Tag \u81ea\u52a8\u66f4\u65b0\u6807\u7b7e\u540d\u79f0</li> </ul> <p>git</p> <ul> <li>GitLens</li> <li>gitignore \u9884\u5b9a\u4e49\u7684\u4e00\u4e9b gitignore \u914d\u7f6e</li> </ul> <p>\u4e2d\u6587 &lt;-&gt; \u8f6c\u4e49\u540e\u7684ASCII (\u4f8b\u5982json)</p> <ul> <li><code>cwan.native-ascii-converter</code> Native-ASCII Converter<ul> <li>Convert characters with Unicode escapes or vice versa. The same as \u2018native2ascii\u2019 tool of JDK.</li> </ul> </li> </ul>"},{"location":"os/vscode/#debug","title":"Debug","text":"<p>\u8bb0\u5f55\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u8e29\u8fc7\u7684\u5751.</p>"},{"location":"os/vscode/#copilot-markdown-tab","title":"Copilot: \u5728 Markdown \u73af\u5883\u4e0b\u65e0\u6cd5 tab \u8865\u5168","text":"<p>\u4e3b\u8981\u662f\u5feb\u6377\u952e\u95ee\u9898. \u53c2\u89c1 here</p> <p>Copilot \u7684\u8865\u5168\u5c5e\u4e8e <code>editor.action.inlineSuggest.commit</code>. \u8bbe\u7f6e\u4e3a <code>Tab</code> \u5373\u53ef\u8865\u5168.</p> <p>\u67e5\u4e0b\u6765\u7684\u95ee\u9898\u597d\u50cf\u662f\u548c <code>markdown.extension.onTabKey</code> \u53d1\u751f\u4e86\u51b2\u7a81, \u4e0d\u8fc7\u540e\u6765\u91cd\u65b0\u8bbe\u7f6e\u4e00\u4e0b\u53c8\u53ef\u4ee5\u4e86?</p>"},{"location":"os/vscode/#_7","title":"\u6027\u80fd: \u5185\u5b58\u5360\u7528","text":"<p>\u4e3b\u8981\u7684\u89e3\u51b3\u65b9\u6848, \u8fd8\u662f\u5c11\u5f00\u4e00\u4e9bwindow.</p>"},{"location":"os/vscode/#cpu","title":"\u6027\u80fd\u95ee\u9898 (\u9ad8CPU)","text":"<p>\u53c2\u89c1 https://github.com/microsoft/vscode/wiki/Performance-Issues</p> <p>\u76f8\u5173\u5de5\u5177</p> <pre><code># \u67e5\u770b\u8fdb\u7a0b\u5360\u7528 (\u5e2e\u52a9 - \u8fdb\u7a0b\u7ba1\u7406\u5668)\nDeveloper: open process explorer\n# or \u5728\u7ec8\u7aef\u8fd0\u884c code --status\n\n# \u67e5\u770b\u63d2\u4ef6\u5360\u7528\nDeveloper: Show Running Extensions\n# \u547d\u4ee4\u884c code --disable-extensions\n\n# \u542f\u52a8\u901f\u5ea6\nStartup Performance.\n# \u547d\u4ee4\u884c code --prof-startup\n</code></pre> <p>\u4ecb\u7ecd\u4e86\u5e38\u89c1\u7684\u95ee\u9898</p> <ul> <li>The Renderer/Window process consumes a lot of CPU</li> <li>The Shared process consumes a lot of CPU</li> </ul>"},{"location":"os/vscode/#visual-studio-code-is-unable-to-watch-for-file-changes-in-this-large-workspace-error-enospc","title":"\u65e0\u6cd5\u76d1\u6d4b\u5927\u6587\u4ef6\u5939 \u201cVisual Studio Code is unable to watch for file changes in this large workspace\u201d (error ENOSPC)","text":"<p>\u53c2\u89c1 \u8fd9\u91cc \uff0c\u5230\u8bbe\u7f6e\u4e2d\u6dfb\u52a0 <code>files.watcherExclude</code> \u9879\u5373\u53ef\u3002\u5f88\u8d34\u5fc3\u7684\u662f\uff0cCode \u7684\u914d\u7f6e\u5305\u62ec\u4e86 User, Remote, Workspace \u4e0d\u540c\u7684\u4f5c\u7528\u57df\u3002</p> <pre><code>**/venv/**\n</code></pre>"},{"location":"os/vscode/#vs-codepython","title":"VS Code\u8c03\u8bd5Python\u65f6\u7684\u6267\u884c\u8def\u5f84","text":"<p>\u901a\u8fc7 <code>print(os.getcwd())</code> \u6253\u5370\u5f53\u524d\u8def\u5f84</p> <p>\u89e3\u51b3\u65b9\u6848: \u914d\u7f6e launch.json</p> <pre><code>\"cwd\": \"${fileDirname}\"\n</code></pre> <ul> <li>os.chdir\u8bbe\u7f6e\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55</li> </ul> <pre><code>import os, sys\n# \u8bbe\u7f6e\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff0c\u653e\u5728import\u5176\u4ed6\u8def\u5f84\u6a21\u5757\u4e4b\u524d\nos.chdir(sys.path[0])\n\n# \u5bfc\u5165\u4e0a\u4e0a\u7ea7\u76ee\u5f55\nsys.path.append(\"../../\")\n# \u5f15\u5165\u4e0a\u4e0a\u7ea7\u76ee\u5f55\u4e0b\u7684\u6a21\u5757\nfrom submodulea.modulea import *\n</code></pre> <ul> <li>sys.path.append\u6dfb\u52a0\u9876\u5c42\u6587\u4ef6\u5939\u76f8\u5bf9\u8def\u5f84</li> </ul> <pre><code>import os,sys\n# \u6ce8\u610f\u9ed8\u8ba4\u5de5\u4f5c\u76ee\u5f55\u5728\u9876\u5c42\u6587\u4ef6\u5939\uff0c\u8fd9\u91cc\u662f\u76f8\u5bf9\u4e8e\u9876\u5c42\u6587\u4ef6\u5939\u7684\u76ee\u5f55\nsys.path.append(\"./\")\n\n# \u5bfc\u5165\u4e0a\u4e0a\u7ea7\u76ee\u5f55\nsys.path.append(\"../../\")\n</code></pre>"},{"location":"os/vscode/#windows","title":"windows \u73af\u5883\u8bf4\u660e","text":"<ul> <li><code>git</code>: \u6839\u636evscode\u7684\u63d0\u793a\u4e0b\u8f7d, \u82e5\u5b89\u88c5\u4e4b\u540e\u63d0\u793a\u62db\u4e0d\u5230, \u53ef\u4ee5\u5728\u8bbe\u7f6e\u4e2d\u914d\u7f6e <code>git.path</code> \u53c2\u6570.</li> <li>\u4e2d\u6587\u8bbe\u7f6e\u91c7\u7528\u82f1\u6587\u6807\u70b9: \u5728 <code>\u8bbe\u7f6e-\u8bed\u8a00-\u5fae\u8f6f\u62fc\u97f3-\u5e38\u89c4\u8bbe\u7f6e</code> \u4e2d\u70b9\u5f00 <code>\u4e2d\u6587\u8f93\u5165\u65f6\u4f7f\u7528\u82f1\u6587\u6807\u70b9</code>.<ul> <li>\u597d\u5427, \u5b9e\u9645\u4e0a\u5728\u5e95\u90e8\u7684\u8f93\u5165\u4e2d\u4e5f\u53ef\u4ee5\u8bbe\u7f6e, \u5feb\u6377\u952e <code>Ctrl+\u3002</code>.</li> </ul> </li> </ul>"},{"location":"os/vscode/#_8","title":"\u9644\u5f55","text":""},{"location":"os/vscode/#settingjson","title":"setting.json","text":"<p>\u89c1 https://gist.github.com/Lightblues/7af038aef620ecebe64b96238324b546</p>"},{"location":"stat/","title":"index","text":"<p>\u7b14\u8bb0</p>"},{"location":"stat/ASL-mindmap/","title":"ASL mindmap","text":""},{"location":"stat/ASL-mindmap/#syllabus","title":"Syllabus","text":"<ul> <li>Overview</li> <li>Linear methods for regression</li> <li>Linear methods for classification</li> <li>Basis expansions and regularization</li> <li>Model assessment and selection</li> <li>Model inference and averaging</li> <li>Tree based methods</li> <li>Boosting</li> <li>Random forest</li> <li>Support vector machine</li> <li>Propotype methods and nearest-neighbors</li> <li>unsupervised learning</li> </ul>"},{"location":"stat/ASL-mindmap/#introduction","title":"Introduction","text":"<ul> <li>\u76d1\u7763\u5b66\u4e60: \u4e0d\u540c\u7684\u4efb\u52a1\u5f62\u5f0f, \u56de\u5f52\u3001\u5206\u7c7b\u3001\u6392\u5e8f</li> <li>\u65e0\u76d1\u7763: \u805a\u7c7b</li> <li>\u51e0\u4e2a\u4f8b\u5b50: Email spam, Prostate cancer(regression), Handwritten digit recognition, DNA expression microarrays(\u65e0\u76d1\u7763, Cluster together genes or samples)</li> </ul>"},{"location":"stat/ASL-mindmap/#_1","title":"\u76d1\u7763\u5b66\u4e60\u6982\u8981","text":"<ul> <li>\u53d8\u91cf\u7c7b\u578b\u548c\u672f\u8bed</li> <li>\u4e24\u79cd\u7b80\u5355\u7684\u9884\u6d4b\u65b9\u6cd5<ul> <li>\u7ebf\u6027 Least Square</li> <li>KNN</li> <li>\u6ce8\u610f, \u4e24\u79cd\u90fd\u53ef\u4ee5\u5904\u7406\u5206\u7c7b\u548c\u56de\u5f52\u4efb\u52a1, \u800c kNN \u7684\u6709\u6548\u53c2\u6570\u91cf\u4e3a N/k, \u4e00\u822c\u6bd4\u7ebf\u6027\u6a21\u578b\u66f4\u591a; \u56e0\u6b64 kNN \u76f8\u8f83\u4e8e\u6700\u5c0f\u4e8c\u4e58\u6709\u7740 \u4f4e\u504f\u5dee, \u9ad8\u65b9\u5dee \u7684\u7279\u70b9</li> <li>\u62d3\u5c55 LS \u548c kNN: 1. Kernel \u65b9\u6cd5; 2. \u5c40\u90e8\u56de\u5f52; 3. Basis expansion \u901a\u8fc7\u57fa\u62d3\u5c55\u4f7f\u5f97\u5305\u62ec\u66f4\u591a\u7684\u8f93\u5165\u5f62\u5f0f</li> </ul> </li> <li>\u7edf\u8ba1\u5224\u522b\u7406\u8bba Statistical Decision Theory<ul> <li>\u9488\u5bf9\u56de\u5f52\u548c\u5206\u7c7b\u573a\u666f, \u6bd4\u8f83\u4e86\u4e0d\u540c\u7684 loss</li> <li>\u6839\u636e Expected prediction error E P E(f)=E(Y-f(x))^{2}=\\int(y-f(x))^{2} \\operatorname{Pr}(d x, d y), \u63a8\u5bfc\u51fa<ul> <li>[\u56de\u5f52] \u5728\u5e73\u65b9\u635f\u5931\u4e0b\u6700\u4f18\u89e3\u4e3a f(x)=E(Y \\mid X=x)</li> <li>[\u5206\u7c7b] \u5728 0-1 \u635f\u5931\u4e0b\u4e3a \u540e\u9a8c\u6982\u7387\u6700\u5927\u7684\u7c7b\u522b</li> </ul> </li> <li>\u56e0\u6b64\u7ed9\u51fa\u4e86\u6700\u5c0f\u4e8c\u4e58\u548c kNN \u7684\u7ed3\u679c</li> </ul> </li> <li>\u9ad8\u7eac\u95ee\u9898\u7684\u5c40\u90e8\u65b9\u6cd5 Curse of Dimensionality<ul> <li>\u603b\u4e4b, \u5c31\u662f\u7ef4\u5ea6\u7684\u589e\u52a0\u9020\u6210\u4e86\u6570\u636e\u7a00\u758f</li> </ul> </li> <li>\u7edf\u8ba1\u6a21\u578b\u3001\u76d1\u7763\u5b66\u4e60\u548c\u51fd\u6570\u903c\u8fd1<ul> <li>\u7528\u51fd\u6570\u4f30\u8ba1\u7684\u601d\u60f3\u4ecb\u7ecd\u4e86 \u7edf\u8ba1\u6a21\u578b<ul> <li>[\u56de\u5f52] additive error model, kNN</li> <li>[\u5206\u7c7b] \u76f4\u63a5\u5efa\u6a21\u540e\u9a8c\u6982\u7387, logistic regression, probit regression</li> </ul> </li> <li>\u51fd\u6570/\u53c2\u6570\u4f30\u8ba1\u7684\u65b9\u6cd5<ul> <li>\u7ebf\u6027\u6a21\u578b\u6700\u5c0f\u4e8c\u4e58</li> <li>\u66f4\u4e00\u822c\u7684\u662f MLE<ul> <li>\u4e24\u4e2a\u4f8b\u5b50: 1. \u9ad8\u65af\u5206\u5e03\u4e0b, MLE \u7b49\u4ef7\u4e8e LS; 2. Multinomial distribution \u4e0b, \u7c7b\u522b\u7684\u4f30\u8ba1\u7b26\u5408\u76f4\u89c9.</li> </ul> </li> </ul> </li> </ul> </li> <li>Restricted Estimators, \u4ecb\u7ecd\u4e86\u4e09\u7c7b<ul> <li>Roughness Penalty and Bayesian Methods<ul> <li>P R S S(f ; \\lambda)=R S S(f)+\\lambda J(f)</li> <li>\u4f8b\u5982 P R S S(f ; \\lambda)=\\sum_{i=1}^{N}\\left(y_{i}-f\\left(x_{i}\\right)\\right)^{2}+\\lambda \\int\\left[f(x)^{\\prime \\prime}\\right]^{2} \u7684\u89e3\u5c31\u662f\u4e09\u6b21\u5149\u6ed1\u6837\u6761</li> <li>\u8d1d\u53f6\u65af\u89c6\u89d2: \u53ef\u4ee5\u5c06\u60e9\u7f5a\u9879\u770b\u6210\u662f prior belief (log), \u6700\u5c0f\u5316 PRSS \u5c31\u662f\u6700\u5927\u5316 \u540e\u9a8c\u6982\u7387</li> </ul> </li> <li>Kernel Methods and Local Regression<ul> <li>R S S\\left(f_{\\theta}, x_{0}\\right)=\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)\\left(y_{i}-f_{\\theta}\\left(x_{i}\\right)\\right)^{2}</li> <li>\u8fd9\u91cc\u5f85\u4f30\u8ba1\u7684\u51fd\u6570\u5f62\u5f0f\u82e5\u4e3a\u5e38\u6570, \u5219\u4e3a\u7ecf\u5178\u7684 Nadaraya-Watson estimate (\u5e26\u4e0a\u6743\u91cd\u7684 kNN; kNN \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u7279\u6b8a\u7684 Kernel); \u82e5\u4e3a\u7ebf\u6027\u51fd\u6570, \u5219\u4e3a\u5c40\u90e8\u7ebf\u6027\u56de\u5f52.</li> </ul> </li> <li>Basis Functions and Dictionary Methods<ul> <li>(1) \u7ebf\u6027\u57fa expansion f_{\\theta}(x)=\\sum_{m=1}^{M}\\left(\\theta_{m} h_{m}(x)\\right)<ul> <li>\u89c1 <code>5.2 \u8282</code></li> <li>\u5f84\u5411\u57fa\u51fd\u6570 Radial basis functions, \u89c1 <code>6.7 \u8282</code></li> </ul> </li> <li>(2) \u795e\u7ecf\u7f51\u7edc: \u5355\u5c42\u7684\u5411\u524d\u53cd\u9988\u7684\u5e26\u6709\u7ebf\u6027\u8f93\u51fa\u6743\u91cd\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u79cd\u81ea\u9002\u5e94\u7684\u57fa\u51fd\u6570\u65b9\u6cd5, f_{\\theta}(x)=\\sum_{i=1}^{M} \\beta_{m} \\sigma\\left(\\alpha_{m}^{\\top} x+b_{m}\\right)</li> <li>\u8fd9\u4e9b\u81ea\u9002\u5e94\u9009\u62e9\u57fa\u51fd\u6570\u7684\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4f5c \u5b57\u5178 (dictionary) \u65b9\u6cd5; \u5728 infinite set \u7684\u5b57\u5178\u4e2d\u6309\u7167\u4e00\u5b9a\u7684\u7b56\u7565\u641c\u7d22</li> </ul> </li> </ul> </li> <li>Bias Variance Tradeoff<ul> <li>\u6a21\u578b\u590d\u6742\u5ea6: \u4e0a\u9762\u7684\u4e09\u79cd\u9650\u5236\u7b56\u7565, \u60e9\u7f5a\u9879\u7cfb\u6570\u3001Kernel \u5bbd\u5ea6\u3001\u57fa\u51fd\u6570\u6570\u91cf \u90fd\u63a7\u5236\u4e86\u6a21\u578b\u590d\u6742\u5ea6 (smooth/\u53c2\u6570\u6570\u91cf)</li> <li>EPE (expected prediction error) \u7684\u5206\u89e3 EPE(x_0) =E\\left[y_{0}-f\\left(x_{0}\\right)\\right]^{2}+E\\left[f\\left(x_{0}\\right)-E\\left(\\hat{f}\\left(x_{0}\\right)\\right) \\right]^{2}+E\\left[\\hat{f}\\left(x_{0}\\right)-E\\left(\\hat{f}\\left(x_{0}\\right)\\right)\\right]^{2}.</li> <li>\u7b2c\u4e00\u9879\u4e3a irreducible error \u4e0d\u53ef\u7ea6\u51cf; \u540e\u9762\u4e24\u9879\u6784\u6210 \u5747\u65b9\u8bef\u5dee (mean squared error), \u5206\u522b\u4e3a Bias squared \u548c Variance</li> <li>\u89c1 <code>\u7b2c 7 \u7ae0</code></li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#_2","title":"\u56de\u5f52\u7684\u7ebf\u6027\u6a21\u578b","text":"<ul> <li>Intro<ul> <li>\u7ebf\u6027\u6a21\u578b\u7684\u4f18\u52bf: 1. \u6a21\u578b\u7b80\u5355, \u53ef\u89e3\u91ca; 2. \u5728 \u8bad\u7ec3\u96c6\u6570\u91cf\u8f83\u5c0f\u3001\u4fe1\u566a\u6bd4\u8f83\u4f4e\u3001\u7a00\u758f\u6570\u636e \u7b49\u60c5\u51b5\u4e0b\u8868\u73b0\u8f83\u597d; 3. \u901a\u8fc7\u62d3\u5c55\u53ef\u4ee5\u9002\u7528\u4e8e\u975e\u7ebf\u6027\u60c5\u51b5</li> </ul> </li> <li>Linear Regression \\&amp; Least Squares<ul> <li>\u901a\u8fc7 LS \u4f30\u8ba1, \u5219\u5728 X \u5217\u6ee1\u79e9\u7684\u6761\u4ef6\u4e0b\u6709\u53c2\u6570\u4f30\u8ba1 \\hat{\\beta}=\\left(X^{\\top} X\\right)^{-1} X^{\\top} y; \u53e6\u6709\u968f\u673a\u9879\u65b9\u5dee\u4f30\u8ba1 \\hat{\\sigma}^{2}=\\frac{1}{N-p-1} \\sum_{i=1}^{N}\\left(y_{i}-\\hat{y}_{i}\\right)^{2}</li> <li>\u91cd\u70b9\u8981\u5173\u6ce8\u7684\u662f\u53c2\u6570\u4f30\u8ba1\u7684 \u65b9\u5dee</li> <li>\u52a0\u4e0a\u6b63\u6001\u6027\u5047\u8bbe, \u5219\u6709 \\hat{\\beta} \\sim \\mathcal{N}\\left(\\beta,\\left(X^{\\top} X\\right)^{-1} \\sigma^{2}\\right), \u4ee5\u53ca (N-p-1) \\hat{\\sigma}^{2} \\sim \\sigma^{2} \\chi_{N-p-1}^{2}</li> <li>\u53ef\u5f97 Hypothesis Testing<ul> <li>\u5355\u53d8\u91cf: 1. \u5728\u566a\u58f0\u65b9\u5dee\u5df2\u77e5\u65f6, z_{j}=\\frac{\\hat{\\beta}_{j}}{\\sigma \\sqrt{v_{j}}} \\sim \\mathcal{N}(0,1); 2. \u672a\u77e5, \u5219\u7528\u4f30\u8ba1\u503c\u66ff\u6362, z_{j}=\\frac{\\hat{\\beta}_{j}}{\\hat{\\sigma} \\sqrt{v_{j}}} \\sim t(N-p-1).</li> <li>\u68c0\u9a8c\u591a\u53d8\u91cf, \u8bb0\u5927\u6a21\u578b\u548c\u5c0f\u6a21\u578b\u5206\u522b\u6709 p_1+1, p_0+1 \u4e2a\u53c2\u6570, \u5206\u522b\u8ba1\u7b97 RSS,<ul> <li>\u5b9a\u4e49\u7edf\u8ba1\u91cf F=\\frac{\\left(R S S_{0}-R S S_{1}\\right) /\\left(P_{1}-P_{0}\\right)}{R S S_{1} /\\left(N-P_{1}-1\\right)}; \u8861\u91cf\u4e86 \u5927\u6a21\u578b\u4e2d\u6bcf\u4e2a\u589e\u52a0\u7684\u7cfb\u6570\u5bf9\u4e8e RSS \u7684\u6539\u53d8, \u5e76\u4e14\u7528\u65b9\u5dee\u7684\u4f30\u8ba1\u503c\u8fdb\u884c\u6807\u51c6\u5316</li> <li>\u5728\u96f6\u5047\u8bbe\u4e0b, H_{0}, F \\sim \\mathcal{F}_{p_{1}-p_{0}, N-p_{1}-1}</li> </ul> </li> </ul> </li> <li>Confidence Interval / Region<ul> <li>\u5355\u53d8\u91cf: 1-2 \\alpha \u7f6e\u4fe1\u533a\u95f4\u4e3a \\left(\\hat{\\beta}_{j}-z^{1-\\alpha} v_{j}^{1 / 2} \\hat{\\sigma}, \\hat{\\beta}_{j}+z^{1-\\alpha} v_{j}^{1 / 2} \\hat{\\sigma}\\right), \u5176\u4e2d\u7684 z^{1-\\alpha} \u4e3a\u6b63\u6001\u5206\u5e03\u6216 t \u5206\u5e03\u7684 {1-\\alpha} \u5206\u4f4d\u6570</li> <li>\u5168\u53d8\u91cf: \\beta: 1-2 \\alpha confidence region \u4e3a \\mathcal{C}_{\\beta}=\\left\\{\\beta \\mid(\\hat{\\beta}-\\beta)^{\\top} X^{\\top} X(\\hat{\\beta}-\\beta) \\leqslant \\hat{\\sigma}^{2} {\\chi_{p+1}^{2}}^{1-2 \\alpha}\\right\\}</li> </ul> </li> <li>Gauss Markov Theorem: \u5728\u53c2\u6570 \\beta \u7684\u6240\u6709\u65e0\u504f\u4f30\u8ba1\u4e2d, \u6700\u5c0f\u4e8c\u4e58\u4f30\u8ba1\u662f\u5176\u4e2d\u65b9\u5dee\u6700\u5c0f\u7684.<ul> <li>\u8bc1\u660e</li> </ul> </li> <li>\u62d3\u5c55\u4e24\u70b9<ul> <li>Multiple Linear Regression: \u591a\u5143\u7ebf\u6027\u56de\u5f52\u548c\u4e00\u5143\u7684\u5173\u7cfb: \u5f53\u6240\u6709\u81ea\u53d8\u91cf\u90fd\u662f\u6b63\u4ea4\u7684\u60c5\u51b5\u4e0b, \u5f97\u5230\u7684\u7cfb\u6570\u90fd\u662f\u4e00\u6837\u7684. \u800c\u5bf9\u4e8e\u4e0d\u6b63\u4ea4\u7684\u60c5\u51b5, \u53ef\u4ee5\u91c7\u7528 Gram-Schmidt \u6b63\u4ea4\u5316, \u5f53\u7136\u5728\u4e24\u4e2a\u53d8\u91cf\u76f8\u5173\u6027\u8f83\u9ad8\u7684\u60c5\u51b5\u4e0b, \u4f30\u8ba1\u4f1a\u4e0d\u7a33\u5b9a.</li> <li>Multiple Outputs: 1. \u5f53\u4e0d\u540c\u7684 Y_i \u8bef\u5dee\u9879\u72ec\u7acb\u65f6, \u53ef\u4ee5\u5206\u89e3\u4e3a\u4e00\u5143\u8f93\u51fa\u7684\u5f62\u5f0f; 2. \u76f8\u5173\u65f6 (\u5047\u5b9a\u6240\u6709\u89c2\u6d4b\u7684\u8bef\u5dee\u534f\u65b9\u5dee\u77e9\u9635 \\Sigma_{i} \u76f8\u540c), \u9700\u8981\u5b9a\u4e49 R S S(B, \\Sigma)=\\sum_{i=1}^{N}\\left(y_{i}-f\\left(x_{i}\\right)\\right)^{\\top} \\Sigma^{-1}\\left(y_{i}-f\\left(x_{i}\\right)\\right) \u6ce8\u610f\u8fd9\u91cc\u7528\u4e86\u8bef\u5dee\u7684\u534f\u65b9\u5dee\u77e9\u9635\u8fdb\u884c\u8bbe\u7f6e\u4e0d\u540c\u4f30\u8ba1\u8bef\u5dee\u4e4b\u95f4\u7684\u7cfb\u6570, \u53eb\u505a \u300c\u591a\u91cd\u53d8\u91cf\u52a0\u6743\u51c6\u5219\u300d, \u53ef\u7531\u300c\u591a\u53d8\u91cf\u9ad8\u65af\u5b9a\u7406\u300d\u63a8\u51fa.</li> </ul> </li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#_3","title":"\u5b50\u96c6\u9009\u62e9","text":"<ul> <li>Subset Selection<ul> <li>\u4e0d\u91c7\u7528\u57fa\u672c\u7684 LS \u7684\u4e24\u70b9\u7406\u7531: \u9884\u6d4b\u7cbe\u786e\u6027, \u6a21\u578b\u7684\u53ef\u89e3\u91ca\u6027</li> <li>\u6709\u7406\u60f3\u7684\u60c5\u51b5, \u81ea\u7136\u662f\u4ece\u6240\u6709\u53ef\u80fd\u7684\u5b50\u96c6\u4e2d\u9009\u62e9\u6700\u4f18\u7684, \u4f46\u662f\u8ba1\u7b97\u91cf\u8fc7\u5927.</li> <li>\u76f8\u8f83\u4e8e\u91c7\u7528 F \u7edf\u8ba1\u91cf\u6765\u9009\u62e9\u300c\u663e\u8457\u6027\u300d\u9879\u7136\u540e\u5220\u9664\u975e\u663e\u8457\u9879, \u5b83\u7684\u95ee\u9898\u5728\u4e8e\u6ca1\u6709\u8003\u8651\u300c\u591a\u91cd\u68c0\u9a8c\u300d\u95ee\u9898, \u56e0\u6b64 Forward/Backward-stepwise selection \u66f4\u597d.</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#shrinkage-methods","title":"\u6536\u7f29\u65b9\u6cd5 Shrinkage methods","text":"<ul> <li>Subset \u65b9\u6cd5:<ul> <li>\u4f18\u70b9: 1. \u53ef\u89e3\u91ca; 2. \u53ef\u80fd\u76f8\u8f83\u4e8e\u5168\u6a21\u578b\u6709\u66f4\u5c0f\u7684\u9884\u6d4b\u8bef\u5dee</li> <li>\u7f3a\u70b9: 1. Discrete, \u53d8\u91cf\u6709\u6216\u65e0; 2. \u9ad8\u65b9\u5dee</li> </ul> </li> <li>Ridge Regression \u5cad\u56de\u5f52<ul> <li>\\hat{\\beta}^{\\text {ridge }}=\\operatorname{argmin}_{\\beta}\\left\\{\\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2}+\\lambda \\sum_{j=1}^{p} \\beta_{j}^{2}\\right\\}, \u53ef\u5229\u7528 Lagrange \u4e58\u5b50\u6cd5 \u8bc1\u660e\u60e9\u7f5a\u9879\u53ef\u7b49\u4ef7\u4e8e, \u589e\u52a0\u786c\u6027\u7ea6\u675f \\sum_{j=1}^{p} \\beta_{j}^{2} \\leqslant t</li> <li>\u6ce8\u610f, \u5bf9\u4e8e\u5cad\u56de\u5f52, \u5bf9\u8f93\u5165\u6309\u7167\u6bd4\u4f8b\u8fdb\u884c\u7f29\u653e, \u5f97\u5230\u7684\u7ed3\u679c\u662f\u4e0d\u540c\u7684, \u56e0\u6b64\u5728\u4e0a\u9762\u7684\u6c42\u89e3\u524d\u9700\u8981\u89c1\u8fdb\u884c\u6807\u51c6\u5316.</li> <li>\u89e3: \\hat{\\beta}^{\\text {ridge }}=\\left(X^{\\top} X+\\lambda I\\right)^{-1} X^{\\top} y</li> <li>\u6027\u8d28:<ul> <li>\u6ce8\u610f\u5230\u901a\u8fc7\u589e\u52a0\u4e86\u4e00\u4e2a\u5355\u4f4d\u9635, \u4fdd\u8bc1\u4e86\u77e9\u9635 nonsingular</li> <li>\u5728\u6b63\u4ea4\u8f93\u5165\u7684\u60c5\u5f62\u4e0b\uff0c\u5cad\u56de\u5f52\u4f30\u8ba1\u4ec5\u4ec5\u662f\u6700\u5c0f\u4e8c\u4e58\u4f30\u8ba1\u7684 \u6536\u7f29 \u7248\u672c, \u5373 \\hat{\\beta}^{\\text {ridge}}=\\frac{1}{1+\\lambda}\\hat{\\beta}^{O L S}</li> <li>\u53ef\u4ee5\u8bc1\u660e\u5cad\u56de\u5f52\u7b49\u4ef7\u4e8e \u53c2\u6570\u5728\u9ad8\u65af\u5148\u9a8c\u4e0b\u7684\u540e\u9a8c\u4f30\u8ba1, \u4e14\u6ee1\u8db3\u5173\u7cfb \\lambda = \\sigma^2 / \\tau^2, \u5176\u4e2d \\sigma^2 \u4e3a\u566a\u58f0\u9879\u65b9\u5dee, \\tau^2 \u4e3a prior \u9ad8\u65af\u65b9\u5dee.</li> </ul> </li> <li>\u5229\u7528 SVD \u5206\u89e3, \u53ef\u4ee5\u5f97\u5230 X \\hat{\\beta}^{\\text {ridge }}=\\sum_{j=1}^{p} \\mu_{j} \\frac{d_{j}^{2}}{d_{j}^{2}+\\lambda} \\mu_{j}^{\\top} y, \u5176\u4e2d X=U D V^{\\top}<ul> <li>\u4ece\u4e2d\u53ef\u4ee5\u770b\u51fa\u5cad\u56de\u5f52\u300c\u6536\u7f29\u300d\u7684\u672c\u8d28: \u5bf9\u4e8e\u65b9\u5dee\u8d8a\u5c0f\u7684\u4e3b\u6210\u5206, ridge \u7684\u6536\u7f29\u8d8a\u5389\u5bb3</li> </ul> </li> <li>\u5b9a\u4e49 \\mathrm{df}(\\lambda) =\\operatorname{tr}\\left[\\mathbf{X}\\left(\\mathbf{X}^{\\mathbf{T}} \\mathbf{X}+\\lambda \\mathbf{I}\\right)^{-1} \\mathbf{X}^{T}\\right] =\\operatorname{tr}\\left(\\mathbf{H}_{\\lambda}\\right) =\\sum_{j=1}^{p} \\frac{d_{j}^{2}}{d_{j}^{2}+\\lambda} \u4e3a\u5cad\u56de\u5f52\u7684\u6709\u6548\u81ea\u7531\u5ea6, \u5176\u4e3a \\lambda \u7684\u9012\u51cf\u51fd\u6570.</li> </ul> </li> <li>LASSO<ul> <li>\u6362\u6210 L_{1} penalty. \u6b64\u65f6, \u6ca1\u6709\u663e\u5f0f\u89e3, \u4e0d\u518d\u5982 LS \u548c Ridge \u65f6\u4e00\u6837, \u53c2\u6570\u4f30\u8ba1\u4e3a Y \u7684\u7ebf\u6027\u51fd\u6570.</li> <li>\u540c\u6837\u53ef\u5199\u6210\u786c\u6027\u7ea6\u675f\u7684\u5f62\u5f0f, \u6ce8\u610f\u5230\u5f53 t&gt;\\sum_{j=1}^{p}\\left|\\beta_{j}^{\\text {OLS }}\\right| \u65f6 \\hat{\\beta}^{\\text {lasso }} becomes \\hat{\\beta}^{\\text {OLS }}</li> </ul> </li> <li>\u6bd4\u8f83: \u5728 X \u6b63\u4ea4\u7684\u60c5\u51b5, \u4e09\u8005\u90fd\u6709\u663e\u5f0f\u89e3.<ul> <li></li> <li>\u6700\u4f18\u5b50\u96c6\u662f\u300chard-thresholding\u300d, Drop all variables with coefficients smaller than the M-th</li> <li>Ridge \u662f roportional shrinkage</li> <li>Lasso \u662f\u300csoft thresholding\u300d, translates by a constant factor \\lambda, truncating at zero.</li> </ul> </li> </ul> <p>Methods Using Derived Input Directions #TODO</p>"},{"location":"stat/ASL-mindmap/#some-algebra","title":"Some Algebra","text":""},{"location":"stat/ASL-mindmap/#svd","title":"SVD","text":"<ul> <li>\u65b9\u9635\u7684\u5bf9\u89d2\u5316\u5206\u89e3/\u7279\u5f81\u5206\u89e3: A=U\\Lambda U^{-1}, \u5176\u4e2d U \u7684\u6bcf\u4e00\u5217\u662f\u7279\u5f81\u5411\u91cf<ul> <li>\u5b9e\u5bf9\u79f0\u9635\u7684\u7279\u5f81\u503c\u90fd\u662f\u5b9e\u6570, \u4e14\u6709 N \u4e2a\u7ebf\u6027\u65e0\u5173\u7684\u7279\u5f81\u5411\u91cf, \u5e76\u4e14\u8fd9\u4e9b\u7279\u5f81\u5411\u91cf\u53ef\u4ee5\u6b63\u4ea4\u5355\u4f4d\u5316\u4e3a\u4e00\u7ec4\u6b63\u4ea4\u5355\u4f4d\u5411\u91cf, \u56e0\u6b64\u53ef\u5206\u89e3\u4e3a A=Q\\Lambda Q^{-1}= Q\\Lambda Q \u5176\u4e2d Q \u4e3a\u6b63\u4ea4\u9635 (\u77e9\u9635 A \u7684 \u5bf9\u79f0\u5bf9\u89d2\u5316\u5206\u89e3)</li> </ul> </li> <li>SVD \u5947\u5f02\u503c\u5206\u89e3 A=P\\Sigma Q<ul> <li>\u8fd9\u91cc\u7684 P \u548c Q \u5206\u522b\u662f\u5de6\u5947\u5f02\u5411\u91cf, \u5206\u522b\u662f AA^T=P\\Lambda_1 P^T, A^TA=Q\\Lambda_2 Q^T, \u8fd9\u91cc\u4e24\u4e2a\u7279\u5f81\u503c\u5bf9\u89d2\u9635\u4e2d, \u975e\u96f6\u7279\u5f81\u503c\u76f8\u540c (\u6ce8\u610f\u5230 AB \u548c BA \u7684\u7279\u5f81\u503c\u76f8\u540c)</li> <li>\u5947\u5f02\u503c\u548c\u7279\u5f81\u503c\u5173\u7cfb: AA^T=P\\Sigma^2 P^T, \u56e0\u6b64\u6709 \\Sigma^2=\\Lambda_1, \u4e5f\u5373\u5947\u5f02\u503c\u662f AA^T \u7684\u7279\u5f81\u503c\u7684\u5e73\u65b9\u6839 (\u6ce8\u610f AA^T \u4e00\u5b9a\u6b63\u5b9a)</li> </ul> </li> <li>\u5b9a\u7406: \u7ed9\u5b9a\u4e00\u4e2a\u5b9e\u6570\u77e9\u9635, \u603b\u80fd\u627e\u5230\u5176 SVD \u5206\u89e3, \u6ee1\u8db3 \\Sigma \u4e3a\u5bf9\u89d2\u9635\u5e76\u4e14\u5bf9\u89d2\u7ebf\u5143\u7d20\u975e\u8d1f.</li> </ul>"},{"location":"stat/ASL-mindmap/#todo","title":"TODO","text":""},{"location":"stat/ASL-mindmap/#pca","title":"PCA","text":"<ul> <li>PCA (Principle Component Analysis)<ul> <li>\u9996\u5148\u5bf9\u7ed9\u5b9a\u6570\u636e\u8fdb\u884c \u89c4\u8303\u5316\uff0c\u4f7f\u5f97\u6570\u636e\u6bcf\u4e00\u53d8\u91cf\u7684\u5e73\u5747\u503c\u4e3a 0\uff0c\u65b9\u5dee\u4e3a 1</li> <li>\u5bf9\u6570\u636e\u8fdb\u884c\u6b63\u4ea4\u53d8\u6362\u3002\u539f\u6765\u7531\u7ebf\u6027\u76f8\u5173\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\uff0c\u901a\u8fc7\u6b63\u4ea4\u53d8\u6362\u53d8\u6210\u7531\u82e5\u5e72\u4e2a\u7ebf\u6027\u65e0\u5173\u7684\u65b0\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\u3002\u65b0\u53d8\u91cf\u662f\u53ef\u80fd\u7684\u6b63\u4ea4\u53d8\u6362\u4e2d\u53d8\u91cf\u7684\u65b9\u5dee\u7684\u548c(\u4fe1\u606f\u4fdd\u5b58)\u6700\u5927\u7684\uff0c\u65b9\u5dee\u8868\u793a\u5728\u65b0\u53d8\u91cf\u4e0a\u7684\u4fe1\u606f\u7684\u5927\u5c0f\u3002</li> <li>[\u7406\u89e3] \u5bf9\u539f\u5750\u6807\u7cfb\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u4e3b\u6210\u5206\u5206\u6790\u7b49\u4ef7\u4e8e\u8fdb\u884c\u5750\u6807\u7cfb\u65cb\u8f6c\u53d8\u6362\uff0c\u5c06\u6570\u636e\u6295\u5f71\u5230\u65b0\u5750\u6807\u7cfb\u7684\u5750\u6807\u8f74\u4e0a\uff1b\u65b0\u5750\u6807\u7cfb\u7684\u7b2c\u4e00\u5750\u6807\u8f74\u3001\u7b2c\u4e8c\u5750\u6807\u8f74\u7b49\u5206\u522b\u8868\u793a\u7b2c\u4e00\u4e3b\u6210\u5206\u3001\u7b2c\u4e8c\u4e3b\u6210\u5206\u7b49\u3002\u6570\u636e\u5728\u6bcf\u4e00\u8f74\u4e0a\u7684\u5750\u6807\u503c\u7684\u5e73\u65b9\u8868\u793a\u76f8\u5e94\u53d8\u91cf\u7684\u65b9\u5dee\uff1b\u5e76\u4e14\uff0c\u8fd9\u4e2a\u5750\u6807\u7cfb\u662f\u5728\u6240\u6709\u53ef\u80fd\u7684\u65b0\u7684\u5750\u6807\u7cfb\u4e2d\uff0c\u5750\u6807\u8f74\u4e0a\u7684\u65b9\u5dee\u7684\u548c\u6700\u5927\u7684</li> </ul> </li> <li>Population PCA<ul> <li>\u95ee\u9898\u5b9a\u4e49: \u5047\u8bbe x=\\left(x_{1}, x_{2}, \\ldots, x_{m}\\right)^{\\top} \u4e3a \\mathrm{m}-dim \u968f\u673a\u53d8\u91cf, \u5747\u503c\u548c\u65b9\u5dee\u4e3a \\mu, \\Sigma; \u8003\u8651\u4ece x \u5230 y \u7684\u7ebf\u6027\u53d8\u6362, y_{i}=\\alpha_{i}^{\\top} x=\\alpha_{1 i} x_{1}+\\alpha_{2 i} x_{2}+\\ldots+\\alpha_{m i} x_{m}<ul> <li>\u53ef\u77e5: 1. E\\left(y_{i}\\right)=\\alpha_{i}^{\\top} \\mu; 2. \\operatorname{var}\\left(y_{i}\\right)=\\alpha_{i}^{\\top} \\Sigma \\alpha_{i}; 3. \\operatorname{cov}\\left(y_{i}, y_{j}\\right)=\\alpha_{i}^{\\top} \\Sigma \\alpha_{j}</li> <li>\u4e3a\u4e86\u4fdd\u8bc1\u4e00\u5b9a\u7684\u6027\u8d28, \u8fdb\u4e00\u6b65\u8981\u6c42 1. \\alpha_{i}^{\\top} \\alpha_{i}=1; 2. \\operatorname{cov}\\left(y_{i}, y_{j}\\right)=0 for i \\neq j; 3. y_{1} \u6709\u6700\u5927\u7684\u65b9\u5dee, y_{i} \u5728\u6ee1\u8db3\u4e0e\u4e4b\u524d\u7684 PC \u72ec\u7acb\u7684\u6761\u4ef6\u4e0b\u6709\u6700\u5927\u7684\u65b9\u5dee.</li> </ul> </li> <li>\u5b9a\u7406: \u5bf9\u4e8e\u968f\u673a\u5411\u91cf x \u6765\u8bf4, \u5176\u7b2c k \u4e2a PC \u6b63\u662f\u7531\u5176\u534f\u65b9\u5dee\u77e9\u9635\u7684\u7b2c k \u4e2a\u5947\u5f02\u5411\u91cf (\u5bf9\u79f0\u534a\u6b63\u5b9a\u9635\u7684\u7279\u5f81\u548c\u5947\u5f02\u503c\u5206\u89e3\u5e94\u8be5\u662f\u4e00\u6837\u7684), \u5e76\u4e14\u8fd9\u4e2a PC \u7684\u65b9\u5dee\u6b63\u662f\u7b2c k \u4e2a\u5947\u5f02\u503c(\u7279\u5f81\u503c).<ul> <li>\u82e5\u7279\u5f81\u503c\u6709\u91cd\u6839\uff0c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf\u7ec4\u6210 m \u7ef4\u7a7a\u95f4 \\mathcal{R}^m \u7684\u4e00\u4e2a\u5b50\u7a7a\u95f4\uff0c\u5b50\u7a7a\u95f4\u7684\u7ef4\u6570\u7b49\u4e8e\u91cd\u6839\u6570\uff0c\u5728\u5b50\u7a7a\u95f4\u4efb\u53d6\u4e00\u4e2a\u6b63\u4ea4\u5750\u6807\u7cfb\uff0c\u8fd9\u4e2a\u5750\u6807\u7cfb\u7684\u5355\u4f4d\u5411\u91cf\u5c31\u53ef\u4f5c\u4e3a\u7279\u5f81\u5411\u91cf\u3002\u8fd9\u662f\u5750\u6807\u7cfb\u53d6\u6cd5\u4e0d\u552f\u4e00\u3002</li> </ul> </li> <li>PCA \u6027\u8d28:<ul> <li>\\operatorname{cov}(y)=\\Lambda=\\operatorname{diag}\\left(\\lambda_{1}, \\lambda_{2}, \\ldots, \\lambda_{m}\\right) \u5404\u4e2a PC \u7684\u65b9\u5dee\u5c31\u662f\u534f\u65b9\u5dee\u9635\u7684\u5404\u4e2a\u5947\u5f02\u503c/\u7279\u5f81\u503c</li> <li>\\sum_{i=1}^{m} \\lambda_{i}=\\sum_{i=1}^{m} \\sigma_{i i}, where \\sigma_{i i} is the variance of x_{i} \u603b\u4f53\u4e3b\u6210\u5206 y \u7684\u65b9\u5dee\u4e4b\u548c\u7b49\u4e8e\u968f\u673a\u53d8\u91cf x \u7684\u65b9\u5dee\u4e4b\u548c<ul> <li>\\sum_{i=1}^{m} \\operatorname{var}\\left(x_{i}\\right) = \\operatorname{tr}\\left(\\Sigma^{\\top}\\right)=\\operatorname{tr}\\left(A \\Lambda A^{\\top}\\right)=\\operatorname{tr}\\left(A^{\\top} \\Lambda A\\right) =\\operatorname{tr}(\\Lambda)=\\sum_{i=1}^{m} \\lambda_{i}=\\sum_{i=1}^{m} \\operatorname{var}\\left(y_{i}\\right)</li> </ul> </li> <li>factor loading: correlation coefficient between y_{k} and x_{i}, \\rho\\left(y_{k}, x_{i}\\right)=\\frac{\\sqrt{\\lambda_{k}} \\alpha_{i k}}{\\sqrt{\\sigma_{i i}}} \u7b2c k \u4e2a\u4e3b\u6210\u5206 y_k \u4e0e\u53d8\u91cf xi \u7684\u76f8\u5173\u7cfb\u6570 \u03c1(y_k,x_i) \u79f0\u4e3a\u56e0\u5b50\u8d1f\u8377\u91cf(factor loading)\uff0c\u5b83\u8868\u793a\u7b2c k \u4e2a\u4e3b\u6210\u5206 y_k \u4e0e\u53d8\u91cf x_i \u7684\u76f8\u5173\u6027<ul> <li>\u6ce8\u610f\u5230 \\operatorname{cov}(y_k, x_i) = \\operatorname{cov}\\left(\\alpha_{k}^{\\top} x, e_{i}^{\\top} x\\right)=\\alpha_{k}^{\\top} \\Sigma e_{i}=e_{i}^{\\top} \\Sigma \\alpha_{k}=\\lambda_{k} e_{i}^{\\top} \\alpha_{k}=\\lambda_{k} \\alpha_{i k}</li> </ul> </li> <li>sum of factor loading for y_{k} over x: \\sum_{i=1}^{m} \\sigma_{i i} \\rho^{2}\\left(y_{k}, x_{i}\\right)=\\lambda_{k} \u7b2c k \u4e2a\u4e3b\u6210\u5206 y_k \u4e0e m \u4e2a\u53d8\u91cf\u7684\u56e0\u5b50\u8d1f\u8377\u91cf<ul> <li>\\sum_{i=1}^{m} \\sigma_{i i} \\rho^{2}\\left(y_{k}, x_{i}\\right)=\\sum_{i=1}^{m} \\lambda_{k} \\alpha_{i j}^{2}=\\lambda_{k} \\alpha_{k}^{\\top} \\alpha_{k}=\\lambda_{k}</li> <li>\u4e5f\u5373, \u4ee5 x \u7684\u5404\u4e2a\u5206\u91cf\u7684\u65b9\u5dee\u4f5c\u4e3a\u7cfb\u6570, \u53ef\u4ee5\u5f97\u5230\u7b2c k \u4e2a PC \u7684\u65b9\u5dee\u548c\u56e0\u5b50\u8d1f\u8377\u91cf\u7684\u5173\u7cfb</li> </ul> </li> <li>sum of factor loading for x_{i} over y: \\sum_{k=1}^{m} \\rho^{2}\\left(y_{k}, x_{i}\\right)=1<ul> <li>m \u4e2a\u4e3b\u6210\u5206\u4e0e\u7b2c i \u4e2a\u53d8\u91cf x_i \u7684\u56e0\u5b50\u8d1f\u8377\u91cf, \u4e5f\u5373\u6240\u6709\u7684\u4e3b\u6210\u5206\u53ef\u4ee5\u89e3\u91ca x_i \u7684\u5168\u90e8\u65b9\u5dee</li> </ul> </li> </ul> </li> <li>\u5982\u4f55\u9009\u62e9 PC \u6570\u91cf:<ul> <li>\u7d2f\u8ba1\u65b9\u5dee\u8d21\u732e\u7387 y_{1}, y_{2}, \\ldots, y_{k}: \\frac{\\sum_{i=1}^{k} \\lambda_{i}}{\\sum_{i=1}^{m} \\lambda_{i}}, \u8fbe\u5230 70%\uff5e 80%\u4ee5\u4e0a\u5373\u53ef.</li> <li>\u5173\u6ce8 x \u7684\u67d0\u4e00\u4e2a\u5206\u91cf: contribution to x_{i}: \\nu_{i}=\\rho^{2}\\left(x_{i},\\left(y_{1}, \\ldots, y_{k}\\right)\\right)=\\sum_{j=1}^{k} \\frac{\\lambda_{j} \\alpha_{i j}^{2}}{\\sigma_{i i}} (\u6ce8\u610f\u5230\u5168\u91cf)</li> </ul> </li> <li>\u6ce8\u610f, \u5728\u8fdb\u884c PCA \u524d\u8981\u5148\u8fdb\u884c\u5f52\u4e00\u5316. \u6b64\u65f6: 1. \u89c4\u8303\u5316\u968f\u673a\u53d8\u91cf\u7684\u534f\u65b9\u5dee\u77e9\u9635\u5c31\u662f\u76f8\u5173\u77e9\u9635 R; 2. \\sigma_{ii}=1</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#_4","title":"\u5206\u7c7b\u7684\u7ebf\u6027\u65b9\u6cd5","text":"<ul> <li>\u4f8b\u5b50: \u76f4\u63a5\u7528 LS \u6765\u89e3\u51b3 Linear Regression of an Indicator Matrix \u95ee\u9898\u5b58\u5728\u95ee\u9898</li> </ul>"},{"location":"stat/ASL-mindmap/#linear-discriminant-analysis-lda","title":"Linear Discriminant Analysis (LDA)","text":"<ul> <li>\u4e00\u4e2a\u66f4\u4e3a\u4e00\u822c\u7684\u8bbe\u5b9a: \u6709 k \u4e2a\u7c7b\u7b26\u5408\u9ad8\u65af\u5206\u5e03 f_{k}(x)=\\frac{1}{(2 \\pi)^{p / 2} \\sqrt{\\left|\\Sigma_{k}\\right|}} \\exp \\left\\{\\frac{1}{2}\\left(x-\\mu_{k}\\right)^{\\top} \\Sigma_{k}^{-1}\\left(x-\\mu_{k}\\right)\\right\\}</li> <li>LDA \u7684\u5047\u5b9a: \u6240\u6709\u7c7b\u7684\u65b9\u5dee\u76f8\u540c, \u5373 \\Sigma_{k}=\\Sigma \\text { for all } k</li> </ul>"},{"location":"stat/ASL-mindmap/#basis-expansions-and-regularization","title":"Basis Expansions and Regularization","text":""},{"location":"stat/ASL-mindmap/#piecewise-polynomials-and-splines","title":"Piecewise Polynomials and Splines","text":"<ul> <li>\u9996\u5148\u5b9a\u4e49 \u5206\u6bb5\u591a\u9879\u5f0f (piecewise polynomial), \u5373\u5212\u5206\u6210\u4e0d\u540c\u7684\u533a\u95f4, \u533a\u95f4\u5185\u7684\u591a\u9879\u5f0f</li> <li>Piecewise Cubic Polynomial<ul> <li>Cubic spline \u4e09\u6b21\u6837\u6761: piecewise cubic polynomial with continuous first and second derivatives at the knots.\u8fd9\u91cc\u662f\u4e09\u6b21\u6837\u6761\u7684\u5b9a\u4e49, \u6ce8\u610f\u5230\u8fd9\u91cc\u662f\u8981\u6c42\u4e86\u5230\u4e8c\u9636\u5fae\u5206\u7684\u8fde\u7eed\u6027; \u800c\u4e0b\u9762\u7684\u7ed9\u51fa\u4e86\u4e00\u7ec4\u57fa\u51fd\u6570, \u8fd9\u91cc\u662f\u9700\u8981\u8bc1\u660e\u7684.<ul> <li>h_{1}(X)=1, h_{2}(X)=X, h_{3}(X)=X^{2}, h_{4}(X)=X^{3}, h_{5}(X)=\\left(X-\\xi_{1}\\right)_{+}^{3}, h_{6}(X)=\\left(X-\\xi_{2}\\right)_{+}^{3}</li> <li>\u6ce8\u610f: 1. \u8fd9\u91cc\u7684\u516d\u4e2a\u51fd\u6570\u662f\u7ebf\u6027\u65e0\u5173\u7684; 2. \u6ee1\u8db3\u4e09\u6b21\u6837\u6761\u7684\u7ea6\u675f, \u5373 knot \u5904 0-2 \u9636\u5fae\u5206\u8fde\u7eed.</li> </ul> </li> <li>\u8ba1\u7b97\u53c2\u6570\u6570\u91cf: \u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d, \u5206\u522b\u5728\u4e09\u4e2a\u533a\u95f4\u5185\u62df\u5408\u4e09\u6b21\u591a\u9879\u5f0f, \u4e24\u4e2a\u8282\u70b9\u5904\u5404\u6709\u4e24\u4e2a\u7ea6\u675f\u6761\u4ef6, \u56e0\u6b64\u53c2\u6570\u91cf\u4e3a 3 \\times 4-2 \\times 3=6</li> <li>\u53e6\u5916\u53ef\u77e5, \u5982\u679c\u518d\u52a0\u4e09\u9636\u5fae\u5206\u8fde\u7eed, \u6b64\u65f6\u7684\u81ea\u7531\u5ea6\u53d8\u4e3a 4, \u548c\u5168\u5c40\u7684\u4e09\u6b21\u51fd\u6570\u4e00\u6837, \u4e5f\u5373\u300cEnforcing one more order of continuity would lead to a global cubic polynomial.\u300d</li> </ul> </li> <li>Order-M Spline M \u9636\u6837\u6761<ul> <li>\u6ce8\u610f, \u4e09\u6b21\u6837\u6761\u7684 M = 4 (\u7b97\u4e0a\u4e86\u5e38\u6570\u9879)</li> <li>\u56e0\u6b64, \u5206\u6bb5\u5e38\u6570\u3001\u5206\u6bb5\u7ebf\u6027\u3001\u5149\u6ed1\u4e09\u6b21\u6837\u6761 M \u5206\u522b\u4e3a 1,2,4</li> <li>\u7ed9\u51fa\u66f4\u4e3a\u5e7f\u6cdb\u7684 Truncated power \u622a\u65ad\u5e42 basis<ul> <li>h_{j}(X)=X^{j-1}, j=1, \\ldots, M</li> <li>h_{M+l}=\\left(X-\\xi_{l}\\right)_{+}^{M-1}, l=1, \\ldots, K</li> </ul> </li> <li>\u6ce8\u610f\u5230 order \u4e3a M \uff0c\u542b\u6709 K \u4e2a\u7ed3\u70b9\u7684\u6837\u6761\u5176\u81ea\u7531\u5ea6\u4e3a M(K+1)-(M-1) K=K+M</li> </ul> </li> <li>Natural Cubic Splines<ul> <li>\u589e\u52a0\u4e86\u7ea6\u675f: \u8981\u6c42\u5728\u8fb9\u754c\u4e4b\u5916\u7684\u51fd\u6570\u8981\u662f\u7ebf\u6027\u7684, \u56e0\u6b64\u51cf\u5c11\u4e86 2*2 \u4e2a\u53c2\u6570</li> </ul> </li> <li>Smoothing Splines<ul> <li>\u5b9a\u4e49\u95ee\u9898: \u5728\u4e8c\u9636\u8fde\u7eed\u7684\u51fd\u6570\u4e2d, \u5b9a\u4e49\u635f\u5931\u51fd\u6570 \\operatorname{RSS}(f, \\lambda)=\\sum_{i=1}^{N}\\left(y_{i}-f\\left(x_{i}\\right)\\right)^{2}+\\lambda \\int f^{\\prime \\prime}(t)^{2} d(t)</li> <li>\u5b9a\u7406: \u7ecf\u8fc7\u4e00\u7ec4\u70b9\u7684\u5149\u6ed1\u6837\u6761, \u5219\u81ea\u7136\u4e09\u6b21\u6837\u6761\u662f\u89e3.<ul> <li>Let g be any differentiable function on [a, b] for which g\\left(x_{i}\\right)=z_{i} for i=1, \\ldots, n. Suppose n \\geqslant 2, and that \\tilde{g} is the natural cubic spline interpolant to the values z_{1}, \\ldots, z_{n} at points x_{1}, \\ldots, x_{n} with a&lt;x_{1}&lt;&lt;x_{n}&lt;b.</li> <li>Then \\int\\left(g^{\\prime \\prime}\\right)^{2} \\geqslant \\int\\left(\\tilde{g}^{\\prime \\prime}\\right)^{2} with equality only if \\tilde{g}=g</li> </ul> </li> <li>\u7531\u4e8e\u662f\u81ea\u7136\u4e09\u6b21\u6837\u6761, \u5176\u81ea\u7531\u5ea6\u5c31\u662f\u8282\u70b9 (\u6837\u672c) \u6570\u91cf, \u56e0\u6b64\u6709 f(x)=\\sum_{j=1}^{N} N_{j}(x) \\theta_{j}<ul> <li>\u5e26\u60e9\u7f5a\u7684 RSS \u53d8\u4e3a R S S(\\theta, \\lambda)=(y-N \\theta)^{\\top}(y-N \\theta)+\\lambda \\theta^{\\top} \\Omega_{N} \\theta,</li> <li>\u5176\u4e2d N_{i j}=N_{j}\\left(X_{i}\\right), \\Omega_{N_{i j}}=\\int N_{i}^{\\prime \\prime}(t) N_{j}^{\\prime \\prime}(t) d t</li> </ul> </li> <li>\u7c7b\u4f3c\u5cad\u56de\u5f52, \\hat{f}=N\\left(N^{\\top} N+\\lambda \\Omega_{N}\\right)^{-1} N^{\\top} y=S_{\\lambda} y, \u8fd9\u91cc\u7684\u62df\u5408\u53c2\u6570\u53d6\u51b3\u4e8e X and \\lambda</li> <li>\u5149\u6ed1\u77e9\u9635: \u53ef\u4ee5\u5c06 S_\\lambda \u8f6c\u5316\u4e3a Reinsch \u5f62\u5f0f S_{\\lambda}=(I+\\lambda K)^{-1}<ul> <li>\u8fd9\u91cc K=N^{-\\top} \\Omega_{N} N^{-1}, \u548c \\lambda \u65e0\u5173</li> <li>\u56e0\u6b64 S_{\\lambda}=\\sum_{k=1}^{N} \\rho_{k}(\\lambda) \\mu_{k} \\mu_{k}^{\\top}, \u8fd9\u91cc \\rho_{k}(\\lambda)=\\frac{1}{1+\\lambda d_{k}}. \u89c2\u5bdf\u8fd9\u91cc\u7684\u7279\u5f81\u5206\u89e3\u5f62\u5f0f:<ul> <li>\u5947\u5f02\u5411\u91cf\u4e0e\u8d85\u53c2 \\lambda \u65e0\u5173</li> <li>S_{\\lambda} y=\\sum_{k=1}^{N} \\mu_{k} \\rho_{k}(\\lambda)\\left\\langle\\mu_{k}^{\\top} y\\right\\rangle, compare to regression spline with M basis? \u53ef\u4ee5\u770b\u5230, \u8fd9\u91cc\u662f\u901a\u5bf9 y \u5173\u4e8e\u57fa \\mu_k \u8fdb\u884c\u4e86\u5206\u89e3, \u901a\u8fc7 \\rho_{k}(\\lambda) \u63a7\u5236\u4e86\u6536\u7f29\u7684\u5927\u5c0f; \u8fd9\u5c31\u548c\u4e0a\u4e00\u8282\u4e2d\u7684\u300c\u56de\u5f52\u6837\u6761\u300d\u4e0d\u4e00\u6837, \u5728\u56de\u5f52\u6837\u6761\u4e2d, \u7ec4\u5206\u8981\u4e48\u4e0d\u53d8\u8981\u4e48\u6536\u7f29\u4e3a 0. \u2014\u2014 \uff0e\u57fa\u4e8e\u8fd9\u4e2a\u539f\u56e0\u5149\u6ed1\u6837\u6761 \u88ab\u79f0\u4f5c\u6536\u7f29 (shrinking)\u5149\u6ed1\u5668\uff0c\u800c\u56de\u5f52\u6837\u6761\u88ab\u79f0\u4f5c\u6295\u5f71 (projection) \u5149\u6ed1\u5668.</li> <li>d f_{\\lambda}=\\operatorname{tr}\\left(S_{\\lambda}\\right)=\\sum_{k=1}^{N} \\rho_{k}(\\lambda), compare to regression splines? \u5728\u6295\u5f71\u5149\u6ed1\u5668\u4e2d, \u6240\u6709\u7684\u7279\u5f81\u503c\u4e3a 1.</li> </ul> </li> </ul> </li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#nonparametric-logistic-regression","title":"Nonparametric Logistic Regression","text":"<ul> <li>\u5bf9\u4e8e (\u4e00\u7ef4) \u903b\u8f91\u56de\u5f52 l=\\sum_{i=1}^{N}\\left\\{y_{i} \\log p\\left(x_{i}\\right)+\\left(1-y_{i}\\right) \\log \\left(1-p\\left(x_{i}\\right)\\right)\\right\\} = \\sum_{i=1}^{N}\\left\\{y_{i} f\\left(x_{i}\\right)-\\log \\left(1+e^{f\\left(x_{i}\\right)}\\right)\\right\\}, \u5229\u7528\u5149\u6ed1\u7684\u601d\u60f3, \u52a0\u4e0a\u60e9\u7f5a\u9879</li> <li>l=\\sum_{i=1}^{N}\\left\\{y_{i} f\\left(x_{i}\\right)-\\log \\left(1+e^{f\\left(x_{i}\\right)}\\right)-\\frac{1}{2} \\int\\left\\{f^{\\prime \\prime}(t)\\right\\}^{2} d t\\right\\}</li> <li>\u7136\u540e\u5c06\u539f\u672c\u7684\u7ebf\u6027\u51fd\u6570\u66ff\u6362\u4e3a\u6837\u6761: f(x)=\\sum_{j=1}^{N} N_{j}(x) \\theta_{j}, \u5219\u5f97\u5230\u4e86\u975e\u53c2\u5f62\u5f0f\u7684\u903b\u8f91\u56de\u5f52.<ul> <li>\\frac{\\partial l(\\theta)}{\\partial \\theta}=N^{\\top}(y-p)-\\lambda \\Omega \\theta</li> <li>\\frac{\\partial^{2} /(\\theta)}{\\partial \\theta \\partial \\theta^{\\top}}=-N^{\\top} W N-\\lambda \\Omega</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#multidimensional-splines","title":"Multidimensional Splines","text":""},{"location":"stat/ASL-mindmap/#kernel-smoothing-methods","title":"Kernel Smoothing Methods","text":""},{"location":"stat/ASL-mindmap/#1-dim-kernel-smoother","title":"1-Dim Kernel Smoother","text":"<ul> <li>\u4e0d\u540c\u7684 Kernel<ul> <li>Epanechnikov - Compact, non-differentiable at the boundary</li> <li>Tri-cube kernel - Compact, differentiable at the boudary<ul> <li>\u4ec5\u5728 [-1,1] \u4e0a\u5b9a\u4e49\u4e3a \\left(1-|t|^{3}\\right)^{3}</li> </ul> </li> <li>Gaussian kernel - non-compact, continuously differentiable</li> </ul> </li> <li>Local Linear Regression \u5c40\u90e8\u7ebf\u6027\u56de\u5f52<ul> <li>Boundary Problem: \u4e0a\u9762\u63d0\u5230\u7684 locally weighted average \u5c40\u90e8\u52a0\u6743\u5e73\u5747\u7684\u65b9\u6cd5, \u5728\u8fb9\u754c\u4e0a\u4f1a\u6709\u95ee\u9898</li> <li>\u89e3\u51b3\u65b9\u6cd5: \u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52 \u2014\u2014 \u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u4f1a\u7ea0\u6b63\u4e3a\u4e00\u9636\u8bef\u5dee.<ul> <li>\u5b9a\u4e49\u635f\u5931\u51fd\u6570\u4e3a \\min_{\\alpha\\left(x_{0}\\right), \\beta\\left(x_{0}\\right)} \\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)\\left[y_{i}-\\alpha\\left(x_{0}\\right)-\\beta\\left(x_{0}\\right) x_{i}\\right]^{2},</li> <li>\u8bb0 Design matrix B_{N \\times 2}, with i_{t h} row b(x)^{\\top}=\\left(1, x_{i}\\right); Weight matrix W_{N \\times N}\\left(x_{0}\\right), with i_{t h} diagonal element K_{\\lambda}\\left(x_{0}, x_{i}\\right)</li> <li>\u53ef\u5f97 \\hat{f}\\left(x_{0}\\right)=b\\left(x_{0}\\right)^{\\top}\\left(B^{\\top} W\\left(x_{0}\\right) B\\right)^{-1} B^{\\top} W\\left(x_{0}\\right) y=\\sum_{i=1}^{N} l_{i}\\left(x_{0}\\right) y_{i}</li> </ul> </li> <li>\u6027\u8d28:<ul> <li>\u8fd9\u91cc\u5f97\u5230\u7684\u4f30\u8ba1\u4ecd\u7136\u5173\u4e8e Y \u662f\u7ebf\u6027\u7684</li> <li>l_{i}\\left(x_{0}\\right) \u7ec4\u5408\u4e86\u6838\u7684\u6743\u91cd\u548c\u6700\u5c0f\u4e8c\u4e58, \u4e5f\u53eb\u505a\u7b49\u4ef7\u6838</li> </ul> </li> <li>\u4e00\u70b9\u91cd\u8981\u7684\u6027\u8d28\u662f automatic kernel carpentry: \u5bf9\u4e8e\u5c40\u90e8\u5148\u884c\u56de\u5f52\u8fdb\u884c Taylor \u5c55\u5f00, \u53ef\u4ee5\u53d1\u73b0 Local linear regression automatically modifies the kernel to correct bias exactly to first order<ul> <li>\u4e5f\u5373 E \\hat{f}\\left(x_{0}\\right)-f\\left(x_{0}\\right)=\\frac{f^{\\prime \\prime}(x)}{2} \\sum_{i=1}^{N}\\left(x_{i}-x_{0}\\right)^{2} l_{i}\\left(x_{0}\\right)+R</li> <li>\u5176\u4e2d\u7528\u5230\u4e86 \\sum_{i=1}^{N} l_{i}\\left(x_{0}\\right)=1 \u548c \\sum_{i=1}^{N}\\left(x_{i}-x_{0}\\right) l_{i}\\left(x_{0}\\right)=0</li> </ul> </li> </ul> </li> <li>Local Polynomial Regression \u5c40\u90e8\u591a\u9879\u5f0f\u56de\u5f52<ul> <li>\u80fd\u591f correct the bias in the regions of curvature; \u4f34\u968f\u7684\u95ee\u9898\u65b9\u5dee\u63d0\u5347</li> <li></li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#local-regression-in-rprp","title":"Local Regression in R^p","text":"<ul> <li>\u6838\u5149\u6ed1\u548c\u5c40\u90e8\u56de\u5f52\u53ef\u4ee5\u975e\u5e38\u81ea\u7136\u5730\u63a8\u5e7f\u5230\u4e8c\u7ef4\u6216\u66f4\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\uff0e</li> <li>\u95ee\u9898<ul> <li>Boundary problem: \u66f4\u591a\u7684\u70b9\u843d\u5728\u8fb9\u754c\u9644\u8fd1</li> <li>Curse of Dimensionality: \u7ef4\u5ea6\u7684\u589e\u52a0\u9020\u6210\u7a00\u758f\u6027</li> <li>Non-visualizable: \u4e0d\u591f\u76f4\u89c2</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#structured-local-regression-models-in-rprp","title":"Structured Local Regression Models in R^p","text":"<ul> <li>\u5f53\u7ef4\u5ea6\u4e0e\u6837\u672c\u5927\u5c0f\u7684\u6bd4\u7387\u4e0d\u662f\u5f88\u597d\uff0c\u5219\u5c40\u90e8\u56de\u5f52\u5bf9\u6211\u4eec\u6ca1\u6709\u592a\u5927\u5e2e\u52a9\uff0c\u9664\u975e\u6211\u4eec\u60f3\u8981\u5bf9\u6a21\u578b\u505a\u51fa\u4e00\u4e9b\u7ed3\u6784\u5316\u7684\u5047\u8bbe\uff0e\u8fd9\u672c\u4e66\u7684\u5f88\u591a\u90e8\u5206\u662f\u5173\u4e8e\u7ed3\u6784\u5316\u56de\u5f52\u548c\u5206\u7c7b\u6a21\u578b\u7684\uff0e\u8fd9\u91cc\u6211\u4eec\u5173\u6ce8\u4e00\u4e9b\u4e0e\u6838\u65b9\u6cd5\u76f4\u63a5\u76f8\u5173\u7684\u65b9\u6cd5\uff0e</li> <li>\u7ed3\u6784\u6838: K_{\\lambda, A}\\left(x_{0}, x\\right)=D\\left(\\frac{\\left(x-x_{0}\\right)^{\\top} A\\left(x-x_{0}\\right)}{\\lambda}\\right) (\u82e5 A \u4e3a\u5355\u4f4d\u9635\u65f6\u5c31\u662f\u4e4b\u524d\u7684 Sperical kernel)</li> <li>Structured Regression Functions \u7ed3\u6784\u56de\u5f52\u51fd\u6570</li> <li>Varying Coefficient Models \u53ef\u53d8\u53c2\u6570\u6a21\u578b</li> </ul>"},{"location":"stat/ASL-mindmap/#local-likelihood-other-models","title":"Local likelihood &amp; Other Models","text":"<ul> <li>\u4e00\u822c\u7684\u4f3c\u7136\u51fd\u6570 l(\\beta)=\\sum_{i=1}^{N} l \\left(y_{i}, x_{i}^{\\top} \\beta\\right) \u662f\u4e00\u4e2a\u5e7f\u4e49\u7ebf\u6027\u6a21\u578b, \u5c40\u90e8\u4f3c\u7136\u5c06\u5176\u62d3\u5c55\u4e3a\u5c40\u90e8\u7ebf\u6027\u51fd\u6570<ul> <li>l\\left(\\beta\\left(x_{0}\\right)\\right)=\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right) l \\left(y_{i}, x_{i}^{\\top} \\beta\\left(x_{0}\\right)\\right)</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#kernel-density-estimation-classification","title":"Kernel Density Estimation &amp; Classi\ufb01cation","text":"<ul> <li>\u76f8\u8f83\u4e8e\u4e00\u822c\u7684\u5bc6\u5ea6\u4f30\u8ba1 \\hat{f}_{X}\\left(x_{0}\\right)=\\frac{\\# x_{i} \\in \\mathcal{N}\\left(x_{0}\\right)}{N{\\lambda}} (\u5176\u4e2d \\lambda \u4e3a\u5bbd\u5ea6), \u6838\u6280\u5de7\u5f15\u5f62\u5f0f\u4e3a<ul> <li>\\hat{f}_{X}\\left(x_{0}\\right)=\\frac{1}{N{\\lambda}} \\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)</li> </ul> </li> <li>Kernel Density Classification \u6838\u5bc6\u5ea6\u5206\u7c7b<ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u5206\u7c7b\u95ee\u9898, \u6211\u4eec\u53ef\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7c7b\u522b\u7684\u5206\u5e03\u8fdb\u884c\u4f30\u8ba1 \\hat{\\operatorname{Pr}}\\left(G=j \\mid X=x_{0}\\right)=\\frac{\\hat{\\pi}_{j} \\hat{f}_{j}\\left(x_{0}\\right)}{\\sum_{k=1}^{j} \\hat{n}_{k} \\hat{t}_{k}\\left(x_{0}\\right)}</li> <li>\u7136\u540e\u53ef\u4ee5\u6839\u636e\u5148\u9a8c\u5206\u5e03\u548c\u6761\u4ef6\u6982\u7387\u8fdb\u884c\u51b3\u7b56</li> </ul> </li> <li>\u6734\u7d20\u8d1d\u53f6\u65af Naive Bayes Classifier<ul> <li>\u5047\u8bbe\u5728\u7ed9\u5b9a\u7c7b\u522b\u65f6\u5404\u4e2a\u7279\u5f81\u72ec\u7acb f_{j}(X)=\\prod_{k=1}^{p} f_{j k}\\left(X_{k}\\right)</li> <li>\u7528\u4e00\u7ef4\u6838\u5bc6\u5ea6\u4f30\u8ba1\u5355\u72ec\u7684\u7c7b\u522b\u6761\u4ef6\u7684\u8fb9\u7f18\u5bc6\u5ea6</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#radial-basis-function-kernels","title":"Radial Basis Function &amp; Kernels \u5f84\u5411\u57fa\u51fd\u6570","text":"<ul> <li>\u7528\u6838\u51fd\u6570\u4f5c\u4e3a\u57fa</li> </ul>"},{"location":"stat/ASL-mindmap/#mixture-models-for-density-estimation-classification","title":"Mixture Models for Density Estimation &amp; Classi\ufb01cation","text":""},{"location":"stat/ASL-mindmap/#model-assessment-selection","title":"Model Assessment &amp; Selection","text":""},{"location":"stat/ASL-mindmap/#estimates-of-err_inerr_in","title":"Estimates of Err_{in}","text":"<ul> <li>Err_{in} Estimate: C_{p} Statistic</li> <li>AIC: A I C=-\\frac{2}{n} \\log l i k+2 \\frac{d}{n}<ul> <li>\u5728 \u968f\u673a\u9879\u6b63\u6001\u6027\u5047\u8bbe\u4e0b, \u53ef\u77e5\u57fa\u4e8e RSS \u7684\u4f30\u8ba1\u548c AIC \u7b49\u4ef7, \u53c2\u89c1 wiki. \u5373\u6709\u5f62\u5f0f AIC = 2k + n \\log(RSS)</li> </ul> </li> <li>BIC: B I C=-2 \\log l i k+(\\log N) \\cdot d<ul> <li>\u76f8\u8f83\u4e8e AIC, \u5bf9\u4e8e\u6a21\u578b\u590d\u6742\u5ea6\u7684\u60e9\u7f5a\u66f4\u5927\u4e86</li> </ul> </li> </ul>"},{"location":"stat/ASL-mindmap/#model-inference-averaging","title":"Model Inference &amp; Averaging","text":""},{"location":"stat/ASL-note1/","title":"ASL note","text":"<p>\u53c2\u89c1</p> <ul> <li>ESL, \u4e2d\u6587\u7248 \u2b50\ufe0f</li> <li>Jozee\u2019s\u6280\u672f\u535a\u5ba2|\u673a\u5668\u5b66\u4e60 \u2b50\ufe0f</li> </ul> <p>\u5176\u4ed6</p> <ul> <li>\u673a\u5668\u5b66\u4e60\uff08\u516d\uff09\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\uff1bBlog https://baidinghub.github.io/ \u5f88\u8d5e</li> <li>\u53f6\u65af\u7ebf\u6027\u56de\u5f52\u4e0e\u8d1d\u53f6\u65af\u903b\u8f91\u56de\u5f52</li> <li>PRML \u7b14\u8bb0 http://www.datakit.cn/category/#PRML</li> <li>\u8d1d\u53f6\u65af\u6a21\u578b\u6bd4\u8f83(Bayesian Model Comparison)</li> </ul>"},{"location":"stat/ASL-note1/#introduction","title":"Introduction","text":"<p>Outline</p> <ul> <li>Variable Types and Terminology</li> <li>Two Simple Approaches to Prediction<ul> <li>Least Squares</li> <li>Nearest-Neighbour Methods</li> <li>Comparison</li> </ul> </li> <li>Statistical Decision Theory</li> <li>Curse of Dimensionality</li> <li>Statistical Models, Supervised Learning \\&amp; Function Approximation</li> <li>Class of Restricted Estimators</li> <li>Bias Variance Tradeoff</li> </ul>"},{"location":"stat/ASL-note1/#_1","title":"\u5f15\u5165","text":"<p>Cases:</p> <ul> <li>Email spam</li> <li>Prostate Cancer (continuous)</li> <li>Handwritten Digit Recognition</li> <li>DNA Expression Microarrays (cluster)</li> </ul>"},{"location":"stat/ASL-note1/#regression-classification","title":"Regression \\&amp; Classification","text":"<p>Inputs - predictors, independent variables, features\u2026 Outputs - outcome, response, dependent variable, label\u2026</p> <ul> <li>Regression problems - outputs being quantitative measurement<ul> <li>Measurements close in value are also close in nature</li> <li>Prostate cancer example</li> </ul> </li> <li>Classification problems - outputs being qualitative<ul> <li>No explicit ordering in the outputs</li> <li>Email spam, Handwritten digits recognition</li> </ul> </li> <li>Special case - ordered categorical outputs<ul> <li>e.g., {small, medium, large}</li> <li>difference between medium and small need not be the same as that between large and medium</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#_2","title":"\u4e24\u79cd\u7b80\u5355\u7684\u9884\u6d4b\u65b9\u6cd5","text":""},{"location":"stat/ASL-note1/#least-squares","title":"Least Squares","text":"<p>Given a vector of inputs X^{\\top}=\\left(X_{1}, X_{2}, \\ldots, X_{P}\\right), predict the output Y (scalar) by</p>  \\hat{Y}=X^{\\top} \\hat{\\beta}  <p>Note: in this course, we will always assume X includes a constant variable 1, \\beta include the intercept \\beta_{0}</p> <p>Question: How do we fit the linear model to a set of training data \\left\\{\\left(X_{1}, y_{1}\\right),\\left(X_{2}, y_{2}\\right), \\ldots,\\left(X_{N}, y_{N}\\right)\\right\\} ?</p> <p>Answer: Many different methods, most popular - least squares</p> <ul> <li>Pick \\beta that minimize the residual sum of squares (RSS)</li> <li>R S S(\\beta)=\\sum_{i=1}^{N}\\left(y_{i}-x_{i}^{\\top} \\beta\\right)^{2}</li> <li>In matrix notation R S S(\\beta)=(y-X \\beta)^{\\top}(y-X \\beta)</li> <li>Quandratic function of \\beta, so its minimum always exists (but may not be unique!)</li> <li>Differentiating w.r.t. \\beta \\rightarrow X^{\\top}(y-X \\beta)=0</li> <li>If X^{\\top} X is nonsingular, the unique solution \\hat{\\beta}=\\left(X^{\\top} X\\right)^{-1} X^{\\top} y</li> </ul> <p>Fitted value at x_{i}: \\hat{y}_{i}=x_{i}^{\\top} \\hat{\\beta}</p> <p>Predicted value at an arbituary input x_{0}: \\hat{y}_{0}=x_{0}^{\\top} \\hat{\\beta}</p>"},{"location":"stat/ASL-note1/#nearest-neighbour-methods","title":"Nearest-Neighbour Methods","text":"<p>Given a vector of inputs X^{\\top}=\\left(X_{1}, X_{2}, \\ldots, X_{p}\\right), predict the output Y (scalar) by</p>  \\hat{Y}(x)=\\frac{1}{k} \\sum_{x_{i} \\in N_{k}(x)} y_{i}  <p>where N_{k}(x) is the neighborhood of x defined by the k closest points x_{i} in the training sample</p> <p>Question: How to define \u201cclosest\u201d?</p> <ul> <li>Can be defined on different metrics.</li> <li>For the moment, assume Euclidean distance</li> </ul>"},{"location":"stat/ASL-note1/#least-square-vs-knn","title":"Least Square vs KNN (\u90fd\u53ef\u4ee5\u5b8c\u6210\u5206\u7c7b\u548c\u56de\u5f52\u4efb\u52a1)","text":"<p>\u6bd4\u8f83\u7ebf\u6027\u6a21\u578b\u548ckNN</p> <ul> <li>Linear<ul> <li>Smooth and stable decision boundry</li> <li>Linear assumption</li> <li>High bias and low variance</li> </ul> </li> <li>kNN<ul> <li>Wiggly and unstable decision boundry</li> <li>Assumption free</li> <li>Low bias and high variance (kNN \u7684\u6709\u6548\u53c2\u6570\u6570\u91cf\u4e3a N/k, \u4e00\u822c\u5927\u4e8e\u7ebf\u6027\u6a21\u578b\u7684\u53c2\u6570\u91cf)</li> </ul> </li> </ul> <p></p> <p>\u8fd9\u91cc\u5c55\u793a\u4e86\u5728\u4e00\u4e2a\u6570\u636e\u96c6\u4e0a(\u66f4\u9002\u5408 kNN)\u7684\u8868\u73b0, \u7d2b\u8272\u4e3a Bayes \u9519\u8bef\u7387, \u4e24\u4e2a\u65b9\u5757\u662f\u7ebf\u6027\u6a21\u578b\u7684\u8868\u73b0, \u800c\u4e24\u6761\u6298\u7ebf\u5219\u662f kNN \u5728\u9009\u62e9\u4e0d\u540c\u53c2\u6570\u65f6\u7684\u8868\u73b0.</p>"},{"location":"stat/ASL-note1/#variants-of-l-sl-s-and-knn","title":"Variants of L S and KNN","text":"<ul> <li>Kernal methods<ul> <li>Weights decrease smoothly as distance further from the target point</li> <li>In high-dimensional space, distance kernels are modified to emphasize on some variables more than others</li> </ul> </li> <li>Local regression<ul> <li>Fit linear models by locally weighted least squares</li> </ul> </li> <li>Basis expansion<ul> <li>Allow more complex inputs</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#statistical-decision-theory","title":"Statistical Decision Theory","text":""},{"location":"stat/ASL-note1/#loss-function","title":"Loss Function","text":"<ul> <li>Squared loss<ul> <li>\\mathcal{L}(Y, f(x))=(Y-f(x))^{2}</li> <li>f(x)=\\operatorname{argmin}_{c}\\left(E_{Y \\mid X}(Y-c)^{2} \\mid X=x\\right)=E(Y \\mid X=x)</li> </ul> </li> <li>L1 loss<ul> <li>\\mathcal{L}(Y, f(x))=|Y-f(x)|</li> <li>\\rightarrow f(x)=\\operatorname{median}(Y \\mid X=x)</li> </ul> </li> <li>0-1 loss<ul> <li>\\rightarrow \\mathcal{L}(G, G(x))=\\sum_{k} \\mathcal{L}\\left(G_{k}-\\hat{G}(x)\\right) \\operatorname{Pr}\\left(G_{k} \\mid X\\right)</li> <li>\\hat{G}(x)=\\operatorname{argmax}_{G \\in \\mathcal{G}} \\operatorname{Pr}(G \\mid X=x)</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#squared-loss","title":"Squared Loss","text":"<ul> <li>Expected prediction error<ul> <li>E P E(f)=E(Y-f(x))^{2}=\\int(y-f(x))^{2} \\operatorname{Pr}(d x, d y)</li> <li>\u6ce8\u610f\u8fd9\u91cc\u662f\u5bf9\u4e8e X \u548c Y \u90fd\u53d6\u671f\u671b</li> </ul> </li> <li>By conditioning on X, we can write EPE as E P E(f)=E_{X} E_{Y \\mid X}\\left[(y-f(x))^{2} \\mid x\\right]</li> <li>It suffices to minimize E P E pointwise<ul> <li>f(x)=\\operatorname{argmin}_{c} E_{Y \\mid X}\\left[(Y-c)^{2} \\mid X=x\\right]</li> <li>\u6211\u4eec\u53ea\u9700\u8981\u9884\u6d4b\u51fd\u6570 \u9010\u70b9\u6700\u5c0f \u5373\u53ef</li> </ul> </li> <li>The solution is \u6761\u4ef6\u671f\u671b<ul> <li>f(x)=E(Y \\mid X=x)</li> <li>\u4e5f\u88ab\u79f0\u4f5c \u56de\u5f52 (regression) \u51fd\u6570</li> </ul> </li> </ul> <p>For least squares</p>  \\begin{aligned} f(x) &amp;=E(Y \\mid X=x)=X \\beta \\\\ f(x) &amp;=X \\hat{\\beta} \\end{aligned}  <p>For k-nearest-neighbour</p>  \\hat{f}(x)=\\operatorname{Ave}\\left(y_{i} \\mid x_{i} \\in N_{k}(x)\\right)  <ul> <li>Expectation is approximated by averaging over sample data</li> <li>Conditioning at a point is relaxed to conditioning on some region \u201cclose\u201d to the target point</li> <li>For large training set and large k, approximation works better (\u4f46\u6b63\u5982\u4e0b\u4e00\u8282\u6240\u8bf4, \u4f1a\u6709\u7ef4\u5ea6\u707e\u96be\u7684\u95ee\u9898)</li> </ul>"},{"location":"stat/ASL-note1/#0-1-loss","title":"0-1 LOSS","text":"<ul> <li>Expected prediction error for categorical output G</li> <li>E P E=E[L(G, \\hat{G}(x))], where L(k, l) denotes the price paid for classifying an observation belonging to k as l.</li> <li>By conditioning on X, we can write EPE as</li> </ul>  E P E=E_{x} \\sum_{k=1}^{k} L\\left[G_{k}, \\hat{G}(x)\\right] \\operatorname{Pr}\\left(G_{k} \\mid X=x\\right)  <ul> <li>\u540c\u6837\u4e5f\u662f\u9010\u70b9\u6700\u5c0f\u5316, So \\hat{G}(x)=\\operatorname{argmin}_{G \\in \\mathcal{G}} \\sum_{k=1}^{k} L\\left(G_{k}, g\\right) \\operatorname{Pr}\\left(G_{k} \\mid X=x\\right)</li> <li>For 0-1 loss, \\hat{G}(X)=G_{k} if \\operatorname{Pr}\\left(G_{k} \\mid X=x\\right)=\\max _{g} \\operatorname{Pr}(g \\mid X=x)</li> <li>In words, classify to the most probable class.</li> </ul> <p>\u5f53\u6761\u4ef6\u5206\u5e03\u5df2\u77e5\u7684\u60c5\u51b5\u4e0b, \u7406\u60f3\u60c5\u51b5\u5c31\u662f\u6309\u7167\u540e\u9a8c\u6982\u7387\u8fdb\u884c\u4f30\u8ba1, \u79f0\u4e3a \u8d1d\u53f6\u65af\u5206\u7c7b\u5668 (Bayes classifier); \u8d1d\u53f6\u65af\u5206\u7c7b\u7684\u8bef\u5dee\u7387\u88ab\u79f0\u4f5c \u8d1d\u53f6\u65af\u7387 (Bayes rate).</p> <p>For least squares (indicator variable regression)</p> <ul> <li>G(x) is approximated by X \\hat{\\beta}</li> <li>in practice problems can occur</li> </ul> <p>For k-nearest-neighbour</p> <ul> <li>\\hat{G}(x) - majority vote in a neighbourhood</li> <li>Conditional probability at a point is relaxed to conditional probability within a neighborhood of a point</li> <li>Probabilities are estimated by training-sample proportions.</li> </ul>"},{"location":"stat/ASL-note1/#curse-of-dimensionality","title":"Curse of Dimensionality","text":"<p>\u5bf9\u7ef4\u6570\u707e\u96be\u7684\u76f4\u89c2\u7406\u89e3</p> <ul> <li>\u6570\u636e\u5206\u5e03\u7a00\u758f: \u8003\u8651\u5728 p \u7ef4\u5bbd\u5ea6\u4e3a 1 \u7acb\u65b9\u4f53\u4e2d\u5747\u5300\u5206\u5e03\u7684\u60c5\u51b5, \u5982\u679c\u5728\u4e00\u4e2a\u5c0f\u7684\u7acb\u65b9\u4f53\u4e2d\u5305\u62ec 10% \u7684\u6570\u636e, \u5f53 p=10 \u65f6\u9700\u8981\u7684\u7acb\u65b9\u4f53\u5927\u5c0f\u4e3a 0.8 (\u5176\u5b9e\u5c31\u662f, \u8981\u8986\u76d6 p \u7ef4\u7684\u6570\u636e\u70b9\u8981\u5f88\u5927)</li> <li>\u6570\u636e\u5f88\u591a\u4f1a\u51fa\u73b0\u5728\u8fb9\u754c\u9644\u8fd1: \u4f8b\u5b50\u662f\u5728\u4e00\u4e2a p \u7ef4\u7403\u4f53\u4e2d, \u5404\u6570\u636e\u70b9\u8ddd\u79bb\u7403\u5fc3\u7684\u5e73\u5747\u8ddd\u79bb\u968f\u7740\u7ef4\u5ea6\u7684\u589e\u52a0\u800c\u589e\u52a0, \u4e5f\u5373\u591a\u8003\u8651\u8fb9\u754c; \u8fd9\u6837, \u5c31\u4e0d\u80fd\u91c7\u7528\u5185\u5dee\u800c\u9700\u8981\u5916\u63a8. (\u4e5f\u53ef\u7406\u89e3\u4e3a\u6570\u636e\u7a00\u758f?)</li> </ul>"},{"location":"stat/ASL-note1/#_3","title":"\u7edf\u8ba1\u6a21\u578b\uff0c\u76d1\u7763\u5b66\u4e60\u548c\u51fd\u6570\u903c\u8fd1","text":"<p>\u6211\u4eec\u7684\u76ee\u6807\u662f\u5bfb\u627e\u51fd\u6570 f(x) \u7684\u4e00\u4e2a\u6709\u7528\u7684\u8fd1\u4f3c \\hat{f}(x), \u51fd\u6570 f(x) \u8574\u542b\u7740\u8f93\u5165\u4e0e\u8f93\u51fa\u4e4b\u95f4\u7684\u9884\u6d4b\u5173\u7cfb. \u5728\u524d\u9762\u7edf\u8ba1\u5224\u522b\u7406\u8bba\u7684\u7ae0\u8282\u7684\u7406\u8bba\u51c6\u5907\u4e2d, \u5bf9\u4e8e\u5b9a\u91cf\u7684\u54cd\u5e94, \u6211\u4eec\u770b\u5230\u5e73\u65b9\u8bef\u5dee\u635f\u5931\u5f15\u5bfc\u6211\u4eec\u5f97\u5230\u4e86\u56de\u5f52\u51fd\u6570 f(X)=\\mathrm{E}(Y \\mid X=x). \u6700\u8fd1\u90bb\u65b9\u6cd5\u53ef\u4ee5\u770b\u6210\u662f\u5bf9\u6761\u4ef6\u671f\u671b\u7684\u76f4\u63a5\u4f30\u8ba1, \u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u81f3\u5c11\u5728\u4e24\u4e2a\u65b9\u9762\u5b83\u4eec\u4e0d\u8d77\u4f5c\u7528</p> <ul> <li>\u5982\u679c\u8f93\u5165\u7a7a\u95f4\u7684\u7ef4\u6570\u9ad8, \u5219\u6700\u8fd1\u90bb\u4e0d\u5fc5\u79bb\u76ee\u6807\u70b9\u8fd1, \u800c\u4e14\u53ef\u80fd\u5bfc\u81f4\u5927\u7684\u8bef\u5dee</li> <li>\u5982\u679c\u77e5\u9053\u5b58\u5728\u7279\u6b8a\u7684\u7ed3\u6784, \u53ef\u4ee5\u7528\u6765\u964d\u4f4e\u4f30\u8ba1\u7684\u504f\u5dee\u4e0e\u65b9\u5dee.</li> </ul> <p>\u6211\u4eec\u9884\u5148\u7528\u4e86\u5173\u4e8e f(X) \u7684\u5176\u5b83\u7c7b\u522b\u7684\u6a21\u578b, \u5728\u5f88\u591a\u60c5\u5f62\u4e0b\u662f\u4e3a\u4e86\u89e3\u51b3\u7ef4\u6570\u95ee\u9898\u800c\u7279\u522b\u8bbe\u8ba1\u7684, \u73b0\u5728\u6211\u4eec\u8ba8\u8bba\u628a\u5b83\u4eec\u5408\u5e76\u8fdb\u4e00\u4e2a\u9884\u6d4b\u95ee\u9898\u7684\u6846\u67b6.</p>"},{"location":"stat/ASL-note1/#statistical-models","title":"Statistical Models","text":"<ul> <li>Goal<ul> <li>Predict the relationship between inputs and outputs with f(x)</li> <li>Approximate f(x) using \\hat{f}(x)</li> </ul> </li> <li>Quantitative output<ul> <li>Squared error loss \\rightarrow f(x)=E(Y \\mid X=x)</li> <li>Choice for \\hat{f}(x) : additive error model, nearest neighbour, \u2026</li> </ul> </li> <li>Qualitative output<ul> <li>Additive error models typically not used (additive \u8bef\u5dee\u6a21\u578b: \u5728\u5b9e\u9645\u7684 f \u4e2d\u6709\u4e00\u4e2a\u8bef\u5dee\u9879) \u5728\u5206\u7c7b\u95ee\u9898\u4e2d\u4e00\u822c\u4e0d\u505a\u8fd9\u4e2a\u5047\u8bbe, \u56e0\u6b64\u76f4\u63a5\u5bf9\u4e8e\u6761\u4ef6\u6982\u7387\u5efa\u6a21</li> <li>Directly model \\operatorname{Pr}(G \\mid X) : logistic regression, probit regression, \\ldots</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#function-approximation","title":"Function Approximation","text":"<p>\u4e00\u4e9b\u57fa\u672c\u7684\u6a21\u578b</p> <p>Common approximations ( \\theta denotes parameters)</p> <ul> <li>Linear model f(x)=X^{\\top} \\beta</li> <li>Basis expansion f_{\\theta}(x)=\\sum_{k=1}^{K} h(x) \\theta_{k}<ul> <li>h(x) are transformations of x</li> <li>Polynomial and trigonometric expansions x_{1}^{2}, x_{1} x_{2}^{2}, \\cos \\left(x_{1}\\right)</li> <li>Sigmoid transformation \\frac{1}{1+\\exp \\left(-x^{\\top} \\beta_{k}\\right)}</li> </ul> </li> </ul> <p>Parameter estimate</p> <ul> <li>Least squares<ul> <li>Closed form for linear model</li> <li>May require iterative methods or numerical optimization</li> </ul> </li> <li>Maximum likelihood estimation - more general<ul> <li>\\mathcal{L}(\\theta)=\\sum_{i=1}^{N} \\log P r_{\\theta}\\left(y_{i}\\right) \\hat{\\theta}=\\operatorname{argmax}_{\\theta} \\mathcal{L}(\\theta)</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#mle-normal-distribution","title":"\u4f8b\u5b50: MLE - Normal Distribution","text":"<p>Normal distribution</p>  f\\left(x \\mid \\mu, \\sigma^{2}\\right)=\\frac{1}{\\sqrt{2 \\pi \\sigma^{2}}} e^{-\\frac{(x-\\mu)^{2}}{2 \\sigma^{2}}}  <p>Normal likelihood</p> <ul> <li>Assume \\operatorname{Pr}(Y \\mid X, \\beta)=\\mathcal{N}\\left(X \\beta, \\sigma^{2}\\right)</li> <li>I(\\beta)=-\\frac{N}{2} \\log (2 \\pi)-N \\log (\\sigma)-\\frac{1}{2 \\sigma^{2}} \\sum_{i=1}^{N}\\left(y_{i}-X_{i} \\beta\\right)^{2}</li> <li>Maximizing I(\\theta) only involves the last term -\\frac{1}{2 \\sigma^{2}} \\sum_{i=1}^{N}\\left(y_{i}-f_{\\theta}\\left(x_{i}\\right)\\right)^{2}, which is equivalent to minimizing RSS</li> </ul> <p>\u7ed3\u8bba: \u5728\u6b63\u6001\u5206\u5e03\u6761\u4ef6\u4e0b, MLE \u7b49\u4ef7\u4e8e \u6700\u5c0f\u5316RSS.</p>"},{"location":"stat/ASL-note1/#mle-multinomial-distribution","title":"\u4f8b\u5b50: MLE - Multinomial Distribution","text":"<p>Multinomial distribution</p>  P\\left(X_{1}=x_{1}, \\ldots, X_{m}=x_{m}\\right)=\\frac{n !}{\\prod_{i=1}^{m} x_{i} !} \\prod_{i=1}^{m} \\theta_{i}^{x_{i}}  <p>Multinomial likelihood</p> <ul> <li>Assume X_{1}, \\ldots, X_{m} are counts in cells up to m, each cell has a different probability \\theta_{1}, \\ldots, \\theta_{m}</li> <li>constraints: \\sum_{i=1}^{m} X_{i}=n, \\sum_{i=1}^{m} \\theta_{i}=1</li> <li>The joint probability of \\left(X_{1}, \\ldots, X_{m}\\right) is multinomial</li> <li>I\\left(\\theta_{1}, \\ldots, \\theta_{m}\\right)=\\log n !-\\sum_{i=1}^{m} \\log x_{i}+\\sum_{i=1}^{m} x_{i} \\log \\theta_{i}</li> <li>Introduce Lagrange multipliers, I\\left(\\theta_{1}, \\ldots, \\theta_{m}\\right)=\\log n !-\\sum_{i=1}^{m} \\log x_{i}+\\sum_{i=1}^{m} x_{i} \\log \\theta_{i}+\\lambda\\left(1-\\sum_{i=1}^{m} \\theta_{i}\\right)</li> <li>solution \\hat{\\theta}_{i}=\\frac{x_{i}}{n}, that is, the sample proportion</li> </ul>"},{"location":"stat/ASL-note1/#restricted-estimators","title":"\u9650\u5236\u6027\u4f30\u8ba1 Restricted Estimators","text":"<p>\u4ecb\u7ecd\u4e86\u4e09\u7c7b\u65b9\u6cd5</p>"},{"location":"stat/ASL-note1/#roughness-penalty-and-bayesian-methods","title":"Roughness Penalty and Bayesian Methods","text":"P R S S(f ; \\lambda)=R S S(f)+\\lambda J(f)  <ul> <li>\\mathrm{J}(\\mathrm{f}) will be large for functions \\mathrm{f} that vary too rapidly over small regions of input space.</li> <li>smoothing parameter \\lambda controls the amount of penalty</li> <li>e.g., P R S S(f ; \\lambda)=\\sum_{i=1}^{N}\\left(y_{i}-f\\left(x_{i}\\right)\\right)^{2}+\\lambda \\int\\left[f(x)^{\\prime \\prime}\\right]^{2}<ul> <li>Solution - cubic smoothing spline \u4e0a\u9762\u60e9\u7f5a\u9879\u7684\u89e3\u662f \u4e09\u6b21\u5149\u6ed1\u6837\u6761</li> <li>\\lambda=0 \u65f6, \u6ca1\u6709\u60e9\u7f5a, \u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u63d2\u503c\u51fd\u6570; \\lambda \u4e3a\u65e0\u7a77\u65f6, \u4ec5\u4ec5\u5141\u8bb8 x \u7684\u7ebf\u6027\u51fd\u6570.</li> </ul> </li> </ul> <p>J(f) reflects our prior belief that f exhibit a certain type of smooth behavior</p> <ul> <li>Bayesian analogy \u6b63\u5219\u9879\u8868\u8fbe\u4e86\u6211\u4eec\u7684 prior belief, \u786e\u5b9e\u53ef\u4ee5\u5957\u8fdb\u8d1d\u53f6\u65af\u7684\u6a21\u578b\u4e2d</li> <li>Penalty J - log-prior</li> <li>PRSS (f ; \\lambda) - log-posterior distribution</li> <li>Minimizing P R S S(f ; \\lambda) - finding the posterior mode.</li> <li>\u6211\u4eec\u5c06\u5728 <code>\u7b2c 5 \u7ae0</code> \u4e2d\u8ba8\u8bba\u7c97\u7cd9\u60e9\u7f5a\u65b9\u6cd5\u5e76\u5728 <code>\u7b2c 8 \u7ae0</code> \u4e2d\u8ba8\u8bba\u8d1d\u53f6\u65af\u8303\u5f0f</li> </ul>"},{"location":"stat/ASL-note1/#kernel-methods-and-local-regression","title":"Kernel Methods and Local Regression","text":"<p>\u8fd9\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u8ba4\u4e3a\u662f\u901a\u8fc7\u786e\u5b9a\u5c40\u90e8\u90bb\u57df\u7684\u672c\u8d28\u6765\u663e\u5f0f\u7ed9\u51fa\u56de\u5f52\u51fd\u6570\u7684\u4f30\u8ba1\u6216\u6761\u4ef6\u671f\u671b\uff0c\u5e76\u4e14\u5c5e\u4e8e\u5c40\u90e8\u62df\u5408\u5f97\u5f88\u597d\u7684\u89c4\u5219\u51fd\u6570\u7c7b\uff0e</p> <p>The local neighborhood is specified by a kernel function K_{\\lambda}\\left(x_{0}, x\\right)</p> <ul> <li>Assign weight K_{\\lambda}\\left(x_{0}, x\\right) to points x in a region around x_{0}</li> <li>e.g., Gaussian kernal K_{\\lambda}\\left(x_{0}, x\\right)=\\frac{1}{\\lambda} \\exp \\left[-\\frac{\\left\\|x-x_{0}\\right\\|^{2}}{2 \\lambda}\\right] \u9ad8\u65af\u6838</li> <li>Weights die exponentialy with squared Euclidean distance from x_{0}.</li> </ul>  R S S\\left(f_{\\theta}, x_{0}\\right)=\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)\\left(y_{i}-f_{\\theta}\\left(x_{i}\\right)\\right)^{2}  <ul> <li>f_{\\hat{\\theta}}\\left(x_{0}\\right) is the local regression estimate of f\\left(x_{0}\\right)</li> <li>\\hat{\\theta} minimizes R S S\\left(f_{\\theta}, x_{0}\\right)</li> <li>f_{\\theta}(x)=\\theta_{0} \\rightarrow Nadaraya-Watson estimate</li> <li>f_{\\theta}(x)=\\theta_{0}+\\theta_{1} x \\rightarrow local linear regression model. \u5c40\u90e8\u7ebf\u6027\u56de\u5f52</li> </ul> <p>\u6700\u8fd1\u90bb\u65b9\u6cd5\u53ef\u4ee5\u770b\u6210\u662f\u67d0\u4e2a\u66f4\u52a0\u4f9d\u8d56\u6570\u636e\u7684\u5ea6\u91cf\u7684\u6838\u65b9\u6cd5. Nearest Neighbour \u6240\u5bf9\u5e94\u7684\u6838\u4e3a K_{\\lambda}\\left(x_{0}, x\\right)=I\\left(\\left\\|x-x_{0}\\right\\| \\leqslant\\left\\|x_{k}-x_{0}\\right\\|\\right)</p> <p>\u4e3a\u4e86\u907f\u514d\u7ef4\u6570\u707e\u96be\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5728\u9ad8\u7ef4\u60c5\u5f62\u4e0b\u8981\u505a\u4fee\u6b63\uff0e\u5c06\u5728 <code>\u7b2c 6 \u7ae0</code> \u8ba8\u8bba\u4e0d\u540c\u7684\u6539\u7f16\uff0e</p>"},{"location":"stat/ASL-note1/#basis-functions-and-dictionary-methods","title":"Basis Functions and Dictionary Methods","text":"<p>Linear basis expansion f_{\\theta}(x)=\\sum_{m=1}^{M}\\left(\\theta_{m} h_{m}(x)\\right)</p> <ul> <li>Piecewise polynomial of degree K at M-K knots (\u89c1 5.2 \u8282)</li> <li>\u5f84\u5411\u57fa\u51fd\u6570 Radial basis functions f_{\\theta}(x)=\\sum_{m=1}^{M} K_{\\lambda_{m}}\\left(\\mu_{m}, x\\right) \\theta_{m}, where \\mu_{m} are centroids (\u89c1 6.7 \u8282)</li> </ul> <p>Neural Network</p> <ul> <li>\u5355\u5c42\u7684\u5411\u524d\u53cd\u9988\u7684\u5e26\u6709\u7ebf\u6027\u8f93\u51fa\u6743\u91cd\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u79cd\u81ea\u9002\u5e94\u7684\u57fa\u51fd\u6570\u65b9\u6cd5</li> <li>f_{\\theta}(x)=\\sum_{i=1}^{M} \\beta_{m} \\sigma\\left(\\alpha_{m}^{\\top} x+b_{m}\\right)</li> <li>\\sigma(x)=\\frac{1}{1+e^{(-x)}} activation function</li> <li>Direction \\alpha and bias b need to be computed</li> </ul> <p>Dictionary methods</p> <ul> <li>Functions are adaptively chosen \u8fd9\u4e9b\u81ea\u9002\u5e94\u9009\u62e9\u57fa\u51fd\u6570\u7684\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4f5c \u5b57\u5178 (dictionary) \u65b9\u6cd5</li> <li>A possibly infinite set or dictionary \\mathcal{D} of candidate basis functions models employ some kind of search mechanism.</li> </ul>"},{"location":"stat/ASL-note1/#model-selection-and-the-biasvariance-tradeoff","title":"Model Selection and the Bias\u2013Variance Tradeoff","text":""},{"location":"stat/ASL-note1/#model-complexity","title":"Model complexity","text":"<p>\u4e0a\u9762\u8ba8\u8bba\u7684\u6240\u6709\u6a21\u578b\u4ee5\u53ca\u5176\u4ed6\u5c06\u8981\u5728\u540e\u9762\u7ae0\u8282\u8ba8\u8bba\u7684\u6a21\u578b\u90fd\u6709\u4e00\u4e2a \u5149\u6ed1 (smoothing) \u6216 \u590d\u6742\u6027 (complexity) \u53c2\u6570\u9700\u8981\u786e\u5b9a</p> <ul> <li>The multiplier of the penalty \\lambda</li> <li>Width of the kernel</li> <li>Number of basis functions</li> </ul> <p>Decomposition of EPE (expected prediction error) \u8fd9\u91cc\u5047\u8bbe\u4e86 x \u662f\u56fa\u5b9a\u7684\u800c\u975e\u968f\u673a\u7684 (\u4e5f\u5373 pointwise \u6700\u5c0f)</p>  \\begin{aligned} E P E\\left(x_{0}\\right)&amp;=E\\left[\\left(y_{0}-\\hat{f}\\left(x_{0}\\right)\\right)^{2} \\mid X=x_{0}\\right] \\\\ &amp;=E\\left[\\left(y_{0}-f\\left(x_{0}\\right)+f\\left(x_{0}\\right)-E \\hat{f}\\left(x_{0}\\right)+E \\hat{f}\\left(x_{0}\\right)-\\hat{f}\\left(x_{0}\\right)\\right)^{2} \\mid X=x_{0}\\right] \\\\ &amp;=E\\left[y_{0}-f\\left(x_{0}\\right)\\right]^{2}+E\\left[f\\left(x_{0}\\right)-E\\left(\\hat{f}\\left(x_{0}\\right)\\right) \\right]^{2}+E\\left[\\hat{f}\\left(x_{0}\\right)-E\\left(\\hat{f}\\left(x_{0}\\right)\\right)\\right]^{2}. \\end{aligned}  <ul> <li>E\\left[y_{0}-f\\left(x_{0}\\right)\\right]^{2} irreducible error, beyond our control \u4e0d\u53ef\u7ea6\u51cf\u7684</li> <li>E\\left[f\\left(x_{0}\\right)-E\\left(\\hat{f}\\left(x_{0}\\right)\\right)\\right]^{2} Bias squared, decrease with complexity \u504f\u5dee\u90e8\u5206</li> <li>E\\left[\\hat{f}\\left(x_{0}\\right)-E\\left(\\hat{f}\\left(x_{0}\\right)\\right)\\right]^{2} Variance, increase with complexity \u65b9\u5dee\u90e8\u5206</li> </ul> <p>\u540e\u9762\u7684\u4e24\u9879\u6784\u6210\u4e86 \u5747\u65b9\u8bef\u5dee (mean squared error)</p> <p></p> <p>\u4e00\u822c\u5730, \u6211\u4eec\u9009\u62e9\u6a21\u578b\u590d\u6742\u5ea6\u4f7f\u504f\u5dee\u4e0e\u65b9\u5dee\u8fbe\u5230\u5747\u8861\u4ece\u800c\u4f7f\u6d4b\u8bd5\u8bef\u5dee\u6700\u5c0f\u3002\u6d4b\u8bd5\u8bef\u5dee\u7684\u4e00\u4e2a\u660e\u663e\u7684 \u4f30\u8ba1\u662f \u8bad\u7ec3\u8bef\u5dee (training error) \\frac{1}{N} \\sum_{i}\\left(y_{i}-\\hat{y}_{i}\\right)^{2}. \u4e0d\u5e78\u7684\u662f, \u8bad\u7ec3\u8bef\u5dee\u4e0d\u662f\u6d4b\u8bd5\u8bef\u5dee\u7684\u826f\u597d\u4f30\u8ba1, \u56e0\u4e3a\u8fd9\u4e0d\u80fd\u89e3\u91ca\u6a21\u578b\u590d\u6742\u5ea6.</p> <p>\u5728 <code>\u7b2c 7 \u7ae0</code> (7.2, 7.3) \u4e2d\uff0c\u6211\u4eec\u8003\u8651\u4f30\u8ba1\u9884\u6d4b\u65b9\u6cd5\u7684\u6d4b\u8bd5\u8bef\u5dee\u7684\u5404\u79cd\u65b9\u5f0f\uff0c\u5e76\u56e0\u6b64\u5728\u7ed9\u5b9a\u7684\u9884\u6d4b\u65b9\u6cd5\u548c\u8bad\u7ec3\u96c6\u4e0b\uff0c\u4f30\u8ba1\u51fa\u6700\u4f18\u7684\u6a21\u578b\u590d\u6742\u5ea6\uff0e</p>"},{"location":"stat/ASL-note1/#linear-methods-for-regression","title":"Linear Methods for Regression","text":"<p>Outline</p> <ul> <li>Intro</li> <li>Linear Regression \\&amp; Least Squares</li> <li>Subset Selection</li> <li>Shrinkage methods</li> <li>Methods Using Derived Input Directions</li> </ul>"},{"location":"stat/ASL-note1/#introduction-of-linear-methods","title":"Introduction of Linear Methods","text":"<p>Advantages of Linear Models</p> <ul> <li>Simple and often provide an adequate and interpretable description of how the inputs affect the output.</li> <li>Sometimes outperform fancier nonlinear models, especially in situations with small numbers of training cases, low signal-to-noise ratio or sparse data.</li> <li>Can be applied to transformations of the inputs and this considerably expands their scope.</li> </ul>"},{"location":"stat/ASL-note1/#recap-of-linear-regression","title":"Recap of Linear Regression","text":"f(X)=\\beta_{0}+\\sum_{j=1}^{p} X_{j} \\beta_{j}  <ul> <li>\\beta_{j} unknown parameter</li> <li>Sources of X_{j}<ul> <li>quantitative inputs</li> <li>transformations</li> <li>basis expansions</li> <li>dummy coding of qualitative variables</li> <li>interactions between variables</li> </ul> </li> <li>Model is linear in \\beta</li> </ul>"},{"location":"stat/ASL-note1/#estimation","title":"Estimation","text":"<p>Training data:</p>  \\left(x_{1}, y_{1}\\right), \\ldots,\\left(x_{N}, y_{N}\\right)  <p>Feature measurements for the i_{t h} case: x_{i}=\\left(x_{i 1}, x_{i 2}, \\ldots, x_{i p}\\right)^{\\top}: Least squares: choose \\beta=\\left(\\beta_{0}, \\beta_{1}, \\ldots, \\beta_{p}\\right)^{\\top} to minimize the Residual Sum of Squares. R S S=\\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2}</p>"},{"location":"stat/ASL-note1/#matrix-notation","title":"Matrix notation","text":"<p>\u8bb0\u4e3a\u77e9\u9635\u5f62\u5f0f, \u53ef\u4ee5\u5f97\u5230\u89e3\u6790\u89e3. (\u5728 X \u5217\u6ee1\u79e9\u7684\u60c5\u51b5\u4e0b)</p> <ul> <li>X: N \\times(p+1) matrix</li> <li>Y: N vector</li> </ul>  R S S(\\beta)=(y-X \\beta)^{\\top}(y-X \\beta)  <ul> <li>Quadratic function of \\beta</li> <li>Differentiating w.r.t. \\beta</li> </ul> <p>\\frac{\\partial R S S}{\\partial \\beta}=-2 X^{\\top}(y-X \\beta) \\frac{\\partial^{2} R S S}{\\partial \\beta \\partial \\beta^{\\top}}=2 X^{\\top} X</p>  \\hat{\\beta}=\\left(X^{\\top} X\\right)^{-1} X^{\\top} y  <ul> <li>Assume X has full column rank</li> <li>Fitted value \\hat{y}=X \\hat{\\beta}=X\\left(X^{\\top} X\\right)^{-1} X^{\\top} y</li> <li>Hat matrix H=X\\left(X^{\\top} X\\right)^{-1} X^{\\top}</li> </ul> <p></p>"},{"location":"stat/ASL-note1/#sampling-properties-of-hatbetahatbeta","title":"Sampling Properties of \\hat{\\beta}","text":"\\hat{\\beta}=\\left(X^{\\top} X\\right)^{-1} X^{\\top} y  <ul> <li>\u53c2\u6570\u4f30\u8ba1\u7684\u534f\u65b9\u5dee\u77e9\u9635(covariance matrix, variance-covariance matrix, dispersion matrix \u8fd9\u4e9b\u540d\u5b57\u90fd\u662f) \\operatorname{Var}(\\hat{\\beta})=\\left(X^{\\top} X\\right)^{-1} \\sigma^{2}</li> <li>\u4f30\u8ba1\u65b9\u5dee \\hat{\\sigma}^{2}=\\frac{1}{N-p-1} \\sum_{i=1}^{N}\\left(y_{i}-\\hat{y}_{i}\\right)^{2}</li> </ul> <p>Additional assumptions \u52a0\u4e0a\u6b63\u6001\u6027\u5047\u8bbe</p> <ul> <li>y=\\beta_{0}+\\sum_{j=1}^{p} X_{j} \\beta_{j}+\\epsilon</li> <li>\\epsilon \\sim \\mathcal{N}\\left(0, \\sigma^{2}\\right)</li> </ul> <p>\u5728\u8fd9\u4e00\u5047\u8bbe\u4e0b, \u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u53c2\u6570\u4f30\u8ba1\u7684\u5206\u5e03: Sampling distribution of \\hat{\\beta}, \\hat{\\sigma}^{2}</p> <ul> <li>\\hat{\\beta} \\sim \\mathcal{N}\\left(\\beta,\\left(X^{\\top} X\\right)^{-1} \\sigma^{2}\\right)</li> <li>(N-p-1) \\hat{\\sigma}^{2} \\sim \\sigma^{2} \\chi_{N-p-1}^{2}</li> </ul> <p>\u4ece\u800c\u4e4b\u540e\u53ef\u4ee5\u8fdb\u884c\u5047\u8bbe\u68c0\u9a8c\u548c\u7f6e\u4fe1\u533a\u95f4.</p>"},{"location":"stat/ASL-note1/#hypothesis-testing-single-parameter","title":"Hypothesis Testing - single parameter","text":"<p>When \\sigma^{2} is known (rare)</p> <ul> <li>v_{j} is the j_{t h} diagonal element of \\left(X^{\\top} X\\right)^{-1}</li> <li>z_{j}=\\frac{\\hat{\\beta}_{j}}{\\sigma \\sqrt{v_{j}}}</li> <li>Under H_{0}, z_{j} \\sim \\mathcal{N}(0,1)</li> </ul> <p>When \\sigma^{2} is unknown (most common)</p> <ul> <li>z_{j}=\\frac{\\hat{\\beta}_{j}}{\\hat{\\sigma} \\sqrt{v_{j}}}</li> <li>Under H_{0}, z_{j} \\sim t(N-p-1)</li> </ul> <p>The differences between t(N-p-1) and standard normal become negligible as the sample size increases</p>"},{"location":"stat/ASL-note1/#hypothesis-testing-group-of-coefficients","title":"Hypothesis Testing - group of coefficients","text":"<p>Bigger model</p> <ul> <li>residual sum-of-squares for the least squares fit R S S_{1}</li> <li>p_{1}+1 parameters</li> </ul> <p>Nested smaller model</p> <ul> <li>residual sum-of-squares for the least squares fit R S S_{0}</li> <li>p_{0}+1 parameters</li> </ul>  F=\\frac{\\left(R S S_{0}-R S S_{1}\\right) /\\left(P_{1}-P_{0}\\right)}{R S S_{1} /\\left(N-P_{1}-1\\right)}  <ul> <li>Measures the change in RSS per additional parameter in the bigger model \u8861\u91cf\u4e86\u5927\u6a21\u578b\u4e2d\u6bcf\u4e2a\u589e\u52a0\u7684\u7cfb\u6570\u5bf9\u4e8eRSS\u7684\u6539\u53d8, \u5e76\u4e14\u7528\u65b9\u5dee\u7684\u4f30\u8ba1\u503c\u8fdb\u884c\u6807\u51c6\u5316</li> <li>Under H_{0}, F \\sim \\mathcal{F}_{p_{1}-p_{0}, N-p_{1}-1}</li> </ul>"},{"location":"stat/ASL-note1/#confidence-interval-region","title":"Confidence Interval / Region","text":"<p>\\beta_{j}: 1-2 \\alpha confidence interval \u5176\u4e2d z^{1-\\alpha} \u4e3a\u6b63\u6001\u5206\u5e03\u7684 {1-\\alpha} \u5206\u4f4d\u6570</p>  \\left(\\hat{\\beta}_{j}-z^{1-\\alpha} v_{j}^{1 / 2} \\hat{\\sigma}, \\hat{\\beta}_{j}+z^{1-\\alpha} v_{j}^{1 / 2} \\hat{\\sigma}\\right)  <p>Entire parameter vector \\beta: 1-2 \\alpha confidence region</p>  \\mathcal{C}_{\\beta}=\\left\\{\\beta \\mid(\\hat{\\beta}-\\beta)^{\\top} X^{\\top} X(\\hat{\\beta}-\\beta) \\leqslant \\hat{\\sigma}^{2} {\\chi_{p+1}^{2}}^{1-2 \\alpha}\\right\\}"},{"location":"stat/ASL-note1/#gauss-markov-theorem","title":"Gauss Markov Theorem","text":"<p>Why least squares?</p> <p>Gauss Markov Theorem: least squares estimates of the parameters \\beta have the smallest variance among all linear unbiased estimates</p> <p>Gauss-Markov \u5b9a\u7406: \u5728\u53c2\u6570 \\beta \u7684\u6240\u6709\u65e0\u504f\u4f30\u8ba1\u4e2d, \u6700\u5c0f\u4e8c\u4e58\u4f30\u8ba1\u662f\u5176\u4e2d\u65b9\u5dee\u6700\u5c0f\u7684.</p> <p>In mathematical term: suppose \\theta=\\alpha^{\\top} \\beta</p> <ul> <li>\\hat{\\theta}=\\alpha^{\\top} \\hat{\\beta} is unbiased for \\theta</li> <li>Consider any other linear estimator \\tilde{\\theta}=c^{\\top} y such that E\\left(c^{\\top} y\\right)=\\alpha^{\\top} \\beta</li> <li>According to Gauss Markov Theorem \\operatorname{Var}\\left(\\alpha^{\\top} \\hat{\\beta}\\right)&lt;\\operatorname{Var}\\left(c^{\\top} y\\right)</li> </ul> <p>\u867d\u7136 Gauss-Markov \u5b9a\u7406 \u8bf4\u660e\u4e86\u53c2\u6570\u4f30\u8ba1\u5728\u65e0\u504f\u4f30\u8ba1\u4e2d\u662f\u6700\u597d\u7684, \u4f46\u6839\u636e\u4e0b\u9762\u7684\u4f30\u8ba1\u503c\u7684\u5747\u65b9\u8bef\u5dee\u5206\u89e3, \u53ef\u77e5\u5176\u7531\u4f30\u8ba1\u7684\u65b9\u5dee\u548c\u4f30\u8ba1\u504f\u5dee\u5171\u540c\u51b3\u5b9a \u2014\u2014 \u56e0\u6b64\u5f15\u5165\u4e86\u4e0b\u9762\u7684 shrink \u65b9\u6cd5.</p> <p>Mean squared error of an estimator \\tilde{\\theta} in estimating \\theta :</p>  \\operatorname{MSE}(\\tilde{\\theta})=E(\\tilde{\\theta}-\\theta)^{2}=E(\\tilde{\\theta}-E(\\tilde{\\theta})+E(\\tilde{\\theta})-\\theta)^{2}=\\operatorname{Var}(\\tilde{\\theta})+\\operatorname{Bias}(\\tilde{\\theta})^{2}  <p>How about biased estimator (best subset, shrinkage)?</p> <ul> <li>Might have smaller MSE by trading a little bias for a larger reduction in variance.</li> </ul> <p>\u201cAll models are wrong, some are useful\u201d</p> <ul> <li>Picking the right model amounts to creating the right balance between bias and variance.</li> </ul>"},{"location":"stat/ASL-note1/#multiple-linear-regression","title":"Multiple Linear Regression","text":"<p>\u591a\u5143\u7ebf\u6027\u56de\u5f52\u548c\u4e00\u5143\u7684\u5173\u7cfb: \u5f53\u6240\u6709\u81ea\u53d8\u91cf\u90fd\u662f\u6b63\u4ea4\u7684\u60c5\u51b5\u4e0b, \u5f97\u5230\u7684\u7cfb\u6570\u90fd\u662f\u4e00\u6837\u7684. \u800c\u5bf9\u4e8e\u4e0d\u6b63\u4ea4\u7684\u60c5\u51b5, \u53ef\u4ee5\u91c7\u7528 Gram-Schmidt \u6b63\u4ea4\u5316, \u5f53\u7136\u5728\u4e24\u4e2a\u53d8\u91cf\u76f8\u5173\u6027\u8f83\u9ad8\u7684\u60c5\u51b5\u4e0b, \u4f30\u8ba1\u4f1a\u4e0d\u7a33\u5b9a.</p> <p>y_{i}=\\beta_{0}+\\sum_{j=1}^{p} x_{i j} \\beta_{j} where p&gt;1</p> <p>When x_{1}, x_{2}, \\ldots, x_{p} are orthogonal \\left(\\left\\langle x_{j}, x_{k}\\right\\rangle=0\\right. for all \\left.j \\neq k\\right)</p> <ul> <li>\\hat{\\beta}_{j}=\\frac{\\left\\langle x_{j}, y\\right\\rangle}{\\left\\langle x_{j}, x_{j}\\right\\rangle}, same as univariate solution</li> </ul> <p>When x_{1}, x_{2}, \\ldots, x_{p} are not orthogonal</p> <ul> <li>Orthogonalize x_{j} to get residual vector z_{j}, j=1, \\ldots, p</li> <li>Regress y on the residual z_{p} to give the estimate \\beta_{p}</li> <li>Also known as Gram-Schmidt procedure</li> <li>Note: if x_{j} is highly correlated with x_{k}, z_{j} will be close to zero, and \\beta_{j} will be very unstable.</li> </ul>"},{"location":"stat/ASL-note1/#multiple-outputs-y_1-y_2-ldots-y_ky_1-y_2-ldots-y_k","title":"Multiple Outputs Y_{1}, Y_{2}, \\ldots, Y_{K}","text":"<p>\u5bf9\u4e8e\u591a\u5143\u7684\u8f93\u51fa\u800c\u8a00, \u82e5\u968f\u673a\u9879\u76f8\u4e92\u72ec\u7acb, \u5219\u548c\u4e00\u5143Y\u4e00\u81f4.</p>  Y_{k}=\\beta_{0 k}+\\sum_{j=1}^{p} X_{j} \\beta_{j k}+\\epsilon_{k}=f_{k}(X)+\\epsilon_{k}  <p>or in matrix notation Y=X B+E</p> <p>If errors \\epsilon=\\left(\\epsilon_{1}, \\epsilon_{2}, \\ldots, \\epsilon_{k}\\right) are i.i.d. \u4e0d\u540c\u7684 y_i \u4e4b\u95f4\u8bef\u5dee\u9879\u72ec\u7acb, \u4e5f\u5373\u53ef\u5206\u522b\u770b\u6210\u72ec\u7acb\u7684 LR.</p> <ul> <li>R S S(B)=\\sum_{k=1}^{K} \\sum_{i=1}^{N}\\left(y_{i k}-f_{k}\\left(x_{i}\\right)\\right)^{2}=\\operatorname{tr}\\left[(Y-X B)^{\\top}(Y-X B)\\right]</li> <li>\\hat{B}=\\operatorname{argmin}_{B} R S S(B)=\\left(X^{\\top} X\\right)^{-1} X^{\\top} Y</li> <li>Same form as univariate output</li> </ul> <p>If errors \\epsilon=\\left(\\epsilon_{1}, \\epsilon_{2}, \\ldots, \\epsilon_{k}\\right) are correlated</p> <ul> <li>R S S(B, \\Sigma)=\\sum_{i=1}^{N}\\left(y_{i}-f\\left(x_{i}\\right)\\right)^{\\top} \\Sigma^{-1}\\left(y_{i}-f\\left(x_{i}\\right)\\right) \u6ce8\u610f\u8fd9\u91cc\u7528\u4e86\u8bef\u5dee\u7684\u534f\u65b9\u5dee\u77e9\u9635\u8fdb\u884c\u8bbe\u7f6e\u4e0d\u540c\u4f30\u8ba1\u8bef\u5dee\u4e4b\u95f4\u7684\u7cfb\u6570, \u53eb\u505a \u300c\u591a\u91cd\u53d8\u91cf\u52a0\u6743\u51c6\u5219\u300d, \u53ef\u7531\u300c\u591a\u53d8\u91cf\u9ad8\u65af\u5b9a\u7406\u300d\u63a8\u51fa.</li> <li>\\hat{B}=\\operatorname{argmin}_{B} R S S(B, \\Sigma)=\\left(X^{\\top} X\\right)^{-1} X^{\\top} Y \u6ce8\u610f\u8fd9\u91cc\u7684\u5f62\u5f0f\u548c\u4e0a\u9762\u8bef\u5dee\u9879\u72ec\u7acb\u65f6\u4e00\u81f4</li> <li>Note: If \\Sigma_{i} vary among observations, results no longer hold</li> </ul>"},{"location":"stat/ASL-note1/#subset-selection","title":"Subset Selection","text":"<p>\u4e24\u70b9\u7406\u7531: \u9884\u6d4b\u7cbe\u786e\u6027, \u6a21\u578b\u7684\u53ef\u89e3\u91ca\u6027</p> <ul> <li>Prediction accuracy<ul> <li>least squares estimates often have low bias but large variance.</li> <li>Prediction accuracy can sometimes be improved by shrinking or setting some coe\ufb03cients to zero.</li> </ul> </li> <li>Interpretability<ul> <li>Determine a smaller subset that exhibit the strongest effects.</li> <li>Sacri\ufb01ce some of the small details in order to get the \u201dbig picture\u201d</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#forward-backward-stepwise-selection","title":"Forward, Backward, Stepwise Selection","text":"<p>\u76f8\u8f83\u4e8e\u91c7\u7528F\u7edf\u8ba1\u91cf\u6765\u9009\u62e9\u300c\u663e\u8457\u6027\u300d\u9879\u7136\u540e\u5220\u9664\u975e\u663e\u8457\u9879, \u5b83\u7684\u95ee\u9898\u5728\u4e8e\u6ca1\u6709\u8003\u8651\u300c\u591a\u91cd\u68c0\u9a8c\u300d\u95ee\u9898, \u56e0\u6b64 Forward/Backward-stepwise selection \u66f4\u597d.</p> <p>\u6709\u7406\u60f3\u7684\u60c5\u51b5, \u81ea\u7136\u662f\u4ece\u6240\u6709\u53ef\u80fd\u7684\u5b50\u96c6\u4e2d\u9009\u62e9\u6700\u4f18\u7684, \u4f46\u662f\u8ba1\u7b97\u91cf\u8fc7\u5927.</p> <ul> <li>Forward<ul> <li>Starts with the intercept</li> <li>Sequentially adds the predictor that most improves the \ufb01t</li> <li>Must determine model size k</li> <li>\u524d\u5411\u9009\u62e9\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u8d2a\u5fc3\u7b97\u6cd5. 1. \u5728 computational\u4e0a\u4ee3\u4ef7\u8f83\u5c0f; 2. \u524d\u5411\u9010\u6b65\u662f\u4e00\u79cd\u6709\u300c\u66f4\u591a\u7ea6\u675f\u300d\u7684\u641c\u7d22, \u4f1a\u6709\u66f4\u4f4e\u7684\u65b9\u5dee, \u4f46\u53ef\u80fd\u4f1a\u6709\u66f4\u9ad8\u7684\u8bef\u5dee.</li> </ul> </li> <li>backward<ul> <li>Starts with the full model</li> <li>Sequentially deletes the predictor that has the least impact on \ufb01t</li> <li>Candidate for dropping is the variable with the smallest Z-score</li> </ul> </li> <li>Stepwise<ul> <li>Consider both forward and backward moves at each step</li> <li>Select the \u201cbest\u201d of the two</li> <li>R <code>step</code> function: at each step add or drop based on AIC</li> </ul> </li> </ul> <p>\u4f18\u7f3a\u70b9</p> <ul> <li>Pros<ul> <li>Interpretable</li> <li>Possibly lower prediction error than the full model.</li> </ul> </li> <li>Cons<ul> <li>Discrete process - variables either retained or discarded \u76f8\u8f83\u4e8e\u4e0b\u9762\u7684 shrink \u65b9\u6cd5</li> <li>Often exhibits high variance \u7531\u4e8e\u53d8\u91cf\u5c11\u4e86, \u5e76\u4e14\u662f\u79bb\u6563\u7ea6\u675f</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#shrinkage-methods","title":"Shrinkage methods","text":"<p>\u4e0a\u9762\u7684\u81ea\u5df1\u9009\u62e9\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u89e3\u91ca\u6027\u66f4\u5f3a\u7684\u6a21\u578b, (\u9884\u6d4b\u8bef\u5dee\u53ef\u80fd\u6bd4\u5168\u6a21\u578b\u597d); \u7136\u800c\u7531\u4e8e\u8fd9\u662f\u4e00\u4e2a\u79bb\u6563\u7684\u8fc7\u7a0b(\u53d8\u91cf\u9009\u5165\u6216\u8005\u4e22\u5f03), \u56e0\u6b64\u53ef\u80fd\u8868\u73b0\u4e3a\u9ad8\u65b9\u5dee; \u800c\u8fd9\u91cc\u7684shrinkage \u65b9\u6cd5, \u66f4\u52a0\u8fde\u7eed, \u56e0\u6b64\u4e0d\u4f1a\u53d7\u5230 high variability \u7684\u5f71\u54cd.</p>"},{"location":"stat/ASL-note1/#ridge-regression","title":"Ridge Regression","text":"<p>Shrinks the regression coefficients by imposing a penalty on their size.</p>  \\hat{\\beta}^{\\text {ridge }}=\\operatorname{argmin}_{\\beta}\\left\\{\\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2}+\\lambda \\sum_{j=1}^{p} \\beta_{j}^{2}\\right\\}  <p>which is equivalent to (\u5229\u7528 Lagrange \u4e58\u5b50\u6cd5)</p>  \\hat{\\beta}^{\\text {ridge }}=\\operatorname{argmin}_{\\beta} \\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2}  \\text{subject to} \\sum_{j=1}^{p} \\beta_{j}^{2} \\leqslant t  <ul> <li>\\beta_{0} is left out of the penalty term</li> <li>Normalize inputs before solving for solutions. \u6ce8\u610f, \u5bf9\u4e8e\u5cad\u56de\u5f52, \u5bf9\u8f93\u5165\u6309\u7167\u6bd4\u4f8b\u8fdb\u884c\u7f29\u653e, \u5f97\u5230\u7684\u7ed3\u679c\u662f\u4e0d\u540c\u7684, \u56e0\u6b64\u5728\u4e0a\u9762\u7684\u6c42\u89e3\u524d\u9700\u8981\u89c1\u8fdb\u884c\u6807\u51c6\u5316. \u53ef\u4ee5\u8bc1\u660e, \u7ecf\u8fc7\u5bf9\u4e8e\u53d8\u91cf\u4e2d\u5fc3\u5316\u4e4b\u540e, \u53ef\u4ee5\u5206\u89e3\u4e3a\u6c42\u622a\u8ddd\u548c\u5176\u4ed6\u7cfb\u6570\u4e24\u90e8\u5206, \u56e0\u6b64\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f(\u8fd9\u91cc\u7684\u53c2\u6570\u7ef4\u5ea6\u4e3a p \u800c\u975e p+1 \u4e86).</li> <li>In matrix notation R S S(\\lambda)=(y-X \\beta)^{\\top}(y-X \\beta)+\\lambda \\beta^{\\top} \\beta</li> <li>\\hat{\\beta}^{\\text {ridge }}=\\left(X^{\\top} X+\\lambda I\\right)^{-1} X^{\\top} y</li> </ul>"},{"location":"stat/ASL-note1/#estimation-gaussian","title":"Estimation - Gaussian","text":"\\hat{\\beta}^{\\text {ridge }}=\\left(X^{\\top} X+\\lambda I\\right)^{-1} X^{\\top} y  <ul> <li>\\hat{\\beta}^{\\text {ridge }} is again a linear function of \\mathrm{y}</li> <li>Makes it nonsingular even if X^{\\top} X is not of full rank</li> <li>When X are orthogonal, \\hat{\\beta}^{\\text {ridge }} are just a scaled version of \\hat{\\beta}^{O L S} \u5728\u6b63\u4ea4\u8f93\u5165\u7684\u60c5\u5f62\u4e0b\uff0c\u5cad\u56de\u5f52\u4f30\u8ba1\u4ec5\u4ec5\u662f\u6700\u5c0f\u4e8c\u4e58\u4f30\u8ba1\u7684\u7f29\u5c0f\u7248\u672c, \u5373 \\hat{\\beta}^{\\text {ridge}}=\\frac{1}{1+\\lambda}\\hat{\\beta}^{O L S}</li> <li>Equivalent Bayesian context - Gaussian prior for \\beta \u53ef\u4ee5\u8bc1\u660e\u5cad\u56de\u5f52\u7b49\u4ef7\u4e8e\u53c2\u6570\u5728\u9ad8\u65af\u5148\u9a8c\u4e0b\u7684\u540e\u9a8c\u4f30\u8ba1, \u4e14\u6ee1\u8db3\u5173\u7cfb \\lambda = \\sigma^2 / \\tau^2, \u5176\u4e2d \\sigma^2 \u4e3a\u566a\u58f0\u9879\u65b9\u5dee, \\tau^2 \u4e3aprior\u9ad8\u65af\u65b9\u5dee.</li> </ul>  X \\hat{\\beta}^{\\text {ridge }}=\\sum_{j=1}^{p} \\mu_{j} \\frac{d_{j}^{2}}{d_{j}^{2}+\\lambda} \\mu_{j}^{\\top} y  <ul> <li>u_{j} are the columns of U where X=U D V^{\\top}</li> <li>d_{j} are the singular values of X</li> <li>Greater amount of shrinkage is applied to the coordinates of basis vectors with smaller d_{j} \u5bf9\u4e8e\u65b9\u5dee\u8d8a\u5c0f\u7684\u4e3b\u6210\u5206, ridge \u7684\u6536\u7f29\u8d8a\u5389\u5bb3</li> <li>effective degrees of freedom d f(\\lambda)=\\sum_{j=1}^{p} \\frac{d_{j}^{2}}{d_{j}^{2}+\\lambda}</li> </ul> <p>\u89c2\u5bdf\u4e0a\u9762\u7684\u5f0f\u5b50, \\mu_{j}^{\\top} y \u5c06y\u6295\u5f71\u5230 X \u7684\u5404\u4e2a\u5947\u5f02\u5411\u91cf(\u4e3b\u6210\u5206), \u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u5947\u5f02\u503c(X^TX\u7684\u7279\u5f81\u503c) \u8fdb\u884c\u6536\u7f29, \u6839\u636e\u5206\u5f0f\u53ef\u77e5\u5947\u5f02\u503c\u8d8a\u5c0f\u7684\u6536\u7f29\u8d8a\u5389\u5bb3.</p>  \\begin{aligned} \\mathrm{df}(\\lambda) &amp;=\\operatorname{tr}\\left[\\mathbf{X}\\left(\\mathbf{X}^{\\mathbf{T}} \\mathbf{X}+\\lambda \\mathbf{I}\\right)^{-1} \\mathbf{X}^{T}\\right] \\\\ &amp;=\\operatorname{tr}\\left(\\mathbf{H}_{\\lambda}\\right) \\\\ &amp;=\\sum_{j=1}^{p} \\frac{d_{j}^{2}}{d_{j}^{2}+\\lambda} \\end{aligned}  <p>\u662f\u5cad\u56de\u5f52\u7684\u6709\u6548\u81ea\u7531\u5ea6, \\lambda \u7684\u9012\u51cf\u51fd\u6570.</p> <p></p>"},{"location":"stat/ASL-note1/#the-lasso","title":"The LASSO","text":"<p>L_{2} penalty \\sum_{j=1}^{p} \\beta_{j}^{2} is replaced by L_{1} penalty \\sum_{j=1}^{p}\\left|\\beta_{j}\\right|. \\hat{\\beta}^{\\text {lasso }}=\\operatorname{argmin}_{\\beta}\\left\\{\\frac{1}{2} \\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2}+\\lambda \\sum_{j=1}^{p}\\left|\\beta_{j}\\right|\\right\\} Which is equivalent to \\hat{\\beta}^{\\text {lasso }}=\\operatorname{argmin}_{\\beta} \\frac{1}{2} \\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2} subject to \\sum_{j=1}^{p}\\left|\\beta_{j}\\right| \\leqslant t</p> <ul> <li>Non-linear in y</li> <li>No closed form expression</li> <li>\\hat{\\beta}^{\\text {lasso }} becomes \\hat{\\beta}^{\\text {OLS }} when t&gt;\\sum_{j=1}^{p}\\left|\\beta_{j}^{\\text {OLS }}\\right|</li> <li>\\hat{\\beta}^{\\text {lasso }}=0 when t \\rightarrow 0</li> <li>Continuous subset selection.</li> </ul>"},{"location":"stat/ASL-note1/#comparisons-orthonormal-inputs","title":"Comparisons - Orthonormal Inputs","text":"<p>\u5728 X \u6b63\u4ea4\u7684\u60c5\u51b5, \u4e09\u8005\u90fd\u6709\u663e\u5f0f\u89e3.</p> <p></p> <ul> <li>Best Subset<ul> <li>Drop all variables with coefficients smaller than the M-th</li> <li>\u201chard-thresholding.</li> </ul> </li> <li>Ridge<ul> <li>Proportional shrinkage</li> </ul> </li> <li>LASSO<ul> <li>translates by a constant factor \\lambda, truncating at zero.</li> <li>\u201csoft thresholding\u201d</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#comparisons-nonorthogonal-inputs","title":"Comparisons - Nonorthogonal Inputs","text":""},{"location":"stat/ASL-note1/#generalization-of-ridge-and-lasso","title":"Generalization of Ridge and LASSO","text":"\\tilde{\\beta}=\\operatorname{argmin}_{\\beta}\\left\\{\\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{p} x_{i j} \\beta_{j}\\right)^{2}+\\lambda \\sum_{j=1}^{p}\\left|\\beta_{j}\\right|^{q}\\right\\}, q \\geqslant 0  <ul> <li>q=0, subset selection</li> <li>0 \\leqslant q&lt;1, non-convex constraint regions, difficult optimization q=1, LASSO</li> <li>1&lt;q&lt;2 : \u201ccompromise\u201d between Ridge and LASSO, but not desirable</li> <li>q=2, ridge</li> </ul> <p>Elastic net: \\lambda \\sum_{j=1}^{p}\\left(\\alpha \\beta_{j}^{2}+(1-\\alpha)\\left|\\beta_{j}\\right|\\right), 0 \\leqslant \\alpha \\leqslant 1</p>"},{"location":"stat/ASL-note1/#least-angle-regression","title":"Least Angle Regression","text":"<p>\u53c2\u89c1 \u6700\u5c0f\u89d2\u56de\u5f52\u7b97\u6cd5\uff08LARS\uff09 \u56fe\u793a\u5f88\u6e05\u695a</p> <p>LAR\uff08Least angle regression\uff0c\u6700\u5c0f\u89d2\u56de\u5f52\uff09\uff0c\u7531Efron\u7b49\uff082004\uff09\u63d0\u51fa\u3002\u8fd9\u662f\u4e00\u79cd\u975e\u5e38\u6709\u6548\u7684\u6c42\u89e3LASSO\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u5f97\u5230LASSO\u7684\u89e3\u7684\u8def\u5f84\u3002</p> <p>Similar to forward stepwise, but only enters \u201cas much\u201d of a predictor as it deserves.</p> <ul> <li>Identifies the variable most correlated with the response</li> <li>Moves the coef continuously toward its least-squares value</li> <li>As soon as another variable \u201ccatches up\u201d, stop</li> <li>The second variable joins the active set</li> <li>Repeat\u2026</li> </ul> <p>Least Angle Regression - Algorithm</p> <ul> <li>Standardize the predictors to have mean zero and unit norm. Start with the residual r=y-\\bar{y}, \\beta_{1}, \\beta_{2}, \\ldots, \\beta_{p}=0.</li> <li>Find the predictor x_{j} most correlated with r</li> <li>Move \\beta_{j} from 0 towards its least-squares coefficient \\left\\langle x_{j}, r\\right\\rangle , until some other competitor x_{k} has as much correlation with the current residual as does x_{j}</li> <li>Move \\beta_{j} and \\beta_{k} in the direction defined by their joint least squares coefficient of the current residual on \\left(x_{j}, x_{k}\\right) until some other competitor x_{l} has as much correlation with the current residual</li> <li>Continue in this way until all p predictors have been entered. After \\min (N-1, p) steps, we arrive at the full least-squares solution.</li> </ul> <p></p> <p></p>"},{"location":"stat/ASL-note1/#methods-using-derived-input-directions","title":"Methods Using Derived Input Directions","text":"<p>\u56fe 3.18 \u663e\u793a\u4e86\u4e0d\u540c\u65b9\u6cd5\u4e0b\u5f53\u5b83\u4eec\u60e9\u7f5a\u53c2\u6570\u6539\u53d8\u65f6\u7684\u7cfb\u6570\u66f2\u7ebf\uff0e\u4e0a\u56fe \u03c1 = 0.5\uff0c\u4e0b\u56fe \u03c1 = \u22120.5\uff0e\u5cad\u56de\u5f52\u548c lasso \u7684\u60e9\u7f5a\u53c2\u6570\u5728\u4e00\u4e2a\u8fde\u7eed\u7684\u533a\u57df\u5185\u53d8\u5316\uff0c\u800c\u6700\u4f18\u5b50\u96c6\uff0cPLS \u548c PCR \u53ea\u8981\u4e24\u4e2a\u79bb\u6563\u7684\u6b65\u9aa4\u4fbf\u8fbe\u5230\u4e86\u6700\u5c0f\u4e8c\u4e58\u89e3\uff0e\u5728\u4e0a\u9762\u7684\u56fe\u4e2d\uff0c\u4ece\u96f6\u70b9\u5f00\u59cb\uff0c\u5cad\u56de\u5f52\u6574\u4f53\u6536\u7f29\u53c2\u6570\u76f4\u5230\u6700\u540e\u6536\u7f29\u5230\u6700\u5c0f\u4e8c\u4e58\uff0e\u5c3d\u7ba1 PLS \u548c PCR \u662f\u79bb\u6563 \u7684\u4e14\u66f4\u52a0\u6781\u7aef\uff0c\u4f46\u5b83\u4eec\u663e\u793a\u4e86\u7c7b\u4f3c\u5cad\u56de\u5f52\u7684\u884c\u4e3a\uff0e\u6700\u4f18\u5b50\u96c6\u8d85\u51fa\u89e3\u7136\u540e\u56de\u6eaf\uff0e lasso \u7684\u884c\u4e3a\u662f\u5176\u4ed6\u65b9\u6cd5\u7684\u8fc7\u6e21\uff0e\u5f53\u76f8\u5173\u7cfb\u6570\u4e3a\u8d1f\u6570\u65f6\uff08\u4e0b\u56fe\uff09\uff0cPLS \u548c PCR \u518d\u4e00\u6b21\u5927\u81f4\u5730\u8ddf\u968f\u5cad\u56de\u5f52\u7684\u8def\u5f84\uff0c\u800c\u6240\u6709\u7684\u65b9\u6cd5\u90fd\u66f4\u52a0\u76f8\u4f3c\uff0e</p> <p>\u6bd4\u8f83\u4e0d\u540c\u65b9\u6cd5\u7684\u6536\u7f29\u884c\u4e3a\u662f\u5f88\u6709\u8da3\u7684\uff0e\u5cad\u56de\u5f52\u5bf9\u6240\u6709\u65b9\u5411\u90fd\u6709\u6536\u7f29\u4f46\u5728\u4f4e\u65b9\u5dee\u65b9\u5411\u6536\u7f29\u7a0b\u5ea6\u66f4\u5389\u5bb3\uff0e\u4e3b\u6210\u5206\u56de\u5f52\u5c06 M \u4e2a\u9ad8\u65b9\u5dee\u7684\u65b9\u5411\u5355\u72ec\u53d6\u51fa\u6765\uff0c\u7136\u540e\u4e22\u6389\u5269\u4e0b\u7684\uff0e\u6709\u8da3\u7684\u662f\uff0c\u53ef\u4ee5\u8bc1\u660e\u504f\u6700\u5c0f\u4e8c\u4e58\u4e5f\u8d8b\u5411\u4e8e\u6536\u7f29\u4f4e\u65b9\u5dee\u7684\u65b9\u5411\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u4f1a\u4f7f\u5f97\u67d0\u4e9b\u9ad8\u65b9\u5dee\u65b9\u5411\u81a8\u80c0\uff0e\u8fd9\u4f7f\u5f97 PLS \u7a0d\u5fae\u4e0d\u592a\u7a33\u5b9a\uff0c\u56e0\u6b64\u76f8\u6bd4\u4e8e\u5cad\u56de\u5f52\u4f1a\u6709\u8f83\u5927\u7684\u9884\u6d4b\u8bef\u5dee\uff0e\u6574\u4e2a\u7814\u7a76\u7531 Frank and Friedman (1993) \u7ed9\u51fa\uff0e\u4ed6\u4eec\u603b\u7ed3\u5230\u5bf9\u4e8e\u6700\u5c0f\u5316\u9884\u6d4b\u8bef\u5dee\uff0c\u5cad\u56de\u5f52\u4e00\u822c\u6bd4\u53d8\u91cf\u5b50\u96c6\u9009\u62e9\u3001\u4e3b\u6210\u5206\u56de\u5f52\u548c\u504f\u6700\u5c0f\u4e8c\u4e58\u66f4\u597d\uff0e\u7136\u800c\uff0c\u76f8\u5bf9\u4e8e\u540e\u4e24\u79cd\u65b9\u6cd5\u7684\u63d0\u9ad8\u53ea\u662f\u5f88\u5c0f\u7684\uff0e</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0cPLS\uff0cPCR \u4ee5\u53ca\u5cad\u56de\u5f52\u8d8b\u5411\u4e8e\u8868\u73b0\u4e00\u81f4\uff0e\u5cad\u56de\u5f52\u53ef\u80fd\u4f1a\u66f4\u597d\uff0c\u56e0\u4e3a\u5b83\u6536\u7f29\u5f97\u5f88\u5149\u6ed1\uff0c\u4e0d\u50cf\u79bb\u6563\u6b65\u9aa4\u4e2d\u4e00\u6837\uff0eLasso \u4ecb\u4e8e\u5cad\u56de\u5f52\u548c\u6700\u4f18\u5b50\u96c6\u56de\u5f52\u4e2d\u95f4\uff0c\u5e76\u4e14\u6709\u4e24\u8005\u7684\u90e8\u5206\u6027\u8d28\uff0e</p> <p></p>"},{"location":"stat/ASL-note1/#principle-components-regression-pcr","title":"Principle Components Regression \u4e3b\u6210\u5206\u56de\u5f52 PCR","text":"<p>Eigen decomposition of X^{\\top} X: X^{\\top} X=V D^{2} V^{\\top}</p> <ul> <li>Eigen vector v_{j} (column of V ): principal components directions</li> <li>z_{j}=X v_{j}: principle components</li> <li>z_{1} has the largest sample variance amongst all normalized linear combinations of the columns of X.</li> <li>Derived input columns \\left(z_{1}, z_{2}, \\ldots, z_{M}\\right), where M \\leqslant p</li> <li>\\hat{y}_{(M)}^{p c r}=\\bar{y} \\mathbb{I}+\\sum_{m=1}^{M} \\hat{\\theta}_{m} z_{m}</li> </ul> <p></p> <ul> <li>\u5f53 M=p \u65f6\u5c31\u662f\u4e00\u822c\u7684\u6700\u5c0f\u4e8c\u4e58\u4f30\u8ba1, \u800c\u5bf9\u4e8e M&lt;p \u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u964d\u7ef4\u7684\u56de\u5f52\u95ee\u9898.</li> <li>\u7c7b\u4f3c\u4e0a\u9762\u7684 Ridge, \u90fd\u662f\u5bf9\u4e8e PC \u8fdb\u884c\u64cd\u4f5c. Ridge \u4e2d\u5bf9\u4e8e\u4e3b\u6210\u5206\u7cfb\u6570\u8fdb\u884c\u4e86\u6536\u7f29, \u800cPCR\u4e22\u6389\u4e86 p-M \u4e2a\u6700\u5c0f\u7684\u7279\u5f81\u503c\u5206\u91cf.</li> </ul>"},{"location":"stat/ASL-note1/#partial-least-squares","title":"Partial Least Squares \u504f\u6700\u5c0f\u4e8c\u4e58","text":"<p>\u57fa\u672c\u7684\u601d\u8def\u5c31\u662f, \u8ba1\u7b97\u6bcf\u4e00\u4e2a x_i \u65b9\u5411\u4e0a\u7684\u56de\u5f52\u7cfb\u6570, \u7136\u540e\u5c06\u8fd9\u4e9b\u65b9\u5411\u6c47\u603b\u8d77\u6765\u5f97\u5230\u4e00\u4e2a\u865a\u62df\u7684\u53d8\u91cf\u8fdb\u884c\u56de\u5f52; \u7136\u540e\u5c06\u6240\u6709\u7684 x_i \u53bb\u9664\u8be5\u65b9\u5411\u4e0a\u7684\u5206\u91cf(\u6b63\u4ea4\u5316), \u7ee7\u7eed, \u76f4\u5230\u627e\u5230 M \u4e2a.</p> <p>Use the output Y (in addition to X ) in construction of the derived input</p> <ul> <li>Compute \\hat{\\phi}_{1 j}=\\left\\langle x_{j}, y\\right\\rangle for each j=1, \\ldots, p</li> <li>z_{1}=\\sum_{j} \\hat{\\phi}_{1 j} x_{j} : first partial least squares direction</li> <li>Output y is regressed on z_{1} giving coefficient \\hat{\\theta}_{1} \u6240\u8c13\u300cy is regressed on x\u300d\u5c31\u662f\u7528x\u6765\u9884\u6d4by</li> <li>Orthogonalize x_{1}, \\ldots, x_{p} w.r.t. z_{1}</li> <li>Continue until M \\leqslant p directions have been obtained</li> </ul> <p>Note: Each z_{m} is weighted by the strength of their univariate effect on y</p> <p>Partial Least Squares - Algorithm</p> <ul> <li>Standardize each x_{j} to have mean zero and variance one. Set \\hat{y}^{(0)}=\\bar{y}, x_{j}^{(0)}=x_{j}, j=1, \\ldots, p .</li> <li>For m=1,2, \\ldots, p   1. z_{m}=\\sum_{j=1}^{p} \\hat{\\phi}_{m j} x_{j}^{(m-1)}, where \\hat{\\phi}_{m j}=\\left\\langle x_{j}^{(m-1)}, y\\right\\rangle   2. \\hat{\\theta}_{m}=\\frac{z_{m, y}}{z_{m}, z_{m}}   3. \\hat{y}^{(m)}=\\hat{y}^{(m-1)}+\\hat{\\theta}_{m} z_{m}   4. Orthogonalize each x_{j}^{(m-1)} w.r.t. z_{m}: x_{j}^{(m)}=x_{j}^{(m-1)} - \\frac{z_{m}, x_{j}^{(m-1)}}{z_{m}, z_{m}} z_{m}, j=1, \\ldots, p</li> <li>Output the sequence of fitted vectors \\left\\{\\hat{y}^{(m)}\\right\\}, recover coef \\hat{y}^{(m)}=X \\hat{\\beta}^{P L S}(m)</li> </ul>"},{"location":"stat/ASL-note1/#comparison-pcr-pls","title":"Comparison - PCR \\&amp; PLS","text":"<p>PCR: seeks directions that have high variance</p> <ul> <li>The m_{\\text {th }} principal component direction \\nu_{m} solves</li> <li>\\max _{\\alpha} \\operatorname{Var}(X \\alpha)</li> <li>subject to \\|\\alpha\\|=1, \\alpha^{\\top} S \\nu_{l}=0, I=1, \\ldots, m-1</li> </ul> <p>PLS: seeks directions that have high variance \\&amp; high correlation with the output</p> <ul> <li>The m_{t h} PLS direction \\hat{\\phi}_{m} solves</li> <li>\\max _{\\alpha} \\operatorname{Corr}^{2}(y, X \\alpha) \\operatorname{Var}(X \\alpha)</li> <li>subject to \\|\\alpha\\|=1, \\alpha^{\\top} S \\hat{\\phi}_{1}=0, I=1, \\ldots, m-1</li> </ul> <p>Note: the variance aspect tends to dominate, so PLS behaves much like ridge and P C R</p>"},{"location":"stat/ASL-note1/#some-algebra","title":"Some Algebra","text":"<p>\u5173\u4e8e\u5947\u5f02\u503c\u5206\u89e3, \u53c2\u89c1 \u5947\u5f02\u503c\u5206\u89e3\u7684\u63ed\u79d8\uff08\u4e00\uff09\uff1a\u77e9\u9635\u7684\u5947\u5f02\u503c\u5206\u89e3\u8fc7\u7a0b</p> <ul> <li>\u65b9\u9635\u7684\u5bf9\u89d2\u5316\u5206\u89e3/\u7279\u5f81\u5206\u89e3 A=U\\Lambda U^{-1}, \u5176\u4e2dU\u7684\u6bcf\u4e00\u5217\u662f\u7279\u5f81\u5411\u91cf<ul> <li>\u5b9e\u5bf9\u79f0\u9635\u7684\u7279\u5f81\u503c\u90fd\u662f\u5b9e\u6570, \u4e14\u6709N\u4e2a\u7ebf\u6027\u65e0\u5173\u7684\u7279\u5f81\u5411\u91cf, \u5e76\u4e14\u8fd9\u4e9b\u7279\u5f81\u5411\u91cf\u53ef\u4ee5\u6b63\u4ea4\u5355\u4f4d\u5316\u4e3a\u4e00\u7ec4\u6b63\u4ea4\u5355\u4f4d\u5411\u91cf, \u56e0\u6b64\u53ef\u5206\u89e3\u4e3a A=Q\\Lambda Q^{-1}= Q\\Lambda Q \u5176\u4e2dQ\u4e3a\u6b63\u4ea4\u9635 (\u77e9\u9635A\u7684 \u5bf9\u79f0\u5bf9\u89d2\u5316\u5206\u89e3)</li> </ul> </li> <li>\u5947\u5f02\u503c\u5206\u89e3 A=P\\Sigma Q<ul> <li>\u8fd9\u91cc\u7684P\u548cQ\u5206\u522b\u662f\u5de6\u5947\u5f02\u5411\u91cf, \u5206\u522b\u662f AA^T=P\\Lambda_1 P^T, A^TA=Q\\Lambda_2 Q^T, \u8fd9\u91cc\u4e24\u4e2a\u7279\u5f81\u503c\u5bf9\u89d2\u9635\u4e2d, \u975e\u96f6\u7279\u5f81\u503c\u76f8\u540c (\u6ce8\u610f\u5230 AB \u548c BA \u7684\u7279\u5f81\u503c\u76f8\u540c)</li> <li>\u5947\u5f02\u503c\u548c\u7279\u5f81\u503c\u5173\u7cfb: AA^T=P\\Sigma^2 P^T, \u56e0\u6b64\u6709 \\Sigma^2=\\Lambda_1, \u4e5f\u5373\u5947\u5f02\u503c\u662f AA^T \u7684\u7279\u5f81\u503c\u7684\u5e73\u65b9\u6839 (\u6ce8\u610f AA^T \u4e00\u5b9a\u662f\u6b63\u5b9a\u7684)</li> </ul> </li> <li>\u9644: \u300c\u6b63\u5b9a\u9635\u300d\u662f\u5728\u5b9e\u5bf9\u79f0\u9635\u7684\u57fa\u7840\u4e0a\u5b9a\u4e49\u7684</li> </ul>"},{"location":"stat/ASL-note1/#eigen-decomposition-square-matrix","title":"Eigen decomposition (square matrix)","text":"<ul> <li>A: eigenvalues \\lambda_{1}, \\ldots, \\lambda_{k}, eigenvectors \\nu_{1}, \\ldots, \\nu_{k}</li> <li>Let D \\equiv\\left[\\begin{array}{c}\\lambda_{1}, 0, \\ldots, 0 \\\\ 0, \\lambda_{2}, \\ldots, 0 \\\\ \\ldots, \\ldots, \\ldots, \\ldots \\\\ 0,0, \\ldots, \\lambda_{k}\\end{array}\\right], P \\equiv\\left[\\nu_{1}, \\nu_{2}, \\ldots, \\nu_{k}\\right]</li> <li>A=P D P^{-1}, A^{2}=P D^{2} P^{-1}, \\ldots, A^{n}=P D^{n} P^{-1}</li> </ul>"},{"location":"stat/ASL-note1/#singular-value-decomposition-any-matrix-m-times-nm-times-n","title":"Singular value decomposition (any matrix m \\times n )","text":"<ul> <li>A=U \\Sigma V^{\\top}, where U_{m \\times n}, \\Sigma_{n \\times n} and V_{n \\times n}</li> <li>U is orthonormal and span the column space of A,</li> <li>\\Sigma is diagonal with singular values of A</li> <li>V has eigen vectors of A^{\\top} A in the column</li> </ul> <p>\u4e5f\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f:</p> <ul> <li>U \\in \\mathbb{R}^{m \\times m} orthonormal, U U^{\\top}=I</li> <li>V \\in \\mathbb{R}^{n \\times n} orthonormal, V V^{\\top}=I</li> <li>\\Sigma \\in \\mathbb{R}^{m \\times n} rectangular diagonal, \\Sigma=\\operatorname{diag}\\left(\\sigma_{1}, \\sigma_{2}, \\ldots, \\sigma_{p}\\right) with \\sigma_{1} \\geq \\sigma_{2} \\geq \\ldots \\geq \\sigma_{p} \\geq 0, p=\\min (m, n)</li> <li>( U : left singular vector, V : right singular vector, \\sigma \u2018s: singular values)</li> </ul> <p>Theorem: \u7ed9\u5b9a\u4e00\u4e2a\u5b9e\u6570\u77e9\u9635, \u603b\u80fd\u627e\u5230\u5176 SVD \u5206\u89e3, \u6ee1\u8db3 \\Sigma \u4e3a\u5bf9\u89d2\u9635\u5e76\u4e14\u5bf9\u89d2\u7ebf\u5143\u7d20\u975e\u8d1f. (Proof is not required) If A \\in \\mathbb{R}^{m \\times n} is a real matrix, \\exists orthonormal matrix U \\in \\mathbb{R}^{m \\times m}, orthornormal matrix V \\in \\mathbb{R}^{n \\times n} and rectangular diagonal matrix \\Sigma \\in \\mathbb{R}^{m \\times n} with descending and non-negative diagonal elements, such that</p>  A=U \\Sigma V^{\\top}  <p></p>"},{"location":"stat/ASL-note1/#compact-svd","title":"Compact SVD","text":"<p>If A \\in \\mathbb{R}^{m \\times n} is a real matrix with \\operatorname{rank}(A)=r \\leq \\min (m, n), compact SVD:</p>  A=U_{r} \\Sigma_{r} V_{r}^{\\top}  <p>U_{r} \\in \\mathbb{R}^{m \\times r}: first r columns of U \\in \\mathbb{R}^{m \\times m} V_{r} \\in \\mathbb{R}^{n \\times r}: first r columns of V \\in \\mathbb{R}^{n \\times n} \\Sigma_{r} \\in \\mathbb{R}^{r \\times r}: first r diagonal elements of \\Sigma \\in \\mathbb{R}^{m \\times n} \\operatorname{rank}\\left(\\Sigma_{r}\\right)=\\operatorname{rank}(A)</p>"},{"location":"stat/ASL-note1/#truncated-svd","title":"Truncated SVD","text":"<p>If A \\in \\mathbb{R}^{m \\times n} is a real matrix with \\operatorname{rank}(A)=r \\leq \\min (m, n), 0&lt;k&lt;r, truncated SVD:</p>  A \\approx U_{k} \\Sigma_{k} V_{k}^{\\top}  <p>U_{k} \\in \\mathbb{R}^{m \\times k} : first k columns of U \\in \\mathbb{R}^{m \\times m} V_{k} \\in \\mathbb{R}^{n \\times k} : first k columns of V \\in \\mathbb{R}^{n \\times n} \\Sigma_{k} \\in \\mathbb{R}^{k \\times k}: first k diagonal elements of \\Sigma \\in \\mathbb{R}^{m \\times n} \\operatorname{rank}\\left(\\Sigma_{k}\\right)&lt;\\operatorname{rank}(A)</p>"},{"location":"stat/ASL-note1/#geometry-of-svd","title":"Geometry of SVD","text":"<p>A \\in \\mathbb{R}^{m \\times n}: a linear transformation from \\mathbb{R}^{n} to \\mathbb{R}^{m}</p>  T: \\quad x \\rightarrow A x \\quad\\left(U \\Sigma V^{\\top} x\\right)  <ul> <li>x \\in \\mathbb{R}^{n}, A x \\in \\mathbb{R}^{m}</li> <li>A linear transformation can be decomposed into 3 steps: rotation, stretch/scale, rotation again<ul> <li>coordinates rotated by V^{\\top} (orthonormal basis in \\mathbb{R}^{n} )</li> <li>coordinates stretched or scaled by \\Sigma\\left(\\sigma_{1}, \\sigma_{2}, \\ldots, \\sigma_{n}\\right)</li> <li>coordinates rotated by U (orthonormal basis in \\mathbb{R}^{m} )</li> </ul> </li> </ul> <p></p>"},{"location":"stat/ASL-note1/#characteristics-of-svd","title":"Characteristics of SVD","text":"<ul> <li>\\begin{aligned} A^{\\top} A &amp;=\\left(U \\Sigma V^{\\top}\\right)^{\\top}\\left(U \\Sigma V^{\\top}\\right)=V\\left(\\Sigma^{\\top} \\Sigma\\right) V^{\\top}, \\\\ A A^{\\top} &amp;=\\left(U \\Sigma V^{\\top}\\right)\\left(U \\Sigma V^{\\top}\\right)^{\\top}=U\\left(\\Sigma \\Sigma^{\\top}\\right) U^{\\top} \\end{aligned}</li> <li>A V=U \\Sigma U^{\\top} V=U \\Sigma, i.e., A \\nu_{j}=\\sigma_{j} \\mu_{j}, j=1,2, \\ldots, n</li> <li>A^{\\top} U=V \\Sigma^{\\top}, i.e., A^{\\top} \\mu_{j}=\\sigma_{j} \\nu_{j}, j=1,2, \\ldots, n and A^{\\top} \\mu_{j}=0, j=n+1, n+2, \\ldots, m</li> <li>\\sigma_{1}, \\sigma_{2}, \\ldots, \\sigma_{n} is unique, but U and V^{\\top} is not \u6ce8\u610f\u5230, \u5947\u5f02\u5411\u91cf\u662f\u4e0d\u552f\u4e00\u7684</li> <li>\\operatorname{rank}(A)=\\operatorname{rank}(\\Sigma)=\\mathbb{I}\\left(\\sigma_{i}&gt;0\\right)</li> </ul>"},{"location":"stat/ASL-note1/#matrix-approximation-and-svd","title":"Matrix Approximation and SVD","text":"<p>SVD\u548c\u77e9\u9635\u8fd1\u4f3c: \u5bf9\u4e8e\u4e00\u4e2a\u77e9\u9635A, \u8981\u6c42\u5176\u5728F\u8303\u6570\u610f\u4e49\u4e0b\u7684 rank-k \u7684\u8fd1\u4f3c, \u8fd9\u79cd\u8fd1\u4f3c\u7684\u4e0b\u754c\u4e3a \\left(\\sigma_{k+1}^{2}+\\sigma_{k+2}^{2}+\\ldots+\\sigma_{n}^{2}\\right)^{\\frac{1}{2}}, \u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7SVD\u7684\u524d k \u4e2a\u5947\u5f02\u503c\u7b97\u51fa\u6765.</p> <p>A=\\left[a_{i j}\\right]_{m \\times n} with \\|A\\|_{F}=\\left(\\sum_{i=1}^{m} \\sum_{j=1}^{n}\\left(a_{i j}\\right)^{2}\\right)^{\\frac{1}{2}}=\\left(\\sigma_{1}^{2}+\\sigma_{2}^{2}+\\ldots+\\sigma_{n}^{2}\\right)^{\\frac{1}{2}}, if \\operatorname{rank}(A)=r and A=U \\Sigma V^{\\top}, denote \\mathcal{M} the set of all matrix in \\mathbb{R}^{m \\times n} with rank at most k, 0&lt;k&lt;r, if X with \\operatorname{ran} k(X)=k satisfies</p>  \\|A-X\\|_{F}=\\min_{S \\in \\mathcal{M}}\\|A-S\\|_{F}  <p>then</p>  \\|A-X\\|_{F}=\\left(\\sigma_{k+1}^{2}+\\sigma_{k+2}^{2}+\\ldots+\\sigma_{n}^{2}\\right)^{\\frac{1}{2}}  <p>Specifically, if A^{\\prime}=U \\Sigma^{\\prime} V^{\\top}, where \\Sigma^{\\prime}=\\left\\{\\begin{array}{cc}\\Sigma_{k} &amp; 0 \\\\ 0 &amp; 0\\end{array}\\right\\}, then</p>  \\left\\|A-A^{\\prime}\\right\\|_{F}=\\left(\\sigma_{k+1}^{2}+\\sigma_{k+2}^{2}+\\ldots+\\sigma_{n}^{2}\\right)^{\\frac{1}{2}}=\\min _{S \\in \\mathcal{M}}\\|A-S\\|_{F}"},{"location":"stat/ASL-note1/#pca-principle-component-analysis","title":"PCA (Principle Component Analysis)","text":"<p>\u53c2\u89c1 PCA\u4e3b\u6210\u5206\u5206\u6790</p> <ul> <li>\u9996\u5148\u5bf9\u7ed9\u5b9a\u6570\u636e\u8fdb\u884c\u89c4\u8303\u5316\uff0c\u4f7f\u5f97\u6570\u636e\u6bcf\u4e00\u53d8\u91cf\u7684\u5e73\u5747\u503c\u4e3a0\uff0c\u65b9\u5dee\u4e3a1</li> <li>\u5bf9\u6570\u636e\u8fdb\u884c\u6b63\u4ea4\u53d8\u6362\u3002\u539f\u6765\u7531\u7ebf\u6027\u76f8\u5173\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\uff0c\u901a\u8fc7\u6b63\u4ea4\u53d8\u6362\u53d8\u6210\u7531\u82e5\u5e72\u4e2a\u7ebf\u6027\u65e0\u5173\u7684\u65b0\u53d8\u91cf\u8868\u793a\u7684\u6570\u636e\u3002\u65b0\u53d8\u91cf\u662f\u53ef\u80fd\u7684\u6b63\u4ea4\u53d8\u6362\u4e2d\u53d8\u91cf\u7684\u65b9\u5dee\u7684\u548c(\u4fe1\u606f\u4fdd\u5b58)\u6700\u5927\u7684\uff0c\u65b9\u5dee\u8868\u793a\u5728\u65b0\u53d8\u91cf\u4e0a\u7684\u4fe1\u606f\u7684\u5927\u5c0f\u3002</li> </ul> <p>\u6570\u636e\u96c6\u5408\u4e2d\u7684\u6837\u672c\u7531\u5b9e\u6570\u7a7a\u95f4(\u6b63\u4ea4\u5750\u6807\u7cfb)\u4e2d\u7684\u70b9\u8868\u793a\uff0c\u7a7a\u95f4\u7684\u4e00\u4e2a\u5750\u6807\u8f74\u8868\u793a\u4e00\u4e2a\u53d8\u91cf\uff0c\u89c4\u8303\u5316\u5904\u7406\u540e\u5f97\u5230\u7684\u6570\u636e\u5206\u5e03\u5728\u539f\u70b9\u9644\u8fd1\u3002\u5bf9\u539f\u5750\u6807\u7cfb\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u4e3b\u6210\u5206\u5206\u6790\u7b49\u4ef7\u4e8e\u8fdb\u884c\u5750\u6807\u7cfb\u65cb\u8f6c\u53d8\u6362\uff0c\u5c06\u6570\u636e\u6295\u5f71\u5230\u65b0\u5750\u6807\u7cfb\u7684\u5750\u6807\u8f74\u4e0a\uff1b\u65b0\u5750\u6807\u7cfb\u7684\u7b2c\u4e00\u5750\u6807\u8f74\u3001\u7b2c\u4e8c\u5750\u6807\u8f74\u7b49\u5206\u522b\u8868\u793a\u7b2c\u4e00\u4e3b\u6210\u5206\u3001\u7b2c\u4e8c\u4e3b\u6210\u5206\u7b49\u3002\u6570\u636e\u5728\u6bcf\u4e00\u8f74\u4e0a\u7684\u5750\u6807\u503c\u7684\u5e73\u65b9\u8868\u793a\u76f8\u5e94\u53d8\u91cf\u7684\u65b9\u5dee\uff1b\u5e76\u4e14\uff0c\u8fd9\u4e2a\u5750\u6807\u7cfb\u662f\u5728\u6240\u6709\u53ef\u80fd\u7684\u65b0\u7684\u5750\u6807\u7cfb\u4e2d\uff0c\u5750\u6807\u8f74\u4e0a\u7684\u65b9\u5dee\u7684\u548c\u6700\u5927\u7684\u3002</p> <p></p> <ul> <li>\u5728\u6570\u636e\u603b\u4f53\u4e0a\u8fdb\u884c\u4e3b\u6210\u5206\u5206\u6790\u79f0\u4e3a\u603b\u4f53\u4e3b\u6210\u5206\u5206\u6790\u3002</li> <li>\u5728\u6709\u9650\u6837\u672c\u4e0a\u8fdb\u884c\u4e3b\u6210\u5206\u5206\u6790\u79f0\u4e3a\u6837\u672c\u4e3b\u6210\u5206\u5206\u6790\u3002</li> </ul>"},{"location":"stat/ASL-note1/#population-pca","title":"Population PCA","text":"<p>Suppose x=\\left(x_{1}, x_{2}, \\ldots, x_{m}\\right)^{\\top} is a \\mathrm{m}-dim random vector, with</p>  \\begin{aligned} &amp;\\mu=E(x)=\\left(\\mu_{1}, \\mu_{2}, \\ldots, \\mu_{m}\\right)^{\\top} \\\\ &amp;\\Sigma=\\operatorname{cov}(x, x)=E\\left[(x-\\mu)(x-\\mu)^{\\top}\\right] \\end{aligned}  <p>Consider a linear transformation from x to y=\\left(y_{1}, y_{2}, \\ldots, y_{m}\\right)^{\\top}, with \\alpha_{i}^{\\top}=\\left(\\alpha_{1 i}, \\alpha_{2 i}, \\ldots, \\alpha_{m i}\\right), i=1,2, \\ldots, m</p>  y_{i}=\\alpha_{i}^{\\top} x=\\alpha_{1 i} x_{1}+\\alpha_{2 i} x_{2}+\\ldots+\\alpha_{m i} x_{m}  <p>Then we know that</p> <ul> <li>E\\left(y_{i}\\right)=\\alpha_{i}^{\\top} \\mu</li> <li>\\operatorname{var}\\left(y_{i}\\right)=\\alpha_{i}^{\\top} \\Sigma \\alpha_{i}</li> <li>\\operatorname{cov}\\left(y_{i}, y_{j}\\right)=\\alpha_{i}^{\\top} \\Sigma \\alpha_{j}</li> </ul> <p>\u95ee\u9898\u5b9a\u4e49:</p> <p>Given a linear transformation</p>  y_{i}=\\alpha_{i}^{\\top} x=\\alpha_{1 i} x_{1}+\\alpha_{2 i} x_{2}+\\ldots+\\alpha_{m i} x_{m}  <p>if</p> <ul> <li>\\alpha_{i}^{\\top} \\alpha_{i}=1</li> <li>\\operatorname{cov}\\left(y_{i}, y_{j}\\right)=0 for i \\neq j</li> <li>y_{1} has the largest variance among all linear transformations of x; y_{2} has the largest variance among all linear transformations that are uncorrelated with y_{1}, \\ldots</li> </ul> <p>Then, we call y_{1}, y_{2}, \\ldots, y_{m} the first, second, \u2026, m-th principle component of x.</p>"},{"location":"stat/ASL-note1/#theorem-of-pca","title":"Theorem of PCA","text":"<p>\u5b9a\u7406: \u5bf9\u4e8e\u968f\u673a\u5411\u91cfx\u6765\u8bf4, \u5176\u7b2c k \u4e2aPC\u6b63\u662f\u7531\u5176\u534f\u65b9\u5dee\u77e9\u9635\u7684\u7b2c k \u4e2a\u5947\u5f02\u5411\u91cf (\u5bf9\u79f0\u534a\u6b63\u5b9a\u9635\u7684\u7279\u5f81\u548c\u5947\u5f02\u503c\u5206\u89e3\u5e94\u8be5\u662f\u4e00\u6837\u7684), \u5e76\u4e14\u8fd9\u4e2a PC \u7684\u65b9\u5dee\u6b63\u662f\u7b2c k \u4e2a\u5947\u5f02\u503c(\u7279\u5f81\u503c).</p> <p>Suppose x is m-dim random variable with covariance matrix \\Sigma, \\lambda_{1} \\geq \\lambda_{2} \\geq \\ldots \\geq \\lambda_{m} \\geq 0 are the eigenvalues of \\Sigma, and \\alpha_{1}, \\alpha_{2}, \\ldots, \\alpha_{m} are the corresponding eigenvectors, then the k-th principle component of x is given by</p>  y_{k}=\\alpha_{k}^{\\top} x=\\alpha_{1 k} x_{1}+\\alpha_{2 k} x_{2}+\\ldots+\\alpha_{m k} x_{m}  <p>for k=1,2, \\ldots, m, and the variance of y_{k} is given by (the k-th eigen value of \\Sigma )</p>  \\operatorname{var}\\left(y_{k}\\right)=\\alpha_{k}^{\\top} \\Sigma \\alpha_{k}=\\lambda_{k}  <p>\u82e5\u7279\u5f81\u503c\u6709\u91cd\u6839\uff0c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf\u7ec4\u6210m\u7ef4\u7a7a\u95f4 \\mathcal{R}^m \u7684\u4e00\u4e2a\u5b50\u7a7a\u95f4\uff0c\u5b50\u7a7a\u95f4\u7684\u7ef4\u6570\u7b49\u4e8e\u91cd\u6839\u6570\uff0c\u5728\u5b50\u7a7a\u95f4\u4efb\u53d6\u4e00\u4e2a\u6b63\u4ea4\u5750\u6807\u7cfb\uff0c\u8fd9\u4e2a\u5750\u6807\u7cfb\u7684\u5355\u4f4d\u5411\u91cf\u5c31\u53ef\u4f5c\u4e3a\u7279\u5f81\u5411\u91cf\u3002\u8fd9\u662f\u5750\u6807\u7cfb\u53d6\u6cd5\u4e0d\u552f\u4e00\u3002</p> <p>[m\u7ef4\u968f\u673a\u53d8\u91cf y=(y_1,y_2,\u2026,y_m)^T \u7684\u5206\u91cf\u4f9d\u6b21\u662fx \u7684\u7b2c\u4e00\u4e3b\u6210\u5206\u5230\u7b2cm\u4e3b\u6210\u5206\u7684\u5145\u8981\u6761\u4ef6\u662f]</p> <p>The components of m-dim random variable y=\\left(y_{1}, y_{2}, \\ldots, y_{m}\\right)^{\\top} are the first, second, \u2026, m-th principle component of x iff</p> <ul> <li>y=A^{\\top} x, where A is orthogonal with A=\\left\\{\\begin{array}{cccc}a_{11} &amp; a_{12} &amp; \\ldots &amp; a_{1 m} \\\\ a_{21} &amp; a_{22} &amp; \\ldots &amp; a_{2 m} \\\\ \\ldots &amp; \\ldots &amp; \\ldots &amp; \\ldots \\\\ a_{m 1} &amp; a_{m 2} &amp; \\ldots &amp; a_{m m}\\end{array}\\right\\}</li> <li>\\operatorname{cov}(y)=\\Lambda=\\operatorname{diag}\\left(\\lambda_{1}, \\lambda_{2}, \\ldots, \\lambda_{m}\\right), with \\lambda_{1} \\geq \\lambda_{2} \\geq \\ldots \\geq \\lambda_{m}</li> <li>\\lambda_{k} is the k-th eigenvalue of \\Sigma_{1}, \\alpha_{k} is the corresponding eigenvector, for k=1,2, \\ldots, m</li> </ul>"},{"location":"stat/ASL-note1/#characteristics-of-pca","title":"Characteristics of PCA","text":"<ul> <li>\\operatorname{cov}(y)=\\Lambda=\\operatorname{diag}\\left(\\lambda_{1}, \\lambda_{2}, \\ldots, \\lambda_{m}\\right) \u5404\u4e2aPC\u7684\u65b9\u5dee\u5c31\u662f\u534f\u65b9\u5dee\u9635\u7684\u5404\u4e2a\u5947\u5f02\u503c/\u7279\u5f81\u503c</li> <li>\\sum_{i=1}^{m} \\lambda_{i}=\\sum_{i=1}^{m} \\sigma_{i i}, where \\sigma_{i i} is the variance of x_{i}  \u603b\u4f53\u4e3b\u6210\u5206y\u7684\u65b9\u5dee\u4e4b\u548c\u7b49\u4e8e\u968f\u673a\u53d8\u91cfx\u7684\u65b9\u5dee\u4e4b\u548c<ul> <li>\\sum_{i=1}^{m} \\operatorname{var}\\left(x_{i}\\right) = \\operatorname{tr}\\left(\\Sigma^{\\top}\\right)=\\operatorname{tr}\\left(A \\Lambda A^{\\top}\\right)=\\operatorname{tr}\\left(A^{\\top} \\Lambda A\\right) =\\operatorname{tr}(\\Lambda)=\\sum_{i=1}^{m} \\lambda_{i}=\\sum_{i=1}^{m} \\operatorname{var}\\left(y_{i}\\right)</li> </ul> </li> <li>factor loading: correlation coefficient between y_{k} and x_{i}, \\rho\\left(y_{k}, x_{i}\\right)=\\frac{\\sqrt{\\lambda_{k}} \\alpha_{i k}}{\\sqrt{\\sigma_{i i}}} \u7b2ck\u4e2a\u4e3b\u6210\u5206 y_k \u4e0e\u53d8\u91cfxi\u7684\u76f8\u5173\u7cfb\u6570 \u03c1(y_k,x_i) \u79f0\u4e3a\u56e0\u5b50\u8d1f\u8377\u91cf(factor loading)\uff0c\u5b83\u8868\u793a\u7b2ck\u4e2a\u4e3b\u6210\u5206 y_k \u4e0e\u53d8\u91cf x_i \u7684\u76f8\u5173\u6027<ul> <li>\u6ce8\u610f\u5230 \\operatorname{cov}(y_k, x_i) = \\operatorname{cov}\\left(\\alpha_{k}^{\\top} x, e_{i}^{\\top} x\\right)=\\alpha_{k}^{\\top} \\Sigma e_{i}=e_{i}^{\\top} \\Sigma \\alpha_{k}=\\lambda_{k} e_{i}^{\\top} \\alpha_{k}=\\lambda_{k} \\alpha_{i k}</li> </ul> </li> <li>sum of factor loading for y_{k} over x: \\sum_{i=1}^{m} \\sigma_{i i} \\rho^{2}\\left(y_{k}, x_{i}\\right)=\\lambda_{k} \u7b2ck\u4e2a\u4e3b\u6210\u5206 y_k \u4e0em\u4e2a\u53d8\u91cf\u7684\u56e0\u5b50\u8d1f\u8377\u91cf<ul> <li>\\sum_{i=1}^{m} \\sigma_{i i} \\rho^{2}\\left(y_{k}, x_{i}\\right)=\\sum_{i=1}^{m} \\lambda_{k} \\alpha_{i j}^{2}=\\lambda_{k} \\alpha_{k}^{\\top} \\alpha_{k}=\\lambda_{k}</li> <li>\u4e5f\u5373, \u4ee5x\u7684\u5404\u4e2a\u5206\u91cf\u7684\u65b9\u5dee\u4f5c\u4e3a\u7cfb\u6570, \u53ef\u4ee5\u5f97\u5230\u7b2c k \u4e2aPC\u7684\u65b9\u5dee\u548c\u56e0\u5b50\u8d1f\u8377\u91cf\u7684\u5173\u7cfb</li> </ul> </li> <li>sum of factor loading for x_{i} over y: \\sum_{k=1}^{m} \\rho^{2}\\left(y_{k}, x_{i}\\right)=1<ul> <li>m\u4e2a\u4e3b\u6210\u5206\u4e0e\u7b2ci\u4e2a\u53d8\u91cf x_i \u7684\u56e0\u5b50\u8d1f\u8377\u91cf, \u4e5f\u5373\u6240\u6709\u7684\u4e3b\u6210\u5206\u53ef\u4ee5\u89e3\u91ca x_i \u7684\u5168\u90e8\u65b9\u5dee</li> </ul> </li> </ul> <p>How many principle components to choose?</p> <ul> <li>variance contribution of y_{k}: \\eta_{k}=\\frac{\\lambda_{k}}{\\sum_{i=1}^{m} \\lambda_{i}}</li> <li>cumulative variance contribution of y_{1}, y_{2}, \\ldots, y_{k}: \\frac{\\sum_{i=1}^{k} \\lambda_{i}}{\\sum_{i=1}^{m} \\lambda_{i}}<ul> <li>\u901a\u5e38\u53d6k\u4f7f\u5f97\u7d2f\u8ba1\u65b9\u5dee\u8d21\u732e\u7387\u8fbe\u5230\u67d0\u4e2a\u9608\u503c\uff0c\u6bd4\u598270%\uff5e80%\u4ee5\u4e0a\u3002\u7d2f\u8ba1\u65b9\u5dee\u8d21\u732e\u7387\u53cd\u6620\u4e86\u4e3b\u6210\u5206\u4fdd\u7559\u4fe1\u606f\u7684\u6bd4\u4f8b\u3002</li> <li>usually choose k such that \\frac{\\sum_{i=1}^{k} \\lambda_{i}}{\\sum_{i=1}^{m} \\lambda_{i}}&gt;70 \\% or 80 \\%</li> <li>cumulative variance contribution reflects the contribution of y_{1}, \\ldots, y_{k} to x but not specifically to x_{i}</li> </ul> </li> <li>contribution to x_{i}: \\nu_{i}=\\rho^{2}\\left(x_{i},\\left(y_{1}, \\ldots, y_{k}\\right)\\right)=\\sum_{j=1}^{k} \\frac{\\lambda_{j} \\alpha_{i j}^{2}}{\\sigma_{i i}}</li> </ul> <p>Note: normalize variables before PCA \u5728\u8fdb\u884cPCA\u4e4b\u524d\u9700\u8981\u5148\u8fdb\u884c\u5f52\u4e00\u5316</p> <ul> <li>\u5728\u5b9e\u9645\u95ee\u9898\u4e2d\uff0c\u4e0d\u540c\u53d8\u91cf\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u91cf\u7eb2\uff0c\u76f4\u63a5\u6c42\u4e3b\u6210\u5206\u6709\u65f6\u4f1a\u4ea7\u751f\u4e0d\u5408\u7406\u7684\u7ed3\u679c\u3002\u4e3a\u4e86\u6d88\u9664\u8fd9\u4e2a\u5f71\u54cd\uff0c\u9700\u8981\u5bf9\u5404\u4e2a\u968f\u673a\u53d8\u91cf\u5b9e\u65bd\u89c4\u8303\u5316\uff0c\u4f7f\u5176\u5747\u503c\u4e3a0\uff0c\u65b9\u5dee\u4e3a1.<ul> <li>\u663e\u7136\uff0c\u89c4\u8303\u5316\u968f\u673a\u53d8\u91cf\u7684\u534f\u65b9\u5dee\u77e9\u9635\u5c31\u662f\u76f8\u5173\u77e9\u9635R\u3002</li> <li>\u5bf9\u7167\u603b\u4f53\u4e3b\u6210\u5206\u7684\u6027\u8d28, \u53ef\u4ee5\u5f97\u5230\u89c4\u8303\u5316\u968f\u673a\u53d8\u91cf\u7684\u603b\u4f53\u4e3b\u6210\u5206\u5206\u6790\u7684\u7c7b\u4f3c\u6027\u8d28</li> <li>\u6ce8\u610f\u5230\u6b64\u65f6\u7684 \\sigma_{ii}=1</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#pca","title":"PCA \u4f8b\u5b50","text":"<ul> <li>\u5bf9\u4e8e correlation matrix \u8fdb\u884c\u7279\u5f81\u5206\u89e3</li> <li>\u6839\u636e\u56e0\u5b50\u8d1f\u8377\u91cf\u9009\u53d6\u5408\u9002\u7684 k, \u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf\u5c31\u662f PC \u7684\u6743\u91cd</li> <li>\u7136\u540e\u8fd8\u53ef\u4ee5\u8ba1\u7b97\u5bf9\u4e8ex\u7684\u5404\u5206\u91cf\u7684 Factor loading</li> </ul>"},{"location":"stat/ASL-note1/#linear-methods-for-classification","title":"Linear Methods for Classification","text":""},{"location":"stat/ASL-note1/#linear-regression-of-an-indicator-matrix","title":"Linear Regression of an Indicator Matrix","text":"<p>\u5c31\u662f\u7528\u7ebf\u6027\u56de\u5f52\u6765\u89e3\u51b3\u5206\u7c7b\u95ee\u9898. \u901a\u8fc7\u5bf9\u4e8e 0-1 \u6307\u6807\u8fdb\u884c\u56de\u5f52, \u5f97\u5230\u5404\u4e2a\u7c7b\u522b\u4e0b\u7684\u6fc0\u6d3b\u503c, \u7136\u540e\u53d6\u5176\u4e2d\u6700\u5927\u7684(\u6216\u8005\u5f52\u4e00\u5316\u4e3a\u5206\u5e03).</p> <p>Training data \\left\\{\\left(x_{i}, g_{i}\\right)\\right\\}_{i=1}^{n}, where each x_{i} \\in \\mathbb{R}^{p} and g_{i} \\in\\{1, \\ldots, K\\} For each k construct a linear discriminant \\delta_{k}(x) via:</p> <ol> <li>For i=1, \\ldots, n, set</li> </ol>  y_{i k}= \\begin{cases}0, &amp; \\text { if } g_{i} \\neq k \\\\ 1, &amp; \\text { if } g_{i}=k\\end{cases}  <ol> <li>Compute \\left(\\hat{\\beta}_{0 k}, \\hat{\\beta}_{k}\\right)=\\operatorname{argmin}_{\\beta_{0 k}, \\beta_{k}} \\sum_{i=1}^{n}\\left(y_{i k}-\\beta_{0 k}-\\beta_{k}^{\\top} x_{i}\\right)^{2}</li> <li>Define \\delta_{k}(x)=\\hat{\\beta}_{0 k}+\\hat{\\beta}_{k}^{\\top} x Classify a new point x with G(x)=\\operatorname{argmax}_{k} \\delta_{k}(x)</li> </ol> <p>\u53cd\u601d: \u8fd9\u91cc\u662f\u7528\u6765\u4f30\u8ba1\u6761\u4ef6\u6982\u7387 E(Y_k\u2223 X = x) = Pr(G = k \u2223 X = x)</p> <ul> <li>\u8fd9\u91cc\u7684\u8fd1\u4f3c\u597d\u5417?</li> <li>\u6bd4\u5982\u7ebf\u6027\u56de\u5f52\u7684\u8f93\u51fa\u8303\u56f4\u4e0d\u5728 [0, 1] \u4e2d</li> </ul> <p>\u4e0b\u9762\u7ed9\u4e86\u4e00\u4e2a\u53cd\u4f8b, \u6ce8\u610f\u5230\u7531\u4e8e\u7ebf\u6027\u56de\u5f52\u5f97\u5230\u7684\u7ed3\u679c\u4e0d\u80fd\u5f88\u597d\u5f97\u8fd1\u4f3c\u540e\u9a8c\u5206\u5e03, \u4f1a\u5c4f\u853d\u6389\u4e00\u4e9b\u7c7b\u522b.</p> <p></p> <p>\u4e0b\u9762\u7684\u56fe\u662f\u5404\u4e2a\u7ebf\u6027\u56de\u5f52\u7684\u8f93\u51fa\u503c(\u5750\u6807\u8fdb\u884c\u4e86\u53d8\u6362), \u53ef\u4ee5\u770b\u5230\u7b2c\u4e8c\u6ca1\u6709\u663e\u8457\u7684\u6982\u7387. \u800c\u53f3\u56fe\u52a0\u5165\u4e86\u4e8c\u6b21\u9879, \u6548\u679c\u5f97\u5230\u4e86\u63d0\u5347. \u7136\u800c\u8fd9\u53ea\u662f\u7c7b\u522b\u6570 3 \u7684\u60c5\u51b5, \u5bf9\u4e8e k\u5206\u7c7b\u800c\u8a00\u4f1a\u51fa\u73b0\u4ea4\u53c9\u9879\u6307\u6570\u589e\u957f\u7684\u60c5\u51b5.</p> <p></p>"},{"location":"stat/ASL-note1/#linear-discriminant-analysis-lda","title":"Linear Discriminant Analysis (LDA)","text":"<p>Model each f_{k}(x) as a multivariate Gaussian</p>  f_{k}(x)=\\frac{1}{(2 \\pi)^{p / 2} \\sqrt{\\left|\\Sigma_{k}\\right|}} \\exp \\left\\{\\frac{1}{2}\\left(x-\\mu_{k}\\right)^{\\top} \\Sigma_{k}^{-1}\\left(x-\\mu_{k}\\right)\\right\\}  <p>Linear Discriminant Analysis (LDA) arises in the special case when</p>  \\Sigma_{k}=\\Sigma \\text { for all } k  <p>\u8003\u8651\u4e24\u4e2a\u7c7b\u522b k\u548cl</p> <p>\\log \\frac{\\operatorname{Pr}(G=k \\mid X=x)}{\\operatorname{Pr}(G=l \\mid X=x)}=\\log \\frac{f_{k}(x)}{f_{l}(x)}+\\log \\frac{\\pi_{k}}{\\pi_{l}}= \\log \\frac{\\pi_{k}}{\\pi_{l}}-\\frac{1}{2}\\left(\\mu_{k}+\\mu_{l}\\right)^{\\top} \\Sigma^{-1}\\left(\\mu_{k}-\\mu_{l}\\right)+x^{\\top} \\Sigma^{-1}\\left(\\mu_{k}-\\mu_{l}\\right) The equal covariance matrices allow x^{\\top} \\Sigma_{k}^{-1} x and x^{\\top} \\Sigma_{l}^{-1} x cancel out</p> <p>\u4e0a\u5f0f\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7c7b\u522b\u7684\u5206\u7c7b\u8fb9\u754c. \u5b9e\u9645\u4e0a, \u5bf9\u4e8e\u4e00\u4e2a\u7c7b\u522b k, \u53ef\u4ee5\u7b97\u51fa\u4e00\u4e2a\u300c\u5206\u6570\u300d, \u5206\u7c7b\u5668\u7684\u8f93\u51fa\u5c31\u662f\u5206\u6570\u6700\u9ad8\u7684\u90a3\u4e00\u4e2a.</p> <p>From the log odds, we see that the linear discriminant functions</p>  \\delta_{k}(x)=x^{\\top} \\Sigma^{-1} \\mu_{k}-\\frac{1}{2} \\mu_{k}^{\\top} \\Sigma^{-1} \\mu_{k}+\\log \\pi_{k}  <p>are an equivalent description of the decision rule with</p>  G(x)=\\operatorname{argmax}_{k} \\delta_{k}(x)"},{"location":"stat/ASL-note1/#lda-practicalities","title":"LDA Practicalities","text":"<p>In practice we do not know the parameters of the Gaussian distributions, and will need to estimate them using our training data</p> <p>\u5b9e\u9645\u4e0a, \u6211\u4eec\u9700\u8981\u901a\u8fc7\u6570\u636e\u6765\u4f30\u8ba1\u4e0a\u9762\u7684\u6837\u672c\u5747\u503c\u548c\u534f\u65b9\u5dee\u77e9\u9635. (\u6ce8\u610f\u8fd9\u91cc\u662f\u300c\u591a\u5206\u7c7b\u300d\u7684\u6837\u672c\u65b9\u5dee, \u6240\u4ee5\u5206\u6bcd\u4e3a n-K?)</p> <p>Let n_{k} be the number of class k observations then</p>  \\begin{aligned} \\hat{\\pi}_{k} &amp;=\\frac{n_{k}}{n} \\\\ \\hat{\\mu}_{k} &amp;=\\sum_{g_{i}=k} \\frac{x_{i}}{n_{k}} \\\\ \\hat{\\Sigma} &amp;=\\sum_{k=1}^{K} \\sum_{g_{i}=k} \\frac{\\left(x_{i}-\\hat{\\mu}_{k}\\right)\\left(x_{i}-\\hat{\\mu}_{k}\\right)^{\\top}}{n-K} \\end{aligned}  <p>Note: for k=2 there is a simple correspondence between LDA and linear regression of indicator matrix, which is not true for k&gt;2.</p> <p></p>"},{"location":"stat/ASL-note1/#when-sigma_ksigma_k-not-equal-qda-quadratic-discriminant-analysis","title":"When \\Sigma_{k} Not Equal: QDA (Quadratic Discriminant Analysis)","text":"<p>LDA \u662f\u5047\u8bbe\u4e86\u5404\u7c7b\u522b\u6709\u76f8\u540c\u7684\u65b9\u5dee</p> <p>If the \\Sigma_{k} are not assumed to be equal, then the quadratic terms remain and we get quandratic discriminant functions Q D A</p>  \\delta_{k}(x)=-0.5 \\log \\left|\\Sigma_{k}\\right|-0.5\\left(x-\\mu_{k}\\right)^{\\top} \\Sigma_{k}^{-1}\\left(x-\\mu_{k}\\right)+\\log \\pi_{k}  <p>In this case, the decision boundary between classes are described by a quadratic equation \\left\\{x: \\delta_{k}(x)=\\delta_{l}(x)\\right\\}</p> <p></p>"},{"location":"stat/ASL-note1/#rda-regularized-discriminant-analysis","title":"RDA: Regularized Discriminant Analysis","text":"<p>\u5e73\u8861LDA\u548cQDA</p> <p>\\hat{\\Sigma}_{k}(\\alpha)=\\alpha \\hat{\\Sigma}_{k}+(1-\\alpha) \\hat{\\Sigma}, \\alpha \\in[0,1]</p> <ul> <li>\\hat{\\Sigma}_{k}(\\alpha) Regularized covariance matrices</li> <li>\\hat{\\Sigma}: pooled covariance matrix</li> </ul> <p>Can also replace \\hat{\\Sigma} by \\hat{\\Sigma}(\\gamma)=\\gamma \\hat{\\Sigma}+(1-\\gamma) \\hat{\\sigma}^{2} I, \\gamma \\in[0,1]</p> <p></p>"},{"location":"stat/ASL-note1/#computations-for-lda-qda","title":"Computations for LDA &amp; QDA","text":"<p>Diagonalizing \\hat{\\Sigma} or \\hat{\\Sigma}_{k} by eigen decomposition \\hat{\\Sigma}_{k}=U_{k} D_{k} U_{k}^{\\top}, where U_{k} is p \\times p orthornormal, and D_{k} is a diagonal matrix of positive eigenvalues d_{k l}. The ingredients for \\delta_{k}(x) are</p>  \\begin{aligned} &amp;(x-\\hat{\\mu}_{k})^{\\top} \\hat{\\Sigma}_{k}^{-1}\\left(x-\\hat{\\mu}_{k}\\right)=\\left[U_{k}^{\\top}\\left(x-\\hat{\\mu}_{k}\\right)\\right]^{\\top} D_{k}^{-1}\\left[U_{k}^{\\top}\\left(x-\\hat{\\mu}_{k}\\right)\\right] \\\\ &amp;\\log \\left|\\hat{\\Sigma}_{k}\\right|=\\sum_{l} \\log d_{k l} \\end{aligned}  <p>Therefore, LDA can be implemented by:</p> <ul> <li>Sphere the data with respect to the common covariance estimate \\hat{\\Sigma}: X^{\\star} \\leftarrow D^{-\\frac{1}{2}} U^{\\top} X, where \\hat{\\Sigma}=U D U^{\\top}. The common covariance estimate of X^{\\star} will now be the identity \u7403\u9762\u5316? \u4ece\u800c\u4f7f\u5f97\u53d8\u6362\u540e\u7684 X^* \u534f\u65b9\u5dee\u4e3a\u5355\u4f4d\u9635</li> <li>Classify to the closet class centroid in the transformed space, modulo the effect of the class prior probabilities \\pi_{k}</li> </ul>"},{"location":"stat/ASL-note1/#reduced-rank-lda","title":"Reduced Rank LDA","text":"<p>\u5bf9\u4e8e\u5728p\u7ef4\u7a7a\u95f4\u7684\u6570\u636e, K\u4e2a\u7c7b\u522b\u7684\u4e2d\u5fc3\u81f3\u591a\u5f20\u6210 K-1 \u7ef4\u5b50\u7a7a\u95f4; \u800c\u6211\u4eec\u5728\u8fdb\u884c\u5224\u5b9a\u7684\u65f6\u5019, \u5176\u5b9e\u770b\u7684\u662f\u5230\u8fd9\u4e9b\u7c7b\u522b\u4e2d\u5fc3\u7684\u8ddd\u79bb, \u56e0\u6b64\u5176\u5b9e\u53ef\u4ee5 \u964d\u7ef4 \u5230\u8fd9\u4e2a\u5b50\u7a7a\u95f4\u4e0a.</p> <ul> <li>\\mathrm{K} centroids in \\mathrm{p}-dimensional input space lie in an affine subspace of dimension \\leqslant K-1</li> <li>if p \\gg K, there is a big drop in dimension</li> <li>To locate the closest centroid can ignore the directions orthogonal to this subspace.</li> <li>Therefore, can project X^{*} onto this centroid-spanning subspace H_{K-1} and make comparisons there</li> <li>LDA thus performs dimensionality reduction and one need only consider the data in a subspace of dimension at most K-1.</li> </ul> <p>\u8fdb\u4e00\u6b65, What About a Subspace of Dim L&lt;K-1</p> <p>Which subspace of \\operatorname{dim} L&lt;K-1 should we project onto for optimal LDA?</p> <p>Finding the sequences of optimal subspaces for LDA involves:</p> <ul> <li>Compute the K \\times p matrix of class centroids M and the common covariance matrix W (for within-class covariance)</li> <li>Compute M^{*}=M W^{-\\frac{1}{2}}</li> <li>Compute B^{\\star}, the covariance matrix of M^{\\star} (B for between-class covariance), and its eigen-decomposition B^{\\star}=V^{\\star} D_{B} V^{* \\top}</li> <li>The columns v_{1}^{\\star} of V^{*} in sequence from first to last define the coordinates of the optimal subspaces.</li> <li>D_{\\text {th }} discriminant variable Z_{l}=v_{l}^{\\top} X, v_{l}=W^{-\\frac{1}{2}} v_{l}^{\\star}</li> </ul> <p>(\u770b\u4e0a\u53bb\u597d\u590d\u6742, \u300c\u4e3b\u8981\u601d\u60f3\u662f\u5148\u6c42 W^{-\\frac{1}{2}}BW^{-\\frac{1}{2}} \u7684\u7279\u5f81\u5411\u91cf v_l^*, \u5219 W^{-1}B \u7684\u7279\u5f81\u5411\u91cf\u4e3a W^{-\\frac{1}{2}}v_l^*\u300d, \u7ed3\u5408 Ex4.1 \u7684\u8bc1\u660e\u8fc7\u7a0b https://github.com/szcf-weiya/ESL-CN/issues/142)</p>"},{"location":"stat/ASL-note1/#fisher-criterion","title":"Fisher Criterion \u53e6\u4e00\u4e2a\u89d2\u5ea6","text":"<p>Fisher \u7684\u51c6\u5219: \u5bfb\u627e\u7ebf\u6027\u7ec4\u5408 Z = a^T X \u4f7f\u5f97\u7ec4\u95f4\u65b9\u5dee\u76f8\u5bf9\u4e8e\u7ec4\u5185\u65b9\u5dee\u6700\u5927\u5316\uff0e</p> <p></p> <ul> <li>W: pooled covariance about the means</li> <li>B: covariance of the class means</li> <li>Then for the projected data Z \u7ec4\u5185\u548c\u7ec4\u95f4\u65b9\u5dee<ul> <li>The between-class variance of Z is a^{\\top} B a</li> <li>The within-class variance of Z is a^{\\top} W a</li> </ul> </li> </ul> <p>\u8865\u5145: \u4e0b\u9762\u662f \u7ec4\u5185\u548c\u7ec4\u95f4\u65b9\u5dee \u7684\u5b9a\u4e49. B, W, T \u7684\u81ea\u7531\u5ea6\u5206\u522b\u4e3a K-1, N-K, N-1. \u6613\u8bc1 T=B+W</p> <p>\\begin{aligned} \\mathbf{B} &amp;=\\sum_{i=1}^{K} n_{i}\\left(\\bar{x}_{i}-\\bar{x}\\right)\\left(\\bar{x}_{i}-\\bar{x}\\right)^{\\prime} \\\\ \\mathbf{W} &amp;=\\sum_{i=1}^{K} \\sum_{j=1}^{n_{i}}\\left(x_{i j}-\\bar{x}_{i}\\right)\\left(x_{i j}-\\bar{x}_{i}\\right)^{\\prime} \\\\ \\mathbf{T} &amp;=\\sum_{i=1}^{K} \\sum_{j=1}^{n_{i}}\\left(x_{i j}-\\bar{x}\\right)\\left(x_{i j}-\\bar{x}\\right)^{\\prime} \\end{aligned}</p> <p>Fisher\u2019s criterion:</p>  \\max _{a} \\frac{a^{\\top} B a}{a^{\\top} W a}  <p>or equivalently</p> <ul> <li>\\max _{a} a^{\\top} B a subject to a^{\\top} W a=1</li> </ul> <p>a is given by the largest eigenvalue of W^{-1} B, which is identical to v=W^{-1 / 2} v_{1}^{*} defined before. (\u53c2\u8003\u4e0a\u9762\u7684 Ex4.1)</p>"},{"location":"stat/ASL-note1/#lda","title":"LDA\u603b\u7ed3","text":"<p>To summarize the developments so far:</p> <ul> <li>Gaussian classification with common covariances leads to linear decision boundaries. Classification can be achieved by sphering the data with respect to \\mathbf{W}, and classifying to the closest centroid (modulo \\left.\\log \\pi_{k}\\right) in the sphered space.</li> <li>Since only the relative distances to the centroids count, one can confine the data to the subspace spanned by the centroids in the sphered space.</li> <li>This subspace can be further decomposed into successively optimal subspaces in term of centroid separation. This decomposition is identical to the decomposition due to Fisher. \u5b50\u7a7a\u95f4\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5206\u89e3\u4e3a\u5173\u4e8e\u5f62\u5fc3\u5206\u79bb\u7684\u6700\u4f18\u5b50\u7a7a\u95f4\uff0e\u8fd9\u4e2a\u5206\u89e3\u4e0e Fisher \u7684 \u5206\u89e3\u76f8\u540c\uff0e</li> </ul> <p></p>"},{"location":"stat/ASL-note1/#logistic-regression","title":"Logistic Regression","text":"<p>\u53c2\u89c1 \u903b\u8f91\u65af\u8482\u56de\u5f52\u6a21\u578b\u4e0e\u6700\u5927\u71b5\u6a21\u578b</p> <p>\u56de\u987e\u7ecf\u5178\u7684\u4e8c\u5206\u7c7b\u903b\u8f91\u56de\u5f52. \u5176 logit/\u5bf9\u6570\u51e0\u7387\u4e3a</p>  \\log \\frac{P(Y=1|x)}{1-P(Y=1|x)} = w'x  <p>\u4e5f\u5373\u5728\u903b\u8f91\u65af\u8482\u56de\u5f52\u6a21\u578b\u4e2d\uff0c\u8f93\u51faY=1\u7684\u5bf9\u6570\u51e0\u7387\u662f\u8f93\u5165x\u7684\u7ebf\u6027\u51fd\u6570\u3002</p> <p>\u6362\u4e2a\u89d2\u5ea6\u6765\u770b\uff0clogit\u51fd\u6570\u7684\u503c\u57df\u662f\u5b9e\u6570\u57df\uff0c\u901a\u8fc7\u903b\u8f91\u65af\u8482\u56de\u5f52\u6a21\u578b\u53ef\u4ee5\u628alogit\u51fd\u6570\u7684\u5b9e\u6570\u57df\u6620\u5c04\u4e3a[0,1]\uff0c\u76f8\u5f53\u4e8e\u6982\u7387\u3002</p> <p>\u591a\u5206\u7c7b: Directly model the posterior probabilities of the K classes</p> <p>\\log \\frac{\\operatorname{Pr}(G=1 \\mid X=x)}{\\operatorname{Pr}(G=K \\mid X=x)}=\\beta_{10}+\\beta_{1}^{\\top} x \\log \\frac{\\operatorname{Pr}(G=2 \\mid X=x)}{\\operatorname{Pr}(G=K \\mid X=x)}=\\beta_{20}+\\beta_{2}^{\\top} x \\log \\frac{\\operatorname{Pr}(G=K-1 \\mid X=x)}{\\operatorname{Pr}(G=K \\mid X=x)}=\\beta_{(K-1) 0}+\\beta_{K-1}^{\\top} x</p> <p>Class K as reference level, all probabilities sum to 1. Each probability lie in [0,1]</p> <p>\u5206\u522b\u7528\u7b2cK\u4e2a\u7c7b\u522b\u4f5c\u4e3a\u57fa\u51c6, \u8ba1\u7b97\u5176\u4ed6\u7c7b\u522b\u76f8\u8f83\u4e8e\u5b83\u7684 log-odd, \u7136\u540e\u8fdb\u884c\u5f52\u4e00\u5316</p> <p>For k=1, \\ldots, K-1 \\operatorname{Pr}(G=k \\mid X=x)=\\frac{\\exp \\left(\\beta_{k 0}+\\beta_{k}^{\\top} x\\right)}{1+\\sum_{l=1}^{K-1} \\exp \\left(\\beta_{10}+\\beta_{1}^{\\top} x\\right)} For k=K-1 \\operatorname{Pr}(G=k \\mid X=x)=\\frac{1}{1+\\sum_{l=1}^{K-1} \\exp \\left(\\beta_{10}+\\beta_{1}^{\\top} x\\right)}</p> <p>\u53ef\u77e5\u5206\u7c7b\u8fb9\u754c\u662f\u7ebf\u6027\u7684. Linear decision boundary between classes</p>  x: \\operatorname{Pr}(G=k \\mid X=x)=\\operatorname{Pr}(G=1 \\mid X=x)  <p>which is the same as</p>  \\left\\{x:\\left(\\beta_{k 0}-\\beta_{10}\\right)+\\left(\\beta_{k}-\\beta_{l}\\right)^{\\top} x=0\\right\\}  <p>for k=1, \\ldots, K-1 and 1=1, \\ldots, K-1</p>"},{"location":"stat/ASL-note1/#logistic-regression-model-estimation","title":"Logistic Regression Model Estimation","text":"<p>\u53c2\u6570\u4f30\u8ba1, \u770b\u4e8c\u5206\u7c7b, \u5bf9\u6570\u4f3c\u7136</p> <p>Two-class case, log likelihood can be written as</p> <ul> <li>l(\\beta)=\\sum_{i=1}^{N}\\left\\{y_{i} \\log p\\left(x_{i} ; \\beta\\right)+\\left(1-y_{i}\\right) \\log \\left(1-p\\left(x_{i} ; \\beta\\right)\\right)\\right\\}</li> <li>logit p\\left(x_{i} ; \\beta\\right)=\\log \\frac{p\\left(x_{i} ; \\beta\\right)}{1-p\\left(x_{i} ; \\beta\\right)}=\\beta^{\\top} x_{i}, \\beta=\\left(\\beta_{0}, \\beta_{1}\\right)</li> </ul> <p>To maximize the log likelihood, obtain the first and second derivative</p> <ul> <li>\\frac{\\partial(\\beta)}{\\partial \\beta}=\\sum_{i=1}^{N} x_{i}\\left(y_{i}- p\\left(x_{i} ; \\beta\\right)\\right)</li> <li>\\frac{\\partial^{2}(\\beta)}{\\partial \\beta \\partial \\beta^{\\top}}=-\\sum_{i=1}^{N} x_{i} x_{i}^{\\top} p\\left(x_{i} ; \\beta\\right)\\left(1-p\\left(x_{i} ; \\beta\\right)\\right)</li> </ul> <p>Iteratively update the initial value by Newton-Raphson algorithm</p> <ul> <li>\\beta^{\\text {new }}=\\beta^{\\text {old }}-\\left\\{\\frac{\\partial l(\\beta)}{\\partial \\beta \\partial \\beta^{\\top}}\\right\\}^{-1} \\frac{\\partial(\\beta)}{\\partial \\beta}</li> <li>Derivatives evaluated at \\beta^{\\text {old }}</li> </ul> <p>In matrix notation, let W be N \\times N weight matrix with i_{t h} diagonal element p\\left(x_{i} ; \\beta^{\\text {old }}\\right)\\left(1-p\\left(x_{i} ; \\beta^{\\text {old }}\\right)\\right) Then the first and second derivatives can be express as</p> <ul> <li>\\begin{aligned} &amp;\\frac{\\partial l(\\beta)}{\\partial \\beta}=X^{\\top}(y-p) \\\\ &amp;\\frac{\\partial^{2} l(\\beta)}{\\partial \\beta \\partial \\beta^{\\top}}=-X^{\\top} W X \\end{aligned}</li> </ul> <p>Newton-Raphson updates</p> <ul> <li>\\begin{aligned} &amp;\\beta^{\\text {new }}=\\beta^{\\text {old }}+\\left(X^{\\top} W X\\right)^{-1} X^{\\top}(y-p)= \\\\ &amp;\\left(x^{\\top} W X\\right)^{-1} X^{\\top} W\\left(X \\beta^{\\text {old }}+W^{-1}(y-p)\\right)=\\left(X^{\\top} W X\\right)^{-1} X^{\\top} W z \\end{aligned}</li> <li>z=X \\beta^{\\text {old }}+W^{-1}(y-p), also called adjusted response \u8c03\u6574\u540e\u7684\u54cd\u5e94\u53d8\u91cf</li> <li>Iteratively reweighted least squares \u4e5f\u88ab\u53eb\u505a\u300c\u52a0\u6743\u8fed\u4ee3\u6700\u5c0f\u4e8c\u4e58\u300dIRLS, \u56e0\u4e3a\u6bcf\u6b21\u90fd\u662f\u6c42\u89e3\u4e0b\u9762\u7684\u95ee\u9898:</li> <li>At each iteration \\beta^{\\text {new }} \\leftarrow \\operatorname{argmin}_{\\beta}(z-X \\beta)^{\\top} W(z-X \\beta)</li> </ul>"},{"location":"stat/ASL-note1/#south-african-heart-disease","title":"\u4f8b\u5b50: South African Heart Disease","text":"<p>\u8fd9\u91cc\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7f3a\u8840\u6027\u5fc3\u810f\u75c5\u7684\u4e00\u4e2a\u903b\u8f91\u56de\u5f52\u7ed3\u679c(\u4e8c\u5206\u7c7b). \u8868\u4e2d\u7684 Z scores \u662f\u7cfb\u6570\u6bd4\u4e0a\u6807\u51c6\u5dee, \u4e0d\u663e\u8457\u7684\u8bdd\u53ef\u4ee5\u4ece\u6a21\u578b\u4e2d\u5254\u9664. \u8fd9\u91cc\u662f Wald test, null\u5047\u8bbe\u4e3a the coe\ufb03cient in question is zero, while all the others are not. \u5728 5% \u7f6e\u4fe1\u5ea6\u4e0b Z score greater than approximately 2 \u662f\u663e\u8457\u7684.</p> <p></p> <p>\u8fd9\u91cc\u53d1\u73b0 Systolic blood pressure (sbp) \u4e0d\u663e\u8457, obesity \u4e5f\u4e0d\u663e\u8457\u751a\u81f3\u662f\u8d1f\u7684 (\u4f46\u505a\u8fd9\u4e24\u4e2a\u7684\u56de\u5f52, \u7ed3\u679c\u90fd\u662f\u663e\u8457\u4e3a\u6b63\u7684)</p> <p>\u8fd9\u662f\u56e0\u4e3a\u53d8\u91cf\u4e4b\u95f4\u7684\u76f8\u5173\u6027, \u53ef\u4ee5\u8fdb\u884c\u6a21\u578b\u9009\u62e9\u6216 \u504f\u5dee\u5206\u6790 (analysis of deviance).</p> <p>\u53c2\u6570\u7684\u89e3\u91ca: \u4f8b\u5982\u5bf9 a coe\ufb03cient of 0.081 (Std. Error = 0.026) for tobacco, \u53ef\u4ee5\u89e3\u91ca\u4e3a an increase of 1kg in lifetime tobacco usage accounts for an increase in the odds of coronary heart disease of exp(0.081) = 1.084 or 8.4%  \u7ed3\u5408\u6b8b\u5dee\u53ef\u4ee5\u5f97\u5230 an approximate 95% con\ufb01dence interval of exp(0.081 \u00b1 2 \u00d7 0.026) = (1.03, 1.14).</p>"},{"location":"stat/ASL-note1/#l1-regularized-logistic-regression","title":"L1 Regularized Logistic Regression","text":"<p>Maximize a penalized version of the log likelihood \\max _{\\beta_{0}, \\beta}\\left\\{\\sum_{i=1}^{N}\\left[y_{i}\\left(\\beta_{0}+\\beta^{\\top} x_{i}\\right)-\\log \\left(1+e^{\\beta_{0}+\\beta^{\\top} x_{i}}\\right)\\right]-\\lambda \\sum_{j=1}^{p}\\left|\\beta_{j}\\right|\\right\\}</p> <ul> <li>Standardize predictors first, don\u2019t penalize intercept (\u548classo\u4e00\u6837)</li> <li>Penalized likelihood surface is concave, solutions can be found by nonlinear programming methods \u975e\u7ebf\u6027\u89c4\u5212\u65b9\u6cd5</li> <li>Quadratic approximation using Newton-Raphson by repeated application of a weighted lasso algorithm</li> </ul> <p></p>"},{"location":"stat/ASL-note1/#logistic-regression-or-lda","title":"Logistic Regression or LDA?","text":"<p>LDA decision boundary</p>  \\begin{aligned} &amp;\\log \\frac{\\operatorname{Pr}(G=k \\mid X=x)}{\\operatorname{Pr}(G=K \\mid X=x)}= \\\\ &amp;\\log \\frac{\\pi_{K}}{\\pi_{K}}-\\frac{1}{2}\\left(\\mu_{k}+\\mu_{K}\\right)^{\\top} \\Sigma^{-1}\\left(\\mu_{k}-\\mu_{K}\\right)+x^{\\top} \\Sigma^{-1}\\left(\\mu_{k}-\\mu_{K}\\right)=\\alpha_{k 0}+\\alpha_{k}^{\\top} x \\end{aligned}  <p>Logistic regression</p>  \\log \\frac{\\operatorname{Pr}(G=k \\mid X=x)}{\\operatorname{Pr}(G=K \\mid X=x)}=\\beta_{k 0}+\\beta_{k}^{\\top} x  <p>Difference? \\operatorname{Pr}(X, G=k)=\\operatorname{Pr}(X) \\operatorname{Pr}(G=k \\mid X)</p> <ul> <li>LDA is fit by maximizing the full likelihood \\operatorname{Pr}(X, G=k)=\\phi\\left(X ; \\mu_{k}, \\Sigma\\right) \\pi_{k}</li> <li>Logistic regression leaves the marginal density of X as an arbitrary, and is fit by maximizing the conditional likelihood \\operatorname{Pr}(G=k \\mid X)</li> </ul> <p>The marginal density in LDA: \\operatorname{Pr}(X)=\\sum_{k=1}^{k} \\pi_{k} \\phi\\left(X ; \\mu_{k}, \\Sigma\\right)</p> <p>\u5c3d\u7ba1\u5b83\u4eec\u786e\u5b9e\u6709\u76f8\u540c\u7684\u5f62\u5f0f\uff0c\u533a\u522b\u5728\u4e8e\u5b83\u4eec\u7cfb\u6570\u4f30\u8ba1\u7684\u65b9\u5f0f. \u903b\u8f91\u65af\u8482\u56de\u5f52\u6a21\u578b\u66f4\u52a0\u4e00\u822c\uff0c\u56e0\u4e3a\u5b83\u505a\u4e86\u66f4\u5c11\u7684\u5047\u8bbe.</p> <p>If f_{k}(x) \\sim \\mathcal{N}</p> <ul> <li>LDA gives more info about the parameters</li> <li>LDA can estimate parameters more efficiently (lower variance). \u901a\u8fc7\u4ee5\u6765\u989d\u5916\u7684\u6a21\u578b\u5047\u8bbe, \u53ef\u4ee5\u5f97\u5230\u66f4\u591a\u7684\u53c2\u6570\u4fe1\u606f, \u56e0\u6b64\u65b9\u5dee\u66f4\u4f4e</li> </ul> <p>Bad things about LDA\u2026</p> <ul> <li>Less robust to gross outliers</li> <li>Observations far from decision boundary influence \\hat{\\Sigma}</li> <li>Observations without class labels have information about the parameters</li> <li>Quanlitative variables in X</li> </ul>"},{"location":"stat/ASL-note1/#naive-bayes","title":"Naive Bayes","text":"<p>\u53c2\u89c1 \u6734\u7d20\u8d1d\u53f6\u65af\u6cd5</p> <ul> <li>\u6734\u7d20\u8d1d\u53f6\u65af\u6cd5\u662f\u57fa\u4e8e\u8d1d\u53f6\u65af\u5b9a\u7406\u4e0e\u7279\u5f81\u6761\u4ef6\u72ec\u7acb\u5047\u8bbe\u7684\u5206\u7c7b\u65b9\u6cd5\u3002</li> <li>\u6734\u7d20\u8d1d\u53f6\u65af\u6cd5\u5b9e\u9645\u4e0a\u5b66\u4e60\u5230\u751f\u6210\u6570\u636e\u7684\u673a\u5236\uff0c\u6240\u4ee5\u5c5e\u4e8e\u751f\u6210\u6a21\u578b\u3002</li> <li>\u6761\u4ef6\u72ec\u7acb\u5047\u8bbe\u7b49\u4e8e\u662f\u8bf4\u7528\u4e8e\u5206\u7c7b\u7684\u7279\u5f81\u5728\u7c7b\u786e\u5b9a\u7684\u6761\u4ef6\u4e0b\u90fd\u662f\u6761\u4ef6\u72ec\u7acb\u7684\u3002\u8fd9\u4e00\u5047\u8bbe\u4f7f\u5f97\u6761\u4ef6\u6982\u7387\u5206\u5e03\u7684\u5b66\u4e60\u96be\u5ea6\u964d\u4f4e\u4e86\uff0c\u4f46\u4f1a\u727a\u7272\u4e00\u5b9a\u7684\u5206\u7c7b\u51c6\u786e\u7387\u3002</li> <li>\u6734\u7d20\u8d1d\u53f6\u65af\u6cd5\u5206\u7c7b\u65f6\uff0c\u5bf9\u7ed9\u5b9a\u7684\u8f93\u5165x\uff0c\u901a\u8fc7\u5b66\u4e60\u5230\u7684\u6a21\u578b\u8ba1\u7b97\u540e\u9a8c\u6982\u7387\u5206\u5e03 P(Y=c_k|X=x)\uff0c\u5c06\u540e\u9a8c\u6982\u7387\u6700\u5927\u7684\u7c7b\u4f5c\u4e3ax\u7684\u7c7b\u8f93\u51fa\u3002<ul> <li>\u4e3a\u4ec0\u4e48\u5c06\u540e\u9a8c\u6982\u7387\u6700\u5927\u7684\u7c7b\u4f5c\u4e3ax\u7684\u8f93\u51fa\uff1f\u56e0\u4e3a\u540e\u9a8c\u6982\u7387\u6700\u5927\u5316\u7b49\u6548\u4e8e\u671f\u671b\u98ce\u9669\u6700\u5c0f\u5316\u3002</li> </ul> </li> </ul>"},{"location":"stat/ASL-note1/#_4","title":"\u8865\u5145: \u540e\u9a8c\u6982\u7387\u6700\u5927\u5316\u7b49\u6548\u4e8e\u671f\u671b\u98ce\u9669\u6700\u5c0f\u5316","text":"<p>\u8bbe\u9009\u62e9 0-1 \u635f\u5931\u51fd\u6570:</p>  L(Y, f(X))=\\left\\{\\begin{array}{l} 1, Y \\neq f(X) \\\\ 0, Y=f(x) \\end{array}\\right.  <p>\u5f0f\u4e2d f(X) \u662f\u5206\u7c7b\u51b3\u7b56\u51fd\u6570\u3002\u8fd9\u65f6, \u671f\u671b\u98ce\u9669\u51fd\u6570\u4e3a:</p>  R_{\\exp }(f)=E[L(Y, f(X))]  <p>\u671f\u671b\u662f\u5bf9\u8054\u5408\u5206\u5e03 P(X, Y) \u53d6\u7684\u3002\u7531\u6b64\u53ef\u5f97\u5173\u4e8e\u6761\u4ef6\u6982\u7387 P(Y \\mid X) \u7684\u671f\u671b(\u635f\u5931\u51fd\u6570\u5173\u4e8e\u6761\u4ef6\u6982\u7387\u7684\u671f\u671b):</p>  R_{\\exp }(f)=E_{X} \\sum_{k=1}^{K}\\left[L\\left(c_{k}, f(X)\\right)\\right] P\\left(c_{k} \\mid X\\right)  <p>\u4e3a\u4e86\u4f7f\u5f97\u671f\u671b\u98ce\u9669\u6700\u5c0f\u5316, \u53ea\u9700\u5bf9 X=x \u9010\u4e2a\u6781\u5c0f\u5316(\u904d\u5386\u6240\u6709\u7684\u6837\u672c), \u7531\u6b64\u5f97\u5230:</p>  \\begin{aligned} f(x) &amp;=\\arg \\min_{y \\in \\mathcal{Y}} \\sum_{k=1}^{K} L\\left(c_{k}, y\\right) P\\left(c_{k} \\mid X=x\\right) \\\\ &amp;=\\arg \\min_{y \\in \\mathcal{Y}} \\sum_{k=1}^{K} P\\left(y \\neq c_{k} \\mid X=x\\right) \\\\ &amp;=\\arg \\min _{y \\in \\mathcal{Y}}\\left(1-P\\left(y=c_{k} \\mid X=x\\right)\\right) \\\\ &amp;=\\arg \\max _{y \\in \\mathcal{Y}} P\\left(y=c_{k} \\mid X=x\\right) \\end{aligned}  <p>\u8fd9\u6837\u4e00\u6765, \u6839\u636e\u671f\u671b\u98ce\u9669\u6700\u5c0f\u51c6\u5219\u5c31\u5f97\u5230\u4e86\u540e\u9a8c\u6982\u5ba4\u6700\u5927\u5316\u51c6\u5219:</p>  f(x)=\\arg \\max _{c_{k}} P\\left(y=c_{k} \\mid X=x\\right)(4.8)"},{"location":"stat/ASL-note1/#nb","title":"NB \u63a8\u5bfc","text":"<p>From Bayes Theorem</p>  P\\left(Y=k \\mid x_{1}, \\ldots, x_{p}\\right) \\propto \\pi_{k} P\\left(x_{1}, \\ldots, x_{p} \\mid Y=k\\right)  <p>Naive Bayes assumption: conditional independence of x_{j} \u2018s given y</p>  P\\left(x_{1}, \\ldots, x_{p} \\mid Y=k\\right)=\\prod_{j=1}^{p} P\\left(x_{j} \\mid Y=k\\right)  <p>The relationship is thus simplified to</p>  P\\left(y \\mid x_{1}, \\ldots, x_{p}\\right) \\propto \\pi_{k} \\prod_{j=1}^{p} P\\left(x_{j} \\mid y\\right)  <p>Therefore, the classification rule is</p>  \\hat{y}=\\operatorname{argmax}_{k} \\pi_{k} \\prod_{j=1}^{p} P\\left(x_{j} \\mid Y=k\\right)  <p>Despite apparently over-simplified assumptions, naive Bayes classifiers have worked quite well in many real-world situations (document classification and spam filtering)</p> <p>Note: Naive Bayes is known as a decent classifier, but a bad estimator (probability outputs are not to be taken too seriously).</p>"},{"location":"stat/ASL-note1/#gaussian-naive-bayes","title":"Gaussian Naive Bayes","text":"<p>\u5bf9\u4e8e\u8fde\u7eed\u53d8\u91cf, \u5047\u8bbe\u5206\u5e03\u4e3a Gaussian, MLE\u4f30\u8ba1. The likelihood of the feature is assumed to be Gaussian</p>  P\\left(X_{j} \\mid Y=k\\right)=\\frac{1}{\\sqrt{2 \\pi \\sigma_{k}^{2}} \\exp \\left(-\\frac{\\left(x_{j}-\\mu_{k}\\right)^{2}}{2 \\pi \\sigma_{k}^{2}}\\right)}  <p>Parameters \\sigma_{k} and \\mu_{k} are estimated using maximum likelihood method.</p>"},{"location":"stat/ASL-note1/#multinomial-naive-bayes","title":"Multinomial Naive Bayes","text":"<p>Often used in text classification</p> <ul> <li>Data are typically represented as word vector counts</li> </ul> <p>Parameter vector \\theta_{k}=\\left(\\theta_{k 1}, \\ldots, \\theta_{k p}\\right) for each class k</p> <ul> <li>p: the number of features (the size of vocabulary)</li> <li>\\theta_{k j}: P\\left(x_{j} \\mid Y=k\\right), the probability of feature j appearing in a sample belonging to class k</li> </ul> <p>\\theta_{k} can be estimated by smooth version of maximum likelihood</p>  \\hat{\\theta}_{k j}=\\frac{N_{k j}+\\alpha}{N_{k}+\\alpha p}  <ul> <li>N_{k j}: number of times feature j appears in class k in the training set</li> <li>N_{k} : total count of all features for class k in the training set</li> <li>\\alpha&gt;0: smoothing priors, prevent zero probabilities for feature not present in the training set</li> <li>\\alpha=1 : Laplace smoothing</li> <li>\\alpha&lt;1 : Lidstone smoothing</li> </ul>"},{"location":"stat/ASL-note1/#complement-naive-bayes","title":"Complement Naive Bayes","text":"<ul> <li>Adaptation of the standard Multinomial Naive Bayes algorithm</li> <li>Suited for imbalanced data sets \u7c7b\u522b\u4e0d\u5747\u8861</li> <li>Uses statistics from the complement of each class to compute model\u2019s weights</li> <li>Parameter estimates of CNB are more stable than those for MNB</li> <li>CNB regularly outperforms MNB on text classification</li> </ul>  \\hat{\\theta}_{k j}=\\frac{\\alpha_{j}+\\sum_{i: y_{i} \\neq k} d_{i j}}{\\alpha+\\sum_{i: y_{i} \\neq k} \\sum_{l} d_{i l}}  <ul> <li>d_{i j} : count of term j in document i</li> <li>\\alpha=\\Sigma_{j} \\alpha_{j}</li> <li>summation over all documents i not in class k</li> </ul>  \\begin{gathered} w_{k j}=\\frac{\\log \\hat{\\theta}_{k j}}{\\sum_{l} \\log \\hat{\\theta}_{k l}} \\\\ \\hat{k}=\\operatorname{argmin}_{k} \\sum_{j} t_{j} w_{k j} \\end{gathered}  <p>i.e., Classification rule: assign document to the class that is the poorest complement match</p>"},{"location":"stat/ASL-note1/#seprating-hyperplanes","title":"Seprating Hyperplanes \u7565","text":""},{"location":"stat/ASL-note1/#rosenblatts-perceptron-learning-algorithm","title":"Rosenblatt\u2019s Perceptron Learning Algorithm \u611f\u77e5\u673a","text":"<p>\u53c2\u89c1 \u611f\u77e5\u673a</p> <ul> <li>\u611f\u77e5\u673a\u662f\u4e8c\u5206\u7c7b\u7684\u7ebf\u6027\u5206\u7c7b\u6a21\u578b\u3002<ul> <li>\u6a21\u578b\uff1a\u611f\u77e5\u673a\u5bf9\u5e94\u4e8e\u5c06\u8f93\u5165\u7a7a\u95f4(\u7279\u5f81\u7a7a\u95f4)\u4e2d\u7684\u5b9e\u4f8b\u5212\u5206\u4e3a\u6b63\u8d1f\u4e24\u7c7b\u7684\u5206\u79bb\u8d85\u5e73\u9762\uff0c\u5c5e\u4e8e\u5224\u522b\u6a21\u578b\u3002</li> <li>\u7b56\u7565\uff1a\u57fa\u4e8e\u8bef\u5206\u7c7b\u7684\u635f\u5931\u51fd\u6570</li> <li>\u7b97\u6cd5\uff1a\u5229\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u5bf9\u635f\u5931\u51fd\u6570\u8fdb\u884c\u6781\u5c0f\u5316\u3002</li> </ul> </li> <li>\u611f\u77e5\u673a\u5b66\u4e60\u7b97\u6cd5\u5206\u4e3a\u539f\u59cb\u5f62\u5f0f\u548c\u5bf9\u5076\u5f62\u5f0f\u3002</li> <li>\u611f\u77e5\u673a\u4e8e1957\u5e74Rosenblatt\u63d0\u51fa\uff0c\u662f\u795e\u7ecf\u7f51\u7edc\u4e0e\u652f\u6301\u5411\u91cf\u673a\u7684\u57fa\u7840\u3002</li> </ul> <p>Find a separating hyperplane by minimizing the distance of misclassified points to the decision boundary</p>  D\\left(\\beta, \\beta_{0}\\right)=-\\sum_{i \\in \\mathcal{M}} y_{i}\\left(\\beta_{0}+X_{i}^{\\top} \\beta\\right)  <ul> <li>If y_{i}=1 is misclassified, \\beta_{0}+X_{i}^{\\top} \\beta&lt;0</li> <li>If y_{i}=-1 is misclassified, \\beta_{0}+X_{i}^{\\top} \\beta&gt;0</li> <li>\\mathcal{M} indexes the set of misclassified points (assumed fixed)</li> </ul> <p>The quantity D\\left(\\beta, \\beta_{0}\\right) is non-negative and proportional to the distance of the misclassified points to the decision boundary defined by \\beta_{0}+X_{i}^{\\top} \\beta=0</p>"},{"location":"stat/ASL-note1/#parameter-estimation-for-perceptron","title":"Parameter Estimation for Perceptron","text":"<p>Gradient is given by</p>  \\begin{aligned} &amp;\\quad \\frac{\\partial D\\left(\\beta, \\beta_{0}\\right)}{\\partial \\beta}=-\\sum_{i \\in \\mathcal{M}} y_{i} x_{i} \\\\ &amp;\\quad \\frac{\\partial D\\left(\\beta, \\beta_{0}\\right)}{\\partial \\beta_{0}}=-\\sum_{i \\in \\mathcal{M}} y_{i} \\end{aligned}  <p>Stochastic gradient descent</p>  \\left[\\begin{array}{c} \\beta \\\\ \\beta_{0} \\end{array}\\right] \\leftarrow\\left[\\begin{array}{c} \\beta \\\\ \\beta_{0} \\end{array}\\right]+\\rho\\left[\\begin{array}{c} y_{i} x_{i} \\\\ y_{i} \\end{array}\\right]  <ul> <li>A step is taken after each observation is visited</li> <li>Along the negative gradient direction</li> <li>Repeat until no points are misclassified</li> <li>Step size \\rho</li> <li>More efficient than regular Gradient Descent</li> </ul>"},{"location":"stat/ASL-note1/#problems","title":"\u611f\u77e5\u673a\u7684 Problems","text":"<p>Details summarized in Ripley (1996)</p> <ul> <li>All separating hyperplanes are considered equally valid</li> <li>When the data are separable, there are many solutions, and which one is found depends on the starting values</li> <li>The \u201cfinite\u201d number of steps can be very large. The smaller the gap, the longer the time to find it</li> <li>When the data are not separable, the algorithm will not converge, and cycles develop. The cycles can be long and therefore hard to detect</li> </ul>"},{"location":"stat/ASL-note2/","title":"ASL2","text":""},{"location":"stat/ASL-note2/#basis-expansions-and-regularization","title":"Basis Expansions and Regularization","text":"<p>\u4e4b\u524d\u8ba8\u8bba\u7684\u90fd\u662f(\u5e7f\u4e49\u4e0a\u7684)\u7ebf\u6027\u6a21\u578b</p> <p>(Generalized) Linear Models</p> <ul> <li>Linear regression</li> <li>Linear discriminant analysis</li> <li>Logistic regression</li> <li>Separating hyperplanes</li> </ul> <p>Extremely unlikely that f(x) is linear</p> <ul> <li>Linear model is usually a convenient and sometimes necessary approximation</li> <li>Easy to interpret, first order Taylor expansion, avoid overfitting</li> </ul> <p>A Taylor series expansion of a function f(x) about a point a f(x)=f(a)+f^{\\prime}(a)(x-a)+\\frac{f^{\\prime \\prime}(a)}{2 !}(x-a)^{2}+\\frac{f^{(3)}(a)}{3 !}(x-a)^{3}+\\ldots+\\frac{f^{(n)}(a)}{n !}(x-a)^{n}+\\ldots</p>"},{"location":"stat/ASL-note2/#intro","title":"Intro","text":""},{"location":"stat/ASL-note2/#moving-beyond-linearity","title":"Moving Beyond Linearity","text":"<p>Augment inputs X with transformations, then use linear models in the new space</p> <ul> <li>The m_{t h} transformation, h_{m}(X): \\mathbb{R}^{p} \\rightarrow \\mathbb{R}</li> </ul> <p>The new approximated function: f(X)=\\sum_{m=1}^{M} \\beta_{m} h_{m}(X), m=1, \\ldots, M</p> <p>Once basis functions h_{m}(X) have been determined, model estimation proceeds as in ordinary linear regression.</p> <p>Some simple and widely used h_{m}(X)</p> <ul> <li>h_{m}(X)=X_{m}, the original input variables</li> <li>h_{m}(X)=X_{j}^{2} or X_{j} X_{k}, O\\left(p^{d}\\right) terms for degree-d polynomial)</li> <li>h_{m}(X)=\\log \\left(X_{j}\\right), \\sqrt{X_{j}},\\|X\\|, \\ldots</li> <li>h_{m}(X)=I\\left(L_{m} \\leqslant X_{k} \\leqslant U_{m}\\right), indicator for region of X_{k} \u5206\u6bb5</li> </ul>"},{"location":"stat/ASL-note2/#controlling-for-model-complexity","title":"Controlling for Model Complexity","text":"<p>\u6211\u4eec\u9700\u8981\u4e00\u79cd\u65b9\u5f0f\u6765\u63a7\u5236\u6211\u4eec\u6a21\u578b\uff08\u4ece\u5b57\u5178\u4e2d\u9009\u62e9\u57fa\u51fd\u6570\uff09\u7684\u590d\u6742\u5ea6, \u4e09\u79cd\u65b9\u5f0f</p> <p>Restriction methods: limit the class of functions before-hand</p> <ul> <li>f(x)=\\sum_{j=1}^{p} f_{j}\\left(X_{j}\\right)=\\sum_{j=1}^{p} \\sum_{m=1}^{M_{j}} \\beta_{j m} h_{j m}\\left(X_{j}\\right)</li> <li>limit the number of basis functions M_{j} used for each component function f_{j}.</li> </ul> <p>Selection methods: include basis that improve model fit significantly</p> <ul> <li>Variable selection</li> <li>Stagewise greedy approaches, CART, MARS and boosting</li> </ul> <p>Regularization methods: use the entire dictionary but restrict the coefficients</p> <ul> <li>Ridge</li> <li>LASSO</li> </ul>"},{"location":"stat/ASL-note2/#piecewise-polynomials-and-splines","title":"Piecewise Polynomials and Splines","text":""},{"location":"stat/ASL-note2/#piecewise-polynomials-assume-1-dim","title":"Piecewise Polynomials - Assume 1-dim","text":"<p>A piecewise polynomial function \u5206\u6bb5\u591a\u9879\u5f0f f(X) is obtained by dividing the domain of X into contiguous intervals, and representing f by a separate polynomial in each interval.</p> <p>Piecewise constant h_{1}(X)=I\\left(X&lt;\\xi_{1}\\right), h_{2}(X)=I\\left(\\xi_{1} \\leqslant X&lt;\\xi_{2}\\right), h_{3}(X)=I\\left(\\xi_{2} \\leqslant X\\right)</p> <p>Piecewise linear h_{4}(X)=I\\left(X&lt;\\xi_{1}\\right) X, h_{5}(X)=I\\left(\\xi_{1} \\leqslant X&lt;\\xi_{2}\\right) X, h_{6}(X)=I\\left(\\xi_{2} \\leqslant X\\right) X</p> <p>Continuous piecewise linear h_{1}(X)=1, h_{2}(X)=X, h_{3}(X)=\\left(X-\\xi_{1}\\right)_{+} h_{4}(X)=\\left(X-\\xi_{2}\\right)_{+},</p> <p></p> <p>\u91c7\u7528\u4e0d\u540c\u57fa\u51fd\u6570\u548c\u7ea6\u675f\u6761\u4ef6\u7684\u56de\u5f52\u7ed3\u679c.</p> <p></p>"},{"location":"stat/ASL-note2/#piecewise-cubic-polynomial","title":"Piecewise Cubic Polynomial","text":"<p>Cubic spline \u4e09\u6b21\u6837\u6761: piecewise cubic polynomial with continuous first and second derivatives at the knots.\u8fd9\u91cc\u662f\u4e09\u6b21\u6837\u6761\u7684\u5b9a\u4e49, \u6ce8\u610f\u5230\u8fd9\u91cc\u662f\u8981\u6c42\u4e86\u5230\u4e8c\u9636\u5fae\u5206\u7684\u8fde\u7eed\u6027; \u800c\u4e0b\u9762\u7684\u7ed9\u51fa\u4e86\u4e00\u7ec4\u57fa\u51fd\u6570, \u8fd9\u91cc\u662f\u9700\u8981\u8bc1\u660e\u7684. \u53c2\u89c1 here. \u6ce8\u610f: 1. \u8fd9\u91cc\u7684\u516d\u4e2a\u51fd\u6570\u662f\u7ebf\u6027\u65e0\u5173\u7684; 2. \u6ee1\u8db3\u4e09\u6b21\u6837\u6761\u7684\u7ea6\u675f, \u5373knot\u59040-2\u9636\u5fae\u5206\u8fde\u7eed.</p> <p>Basis for cubic splines</p>  \\begin{aligned} &amp;h_{1}(X)=1, h_{2}(X)=X, h_{3}(X)=X^{2}, h_{4}(X)=X^{3} \\\\ &amp;h_{5}(X)=\\left(X-\\xi_{1}\\right)_{+}^{3}, h_{6}(X)=\\left(X-\\xi_{2}\\right)_{+}^{3} \\end{aligned}  <p>Total number of parameters: 3 \\times 4-2 \\times 3=6 \u8ba1\u7b97\u53c2\u6570\u7684\u4e2a\u6570\uff1a\u8fd9\u91cc\u6709\u4e09\u4e2a\u533a\u57df\uff0c\u6bcf\u4e2a\u533a\u57df\u62df\u5408\u4e00\u4e2a\u4e09\u6b21\u51fd\u6570\uff0c\u56e0\u6b64\u662f 3*4=12 \u4e2a\u53c2\u6570\uff1b\u7ea6\u675f\u6761\u4ef6\u6709\u4e24\u4e2a knots\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e0a\u6709\u4e09\u4e2a\u7ea6\u675f\uff080-2\u9636\u8fde\u7eed\uff09\u3002[\u53e6\u5916\u53ef\u77e5, \u5982\u679c\u518d\u52a0\u4e09\u9636\u5fae\u5206\u8fde\u7eed, \u6b64\u65f6\u7684\u81ea\u7531\u5ea6\u53d8\u4e3a 4, \u548c\u5168\u5c40\u7684\u4e09\u6b21\u51fd\u6570\u4e00\u6837, \u4e5f\u5373\u300cEnforcing one more order of continuity would lead to a global cubic polynomial.\u300d]</p> <ul> <li>Cubic splines are the lowest-order spline for which the knot-discontinuity is not visible to the human eye. \u636e\u8bf4\u4e09\u6b21\u6837\u6761\u662f\u4eba\u773c\u770b\u4e0d\u51fa\u7ed3\u70b9\u4e0d\u8fde\u7eed\u7684\u6700\u4f4e\u9636\u6837\u6761\uff0e</li> </ul>"},{"location":"stat/ASL-note2/#order-m-spline","title":"Order-M Spline","text":"<p>\u5b9a\u4e49\u66f4\u4e00\u822c\u7684\u6837\u6761order\uff1aorder \u4e3a M \u7684\u6837\u6761\u662f order \u4e3a M \u7684\u5206\u6bb5\u591a \u9879\u5f0f\uff0c\u800c\u4e14\u6709\u8fde\u7eed\u7684 M \u2212 2 \u6b21\u5fae\u5206\uff0e[\u6ce8\u610f\u8fd9\u91cc\u7684 order = degree+1, degree \u624d\u662f\u6211\u4eec\u719f\u6089\u7684\u9636\u6570, \u4f8b\u5982\u8fd9\u91cc\u7684\u4e09\u6b21\u6837\u6761 order=4]</p> <ul> <li>\u4e09\u6b21\u6837\u6761\u7684 M = 4</li> <li>\u5206\u6bb5\u5e38\u6570\u51fd\u6570\u662f order \u4e3a 1 \u7684\u6837\u6761</li> <li>\u8fde\u7eed\u7684\u5206\u6bb5\u7ebf\u6027\u51fd\u6570\u662f order \u4e3a 2 \u7684\u6837\u6761</li> </ul> <p>Order-M spline with knots \\xi_{j}, j=1, \\ldots, K :</p> <ul> <li>Piecewise-polynomial of order M</li> <li>Continuous derivatives up to order M-2</li> </ul> <p>\u53ef\u4ee5\u7ed9\u51fa M order \u6837\u6761\u7684\u57fa\u51fd\u6570:</p> <p>Truncated power \u622a\u65ad\u5e42 basis</p> <ul> <li>h_{j}(X)=X^{j-1}, j=1, \\ldots, M</li> <li>h_{M+l}=\\left(X-\\xi_{l}\\right)_{+}^{M-1}, l=1, \\ldots, K</li> </ul> <p>In practice, the most widely used orders are M=1,2 and 4 .</p>"},{"location":"stat/ASL-note2/#construct-spline-basis","title":"Construct Spline Basis","text":"<p>\u6ce8\u610f\u5230 order \u4e3a M \uff0c\u542b\u6709 K \u4e2a\u7ed3\u70b9\u7684\u6837\u6761\u5176\u81ea\u7531\u5ea6\u4e3a</p>  M(K+1)-(M-1) K=K+M  <p>\u5de6\u8fb9\u7b2c\u4e00\u9879\u8868\u793a K+1 \u4e2a\u533a\u57df\u4e2d\u6bcf\u4e2a\u533a\u57df\u9700\u8981 M \u4e2a\u53c2\u6570\uff0c\u800c\u7b2c\u4e8c\u9879\u8868\u660e K \u4e2a\u7ed3\u70b9\u4e2d\u9700\u8981 M-1 \u4e2a\u9650\u5236. \u6bd4\u5982\uff0c\u5bf9\u4e8e\u4e09\u6b21\u6837\u6761\uff0c M=4 \uff0c\u5219\u81ea\u7531\u5ea6\u4e3a K+4.</p> <p>\u4e0b\u9762\u4ecb\u7ecd\u5229\u7528 R <code>splines</code> \u4e2d\u7684\u51fd\u6570\u6765\u8fdb\u884c Spline \u7684 order, knot \u7684\u6570\u91cf\u548c\u4f4d\u7f6e\u7684\u9009\u62e9. Choose order of the spline, the number of knots and their placement. [\u6ce8\u610f, \u5728\u4e0b\u9762\u7684 <code>bs(x, df=7)</code> \u4e2d\uff0c\u539f\u672c\u56db\u4e2a\u7ed3\u70b9\u7684\u4e09\u6b21\u6837\u6761\u81ea\u7531\u5ea6\u4e3a 8 \uff0c\u4f46\u662f <code>bs()</code> \u51fd\u6570\u672c\u8eab\u9ed8\u8ba4\u5728\u57fa\u4e2d\u53bb\u6389\u5e38\u6570\u9879. \u4e5f\u5373, \u8fd9\u91cc\u6ee1\u8db3 <code>df = degree + len(knots)</code>; df=freedom-1; degree=M-1]</p> <ul> <li><code>bs(x, df=7)</code><ul> <li>Default order M=4 cubic spline (\u4e5f\u5373 degree=3)</li> <li>7-3=4 interior knots at the 20_{t h}, 40_{t h}, 60_{t h}, 80_{t h} percentiles of X</li> <li>Return a N \\times 8 matrix of \u2014\u2014 \u6ce8\u610f, \u8fd4\u56de\u7684\u77e9\u9635\u8fd8\u662f\u6839\u636e\u81ea\u7531\u5ea6\u4f5c\u4e3a\u5bbd\u7684</li> </ul> </li> <li><code>bs (x, degree=1, knots=c(0.2,0.4,0.6))</code><ul> <li>Piecewise constant</li> <li>return \\mathrm{N} \\times 4 matrix</li> </ul> </li> </ul>"},{"location":"stat/ASL-note2/#problems-with-polynomials-and-splines","title":"Problems with polynomials and splines","text":"<ul> <li>Poor fit near boundaries</li> <li>Extrapolation beyond boundaries \u5916\u63a8</li> </ul>"},{"location":"stat/ASL-note2/#natural-cubic-splines","title":"Natural Cubic Splines","text":"<p>Natural cubic spline \u589e\u52a0\u4e86\u7ea6\u675f: \u8981\u6c42\u5728\u8fb9\u754c\u4e4b\u5916\u7684\u51fd\u6570\u8981\u662f\u7ebf\u6027\u7684, \u56e0\u6b64\u51cf\u5c11\u4e862*2 \u4e2a\u53c2\u6570</p> <ul> <li>Assume function is linear beyond the boundary knots</li> <li>Frees up 2 \\times 2 degrees of freedom</li> </ul> <p>Natural cubic spline with \\mathrm{K} knots - \\mathrm{K} basis functions</p> <ul> <li>N_{1}(X)=1, N_{2}(X)=X, N_{k+2}(X)=d_{k}(X)-d_{K-1}(X)</li> <li>d_{k}(X)=\\frac{\\left(X-\\xi_{k}\\right)_{+}^{3}-\\left(X-\\xi_{K}\\right)_{+}^{3}}{\\xi_{K}-\\xi_{k}}</li> <li>Easy to prove: zero second and third derivatives when X \\geqslant \\xi_{K} or X \\leqslant \\xi_{1}</li> </ul> <p>\u8fd9\u91cc\u4f7f\u7528\u8fc7\u4e4b\u524d\u7684\u4e09\u6b21\u6837\u6761\u7684\u5e42\u57fa\u51fd\u6570\u63a8\u51fa\u6765\u7684, \u53c2\u89c1 here.</p>"},{"location":"stat/ASL-note2/#_1","title":"\u81ea\u7531\u5ea6\u7684\u8ba1\u7b97\u8bf4\u660e","text":"<p>\u4e0b\u9762\u8bf4\u660e\u5bf9\u4e8e\u81ea\u7136\u4e09\u6b21\u6837\u6761\u800c\u8a00, \u57fa\u51fd\u6570\u4e2a\u6570\u5373\u4e3a\u7ed3\u70b9\u4e2a\u6570. \u8bbe\u6709 K \u4e2a\u7ed3\u70b9, \u5219\u6709 K-2 \u4e2a\u5185\u7ed3\u70b9, (K-2+1) \u4e2a\u533a\u57df, \u6bcf\u4e2a\u533a\u57df\u53c2\u6570\u4e3a 4 \u4e2a, \u6bcf\u4e2a\u5185\u7ed3\u70b9\u51cf\u6389 3 \u4e2a\u53c2\u6570, \u6bcf\u4e2a\u8fb9\u754c\u70b9\u51cf\u6389\u4e00\u4e2a\u53c2\u6570, \u5219\u8fd8\u5269\u4e0b</p>  (K-1) \\cdot 4-3(K-2)-2 \\times 1=K  <p>\u4e5f\u5c31\u662f\u4e2a\u57fa\u51fd\u6570.</p> <p>\u5177\u4f53\u5730, \u5047\u8bbe\u67d0\u5185\u7ed3\u70b9 \\xi \u7684\u5de6\u53f3\u533a\u57df\u51fd\u6570\u5206\u522b\u4e3a</p>  f_{i}(x)=a_{i} x^{3}+b_{i} x^{2}+c_{i} x+d_{i}, \\quad i=1,2,  <p>\u5219\u81ea\u7531\u53c2\u6570\u6709 8 \u4e2a \\left(a_{i}, b_{i}, c_{i}, d_{i}\\right), i=1,2, \u7ed3\u70b9 \\xi \u5904\u9700\u8981\u6ee1\u8db3 \u201c\u51fd\u6570\u503c\u76f8\u7b49\u201d\u3001\u201c\u9636\u5bfc\u76f8\u7b49\u201d\u3001\u201c\u9636\u5bfc\u76f8\u7b49\u201d, \u5373</p>  \\begin{aligned} f_{1}(\\xi)=f_{2}(\\xi)\\\\ f_{1}^{\\prime}(\\xi)=f_{2}^{\\prime}(\\xi)\\\\ f_{1}^{\\prime \\prime}(\\xi)=f_{2}^{\\prime \\prime}(\\xi) \\end{aligned}  <p>\u76f8\u5f53\u4e8e\u51cf\u5c11\u4e86 3 \u4e2a\u81ea\u7531\u53c2\u6570\uff08\u6362\u53e5\u8bdd\u8bf4, \u6709\u4e09\u4e2a\u53c2\u6570\u53ef\u4ee5\u88ab\u5176\u4ed6 5 \u4e2a\u53c2\u6570\u8868\u793a\u51fa\u6765\uff09\u3002</p> <p>\u5bf9\u4e8e\u67d0\u8fb9\u754c\u70b9 \\xi_{0}, \u5176\u6240\u5728\u533a\u57df\u7684\u51fd\u6570\u4e3a f(x)=a x^{3}+b x^{2}+c x+d, \u8fb9\u754c\u70b9\u9700\u8981\u6ee1\u8db3 \u201c\u4e8c\u9636\u5bfc\u4e3a\u96f6\u201d\u7684\u7ea6\u675f, \u5373</p>  f^{\\prime \\prime}\\left(\\xi_{0}\\right)=0,  <p>\u8fd9\u51cf\u5c11\u4e86 1 \u4e2a\u81ea\u7531\u53c2\u6570\u3002</p>"},{"location":"stat/ASL-note2/#example-south-african-heart-disease-continued","title":"Example: South African Heart Disease (Continued)","text":""},{"location":"stat/ASL-note2/#smoothing-splines","title":"Smoothing Splines","text":"<p>\u8fd9\u91cc\u6211\u4eec\u8ba8\u8bba\u4f7f\u7528\u6700\u5927\u7ed3\u70b9\u96c6\u5408\u7684\u6837\u6761\u57fa\u65b9\u6cd5\u6765\u5f7b\u5e95\u907f\u514d\u7ed3\u70b9\u9009\u62e9\u7684\u95ee\u9898\uff0e\u62df\u5408\u7684\u590d\u6742\u5ea6\u7531\u6b63\u5219\u5316\u6765\u63a7\u5236\uff0e</p> <p>With regression splines, choosing knots is a tricky business. \u4e0a\u9762\u8bb2\u7684\u300c\u56de\u5f52\u6837\u6761\u300d, \u8fd9\u91cc\u662f\u5149\u6ed1\u6837\u6761.</p> <p>Smoothing Splines</p> <ul> <li>avoid knot selection problem by using a maximal set of knots</li> <li>control for overfitting by shrinking the coefficients of the estimated function</li> </ul> <p>Smoothing splines can be motivated directly by 1 . natural cubic splines with knots at \\left(x_{1}, x_{2}, \\ldots, x_{n}\\right) and regularization on parameters or 2. a function minimization perspective. We\u2019ll talk about 2 in accordance with the text.</p> <p>Among all functions f(x) with two continuous derivatives, find one that minimizes the penalized residual sum of squares</p>  \\operatorname{RSS}(f, \\lambda)=\\sum_{i=1}^{N}\\left(y_{i}-f\\left(x_{i}\\right)\\right)^{2}+\\lambda \\int f^{\\prime \\prime}(t)^{2} d(t)  <ul> <li>the first term quantifies the goodness-of-fit to the data</li> <li>the second term measures the roughness (curvature in f )</li> <li>\\lambda : smoothing parameter</li> </ul> <p>Special case</p> <ul> <li>\\lambda=0: f can be any function that interpolates the data.</li> <li>\\lambda=\\infty: f is simple least squares line</li> </ul> <p>With \\lambda \\in(0, \\infty), there exists a unique minimizer - a natural cubic spline with knots at the unique values of the x_{i}, i=1, \\ldots, N. \u8fd9\u91cc\u7684 f \u662f\u4efb\u610f\u7684, \u56e0\u6b64\u662f\u65e0\u9650\u7ef4\u7a7a\u95f4; \u7136\u800c\u53ef\u4ee5\u8bc1\u660e, \u5728\u4e0a\u9762\u7684\u4e8c\u9636\u5fae\u5206\u60e9\u7f5a\u9879\u4e0b, \u5b58\u5728\u4e00\u4e2a\u5728\u6709\u9650\u7ef4\u7684\u552f\u4e00\u6700\u5c0f\u70b9, \u662f\u4e00\u4e2a\u7ed3\u70b9\u5728\u4e0d\u91cd\u590d\u7684 x_i, i=1,2,...,N \u5904\u7684\u81ea\u7136\u4e09\u6b21\u6837\u6761. \u76f8\u5173\u8bc1\u660e\u89c1 here</p> <p>THEOREM : Let g be any differentiable function on [a, b] for which g\\left(x_{i}\\right)=z_{i} for i=1, \\ldots, n. Suppose n \\geqslant 2, and that \\tilde{g} is the natural cubic spline interpolant to the values z_{1}, \\ldots, z_{n} at points x_{1}, \\ldots, x_{n} with a&lt;x_{1}&lt;&lt;x_{n}&lt;b. Then \\int\\left(g^{\\prime \\prime}\\right)^{2} \\geqslant \\int\\left(\\tilde{g}^{\\prime \\prime}\\right)^{2} with equality only if \\tilde{g}=g</p> <p>\u56e0\u6b64, \u53ef\u4ee5\u57fa\u4e8e\u8fd9\u4e00\u7ed3\u8bba\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u63a8\u5bfc</p> <p>Since now f(x) is a natural cubic spline, f(x)=\\sum_{j=1}^{N} N_{j}(x) \\theta_{j} The penalized RSS reduces to:</p>  R S S(\\theta, \\lambda)=(y-N \\theta)^{\\top}(y-N \\theta)+\\lambda \\theta^{\\top} \\Omega_{N} \\theta  <ul> <li>N is n \\times n, with N_{i j}=N_{j}\\left(X_{i}\\right)</li> <li>\\Omega is n \\times n, with \\Omega_{N_{i j}}=\\int N_{i}^{\\prime \\prime}(t) N_{j}^{\\prime \\prime}(t) d t</li> </ul> <p>\u56e0\u6b64 [\u662f\u5e7f\u4e49\u5cad\u56de\u5f52]</p> <ul> <li>The solution: \\hat{\\theta}=\\left(N^{\\top} N+\\lambda \\Omega_{N}\\right)^{-1} N^{\\top} y</li> <li>The fitted: \\hat{y}=N \\hat{\\theta}=N\\left(N^{\\top} N+\\lambda \\Omega_{N}\\right)^{-1} N^{\\top} y=S_{\\lambda} y</li> <li>S_{\\lambda}: smoother matrix</li> </ul>"},{"location":"stat/ASL-note2/#pre-specify-the-amount-of-smoothing","title":"Pre-specify the Amount of Smoothing","text":"<p>\u6211\u4eec\u8fd8\u6ca1\u6709\u6307\u51fa\u5149\u6ed1\u6837\u6761\u7684 \u03bb \u662f\u600e\u4e48\u9009\u53d6\u7684\uff0e\u672c\u7ae0\u7684\u540e\u9762\u6211\u4eec\u63cf\u8ff0\u4f7f\u7528\u81ea\u52a8\u5316\u65b9 \u6cd5\uff0c\u6bd4\u5982\u4ea4\u53c9\u9a8c\u8bc1\uff0e\u5728\u8fd9\u90e8\u5206\u4e2d\u6211\u4eec\u8ba8\u8bba\u9884\u5148\u786e\u5b9a\u5149\u6ed1\u603b\u91cf\u7684\u76f4\u89c2\u65b9\u5f0f\uff0e</p> <p>Assume \\lambda is fixed, smoothing spline operates through linear operator</p>  \\hat{f}=N\\left(N^{\\top} N+\\lambda \\Omega_{N}\\right)^{-1} N^{\\top} y=S_{\\lambda} y  <ul> <li>fits are linear in y \u4e5f\u5373, \u7ebf\u6027\u5149\u6ed1 (linear smoother) \u548c\u7ebf\u6027\u56de\u5f52\u4e00\u6837</li> <li>smoother matrix S_{\\lambda} depends on X and \\lambda</li> </ul> <p>Compare hat matrix H and smoother matrix S_{\\lambda}</p> <ul> <li>symmetric, positive semidefinite?</li> <li>idempotent?</li> <li>rank?</li> </ul>"},{"location":"stat/ASL-note2/#smoother-matrix","title":"Smoother Matrix","text":"<p>\u4e0a\u9762\u7684\u5e73\u6ed1\u77e9\u9635 S_{\\lambda} = N\\left(N^{\\top} N+\\lambda \\Omega_{N}\\right)^{-1} N^{\\top} \u53ef\u4ee5\u5199\u6210\u4ee5\u4e0b\u5f62\u5f0f, \u53c2\u89c1 here ; \u8fd9\u6837\u53ef\u4ee5\u5206\u79bb\u51fa\u8d85\u53c2\u6570 \\lambda, \u4ece\u800c\u8fdb\u884c\u5947\u5f02\u503c\u5206\u89e3</p> <ol> <li>Re-write S_{\\lambda} in the Reinsch form</li> </ol>  S_{\\lambda}=(I+\\lambda K)^{-1}  <ul> <li>K=N^{-\\top} \\Omega_{N} N^{-1}, does not depend on \\lambda</li> <li>K : penalty matrix since P R S S=(y-f)^{\\top}(y-f)+\\lambda f^{\\top} K f</li> </ul> <ol> <li>Eigen decomposition of S_{\\lambda}</li> </ol>  S_{\\lambda}=\\sum_{k=1}^{N} \\rho_{k}(\\lambda) \\mu_{k} \\mu_{k}^{\\top}  <ul> <li>Eigenvalue \\rho_{k}(\\lambda)=\\frac{1}{1+\\lambda d_{k}}</li> <li>Eigenvector \\mu_{k}</li> </ul> <p>Note: \\mu_{k} are also the eigenvector of K, and d_{k} are the eigenvalue of K</p> <p>Effective degree of freedom d f_{\\lambda}=\\operatorname{tr}\\left(S_{\\lambda}\\right)</p> <p></p>"},{"location":"stat/ASL-note2/#highlights-of-eigen-representation","title":"Highlights of Eigen Representation","text":"S_{\\lambda}=\\sum_{k=1}^{N} \\rho_{k}(\\lambda) \\mu_{k} \\mu_{k}^{\\top}  <ul> <li>The eigenvectors are not affected by \\lambda \u5947\u5f02\u5411\u91cf\u4e0e\u8d85\u53c2\u65e0\u5173</li> <li>S_{\\lambda} y=\\sum_{k=1}^{N} \\mu_{k} \\rho_{k}(\\lambda)\\left\\langle\\mu_{k}^{\\top} y\\right\\rangle, compare to regression spline with M basis? \u53ef\u4ee5\u770b\u5230, \u8fd9\u91cc\u662f\u901a\u5bf9 y \u5173\u4e8e\u57fa \\mu_k \u8fdb\u884c\u4e86\u5206\u89e3, \u901a\u8fc7 \\rho_{k}(\\lambda) \u63a7\u5236\u4e86\u6536\u7f29\u7684\u5927\u5c0f; \u8fd9\u5c31\u548c\u4e0a\u4e00\u8282\u4e2d\u7684\u300c\u56de\u5f52\u6837\u6761\u300d\u4e0d\u4e00\u6837, \u5728\u56de\u5f52\u6837\u6761\u4e2d, \u7ec4\u5206\u8981\u4e48\u4e0d\u53d8\u8981\u4e48\u6536\u7f29\u4e3a 0. \u2014\u2014 \uff0e\u57fa\u4e8e\u8fd9\u4e2a\u539f\u56e0\u5149\u6ed1\u6837\u6761 \u88ab\u79f0\u4f5c\u6536\u7f29 (shrinking)\u5149\u6ed1\u5668\uff0c\u800c\u56de\u5f52\u6837\u6761\u88ab\u79f0\u4f5c\u6295\u5f71 (projection) \u5149\u6ed1\u5668.</li> <li>d_{1}=d_{2}=0, thus \\rho_{1}(\\lambda)=\\rho_{2}(\\lambda)=1, linear functions are never shrunk</li> <li>The eigenvectors have increasing complexity, and the higher the complexity, the more they are shrunk</li> <li>Reparametrize RSS with new basis \\mu_{k}, R S S=\\|y-U \\theta\\|+\\lambda \\theta^{\\top} D \\theta, thoughts? \u5176\u4e2d U \u5217\u5411\u91cf\u4e3a u_k \uff0c\u4e14 D \u4e3a\u5143\u7d20\u4e3a d_k \u7684\u5bf9\u89d2\u77e9\u9635\uff0e</li> <li>d f_{\\lambda}=\\operatorname{tr}\\left(S_{\\lambda}\\right)=\\sum_{k=1}^{N} \\rho_{k}(\\lambda), compare to regression splines? \u5728\u6295\u5f71\u5149\u6ed1\u5668\u4e2d, \u6240\u6709\u7684\u7279\u5f81\u503c\u4e3a 1.</li> </ul>"},{"location":"stat/ASL-note2/#choosing-lambdalambda","title":"Choosing \\lambda","text":"<p>see here</p> <p>Crucial and tricky\u2026</p> <ol> <li>Fixing the Degrees of Freedom \u53ef\u4ee5\u76f4\u63a5\u8ba4\u4e3a\u6307\u5b9a    - d f_{\\lambda}=\\operatorname{tr}\\left(S_{\\lambda}\\right) is monotone in \\lambda for smoothing splines    - R \u4e2d\u53ef\u4ee5\u91c7\u7528 <code>smooth.spline(x, y, df=6)</code> \u786e\u5b9a\u5149\u6ed1\u7a0b\u5ea6</li> <li>Cross validation<ul> <li>\\operatorname{EPE}\\left(\\hat{f}_{\\lambda}\\right)=\\sigma^{2}+\\operatorname{Var}\\left(\\hat{f}_{\\lambda}\\right)+\\operatorname{Bias}(\\hat{f}(\\lambda))^{2}</li> <li>K-fold cross-validation</li> <li>seek a good compromise between bias and variance</li> </ul> </li> </ol> <p></p>"},{"location":"stat/ASL-note2/#nonparametric-logistic-regression","title":"Nonparametric Logistic Regression","text":"<p>see here</p> <p>Logistic regression with single quantitative input X</p>  \\log \\frac{\\operatorname{Pr}(Y=1 \\mid X=x)}{\\operatorname{Pr}(Y=0 \\mid X=x)}=f(x)  <ul> <li>Fitting f(x) in a smooth fashion leads to a smooth estimate of the conditional probability \\operatorname{Pr}(Y=1 \\mid x)</li> </ul> <p>\u8fd9\u662f\u4e4b\u524d\u7684\u4f3c\u7136\u51fd\u6570. The likelihood function, where \\operatorname{Pr}(Y=1 \\mid X=x)=p\\left(x_{i}\\right)</p>  l=\\sum_{i=1}^{N}\\left\\{y_{i} \\log p\\left(x_{i}\\right)+\\left(1-y_{i}\\right) \\log \\left(1-p\\left(x_{i}\\right)\\right)\\right\\}  <p>since p\\left(x_{i}\\right)=\\frac{e^{f\\left(x_{i}\\right)}}{\\left.1+e^{f\\left(x_{i}\\right)}\\right)},</p>  l=\\sum_{i=1}^{N}\\left\\{y_{i} f\\left(x_{i}\\right)-\\log \\left(1+e^{f\\left(x_{i}\\right)}\\right)\\right\\}"},{"location":"stat/ASL-note2/#penalized-log-likelihood","title":"Penalized log-likelihood","text":"<p>\u5229\u7528\u5149\u6ed1\u5316\u7684\u601d\u60f3, \u52a0\u4e0a\u60e9\u7f5a\u9879</p>  l=\\sum_{i=1}^{N}\\left\\{y_{i} f\\left(x_{i}\\right)-\\log \\left(1+e^{f\\left(x_{i}\\right)}\\right)-\\frac{1}{2} \\int\\left\\{f^{\\prime \\prime}(t)\\right\\}^{2} d t\\right\\}  <p>Optimal f is a finite-dimensional natural spline with knots at the unique values of x.</p> <p>Represent f(x)=\\sum_{j=1}^{N} N_{j}(x) \\theta_{j}</p> <ul> <li>\\frac{\\partial l(\\theta)}{\\partial \\theta}=N^{\\top}(y-p)-\\lambda \\Omega \\theta</li> <li>\\frac{\\partial^{2} /(\\theta)}{\\partial \\theta \\partial \\theta^{\\top}}=-N^{\\top} W N-\\lambda \\Omega</li> </ul> <p>Newton-Raphson update</p>  \\begin{aligned} &amp;\\theta^{\\text {new }}=\\left(N^{\\top} W N+\\lambda \\Omega\\right)^{-1} N^{\\top} W\\left(N \\theta^{\\text {old }}+W^{-1}(y-p)\\right)= \\left(N^{\\top} W N+\\lambda \\Omega\\right)^{-1} N^{\\top} W * z \\\\ &amp;f^{\\text {new }}=N\\left(N^{\\top} W N+\\lambda \\Omega\\right)^{-1} N^{\\top} W\\left(f^{\\text {old }}+W^{-1}(y-p)\\right)=S_{\\lambda, W} z \\end{aligned}  <p>\u8fd9\u91cc\u7684\u66f4\u65b0\u516c\u5f0f\u7684\u5f62\u5f0f\u5f88\u6709\u6307\u5bfc\u610f\u4e49\uff0e\u5b83\u8bd5\u56fe\u7528\u4efb\u4f55\u975e\u53c2\uff08\u52a0\u6743\uff09\u56de\u5f52\u7b97\u5b50\u4ee3\u66ff S_{\\lambda, W}\uff0c\u5e76\u4e14\u5f97\u5230\u4e00\u822c\u7684\u975e\u53c2\u903b\u8f91\u65af\u8482\u56de\u5f52\u6a21\u578b\u7684\u65cf\uff0e\u5c3d\u7ba1\u8fd9\u91cc x \u662f\u4e00\u7ef4\u7684\uff0c\u4f46\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u5f88\u81ea\u7136\u5730\u63a8\u5e7f\u5230\u9ad8\u7ef4\u7684 x\uff0e\u8fd9\u4e9b\u62d3\u5c55\u662f \u5e7f\u4e49\u53ef\u52a0\u6a21\u578b (generalized additive models) \u7684\u6838\u5fc3\uff0c\u6211\u4eec\u5c06\u5728\u7b2c 9 \u7ae0\u4e2d\u8ba8\u8bba\uff0e</p>"},{"location":"stat/ASL-note2/#multidimensional-splines","title":"Multidimensional Splines","text":""},{"location":"stat/ASL-note2/#from-1-dim-to-2-dim","title":"From 1-dim to 2-dim","text":"<p>Suppose X \\in \\mathbb{R}^{2}</p> <ul> <li>h_{1 j}\\left(X_{1}\\right), j=1, \\ldots, M_{1} are the basis for coordinate X_{1}</li> <li>h_{2 k}\\left(X_{2}\\right), k=1, \\ldots, M_{2} are the basis for coordinate X_{2}</li> <li>g_{j k}(X)=h_{1 j}\\left(X_{1}\\right) h_{2 k}\\left(X_{2}\\right) are the M_{1} \\times M_{2}-dim tensor product basis \u5f20\u91cf\u79ef\u57fa\u5e95</li> </ul> <p>The new basis representation of the model</p>  g(X)=\\sum_{j=1}^{M_{1}} \\sum_{k=1}^{M_{2}} \\theta_{j k} g_{j k}(X)  <p>Note, the dimension of the basis grows exponentially fast - curse of dimensionality.</p> <p></p> <p>\u800c\u5bf9\u4e8e\u4e00\u7ef4\u5149\u6ed1\u6837\u6761(\u6b63\u5219\u5316) \u4e5f\u53ef\u4ee5\u63a8\u5e7f. The 1-dim penalty</p>  \\lambda \\int f^{\\prime \\prime}(t) d t  <p>Natural generalization to 2-dim</p>  \\iint_{\\mathbb{R}^{2}}\\left\\{\\left(\\frac{\\partial^{2} f(x)}{\\partial x_{1}^{2}}\\right)^{2}+2\\left(\\frac{\\partial^{2} f(x)}{\\partial x_{1} \\partial x_{2}}\\right)^{2}+\\left(\\frac{\\partial f(x)}{\\partial x_{2}^{2}}\\right)^{2}\\right\\} d x_{1} d x_{2}  <p>The solution is a smooth two-dimensional surface - thin plate spline</p> <ul> <li>\\lambda \\rightarrow 0, f \\rightarrow interpolating function</li> <li>\\lambda \\rightarrow \\infty, f \\rightarrow least square plane</li> <li>For \\lambda \\in(0, \\infty), \u89e3\u53ef\u4ee5\u8868\u793a\u6210\u57fa\u51fd\u6570\u7684\u7ebf\u6027\u5c55\u5f00\uff0c\u5176\u4e2d\u7cfb\u6570\u53ef\u4ee5\u901a\u8fc7\u5e7f \u4e49\u7684\u5cad\u56de\u5f52\u5f97\u5230\uff0e<ul> <li>solution has the form f(x)=\\beta_{0}+\\beta^{\\top} x+\\sum_{j=1}^{N} \\alpha_{j} h_{j}(x)</li> <li>h_{j}(x)=\\left\\|x-x_{j}\\right\\|^{2} \\log \\left\\|x-x_{j}\\right\\|, radial basis function \u5f84\u5411\u57fa\u51fd\u6570</li> </ul> </li> </ul>"},{"location":"stat/ASL-note2/#d-dim","title":"d-dim","text":"<p>More generally, when X \\in \\mathbb{R}^{d}</p>  \\min \\sum_{i=1}^{N}\\left\\{y_{i}-f\\left(x_{i}\\right)\\right\\}^{2}+\\lambda J|f|  <p>Restricted class of multidimensional splines</p>  J|f|=J\\left(f_{1}+f_{2}+\\ldots+f_{d}\\right)=\\sum_{j=1}^{d} \\int f_{j}^{\\prime \\prime}\\left(t_{j}\\right) d t_{j}  <ul> <li>f is additive</li> <li>additive penalty on each of the component functions</li> </ul>"},{"location":"stat/ASL-note2/#kernel-smoothing-methods","title":"Kernel Smoothing Methods","text":"<p>\u8fd9\u7ae0\u4e2d\u6211\u4eec\u63cf\u8ff0\u4e00\u7c7b\u56de\u5f52\u6280\u5de7, \u8fd9\u7c7b\u6280\u5de7\u80fd\u591f\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\u5b9e\u73b0\u5728\u5b9a\u4e49\u57df \\mathbb{R}^{p} \u4e2d\u4f30\u8ba1\u56de\u5f52\u51fd\u6570 f(X) \u7684\u7075\u6d3b\u6027, \u8fd9\u79cd\u65b9\u5f0f\u662f\u5728\u6bcf\u4e2a\u67e5\u8be2\u70b9 x_{0} \u5904\u5206\u522b\u62df\u5408\u4e0d\u540c\u4f46\u7b80\u5355\u7684\u6a21\u578b. \u4ec5\u4ec5\u4f7f\u7528\u79bb\u76ee\u6807\u70b9 \u5f88\u8fd1\u7684\u89c2\u6d4b\u70b9\u6765\u62df\u5408\u8fd9\u4e2a\u7b80\u5355\u7684\u6a21\u578b, \u8fd9\u79cd\u65b9\u5f0f\u5f97\u5230\u7684\u4f30\u8ba1\u51fd\u6570 \\hat{f}(X) \u5728 \\mathbb{R}^{p} \u662f\u5149\u6ed1\u7684. \u8fd9\u4e2a\u5c40 \u90e8\u5316\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u52a0\u6743\u7684\u51fd\u6570\u6216\u8005 \u6838 (kernel) \u51fd\u6570 K_{\\lambda}\\left(x_{0}, x_{i}\\right) \u6765\u5b9e\u73b0, \u6838\u51fd\u6570\u662f\u57fa\u4e8e x_{i} \u5230 x_{0} \u7684 \u8ddd\u79bb\u8d4b\u4e88\u4e00\u4e2a\u6743\u91cd. \u6838 K_{\\lambda} \u4e00\u822c\u5730\u901a\u8fc7\u53c2\u6570 \\lambda \u6765\u7f16\u53f7, \u53c2\u6570 \\lambda \u89c4\u5b9a\u4e86\u90bb\u57df\u7684\u5bbd\u5ea6. \u539f\u5219\u4e0a, \u8fd9\u4e9b \u57fa\u4e8e\u8bb0\u5fc6\u6027 (memory-based) \u7684\u65b9\u6cd5\u9700\u8981\u5f88\u5c11\u6216\u8005\u4e0d\u9700\u8981\u8bad\u7ec3; \u6240\u6709\u7684\u5de5\u4f5c\u5728 \u8d4b\u503c (evaluation) \u9636 \u6bb5\u4fbf\u5b8c\u6210\u4e86. \u6839\u636e\u8bad\u7ec3\u96c6\u552f\u4e00\u9700\u8981\u786e\u5b9a\u7684\u53c2\u6570\u662f \\lambda. \u7136\u800c, \u8be5\u6a21\u578b\u662f\u6574\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6.</p> <p>\u6211\u4eec\u4e5f\u8ba8\u8bba\u66f4\u52a0\u4e00\u822c\u7c7b\u522b\u7684\u57fa\u4e8e\u6838\u7684\u6280\u5de7, \u5b83\u4eec\u4e0e\u5176\u4ed6\u7ae0\u8282\u4e2d\u7ed3\u6784\u5316\u7684\u65b9\u6cd5\u8054\u7cfb\u5728\u4e00\u8d77\u4e86, \u8fd9\u5728\u5bc6\u5ea6\u4f30\u8ba1\u548c\u5206\u7c7b\u4e2d\u5f88\u6709\u7528.</p> <p>\u672c\u7ae0\u4e2d\u7684\u6280\u5de7\u4e0d\u5e94\u8be5\u4e0e\u6700\u8fd1\u4f7f\u7528\u6700\u591a\u7684\u201c\u6838\u65b9\u6cd5\u201d\u6df7\u6dc6. \u8fd9\u7ae0\u4e2d, \u6838\u5927\u591a\u4f5c\u4e3a\u5c40\u90e8\u5316\u7684\u5de5\u5177. \u6211\u4eec\u5728 5.8 \u8282, 14.5 .4 \u8282, 18.5 \u8282\u548c\u7b2c 12 \u7ae0\u8ba8\u8bba\u6838\u65b9\u6cd5; \u5728\u8fd9\u4e9b\u90e8\u5206, \u6838\u5728\u4e00\u4e2a\u9ad8\u7ef4\u7684\uff08\u9690\u5f0f\u7684\uff09\u7279\u5f81 \u7a7a\u95f4\u4e2d\u8ba1\u7b97\u5185\u79ef, \u800c\u4e14\u88ab\u7528\u4e8e\u6b63\u89c4\u5316\u975e\u7ebf\u6027\u5efa\u6a21\u4e2d\u3002\u6211\u4eec\u5c06\u5728\u672c\u7ae0\u7684 6.7 \u8282\u7684\u6700\u540e\u5c06\u8fd9\u4e9b\u65b9\u6cd5\u8054\u7cfb \u8d77\u6765.</p>"},{"location":"stat/ASL-note2/#1-dim-kernel-smoother","title":"1-Dim Kernel Smoother","text":"<p>\u7528KNN\u6765\u663e\u793a\u6700\u76f4\u89c2. \u5de6\u56fe\u662f\u76f4\u63a5\u7528KNN\u7684\u7ed3\u679c, \u53ef\u89c1\u62df\u5408\u7684\u51fd\u6570\u662f\u975e\u8fde\u7eed\u7684; \u53f3\u56fe\u5c55\u793a\u4e86\u91c7\u7528 Epanechnikov quadratic kernel \u7684\u5e73\u6ed1\u7ed3\u679c.</p> <p></p> <p>Kernel weighted avarage:</p>  \\hat{f}\\left(x_{0}\\right)=\\frac{\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right) y_{i}}{\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)}  <p>with the Epanechnikov quadratic kernel</p>  K_{\\lambda}\\left(x_{0}, x\\right)=D\\left(\\frac{\\left|x-x_{0}\\right|}{\\lambda}\\right)  <p>with</p>  D(t)= \\begin{cases}\\frac{3}{4}\\left(1-t^{2}\\right), &amp; \\text { if }|t| \\leqslant 1 \\\\ 0, &amp; \\text { otherwise }\\end{cases}"},{"location":"stat/ASL-note2/#kernel-weighted-varying-metric-window-size","title":"Kernel Weighted - Varying Metric Window Size","text":"<p>The previous Epanechnikov kernel weighted average</p> <ul> <li>constant metric window size \\lambda=0.2</li> <li>does not change while x_{0} moves</li> <li>KNN adapts to the local density of x_{i}</li> </ul> <p>Kernel with adaptive neighborhood</p>  K_{\\lambda}\\left(x_{0}, x\\right)=D\\left(\\frac{\\left|x-x_{0}\\right|}{h_{\\lambda}\\left(x_{0}\\right)}\\right)  <ul> <li>For KNN, h_{k}\\left(x_{0}\\right)=\\left|x_{0}-x_{[k]}\\right|</li> <li>where x_{[k]} is the k_{t h} closest x_{i} to x_{0}</li> <li>Boundary issues with metric neighbourhood and KNN</li> </ul>"},{"location":"stat/ASL-note2/#popular-kernels-for-smoothing","title":"Popular Kernels for Smoothing","text":"\\hat{f}\\left(x_{0}\\right)=\\frac{\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right) y_{i}}{\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)} \\quad K_{\\lambda}\\left(x_{0}, x\\right)=D\\left(\\frac{\\left|x-x_{0}\\right|}{\\lambda}\\right)  <ul> <li>Epanechnikov - Compact, non-differentiable at the boundary</li> </ul>  D(t)= \\begin{cases}\\frac{3}{4}\\left(1-t^{2}\\right), &amp; \\text { if }|t| \\leqslant 1 \\\\ 0, &amp; \\text { otherwise }\\end{cases}  <ul> <li>Tri-cube kernel - Compact, differentiable at the boudary</li> </ul>  D(t)= \\begin{cases}\\left(1-|t|^{3}\\right)^{3}, &amp; \\text { if }|t| \\leqslant 1 \\\\ 0, &amp; \\text { otherwise }\\end{cases}  <ul> <li>Gaussian kernel - non-compact, continuously differentiable</li> </ul>  D(t)=\\phi(t)"},{"location":"stat/ASL-note2/#local-linear-regression","title":"Local Linear Regression \u5c40\u90e8\u7ebf\u6027\u56de\u5f52","text":"<p>Boundary Problem: \u4e0a\u9762\u63d0\u5230\u7684 locally weighted average \u5c40\u90e8\u52a0\u6743\u5e73\u5747\u7684\u65b9\u6cd5, \u5728\u8fb9\u754c\u4e0a\u4f1a\u6709\u95ee\u9898</p> <ul> <li>Boundary problems occur due to asymmetry of the kernel</li> <li>Can happen in the interior region if X is not equally spaced \u4e0d\u4ec5\u4f1a\u53d1\u751f\u5728\u8fb9\u754c\u4e0a\u4e0a, \u8fd8\u662f\u7531\u4e8e\u6838\u7684\u4e0d\u5bf9\u79f0\u6027, \u5176\u5728\u533a\u95f4\u5185\u90e8\u4e5f\u53ef\u80fd\u53d1\u751f</li> </ul> <p>\u89e3\u51b3\u65b9\u6cd5: \u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52 \u2014\u2014 \u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u4f1a\u7ea0\u6b63\u4e3a\u4e00\u9636\u8bef\u5dee.</p> <p></p> <p>Locally weighted regression solves a weighted least squares problem at each target point x_{0}</p>  \\min_{\\alpha\\left(x_{0}\\right), \\beta\\left(x_{0}\\right)} \\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)\\left[y_{i}-\\alpha\\left(x_{0}\\right)-\\beta\\left(x_{0}\\right) x_{i}\\right]^{2}  <ul> <li>Design matrix B_{N \\times 2}, with i_{t h} row b(x)^{\\top}=\\left(1, x_{i}\\right)</li> <li>Weight matrix W_{N \\times N}\\left(x_{0}\\right), with i_{t h} diagonal element K_{\\lambda}\\left(x_{0}, x_{i}\\right)</li> </ul>  \\hat{f}\\left(x_{0}\\right)=b\\left(x_{0}\\right)^{\\top}\\left(B^{\\top} W\\left(x_{0}\\right) B\\right)^{-1} B^{\\top} W\\left(x_{0}\\right) y=\\sum_{i=1}^{N} l_{i}\\left(x_{0}\\right) y_{i}  <ul> <li>Estimate is linear in y</li> <li>l_{i}\\left(x_{0}\\right) combines the weighting kernel K_{\\lambda}\\left(x_{0}, \\cdot\\right) and least square operation, also referred to as equivalent kernel \u7b49\u4ef7\u6838</li> </ul> <p></p> <p>Automatic Kernel Carpentry \u5c40\u90e8\u7ebf\u6027\u56de\u5f52\u81ea\u52a8\u5730\u4fee\u6539\u6838\u5c06\u504f\u5dee\u77eb\u6b63\u5230\u6070\u597d\u4e3a\u4e00\u9636\uff0c\u8fd9\u662f\u88ab\u79f0\u4e3a \u81ea\u52a8\u6838\u4f5c\u54c1 (automatic kernel carpentry) \u7684\u73b0\u8c61</p> <p>Local linear regression automatically modifies the kernel to correct bias exactly to first order</p>  \\begin{gathered} E\\left(\\hat{f}\\left(x_{0}\\right)\\right)=\\sum_{i=1}^{N} l_{i}\\left(x_{0}\\right) f\\left(x_{i}\\right)= \\\\ f\\left(x_{0}\\right) \\sum_{i=1}^{N} l_{i}\\left(x_{0}\\right)+f^{\\prime}\\left(x_{0}\\right) \\sum_{i=1}^{N}\\left(x_{i}-x_{0}\\right) l_{i}\\left(x_{0}\\right)+\\frac{f^{\\prime \\prime}\\left(x_{0}\\right.}{2} \\sum_{i=1}^{N}\\left(x_{i}-x_{0}\\right)^{2} l_{i}\\left(x_{0}\\right)+R \\end{gathered}  <p>It can be shown that for local linear regression (\u8bc1\u660e\u89c1 here; \u4f46\u66f4\u4e3a\u7b80\u5355\u7684\u4e8b\u662f\u89c2\u5bdf L^TB = b(x_0), \u4e5f\u5373 L^T(1,x)=(1,x_0))</p> <ul> <li>\\sum_{i=1}^{N} l_{i}\\left(x_{0}\\right)=1</li> <li>\\sum_{i=1}^{N}\\left(x_{i}-x_{0}\\right) l_{i}\\left(x_{0}\\right)=0</li> </ul> <p>Therefore, the bias only depends on quadratic and higher older terms</p> <ul> <li>E \\hat{f}\\left(x_{0}\\right)-f\\left(x_{0}\\right)=\\frac{f^{\\prime \\prime}(x)}{2} \\sum_{i=1}^{N}\\left(x_{i}-x_{0}\\right)^{2} l_{i}\\left(x_{0}\\right)+R</li> <li>Typically small under suitable smoothness assumption</li> </ul>"},{"location":"stat/ASL-note2/#local-polynomial-regression","title":"Local Polynomial Regression","text":"<p>Local linear fits bias: trimming the hills and filling the valleys</p> <p>Local polynomial regression of degree-d</p>  \\min _{\\alpha\\left(x_{0}\\right), \\beta_{j}\\left(x_{0}\\right), j=1, \\ldots, d} \\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)\\left[y_{i}-\\alpha\\left(x_{0}\\right)-\\sum_{j=1}^{d} \\beta_{j}\\left(x_{0}\\right) x_{i}^{j}\\right]^{2}  <ul> <li>Able to correct the bias in the regions of curvature</li> <li>But with increased variance (bias-variance tradeoff)</li> <li>\u65b9\u5dee \\left\\|l\\left(x_{0}\\right)\\right\\|^2 increase with d</li> </ul> <p>Whether or not to choose local quadratic regression</p> <ul> <li>If interested in extrapolation (boundary) \\rightarrow local linear</li> </ul> <p></p>"},{"location":"stat/ASL-note2/#local-regression-in-rprp","title":"Local Regression in R^p","text":"<p>\u6838\u5149\u6ed1\u548c\u5c40\u90e8\u56de\u5f52\u53ef\u4ee5\u975e\u5e38\u81ea\u7136\u5730\u63a8\u5e7f\u5230\u4e8c\u7ef4\u6216\u66f4\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\uff0e</p> <p>Convert distance based kernel to radius based kernel</p>  K_{\\lambda}\\left(x_{0}, x\\right)=D\\left(\\frac{\\left\\|x-x_{0}\\right\\|}{\\lambda}\\right)  <ul> <li>\\|\\cdot\\| is the Euclidean norm</li> <li>Since the Euclidean norm depends on the units in each coordinate, need to standardize each x_{j}</li> </ul>"},{"location":"stat/ASL-note2/#problems-with-local-regression-in-mathbbrpmathbbrp","title":"Problems with local regression in \\mathbb{R}^{p}","text":"<p>Boundary problem</p> <ul> <li>More and more points can be found on the boundary as dimension increases</li> <li>\u76f4\u63a5\u4fee\u6539\u6838\u6765\u9002\u5e94\u4e8c\u7ef4\u8fb9\u754c\u4f1a\u53d8\u5f97\u5f88\u590d\u6742\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u4e0d\u89c4\u5219\u7684\u8fb9\u754c</li> <li>Local polynomial regression still helps automatically deal with boundary issues for high dimensions (but not desired)</li> </ul> <p>Curse of Dimensionality</p> <ul> <li>Impossible to simultaneously maintain localness (low bias) and a sizable sample in the neighbourhood (low variance) without total sample size increasing exponentially in p</li> </ul> <p>Non-visualizable</p> <ul> <li>Goal of getting a smooth fitting function is to visualize the data which is difficult in high dimensions</li> <li>\u4e0d\u591f\u76f4\u89c2, it is quite di\ufb03cult to interpret the results except at a gross level. From a data analysis perspective, conditional plots are far more useful. \u8fd9\u91cc\u7684 conditional plots \u6307\u7684\u5c31\u662f\u4e0b\u9762\u7684\u4f8b\u5b50.</li> </ul> <p>\u81ed\u6c27\u6d53\u5ea6\uff5e\u592a\u9633\u8f90\u5c04\u3001\u6e29\u5ea6\u3001\u98ce\u901f. \u5171\u6709\u4e09\u4e2a\u53d8\u91cf, \u63a7\u5236 Wind \u548c Temp \u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u5355\u53d8\u91cf\u7684\u56de\u5f52.</p> <p></p>"},{"location":"stat/ASL-note2/#structured-local-regression-models-in-rprp","title":"Structured Local Regression Models in R^p","text":"<p>\u5f53\u7ef4\u5ea6\u4e0e\u6837\u672c\u5927\u5c0f\u7684\u6bd4\u7387\u4e0d\u662f\u5f88\u597d\uff0c\u5219\u5c40\u90e8\u56de\u5f52\u5bf9\u6211\u4eec\u6ca1\u6709\u592a\u5927\u5e2e\u52a9\uff0c\u9664\u975e\u6211\u4eec\u60f3\u8981\u5bf9\u6a21\u578b\u505a\u51fa\u4e00\u4e9b\u7ed3\u6784\u5316\u7684\u5047\u8bbe\uff0e\u8fd9\u672c\u4e66\u7684\u5f88\u591a\u90e8\u5206\u662f\u5173\u4e8e\u7ed3\u6784\u5316\u56de\u5f52\u548c\u5206\u7c7b\u6a21\u578b\u7684\uff0e\u8fd9\u91cc\u6211\u4eec\u5173\u6ce8\u4e00\u4e9b\u4e0e\u6838\u65b9\u6cd5\u76f4\u63a5\u76f8\u5173\u7684\u65b9\u6cd5\uff0e</p> <p>Sperical kernel (\u7403\u9762\u6838, \u5c31\u662f\u6ca1\u6709\u4e2d\u95f4\u7684\u53c2\u6570\u77e9\u9635 A) gives equal weight to each coordinate, while a structured kernel emphasizes weight on certain coordinates using matrix A</p>  K_{\\lambda, A}\\left(x_{0}, x\\right)=D\\left(\\frac{\\left(x-x_{0}\\right)^{\\top} A\\left(x-x_{0}\\right)}{\\lambda}\\right)  <ul> <li>A is positive semidefinite \u534a\u6b63\u5b9a\u77e9\u9635</li> <li>Entire coordinates or directions can be downgraded or omitted by imposing appropriate restrictions on A.</li> <li>A - diagonal?</li> <li>A - low rank?</li> <li>General forms of A not recommended</li> </ul> <p>\u76f8\u8f83\u4e8e\u4e0d\u52a0\u9650\u5b9a\u7684\u4efb\u610f\u53c2\u6570\u77e9\u9635, \u53ef\u4ee5\u5bf9 A \u8fdb\u884c\u4e00\u5b9a\u7684\u9650\u5236.</p>"},{"location":"stat/ASL-note2/#structured-regression-functions","title":"Structured Regression Functions \u7ed3\u6784\u56de\u5f52\u51fd\u6570","text":"<p>Suppose now we are trying to fit a regression function E(Y \\mid X)=f\\left(X_{1}, X_{2}, \\ldots, X_{p}\\right) in \\mathbb{R}^{p}, in which every level of interaction is potentially present</p>  f\\left(X_{1}, X_{2}, \\ldots, X_{p}\\right)=\\alpha+\\sum_{j} g_{j}\\left(X_{j}\\right)+\\sum_{k&lt;l} g_{k l}\\left(X_{k}, X_{l}\\right)+\\ldots  <p>Eliminate some higher-order terms</p> <ul> <li>Additive model (only main effects) \u5ffd\u7565\u4ea4\u53c9\u9879</li> <li>Second order model (interactions up to degree 2)</li> </ul> <p>Estimate low order models - Iterative backfitting algorithms \u7b2c 9 \u7ae0\u4e2d\uff0c\u6211\u4eec\u63cf\u8ff0\u4e86\u5bf9\u4e8e\u62df\u5408\u8fd9\u6837\u4f4e\u9636\u4ea4\u53c9\u6a21\u578b\u7684 \u8fed\u4ee3\u5411\u540e\u62df\u5408 (iterative backfiting) \u7b97\u6cd5</p> <ul> <li>Assume all but the k_{t h} term is known</li> <li>Fit local regression of Y-\\sum_{j \\neq k} g_{j}\\left(X_{j}\\right) on X_{k}</li> <li>Repeat for each variable until convergence</li> </ul>"},{"location":"stat/ASL-note2/#varying-coefficient-models","title":"Varying Coefficient Models \u53ef\u53d8\u53c2\u6570\u6a21\u578b","text":"<p>Suppose X \\in \\mathbb{R}^{p}, divide X into \\left(X_{1}, X_{2}, \\ldots, X_{q}\\right) with q&lt;p and the remainder collected in vector Z</p>  f(X)=\\alpha(Z)+\\beta_{1}(Z) X_{1}+\\ldots+\\beta_{q}(Z) X_{q}  <ul> <li>Given Z, model is linear in X_{1}, \\ldots, X_{q}</li> <li>Each coefficient \\beta_{1}(Z), \\ldots, \\beta_{q}(Z) vary with X</li> </ul> <p>Estimate varying coefficient models - locally weighted least squares \u901a\u8fc7\u5c40\u90e8\u52a0\u6743\u6700\u5c0f\u4e8c\u4e58\u62df\u5408\u8fd9\u4e2a\u6a21\u578b</p>  \\min _{\\alpha\\left(z_{0}\\right), \\beta\\left(z_{0}\\right)} \\sum_{i=1}^{N} K_{\\lambda}\\left(z_{0}, z_{i}\\right)\\left(y_{i}-\\alpha\\left(z_{0}\\right)-x_{1 i} \\beta_{1}\\left(z_{0}\\right)-\\ldots-x_{q i} \\beta_{q}\\left(z_{0}\\right)\\right)^{2}  <p>\u4f8b\u5b50: \u4e3b\u52a8\u8109\u534a\u5f84\uff5e\u5e74\u9f84; \u76f8\u5173\u7684\u53d8\u91cf\u662f\u6027\u522b\u548c\u52a8\u8109\u8ddd\u79bb\u7684\u8fdc\u8fd1. \u5728\u53ef\u53d8\u7cfb\u6570\u6a21\u578b\u4e2d, \u8be5\u4f8b\u5b50\u7684\u5bf9\u5e94\u5173\u7cfb\u4e3a X - (age, gender, depth) , Y - aorta diameter, Z - (gender, depth)</p> <p></p> <p>\u6839\u636e\u4e0a\u9762\u7684\u56fe, \u53ef\u4ee5\u770b\u5230\u4e3b\u52a8\u8109\u534a\u5f84\u786e\u5b9e\u968f\u7740\u5e74\u9f84\u7684\u589e\u957f\u800c\u53d8\u539a; \u800c\u4ece\u4e0d\u540c depth \u7684\u8bbe\u7f6e\u4e0a, \u53ef\u4ee5\u770b\u5230 the relationship fades with distance down the aorta(\u7cfb\u6570\u53d8\u5c0f). \u4e0b\u9762\u7684\u56fe\u76f4\u63a5\u753b\u51fa\u4e86\u7cfb\u6570\u7684\u53d8\u5316</p> <p></p>"},{"location":"stat/ASL-note2/#local-likelihood-other-models","title":"Local likelihood &amp; Other Models","text":""},{"location":"stat/ASL-note2/#local-likelihood","title":"Local Likelihood","text":"<p>Likelihood - (generalized) linear model</p>  l(\\beta)=\\sum_{i=1}^{N} l \\left(y_{i}, x_{i}^{\\top} \\beta\\right)  <p>Local likelihood - relax the global linear assumption to local linear</p>  l\\left(\\beta\\left(x_{0}\\right)\\right)=\\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right) l \\left(y_{i}, x_{i}^{\\top} \\beta\\left(x_{0}\\right)\\right)"},{"location":"stat/ASL-note2/#example-multiclass-logistic-regression-model","title":"Example: Multiclass logistic regression model","text":"<p>Multiclass logistic regression model, \\mathcal{G}=(1,2, \\ldots, J)</p>  \\operatorname{Pr}(G=j \\mid X=x)=\\frac{e^{\\beta_{j 0}+\\beta_{j}^{\\top} x}}{1+\\sum_{k=1}^{J-1} e^{\\beta_{k 0}+\\beta_{k}^{\\top} x}}  <p>The local version of multiclass logistic regression \u4fee\u6539\u4e3a\u5c40\u90e8\u5f62\u5f0f\u7684\u4f3c\u7136\u51fd\u6570</p>  \\begin{aligned} l \\left(\\beta\\left(x_{0}\\right)\\right)=&amp; \\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i}\\right)\\left\\{\\beta_{g_{i}, 0}\\left(x_{0}\\right)+\\beta_{g_{i}}\\left(x_{0}\\right)^{\\top}\\left(x_{i}-x_{0}\\right)\\right.\\\\ &amp;\\left.-\\log \\left[1+\\sum_{k=1}^{J-1} \\exp \\left(\\beta_{k, 0}\\left(x_{0}\\right)+\\beta_{k}\\left(x_{0}\\right)^{\\top}\\left(x_{i}-x_{0}\\right)\\right)\\right]\\right\\} \\end{aligned}  <p>The fitted posterior probabilities</p>  \\operatorname{Pr}\\left(G=j \\mid X=x_{0}\\right)=\\frac{e^{\\hat{\\beta}_{j 0}\\left(x_{0}\\right)}}{1+\\sum_{k=1}^{j-1} e^{\\hat{\\beta}_{k 0}\\left(x_{0}\\right)}}  <p></p>"},{"location":"stat/ASL-note2/#kernel-density-estimation-classification","title":"Kernel Density Estimation &amp; Classi\ufb01cation","text":""},{"location":"stat/ASL-note2/#kernel-density-estimation","title":"Kernel Density Estimation","text":"<p>Empirical local estimate - bumpy $$ \\hat{f}{X}\\left(x $$}\\right)=\\frac{# x_{i} \\in \\mathcal{N}\\left(x_{0}\\right)}{N{\\lambda}</p> <ul> <li>\\mathcal{N}\\left(x_{0}\\right) - small metric neighbourhood around x_{0} of width \\lambda</li> </ul> <p>Parzen estimate - smooth $$ \\hat{f}{X}\\left(x\\right) $$}\\right)=\\frac{1}{N{\\lambda}} \\sum_{i=1}^{N} K_{\\lambda}\\left(x_{0}, x_{i</p> <ul> <li>Counts observations with weights that decrease with distance</li> <li>Choice of K_{\\lambda} : Gaussian Kernel K_{\\lambda}\\left(x_{0}, x\\right)=\\phi\\left(\\frac{\\left|x-x_{0}\\right|}{\\lambda}\\right)</li> </ul>"},{"location":"stat/ASL-note2/#gaussian-kernel-density-estimate","title":"Gaussian kernel density estimate","text":"<p>\u53c2\u89c1 https://jakevdp.github.io/blog/2013/12/01/kernel-density-estimation/</p>  \\hat{f}_{X}(x)=\\frac{1}{N} \\sum_{i=1}^{N} \\phi_{\\lambda}\\left(x-x_{i}\\right)=\\left(\\hat{F} * \\phi_{\\lambda}\\right)(x)  <ul> <li>\\phi_{\\lambda} denotes Gaussian density with mean 0 and standard deviation \\lambda</li> <li>Convolution of the sample empirical distribution \\hat{F} (jumpy) with \\phi_{\\lambda}( smooth )</li> </ul> <p>Gaussian kernel density estimate in \\mathbb{R}^{p} \u5728\u9ad8\u9636\u7a7a\u95f4\u4e2d\u7684\u81ea\u7136\u63a8\u5e7f $$ \\hat{f}{X}\\left(x $$}\\right)=\\frac{1}{N\\left(2 \\lambda^{2} \\pi\\right)^{\\frac{p}{2}}} \\sum_{i=1}^{N} e^{-\\frac{1}{2}\\left(\\left|x_{i}-x_{0}\\right| / \\lambda\\right)^{2}</p> <p></p>"},{"location":"stat/ASL-note2/#convolution","title":"\u5173\u4e8e\u5377\u79ef Convolution","text":"<p>\u6309\u7167\u5377\u79ef [https://en.wikipedia.org/wiki/Convolution]\u7684\u5b9a\u4e49\uff0c</p>  \\left(\\hat{F} \\star \\phi_{\\lambda}\\right)(x)=\\sum_{i=1}^{n} \\hat{F}\\left(x_{i}\\right) \\phi_{\\lambda}\\left(x-x_{i}\\right)=\\frac{1}{N} \\sum_{i=1}^{n} \\phi_{\\lambda}\\left(x-x_{i}\\right)  <p>\u53e6\u5916\uff0c\u4e24\u4e2a\u72ec\u7acb\u968f\u673a\u53d8\u91cf\u548c\u7684\u5206\u5e03\u4e5f\u53ef\u4ee5\u8868\u793a\u4e3a\u5377\u79ef\u5f62\u5f0f. \u5177\u4f53\u5730\uff0c\u5047\u8bbe X \u548c Y \u72ec\u7acb\uff0c\u5206\u5e03\u51fd \u6570\u5206\u522b\u4e3a F(x)=P(X \\leq x), G(y)=P(Y \\leq y) \uff0c\u5219 X+Y \u7684\u5206\u5e03\u51fd\u6570\u4e3a</p>  P(X+Y \\leq z)=\\int F(z-y) d G(y)=F * G(z) ."},{"location":"stat/ASL-note2/#kernel-density-classification","title":"Kernel Density Classification","text":"<p>For a J class problem, suppose we can fit nonparametric density estimates \\hat{f}_{j}(X) separately for each class, and we also have estimates of the class priors \\hat{\\pi}_{j}</p> <p>Then by Bayes Theorem, we can derive the class posterior probabilities</p>  \\hat{\\operatorname{Pr}}\\left(G=j \\mid X=x_{0}\\right)=\\frac{\\hat{\\pi}_{j} \\hat{f}_{j}\\left(x_{0}\\right)}{\\sum_{k=1}^{j} \\hat{n}_{k} \\hat{t}_{k}\\left(x_{0}\\right)}  <p>If classification is the ultimate goal</p> <ul> <li>Learning the separate class densities well may be unnecessary or misleading</li> <li>Need only estimate the posterior well near the decision boundary</li> </ul> <p></p> <p>\u4e3b\u8981\u7684\u5dee\u5f02\u51fa\u73b0\u5728\u56fe 6.14 \u4e2d\u53f3\u56fe\u7684\u9ad8 SBP \u533a\u57df\uff0e\u8fd9\u4e2a\u533a\u57df\u4e2d\u5bf9\u4e8e\u4e24\u4e2a\u7c7b\u522b\u7684\u6570\u636e\u90fd\u662f\u7a00\u758f\u7684\uff0c\u5e76\u4e14\u56e0\u4e3a\u9ad8\u65af\u6838\u5bc6\u5ea6\u4f30\u8ba1\u91c7\u7528\u5ea6\u91cf\u6838\uff0c\u6240\u4ee5\u5bc6\u5ea6\u4f30\u8ba1\u5728\u5176\u4ed6\u533a\u57df\u4e2d\u6548\u679c\u5f88\u5dee\uff08\u9ad8\u65b9\u5dee\uff09\uff0e\u5c40\u90e8\u903b\u8f91\u65af\u8482\u56de\u5f52\u65b9\u6cd5 \uff086.20\uff09\u91c7\u7528 k-NN \u5e26\u5bbd\u7684\u4e09\u6b21\u7acb\u65b9\u6838\uff1b\u8fd9\u6709\u6548\u5730\u62d3\u5bbd\u4e86\u8fd9\u4e2a\u533a\u57df\u4e2d\u7684\u6838\uff0c\u5e76\u4e14\u5229 \u7528\u5c40\u90e8\u7ebf\u6027\u5047\u8bbe\u6765\u5bf9\u4f30\u8ba1\u8fdb\u884c\u5149\u6ed1\uff08\u5728\u903b\u8f91\u65af\u8482\u5c3a\u5ea6\u4e0a\uff09\uff0e</p>"},{"location":"stat/ASL-note2/#naive-bayes-classifier","title":"Naive Bayes Classifier","text":"<p>Assumes that given class G=j, the features X_{k} are independent</p>  f_{j}(X)=\\prod_{k=1}^{p} f_{j k}\\left(X_{k}\\right)  <ul> <li>Useful when p is large, when density estimation is unattractive</li> <li>Each f_{j k} can be estimated using 1-dim kernel density estimates \u7528\u4e00\u7ef4\u6838\u5bc6\u5ea6\u4f30\u8ba1\u5355\u72ec\u7684\u7c7b\u522b\u6761\u4ef6\u7684\u8fb9\u7f18\u5bc6\u5ea6</li> <li>If X_{j} is discrete, can be estimated by appropriate histogram</li> <li>Sometimes outperform far more sophisticated models</li> </ul>  \\begin{aligned} \\log \\frac{\\operatorname{Pr}(G=I \\mid X)}{\\operatorname{Pr}(G=J \\mid X)} &amp;=\\log \\frac{\\pi_{l} f_{l}(X)}{\\pi_{J} f_{J}(X)}=\\log \\frac{\\pi_{l} \\prod_{k=1}^{p} f_{l k}\\left(X_{k}\\right)}{\\pi_{J} \\prod_{k=1}^{p} f_{J k}\\left(X_{k}\\right)} \\\\ &amp;=\\log \\frac{\\pi_{l}}{\\pi_{J}}+\\sum_{k=1}^{p} \\log \\frac{f_{l k}\\left(X_{k}\\right)}{f_{J k}\\left(X_{k}\\right)}=\\alpha_{l}+\\sum_{k=1}^{p} g_{l k}\\left(X_{k}\\right) \\end{aligned}  <ul> <li>\u8fd9\u6709\u5e7f\u4e49\u52a0\u6027\u6a21\u578b\u7684\u5f62\u5f0f\uff0c\u66f4\u591a\u7ec6\u8282\u5c06\u5728 \u7b2c 9 \u7ae0\u63cf\u8ff0. \u53c2\u89c1 here</li> <li>\u6734\u7d20\u8d1d\u53f6\u65af\u548c\u5e7f\u4e49\u52a0\u6027\u6a21\u578b\u95f4\u7684\u5173\u7cfb\u53ef\u4ee5\u7c7b\u6bd4\u6210\u7ebf\u6027\u5224\u522b\u5206\u6790\u548c\u903b\u8f91\u65af\u8482\u56de\u5f52</li> </ul>"},{"location":"stat/ASL-note2/#radial-basis-function-kernels","title":"Radial Basis Function &amp; Kernels \u5f84\u5411\u57fa\u51fd\u6570","text":"<p>see here</p>  f(x)=\\sum_{j=1}^{M} K_{\\lambda_{j}}\\left(\\xi_{j}, x\\right) \\beta_{j}=\\sum_{j=1}^{M} D\\left(\\frac{\\left\\|x-\\xi_{j}\\right\\|}{\\lambda_{j}}\\right) \\beta_{j}  <ul> <li>Treat the kernel function K_{\\lambda}(\\xi, x) as basis functions</li> <li>Each basis element is indexed by a location parameter \\xi_{j} and a scale parameter \\lambda_{j}</li> <li>Popular choice for D - standard Gaussian</li> </ul> <p>Approaches for learning parameters \\left\\{\\lambda_{j}, \\xi_{j}, \\beta_{j}\\right\\}</p> <ul> <li>\\min_{\\left\\{\\lambda_{j}, \\xi_{j}, \\beta_{j}\\right\\}_{1}^{M}} \\sum_{i=1}^{N}\\left(y_{i}-\\beta_{0}-\\sum_{j=1}^{M} \\beta_{j} \\exp \\left\\{-\\frac{\\left(x_{i}-\\xi_{j}\\right)^{\\top}\\left(x_{i}-\\xi_{j}\\right)}{\\lambda_{j}^{2}}\\right\\}\\right)^{2} [\u9ad8\u65af\u6838, \u56de\u5f52. \u79f0\u4e3a RBF \u7f51\u7edc\uff0c\u8fd9\u662f S \u578b\u795e\u7ecf\u7f51\u7edc\u7684\u66ff\u4ee3\u9009\u62e9, \u53c2\u89c1 11\u7ae0.]</li> <li>Estimate \\left\\{\\lambda_{j}, \\xi_{j}\\right\\} (often unsupervised) separately from \\beta_{j}. \u7ed9\u5b9a\u524d\u8005\uff0c\u540e\u8005\u7684\u4f30\u8ba1\u662f\u7b80\u5355\u7684\u6700\u5c0f\u4e8c\u4e58\u95ee\u9898.</li> </ul>"},{"location":"stat/ASL-note2/#mixture-models-for-density-estimation-classification","title":"Mixture Models for Density Estimation &amp; Classi\ufb01cation","text":""},{"location":"stat/ASL-note2/#gaussian-mixture","title":"Gaussian Mixture","text":"f(x)=\\sum_{m=1}^{M} \\alpha_{m} \\phi\\left(x ; \\mu_{m}, \\Sigma_{m}\\right)  <ul> <li>Mixing proportions \\alpha_{m} with \\sum_{m} \\alpha_{m}=1</li> <li>Mean \\mu_{m}, covariance matrix \\Sigma_{m}</li> <li>Usually fit by maximum likelihood using EM algorithm</li> </ul> <p>Special cases</p> <ul> <li>If \\Sigma_{m}=\\sigma_{m} I, f(x) has the form of a radial basis expansion \u5f84\u5411\u57fa \u5c55\u5f00\u7684\u5f62\u5f0f</li> <li>If in addition \\sigma_{m}=\\sigma&gt;0 is fixed and M \\uparrow N, the MLE approaches the kernel density estimate where \\hat{\\alpha}_{m}=\\frac{1}{N} and \\hat{\\mu}_{m}=x_{m}</li> </ul> <p>\u6df7\u5408\u6a21\u578b\u540c\u6837\u7ed9\u51fa\u4e86\u89c2\u6d4b i \u5c5e\u4e8e\u7ec4\u5206 m \u7684\u6982\u7387\u7684\u4f30\u8ba1. Estimate of the probability that the i_{t h} observation belongs to component m $$ \\hat{r}{i m}=\\frac{\\hat{\\alpha}} \\phi\\left(x_{i} ; \\hat{\\mu{m}, \\hat{\\Sigma}}\\right)}{\\sum_{k=1}^{M} \\hat{\\alpha{k} \\phi\\left(x} ; \\hat{\\mu{k}, \\hat{\\Sigma} $$}\\right)</p> <p></p>"},{"location":"stat/ASL-note2/#model-assessment-selection","title":"Model Assessment &amp; Selection","text":""},{"location":"stat/ASL-note2/#intro-of-model-assessment-selection","title":"Intro of Model Assessment &amp; Selection","text":""},{"location":"stat/ASL-note2/#regression-a-review","title":"Regression - A Review","text":"<ul> <li>Estimate target variable Y from a vector of inputs X.</li> <li>A prediction model \\hat{f}(X) estimated from training data T=\\left\\{\\left(x_{1}, y_{1}\\right), \\ldots,\\left(x_{n}, y_{n}\\right)\\right\\}</li> <li>The loss function L(Y, \\hat{f}(X)) measures the error / loss between Y and \\hat{f}(X)</li> <li>Common choices for loss function</li> </ul>  L(Y, \\hat{f}(X))= \\begin{cases}(Y-\\hat{f}(X))^{2}, &amp; \\text { squared error } \\\\ |Y-\\hat{f}(X)|, &amp; \\text { absolute error }\\end{cases}  <p>Test Error</p> <p>Test error, also called generalization error</p>  E r r_{T}=E[L(Y, \\hat{f}(X)) \\mid T]  <ul> <li>Prediction error over an independent test sample</li> <li>X and Y are drawn randomly from p(X, Y)</li> <li>The training set T is fixed</li> </ul> <p>Expected Prediction Error</p> <p>Expected prediction error, also called expected test error</p>  E r r=E[L(Y, \\hat{f}(X))]=E\\left[E r r_{T}\\right]  <ul> <li>Average over everything that is random</li> <li>Including the randomness in the training set that produced \\hat{f}</li> </ul> <p>We would be interested in estimating Err_T, but in most cases it is easier to estimate Err</p> <p>Training Error</p>  \\overline{e r r}=\\frac{1}{n} \\sum_{i=1}^{n} L\\left(y_{i}, \\hat{f}\\left(x_{i}\\right)\\right)  <p>As model complexity increases</p> <ul> <li>\\overline{e r r} \\rightarrow 0</li> <li>but \\operatorname{Err}_{T} increases, tendency to overfit</li> <li>\\overline{e r r} is not a good estimate of \\operatorname{Err}_{T} or E r r</li> </ul> <p></p> <ul> <li>Light Blue Curve: training error \\overline{e r r}</li> <li>Solid blue curve: expected training error E[\\overrightarrow{e r r}]</li> <li>Light red curve: conditional test error Err,</li> <li>Solid red curve: expected test error Err</li> </ul>"},{"location":"stat/ASL-note2/#classification-a-review","title":"Classification - A Review","text":"<ul> <li>Estimate categorical response G \\in\\{1, \\ldots, K\\} from a vector of inputs X</li> <li>Typically model p_{k}(X)=\\operatorname{Pr}(G=k \\mid X) and define \\hat{G}(X)=\\operatorname{argmax}_{k} p_{k}(X)</li> </ul> <p>Common choices of loss function</p> <ul> <li>0-1 loss</li> </ul>  L(G, \\hat{G}(X))=\\operatorname{lnd}(G \\neq \\hat{G}(X))  <ul> <li>log-likelihood (deviance) \u8d1f\u5bf9\u6570\u4f3c\u7136</li> </ul>  L(G, \\hat{p}(X))=-2 \\sum_{k=1}^{K} \\operatorname{lnd}(G=k) \\log \\hat{p}_{k}(X)=-2 \\log \\hat{p}_{G}(X)  <p>\u8fd9\u91cc\u7684 \u22122 \u00d7 \\operatorname{log-likelihood} \u503c\u6709\u65f6\u4e5f\u88ab\u79f0\u4e3a \u504f\u5dee (deviance)\uff0e</p>"},{"location":"stat/ASL-note2/#ulimate-goal","title":"Ulimate Goal","text":"\\hat{\\alpha}=\\operatorname{argmin}_{\\alpha} E\\left[L\\left(Y, \\hat{f}_{\\alpha}(X)\\right)\\right]  <ul> <li>\\hat{f}_{\\alpha}(x) typically has a tuning parameter \\alpha controlling its complexity</li> <li>Estimate E\\left[L\\left(Y, \\hat{f}_{\\alpha}(X)\\right)\\right] for different values of \\alpha</li> <li>Find the value of \\alpha that produces the minimum expected prediction error</li> </ul> <p>Two Separate Goals</p> <ul> <li>Model selection: Estimate the performance of di\ufb00erent models in order to choose the best one</li> <li>Model assessment: Having chosen a \ufb01nal model, estimate its prediction error (generalization error) on new data.</li> </ul> <p>For a Data-rich Situation</p> <ul> <li>Randomly divide the dataset into 3 parts: Train Validation Test</li> <li>Common split ratio 50 \\%, 25 \\%, 25 \\%</li> <li>Model selection<ul> <li>Use training set to fit each model</li> <li>Use validation set to estimate \\operatorname{Err}_{T} for each model</li> <li>Choose model with lowest \\operatorname{Err}_{T} estimate</li> </ul> </li> <li>Model assessment<ul> <li>Use the test set - unseen until this stage - to estimate E r r_{T}</li> </ul> </li> </ul> <p>For a Data-insufficient Situation</p> <p>Approximate the validation step either</p> <ul> <li>analytically with approahces such as \u5206\u6790\u7684\u624b\u6bb5 (AIC\uff0cBIC\uff0cMDL\uff0cSRM)   1. Akaike Information Criterion   2. Bayesian Information Criterion   3. Minimum Description Length   4. Structural Risk Minimization</li> <li>with efficient sample re-use \u6709\u6548\u7684\u6837\u672c\u91cd\u5229\u7528\uff08\u4ea4\u53c9\u9a8c\u8bc1\u548c\u81ea\u52a9\u6cd5\uff09   1. cross-validation   2. the bootstrap</li> </ul> <p>Each method also provides estimates of the Err or Err_T of the final chosen model</p>"},{"location":"stat/ASL-note2/#the-bias-variance-decomposition","title":"The Bias-Variance Decomposition","text":"<p>Assume an additive model</p>  Y=f(X)+\\epsilon  <p>where E(\\epsilon)=0 and \\operatorname{Var}(\\epsilon)=\\sigma_{\\epsilon}^{2}</p> <p>The expected prediction error of \\hat{f}(X) at X=x_{0}</p>  \\operatorname{Err}\\left(x_{0}\\right)=E\\left(\\left(Y-\\hat{f}\\left(x_{0}\\right)\\right)^{2} \\mid X=x_{0}\\right)  <p>can be expressed as</p>  \\operatorname{Err}\\left(x_{0}\\right) = \\sigma_{\\epsilon}^{2} + MSE =\\operatorname{IrreducibleError}+\\operatorname{Bias}^{2}+\\text { Variance }  <ul> <li>Irreducible error: \\sigma_{\\epsilon}^{2}</li> <li>Bias: E\\left[f\\left(x_{0}\\right)-E\\left[\\hat{f}\\left(x_{0}\\right)\\right]\\right]</li> <li>Variance: \\operatorname{Var}\\left[\\hat{f}\\left(x_{0}\\right)\\right]=E\\left[\\hat{f}\\left(x_{0}\\right)-E \\hat{f}\\left(x_{0}\\right)\\right]^{2}</li> </ul> <p>\u7b2c\u4e00\u9879\u662f\u76ee\u6807\u5728\u771f\u5b9e\u5747\u503c f\\left(x_{0}\\right) \u5904\u7684\u65b9\u5dee\uff0c\u65e0\u8bba\u6211\u4eec\u5bf9 f\\left(x_{0}\\right) \u7684\u4f30\u8ba1\u6709\u591a\u597d\uff0c\u8fd9\u662f\u4e0d\u53ef\u907f\u514d\u7684\uff0c\u9664\u975e \\sigma_{\\varepsilon}^{2}=0. (\u56e0\u6b64, \u6211\u4eec\u53ea\u8981\u5173\u6ce8 MSE \u5373\u53ef.) \u7b2c\u4e8c\u9879\u662f\u504f\u5dee\u7684\u5e73\u65b9\uff0c\u662f\u6211\u4eec\u4f30\u8ba1\u7684\u5747\u503c\u4e0e\u771f\u5b9e\u7684\u5747\u503c\u95f4\u7684\u504f\u5dee\u91cf\uff1b\u6700\u540e\u4e00\u9879\u662f\u65b9\u5dee\uff0c\u662f\u4f30\u8ba1\u7684 \\hat{f}\\left(x_{0}\\right) \u5728\u5176\u5747\u503c\u5904\u7684\u5e73\u65b9\u504f\u5dee\u7684\u671f \u671b\u503c. \u4e00\u822c\u5730\uff0c\u6211\u4eec\u5efa\u7acb\u7684\u6a21\u578b \\hat{f} \u8d8a\u590d\u6742\uff0c (\u5e73\u65b9) \u504f\u5dee\u8d8a\u4f4e\u4f46\u662f\u65b9\u5dee\u8d8a\u5927.</p>"},{"location":"stat/ASL-note2/#k-nearest-neighbor-regression-fit","title":"K-Nearest-Neighbor Regression Fit","text":"<p>Assuming x_{i} are fixed,</p>  \\operatorname{Err}\\left(x_{0}\\right)=\\sigma_{\\epsilon}^{2}+\\left[f\\left(x_{0}\\right)-\\frac{1}{k} \\sum_{l=1}^{k} f\\left(x_{(l)}\\right)\\right]^{2}+\\frac{\\sigma_{\\epsilon}^{2}}{k}  <ul> <li>Complexity of model is inversely related with k</li> <li>As k increases, the variance decreases</li> <li>As k increases, the squared bias increases</li> </ul> <p>\u8fd9\u91cc\u4e3a\u4e86\u7b80\u5355\u6211\u4eec\u5047\u8bbe\u8bad\u7ec3\u8f93\u5165 x_i \u4e3a\u56fa\u5b9a\u7684\uff0c\u5219\u968f\u673a\u6027\u6765\u81ea y_i \uff0e\u90bb\u5c45\u7684\u4e2a\u6570 k \u4e0e\u6a21\u578b\u590d\u6742\u5ea6\u8d1f\u76f8\u5173\uff0e\u5bf9\u4e8e\u8f83\u5c0f\u7684 k \uff0c\u4f30\u8ba1\u51fa\u7684 \\hat{f}_k (x) \u53ef\u4ee5\u5bf9\u6f5c\u5728\u7684\u51fd\u6570 f(x) \u53ef\u80fd\u6709\u66f4\u597d\u7684\u9002\u5e94\u6027\uff0e\u5f53 k \u589e\u5927\uff0c\u504f\u5dee \u2014\u2014 f(x_0) \u4e0e k-\u6700\u8fd1\u90bb\u4e2d\u7684 f(x) \u5e73\u5747\u503c\u7684\u5dee\u7684\u5e73\u65b9\u2014\u2014 \u4e00\u822c\u4f1a\u589e\u5927\uff0c\u800c\u65b9\u5dee\u4f1a\u964d\u4f4e\uff0e</p>"},{"location":"stat/ASL-note2/#linear-model-least-square-fit","title":"Linear Model - least square fit","text":"<p>Now assume a linear model</p>  \\hat{f}_{p}(x)=x^{\\top} \\hat{\\beta}  <p>where \\hat{\\beta} is p-dimensional and fit by least squares, then</p>  \\operatorname{Err}\\left(x_{0}\\right)=\\sigma_{\\epsilon}^{2}+\\left[f\\left(x_{0}\\right)-E\\left(\\hat{f}_{p}\\left(x_{0}\\right)\\right)\\right]^{2}+\\left\\|h\\left(x_{0}\\right)\\right\\|^{2} \\sigma_{\\epsilon}^{2}  <p>with h\\left(x_{0}\\right)=X\\left(X^{\\top} X\\right)^{-1} x_{0} and \\hat{f}_{p}\\left(x_{0}\\right)=x_{0}^{\\top}\\left(X^{\\top} X\\right)^{-1} X^{\\top} y</p> <p>\u6ce8\u610f\u5230\u8fd9\u91cc\u7684\u65b9\u5dee\u968f\u7740 x_0 \u53d8\u5316\uff0c \u4f46\u662f\u5b83\u7684\u5e73\u5747\u4e3a (p/N)\\sigma_\\epsilon^2.\u8fd9\u662f\u56e0\u4e3a: \u82e5\u8bb0 \\mathbf{X}=\\left[x_{1}^{\\prime}, x_{2}^{\\prime}, \\ldots, x_{N}^{\\prime}\\right]^{\\prime}, \u5219</p>  \\begin{aligned} \\sum_{i=1}^{N}\\left\\|\\mathbf{h}\\left(x_{i}\\right)\\right\\|^{2} &amp;=\\sum_{i=1}^{N} \\mathbf{h}^{T}\\left(x_{i}\\right) \\mathbf{h}\\left(x_{i}\\right) \\\\ &amp;=\\sum_{i=1}^{N} x_{i}^{T}\\left(\\mathbf{X}^{\\mathbf{T}} \\mathbf{X}\\right)^{-1} x_{i} \\\\ &amp;=\\operatorname{trace}\\left[\\mathbf{X}\\left(\\mathbf{X}^{T} \\mathbf{X}\\right)^{-1} \\mathbf{X}^{T}\\right] \\\\ &amp;=\\operatorname{trace}\\left[\\left(\\mathbf{X}^{T} \\mathbf{X}\\right)^{-1} \\mathbf{X}^{T} \\mathbf{X}\\right] \\\\ &amp;=p \\end{aligned}  <p>\u56e0\u6b64\u6709</p>  \\frac{1}{N} \\sum_{i=1}^{N} \\operatorname{Err}\\left(x_{i}\\right)=\\sigma_{\\varepsilon}^{2}+\\frac{1}{N} \\sum_{i=1}^{N}\\left[f\\left(x_{i}\\right)-\\mathrm{E} \\hat{f}\\left(x_{i}\\right)\\right]^{2}+\\frac{p}{N} \\sigma_{\\varepsilon}^{2}  <p>\u8fd9\u79f0\u4f5c \u6837\u672c\u5185 (in-sample) \u8bef\u5dee. \u8fd9\u91cc\u6a21\u578b\u590d\u6742\u5ea6\u76f4\u63a5\u4e0e\u53c2\u6570\u4e2a\u6570 p \u6709\u5173.</p>"},{"location":"stat/ASL-note2/#linear-model-ridge-fit","title":"Linear Model - Ridge Fit","text":"<p>Still assume a linear model</p>  \\hat{f}_{p, \\alpha}(x)=x^{\\top} \\hat{\\beta}_{\\alpha}  <p>where \\hat{\\beta}_{\\alpha} is p-dimensional and fit via ridge regression, then</p>  \\operatorname{Err}\\left(x_{0}\\right)=\\sigma_{\\epsilon}^{2}+\\left[f\\left(x_{0}\\right)-E\\left(\\hat{f}_{p, \\alpha}\\left(x_{0}\\right)\\right)\\right]^{2}+\\left|h_{\\alpha}\\left(x_{0}\\right)\\right|^{2} \\sigma_{\\epsilon}^{2}  <p>with h_{\\alpha}\\left(x_{0}\\right)=X\\left(X^{\\top} X+\\alpha I\\right)^{-1} x_{0} and \\hat{f}_{p, \\alpha}\\left(x_{0}\\right)=x_{0}^{\\top}\\left(X^{\\top} X+\\alpha I\\right)^{-1} X^{\\top} y Therefore, this regression fit model has a different bias and variance to the least square fit</p>"},{"location":"stat/ASL-note2/#linear-model-fine-decomposition-of-bias","title":"Linear Model - Fine Decomposition of Bias","text":"<p>\u5bf9\u4e8e\u7ebf\u6027\u6a21\u578b\u65cf\u6bd4\u5982\u5cad\u56de\u5f52\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u7cbe\u7ec6\u5730\u5206\u89e3\u504f\u5dee\uff0e</p> <p>Let \\beta_{*} denote the parameters of the best-fitting linear approx to f :</p>  \\beta_{*}=\\operatorname{argmin}_{\\beta} E\\left[\\left(f(X)-X^{\\top} \\beta\\right)^{2}\\right]  <p>Now re-write the averaged squared bias \u504f\u5dee\u5e73\u65b9\u7684\u5e73\u5747</p>  E_{x_{0}}\\left[\\left(f\\left(x_{0}\\right)-E\\left[\\hat{f}_{\\alpha}\\left(x_{0}\\right)\\right]\\right)^{2}\\right]  <p>as</p>  E_{x_{0}}\\left[\\left(f\\left(x_{0}\\right)-x_{0}^{\\top} \\beta_{*}\\right)^{2}\\right]+E_{x_{0}}\\left[\\left(x_{0}^{\\top} \\beta_{*}-E\\left[x_{0}^{\\top} \\hat{\\beta}_{\\alpha}\\right]\\right)^{2}\\right]  <p>where</p> <ul> <li>First term: Ave[Model Bias] ^{2} \u6a21\u578b\u504f\u5dee</li> <li>Second term: Ave[Estimation Bias] ^{2} \u4f30\u8ba1\u504f\u5dee</li> </ul> <p>Estimation bias is zero for least square estimate, and positive for ridge regression estimate. \u5bf9\u4e8e\u901a\u8fc7\u666e\u901a\u6700\u5c0f\u4e8c\u4e58\u62df\u5408\u7684\u7ebf\u6027\u6a21\u578b\uff0c\u4f30\u8ba1\u91cf\u7684\u504f\u5dee\u4e3a 0\uff0e\u5bf9\u4e8e\u7ea6\u675f\u7684\u62df\u5408\uff0c \u6bd4\u5982\u5cad\u56de\u5f52\uff0c\u5b83\u662f\u6b63\u7684\uff0c\u800c\u4e14\u6211\u4eec\u7528\u51cf\u5c0f\u65b9\u5dee\u7684\u597d\u5904\u8fdb\u884c\u4ea4\u6613\uff0e\u6a21\u578b\u504f\u5dee\u53ea\u53ef\u80fd\u901a\u8fc7\u5c06\u7ebf\u6027\u6a21\u578b\u7c7b\u6269\u5927\u4e3a\u66f4\u5e7f\u7684\u6a21\u578b\u7c7b\u624d\u80fd\u964d\u4f4e\uff0c\u6216\u8005\u901a\u8fc7\u5728\u6a21\u578b\u4e2d\u52a0\u5165\u53d8\u91cf\u7684\u4ea4\u53c9\u9879\u4ee5\u53ca\u53d8\u6362\u9879\uff08\u901a\u8fc7\u53d8\u91cf\u7684\u53d8\u6362\u5f97\u5230\u7684\uff09\u6765\u964d\u4f4e\uff0e</p> <p></p> <p>\u4e0a\u56fe\u7ed9\u4e86\u4e00\u4e2a\u5f62\u8c61\u7684\u4f8b\u5b50, \u5c55\u73b0\u4e86\u901a\u8fc7\u8fdb\u884c shrink \u6216\u8005 regularization, \u867d\u7136\u6a21\u578b\u7684\u504f\u5dee\u53d8\u5927\u4e86, \u5982\u679c\u65b9\u5dee\u51cf\u5c0f\u66f4\u591a\u4e5f\u662f\u503c\u5f97\u7684.</p>"},{"location":"stat/ASL-note2/#example-1","title":"Example 1","text":"<p>Set-up</p> <ul> <li>n=80 observations and p=20 predictors</li> <li>X is uniformly distributed in [0,1]^{20} \u5728\u8fd9\u6837\u4e00\u4e2a\u8d85\u7acb\u65b9\u4f53\u4e2d\u5747\u5300\u5206\u5e03</li> <li>Use squared error loss to measure Err for the regression task</li> <li>Use 0-1 loss to measure Err for the classification task</li> </ul> <p>\u4e0b\u56fe\u4e2d\u5de6\u8fb9\u7684\u8bbe\u7f6e: \u6570\u636e\u5206\u5e03\u5982\u4e0b, \u5206\u7c7b\u548c\u56de\u5f52\u4efb\u52a1\u5747\u91c7\u7528 KNN</p>  Y= \\begin{cases}0 &amp; \\text { if } X_{1} \\leqslant 0.5 \\\\ 1 &amp; \\text { if } X_{1}&gt;0.5\\end{cases}  <p>\u53f3\u8fb9\u7684\u8bbe\u7f6e: \u5206\u5e03\u5982\u4e0b, \u5bf9\u4e8e\u5206\u7c7b\u548c\u56de\u5f52\u4efb\u52a1\u5747\u91c7\u7528 best subset linear regression of size p</p>  Y= \\begin{cases}1 &amp; \\text { if } \\sum_{j=1}^{10} X_{j} \\leqslant 5 \\\\ 0 &amp; \\text { otherwise }\\end{cases}  <p></p> <p>\u56fe\u4e2d: \u9884\u6d4b\u8bef\u5dee\uff08\u7ea2\u8272\uff09\u3001\u5e73\u65b9\u8bef\u5dee\uff08\u7eff\u8272\uff09\u548c\u65b9\u5dee\uff08\u84dd\u8272\uff09.</p> <p>\u5728\u56de\u5f52\u4efb\u52a1\u7684(\u4e0a\u9762\u4e24\u5f20\u56fe), \u9884\u6d4b\u8bef\u5dee\u662f\u5e73\u65b9\u8bef\u5dee\u548c\u65b9\u5dee\u4e4b\u548c; \u4f46\u5728\u5206\u7c7b\u4efb\u52a1(\u4e0b\u9762\u4e24\u5f20\u56fe)\u5219\u4e0d\u662f, \u8fd9\u662f\u56e0\u4e3a\u5206\u7c7b\u7684\u9884\u6d4b\u8bef\u5dee\u7528\u7684\u635f\u5931\u51fd\u6570\u4e0d\u4e00\u6837. (\u6bd4\u5982\u7ed9\u5b9a\u4e00\u4e2a\u70b9, \u7c7b\u522b1\u7684\u771f\u5b9e\u6982\u7387\u4e3a0.9, \u6a21\u578b\u9884\u6d4b\u4e3a0.6, \u6b64\u65f6\u7684\u504f\u5dee\u5e73\u65b9 (0.6-0.9)^2 \u8f83\u5927, \u4f46\u662f\u9884\u6d4b\u8bef\u5dee\u4e3a\u96f6). \u603b\u800c\u8a00\u4e4b, \u300c\u504f\u5dee\u65b9\u5dee\u95f4\u7684\u6743\u8861\u5728 0-1 \u635f\u5931\u7684\u8868\u73b0\u4e0e\u5728\u5e73\u65b9\u8bef\u5dee\u635f\u5931\u7684\u8868\u73b0\u4e0d\u4e00\u6837\u300d. \u53cd\u8fc7\u6765\u610f\u5473\u7740\u8c03\u6574\u53c2\u6570\u7684\u6700\u4f18\u9009\u62e9\u53ef\u80fd\u5728\u4e24\u79cd\u8bbe\u5b9a\u4e0b\u672c\u8d28\u4e0a\u4e0d\u540c\uff0e\u6b63\u5982\u540e\u9762\u7ae0\u8282\u4e2d\u63cf\u8ff0\u7684\u90a3\u6837\uff0c\u6211\u4eec\u5e94\u8be5\u5c06\u8c03\u6574\u53c2\u6570\u7684\u9009\u62e9\u5efa\u7acb\u4e8e\u5bf9\u9884\u6d4b\u8bef\u5dee\u7684\u4f30\u8ba1\u4e4b\u4e0a\uff0e</p>"},{"location":"stat/ASL-note2/#optimism-of-training-error-rate","title":"Optimism of Training Error Rate","text":""},{"location":"stat/ASL-note2/#optimism-of-overlinetext-err-overlinetext-err","title":"Optimism of \\overline{\\text { err }}","text":"<p>\u533a\u5206 \u8bad\u7ec3\u8bef\u5dee \\overline{err} \u548c \u6cdb\u5316/\u9884\u6d4b\u8bef\u5dee generalization/prediction error Err_{T}</p> <p>Suppose \\left(x_{0}, y_{0}\\right) is a new test data point, drawn from the joint distribution of the data. \u6ce8\u610f\u4e0b\u9762\u671f\u671b\u8bef\u5dee\u4e2d, training set T \u662f\u56fa\u5b9a\u7684, X_{0}, Y_{0} new test data point.</p>  \\begin{gathered} \\overline{e r r}=\\frac{1}{N} \\sum_{i=1}^{N} L\\left(y_{i}, \\hat{f}\\left(x_{i}\\right)\\right) \\\\ E r r_{T}=E_{X_{0}, Y_{0}}\\left(L\\left(Y_{0}, \\hat{f}\\left(X_{0}\\right)\\right) \\mid T\\right) \\end{gathered}  <p>Training error \\overline{e r r}&lt;&lt;\\operatorname{Err}_{T} as it uses T for both fitting and assessment.</p> <p>\u8fd9\u91cc\u7684 \\overline{e r r} \u662f\u8bad\u7ec3\u8bef\u5dee, \u6cdb\u5316\u8bef\u5dee \\operatorname{Err}_{T} \u53ef\u4ee5\u770b\u6210\u662f \u6837\u672c\u5916 (extra-sample) \u8bef\u5dee (\u56e0\u4e3a\u6d4b\u8bd5\u8f93\u5165\u5411\u91cf\u4e0d\u9700\u8981\u4e0e\u8bad\u7ec3\u8f93\u5165\u5411\u91cf\u4e00\u81f4). \u4e0b\u9762\u5b9a\u4e49\u6837\u672c\u5185\u8bef\u5dee, \u4ece\u800c\u7406\u89e3\u8bad\u7ec3\u8bef\u5dee \\overline{e r r} \u662f\u4e50\u89c2\u4f30\u8ba1.</p> <p>Define in-sample error as \u5b9a\u4e49\u6837\u672c\u5185\u8bef\u5dee [\u8003\u8651\u5230\u4e86\u566a\u58f0\u9879]</p>  E r r_{i n}=\\frac{1}{n} \\sum_{i=1}^{n} E_{Y^{\\prime}}\\left[L\\left(y_{i}^{\\prime}, \\hat{f}\\left(x_{i}\\right)\\right) \\mid T\\right]  <p>where the expectation is over new responses y_{i}^{\\prime} at each training point x_{i} \u4e5f\u5373, \u5728\u6bcf\u4e00\u4e2a\u6837\u672c\u70b9 x_i \u5904, \u90fd\u89c2\u6d4b\u4e00\u7cfb\u5217\u65b0\u7684\u54cd\u5e94\u53d8\u91cf, \u6c42\u671f\u671b.</p> <p>Define the optimism as</p>  o p=E r r_{i n}-\\overline{e r r}  <p>The average optimism</p>  \\omega=E_{y}[o p]  <p>where</p> <ul> <li>the training input vectors are held fixed</li> <li>the expectation is over the training output values [\u56e0\u4e3a\u6709\u968f\u673a\u566a\u58f0\u7684\u5b58\u5728]</li> </ul> <p>For squared error, 0-1, and other loss functions, one can show quite generally that</p>  \\omega=\\frac{2}{n} \\sum_{i=1}^{n} \\operatorname{Cov}\\left(\\hat{y}_{i}, y_{i}\\right)  <p>\u8865\u5145\u8bf4\u660e: Here the predictors in the training set are fixed, and the expectation is over the training set outcome values; hence we have used the notation \\mathrm{E}_{\\mathbf{y}} instead of \\mathrm{E}_{\\mathcal{T}}. We can usually estimate only the expected error \\omega rather than op, in the same way that we can estimate the expected error Err rather than the conditional error \\operatorname{Err}_{\\mathcal{T}}.</p> <p>\u5bf9\u4e8e\u8fd9\u4e9b\u6982\u5ff5\u7684\u7406\u89e3\u548c\u516c\u5f0f\u8bc1\u660e\u53c2\u89c1 here \u7684\u4e60\u9898. \u603b\u800c\u8a00\u4e4b, \u8bad\u7ec3\u8bef\u5dee\u4ec5\u548c\u6837\u672c\u76f8\u5173, \u4e5f\u5373\u4e00\u4e2a x_i \u5176\u54cd\u5e94\u503c\u662f\u56fa\u5b9a\u7684; \u7136\u800c\u5bf9\u4e8e\u540c\u4e00\u4e2a\u6837\u672c\u70b9, \u7531\u4e8e\u566a\u58f0\u7684\u5b58\u5728\u5176\u771f\u5b9e\u7684\u54cd\u5e94\u503c\u6ee1\u8db3\u4e00\u4e2a\u5206\u5e03, \u8fd9\u91cc\u7684\u6837\u672c\u5185\u8bef\u5dee Err_{in} \u5c31\u662f\u8003\u8651\u4e86\u8fd9\u4e00\u7279\u70b9. \u4e00\u822c\u800c\u8a00, \u6837\u672c\u5185\u8bef\u5dee\u4f1a\u6bd4\u8bad\u7ec3\u8bef\u5dee\u66f4\u5927. \u800c average optimism \u5219\u662f\u5728\u6b64\u57fa\u7840\u4e0a, \u8003\u8651\u4e86\u8bad\u7ec3\u6837\u672c\u7684\u5206\u5e03, \u5bf9\u4e8e y \u7684\u5206\u5e03\u8fdb\u884c\u4e86\u6c42\u671f\u671b.</p> <ul> <li>The harder we fit the model, the stronger y_{i} and \\hat{y}_{i} are associated, and the larger \\omega</li> <li>Large \\omega \\rightarrow greater optimism of \\overline{e r r}</li> </ul> <p>\u901a\u8fc7\u5bf9\u4e8e op \u7684\u5206\u6790, \u53ef\u4ee5\u5bf9\u4e8e\u65b9\u5dee-\u504f\u5dee\u7684\u5206\u89e3\u6709\u66f4\u597d\u7684\u7406\u89e3. \u6a21\u578b\u7684\u590d\u6742\u5ea6\u8d8a\u9ad8, \u6837\u672c\u70b9 y_{i} \u548c\u62df\u5408\u503c \\hat{y}_{i} \u7684\u76f8\u5173\u6027\u8d8a\u9ad8, \u5219 average optimism  \\omega \u4e5f\u8d8a\u9ad8.</p> <p>In summary, we have the important relation</p>  E_{y}\\left[E r r_{i n}\\right]=E_{y}[\\overline{e r r}]+\\frac{2}{n} \\sum_{i=1}^{n} \\operatorname{Cov}\\left(\\hat{y}_{i}, y_{i}\\right)"},{"location":"stat/ASL-note2/#how-to-estimate-prediction-error","title":"How to Estimate Prediction Error","text":"<p>Option 1 [\u4f30\u8ba1\u6837\u672c\u5185\u8bef\u5dee]</p> <ul> <li>Estimate the optimism and add it to \\overline{e r r}</li> <li>C_{p}, A I C, B I C work in this way for a special class of estimates that are linear in their parameters</li> <li>Can use in-sample error for model selection but not a good estimate of Err</li> </ul> <p>Option 2 [\u76f4\u63a5\u4f30\u8ba1\u6837\u672c\u5916\u8bef\u5dee]</p> <ul> <li>Use cross-validation or bootstrap as direct estimates of the extra-sample Err \u672c\u7ae0\u540e\u9762\u63cf\u8ff0\u7684\u4ea4\u53c9\u9a8c\u8bc1\u4ee5\u53ca\u81ea\u52a9\u6cd5\u662f\u5bf9 \u6837\u672c\u5916 (extra-sample) \u8bef\u5dee Err \u76f4\u63a5\u4f30\u8ba1\u7684\u65b9\u6cd5\uff0e\u8fd9\u4e9b\u4e00\u822c\u5de5\u5177\u53ef\u4ee5\u7528\u4e8e\u4efb\u610f\u635f\u5931\u51fd\u6570\u4ee5\u53ca\u975e\u7ebf\u6027\u81ea\u9002\u5e94\u62df\u5408\u6280\u5de7\uff0e</li> </ul> <p>\u6837\u672c\u5185\u8bef\u5dee\u901a\u5e38\u4e0d\u662f\u76f4\u63a5\u611f\u5174\u8da3\u7684\uff0c\u56e0\u4e3a\u7279\u5f81\u7684\u672a\u6765\u503c\u4e0d\u53ef\u80fd\u4e0e\u5b83\u4eec\u8bad\u7ec3\u96c6\u503c\u4e00 \u81f4\uff0e\u4f46\u662f\u4e3a\u4e86\u6a21\u578b\u4e4b\u95f4\u7684\u6bd4\u8f83\uff0c\u6837\u672c\u5185\u8bef\u5dee\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u5e76\u4e14\u7ecf\u5e38\u80fd\u591f\u6709\u6548\u5730\u8fdb\u884c\u6a21\u578b\u9009\u62e9\uff0e\u539f\u56e0\u5728\u4e8e\u8bef\u5dee\u7684\u76f8\u5bf9\uff08\u800c\u4e0d\u662f\u7edd\u5bf9\uff09\u5927\u5c0f\u662f\u6211\u4eec\u6240\u5173\u5fc3\u7684\uff0e</p>"},{"location":"stat/ASL-note2/#estimates-of-err_inerr_in","title":"Estimates of Err_{in}","text":""},{"location":"stat/ASL-note2/#err_inerr_in-estimate-c_pc_p-statistic","title":"Err_{in} Estimate: C_{p} Statistic","text":"<p>If \\hat{y}_{i} is obtained by a linear fit with d inputs, then</p>  \\sum_{i=1}^{n} \\operatorname{Cov}\\left(\\hat{y}_{i}, y_{i}\\right)=d \\sigma_{\\epsilon}^{2}  <p>for the additive error model Y=f(X)+\\epsilon</p> <p>So (holds approximately when N \\rightarrow \\infty )</p>  E_{y}\\left[E r r_{i n}\\right]=E_{y}[\\overline{e r r}]+2 \\frac{d}{n} \\sigma_{\\epsilon}^{2}  <p>Adapting this expression leads to the C_{p} statistic</p>  C_{p}=\\overline{e r r}+2 \\frac{d}{n} \\hat{\\sigma}_{\\epsilon}^{2}  <p>where \\hat{\\sigma}_{\\epsilon}^{2} is an estimate of the noise variance</p>"},{"location":"stat/ASL-note2/#akaike-information-criterion","title":"Akaike Information Criterion","text":"A I C=-\\frac{2}{n} \\log l i k+2 \\frac{d}{n}  <p>where \\log l i k=\\sum_{i=1}^{n} \\log P_{\\hat{\\theta}}\\left(y_{i}\\right), and \\hat{\\theta} is the MLE of \\theta</p> <ul> <li>-\\frac{2}{n} \\log l i k rewards the fit between model and the data</li> <li>2 \\frac{d}{n} is the penalty for including extra predictors in the model</li> </ul> <p>AIC can be seen as an estimate of E r r_{i n} in this case with a log-likelihood loss</p> <p>\u53e6\u5916, \u5728 \u968f\u673a\u9879\u6b63\u6001\u6027\u5047\u8bbe\u4e0b, \u53ef\u77e5\u57fa\u4e8e RSS \u7684\u4f30\u8ba1\u548c AIC \u7b49\u4ef7, \u53c2\u89c1 wiki. \u5373\u6709\u5f62\u5f0f AIC = 2k + n \\log(RSS)</p> <p></p> <p>\u6ce8\u610f,</p>  \\sum_{i=1}^{n} \\operatorname{Cov}\\left(\\hat{y}_{i}, y_{i}\\right)=d \\sigma_{\\epsilon}^{2}  <p>\u5bf9\u4e8e\u542b\u6709\u52a0\u6027\u8bef\u5dee\u7684\u7ebf\u6027\u6a21\u578b\u5728\u5e73\u65b9\u8bef\u5dee\u635f\u5931\u4e0b\u662f\u7cbe\u786e\u6210\u7acb\u7684\uff0c\u5728\u5bf9\u6570\u4f3c\u7136\u635f\u5931\u4e0b\u662f\u8fd1\u4f3c\u6210\u7acb\u7684\uff0e\u7279\u522b\u5730\uff0c\u8fd9\u4e2a\u6cd5\u5219\u4e00\u822c\u5730\u5bf9\u4e8e 0-1 \u635f\u5931\u662f\u4e0d\u6210\u7acb\u7684.</p>"},{"location":"stat/ASL-note2/#effective-of-paramaters","title":"E\ufb00ective # of Paramaters","text":"<p>For regularized fitting need to generalize the concept of number of parameters, why?</p> <p>Consider regularized linear fitting - ridge, smoothing splines</p>  \\hat{y}=S y  <p>where</p> <ol> <li>y=\\left(y_{1}, y_{2}, \\ldots, y_{n}\\right) is the vector of training outputs</li> <li>\\hat{y}=\\left(\\hat{y}_{1}, \\ldots, \\hat{y}_{n}\\right) is the vector of predictions</li> <li>S is an n \\times n matrix, which depends on x_{1}, \\ldots, x_{n} but not y_{1}, \\ldots, y_{n}</li> </ol> <p>Define the effective number of parameters as \u6709\u6548\u53c2\u6570\u4e2a\u6570, \u4e5f\u88ab\u79f0\u4f5c \u6709\u6548\u81ea\u7531\u5ea6 (effective degrees-of-freedom)</p>  d f(S)=\\operatorname{trace}(S)  <ul> <li>If S is an orthogonal-projection matrix onto a basis set spanned by M features, then \\operatorname{trace}(S)=M</li> <li>\\operatorname{tr}(S) - the correct quantity to replace d as the number of parameters in the C_{p} statistic. \u5728 C_{p} \u7edf\u8ba1\u91cf\u4e2d\u7684 d \u5e94\u8be5\u662f\u8fd9\u91cc\u6240\u5b9a\u4e49\u7684\u300c\u6709\u6548\u81ea\u7531\u5ea6\u300d</li> <li>If y arises from an additive error model Y=f(X)+\\epsilon with \\operatorname{Var}(\\epsilon)=\\sigma_{\\epsilon}^{2}, then [\u4e0a\u9762\u6709\u6548\u81ea\u7531\u5ea6\u7684\u5b9a\u4e49\u57fa\u4e8e\u7ebf\u6027\u53d8\u6362\u7684\u77e9\u9635, \u800c\u5728\u52a0\u6027\u968f\u673a\u9879\u5047\u8bbe\u4e0b, \u53ef\u4ee5\u5f97\u5230\u66f4\u4e00\u822c\u6027\u7684\u5b9a\u4e49] \u8bc1\u660e see here</li> </ul>  \\sum_{i=1}^{n} \\operatorname{Cov}\\left(\\hat{y}_{i}, y_{i}\\right)=\\operatorname{trace}(S) \\sigma_{\\epsilon}^{2}  <p>So the more general definitin of dof is</p>  d y(\\hat{y})=\\frac{\\sum_{i=1}^{n} \\operatorname{Cov}\\left(\\hat{y}_{i}, y_{i}\\right)}{\\sigma_{\\epsilon}^{2}}"},{"location":"stat/ASL-note2/#bayesian-approach-bic","title":"Bayesian Approach &amp; BIC","text":"<p>Generic Form of BIC</p> <p>Bayesian Information Criterion (BIC)</p>  B I C=-2 \\log l i k+(\\log N) \\cdot d  <ul> <li>BIC statistic \\left(\\times \\frac{1}{2}\\right) is also known as the Schwarz criterion (SBC)</li> </ul> <p>Under Gaussian model with known variance \\sigma_{\\epsilon}^{2}, for squared error loss</p>  -2 \\log \\operatorname{lik} \\propto \\sum_{i} \\frac{\\left(y_{i}-\\hat{f}\\left(x_{i}\\right)\\right)^{2}}{\\sigma_{\\epsilon}^{2}}=\\frac{N \\cdot \\overline{e r r}}{\\sigma_{\\epsilon}^{2}}  <p>As a result, BIC can be re-written as</p>  B I C=\\frac{n}{\\sigma_{\\epsilon}^{2}}\\left(\\overline{e r r}+\\log (N) \\frac{d}{N} \\sigma_{\\epsilon}^{2}\\right)  <ul> <li>BIC is proportional to AIC, with factor 2 replaced by \\log N [\u56e0\u6b64\u53ef\u77e5\u5f53 N&gt;e^2=7.4 \u65f6, BIC \u5bf9\u4e8e\u6a21\u578b\u53c2\u6570\u7684\u60e9\u7f5a\u66f4\u5927]</li> </ul>"},{"location":"stat/ASL-note2/#derivation-of-bic","title":"Derivation of BIC","text":"<p>Starting point:</p> <ul> <li>\\left\\{M_{1}, \\ldots, M_{m}\\right\\}, a set of candidate models and their corresponding parameters \\theta_{1}, \\ldots, \\theta_{m}</li> </ul> <p>Goal:</p> <ul> <li>Choose the best model M_{i}</li> </ul> <p>How</p> <ul> <li>Training data Z=\\left\\{\\left(x_{1}, y_{1}\\right), \\ldots,\\left(x_{n}, y_{n}\\right)\\right\\}</li> <li>Priors p\\left(\\theta_{m} \\mid M_{m}\\right)</li> <li>Derive the Posterior of model M_{m}</li> </ul>  \\begin{aligned} P\\left(M_{m} \\mid Z\\right) &amp; \\propto P\\left(M_{m}\\right) p\\left(Z \\mid M_{m}\\right) \\\\ &amp; \\propto P\\left(M_{m}\\right) \\int p\\left(Z \\mid \\theta_{m}, M_{m}\\right) p\\left(\\theta_{m} \\mid M_{m}\\right) d \\theta_{m} \\end{aligned}  <p>In comparision of two models M_{m} and M_{1} \u4e3a\u4e86\u6bd4\u8f83\u4e24\u4e2a\u6a21\u578b, \u6784\u9020 \u540e\u9a8c odds (\u9009\u62e9\u6982\u7387\u8f83\u5927\u7684\u6a21\u578b)</p>  \\frac{\\operatorname{Pr}\\left(M_{m} \\mid Z\\right)}{\\operatorname{Pr}\\left(M_{l} \\mid Z\\right)}=\\frac{\\operatorname{Pr}\\left(M_{m}\\right)}{\\operatorname{Pr}\\left(M_{l}\\right)} \\times \\frac{\\operatorname{Pr}\\left(Z \\mid M_{m}\\right)}{\\operatorname{Pr}\\left(Z \\mid M_{l}\\right)}  <ul> <li>Posterior odds = prior odds * \\operatorname{BF}(Z)</li> <li>B F(Z)=\\frac{\\operatorname{Pr}\\left(Z \\mid M_{m}\\right)}{\\operatorname{Pr}\\left(Z \\mid M_{l}\\right)} is called Bayes factor \u8d1d\u53f6\u65af\u56e0\u5b50</li> <li>Indicates the contribution of the data toward the posterior odds \u6570\u636e\u5bf9\u4e8e\u540e\u9a8c odds \u7684\u8d21\u732e</li> </ul> <p>The posterior of model M_{m} is</p>  P\\left(M_{m} \\mid Z\\right) \\propto P\\left(M_{m}\\right) \\int p\\left(Z \\mid \\theta_{m}, M_{m}\\right) p\\left(\\theta_{m} \\mid M_{m}\\right) d \\theta_{m}  <ul> <li>Usually assume uniform prior P\\left(M_{m}\\right)=1 / M</li> <li>Approximate \\int p\\left(Z \\mid \\theta_{m}, M_{m}\\right) p\\left(\\theta_{m} \\mid M_{m}\\right) d \\theta_{m} by simplification and Laplace approximation</li> </ul>  \\log P\\left(Z \\mid M_{m}\\right)=\\log P\\left(Z \\mid \\hat{\\theta}_{m}, M_{m}\\right)-\\frac{d_{m}}{2} \\log N+O(1)  <ul> <li>where \\hat{\\theta}_{m} is MLE and d_{m} is # of free parameters in M_{m}</li> </ul> <p>If we define the loss function as -2 \\log \\operatorname{Pr}\\left(Z \\mid \\hat{\\theta}_{m}, M_{m}\\right), then it\u2019s equivalent to BIC</p>"},{"location":"stat/ASL-note2/#aic-vs-bic","title":"AIC vs BIC","text":"<p>If M_{\\text {true }} \\in\\left\\{M_{1}, \\ldots, M_{M}\\right\\} then as N \\rightarrow \\infty</p> <ul> <li>BIC will select M_{\\text {true }} with probability 1</li> <li>AIC will not, tends to choose models which are too complex</li> </ul> <p>However, when N is small</p> <ul> <li>BIC often choose models which are too simple</li> </ul> <p>In addition, for BIC</p> <ul> <li>\\frac{e^{-\\frac{1}{2} B I C_{m}}}{\\sum_{l=1}^{M} e^{-\\frac{1}{2} B I C_{l}}} [\u5bf9 M \u4e2a\u5143\u7d20\u7684\u6a21\u578b\u96c6\u5408\u8fdb\u884c\u8ba1\u7b97 BIC \u51c6\u5219, \u53ef\u4ee5\u5f97\u5230\u6bcf\u4e2a\u6a21\u578b\u7684\u540e\u9a8c\u6982\u7387\u5373\u4e3a\u6b64]</li> <li>Estimate not only the best model, but also their relative merits</li> </ul>"},{"location":"stat/ASL-note2/#cross-validation","title":"Cross Validation","text":""},{"location":"stat/ASL-note2/#k-fold-cross-validation","title":"K-Fold Cross Validation","text":"<p>General Approach</p> <ul> <li>Split the data into \\mathrm{K} roughly equal-size parts</li> <li>For the k_{t h} part, calculate the prediction error of the model fit using the other K-1 parts</li> <li>Do this for k=1,2, \\ldots, K and combine the \\mathrm{K} estimates of the prediction error</li> </ul> <p>When and Why</p> <ul> <li>It is applied when labelled training data is relatively sparse \u9002\u5408\u8bad\u7ec3\u6570\u636e\u8f83\u5c11\u7684\u60c5\u51b5</li> <li>This method directly estimates \\operatorname{Err}=E[L(Y, \\hat{f}(X))] \u76f4\u63a5\u4f30\u8ba1\u4e86\u6837\u672c\u5916\u8bef\u5dee</li> </ul> <p>\u5177\u4f53\u800c\u8a00</p> <ul> <li>The mapping \\kappa: 1, \\ldots, n \\rightarrow 1, \\ldots, K indicates observation i belongs to partition \\kappa(i)</li> <li>\\hat{f}^{-k}(x) is the function fitted with the k_{t h} part of the data removed</li> <li>Cross-validation estimate the prediction error</li> </ul>  C V(\\hat{f})=\\frac{1}{n} \\sum_{i=1}^{n} L\\left(y_{i}, \\hat{f}^{-\\kappa(i)}\\left(x_{i}\\right)\\right.  <ul> <li>Typical choices for \\mathrm{K} are 5 or 10</li> <li>The case K=n is shown as leave-one-out cross-validation \u7559\u4e00\u6cd5 (LOOCV)</li> </ul> <p>\u8fd9\u6837\u7684\u8bdd, \u6211\u4e48\u5229\u7528\u4e86\u8bad\u7ec3\u6570\u636e\u5bf9\u4e8e\u6cdb\u5316\u8bef\u5dee\u6709\u4e86\u4e00\u4e2a\u4f30\u8ba1. \u90a3\u4e48\u5982\u4f55\u5229\u7528 CV \u6765\u8fdb\u884c\u6a21\u578b\u9009\u62e9? \u6211\u4eec\u76f4\u63a5\u9009\u62e9\u5728 CV \u7684\u4f30\u8ba1\u4e2d\u6cdb\u5316\u8bef\u5dee\u6700\u5c0f\u7684\u90a3\u4e2a\u6a21\u578b.</p> <p>Candidate models f(x, \\alpha) indexed by a parameter \\alpha \\hat{f}^{-k}(x, \\alpha) is the \\alpha_{t h} model fit with k_{t h} part of the data removed. The define</p>  C V(\\hat{f}, \\alpha)=\\frac{1}{n} \\sum_{i=1}^{n} L\\left(y_{i}, \\hat{f}^{-\\kappa(i)}\\left(x_{i}, \\alpha\\right)\\right.  <p>Choose the model</p>  \\hat{\\alpha}=\\operatorname{argmin}_{\\alpha} C V(\\hat{f}, \\alpha)"},{"location":"stat/ASL-note2/#what-does-cross-validation-estimate","title":"What Does Cross Validation Estimate","text":"<p>Intuition says</p> <ul> <li>When \\mathrm{K}=5 or 10, C V(\\hat{f}) \\approx \\operatorname{Err} as training sets for each fold are fairly different</li> <li>When \\mathrm{K}=\\mathrm{n}, C V(\\hat{f}) \\approx \\operatorname{Err}_{T} as training sets for each fold are almost identical</li> </ul> <p>However, according to theory and simulation experiments</p> <ul> <li>Cross validation really only effectively estimates Err [\u53c2\u89c1 7.12 \u8282]</li> </ul>"},{"location":"stat/ASL-note2/#what-values-of-mathrmkmathrmk","title":"What Values of \\mathrm{K}","text":"<p>When \\mathrm{K}=\\mathrm{n}</p> <ul> <li>C V(\\hat{f}) is approximately an unbiased estimate of \\operatorname{Err}</li> <li>C V(\\hat{f}) has high variance as the \\mathrm{n} training sets are similar</li> <li>Computational burden high (except for a few exceptions)</li> </ul> <p>When \\mathrm{K}=5 (lowish)</p> <ul> <li>C V(\\hat{f}) has low variance</li> <li>C V(\\hat{f}) is potentially an upward biased estimate of \\operatorname{Err} \u504f\u5dee\u8f83\u5927</li> </ul> <p></p>"},{"location":"stat/ASL-note2/#cross-validation-right-wrong","title":"Cross Validation - Right \\&amp; Wrong","text":"<p>Task: classification problem with a large number of predictors</p> <ul> <li>N=50 samples in two equal-sized classes</li> <li>p=5000 quantitative predictors (standard Gaussian) independent of class labels</li> <li>True test error rate of any classifier 50 \\%</li> </ul> <p>Strategy 1</p> <ol> <li>Screen the predictors: Find a subset of good predictors that are correlated with the class labels</li> <li>Build a classifier: based on the subset of good predictors</li> <li>Perform cross-validation: estimate the unknown tuning parameters and Err of the final model</li> </ol> <p>Strategy 2</p> <ol> <li>Divide the samples into \\mathrm{K} groups randomly</li> <li>For each fold k=1, \\ldots, K    - Find a subset of good predictors using all the samples minus the k_{t h} fold    - Build a classifier using all the samples minus the k_{t h} fold    - Use the classifier to predict the labels for the samples in the k_{t h} fold</li> <li>The error estimates from step 2 are then accumulated over all K folds to produce the cross-validation estimate of prediction error</li> </ol> <p></p> <p>\u4e00\u822c\u5730\uff0c\u5728\u591a\u6b65\u5efa\u6a21\u8fc7\u7a0b\u4e2d\uff0c\u4ea4\u53c9\u9a8c\u8bc1\u5fc5\u987b\u5e94\u7528\u5230\u6574\u4e2a\u6a21\u578b\u6b65\u9aa4\u7684\u5e8f\u5217\u4e2d\uff0e\u7279\u522b\u5730\uff0c\u201c\u4e22\u5f03\u201d\u6837\u672c\u5fc5\u987b\u5728\u4efb\u4f55\u9009\u62e9\u6216\u8005\u8fc7\u6ee4\u4e4b\u524d\uff0e\u6709\u4e00\u4e2a\u6761\u4ef6\uff1a\u521d\u59cb\u975e\u76d1\u7763\u7b5b\u9009\u6b65\u9aa4\u53ef\u4ee5\u5728\u4e22\u5f03\u6837\u672c\u4e4b\u524d\u5b8c\u6210\uff0e\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f00\u59cb\u4ea4\u53c9\u9a8c\u8bc1\u524d\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9 1000 \u4e2a\u5728 50 \u4e2a\u6837\u672c\u4e0a\u6709\u7740\u6700\u5927\u65b9\u5dee\u7684\u9884\u6d4b\u53d8\u91cf\uff0e\u56e0\u4e3a\u8fd9\u4e2a\u8fc7\u6ee4\u4e0d\u6d89\u53ca\u5230\u7c7b\u522b\uff0c\u6240\u4ee5\u5b83\u4e0d\u4f1a\u7ed9\u9884\u6d4b\u53d8\u91cf\u4e0d\u516c\u5e73\u7684\u597d\u5904\uff0e</p>"},{"location":"stat/ASL-note2/#bootstrap-method","title":"Bootstrap Method","text":"<p>The Bootstrap Given a training set X=\\left(z_{1}, z_{2}, \\ldots, z_{n}\\right) with each z_{i}=\\left(x_{i}, y_{i}\\right)</p> <p>The bootstrap idea is For b=1,2, \\ldots, B</p> <ol> <li>Randomly draw n samples with replacement from Z to get Z^{*b} that is</li> </ol>  Z^{* b}=\\left(z_{b_{1}}, z_{b_{2}}, \\ldots, z_{b_{n}}\\right) \\text { with } b_{i} \\in 1,2, \\ldots, n  <ol> <li>Refit the model using Z^{*b} to get S\\left(Z^{* b}\\right)</li> </ol> <p>Examine the behavior of the B fits</p>  S\\left(Z^{*1}\\right), S\\left(Z^{* 2}\\right), \\ldots, S\\left(Z^{* B}\\right)  <p></p> <p>Can Estimate Any Aspect of the Distribution of S(Z)</p> <p>For example its variance</p>  \\hat{\\operatorname{Var}}[S(Z)]=\\frac{1}{B-1} \\sum_{b=1}^{B}\\left(S\\left(Z^{* b}\\right)-\\bar{S}^{*}\\right)^{2}  <p>where</p>  \\bar{S}^{*}=\\frac{1}{B} \\sum_{b=1}^{B} S\\left(Z^{* b}\\right)"},{"location":"stat/ASL-note2/#attempt-1","title":"Attempt 1","text":"<p>$$ \\hat{E r r r}{b o o t}=\\frac{1}{B} \\frac{1}{n} \\sum\\right)\\right) $$ where }^{B} \\sum_{i=1}^{n} L\\left(y_{i}, \\hat{f}^{*b}\\left(x_{i\\hat{f}^{*b}\\left(x_{i}\\right) is the predicted value at x_{i} using the model computed from Z^{* b}</p> <ul> <li>Is this a good estimate or not? Why</li> <li>Overlap between the training and testing sets</li> <li>How could we do better?</li> <li>Mimic cross validation</li> </ul> <p>\u8fd9\u79cd\u65b9\u5f0f\u4e2d, \u4e8b\u5b9e\u4e0a\u4e8c\u5c42\u7684\u635f\u5931\u51fd\u6570\u7b97\u7684\u662f\u6837\u672c\u5185\u8bef\u5dee, \u56e0\u6b64\u4f1a\u4f4e\u4f30\u9884\u6d4b\u8bef\u5dee.</p>"},{"location":"stat/ASL-note2/#attempt-2-leave-one-out-bootstrap","title":"Attempt 2: leave-one-out bootstrap","text":"<p>\u56e0\u6b64, \u8fd9\u91cc\u7684\u60f3\u6cd5\u662f\u4f7f\u5f97\u8bad\u7ec3\u548c\u6d4b\u8bd5\u96c6\u5206\u79bb.</p> <p>$$ \\hat{E r r}^{(1)}=\\frac{1}{n} \\sum_{i=1}^{n} \\frac{1}{\\left|C^{-i}\\right|} \\sum_{b \\in C^{-i}} L\\left(y_{i}, \\hat{f}^{* b}\\left(x_{i}\\right)\\right) $$ where C^{-i} is the set of bootstrap samples b not containing observation i</p> <ul> <li>Either make B large enough so \\left|C^{-i}\\right|&gt;0 for all i or</li> <li>Omit observation i from testing if \\left|C^{-i}\\right|=0</li> </ul> <p>Pros</p> <ol> <li>avoids the overfitting problems of \\bar{Err}_{boot}</li> </ol> <p>Cons</p> <ol> <li>Has the training-set-size bias of corss-validation \u4f1a\u6709\u5728\u8ba8\u8bba\u4ea4\u53c9\u9a8c\u8bc1\u4e2d\u63d0\u5230\u7684 \u8bad\u7ec3\u96c6\u5927\u5c0f\u504f\u5dee (training-set-size) \u95ee\u9898</li> <li>Probability that observation i in bootstrap sample Z^{*b}</li> </ol>  P\\left(i \\in Z^{* b}\\right)=1-\\left(1-\\frac{1}{n}\\right)^{n} \\approx 1-e^{-1}=0.632  <ol> <li>Therefore the average number of distinct observations in Z^{* b} is 0.632 n</li> <li>\\overline{E r r}^{(1)} bias similar to two fold cross validation (usually upward) \u5411\u4e0a\u7684\u504f\u5dee</li> </ol>"},{"location":"stat/ASL-note2/#attempt-3-the-632-estimator-to-alleviate-bias","title":"Attempt 3: The .632 estimator To Alleviate Bias","text":"\\overline{E r r}^{(.632)}=.368 \\overline{e r r}+.632 \\overline{E r r}^{(1)}  <ul> <li>Compromise between the training error \\overline{e r r} and the leave-one-out bootstrap estimate</li> <li>Derivation not easy</li> <li>The constant .632 relates to P\\left(i \\in Z^{* b}\\right)</li> </ul> <p>However, .632 estimator does not do well if predictor overfits</p>"},{"location":"stat/ASL-note2/#estimate-the-degree-of-overfitting","title":"Estimate the Degree of Overfitting","text":"<p>No-information error rate \u65e0\u4fe1\u606f\u8bef\u5dee\u7387</p>  \\hat{\\gamma}=\\frac{1}{n^{2}} \\sum_{i=1}^{n} \\sum_{j=1}^{n} L\\left(y_{i}, \\hat{f}\\left(x_{j}\\right)\\right)  <ul> <li>Estimate of the error rate of \\hat{f} if inputs and outputs were independent \u8f93\u5165\u53d8\u91cf\u4e0e\u7c7b\u522b\u6807\u7b7e\u72ec\u7acb\u65f6\u7684\u9884\u6d4b\u89c4\u5219\u7684\u8bef\u5dee\u7387</li> <li>Note the prediction rule \\hat{f}, is evaluated on all possible combinations of targets y_{i} and predictors x_{j}</li> </ul> <p>Relative overfitting rate \u76f8\u5bf9\u8fc7\u62df\u5408\u7387</p>  \\hat{R}=\\frac{\\overline{Err^{(1)}}-\\overline{e r r}}{\\hat{\\gamma}-\\overline{e r r}}  <ul> <li>0 \\leqslant \\hat{R} \\leqslant 1</li> <li>\\hat{R}=0 \\rightarrow no overfitting</li> <li>\\hat{R}=1 \\rightarrow overfitting or no-information value \\hat{\\gamma}-\\overline{e r r}</li> </ul>"},{"location":"stat/ASL-note2/#attempt-4-the-632632-estimator","title":"Attempt 4: The .632+ estimator","text":"\\hat{E r r}^{(.632+)}=(1-\\hat{\\omega}) \\overline{e r r}+\\hat{\\omega} \\hat{E r r}^{(1)}  <p>with</p>  \\hat{\\omega}=\\frac{.632}{1-.632 \\hat{R}}  <ul> <li>.632 \\leqslant \\hat{\\omega} \\leqslant 1 as \\hat{R} ranges from 0 to 1</li> <li>\\hat{E r r}^{(.632+)} ranges from \\hat{E r r}^{(.632)} to \\hat{E r r}^{(1)} \u5927\u81f4\u6765\u8bb2\uff0c\u5b83\u5f97\u5230\u820d\u4e00\u81ea\u52a9\u6cd5\u548c\u8bad\u7ec3\u8bef\u5dee\u7387\u4e4b\u95f4\u7684\u6743\u8861\uff0c\u6743\u8861\u4f9d\u8d56\u4e8e\u6a21\u578b\u8fc7\u62df\u5408\u7684\u7a0b\u5ea6</li> <li>\\hat{E r r}^{(.632+)} is a compromise between \\hat{E r r}^{(.632)} and \\overline{e r r} that depends on the amount of overfitting</li> <li>Again, the derivation is non-trivial</li> </ul> <p></p> <p>10-Fold Cross Validation \\&amp; .632+ Bootstrap</p> <p>In the above cases</p> <ul> <li>AlC, cross validation or bootstrap yields a model fairly close to the best available</li> <li>AIC (BIC) overestimate Err by 38 \\%, 37 \\%, 51 \\%, and 30 \\%</li> <li>Cross validation (bootstrap) overestimate Err by 1 \\%, 4 \\%, 0 \\%, and 4 \\%</li> </ul> <p>However, for many adaptive, nonlinear techniques (like trees), estimation of the effective number of parameters is very difficult, making AIC impractical.</p>"},{"location":"stat/ASL-note3/","title":"ASL3","text":""},{"location":"stat/ASL-note3/#model-inference-averaging","title":"Model Inference &amp; Averaging","text":"<p>\u672c\u4e66\u7684\u5927\u90e8\u5206\u7ae0\u8282\u4e2d\uff0c\u5bf9\u4e8e\u56de\u5f52\u800c\u8a00\uff0c\u6a21\u578b\u7684\u62df\u5408\uff08\u5b66\u4e60\uff09\u901a\u8fc7\u6700\u5c0f\u5316\u5e73\u65b9\u548c\u5b9e\u73b0\uff1b\u6216\u5bf9\u4e8e\u5206\u7c7b\u800c\u8a00\uff0c\u901a\u8fc7\u6700\u5c0f\u5316\u4ea4\u53c9\u71b5\u5b9e\u73b0\uff0e\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u4e24\u79cd\u6700\u5c0f\u5316\u90fd\u662f\u7528\u6781\u5927\u4f3c\u7136\u6765\u62df\u5408\u7684\u5b9e\u4f8b\uff0e</p> <p>\u8fd9\u7ae0\u4e2d\uff0c\u6211\u4eec\u7ed9\u51fa\u6781\u5927\u4f3c\u7136\u6cd5\u7684\u4e00\u4e2a\u4e00\u822c\u6027\u7684\u63cf\u8ff0\uff0c\u4ee5\u53ca\u7528\u4e8e\u63a8\u65ad\u7684\u8d1d\u53f6\u65af\u65b9\u6cd5\uff0e\u5728\u7b2c7\u7ae0\u4e2d\u8ba8\u8bba\u7684\u81ea\u52a9\u6cd5\u5728\u672c\u7ae0\u4e2d\u4e5f\u7ee7\u7eed\u8ba8\u8bba\uff0c\u800c\u4e14\u63cf\u8ff0\u4e86\u5b83\u4e0e\u6781\u5927\u4f3c\u7136\u548c\u8d1d\u53f6\u65af\u4e4b\u95f4\u7684\u8054\u7cfb\uff0e\u6700\u540e\uff0c\u6211\u4eec\u63d0\u51fa\u6a21\u578b\u5e73\u5747\u548c\u6539\u5584\u7684\u76f8\u5173\u6280\u5de7\uff0c\u5305\u62ec committee \u65b9\u6cd5\u3001bagging\u3001stacking \u548c bumping\uff0e</p>"},{"location":"stat/ASL-note3/#maximum-likelihood-methods-bootstrap","title":"Maximum Likelihood Methods &amp; Bootstrap","text":""},{"location":"stat/ASL-note3/#maximum-likelihood-inference","title":"Maximum Likelihood Inference","text":"<p>Specify a probability density / mass function for observations</p>  z_{i} \\sim g_{\\theta}(z)  <p>Likelihood function (function of \\theta given Z )</p>  L(\\theta ; Z)=\\prod_{i=1}^{N} g_{\\theta}\\left(z_{i}\\right)  <p>Easy to deal with the logarithm of L(\\theta ; Z)</p>  l(\\theta ; Z)=\\sum_{i=1}^{N} /\\left(\\theta ; z_{i}\\right)=\\sum_{i=1}^{N} \\log g_{\\theta}\\left(z_{i}\\right)  <p>Maximum Likelihood estimate</p>  \\hat{\\theta}=\\operatorname{argmax}_{\\theta} /(\\theta ; Z)  <p>\u5b9a\u4e49\u5f97\u5206\u51fd\u6570 Score function</p>  \\dot{l}(\\theta ; Z)=\\sum_{i=1}^{N} \\dot{l}\\left(\\theta ; z_{i}\\right), \\text { where } \\dot{I}\\left(\\theta ; z_{i}\\right)=\\frac{\\partial l\\left(\\theta ; z_{i}\\right)}{\\partial \\theta}  <p>Assuming likelihood takes its maximum in the interior of the parameter space, l(\\hat{\\theta} ; Z)=0 \u4fe1\u606f\u77e9\u9635 Information matrix</p>  I(\\theta)=-\\sum_{i=1}^{N} \\frac{\\partial^{2} l\\left(\\theta ; z_{i}\\right)}{\\partial \\theta \\partial \\theta^{\\top}}  <ul> <li>Observed information \\left.I(\\theta)\\right|_{\\theta=\\hat{\\theta}}</li> <li>Fisher information i(\\theta)=E_{\\theta}[I(\\theta)] Fisher \u4fe1\u606f\u91cf\uff08\u6216\u8005\u671f\u671b\u4fe1\u606f\u91cf\uff09</li> </ul> <p>\u53ef\u4ee5\u8ba4\u4e3a, Fisher \u4fe1\u606f\u91cf\u662f\u53c2\u6570\u4f30\u8ba1\u7684\u65b9\u5dee.</p> <p>\u76f8\u5173\u63a8\u5bfc\u53c2\u89c1 here \u7684\u6ce8\u91ca.</p> <p>Sampling distribution of MLE \\hat{\\theta}</p>  \\hat{\\theta} \\rightarrow \\mathcal{N}\\left(\\theta_{0}, i\\left(\\theta_{0}\\right)^{-1}\\right) \\text { as } N \\rightarrow \\infty  <p>where \\theta_{0} denotes the true value of \\theta Can be approximated by</p>  \\mathcal{N}\\left(\\hat{\\theta}, i(\\hat{\\theta})^{-1}\\right) \\text { or } \\mathcal{N}\\left(\\hat{\\theta}, I(\\hat{\\theta})^{-1}\\right)  <p>Estimates for standard error of \\hat{\\theta}_{j}</p>  \\sqrt{i(\\hat{\\theta})_{j j}^{-1}} \\text { or } \\sqrt{l(\\hat{\\theta})_{j j}^{-1}}  <p>Confidence interval</p>  \\hat{\\theta}_{j}-z^{1-\\alpha} \\cdot \\sqrt{i(\\hat{\\theta})_{j j}^{-1}} \\text { or } \\hat{\\theta}_{j}-z^{1-\\alpha} \\cdot \\sqrt{I(\\hat{\\theta})_{j j}^{-1}}  <p>Joint confidence region</p>  \\left\\{\\theta ; 2(l(\\hat{\\theta})-l(\\theta)) \\leqslant \\chi_{p}^{2,(1-2 \\alpha)}\\right\\}  <p>Since 2\\left[l(\\hat{\\theta})-l\\left(\\theta_{0}\\right)\\right] \\sim \\chi_{p}^{2}</p>"},{"location":"stat/ASL-note3/#_1","title":"\u81ea\u52a9\u6cd5\u548c\u6700\u5927\u4f3c\u7136\u6cd5","text":"<p>\u672c\u8d28\u4e0a\u81ea\u52a9\u6cd5\u662f\u975e\u53c2\u6700\u5927\u4f3c\u7136\u6216\u8005\u53c2\u6570\u6700\u5927\u4f3c\u7136\u6cd5\u7684\u8ba1\u7b97\u673a\u5b9e\u73b0\uff0eThe bootstrap can be thought of as a \u201cnonparametric\u201d MLE.</p> <p>\u4e0e\u6700\u5927\u4f3c\u7136\u6cd5\u76f8\u6bd4\u81ea\u52a9\u6cd5\u7684\u597d\u5904\u662f\u5141\u8bb8\u6211\u4eec\u5728\u6ca1\u6709\u516c\u5f0f\u7684\u60c5\u51b5\u4e0b\u8ba1\u7b97\u6807\u51c6\u8bef\u5dee\u548c\u5176\u4ed6\u4e00\u4e9b\u91cf\u7684\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\uff0e</p>"},{"location":"stat/ASL-note3/#bayesian-methods","title":"Bayesian Methods","text":"<p>Posterior distribution of \\theta given prior and data $$ p(\\theta \\mid Z)=\\frac{p(Z \\mid \\theta) p(\\theta)}{\\int p\\left(Z \\mid \\theta^{\\prime}\\right) p\\left(\\theta^{\\prime}\\right) d \\theta^{\\prime}} $$ Predictive distribution for new data $$ p\\left(z^{\\text {new }} \\mid Z\\right)=\\int p\\left(z^{\\text {new }} \\mid \\theta\\right) p(\\theta \\mid Z) d \\theta $$ However, by Maximum Likelihood methods, the predictive distribution for new data z^{\\text {new }} is p\\left(z^{\\text {new }} \\mid \\hat{\\theta}_{M L E}\\right), which does not account for the uncertainty in estimating \\theta</p>"},{"location":"stat/ASL-note3/#back-to-example","title":"Back to Example","text":"Y=\\sum_{j=1}^{J} \\beta_{j} h_{j}(X)+\\epsilon, \\text { with } \\epsilon \\sim \\mathcal{N}\\left(0, \\sigma^{2}\\right)  <ul> <li>Let u(x)=\\sum_{j=1}^{J} \\beta_{j} h_{j}(X), B be the design matrix with i j_{t h} element h_{j}\\left(x_{i}\\right)</li> <li>Prior on \\beta=\\left(\\beta_{1}, \\ldots, \\beta_{p}\\right)^{\\top}: \\beta \\sim \\mathcal{N}(0, \\tau \\Sigma)</li> <li>Data likelihood: p(y \\mid X, \\beta)=\\mathcal{N}\\left(y ; B \\beta, \\sigma^{2} I_{n}\\right)</li> <li>Posterior distribution for \\beta : $$ p(\\beta \\mid Z)=p(\\beta \\mid X, y)=\\frac{p(y \\mid X, \\beta) p(\\beta)}{p(y \\mid X)}=\\mathcal{N}\\left(\\beta ; A^{-1} B^{\\top} y, A^{-1} \\sigma^{2}\\right) $$ with A=B^{\\top} B+\\frac{\\sigma^{2}}{\\tau} \\Sigma^{-1}</li> </ul> <p>\u53ef\u4ee5\u770b\u5230, \u5bf9\u4e8e \\tau=1 \u62df\u5408\u7684\u66f2\u7ebf\u66f4\u4e3a\u5149\u6ed1 (\u56e0\u4e3a\u6211\u4eec\u5728\u5149\u6ed1\u6027\u4e0a\u9762\u5f3a\u52a0\u4e86\u66f4\u591a\u5148\u9a8c\u6743\u91cd). \u800c \\tao=100 \u65f6\u7684\u66f2\u7ebf\u66f4\u63a5\u8fd1 MLE \u7684\u7ed3\u679c.</p> <p>\u5b9e\u9645\u4e0a, \u5f53 \\tau \\rightarrow \\infty \u65f6\u79f0\u4e4b\u4e3a \\theta \u7684 noninformative prior \u65e0\u4fe1\u606f\u5148\u9a8c. \u5728\u9ad8\u65af\u6a21\u578b\u4e2d\uff0c\u6781\u5927\u4f3c\u7136\u548c\u53c2\u6570\u81ea\u52a9\u6cd5\u8d8b\u5411\u4e8e\u4e0e\u5bf9\u81ea\u7531\u53c2\u6570\u4f7f\u7528\u4e86\u65e0\u4fe1\u606f\u5148\u9a8c\u7684\u8d1d\u53f6\u65af\u4fdd\u6301\u4e00\u81f4\uff0e\u56e0\u4e3a\u5728\u5e38\u503c\u5148\u9a8c\u60c5\u51b5\u4e0b\uff0c\u540e\u9a8c\u5206\u5e03\u4e0e\u4f3c\u7136\u51fd\u6570\u6210\u6bd4\u4f8b\uff0c\u6240\u4ee5\u8fd9\u4e9b\u65b9\u6cd5\u8d8b\u5411\u4e8e\u4e00\u81f4\uff0e\u8fd9\u79cd\u5bf9\u5e94\u4e5f\u53ef\u4ee5\u63a8\u5e7f\u5230\u975e\u53c2\u7684\u60c5\u5f62\uff0e\u5176\u4e2d\u975e\u53c2\u81ea\u52a9\u6cd5\u8fd1\u4f3c\u4e8e\u4e00\u4e2a\u65e0\u4fe1\u606f\u5148\u9a8c\u7684\u8d1d\u53f6\u65af\u5206\u6790\uff1b8.4 \u8282\u5c06\u8be6\u7ec6\u4ecb\u7ecd\uff0e</p>"},{"location":"stat/ASL-note3/#the-em-algorithm","title":"The EM Algorithm","text":"<p>\u53ef\u4ee5\u53c2\u8003\u4e4b\u524d\u7edf\u8ba1\u8ba1\u7b97\u7684 note, \u601d\u8def\u548c EM\u7b97\u6cd5\u53ca\u5176\u63a8\u5e7f \u6bd4\u8f83\u50cf. ESL \u7684\u7248\u672c here.</p> <p>EM \u7b97\u6cd5\u662f\u7b80\u5316\u590d\u6742\u6781\u5927\u4f3c\u7136\u95ee\u9898\u7684\u4e00\u79cd\u5f88\u53d7\u6b22\u8fce\u7684\u5de5\u5177\uff0e\u6211\u4eec\u9996\u5148\u5728\u4e00\u4e2a\u7b80\u5355\u7684\u6df7\u5408\u6a21\u578b\u4e2d\u8ba8\u8bba\u5b83\uff0e</p>"},{"location":"stat/ASL-note3/#gaussian-mixture-models-gmm","title":"Gaussian Mixture Models (GMM)","text":"<p>Mathematical definition</p>  p(x \\mid \\theta)=\\sum_{k=1}^{k} \\pi_{k} \\cdot N\\left(x_{k} ; \\mu_{k}, \\Sigma_{k}\\right)  <p>where \\sum_{k=1}^{K} \\pi_{k}=1 and \\pi_{k} \\geqslant 0 for k=1, \\ldots, K and \\theta=\\left(\\mu_{1}, \\ldots, \\mu_{K}, \\Sigma_{1}, \\ldots, \\Sigma_{K}, \\pi_{1}, \\ldots, \\pi_{K}\\right)</p>"},{"location":"stat/ASL-note3/#parameter-estimation-for-gmm","title":"Parameter Estimation for GMM","text":"<p>Given n independent training samples x_{1}, x_{2}, \\ldots, x_{n} from a GMM, can still use MLE to estimate \\theta, but\u2026 Assume K is fixed and known, log likelihood of the data is</p>  I(\\theta ; x)=\\sum_{i=1}^{n} \\log \\left(\\sum_{k=1}^{k} \\pi_{k} N\\left(x_{i} ; \\mu_{k}, \\Sigma_{k}\\right)\\right)  <p>Let\u2019s try to maximize it</p> <ul> <li>By eyeballing</li> <li>Analytically</li> <li>Numerically</li> </ul>"},{"location":"stat/ASL-note3/#the-mmalgorithm-minimization","title":"The MMAlgorithm - Minimization","text":"<p>Majorize-Minimization/Maximization. MM\u7b97\u6cd5\u662f\u4e00\u79cd\u8fed\u4ee3\u4f18\u5316\u65b9\u6cd5\uff0c\u5b83\u5229\u7528\u51fd\u6570\u7684\u51f8\u6027\u6765\u627e\u5230\u5b83\u4eec\u7684\u6700\u5927\u503c\u6216\u6700\u5c0f\u503c\u3002\u5f53\u76ee\u6807\u51fd\u6570\u96be\u4ee5\u4f18\u5316\u7684\u65f6\u5019, \u8f6c\u800c\u53bb\u627e\u4e00\u4e2a\u5bb9\u6613\u4f18\u5316\u7684\u76ee\u6807\u51fd\u6570\u66ff\u4ee3, \u8fed\u4ee3.</p> <p>\u4f8b\u5982, \u5bf9\u4e8e\u6700\u5c0f\u5316\u95ee\u9898, \u6bcf\u6b21\u8fed\u4ee3\u627e\u5230\u4e00\u4e2a\u76ee\u6807\u51fd\u6570\u7684\u4e0a\u754c\u51fd\u6570\uff0c\u6c42\u4e0a\u754c\u51fd\u6570\u7684\u6700\u5c0f\u503c\u3002</p> <ul> <li>To minimize an objective function f(\\theta)</li> <li>The MM algorithm is a prescription for constructing optimization algorithms</li> <li>An MM algorithm creates a surrogate \u66ff\u4ee3 function that majories the objective function.</li> <li>When the surrogate function is minimized, the objective function is decreased</li> <li>For minimization, M M \\equiv majorize</li> </ul>"},{"location":"stat/ASL-note3/#majorization","title":"Majorization","text":"<p>A function g\\left(\\theta ; \\theta^{(t)}\\right) majorizes the function f(\\theta) at \\theta^{(t)} if</p> <ul> <li>f\\left(\\theta^{(t)}\\right)=g\\left(\\theta^{(t)} ; \\theta^{(t)}\\right)</li> <li>f(\\theta) \\leqslant g\\left(\\theta ; \\theta^{(t)}\\right) for all \\theta \u5373\u66ff\u4ee3\u51fd\u6570\u662f\u539f\u51fd\u6570\u7684\u4e0a\u5c4a</li> </ul> <p>If f(\\theta) is difficult to minimize, find g\\left(\\theta ; \\theta^{(t)}\\right), which is easy to minimize. Let $$ \\theta^{(t+1)}=\\operatorname{argmin}_{\\theta} g\\left(\\theta ; \\theta^{(t)}\\right) $$</p> <p>MM minimization algorithm satisfied the descent property as $$ \\begin{aligned} f\\left(\\theta^{(t+1)}\\right) &amp; \\leqslant g\\left(\\theta^{(t+1)} ; \\theta^{(t)}\\right) \\ &amp; \\leqslant g\\left(\\theta^{(t)} ; \\theta^{(t)}\\right) \\ &amp;=f\\left(\\theta^{(t)}\\right) \\end{aligned} $$ In summary $$ f\\left(\\theta^{(t+1)}\\right) \\leqslant f\\left(\\theta^{(t)}\\right) $$ The descent property makes the MM algorithm very stable algorithms converges to local minima or saddle point</p>"},{"location":"stat/ASL-note3/#big-question","title":"Big Question","text":"<p>How do we majorize / minorize a function? Some generic tricks and tools</p> <ul> <li>Jensen\u2019s inequality</li> <li>Chord above the graph property of a convex function</li> <li>Supporting hyperplane property of a convex function</li> <li>Quadratic upper bound principle</li> <li>Arithmetic-geometric mean inequality</li> <li>Cauchy-Schwartz inequality</li> </ul> <p>We\u2019ll only focus on Jensen\u2019s inequality here</p>"},{"location":"stat/ASL-note3/#jensens-inequality","title":"Jensen\u2019s Inequality","text":"<p>You\u2019ve probably minorized via Jensen\u2019s Inequality without noticing it</p> <p>Remember Jensen\u2019s Inequality [\u753b\u56fe\u5f88\u5bb9\u6613\u7406\u89e3]</p> <ul> <li>h(\\cdot) be a concave function</li> <li>\\pi_{1}, \\ldots, \\pi_{K} be K non-negative numbers, with \\sum_{k=1}^{K} \\pi_{k}=1</li> <li>K arbituary numbers a_{1}, \\ldots, a_{K}</li> </ul> <p>Then</p>  h\\left(\\sum_{k=1}^{K} \\pi_{k} a_{k}\\right) \\geqslant \\sum_{k=1}^{K} \\pi_{k} h\\left(a_{k}\\right)"},{"location":"stat/ASL-note3/#expectation-maximization","title":"Expectation - Maximization","text":"<p>EM \u7b97\u6cd5\u53c2\u89c1 here. \u6ce8\u610f\u5230, \u94fe\u63a5\u4e2d\u7406\u89e3 Z \u662f\u9690\u53d8\u91cf(\u4e00\u90e8\u5206\u7684\u56e0\u53d8\u91cf, \u4f46\u65e0\u6cd5\u89c2\u6d4b.) \u300c\u7528Y\u8868\u793a\u89c2\u6d4b\u968f\u673a\u53d8\u91cf\u7684\u6570\u636e\uff0cZ\u8868\u793a\u9690\u968f\u673a\u53d8\u91cf\u7684\u6570\u636e\u3002Y\u548cZ\u8fde\u5728\u4e00\u8d77\u79f0\u4e3a\u5b8c\u5168\u6570\u636e\uff0c\u89c2\u6d4b\u6570\u636eY\u53c8\u79f0\u4e3a\u4e0d\u5b8c\u5168\u6570\u636e\u3002\u300d</p> <p>\u9664\u4e86\u4e0a\u9762\u94fe\u63a5\u4e2d\u7684\u7406\u89e3, \u8fd9\u91cc\u76f4\u63a5\u57fa\u4e8e Jenson \u4e0d\u7b49\u5f0f</p> <ul> <li>The EM algorithm is a MM algorithm EM \u7b97\u6cd5\u662f MM \u7b97\u6cd5\u7684\u4e00\u79cd</li> <li>EM uses Jensen\u2019s inequality to minorize the log likelihood</li> </ul> <p>Step 1</p>  \\begin{aligned} l(\\theta ; X) &amp;=\\log \\left(\\sum_{j=1}^{n_{z}} p\\left(X, Z=z_{j} \\mid \\theta\\right)\\right) \\\\ &amp;=\\log \\left(\\sum_{j=1}^{n_{z}} f^{(t)}\\left(Z=z_{j}\\right) \\frac{p\\left(X, Z=z_{j} \\mid \\theta\\right)}{f^{(t)}\\left(Z=z_{j}\\right)}\\right) \\\\ &amp; \\geqslant \\sum_{j=1}^{n_{z}} f^{(t)}\\left(Z=z_{j}\\right) \\log \\left(\\frac{P\\left(X, Z=z_{j} \\mid \\theta\\right)}{f^{(t)}\\left(Z=z_{j}\\right)}\\right) \\end{aligned}  <p>Summary of step 1 , we\u2019ve got</p>  l(\\theta ; X) \\geqslant \\sum_{j=1}^{n_{z}} f^{(t)}\\left(Z=z_{j}\\right) \\log \\left(\\frac{p\\left(X, Z=z_{j} \\mid \\theta\\right)}{f^{(t)}\\left(Z=z_{j}\\right)}\\right)  <p>Step 2: find f^{(t)}(Z)</p> <p>The lower bound must touch the \\log likelihood at \\theta^{(t)}</p>  l\\left(\\theta^{(t)} ; X\\right)=\\sum_{j=1}^{n_{z}} f^{(t)}\\left(Z=z_{j}\\right) \\log \\left(\\frac{p\\left(X, Z=z_{j} \\mid \\theta^{(t)}\\right)}{f^{(t)}\\left(Z=z_{j}\\right)}\\right)  <p>From this we can calculate f^{(t)}(Z)</p>  f^{(t)}(Z)=p\\left(Z \\mid X, \\theta^{(t)}\\right)  <p>The log likelihood is minorized by</p>  g\\left(\\theta ; \\theta^{(t)}\\right)=\\sum_{j=1}^{n_{z}} p\\left(Z=z_{j} \\mid X, \\theta^{(t)}\\right) \\log \\left(\\frac{p\\left(X, Z=z_{j} \\mid \\theta\\right)}{p\\left(Z=z_{j} \\mid X, \\theta^{(t)}\\right)}\\right)  <p>Step 3: find \\&amp; max g\\left(\\theta ; \\theta^{(t)}\\right) What are the Z^{\\prime} s and where did they come from?</p> <ul> <li>Z is a random variable whose pdf conditioned on X is completely determined by \\theta</li> <li>Choice of Z should make the maximization step easy</li> </ul>"},{"location":"stat/ASL-note3/#two-component-gmm","title":"Two Component GMM","text":"\\begin{aligned} &amp;Y_{1} \\sim N\\left(\\mu_{1}, \\sigma_{1}^{2}\\right) \\\\ &amp;Y_{2} \\sim N\\left(\\mu_{2}, \\sigma_{2}^{2}\\right) \\\\ &amp;Y=(1-\\Delta) \\cdot Y_{1}+\\Delta \\cdot Y_{2} \\end{aligned}  <p>where \\Delta=\\{0,1\\} with \\operatorname{Pr}(\\Delta=1)=\\pi Equivalent two-step representation</p> <ul> <li>Generate a \\Delta with probability \\pi</li> <li>Depending on the outcome of \\Delta, deliver either Y_{1} or Y_{2}</li> </ul> <p>Let \\phi_{\\theta}(x) denote the normal density with parameter \\theta=\\left(\\mu, \\sigma^{2}\\right), then the density of Y is</p>  P_{Y}(y)=(1-\\pi) \\phi_{\\theta_{1}}(y)+\\pi \\phi_{\\theta_{2}}(y)  <p>where \\theta=\\left(\\pi, \\theta_{1}, \\theta_{2}\\right)=\\left(\\pi, \\mu_{1}, \\sigma_{1}^{2}, \\mu_{2}, \\sigma_{2}^{2}\\right)</p> <p>The log likelihood of the data</p>  I(\\theta ; Y)=\\sum_{i=1}^{N} \\log \\left[(1-\\pi) \\phi_{\\theta_{1}}\\left(y_{i}\\right)+\\pi \\phi_{\\theta_{2}}\\left(y_{i}\\right)\\right]  <p>Introduce latent variables \\Delta_{i} taking values 0 or 1</p> <ul> <li>If \\Delta_{i}=1, Y_{i} comes from model 2</li> <li>Otherwise it comes from model 1</li> </ul> <p>Suppose we know the values of \\Delta_{i}, the log likelihood can be written</p>  \\begin{aligned} I(\\theta ; Y, \\Delta)=&amp; \\sum_{i=1}^{N}\\left[\\left(1-\\Delta_{i}\\right) \\log \\phi_{\\theta_{1}}\\left(y_{i}\\right)+\\Delta_{i} \\log \\phi_{\\theta_{2}}\\left(y_{i}\\right)\\right]+\\\\ &amp; \\sum_{i=1}^{N}\\left[\\left(1-\\Delta_{i}\\right) \\log (1-\\pi)+\\Delta_{i} \\log \\pi\\right] \\end{aligned}  <ul> <li>The MLE of \\mu_{1} and \\sigma_{1}^{2} would be the sample mean and variance for those data with \\Delta_{i}=0</li> <li>The MLE of \\mu_{2} and \\sigma_{2}^{2} would be the sample mean and variance for those data with \\Delta_{i}=1</li> <li>The MLE of \\pi would be the proportion of \\Delta_{i}=1</li> </ul> <p>However, \\Delta_{i} are unknown, and we substibute with its expected value</p>  \\gamma_{i}(\\theta)=E\\left(\\Delta_{i} \\mid \\theta, Y\\right)=\\operatorname{Pr}\\left(\\Delta_{i}=1 \\mid \\theta, Y\\right)  <ul> <li>\\gamma_{i} is called responsibility of model 2 for observation i</li> <li>posteior of the probability that observation i belongs to model 2 given the data and current estimate</li> </ul> <p>For each iteration....</p> <p>Expectation step</p> <ul> <li>soft assignment of each observation to each model</li> <li>the current parameter estimates are used to assign responsibilities according to the relative density of the training points under each model</li> </ul> <p>Maximization step</p> <ul> <li>these responsibilities are used in weighted maximum-likelihood fits to update the parameter estimates</li> </ul>"},{"location":"stat/ASL-note3/#em-algorithm-for-two-component-gmm","title":"EM Algorithm for Two-component GMM","text":"<ol> <li>Take initial guesses for the parameters \\left(\\mu_{1}, \\sigma_{1}^{2}, \\mu_{2}, \\sigma_{2}^{2}, \\pi\\right)</li> <li>Expectation Step: compute the responsibilities</li> </ol>  \\hat{\\gamma}_{i}=\\frac{\\hat{\\pi} \\phi_{\\hat{\\theta}_{2}}\\left(y_{i}\\right)}{(1-\\hat{\\pi}) \\phi_{\\hat{\\theta}_{1}}\\left(y_{i}\\right)+\\hat{\\pi} \\phi_{\\hat{\\theta}_{2}}\\left(y_{i}\\right)}  <ol> <li>Maximization Step: compute the weighted means and variances and the mixing probability</li> </ol>  \\begin{gathered} \\hat{\\mu}_{1}=\\frac{\\sum_{i}\\left(1-\\hat{\\gamma}_{i}\\right) y_{i}}{\\sum_{i}\\left(1-\\hat{\\gamma}_{i}\\right)}, \\quad \\hat{\\sigma}_{1}^{2}=\\frac{\\sum_{i}\\left(1-\\hat{\\gamma}_{i}\\right)\\left(y_{i}-\\hat{\\mu}_{1}\\right)^{2}}{\\sum_{i}\\left(1-\\hat{\\gamma}_{i}\\right)} \\\\ \\hat{\\mu}_{2}=\\frac{\\sum_{i} \\hat{\\gamma}_{i} y_{i}}{\\sum_{i} \\hat{\\gamma}_{i}}, \\quad \\hat{\\sigma}_{1}^{2}=\\frac{\\sum_{i} \\hat{\\gamma}_{i}\\left(y_{i}-\\hat{\\mu}_{1}\\right)^{2}}{\\sum_{i} \\hat{\\gamma}_{i}} \\\\ \\hat{\\pi}=\\sum_{i} \\frac{\\hat{\\gamma}_{i}}{N} \\end{gathered}  <ol> <li>Iterate steps 2 and 3 until convergence</li> </ol>"},{"location":"stat/ASL-note3/#mcmc-sampling-from-posterior","title":"MCMC - Sampling from Posterior","text":"<p>\u5728\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8d1d\u53f6\u65af\u6a21\u578b\u540e\uff0c\u6709\u4eba\u4fbf\u60f3\u8981\u4ece\u5f97\u5230\u7684\u540e\u9a8c\u5206\u5e03\u4e2d\u91c7\u6837\u6765\u5bf9\u53c2\u6570\u8fdb\u884c\u63a8\u65ad\uff0e\u9664\u4e86\u7b80\u5355\u7684\u6a21\u578b\uff0c\u8fd9\u901a\u5e38\u662f\u4e00\u4e2a\u5f88\u56f0\u96be\u7684\u8ba1\u7b97\u95ee\u9898\uff0e\u53c2\u89c1 here \u7684\u6ce8\u91ca.</p> <p>\u8fd9\u8282\u6211\u4eec\u8ba8\u8bba\u7528\u4e8e\u540e\u9a8c\u91c7\u6837\u7684 \u9a6c\u5c14\u79d1\u592b\u8499\u7279\u5361\u6d1b\u6cd5 (Markov chain Monte Carlo)\uff0e\u6211\u4eec\u5c06\u8981\u770b\u5230\u5409\u5e03\u65af\u91c7\u6837\uff08\u4e00\u4e2a MCMC \u8fc7\u7a0b\uff09\u4e0e EM \u7b97\u6cd5\u975e\u5e38\u76f8\u5173\uff1a\u4e3b\u8981\u7684\u533a\u522b\u5728\u4e8e\u524d\u8005\u4ece\u6761\u4ef6\u5206\u5e03\u4e2d\u91c7\u6837\u800c\u975e\u5bf9\u5b83\u4eec\u6700\u5927\u5316\uff0e</p>"},{"location":"stat/ASL-note3/#markov-chain-monte-carlo-method","title":"Markov Chain Monte Carlo Method","text":"<p>Aim</p> <ul> <li>Generate independent samples \\left\\{x^{(r)}\\right\\}_{r=1}^{R} from a pdf p(x)</li> <li>Can then use x^{(r)} to estimate expectations of functions under this distribution</li> </ul>  E[\\phi(x)]=\\int_{x} \\phi(x) p(x) d x \\approx \\frac{1}{R} \\sum_{r=1} \\phi\\left(x^{(r)}\\right)  <p>Not an easy task</p> <ul> <li>Sampling from p(x) is hard in general</li> <li>Especially when x \\in \\mathbb{R}^{p} and p is large</li> </ul> <p>Common approach</p> <ul> <li>Monte Carlo Markov Chain methods such as Metropolis-Hastings and Gibbs sampling</li> </ul> <p>MCMC Assumptions \u57fa\u672c\u601d\u8def\u5c31\u662f, \u627e\u5230\u4e00\u4e2a\u548c p \u6bd4\u8f83\u50cf\u7684\u5206\u5e03\u6765\u8fd1\u4f3c.</p> <ul> <li>Want to draw samples from p(x)</li> <li>Can evaluate p(x) within a normalization factor</li> <li>That is, can evaluate a function p^{*}(x) such that</li> </ul> <p>$$ p(x)=\\frac{p^{*}(x)}{Z} $$ where Z is a constant</p>"},{"location":"stat/ASL-note3/#the-metropolis-hastings-method","title":"The Metropolis-Hastings Method","text":"<p>Initially</p> <ul> <li>Have an initial state x^{(1)}</li> <li>Define a proposal density Q\\left(x^{\\prime} ; x^{(t)}\\right) depending on the current state x^{(t)}</li> <li>Must be able to draw samples from Q\\left(x^{\\prime} ; x^{(t)}\\right)</li> </ul> <p>At each iteration</p> <ul> <li>A tentative new state x^{\\prime} is generated from the proposal density Q\\left(x^{\\prime} ; x^{(t)}\\right)</li> <li>Compute</li> </ul>  a=\\min \\left(1, \\frac{p^{*}\\left(x^{\\prime}\\right) Q\\left(x^{(t)} ; x^{\\prime}\\right)}{p^{*}\\left(x^{(t)}\\right) Q\\left(x^{\\prime} ; x^{(t)}\\right)}\\right)  <ul> <li>Accept new state x^{\\prime} with probability a</li> <li>Set</li> </ul>  x^{(t+1)}= \\begin{cases}x^{\\prime} &amp; \\text { if state is accepted } \\\\ x^{(t)} &amp; \\text { if state is not accepted }\\end{cases}  <p></p> <p>Convergence</p> <ul> <li>For any Q s.t. Q\\left(x^{\\prime} ; x\\right)&gt;0 \\forall x, x^{\\prime} as t \\rightarrow \\infty</li> <li>The probability distribution of x^{(t)} tends to p(x)=p^{*}(x) / Z</li> </ul>"},{"location":"stat/ASL-note3/#gibbs-sampling","title":"Gibbs Sampling","text":"<p>Given a state x^{(t)} \\in \\mathbb{R}^{p}, generate a new state with</p>  \\begin{gathered} x_{1}^{(t+1)} \\sim p\\left(x_{1} \\mid x_{2}^{(t)}, x_{3}^{(t)}, \\ldots, x_{p}^{(t)}\\right) \\\\ x_{2}^{(t+1)} \\sim p\\left(x_{2} \\mid x_{1}^{(t+1)}, x_{3}^{(t)}, \\ldots, x_{p}^{(t)}\\right) \\\\ x_{3}^{(t+1)} \\sim p\\left(x_{3} \\mid x_{1}^{(t+1)}, x_{2}^{(t+1)}, \\ldots, x_{p}^{(t)}\\right) \\end{gathered}  <p>where it is assumed that we can generate samples from p\\left(x_{i} \\mid\\left\\{x_{j}\\right\\}_{j \\neq i}\\right) Convergence</p> <ul> <li>Gibbs sampling is a Metropolis method</li> <li>The probability distribution of x^{(t)} tends to p(x) as t \\rightarrow \\infty, as long as p(x) does not have pathological properties</li> </ul> <p></p>"},{"location":"stat/ASL-note3/#evolution-of-markov-chain","title":"Evolution of Markov Chain","text":"<p>Markov chain defined by an initial p^{(0)}(x) and a transition probability T\\left(x^{\\prime} ; x\\right)</p> <p>Let p^{(t)}(x) be the pdf of the state after t applications of the Markov chain</p> <p>The pdf of the state at the (t+1)_{t h} iteration of the Markov Chain is given by</p>  p^{(t+1)}\\left(x^{\\prime}\\right)=\\int_{x} T\\left(x^{\\prime} ; x\\right) p^{(t)}(x) d x  <p>Want to find a chain s.t. as t \\rightarrow \\infty then p^{(t)}(x) \\rightarrow p(x)</p> <p>When designing a MCMC method, construct a chain with the following properties</p> <ul> <li>p(x) is an invariant distribution of the chain</li> </ul>  p\\left(x^{\\prime}\\right)=\\int_{x} T\\left(x^{\\prime} ; x\\right) p(x) d x  <ul> <li>The chain is ergodic</li> </ul>  p^{(t)}(x) \\rightarrow p(x) \\text { as } t \\rightarrow \\infty \\text { for any } p^{(0)}(x)"},{"location":"stat/ASL-note3/#gibbs-sampling-for-gmm","title":"Gibbs Sampling for GMM","text":"<p>Close connection between Gibbs sampling and the EM algorithm in exponential family models</p> <p>Let</p> <ul> <li>the parameter \\theta of the distribution</li> <li>latent / missing data Z^{m}</li> </ul> <p>be parameter for Gibbs sampler</p> <p>To estimate the parameter of a GMM at each iteration</p>  \\begin{aligned} &amp;\\Delta_{i}^{(t+1)} \\sim p\\left(\\Delta_{i} \\mid \\theta^{(t)}, Z\\right) \\text { for } i=1, \\ldots, n \\\\ &amp;\\theta^{(t+1)} \\sim p\\left(\\theta \\mid \\Delta^{(t+1)}, Z\\right) \\end{aligned}  <p>where \\Delta_{i} \\in\\{1, \\ldots, K\\} represents which component training example i is assigned to</p>"},{"location":"stat/ASL-note3/#bagging","title":"Bagging","text":"<p>\u672c\u8282\u4e2d\u63d0\u5230\u4e86\u968f\u673a\u68ee\u6797\u548c boosting \u65b9\u5f0f\uff0eISLR \u5728\u8bb2\u57fa\u4e8e\u6811\u7684\u65b9\u6cd5\u65f6\u662f\u5c06\u8fd9\u4e24\u79cd\u65b9\u5f0f\u4e0e bagging \u4e00\u8d77\u4ecb\u7ecd\u7684. \u7b80\u5355\u6765\u8bf4\uff0cbagging \u548c\u968f\u673a\u68ee\u6797\u90fd\u662f\u9488\u5bf9 bootstrap \u6837\u672c\uff0c\u4e14\u524d\u8005\u53ef\u4ee5\u770b\u6210\u540e\u8005\u7684\u7279\u6b8a\u5f62\u5f0f\uff1b\u800c boosting \u662f\u9488\u5bf9\u6b8b\u5dee\u6837\u672c\uff0e</p> <p>Starting point</p> <ul> <li>Training set Z=\\left\\{\\left(x_{1}, y_{1}\\right), \\ldots,\\left(x_{n}, y_{n}\\right)\\right\\}</li> <li>\\hat{f}(x) be the prediction at input x learned from Z</li> </ul> <p>Goal</p> <ul> <li>Obtain a prediction at input x with lower variance than \\hat{f}(x)</li> </ul> <p>How - Bootstrap aggregation a.k.a. Bagging</p> <ul> <li>Obtain bootstrap samples Z^{*1}, \\ldots, Z^{* B}</li> <li>For each Z^{*b}, fit the model and get prediction \\hat{f}^{* b}(x)</li> <li>The bagged estimate is then</li> </ul>  \\hat{f}_{\\text {bag }}(x)=\\frac{1}{B} \\sum_{b=1}^{B} \\hat{f}^{* b}(x)  <p></p> <p>\u4e0a\u9762\u7684\u6a59\u8272\u662f\u5bf9\u4e8e\u5206\u7c7b\u7ed3\u679c\u8fdb\u884c bagging, \u7eff\u8272\u662f\u5bf9\u4e8e\u5206\u7c7b\u6982\u7387\u8fdb\u884c bagging.</p>"},{"location":"stat/ASL-note3/#bagging-for-classification-and-0-1-loss","title":"Bagging for Classification and 0-1 Loss","text":"<p>Squared error loss</p> <ul> <li>Bagging can dramatically reduce the variance of unstable procedures, leading to improved prediction</li> </ul> <p>Classification with 0-1 loss [\u56e0\u4e3a\u504f\u5dee\u548c\u65b9\u5dee\u7684\u4e0d\u53ef\u52a0\u6027]</p> <ul> <li>Bagging a good classifier can make it better</li> <li>Bagging a bad classifier can make things worse</li> <li>Can understand the bagging effect in terms of a consensus of independent weak learners or the wisdom of crowds</li> </ul>"},{"location":"stat/ASL-note3/#model-averaging-stacking","title":"Model Averaging &amp; Stacking","text":""},{"location":"stat/ASL-note3/#bayesian-model-averaging","title":"Bayesian Model Averaging","text":"<p>Starting point</p> <ul> <li>Training data X=\\left\\{\\left(x_{1}, y_{1}\\right), \\ldots,\\left(x_{n}, y_{n}\\right)\\right\\}</li> <li>A set of candidate models M_{1}, \\ldots, M_{M}</li> </ul> <p>Goal</p> <ul> <li>Estimate quantity \\zeta - usually a prediction of f(x) at x</li> </ul> <p>A Bayesian solution</p> <ul> <li>The posterior distribution of \\zeta</li> </ul>  p(\\zeta \\mid Z)=\\sum_{m=1}^{M} p\\left(\\zeta \\mid M_{m}, Z\\right) P\\left(M_{m} \\mid Z\\right)  <ul> <li>Posterior mean</li> </ul>  E[\\zeta \\mid Z]=\\sum_{m=1}^{M} E\\left[\\zeta \\mid M_{m}, Z\\right] P\\left(M_{m} \\mid Z\\right)  <p>\u5173\u952e\u662f\u4f30\u8ba1\u5355\u4e2a\u6a21\u578b\u7684\u6982\u7387</p> <p>Committee method \u59d4\u5458\u4f1a\u65b9\u6cd5\u5bf9\u6bcf\u4e2a\u6a21\u578b\u8d4b\u4e88\u76f8\u540c\u7684\u6743\u91cd</p>  P\\left(M_{m} \\mid Z\\right) \\approx \\frac{1}{M}  <p>BIC approach (7.7\u8282)</p>  P\\left(M_{m} \\mid Z\\right) \\approx-2 \\log \\operatorname{lik}+d_{m} \\log (n)  <p>Hardcore Bayesian \u5168\u8d1d\u53f6\u65af\u65b9\u6cd5. [\u7136\u800c\uff0c\u76f8\u6bd4\u66f4\u7b80\u5355\u7684 BIC \u8fd1\u4f3c\uff0c\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u5b9e\u9645\u7684\u8bc1\u636e\u6765\u8868\u660e\u503c\u5f97\u8fd9\u6837\u505a]</p>  \\begin{aligned} P\\left(M_{m} \\mid Z\\right) &amp; \\propto P\\left(M_{m}\\right) p\\left(Z \\mid M_{m}\\right) \\\\ &amp; \\propto P\\left(M_{m}\\right) \\int p\\left(Z \\mid \\theta, M_{m}\\right) p\\left(\\theta \\mid M_{m}\\right) d \\theta_{m} \\end{aligned}"},{"location":"stat/ASL-note3/#frequentist-model-averaging","title":"Frequentist Model Averaging","text":"<p>Starting point</p> <ul> <li>Predictions \\hat{f}_{1}(x), \\hat{f}_{2}(x), \\ldots, \\hat{f}_{M}(x)</li> </ul> <p>Goal</p> <ul> <li>For squared error loss, find weights \\omega=\\left(\\omega_{1}, \\ldots, \\omega_{M}\\right) s.t.</li> </ul>  \\hat{\\omega}=\\operatorname{argmin}_{\\omega} E_{P_{Y \\mid X=X}}\\left(Y-\\sum_{m=1}^{M} \\omega_{m} \\hat{f}_{m}(x)\\right)^{2}  <p>Solution: population linear regression of Y on \\hat{F}(x) \u603b\u4f53\u7ebf\u6027\u56de\u5f52 (population linear regression)</p>  \\hat{\\omega}=E_{P}\\left[\\hat{F}(x) \\hat{F}(x)^{\\top}\\right]^{-1} E_{p}[\\hat{F}(x) Y]  <p>where \\hat{F}(x) \\equiv\\left[\\hat{f}_{1}(x), \\ldots, \\hat{f}_{M}(x)\\right]^{\\top}</p> <p>For this \\hat{\\omega}, the full regression model has smaller error than any single model</p>  E_{P}\\left(Y-\\sum_{m=1}^{M} \\omega_{m} \\hat{f}_{m}(x)\\right)^{2} \\leqslant E_{P}\\left(Y-\\hat{f}_{m}(x)\\right)^{2} \\forall m  <p>Combining models never makes things worse (at population level)</p> <p>But cannot estimate the population \\hat{\\omega}. Any thoughts?</p> <p>\u663e\u7136\u65e0\u6cd5\u76f4\u63a5\u8ba1\u7b97 population \u7ea7\u522b\u7684\u7ebf\u6027\u56de\u5f52, \u800c\u76f4\u63a5\u7528\u8bad\u7ec3\u96c6\u4f1a\u6709\u95ee\u9898, \u4f8b\u5982\u7ebf\u6027\u56de\u5f52\u7684\u51e0\u4e2a\u6a21\u578b\u4e2d, \u6240\u9009\u53d8\u91cf\u6700\u591a\u7684\u6a21\u578b\u8868\u73b0\u6700\u597d, \u5219 bagging \u5b66\u4e60\u5230\u7684\u6743\u91cd, \u590d\u6742\u6a21\u578b\u7684\u6743\u91cd\u4f1a\u8fc7\u5206\u9ad8(=1). \u56e0\u6b64, \u4e0b\u9762\u7684 \u5806\u6808\u6cdb\u5316 (Stacked generalization) \u6216 stacking \u65b9\u6cd5, \u91c7\u7528\u7c7b\u4f3c\u7559\u4e00\u7684\u601d\u8def, \u7559\u51fa\u4e00\u4e2a sample \u8fdb\u884c\u8bad\u7ec3.</p>"},{"location":"stat/ASL-note3/#stacked-generalization-stacking","title":"Stacked Generalization (stacking)","text":"<p>Denote \\hat{f}_{m}^{-i}(x) as the prediction at x using</p> <ul> <li>the m_{\\text {th }} model</li> <li>learnt from the dataset with i_{t h} training example removed</li> </ul> <p>Then the stacking weights are given by</p>  \\hat{\\omega}^{s t}=\\operatorname{argmin}_{\\omega} \\sum_{i=1}^{n}\\left(y_{i}-\\sum_{m=1}^{M} \\omega_{m} \\hat{f}_{m}^{-i}\\left(x_{i}\\right)\\right)^{2}  <p>The final prediction at point x is</p>  \\sum_{m} \\hat{\\omega}_{m}^{s t} \\hat{f}_{m}(x)  <ul> <li>Better results by forcing \\hat{\\omega}_{m}^{s t} to be \\geqslant 0 and sum to 1</li> <li>Stacking and model selection via leave-one-out cross-validation are closely related</li> <li>Can apply stacking to other non-linear methods to combine predictions from different models</li> </ul>"},{"location":"stat/ASL-note3/#stochastic-search-bumping","title":"Stochastic Search: Bumping","text":"<p>\u8fd9\u7ae0\u63cf\u8ff0\u7684\u6700\u540e\u4e00\u4e2a\u65b9\u6cd5\u4e0d\u6d89\u53ca\u5e73\u5747\u6216\u8005\u7ed3\u5408\u6a21\u578b\uff0c\u4f46\u662f\u662f\u5bfb\u627e\u4e00\u4e2a\u66f4\u597d\u5355\u6a21\u578b\u7684\u65b9\u6cd5\uff0eBumping \u91c7\u7528 bootstrap \u91c7\u6837\u5728\u6a21\u578b\u7a7a\u95f4\u4e2d\u968f\u673a\u79fb\u52a8\uff0e\u5bf9\u4e8e\u62df\u5408\u65b9\u6cd5\u7ecf\u5e38\u4f1a\u627e\u5230\u8bb8\u591a\u5c40\u90e8\u6700\u5c0f\u503c\u7684\u95ee\u9898\uff0cbumping \u53ef\u4ee5\u5e2e\u52a9\u8fd9\u4e9b\u65b9\u6cd5\u907f\u514d\u9677\u5165\u574f\u7684\u89e3\uff0e</p> <p>General Approach</p> <ul> <li>Draw bootstrap samples Z^{*1}, \\ldots, Z^{* B}</li> <li>For b=1, \\ldots,, B Fit the model to Z^{*b} giving \\hat{f}^{* b}(x)</li> <li>Choose the model obtained from bootstrap sample \\hat{b} which minimizes the training error</li> </ul>  \\hat{b}=\\operatorname{argmin}_{b} \\frac{1}{n} \\sum_{i=1}^{n}\\left(y_{i}-\\hat{f}^{* b}\\left(x_{i}\\right)\\right)^{2}  <p>The model predictions are then \\hat{f}^{* \\hat{b}}(x)</p> <p></p> <p>\u4f8b\u5982, \u5bf9\u4e8e\u5f02\u6216(exclusive or)(XOR) \u95ee\u9898\u800c\u8a00, \u7531\u4e8e\u6570\u636e\u5e73\u8861\u7684\u7279\u6027, \u8d2a\u5fc3\u7684 CART \u7b97\u6cd5\u5728\u4e24\u4e2a\u7279\u5f81\u4e0a\u90fd\u65e0\u6cd5\u627e\u5230\u5408\u9002\u7684\u5206\u5272 (\u5206\u5272\u7684\u7ed3\u679c\u662f\u53ef\u80fd\u968f\u673a\u7684), \u56e0\u6b64\u5982\u5de6\u56fe\u65e0\u6cd5\u5f97\u5230\u4e00\u4e2a\u597d\u7684\u7ed3\u679c. \u800c\u5728 bumping \u7b97\u6cd5\u4e2d, \u901a\u8fc7\u6bcf\u6b21\u968f\u673a\u91c7\u6837\u4e00\u7cfb\u5217\u7684\u70b9, \u6253\u7834\u4e86\u6570\u636e\u7684\u5e73\u8861, (\u7136\u540e\u6839\u636e\u6d4b\u8bd5\u7ed3\u679c\u627e\u6700\u597d\u7684\u6a21\u578b), \u4ece\u53f3\u56fe\u53ef\u4ee5\u770b\u5230, \u4e00\u4e2a bumping 20\u6b21\u7684\u6a21\u578b\u5373\u53ef\u5f97\u5230\u4e00\u4e2a\u5f88\u597d\u7684\u7ed3\u679c.</p> <ul> <li>Bumping pertubs the training data</li> <li>Therefore explore different areas of the model space</li> <li>Must ensure the complexity of each model \ufb01t is comparable</li> </ul>"},{"location":"stat/ASL-note3/#additive-models-trees-related-methods","title":"Additive Models, Trees, &amp; Related Methods","text":"<p>\u8fd9\u7ae0\u4e2d\u6211\u4eec\u5f00\u59cb\u5bf9\u76d1\u7763\u5b66\u4e60\u4e2d\u4e00\u4e9b\u7279\u5b9a\u7684\u65b9\u6cd5\u8fdb\u884c\u8ba8\u8bba\uff0e\u8fd9\u91cc\u6bcf\u4e2a\u6280\u5de7\u90fd\u5047\u8bbe\u4e86 \u672a\u77e5\u56de\u5f52\u51fd\u6570\uff08\u4e0d\u540c\u7684\uff09\u7ed3\u6784\u5f62\u5f0f\uff0c\u800c\u4e14\u901a\u8fc7\u8fd9\u6837\u5904\u7406\u5de7\u5999\u5730\u89e3\u51b3\u4e86\u7ef4\u6570\u707e\u96be\uff0e \u5f53\u7136\uff0c\u5b83\u4eec\u8981\u4e3a\u9519\u8bef\u5730\u786e\u5b9a\u6a21\u578b\u7c7b\u578b\u4ed8\u51fa\u53ef\u80fd\u7684\u4ee3\u4ef7\uff0c\u6240\u4ee5\u5728\u6bcf\u79cd\u60c5\u5f62\u4e0b\u90fd\u9700\u8981 \u505a\u51fa\u4e00\u4e2a\u6743\u8861\uff0e\u7b2c 3-6 \u7ae0\u7559\u4e0b\u7684\u95ee\u9898\u90fd\u5c06\u7ee7\u7eed\u8ba8\u8bba\uff0e\u6211\u4eec\u63cf\u8ff0 5 \u4e2a\u76f8\u5173\u7684\u6280\u5de7\uff1a \u5e7f\u4e49\u53ef\u52a0\u6a21\u578b (generalized addi\u019fve models)\uff0c\u6811 (trees)\uff0c\u591a\u5143\u81ea\u9002\u5e94\u56de\u5f52\u6837\u6761 (MARS)\uff0c\u8010\u5fc3\u89c4\u5219\u5f52\u7eb3\u6cd5 (PRIM)\uff0c\u4ee5\u53ca \u6df7\u5408\u5c42\u6b21\u4e13\u5bb6 (HME)\uff0e</p> <ul> <li>Generalized Additive Models</li> <li>Tree Based Methods</li> <li>Patient Rule Induction Method (PRIM)</li> <li>Multivariate Adaptive Regression Splines - MARS</li> <li>Hierarchical Mixture of Experts</li> </ul>"},{"location":"stat/ASL-note3/#generalized-additive-models","title":"Generalized Additive Models","text":"<p>\u56de\u5f52\u6a21\u578b\u5728\u8bb8\u591a\u6570\u636e\u5206\u6790\u4e2d\u8d77\u7740\u91cd\u8981\u7684\u4f5c\u7528\uff0c\u63d0\u4f9b\u4e86\u9884\u6d4b\u548c\u5206\u7c7b\u7684\u89c4\u5219\u3001\u4ee5\u53ca\u7406 \u89e3\u4e0d\u540c\u8f93\u5165\u53d8\u91cf\u91cd\u8981\u6027\u7684\u6570\u636e\u5206\u6790\u5de5\u5177\uff0e</p> <p>\u5c3d\u7ba1\u975e\u5e38\u7b80\u5355\uff0c\u4f46\u662f\u4f20\u7edf\u7684\u7ebf\u6027\u6a21\u578b\u7ecf\u5e38\u5728\u8fd9\u4e9b\u60c5\u5f62\u4e0b\u5931\u6548\uff1a\u5b9e\u9645\u751f\u6d3b\u4e2d\uff0c\u53d8\u91cf\u7684\u5f71\u54cd\u5f80\u5f80\u4e0d\u662f\u7ebf\u6027\u7684\uff0e\u5728\u524d\u9762\u7684\u7ae0\u8282\u4e2d\u6211\u4eec\u8ba8\u8bba\u4f7f\u7528\u9884\u5b9a\u4e49\u7684\u57fa\u51fd\u6570\u6765\u5b9e\u73b0\u975e \u7ebf\u6027\u7684\u6280\u5de7\uff0e\u8fd9\u90e8\u5206\u63cf\u8ff0\u66f4\u591a \u81ea\u52a8\u7075\u6d3b (automatic flexible) \u7684\u7edf\u8ba1\u65b9\u6cd5\u6765\u8bc6\u522b\u548c \u8868\u5f81\u975e\u7ebf\u6027\u56de\u5f52\u7684\u5f71\u54cd\uff0e\u8fd9\u4e9b\u65b9\u6cd5\u88ab\u79f0\u4e3a\u201c\u5e7f\u4e49\u53ef\u52a0\u6a21\u578b\u201d\uff0e</p> <p>A generalized additive model has the form</p>  E\\left(Y \\mid X_{1}, \\ldots, X_{p}\\right)=\\alpha+f_{1}\\left(X_{1}\\right)+f_{2}\\left(X_{2}\\right)+\\ldots+f_{p}\\left(X_{p}\\right)  <p>where each f_{j}{ }^{\\prime} s are smooth, potentially non-parametric functions</p> <p>Here we consider each f_{j} is fit using a scatter plot smoother</p> <ul> <li>cubic smoothing spline</li> <li>kernel smoother</li> </ul> <p>\u8fdb\u4e00\u6b65\u5b9a\u4e49\u5bf9\u4e8e\u4e8c\u5206\u7c7b\u4efb\u52a1 Definition for Binary Classification</p> <p>A generalized additive model has the form</p>  g(P(Y=1 \\mid X))=\\alpha+f_{1}\\left(X_{1}\\right)+f_{2}\\left(X_{2}\\right)+\\ldots+f_{p}\\left(X_{p}\\right)  <p>where g(\\cdot) is a link function.</p> <p>Common link functions are</p> <ul> <li>Identity: g(z)=z<ul> <li>used for linear and additive models for Gaussian response data</li> <li>\u9ad8\u65af\u54cd\u5e94\u6570\u636e</li> </ul> </li> <li>Logit: g(z)=\\log \\frac{z}{1-z}<ul> <li>\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u548c logit \u94fe\u63a5\u51fd\u6570\u5c06\u9884\u6d4b\u53d8\u91cf\u4e0e\u4e8c\u8fdb\u5236\u54cd\u5e94\u53d8\u91cf\u5173\u8054\u8d77\u6765</li> <li>used for model binomial probabilities</li> </ul> </li> <li>Log: g(z)=\\log (z)<ul> <li>used for log-linear or log-additive models for possion count data</li> <li>\u6cca\u677e\u8ba1\u6570\u6570\u636e</li> </ul> </li> </ul> <p>\u4e0a\u9762\u7684\u4e09\u79cd\u60c5\u5f62\u90fd\u662f\u6765\u81ea\u6307\u6570\u65cf\u91c7\u6837\u6a21\u578b\uff0c\u53e6\u5916\u4e5f\u5305\u62ec Gamma \u5206\u5e03\u548c\u8d1f\u4e8c\u9879\u5206\u5e03\uff0e\u8fd9\u4e2a\u5206\u5e03\u65cf\u4ea7\u751f\u4e86\u8457\u540d\u7684\u5e7f\u4e49\u7ebf\u6027\u6a21\u578b\u7c7b\uff0c\u5b83\u4eec\u90fd\u662f\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u6269\u5c55\u4e3a\u5e7f\u4e49\u53ef\u52a0\u6a21\u578b\uff0e</p> <p>Advantages of GAM</p> <ul> <li>If f_{j}^{\\prime} s are estimated in a flexible way, can reveal non-linear relationship between input X_{j} and Y</li> <li>Efficient algorithms to fit them if p is not too large</li> </ul>"},{"location":"stat/ASL-note3/#fitting-gam","title":"Fitting GAM","text":"<p>Additive model [\u7c7b\u4f3c 5.4 \u8282\u4e2d\u8ba8\u8bba\u7684\u60e9\u7f5a\u5e73\u65b9\u548c\u7684 (5.9) \u51c6\u5219]</p>  Y=\\alpha+f_{1}\\left(X_{1}\\right)+f_{2}\\left(X_{2}\\right)+\\ldots+f_{p}\\left(X_{p}\\right)+\\epsilon  <p>where E(\\epsilon)=0</p> <p>How to estimate the parameters?</p> <ul> <li>Training data \\left\\{\\left(x_{i}, y_{i}\\right)\\right\\}_{i=1}^{n}</li> <li>Minimize a penalized sum-of-squares</li> </ul>  \\begin{gathered} \\operatorname{PRSS}\\left(\\alpha, f_{1}, f_{2}, \\ldots, f_{n}\\right)= \\sum_{i=1}^{n}\\left(y_{i}-\\alpha-\\sum_{j=1}^{p} f_{j}\\left(x_{i j}\\right)\\right)^{2}+\\sum_{j=1}^{p} \\lambda_{j} \\int_{t} f_{j}^{\\prime \\prime}(t)^{2} d t \\end{gathered}  <p>where each \\lambda_{j} \\geqslant 0</p> <p>One solution</p> <ul> <li>Let each f_{j}\\left(X_{j}\\right) be a cubic smoothing spline with knots at x_{i j} and response y_{i} for i=1, \\ldots, n [\u53ef\u4ee5\u8bc1\u660e\u4e0a\u5f0f\u7684\u6700\u5c0f\u503c\u662f\u300c\u53ef\u52a0\u4e09\u6b21\u6837\u6761\u6a21\u578b\u300d, \u5373\u5206\u522b\u5bf9\u4e8e\u6bcf\u4e2a\u7ec4\u5206 X_j \u8fdb\u884c\u62df\u5408 f_j \u4e09\u6b21\u6837\u6761]</li> <li>This solution minimizes P R S S\\left(\\alpha, f_{1}, f_{2}, \\ldots, f_{n}\\right)</li> <li>However, it is not the only minimizer as \\alpha is not identifiable</li> </ul> <p>\u4f46\u5728\u6ca1\u6709\u7ea6\u675f\u7684\u60c5\u51b5\u4e0b, \u89e3\u4e0d\u552f\u4e00, \u56e0\u6b64\u89c4\u5b9a\u6bcf\u4e2a\u7ec4\u5206 f_j \u62df\u5408\u7684\u5747\u503c\u4e3a 0. \u6b64\u65f6, \u5f53\u8f93\u5165\u77e9\u9635\u5217\u6ee1\u79e9, \u4e0a\u5f0f\u6709\u552f\u4e00\u89e3.</p> <p>To combat this, assume</p>  \\sum_{i=1}^{n} f_{j}\\left(x_{i j}\\right)=0 \\text { for } j=1, \\ldots, p  <p>This assumption yields \\hat{\\alpha}=\\operatorname{ave}\\left(y_{i}\\right)</p> <p>If the data matrix</p>  X=\\left[\\begin{array}{cccc} x_{11} &amp; x_{12} &amp; \\ldots &amp; x_{1 n} \\\\ x_{21} &amp; x_{22} &amp; \\ldots &amp; x_{2 n} \\\\ \\ldots &amp; \\ldots &amp; \\ldots &amp; \\ldots \\\\ x_{p 1} &amp; x_{p 2} &amp; \\ldots &amp; x_{p n} \\end{array}\\right]  <p>has full column rank, \\operatorname{PRSS}\\left(\\alpha, f_{1}, f_{2}, \\ldots, f_{n}\\right) is convex and the minimizer is unique.</p> <p>\\exists a simple iterative procedure for finding this solution</p>"},{"location":"stat/ASL-note3/#backfitting-algorithm","title":"Backfitting Algorithm","text":"<p>\u6839\u636e\u4e0a\u9762\u7684\u5b9a\u7406\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u62df\u5408\u7b97\u6cd5</p> <p>Step 1: Initialize</p>  \\hat{\\alpha}=\\frac{1}{n} \\sum_{i} y_{i}, \\quad f_{j} \\equiv 0 \\forall j  <p>Step 2: Cycle until convergence j=1,2, \\ldots, p, 1,2, \\ldots, p, 1,2, \\ldots</p>  \\begin{gathered} \\hat{f}_{j} \\leftarrow S_{j}\\left[\\left\\{y_{i}-\\hat{\\alpha}-\\sum_{k \\neq j} \\hat{f}_{k}\\left(x_{i k}\\right)\\right\\}_{i=1}^{n}\\right] \\\\ \\hat{f}_{j} \\leftarrow \\hat{f}_{j}-\\frac{1}{n} \\sum_{i=1}^{n} \\hat{f}_{j}\\left(x_{i j}\\right) \\end{gathered}  <p>where S_{j}\\left[\\left\\{y_{i}-\\hat{\\alpha}-\\sum_{k \\neq j} \\hat{f}_{k}\\left(x_{i k}\\right)\\right\\}_{i=1}^{n}\\right] denotes the cubic smoothing spine with knots at x_{i j} and responses y_{i}-\\hat{\\alpha}-\\sum_{k \\neq j} \\hat{f}_{k}\\left(x_{i k}\\right) for i=1, \\ldots, n</p> <p>Could use other smoothing operators for S_{j}</p> <p>[\u5b9e\u9645\u4e0a, \u7b2c 2(2) \u6b65\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u4e3a\u5149\u6ed1\u6837\u6761\u5bf9 0 \u5747\u503c\u54cd\u5e94\u53d8\u91cf\u62df\u5408\u5747\u503c\u4e3a 0. \u4f46\u673a\u5668\u820d\u5165\u8bef\u5dee\u4f1a\u5bfc\u81f4\u4e0b\u964d\uff0c\u6240\u4ee5\u5efa\u8bae\u8fdb\u884c\u8c03\u6574.]</p>"},{"location":"stat/ASL-note3/#example-additive-logistic-regression","title":"Example: Additive Logistic Regression","text":"<p>Generalized Additive Logistic Model</p>  \\log \\frac{P(Y=1 \\mid X)}{P(Y=0 \\mid X)}=\\alpha+f_{1}\\left(X_{1}\\right)+\\ldots+f_{p}\\left(X_{p}\\right)  <p>Functions f_{1}, \\ldots, f_{p} estimated by a backfitting algorithm within a Newton-Rapson procedure</p> <p>Goal: maximize the log-likelihood</p>  L=\\sum_{i} L_{i}=\\sum_{i}\\left[y_{i} \\log P\\left(Y=1 \\mid x_{i}\\right)+\\left(1-y_{i}\\right) \\log \\left(Y=0 \\mid x_{i}\\right)\\right]  <p>where P\\left(Y=1 \\mid x_{i}\\right)=\\frac{e^{\\eta_{i}}}{1+e^{\\eta_{i}}} and \\eta_{i}=\\alpha+f_{1}\\left(x_{i 1}\\right)+\\ldots+f_{p}\\left(x_{i p}\\right)</p> <p>How: iteratively perform unitl convergence</p> <ul> <li>Let each \\hat{\\eta}_{i}=\\hat{\\alpha}+\\sum \\hat{f}_{j}\\left(x_{i j}\\right) be the estimate of \\eta_{i} given the current estimates of the parameters \\alpha, f_{1}, \\ldots, f_{p}</li> <li>Use a Newton-Raphson update step to produce a new estimate, \\hat{\\eta}_{i}^{n e w}, of \\eta_{i} s.t. L_{i}\\left(\\hat{\\eta}_{i}^{n e w}\\right) \\geqslant L_{i}\\left(\\hat{\\eta}_{i}\\right) for each i [\u56e0\u4e3a\u8fd9\u91cc\u662f\u4e8c\u503c\u54cd\u5e94\u53d8\u91cf\u6ca1\u6709\u5177\u4f53\u7684\u6570\u503c\u54cd\u5e94, \u6240\u4ee5\u7528 Newton \u65b9\u6cd5\u6765\u751f\u6210\u4e00\u4e2a\u8fd1\u4f3c\u7684\u503c?]</li> <li>Use Backfitting to fit an additive model to the targets \\hat{\\eta}_{i}^{n e w} \\forall i</li> <li>This produces new estimates of \\hat{\\alpha}, \\hat{f}_{j} \\forall j</li> </ul>"},{"location":"stat/ASL-note3/#gam-summary","title":"GAM - Summary","text":"<p>Pros</p> <ul> <li>Extension of linear models - more flexible but still interpretable</li> <li>Parameter estimate via Backfitting method is simple</li> <li>Backfitting allows the appropriate fitting method for each input variable \u5141\u8bb8\u5bf9\u4e8e\u6bcf\u4e2a\u8f93\u5165\u53d8\u91cf\u53bb\u9009\u62e9\u5408\u9002\u7684\u62df\u5408\u65b9\u6cd5</li> </ul> <p>Cons</p> <ul> <li>No feature selection is performed</li> <li>Backfitting is not feasible for large p</li> </ul> <p>For large p forward stagewise fitting (such as boosting \u7b2c10\u7ae0) can be a solution\u2026</p>"},{"location":"stat/ASL-note3/#tree-based-methods","title":"Tree Based Methods","text":""},{"location":"stat/ASL-note3/#regression-tree","title":"Regression Tree","text":"<p>Aim: approximate a regression function f: \\mathbb{R}^{p} \\rightarrow \\mathbb{R} with</p>  \\hat{f}(x)=\\sum_{i=1}^{M} f_{m}(x) l\\left(x \\in R_{m}\\right)  <p>with regions R_{1}, \\ldots, R_{M} partition \\mathbb{R}^{p} and f_{m}: \\mathbb{R}^{p} \\rightarrow \\mathbb{R}</p> <p>Challenge: (assuming a specific form for f_{m}{ }^{\\prime} \\mathrm{s} )</p> <ul> <li>Find M and the regions R_{1}, \\ldots, R_{M} s.t. \\hat{f} \\approx f</li> <li>For training data \\left(x_{1}, y_{1}\\right), \\ldots,\\left(x_{n}, y_{n}\\right) with each x_{i} \\in \\mathbb{R}^{p}, y_{i} \\in \\mathbb{R}</li> </ul>"},{"location":"stat/ASL-note3/#piecewise-constant","title":"Piecewise Constant","text":"<p>Let f_{m}(x)=c_{m} such that the regression function becomes</p>  f(x)=\\sum_{i=1}^{M} c_{m} l\\left(x \\in R_{m}\\right)  <p>If we know the regions R_{1}, \\ldots, R_{M} then to minimize</p>  \\operatorname{argmin}_{c_{1}, \\ldots, c_{n}} \\sum_{i=1}^{n}\\left(y_{i}-\\sum_{m=1}^{M} c_{m} l\\left(x_{i} \\in \\mathbb{R}_{m}\\right)\\right)^{2}  <p>one would set</p>  \\hat{c}_{m}=\\frac{\\sum_{i} \\sum_{m} y_{i} l\\left(x_{i} \\in R_{m}\\right)}{\\sum_{i} \\sum_{m} I\\left(x_{i} \\in R_{m}\\right)}  <p>\u4e5f\u5373, \u9884\u6d4b\u4e3a\u6bcf\u4e2a region \u4e0a\u7684\u54cd\u5e94\u53d8\u91cf\u5747\u503c. \u4f46\u627e\u51fa\u4f7f\u5f97\u5e73\u65b9\u548c\u6700\u5c0f\u7684\u6700\u4f18\u4e8c\u5206\u5728\u8ba1\u7b97\u4e0a\u4e00\u822c\u662f\u4e0d\u53ef\u884c\u7684\uff0e\u56e0\u6b64\u6211\u4eec\u91c7\u7528\u4e00\u79cd\u8d2a\u5a6a\u7b97\u6cd5.</p>"},{"location":"stat/ASL-note3/#finding-the-optimal-partition","title":"Finding the Optimal Partition","text":"<p>First step of the greedy approach</p> <ul> <li>Let: R_{1}(j, s)=\\left\\{X \\mid X_{j} \\leqslant s\\right\\} and R_{2}(j, s)=\\left\\{X \\mid X_{j}&gt;s\\right\\}</li> <li>Choose (j, s) to minimize</li> </ul>  \\min _{c_{1}} \\sum_{x_{i} \\in R_{1}(j, s)}\\left(y_{i}-c_{1}\\right)^{2}+\\min_{c_{2}} \\sum_{x_{i} \\in R_{2}(j, s)}\\left(y_{i}-c_{2}\\right)^{2}  <ul> <li>For a fixed (j, s) the minimum occurs when</li> </ul>  \\hat{c}_{k}=A v e\\left(y_{i} \\mid\\left(x_{i}, y_{i}\\right) \\in X\\right) \\text { and } x_{i} \\in R_{k}(j, s) \\text { for } k=1,2  <ul> <li>Determination of best pair (j, s) feasible as for each j only have to check \\leqslant n+1 values of s</li> </ul> <p>Full Greedy Recursion</p> <ul> <li>Once the best split (j, s) is found   1. Partition the data X</li> </ul>  \\begin{aligned} &amp;X_{1}=\\left\\{\\left(x_{i}, y_{i}\\right) \\mid\\left(x_{i}, y_{i}\\right) \\in X\\right\\} \\text { and } x_{i} \\in R_{1}(j, s) \\\\ &amp;X_{2}=\\left\\{\\left(x_{i}, y_{i}\\right) \\mid\\left(x_{i}, y_{i}\\right) \\in X\\right\\} \\text { and } x_{i} \\in R_{2}(j, s) \\end{aligned}  <p>based on the two resulting region   2. Repeat the splitting process on both X_{1} and X_{2}</p> <ul> <li>The process above is recursively repeated on all the resulting subset of data points X_{i} until \\left|X_{i}\\right| is too small</li> <li>The best splits found in this recursive are recoded in a binary tree</li> </ul> <p>Growing a Tree Recursively</p> <p>How large should the tree be?</p> <ul> <li>Very large trees may over fit the data</li> <li>Small tree may not capture the structure in the data</li> </ul> <p>\u6811\u592a\u5927\u4f1a\u8fc7\u62df\u5408\u6570\u636e\uff0c\u800c\u6811\u592a\u5c0f\u5219\u53ef\u80fd\u6355\u6349\u4e0d\u4e86\u91cd\u8981\u7684\u7ed3\u6784. \u53e6\u5916, \u4e0a\u9762\u7684\u770b\u4f3c\u65e0\u7528\u7684\u5206\u5272\u6216\u8bb8\u4f1a\u5bfc\u81f4\u4e0b\u9762\u5f97\u5230\u5f88\u597d\u7684\u5206\u5272. \u66f4\u597d\u7684\u7b56\u7565\u662f\u751f\u6210\u4e00\u4e2a\u5927\u6811 T_0\uff0c\u53ea\u6709\u5f53\u8fbe\u5230\u6700\u5c0f\u7ed3\u70b9\u89c4\u6a21\uff08\u6bd4\u5982 5\uff09\u624d\u505c\u6b62\u5206\u5272\u8fc7\u7a0b\uff0e\u63a5\u7740\u5927\u6811\u91c7\u7528 \u6210\u672c\u590d\u6742\u5ea6\u526a\u679d (cost-complexity pruning) \u6765\u8c03\u6574</p> <p>Common solution</p> <ul> <li>Grow a large tree T_{0}</li> <li>Prune T_{0} using cost-complexity pruning</li> </ul>"},{"location":"stat/ASL-note3/#cost-complexity-pruning","title":"Cost-complexity pruning","text":"<ul> <li>Pruning T_{0} corresponds to collapsing any number of its internal nodes</li> <li>Let T_{T} contain the indices of the terminal nodes in tree T</li> <li>Define</li> </ul>  C_{\\alpha}(T)=\\sum_{m \\in T_{T}} n_{m} Q_{m}(T)+\\alpha|T|  <p>where</p>  \\begin{gathered} n_{m}=\\#\\left\\{x_{i} \\in R_{m}\\right\\} \\\\ Q_{m}(T)=\\frac{1}{n_{m}} \\sum_{x_{i} \\in R_{m}}\\left(y_{i}-\\hat{c}_{m}\\right)^{2} \\text { with } \\hat{c}_{m}=\\frac{1}{n_{m}} \\sum_{x_{i} \\in R_{m}} y_{i} \\end{gathered}  <ul> <li>For a given \\alpha, find the subtree T_{\\alpha} \\subseteq T that minimizes C_{\\alpha}(T)</li> </ul> <p>How \u600e\u4e48\u81ea\u9002\u5e94\u5730\u9009\u62e9 \\alpha? - weakest link pruning \u6700\u5dee\u8fde\u63a5\u526a\u679d</p> <ul> <li>Successively collapse the internal node that produces the smallest per-node increase in</li> </ul>  \\sum_{m} n_{m} Q_{m}(T)  <p>until left with a one node tree</p> <ul> <li>This sequence of collapsed trees contains T_{\\alpha}</li> </ul>"},{"location":"stat/ASL-note3/#classification-tree","title":"Classification Tree","text":"<p>Definitions needed for node impurity measures</p> <ul> <li>In node m, representing a region R_{m} with n_{m} observations</li> </ul>  \\hat{p}_{m k}=\\frac{1}{n_{m}} \\sum_{x_{i} \\in R_{m}} I\\left(y_{i}=k\\right)  <p>where \\hat{p}_{m k} is the proportion of class k observations in node m</p> <ul> <li>Classify the observation in node m to class k(m)=\\operatorname{argmax}_{k} \\hat{p}_{m k} the majority vote in node m</li> </ul> <p>\u5982\u4f55\u8861\u91cf\u8282\u70b9\u7684\u4e0d\u7eaf\u5ea6? Different measures of node impurity</p> <ul> <li>Misclassification error</li> </ul>  \\frac{1}{n_{m}} \\sum_{i \\in R_{m}} I\\left(y_{i} \\neq k(m)\\right)=1-\\hat{p}_{m k(m)}  <ul> <li>Gini index</li> </ul>  \\sum_{k=1}^{k} \\hat{p}_{m k}\\left(1-\\hat{p}_{m k}\\right)  <ul> <li>Cross-entropy or deviance</li> </ul>  -\\sum_{k=1}^{K} \\hat{p}_{m k} \\log \\hat{p}_{m k}  <p>\u5728\u4e8c\u5206\u7c7b\u4efb\u52a1\u4e0a\u6bd4\u8f83\u8fd9\u51e0\u4e2a\u6307\u6807. For binary classification, let p=\\hat{p}_{m 0}</p> <ul> <li>Misclassification error: 1-\\max (p, 1-p)</li> <li>Gini index: 2 p(1-p)</li> <li>Cross-entropy or deviance: -p \\log p-(1-p) \\log (1-p)</li> </ul> <p>\u6bd4\u8f83</p> <ul> <li>[\u6ce8\u610f\u5230\u56fe\u4e2d\u4ea4\u53c9\u71b5\u8fdb\u884c\u4e86\u7f29\u5c0f\u4f7f\u5176\u7ecf\u8fc7\u540c\u4e00\u70b9.]</li> <li>\u8fd9\u4e09\u8005\u90fd\u7c7b\u4f3c\uff0c\u4f46\u662f \u4ea4\u53c9\u71b5 (cross-entropy) \u548c \u57fa\u5c3c\u6307\u6570 (Gini index) \u662f\u53ef\u5fae\u7684\uff0c\u56e0\u6b64\u66f4\u52a0\u9002\u5408\u6570\u503c\u4f18\u5316.</li> <li>\u53e6\u5916\uff0c\u4ea4\u53c9\u71b5\u548c\u57fa\u5c3c\u6307\u6570\u6bd4\u8bef\u5206\u7c7b\u7387\u5bf9\u7ed3\u70b9\u6982\u7387\u7684\u6539\u53d8\u66f4\u52a0\u654f\u611f</li> </ul> <p></p> <ul> <li>Cost of binary split of node m into nodes m_{1} and m_{2} is</li> </ul>  \\frac{1}{n_{m 1}} Q_{m 1}+\\frac{1}{n_{m 2}} Q_{m 2}  <p>where Q_{m 1} is the impurity measure of node m_{1}, similarly for Q_{m 2}</p> <ul> <li>Cross-entropy and Gini are more sensitive to changes in the node probabilities than Misclassification rate</li> <li>Cross-entropy and Gini measures used to grow the trees (\u5206\u5272\u8282\u70b9\u7684\u8fc7\u7a0b\u4e2d\u591a\u7528 \u4ea4\u53c9\u71b5\u6216Gini)</li> <li>All measures used to prune tree</li> </ul>"},{"location":"stat/ASL-note3/#problems-with-trees","title":"Problems with Trees","text":"<ul> <li>Instability<ul> <li>Tress have high variance due to hierarchical search process</li> <li>Errors at top nodes propogate to lower ones<ul> <li>Small change in training data can give very different splits</li> </ul> </li> </ul> </li> <li>Lack of smoothness<ul> <li>Regression trees response surface not smooth</li> <li>Hit problems when underlying function is smooth</li> </ul> </li> <li>Difficulty in capturing additive structures \u5bf9\u52a0\u6027\u7ed3\u6784\u5efa\u6a21\u7684\u56f0\u96be<ul> <li>The binary tree structure precludes the discovery of additive structure like   Y=c_{1} I\\left(X_{1}&lt;t_{1}\\right)+c_{2} I\\left(X_{2}&lt;t_{2}\\right)+\\epsilon</li> <li>\u4f8b\u5982, \u5728\u56de\u5f52\u95ee\u9898\u4e2d, \u5047\u8bbe Y=c_{1} I\\left(X_{1}&lt;t_{1}\\right)+c_{2} I\\left(X_{2}&lt;t_{2}\\right)+\\varepsilon, \u5176\u4e2d \\varepsilon \u662f 0 \u5747\u503c\u566a\u58f0. \u5219\u4e8c\u53c9\u6811\u4f1a\u5728 t_{1} \u9644\u8fd1\u5bf9 X_{1} \u505a\u7b2c \u4e00\u6b21\u5206\u5272. \u4e3a\u4e86\u6355\u6349\u52a0\u6027\u7ed3\u6784, \u4e0b\u4e00\u5c42\u4e24\u4e2a\u7ed3\u70b9\u90fd\u9700\u8981\u5728 t_{2} \u5904\u5bf9 X_{2} \u5206\u5272. \u5728\u5145\u8db3\u6570\u636e\u60c5\u51b5\u4e0b\u8fd9 \u4e2a\u6216\u8bb8\u53ef\u4ee5\u53d1\u751f, \u4f46\u662f\u8fd9\u4e2a\u6a21\u578b\u6ca1\u6709\u7ed9\u4e88\u7279\u522b\u9f13\u52b1\u6765\u627e\u5230\u8fd9\u4e00\u7ed3\u6784. \u5982\u679c\u6709 10 \u4e2a\u800c\u4e0d\u662f 2 \u4e2a\u52a0\u6027 \u5f71\u54cd, \u9700\u8981\u82b1\u8d39\u5f88\u591a\u5076\u7136\u7684\u5206\u5272\u6765\u91cd\u9020\u8fd9\u4e2a\u7ed3\u6784, \u5e76\u4e14\u5728\u4f30\u8ba1\u7684\u6811\u4e2d, \u901a\u8fc7\u6570\u636e\u5206\u6790\u6765\u8bc6\u522b\u5b83\u4f1a\u53d8 \u5f97\u975e\u5e38\u56f0\u96be. \u539f\u56e0\u518d\u4e00\u6b21\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4e8c\u53c9\u6811\u7684\u7ed3\u6784, \u65e2\u6709\u4f18\u70b9\u4e5f\u6709\u4e0d\u8db3. \u4e3a\u4e86\u6355\u6349\u52a0\u6027\u7ed3\u6784, MARS \u65b9\u6cd5 (9.4 \u8282) \u518d\u4e00\u6b21\u653e\u5f03\u6811\u7684\u7ed3\u6784.</li> </ul> </li> </ul>"},{"location":"stat/ASL-note3/#patient-rule-induction-method-prim","title":"Patient Rule Induction Method (PRIM)","text":"<p>\u57fa\u4e8e\u6811\u7684\u65b9\u6cd5\uff08\u7528\u4e8e\u56de\u5f52\uff09\u5c06\u7279\u5f81\u7a7a\u95f4\u5206\u6210\u76d2\u72b6\u7684\u533a\u57df\uff0c\u6765\u8bd5\u56fe\u4f7f\u6bcf\u4e2a\u76d2\u5b50\u4e2d\u7684\u54cd\u5e94\u53d8\u91cf\u5c3d\u53ef\u80fd\u4e0d\u540c\uff0e\u901a\u8fc7\u4e8c\u53c9\u6811\u5b9a\u4e49\u4e86\u4e0e\u6bcf\u4e2a\u76d2\u5b50\u76f8\u5173\u7684\u5206\u5272\u89c4\u5219\uff0c\u8fd9\u6709\u5229\u4e8e\u5b83\u4eec\u7684\u89e3\u91ca\u6027\uff0e</p> <p>\u8010\u5fc3\u89c4\u5219\u5f52\u7eb3\u6cd5 (PRIM) \u4e5f\u5728\u7279\u5f81\u7a7a\u95f4\u4e2d\u627e\u76d2\u5b50\uff0c\u4f46\u662f\u5b83\u662f\u5bfb\u627e\u5177\u6709\u9ad8\u5e73\u5747\u54cd\u5e94\u7684\u76d2\u5b50\uff0e\u56e0\u6b64\u5b83\u662f\u5728\u5bfb\u627e\u76ee\u6807\u51fd\u6570\u7684\u6700\u5927\u503c\uff0c\u79f0\u4e3abump hunting\uff0e\uff08\u5982\u679c\u9700\u8981\u6700\u5c0f\u503c\u800c\u975e\u6700\u5927\u503c\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u7528\u8d1f\u7684\u54cd\u5e94\u53d8\u91cf\u503c\u6765\u8f6c\u5316\uff0e\uff09</p>"},{"location":"stat/ASL-note3/#prim","title":"PRIM","text":"<p>Aim</p> <ul> <li>Locate maximum in the response function</li> </ul> <p>How: find a rectangular box in the feature space which contains</p> <ul> <li>for classification: a clump of points of maximal purity</li> <li>for regression: a plateau of high scoring points</li> </ul> <p>PRIM - a greedy search which is more patient than CART</p>"},{"location":"stat/ASL-note3/#prim-algorithm","title":"PRIM - Algorithm","text":"<p>PRIM \u7684\u601d\u60f3\u662f\u4ece\u4e0d\u540c\u7684\u53d8\u91cf\u7ef4\u5ea6\u53bb\u7f29\u51cf box \u7684\u5927\u5c0f, \u5c3d\u91cf\u4f7f\u5f97\u76d2\u5b50\u4e2d\u54cd\u5e94\u53d8\u91cf\u5c3d\u53ef\u80fd\u5927 (\u6240\u4ee5\u4e5f\u53eb Bump Hunting). \u7f29\u51cf\u7684\u65b9\u5f0f\u53eb\u505a Peeling \u89c1\u4e0b; \u53e6\u5916\u4e3a\u4e86\u6a21\u578b\u7684\u5065\u58ee\u6027, \u6700\u540e\u4e5f\u4f1a\u6269\u5c55\u76d2\u5b50, \u53eb\u505a Pasting. \u76f8\u5173\u5b9a\u4e49\u5982\u4e0b</p> <ul> <li>Box B is defined by the set of inequalities</li> </ul>  a_{j} \\leqslant X_{j} \\leqslant b_{j} \\text { for } j=1, \\ldots, p  <p>where p is the dimension of the feature vectors</p> <ul> <li>B^{\\prime}=\\operatorname{NewBox}(B, k, 0, a) is defined by the inequalities</li> </ul>  \\begin{gathered} a_{j} \\leqslant X_{j} \\leqslant b_{j} \\text { for } j=1, \\ldots, k-1 \\\\ a \\leqslant X_{k} \\leqslant b_{k} \\\\ a_{j} \\leqslant X_{j} \\leqslant b_{j} \\text { for } j=k+1, \\ldots, p \\end{gathered}  <ul> <li>B^{\\prime}=\\operatorname{NewBox}(B, k, 1, b) is defined by the inequalities</li> </ul>  \\begin{aligned} a_{j} \\leqslant X_{j} \\leqslant b_{j} \\text { for } j=1, \\ldots, k-1 &amp; a_{k} \\leqslant X_{k} \\leqslant b \\\\ a_{j} \\leqslant X_{j} \\leqslant &amp; b_{j} \\text { for } j=k+1, \\ldots, p \\end{aligned}  <ul> <li>Let n_{B}=\\# of training observations in box B</li> </ul> <p>\u7f29\u51cf\u65b9\u5f0f\u7684\u5177\u4f53\u5b9a\u4e49\u5982\u4e0b, \u5373\u6bcf\u6b21\u4ece\u6240\u6709\u53ef\u80fd\u7684\u7ef4\u5ea6\u6536\u7f29, \u8981\u6c42\u76d2\u5b50\u4e2d\u51cf\u5c11\u7684\u6570\u636e\u91cf\u521a\u597d\u4e3a \\alpha, \u8fd9\u91cc\u7684 \\alpha \u4e00\u822c\u53ef\u53d6 0.05 \u6216 0.1 (\u6269\u5c55\u7684\u65b9\u5f0f\u7c7b\u4f3c, \u6bcf\u6b21\u6269\u5c55 \\alpha \u4e2a\u6570\u636e\u70b9, \u8fd9\u91cc\u4e0d\u5c55\u793a\u4e86.)</p> <p>Peeling - Decrease the size of box B for one face</p> <ul> <li>Define B^{\\prime}=\\operatorname{Peel}(B, k, 0, \\alpha) to be the box</li> </ul>  B^{\\prime}=\\operatorname{NewBox}(B, k, 0, a)  <p>where a is the smallest scalar for \\alpha \\in(0,1) s.t.</p>  a&gt;a_{k} \\text { and } n_{B^{\\prime}} \\leqslant(1-\\alpha) n_{B}  <ul> <li>Define B^{\\prime}=\\operatorname{Peel}(B, k, 1, \\alpha) to be the box</li> </ul>  B^{\\prime}=\\operatorname{NewBox}(B, k, 1, b)  <p>where b is the largest scalar for \\alpha \\in(0,1) s.t. b&lt;b_{k} and n_{B^{\\prime}} \\leqslant(1-\\alpha) n_{B}</p> <p></p> <p>\u627e\u76d2\u5b50\u7684\u603b\u4f53\u6d41\u7a0b\u53ef\u89c4\u8303\u5730\u5199\u4e3a</p> <ol> <li>Set i=0 and let \\alpha \\in(0,1)</li> <li>Let B_{0} be the minimal box containing all the data</li> <li>Peeling process: find sequence of decreasing nested boxes while (number of observations in B_{i} \\geqslant n_{m} )    - Compute the trimmed boxes C_{k}=P e e l\\left(B_{i}, k, 0, \\alpha\\right) and C_{k+p}=\\operatorname{Peel}\\left(B_{i}, k, 1, \\alpha\\right) for k=1, \\ldots, p    - Choose the C_{j *} with highest response mean [\u4ece\u6bcf\u4e00\u4e2a\u7ef4\u5ea6\u5c1d\u8bd5\u641c\u7d22, \u9009\u62e9\u5f97\u5230\u7684\u76d2\u5b50\u4e2d\u54cd\u5e94\u91cf\u6700\u9ad8\u7684\u90a3\u4e00\u4e2a]    - Set B_{i+1}=C_{j *}    - Set i=i+1</li> <li>Pasting process: find sequence of increasing nested boxed For k=1, \\ldots, p    - C=\\operatorname{ExpandBox}\\left(B_{i}, k, 0, \\alpha\\right), D=\\operatorname{ExpandBox}\\left(B_{i}, k, 1, \\alpha\\right)    - Set B_{i+1}=C and i=i+1 if S_{C}&gt;S_{B_{i}} and S_{C}&gt;S_{D}    - Set B_{i+1}=D and i=i+1 if S_{C}&gt;S_{B_{i}} and S_{D}&gt;S_{C}</li> </ol> <p>\u4e0a\u9762\u4ec5\u4ec5\u662f\u627e\u5230\u4e86\u4e00\u4e2a\u76d2\u5b50, \u6574\u4f53\u6d41\u7a0b\u4e3a</p> <ol> <li>Previous steps produces a sequence of boxes B_{1}, \\ldots, B_{i}</li> <li>Use cross-validation to choose best box - call this box B</li> <li>Remove the data in box B from the dataset</li> <li>Repeat the peeling and pasting steps and the cross-validation step to obtain a second box</li> <li>Continue these last two steps to get as many boxes as desired</li> </ol> <p>PRIM \u4e0e CART \u76f8\u6bd4\u7684\u4f18\u70b9\u662f\u5b83\u7684 \u8010\u5fc3 (patience). \u56e0\u4e3a CART \u7684\u4e8c\u503c\u5206\u5272\u5feb\u901f\u5730\u5c06\u6570\u636e\u5206\u5272\u5f00. \u5047\u8bbe\u7b49\u5927\u5c0f\u7684\u5206\u5272, \u6709 N \u4e2a\u89c2\u6d4b\u60c5\u51b5\u4e0b, \u5728\u4f7f\u7528\u5b8c\u6570\u636e\u4e4b\u524d, \u53ea\u80fd\u8fdb\u884c \\log _{2}(N)-1 \u6b21\u5206\u5272. \u5982 \u679c PRIM \u5728\u6bcf\u4e00\u6b65\u5254\u9664\u6389\u8bad\u7ec3\u70b9\u7684\u6bd4\u4f8b\u4e3a \\alpha, \u5219\u5728\u7528\u5b8c\u6570\u636e\u4e4b\u524d\u5927\u7ea6\u9700\u8981 -\\log (N) / \\log (1-\\alpha) \u6b21 \u6679\u9664\u6b65\u9aa4. \u4e3e\u4e2a\u4f8b\u5b50, \u5982\u679c N=128, \\alpha=0.10, \u5219 \\log_{2}(N)-1=6, \u800c -\\log (N) / \\log (1-\\alpha) \\approx 46. \u8003\u8651\u6bcf\u4e00\u6b65\u9700\u8981\u6574\u6570\u4e2a\u7684\u89c2\u6d4b, PRIM \u5b9e\u9645\u4e0a\u53ef\u4ee5\u5254\u9664 29 \u6b21. \u5728\u4efb \u4f55\u60c5\u5f62\u4e0b, PRIM \u7684\u80fd\u529b\u66f4\u52a0\u8010\u5fc3, \u8fd9\u5e94\u8be5\u5e2e\u52a9\u81ea\u4e0a\u800c\u4e0b\u7684\u8d2a\u5a6a\u7b97\u6cd5\u627e\u5230\u66f4\u597d\u7684\u89e3.</p>"},{"location":"stat/ASL-note3/#multivariate-adaptive-regression-splines-mars","title":"Multivariate Adaptive Regression Splines (MARS)","text":"<p>\u591a\u53d8\u91cf\u81ea\u9002\u5e94\u56de\u5f52\u6837\u6761 (Multivariate Adaptive Regression Splines, MARS) \u662f\u56de\u5f52\u7684\u81ea\u9002\u5e94\u8fc7\u7a0b(an adaptive procedure for regression)\uff0c\u975e\u5e38\u9002\u5408\u9ad8\u7ef4\u95ee\u9898\uff08\u5373\uff0c\u5b58\u5728\u5927\u91cf\u7684\u8f93\u5165\uff09\uff0e\u53ef\u4ee5\u4ece\u4e24\u4e2a\u89d2\u5ea6\u6765\u7406\u89e3\u5b83\uff0c\u9996\u5148\uff0c\u5b83\u53ef\u4ee5\u770b\u6210\u662f\u9010\u6b65\u7ebf\u6027\u56de\u5f52 (stepwise linear regression)\u7684\u63a8\u5e7f\uff0c\u5176\u6b21\uff0c\u4e5f\u53ef\u4ee5\u770b\u6210\u662f\u4e3a\u4e86\u63d0\u9ad8 CART \u5728\u56de\u5f52\u4e2d\u7684\u6548\u679c\u800c\u8fdb\u884c\u7684\u6539\u8fdb\uff0e\u6211\u4eec\u4ece\u7b2c\u4e00\u79cd\u89c2\u70b9\u5f15\u5165 MARS\uff0c\u63a5\u7740\u4e0e CART \u8054\u7cfb\u8d77\u6765\uff0e</p> <p>\u9996\u5148\u5b9a\u4e49 expansions in piecewise linear basis functions \\left(x-t\\right)_{+} \u548c \\left(t-x\\right)_{+}, \u51fd\u6570\u56fe\u50cf\u5982\u4e0b:</p> <p></p> <p>MARS - Basis Functions</p> <ul> <li>Training data \\left(x_{1},, y_{1}\\right), \\ldots,\\left(x_{n}, y_{n}\\right) with y_{i} \\in \\mathbb{R} and x_{i}=\\left(x_{i 1}, x_{i 2}, \\ldots, x_{i p}\\right)^{\\top} \\in \\mathbb{R}^{p}</li> <li>For an input vector X \\in \\mathbb{R}^{p} define</li> </ul>  h_{0}(X, j, i)=\\left(X_{j}-x_{i j}\\right)_{+} \\text {and } h_{1}(X, j, i)=\\left(x_{i j}-X_{j}\\right)_{+}  <ul> <li>Then define a collection of basis functions</li> </ul>  C=\\left\\{h_{0}(X, j, i), h_{1}(X, j, i)_{j=1, \\ldots, p, i=1, \\ldots, n}\\right\\}  <p>\u6839\u636e\u4e0a\u9762\u7684\u5b9a\u4e49, \u53ef\u4ee5\u6700\u591a\u53ef\u80fd\u6709 Np \u4e2a\u57fa\u51fd\u6570. \u7136\u540e\u57fa\u4e8e\u8fd9\u7ec4\u57fa\u51fd\u6570\u8fdb\u884c\u62df\u5408 (\u6ce8\u610f\u4e0b\u9762\u7684 g\\left(X, \\alpha_{m}\\right) \u662f C \u4e2d\u591a\u4e2a\u57fa\u51fd\u6570\u7684\u4e58\u79ef.)</p> <p>Estimate the regression function using functions from C and product of functions from C</p>  f(X)=\\beta_{0}+\\sum_{m=1}^{M} \\beta_{m} g\\left(X, \\alpha_{m}\\right)  <p>where each \\alpha_{m}=\\left(n_{m}, b_{1}, j_{1}, i_{1}, \\ldots, b_{n m}, j_{n m}, i_{n m}\\right) with b_{k} \\in\\{0,1\\} s.t.</p>  g\\left(X, \\alpha_{m}\\right)=\\prod_{k=1}^{n_{m}} h_{b_{k}}\\left(X, j_{k}, i_{k}\\right)  <p></p> <p>\u5177\u4f53\u7684\u7b5b\u9009\u7b97\u6cd5\u5982\u4e0b, \u4e0a\u56fe\u4e3a\u76f4\u89c2\u7684\u5c55\u793a.</p> <p>Initially</p> <ul> <li>Set g\\left(X, \\alpha_{0}\\right) \\equiv 1 and M=\\left\\{g\\left(X, \\alpha_{0}\\right)\\right\\}</li> </ul> <p>While |M|&lt;N perform the following</p> <ul> <li>for each (m, j, i) \\in\\{1, \\ldots,|M|\\} \\times\\{1, \\ldots, p\\} \\times\\{1, \\ldots, n\\}   1. Augment functions in M-g\\left(X, \\alpha_{0}\\right), \\ldots, g\\left(X, \\alpha_{|M|}\\right) with \u5c06\u6a21\u578b\u96c6\u5408\u4e2d\u73b0\u6709\u7684\u6240\u6709\u51fd\u6570\u548c C \u4e2d\u6240\u6709\u57fa\u51fd\u6570\u4e58\u79ef\u4f5c\u4e3a\u7ec4\u5408 (\u6ce8\u610f\u6bcf\u6b21\u52a0\u5165\u7684\u90fd\u662f\u4e00\u4e2a\u53cd\u5c04\u5bf9)   g\\left(X, \\alpha_{m}\\right) \\cdot h_{0}(X, j, i) \\text { and } g\\left(X, \\alpha_{m}\\right) \\cdot h_{1}(X, j, i)   2. Use standard linear regression o estimate the \\hat{\\beta}_{1} \u2018s s.t.   \\begin{gathered}   f_{t r y}(X)=\\sum_{l=0}^{|M|} \\hat{\\beta}_{I} g\\left(X, \\alpha_{l}\\right)+\\hat{\\beta}_{|M|+1} g\\left(X, \\alpha_{m}\\right) \\cdot h_{0}(X, j, i)+   \\hat{\\beta}_{|M|+2} g\\left(X, \\alpha_{m}\\right) \\cdot h_{1}(X, j, i)   \\end{gathered}   3. Compute and record training error of f_{\\text {try }}(X)</li> <li>Let \\left(m^{*}\\right), j^{*}, i^{*} be triplet producing lowest training error</li> <li>Add g\\left(X, \\alpha_{m^{*}}\\right) \\cdot h_{0}\\left(X, j^{*}, i^{*}\\right) and g\\left(X, \\alpha_{m^{*}}\\right) \\cdot h_{1}\\left(X, j^{*}, i^{*}\\right) to M</li> </ul>"},{"location":"stat/ASL-note3/#piecewise-linear-forward-model-building","title":"Piecewise Linear \\&amp; Forward Model Building","text":"<p>They can operate locally - the product is only non-zero where all individual components are non-zero</p>  \\prod_{k=1}^{n_{m}} h_{b_{k}}\\left(X, j_{k}, i_{k}\\right)  <ul> <li>Locality \\rightarrow forward model building strategy can<ul> <li>build up the regression surface parsimoniously (\u541d\u556c\u5730)</li> <li>use parameters only when needed, which is very important for high dimensional data</li> <li>\u300cThis is important, since one should \u201cspend\u201d parameters carefully in high dimensions, as they can run out quickly.\u300d</li> </ul> </li> <li>Computational reasons - innermost loop of model building can be made very efficient</li> <li>Hierarchical search avoids unnecessary complicated terms \u6ce8\u610f\u5230\u4e00\u4e2a 4 \u9636\u7684\u4ea4\u53c9\u9879\u8981\u51fa\u73b0\u5728\u6a21\u578b\u4e2d, \u5219\u5176\u4e2d\u4e00\u5b9a\u6709\u4e00\u4e2a 3 \u9636\u4ea4\u53c9\u76f8\u5728\u539f\u672c\u7684\u6a21\u578b\u4e2d (\u907f\u514d\u4e86\u5728\u53ef\u884c\u9009\u62e9\u6570\u76ee\u5448\u6307\u6570\u589e\u957f\u7684\u7a7a\u95f4\u4e2d\u7684\u641c\u7d22)</li> </ul>"},{"location":"stat/ASL-note3/#mars-vs-cart","title":"MARS V.S CART","text":"<p>If MARS procedure is amended s.t.</p> <ol> <li>Set h_{0}(X, j, i)=I\\left(X_{j}-x_{i j}&gt;0\\right) \\leftarrow step function</li> <li>Set h_{1}(X, j, i)=I\\left(X_{j}-x_{i j} \\leqslant 0\\right) \\leftarrow step function (\u7528\u9636\u8dc3\u51fd\u6570\u66ff\u4ee3\u5206\u6bb5\u7ebf\u6027\u57fa\u51fd\u6570)</li> <li>When g \\in M is chosen at one iteration s.t.</li> </ol>  M=M \\cup\\left\\{g(X) \\cdot h_{0}(X, j, i)\\right\\} \\cup\\left\\{g(X) \\cdot h_{1}(X, j, i)\\right\\}  <p>remove g from M \u5f53\u6a21\u578b\u4e2d\u7684\u9879\u4e0e\u5019\u9009\u9879\u76f8\u4e58\uff0c\u66ff\u6362\u6210\u4ea4\u53c9\u9879\uff0c\u56e0\u6b64\u4e0d\u5141\u8bb8\u8be5\u9879\u4e0e\u5176\u5b83\u5019\u9009\u9879\u8fdb\u884c\u4ea4\u53c9\uff0e</p> <p>Then, MARS forward procedure == CART tree-growing algorithm</p> <p>\u4e58\u4e0a\u4e00\u5bf9\u53cd\u5c04\u9636\u8dc3\u51fd\u6570\u7b49\u4ef7\u4e8e\u5728\u9636\u8dc3\u70b9\u5206\u5272\u5f00\uff0e\u7b2c\u4e8c\u6761\u9650\u5236\u8868\u660e\u4e00\u4e2a\u7ed3\u70b9\u53ef\u80fd\u4e0d\u4f1a\u88ab\u5206\u5272\u6210\u591a\u6b21\uff0c\u56e0\u6b64\u4f7f\u5f97 CART \u6a21\u578b\u80fd\u7528\uff08\u5438\u5f15\u4eba\u7684\uff09\u4e8c\u53c9\u6811\u8868\u793a\uff0e\u53e6\u4e00\u65b9\u9762\uff0c\u4e5f\u662f\u8fd9\u6761\u9650\u5236\u4f7f\u5f97 CART \u5f88\u96be\u5bf9\u52a0\u6027\u7ed3\u6784\u8fdb\u884c\u5efa\u6a21\uff0eMARS \u653e\u5f03\u6811\u7ed3\u6784\u5e76\u4e14\u5f97\u5230\u6355\u6349\u52a0\u6027\u5f71\u54cd\u7684\u80fd\u529b\uff0e</p>"},{"location":"stat/ASL-note3/#hierarchical-mixture-of-experts-hme","title":"Hierarchical Mixture of Experts (HME)","text":"<p>\u4e13\u5bb6\u7684\u5206\u5c42\u6df7\u5408 (HME) \u8fc7\u7a0b\u53ef\u4ee5\u770b\u6210\u662f\u57fa\u4e8e\u6811\u65b9\u6cd5\u7684\u53d8\u79cd\uff0e\u4e3b\u8981\u7684\u5dee\u5f02\u662f\u6811\u7684\u5206\u5272\u4e0d\u662f\u786c\u51b3\u5b9a (hard decision)\uff0c\u800c\u662f\u8f6f\u6982\u7387\u7684\u51b3\u5b9a (soft probabilistic)\uff0e\u5728\u6bcf\u4e2a\u7ed3\u70b9\u89c2\u6d4b\u5f80\u5de6\u6216\u8005\u5f80\u53f3\u7684\u6982\u7387\u53d6\u51b3\u4e8e\u8f93\u5165\u503c\uff0e\u56e0\u4e3a\u6700\u540e\u7684\u53c2\u6570\u4f18\u5316\u95ee\u9898\u662f\u5149\u6ed1\u7684\uff0c\u6240\u4ee5\u6709\u4e00\u4e9b\u8ba1\u7b97\u7684\u4f18\u52bf\uff0c\u4e0d\u50cf\u5728\u57fa\u4e8e\u6811\u7684\u65b9\u5f0f\u4e2d\u7684\u79bb\u6563\u5206\u5272\u70b9\u7684\u641c\u7d22\uff0e\u8f6f\u5206\u5272\u6216\u8bb8\u4e5f\u53ef\u4ee5\u5e2e\u52a9\u9884\u6d4b\u51c6\u786e\u6027\uff0c\u5e76\u4e14\u63d0\u4f9b\u53e6\u5916\u4e00\u79cd\u6709\u7528\u7684\u6570\u636e\u63cf\u8ff0\u65b9\u5f0f\uff0e</p> <p>HMEs \u548c CART \u6811\u7684\u5b9e\u73b0\u8fd8\u6709\u5176\u4ed6\u7684\u5dee\u5f02\uff0e\u5728HME\u4e2d\uff0c\u5728\u6bcf\u4e2a\u7ec8\u6b62\u7ed3\u70b9\u5904\u62df\u5408\u7ebf\u6027\uff08\u6216\u8005\u903b\u8f91\u65af\u8482\u56de\u5f52\uff09\u6a21\u578b\uff0c\u800c\u4e0d\u662f\u50cf CART \u4e2d\u90a3\u6837\u662f\u5e38\u503c\uff0e\u5206\u5272\u70b9\u53ef\u4ee5\u662f\u591a\u91cd\u7684\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u4e8c\u503c\u7684\uff0c\u5e76\u4e14\u5206\u5272\u70b9\u662f\u8f93\u5165\u7684\u7ebf\u6027\u7ec4\u5408\u7684\u6982\u7387\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u5728\u6807\u51c6 CART \u4e2d\u7684\u5355\u4e2a\u8f93\u5165\uff0e\u7136\u800c\uff0c\u8fd9\u4e9b\u9009\u62e9\u7684\u76f8\u5bf9\u4f18\u70b9\u4e0d\u662f\u6e05\u6670\u7684\uff0c\u5927\u90e8\u5206\u5c06\u5728 9.2 \u8282\u7684\u540e\u9762\u4e2d\u8ba8\u8bba\uff0e</p> <p>\u7b80\u5355\u7684 2 \u5c42 HME \u6a21\u578b\u5982\u56fe 9.13 \u6240\u793a\uff0e\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5728\u6bcf\u4e2a\u975e\u7ec8\u6b62\u7ed3\u70b9\u5904\u8fdb\u884c\u8f6f\u5206\u5272\u7684\u6811\uff0e\u7136\u800c\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7684\u53d1\u660e\u8005\u91c7\u7528\u4e0d\u540c\u7684\u672f\u8bed\uff0e\u7ec8\u6b62\u7ed3\u70b9\u79f0\u4e3a\u4e13\u5bb6 (experts)\uff0c\u975e\u7ec8\u6b62\u7ed3\u70b9\u79f0\u4e3a\u95e8\u63a7\u7f51\u7edc (gating networks)\uff0e\u60f3\u6cd5\u662f\uff0c\u6bcf\u4e2a\u4e13\u5bb6\u5bf9\u54cd\u5e94\u53d8\u91cf\u63d0\u4f9b\u4e00\u4e2a\u770b\u6cd5\uff08\u9884\u6d4b\uff09\uff0c\u5e76\u4e14\u901a\u8fc7\u95e8\u63a7\u7f51\u7edc\u5c06\u8fd9\u4e9b\u201c\u770b\u6cd5\u201d\u7ed3\u5408\u5728\u4e00\u8d77\uff0e\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0c\u8fd9\u4e2a\u6a21\u578b\u5f62\u5f0f\u4e0a\u662f\u6df7\u5408\u6a21\u578b\uff0c\u5e76\u4e14\u56fe\u4e2d\u7684\u4e24\u5c42\u6a21\u578b\u53ef\u4ee5\u63a8\u5e7f\u4e3a\u591a\u5c42\uff0c\u56e0\u6b64\u6709\u4e86\u79f0\u4e3a\u4e13\u5bb6\u7684\u5206\u5c42\u6df7\u5408 (hierarchical mixtures of experts)</p> <p></p> <p>\u9876\u5c42\u7684\u95e8\u63a7\u7f51\u7edc\u6709\u8f93\u51fa</p>  g_{j}\\left(x, \\gamma_{j}\\right)=\\frac{e^{\\gamma_{j}^{T} x}}{\\sum_{k=1}^{K} e^{\\gamma_{k}^{T} x}} j=1,2, \\ldots, K  <p>\u5176\u4e2d\u6bcf\u4e2a \\gamma_{j} \u662f\u672b\u77e5\u53c2\u6570\u5411\u91cf. \u8fd9\u8868\u793a\u8f6f\u7684 K \u91cd\u5206\u5272\uff08\u56fe 9.13 \u4e2d K=2 \uff09\u6bcf\u4e2a g_{j}\\left(x, \\gamma_{j}\\right) \u662f\u5c06\u7279\u5f81 \u5411\u91cf\u4e3a x \u7684\u89c2\u6d4b\u8d4b\u7ed9\u7b2c j \u4e2a\u5206\u652f. \u6ce8\u610f\u5230 K=2 \u65f6, \u5982\u679c\u6211\u4eec\u5c06 x \u7684\u67d0\u4e00\u4e2a\u5143\u7d20\u7684\u7cfb\u6570\u53d6\u4e3a +\\infty , \u63a5\u7740\u6211\u4eec\u5f97\u5230\u65e0\u7a77\u5927\u7684\u659c\u7387\u7684\u903b\u8f91\u65af\u8482\u66f2\u7ebf. \u5728\u8fd9\u79cd\u60c5\u5f62\u4e0b, \u95e8\u7684\u6982\u7387\u53d6 0 \u6216 1 , \u5bf9\u5e94\u5728\u8be5\u8f93\u5165 \u4e0b\u7684\u786c\u5206\u5272.</p> <p>\u5728\u7b2c\u4e8c\u5c42, \u95e8\u63a7\u7f51\u7edc\u6709\u7c7b\u4f3c\u7684\u5f62\u5f0f:</p>  g_{\\ell \\mid j}\\left(x, \\gamma_{j \\ell}\\right)=\\frac{e^{\\gamma_{j \\ell}^{T} x}}{\\sum_{k=1}^{K} e^{\\gamma_{j k}^{T}}}, \\ell=1,2, \\ldots, K  <p>\u8fd9\u662f\u5728\u7ed9\u5b9a\u4e0a\u4e00\u5c42\u7b2c j \u4e2a\u5206\u652f\u7684\u60c5\u51b5\u4e0b, \u8d4b\u4e88\u7b2c \\ell \u5206\u652f\u7684\u6982\u7387.</p> <p>\u5728\u6bcf\u4e2a\u4e13\u5bb6\uff08\u7ec8\u6b62\u7ed3\u70b9\uff09, \u6211\u4eec\u6709\u5982\u4e0b\u5f62\u5f0f\u7684\u54cd\u5e94\u53d8\u91cf\u7684\u6a21\u578b (\u8fd9\u6839\u636e\u95ee\u9898\u800c\u6709\u4e0d\u540c).</p>  Y \\sim \\operatorname{Pr}\\left(y \\mid x, \\theta_{j l}\\right)  <ul> <li>Regression: Gaussian linear regression model P\\left(y \\mid x, \\theta_{j l}\\right)=N\\left(\\beta_{j l}^{\\top} x, \\sigma_{j l}^{2}\\right) where \\theta_{j l}=\\left(\\beta_{j l}, \\sigma_{j l}^{2}\\right)</li> <li>Classification: linear logistic regression model P\\left(Y=1 \\mid x, \\theta_{j l}\\right)=\\frac{1}{1+e^{-\\theta_{j j}^{\\top} x}}</li> </ul>"},{"location":"stat/ASL-note3/#hme","title":"HME","text":"<p>The HME represents a mixture probability model. \u603b\u4f53\u6a21\u578b\u662f\u4e00\u4e2a\u6df7\u5408\u6a21\u578b\uff0c\u5176\u4e2d\u6df7\u5408\u6982\u7387\u7531\u95e8\u63a7\u7f51\u7edc\u6a21\u578b\u786e\u5b9a.</p> <p>The mixture probabilities are determined by the soft splits</p>  P(y \\mid x, \\Psi)=\\sum_{j=1}^{K} g_{j}\\left(x, \\gamma_{j}\\right) \\sum_{l=1}^{K} g_{l \\mid j}\\left(x, \\gamma_{l j}\\right) P\\left(y \\mid x, \\theta_{j l}\\right)  <p>where \\Psi=\\left\\{\\gamma_{j}, \\gamma_{j l}, \\theta_{j l}\\right\\}</p> <p>Estimate \\Psi by maximizing the log-likelihood</p>  \\max _{\\Psi} \\sum_{i=1}^{n} \\log P\\left(y_{i} \\mid X_{i}, \\Psi\\right)  <p>\u91c7\u7528 EM \u7b97\u6cd5\u6c42\u89e3.</p> <p>Introduce the hidden variables \\Delta_{j}^{i} and \\Delta_{l \\mid j}^{i} to indicate the underlying branch decision</p> <ul> <li>E-step: Compute posterior probabilities of \\Delta_{j}^{i} and \\Delta_{/ j j}^{i} given \\Psi^{(t)}</li> <li>M-step: Compute \\Psi^{(t+1)} by maximization of the expected log-likelihood \\Psi^{(t+1)}=E_{\\Delta \\mid X, \\Psi^{(t)}} \\log L(\\Psi \\mid \\Delta, X)</li> </ul>"},{"location":"stat/ASL-note3/#hme-or-cart","title":"HME or CART","text":"<ul> <li>Advantages of HME over CART<ul> <li>Smooth final regression function - soft splits allow for smooth transitions from high to low responses</li> <li>Easier to optimize parameters - the log likelihood is a smooth function and is amendable to numerical optimization</li> </ul> </li> <li>Disadtanges of HME over CART<ul> <li>Tree topology - no good way for HME</li> <li>Hard to interpret the model</li> </ul> </li> </ul>"},{"location":"stat/ASL-note3/#boosting-additive-trees","title":"Boosting &amp; Additive Trees","text":"<p>Boosting \u662f\u6700\u8fd1 20 \u5e74\u5185\u63d0\u51fa\u7684\u6700\u6709\u529b\u7684\u5b66\u4e60\u65b9\u6cd5\uff0e\u6700\u521d\u662f\u4e3a\u4e86\u5206\u7c7b\u95ee\u9898\u800c\u8bbe\u8ba1\u7684\uff0c\u4f46\u662f\u6211\u4eec\u5c06\u5728\u8fd9\u7ae0\u4e2d\u770b\u5230\uff0c\u5b83\u4e5f\u53ef\u4ee5\u5f88\u597d\u5730\u6269\u5c55\u5230\u56de\u5f52\u95ee\u9898\u4e0a\uff0eBoosting\u7684\u52a8\u673a\u662f\u96c6\u5408\u8bb8\u591a\u5f31\u5b66\u4e60\u7684\u7ed3\u679c\u6765\u5f97\u5230\u6709\u7528\u7684\u201ccommittee\u201d\uff0e\u4ece\u8fd9\u70b9\u770b boosting \u4e0e bagging \u4ee5\u53ca\u5176\u4ed6\u7684\u57fa\u4e8e committee \u7684\u65b9\u5f0f\uff088.8 \u8282\uff09\u7c7b\u4f3c\uff0e\u7136\u800c\uff0c\u6211\u4eec\u5e94\u8be5\u770b\u5230\u8fd9\u79cd\u8054\u7cfb\u6700\u591a\u662f\u8868\u9762\u4e0a\u7684\uff0cboosting \u5728\u6839\u672c\u4e0a\u5b58\u5728\u4e0d\u540c\uff0e</p>"},{"location":"stat/ASL-note3/#boosting-methods","title":"Boosting Methods","text":"<p>Overview of Boosting</p> <ul> <li>Boosting is a procedure to combine the output of many weak classifiers to produce a powerful committee</li> <li>A weak classifier is one whose error rate is only slightly better than random guessing</li> <li>Boosting produces a sequence of weak classifier G_{m}(x) for m=1, \\ldots, M whose predictions are then combined</li> </ul>  G(x)=\\operatorname{sgn}\\left(\\sum_{m=1}^{M} \\alpha_{m} G_{m}(x)\\right)  <p>through a weighted majority to produce the final prediction</p> <ul> <li>Each \\alpha_{m}&gt;0 is computed by the boosting algorithm and reflects how accurately G_{m} classified the data.</li> </ul> <p>Most Popular Boosting Algorithm</p> <p>AdaBoost.M1 algorithm of Freund \\&amp; Schapire (1997)</p> <ul> <li>Have training data \\left(x_{i}, y_{i}\\right), i=1,2, \\ldots, n</li> <li>Introduce a weight \\omega_{i}=\\frac{1}{n} for each training example</li> <li>for m=1, \\ldots, M   1. Let G_{m} be the weak classifier with minimum error   $$   e r r_{m}=\\sum_{i=1}^{n} \\omega_{i} I\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)   $$   2. Set \\alpha_{m}=\\log \\frac{1-e r r_{m}}{e r r_{m}}   3. Set   $$   \\omega_{i} \\leftarrow \\omega_{i} e^{\\alpha_{m} I\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)}   $$   This increases (decreases) \\omega_{i} for x_{i} misclassified (correctly classified) by G_{m}   4. Normalize the \\omega_{i} \u2018s so that they sum to 1</li> </ul> <p>What AdaBoost.MI Does</p> <ul> <li>As iterations proceed, observations difficult to classify correctly receive more influence</li> <li>Each successive classifier is forced to concentrate on training observations missed by previous ones in the sequence</li> </ul> <p></p> <p>\u8fd9\u91cc\u7ed9\u51fa\u4e86\u4e00\u4e2a\u5f88\u76f4\u89c2\u7684\u4f8b\u5b50: \u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u89d2\u7ebf\u5206\u5272\u7684\u6570\u636e, \u91c7\u7528\u7684\u57fa/\u5f31\u5206\u7c7b\u5668\u4e3a\u53ea\u80fd\u5728\u5750\u6807\u8f74\u4e0a\u7684\u5212\u5206. \u901a\u8fc7\u8c03\u6574\u6bcf\u4e2a sample \u7684\u6743\u91cd, \u6bcf\u4e00\u8f6e\u8bad\u7ec3\u7684\u5206\u7c7b\u5668\u4f1a\u8d8a\u6765\u8d8a\u5173\u6ce8\u90a3\u4e9b\u5f88\u96be\u88ab\u5212\u5206\u7684\u4f8b\u5b50, \u4f8b\u5982\u5de6\u56fe\u4e2d\u5bf9\u89d2\u7ebf\u4e24\u7aef\u7684 sample. \u8c03\u6574\u6743\u91cd\u540e\u57fa\u4e8e\u65b0\u7684 weight \u8bad\u7ec3\u5f97\u5230\u7684\u5206\u7c7b\u5668\u5982\u5de6\u56fe\u6240\u793a, \u5e76\u8fdb\u4e00\u6b65 reweight \u6837\u672c, \u66f4\u65b0\u603b\u4f53\u7684\u5206\u7c7b\u6a21\u578b G(x).</p> <p>Now we need to\u2026</p> <ul> <li>Show AdaBoost fits an additive model in a base learner, optimizing a novel exponential loss function</li> <li>Show the population minimizer of the exponential loss function is the log-odds of the class probabilities</li> <li>Present loss function that are more robust than squared error or exponential loss</li> <li>Argue decision trees are an ideal base learner for data mining applications of boosting</li> <li>Develop class of gradient boosted methods (GBMs), for boosting trees with any loss function</li> <li>Emphasize the importance of \u201cslow learning\u201d</li> </ul>"},{"location":"stat/ASL-note3/#boosting-fits-an-additive-model","title":"Boosting Fits an Additive Model","text":"<p>Additive Model</p> <p>Boosting fits an additive expansion in a set of elementary basis functions $$ G(x)=\\operatorname{sgn}\\left(\\sum_{m=1}^{M} \\alpha_{m} G_{m}(x)\\right) $$ The basis functions are the weak classifiers G_{m}(x) \\in\\{-1,1\\}</p> <p>More generally, basis functions expansions take the form $$ f(x)=\\sum_{m=1}^{M} \\beta_{m} b\\left(x ; \\gamma_{m}\\right) $$ where \\beta_{m} \u2018s are the expansion coefficients and b(x ; \\gamma) \\in \\mathbb{R} are simple functions of the input x parameterized by \\gamma</p> <p>Examples of Additive Models</p> <ul> <li>Single-hidden-layer neural networks \u5355\u5c42\u795e\u7ecf\u7f51\u7edc\u4e2d\uff08\u7b2c 11 \u7ae0\uff09, where $$ b(x ; \\gamma)=\\frac{1}{1+\\exp \\left(-\\gamma_{0}-\\gamma_{1}^{\\top} x\\right)} $$</li> <li>Multivariate adaptive regression splines (MARS) \u591a\u5143\u81ea\u9002\u5e94\u56de\u5f52\u6837\u6761\uff089.4 \u8282\uff09: use trucated-power spline basis functions where \\gamma parameterizes the variables and values for the knots</li> <li>Trees: \\gamma parameterizes the split variables and split points at the internal nodes, and the predictions at the terminal nodes</li> </ul>"},{"location":"stat/ASL-note3/#fitting-additive-models","title":"Fitting Additive Models","text":"<p>\u5411\u524d\u9010\u6b65\u52a0\u6cd5\u5efa\u6a21</p> <p>Typically fit models by minimizing a loss function averaged over the training data $$ \\min {\\beta\\right)\\right) $$ For many loss functions }, \\gamma_{1}, \\ldots, \\beta_{M}, \\gamma_{M}} \\sum_{i=1}^{n} L\\left(y_{i}, \\sum_{m=1}^{M} \\beta_{m} b\\left(x_{i}, \\gamma_{mL(x, f(X)), basis functions b(x ; \\gamma) is hard to decide</p> <p>Forward Stagewise Additive Modeling</p> <p>Greedily add one basis function at a time in the following fashion</p> <ul> <li>Set f_{0}(x)=0</li> <li>for m=1, \\ldots, M   1. Compute   $$   \\left(\\hat{\\beta}{m}, \\hat{\\gamma}}\\right)=\\operatorname{argmin{\\beta\\right)\\right)   $$   2. Set   $$   f_{m}(x)=f_{m-1}(x)+\\hat{\\beta}}, \\gamma_{m}} \\sum_{n=1}^{n} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+\\beta_{m} b\\left(x_{i} ; \\gamma_{m{m} b\\left(x ; \\hat{\\gamma}\\right)   $$</li> <li>Note: Previously added terms are not modified</li> </ul>"},{"location":"stat/ASL-note3/#exponential-loss-adaboost","title":"Exponential Loss &amp; AdaBoost","text":"<p>Forward Stagewise Additive Modeling \\&amp; Boosting \u73b0\u5728\u8bc1\u660e AdaBoost.M1 \u7b97\u6cd5\uff08\u7b97\u6cd5 10.1\uff09\u7b49\u4ef7\u4e8e\u4f7f\u7528\u4e0b\u5217\u635f\u5931\u51fd\u6570\u7684\u5411\u524d\u9010\u6b65\u52a0\u6cd5\u5efa\u6a21 (\u8fd9\u91cc\u4e8c\u5206\u7c7b\u6807\u7b7e\u4e3a \\{1, -1\\})</p>  L(y, f(x)) = \\exp(-yf(x))  <p>At each iteration of forward stagewise additive modeling, must solve this optimization problem</p>  \\begin{aligned} \\left(\\beta_{m}, G_{m}\\right) &amp;=\\operatorname{argmin}_{\\beta, G} \\sum_{i=1}^{n} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+\\beta G\\left(x_{i}\\right)\\right) \\\\ &amp;=\\operatorname{argmin}_{\\beta, G} \\sum_{i=1}^{n} \\exp \\left\\{-y_{i}\\left(f_{m-1}\\left(x_{i}\\right)+\\beta G\\left(x_{i}\\right)\\right)\\right\\} \\end{aligned}  <p>where we assume an exponential loss for L and G(x) \\in\\{-1,1\\}</p> <p>Re-write: The optimization problem becomes</p>  \\begin{aligned} &amp;\\min _{\\beta, G} \\sum_{i=1}^{n} \\omega_{i}^{(m)} \\exp \\left\\{-y_{i} \\beta G\\left(x_{i}\\right)\\right\\} \\\\ &amp;=\\min_{\\beta}\\left(\\min _{G} \\sum_{i=1}^{n} \\omega_{i}^{(m)} \\exp \\left\\{-y_{i} \\beta G\\left(x_{i}\\right)\\right\\}\\right) \\end{aligned}  <p>Note</p>  y_{i} G\\left(x_{i}\\right)= \\begin{cases}1 &amp; \\text { if } y_{i}=G\\left(x_{i}\\right) \\\\ -1 &amp; \\text { if } y_{1} \\neq G\\left(x_{i}\\right)\\end{cases}  <p>This implies \\exp \\left\\{-y_{i} \\beta G\\left(x_{i}\\right)\\right\\} is equal to</p>  e^{\\beta} I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right)+e^{-\\beta}\\left(1-I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right)\\right)  <p>\u5148\u6765\u770b\u5206\u7c7b\u5668\u7684\u4f18\u5316 Optimization for G_{m}</p> <p>The optimization problem becomes</p>  \\begin{aligned} &amp; \\operatorname{argmin}_{G} \\sum_{i=1}^{n} \\omega_{i}^{(m)} \\exp \\left\\{-y_{i} \\beta G\\left(x_{i}\\right)\\right\\} \\\\ =&amp; \\operatorname{argmin}_{G}\\left(\\left(e^{\\beta}-e^{-\\beta}\\right) \\sum_{i=1}^{n} \\omega_{i}^{(m)} I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right)+e^{-\\beta} \\sum_{i=1}^{n} \\omega_{i}^{(m)}\\right) \\\\ =&amp; \\operatorname{argmin}_{G}\\left(\\sum_{i=1}^{n} \\omega_{i}^{(m)} I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right)\\right) \\end{aligned}  <p>Therefore</p>  G_{m}=\\operatorname{argmin}_{G}\\left(\\sum_{i=1}^{n} \\omega_{i}^{(m)} I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right)\\right)  <p>G_{m} minimizes the weighted error in the AdaBoost algorithm (given \\omega_{i}^{(m)} \u2018s have the same definition)</p> <p>\u518d\u6765\u770b\u6743\u91cd Optimization for \\beta_{m} Plug G_{m} into the original optimization problem</p>  \\min _{\\beta}\\left(\\min_{G} \\sum_{i=1}^{n} \\omega_{i}^{(m)} \\exp \\left\\{-y_{i} \\beta G\\left(x_{i}\\right)\\right\\}\\right)  <p>and using the previous result, it becomes</p>  \\operatorname{argmin}_{\\beta}\\left(\\left(e^{\\beta}-e^{-\\beta}\\right) \\sum_{i=1}^{n} \\omega_{i}^{(m)} I\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)+e^{-\\beta} \\sum_{i=1}^{n} \\omega_{i}^{(m)}\\right)  <p>This quantity is minimized when (\u6c42\u5bfc\u5373\u53ef)</p>  \\beta_{m}=\\frac{1}{2} \\log \\frac{1-e r r_{m}}{e r r_{m}}  <p>where</p>  e r r_{m}=\\frac{\\sum_{i=1}^{n} \\omega_{i}^{(m)} I\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)}{\\sum_{i=1}^{n} \\omega_{i}^{(m)}}"},{"location":"stat/ASL-note3/#_2","title":"\u7b49\u4ef7\u6027","text":"<p>\u6ce8\u610f Update of \\omega_{i}^{(m)}</p> <p>Need the following result</p>  \\begin{aligned} -y_{i} G_{m}\\left(x_{i}\\right) &amp;=-I\\left(y_{i}=G\\left(x_{i}\\right)\\right)+I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right) \\\\ &amp;=-\\left(1-I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right)\\right)+I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right) \\\\ &amp;=-1+2 I\\left(y_{i} \\neq G\\left(x_{i}\\right)\\right) \\end{aligned}  <p>The updated weights can then be written as</p>  \\begin{aligned} \\omega_{i}^{(m+1)}=e^{-y_{i} f_{m}\\left(x_{i}\\right)} &amp;=e^{-y_{i}\\left(f_{m-1}\\left(x_{i}\\right)+\\beta_{m} G_{m}\\left(x_{i}\\right)\\right.} \\\\ &amp;=\\omega_{i}^{(m)} e^{-y_{i} \\beta_{m} G_{m}\\left(x_{i}\\right)} \\\\ &amp;=\\omega_{i}^{(m)} e^{2 \\beta_{m} I\\left(y_{i} \\neq G m\\left(x_{i}\\right)\\right)} e^{-\\beta_{m}} \\end{aligned}  <p>\u6bd4\u8f83 Adaboost \u548c minimizing exponential loss in the additive model \u7684\u66f4\u65b0\u516c\u5f0f:</p> <ol> <li>\u6a21\u578b\u6743\u91cd</li> </ol> <p>Remember from the AdaBoost algorithm,</p>  \\alpha_{m}=\\log \\frac{1-e r r_{m}}{e r r_{m}}  <p>where e r r_{m}=\\sum_{i=1}^{n} \\omega_{i} I\\left(y_{i} \\neq G_m\\left(x_{i}\\right)\\right) From minimizing exponential loss in the additive model</p>  \\beta_{m}=\\frac{1}{2} \\log \\frac{1-e r r_{m}}{e r r_{m}}  <p>where e r r_{m}=\\frac{\\sum_{i=1}^{n} \\omega_{i}^{(m)}\\left(\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)\\right.}{\\sum_{i=1}^{n} \\omega_{i}^{(m)}}</p> <p>\u8fd9\u91cc\u5f62\u5f0f\u4e0a\u597d\u50cf\u5dee\u4e86\u7cfb\u6570 1/2, \u5b9e\u9645\u4e0a\u5982\u679c\u6240\u6709\u57fa\u6a21\u578b\u7684\u6743\u91cd\u90fd\u7f29\u5c0f\u4e00\u4e2a\u5e38\u6570\u662f\u4e00\u6837\u7684. (\u4e8b\u5b9e\u4e0a, \u674e\u822a\u4e66\u4e2d\u7684 Adaboost \u6a21\u578b\u7cfb\u6570\u662f\u5e26 1/2 \u7684.)</p> <ol> <li>\u6837\u672c\u6743\u91cd</li> </ol> <p>Remember from the AdaBoost algorithm,</p>  \\omega_{i} \\leftarrow \\omega_{i} e^{\\alpha_{m} I\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)}  <p>where \\alpha_{m}=\\log \\frac{1-e r r_{m}}{e r r_{m}} From minimizing exponential loss in the additive model</p>  \\omega_{i}^{(m+1)}=\\omega_{i}^{(m)} e^{2 \\beta I\\left(y_{i} \\neq G_{m}\\left(x_{i}\\right)\\right)} e^{\\left(-\\beta_{m}\\right)}  <p>where \\beta_{m}=\\frac{1}{2} \\log \\frac{1-e r r_{m}}{e r r_{m}} Note: e^{-\\beta_{m}} is the same for all observations</p> <p>\u603b\u7ed3\u4e00\u4e0b: We can view the AdaBoost.M1 algorithm as a method that approximates minimizing</p>  \\operatorname{argmin}_{\\beta_{1}, G_{1}, \\ldots, \\beta_{M}, G_{M}} \\sum_{i=1}^{n} \\exp \\left(-y_{i} \\sum_{m=1}^{M} \\beta_{m} G_{m}\\left(x_{i}\\right)\\right)  <p>via a forward stagewise additive modeling approach</p> <p>from HERE</p> <p></p>"},{"location":"stat/ASL-note3/#loss-functions-robustness","title":"Loss Functions &amp; Robustness","text":"<p>\u8fd9\u4e00\u8282\u6211\u4eec\u8fdb\u4e00\u6b65\u8ba8\u8bba\u5206\u7c7b\u548c\u56de\u5f52\u4e2d\u4e0d\u540c\u7684\u635f\u5931\u51fd\u6570\uff0c\u5e76\u4e14\u7528\u5b83\u4eec\u5bf9\u6781\u7aef\u6570\u636e\u7684\u9c81\u68d2\u6027\u6765\u63cf\u8ff0\uff0e</p>"},{"location":"stat/ASL-note3/#loss-functions-for-classification","title":"Loss Functions for Classification","text":"<ul> <li>Exponential loss</li> </ul>  L(y, f(x))=\\exp \\{-y f(X)\\}  <ul> <li>Binomial deviance loss \u4e8c\u9879\u504f\u5dee</li> </ul>  -L(y, f(x))=\\log (1+\\exp \\{-2 y f(x)\\})  <p>where p(x)=P(Y=1 \\mid x)=\\frac{1}{1+\\exp \\{-2 f(x)\\}} - Misclassification loss</p>  L(y, f(x))=I(y f(x)&lt;0)  <p>The Margin</p> <ul> <li>These loss functions are functions of the \u201cmargin\u201d \u95f4\u9694: y f(X)</li> <li>Classification rule G(x)=\\operatorname{sign}\\{f(X)\\} \\rightarrow training examples with</li> <li>positive margin y_{i} f\\left(x_{i}\\right)&gt;0 are correctly classified</li> <li>negative margin y_{i} f\\left(x_{i}\\right)&lt;0 are misclassified</li> <li>Decision boundary defined by f(x)=0</li> <li>Classification algorithms attempt to produce positive margins for each training data point</li> <li>Loss criterion for classification should penalize negative margins more heavily than positive margins</li> </ul> <p>\u5c3d\u7ba1\u6307\u6570\u635f\u5931 (10.8) \u548c\u4e8c\u9879\u504f\u5dee (10.18) \u5f53\u5e94\u7528\u5230\u603b\u4f53\u7684\u8054\u5408\u5206\u5e03\u65f6\u4f1a\u5f97\u5230\u540c\u6837\u7684\u89e3, \u4f46\u5bf9\u4e8e\u6709 \u9650\u7684\u6570\u636e\u96c6\u5e76\u4e0d\u4e00\u6837. \u4e24\u4e2a\u51c6\u5219\u90fd\u662f \u95f4\u9694 (margin) y f(x) \u7684\u5355\u8c03\u9012\u51cf\u51fd\u6570. \u5728\u5206\u7c7b\u95ee\u9898\u4e2d (\u54cd\u5e94 \u53d8\u91cf\u4e3a -1 / 1), y f(x) \u7c7b\u4f3c\u56de\u5f52\u4e2d\u7684\u6b8b\u5dee y-f(x). \u5206\u7c7b\u51c6\u5219 G(x)=\\operatorname{sign}[f(x)] \u8868\u660e\u6709\u6b63\u95f4\u9694 y_{i} f\\left(x_{i}\\right)&gt;0 \u7684\u89c2\u6d4b\u88ab\u5206\u7c7b\u6b63\u786e, \u800c\u6709\u8d1f\u95f4\u9694 y_{i} f\\left(x_{i}\\right)&lt;0 \u7684\u89c2\u6d4b\u88ab\u9519\u8bef\u5206\u7c7b. \u5224\u522b\u8fb9\u754c\u5b9a\u4e49\u4e3a f(x)=0. \u5206\u7c7b\u7b97\u6cd5\u7684\u76ee\u6807\u662f\u5f97\u5230\u5c3d\u53ef\u80fd\u9891\u7e41\u7684\u6b63\u95f4\u9694. \u4efb\u4f55\u7528\u4e8e\u5206\u7c7b\u7684\u635f\u5931\u6807\u51c6\u5e94\u8be5\u60e9\u7f5a\u8d1f\u95f4\u9694 \u6bd4\u6b63\u95f4\u9694\u66f4\u91cd, \u56e0\u4e3a\u6b63\u95f4\u9694\u7684\u89c2\u6d4b\u503c\u5df2\u7ecf\u88ab\u6b63\u786e\u5206\u7c7b.</p> <p>\u56fe 10.4 \u5c55\u793a\u4e86\u6307\u6570 (10.8) \u548c\u4e8c\u9879\u504f\u5dee\u7684\u6807\u51c6\u4f5c\u4e3a\u95f4\u9694 y \\cdot f(x) \u7684\u51fd\u6570\u7684\u56fe\u8c61. \u4e5f\u663e\u793a\u4e86\u8bef\u5206\u7c7b\u635f \u5931 L(y, f(x))=I(y \\cdot f(x)&lt;0), \u5b83\u7ed9\u51fa\u4e86\u4eec\u95f4\u9694\u7684\u5355\u4f4d\u60e9\u7f5a, \u800c\u5bf9\u6240\u6709\u7684\u6b63\u503c\u6ca1\u6709\u60e9\u7f5a. \u6307\u6570\u635f \u5931\u548c\u4e8c\u9879\u504f\u5dee\u90fd\u53ef\u4ee5\u770b\u6210\u662f\u8bef\u5206\u7c7b\u635f\u5931\u7684\u5355\u8c03\u8fde\u7eed\u8fd1\u4f3c. \u5b83\u4eec\u4e0d\u65ad\u5730\u60e9\u7f5a\u8d8a\u6765\u8d8a\u5927\u7684\u8d1f\u8fb9\u9645\u503c, \u8859 \u7f5a\u529b\u5ea6\u6bd4\u5b83\u4eec\u56de\u62a5\u8d8a\u6765\u8d8a\u5927\u7684\u6b63\u8fb9\u9645\u503c\u66f4\u91cd. \u5b83\u4eec\u7684\u533a\u522b\u5728\u4e8e\u7a0b\u5ea6\u4e0a. \u4e8c\u9879\u504f\u5dee\u7684\u5fe2\u7f5a\u5bf9\u4e8e\u5927\u7684\u589e \u52a0\u7684\u8d1f\u95f4\u9694\u7ebf\u6027\u589e\u957f, \u800c\u6307\u6570\u6807\u51c6\u5bf9\u8fd9\u6837\u89c2\u6d4b\u7684\u5f71\u54cd\u6307\u6570\u589e\u957f.</p> <p>\u5728\u8bad\u7ec3\u8fc7\u7a0b\u7684\u4efb\u4e00\u4e2a\u65f6\u523b\uff0c\u6307\u6570\u6807\u51c6\u5bf9\u5177\u6709\u5927\u7684\u8d1f\u8fb9\u9645\u7684\u89c2\u6d4b\u503c\u4e0a\u6709\u66f4\u5927\u7684\u5f71\u54cd\uff0e\u4e8c\u9879\u504f\u5dee\u76f8\u5bf9\u5730\u5728\u8fd9\u4e9b\u89c2\u6d4b\u4e0a\u5f71\u54cd\u8f83\u5c0f\uff0c\u5728\u6240\u6709\u6570\u636e\u4e0a\u7684\u5f71\u54cd\u5206\u6563\u66f4\u5747\u5300\uff0e\u4e5f\u56e0\u6b64\u5728\u767d\u566a\u58f0\u8bbe\u5b9a\uff08\u8d1d\u53f6\u65af\u8bef\u5dee\u7387\u4e0d\u63a5\u8fd1\u4e8e0\uff09\u4e2d\u66f4\u52a0\u9c81\u68d2\uff0c\u7279\u522b\u5728\u8bad\u7ec3\u6570\u636e\u4e2d\u5b58\u5728\u8bef\u5206\u7c7b\u6807\u7b7e\u7684\u60c5\u5f62\u4e2d\uff0e\u5728\u8fd9\u4e9b\u60c5\u5f62\u4e0b\uff0cAdaBoost \u7684\u8868\u73b0\u4ece\u7ecf\u9a8c\u4e0a\u770b\u663e\u8457\u9000\u5316\uff0e[\u4e5f\u5373\u6307\u6570\u635f\u5931\u7a33\u5b9a\u6027\u8f83\u5dee]</p> <p></p> <p>\u603b\u7ed3\u4e00\u4e0b \u6307\u6570\u635f\u5931\u548c\u4e8c\u9879\u504f\u5dee</p> <ul> <li>Exponential and deviance loss continuous approx to misclassification loss</li> <li>They increasingly penalize negative margin values more heavily than they reward positive ones</li> <li>Binomial deviance penalty increases linearly with negative margins</li> <li>Exponential loss penalty increases exponentially with negative margin</li> <li>Exponential criterion concentrates more of its efforts on large negative margin observations than the binomial criterion</li> <li>Binomial criterion is far more robust than the exponential criterion in noisy settings</li> </ul>"},{"location":"stat/ASL-note3/#robust-loss-functions-for-regression","title":"Robust Loss Functions for Regression","text":"<ul> <li>Squared error loss</li> </ul>  L(y, f(x))=(y-f(x))^{2}  <p>population optimum for this loss function: f(X)=E[Y \\mid x] - Absolute loss</p>  L(y, f(x))=|y-f(x)|  <p>population optimum for this loss function: f(x)=\\operatorname{median}(Y \\mid x) \u4e2d\u4f4d\u6570</p> <p>\u4e24\u8005\u7684\u5173\u7cfb\u7c7b\u4f3c\u4e0a\u9762\u5206\u7c7b\u635f\u5931\u7684\u6bd4\u8f83</p> <ul> <li>On finite samples, squared error loss puts far more emphasis on observations with large | y_{i}-f\\left(x_{i}\\right) | than absolute loss</li> <li>Thus squared error loss is less robust and performance degrades for long-tail error distributions and mis-labellings.</li> </ul> <p>Huber loss</p>  L(y, f(x))= \\begin{cases}(y-f(x))^{2} &amp; \\text { for }|y-f(x)| \\leqslant \\delta \\\\ 2 \\delta|y-f(X)|-\\delta^{2} &amp; \\text { otherwise }\\end{cases}  <ul> <li>strong resistance to gross outliers while</li> <li>being nearly as efficient as least squares for Gaussian errors</li> </ul> <p>Combine the good properties of squared-error near zero and absolute error loss when |y-f| is large</p> <p></p>"},{"location":"stat/ASL-note3/#summary","title":"Summary","text":"<ul> <li>When robustness is an issue, 1. squared error loss for regression; 2. exponential loss for classification are not the best criterion to be optimizing</li> <li>But both loss functions lead to elegant modular boosting algorithms in the context of forward stagewise additive modeling</li> <li>For classification: perform a weighted fit of the base learner to the outputs y_{i} with weights \\omega_{i}=\\exp \\left\\{ - y_{i} f\\left(x_{i}\\right)\\right\\}</li> <li>For regression: with squared-error loss one simply fits the base learner to the residuals from the current model y_i\u2212 f_{m\u22121}(x_i) at each step</li> <li>More robust criteria in their place do not give rise to such simple feasible boosting algorithms</li> </ul>"},{"location":"stat/ASL-note3/#off-the-shelf-procedure-for-data-mining","title":"\u201dOff-the-Shelf\u201d Procedure for Data Mining","text":"<p>\u6570\u636e\u6316\u6398\u7684 \u201c\u73b0\u8d27\u201d(off-the-shelf) \u65b9\u6cd5\uff0e\u73b0\u8d27\u65b9\u6cd5\u6307\u7684\u662f\u53ef\u4ee5\u76f4\u63a5\u5e94\u7528\u5230\u6570\u636e\u4e2d\u800c\u4e0d\u9700\u8981\u5927\u91cf\u65f6\u95f4\u8fdb\u884c\u6570\u636e\u9884\u5904\u7406\u6216\u8005\u5b66\u4e60\u8fc7\u7a0b\u7684\u7cbe\u5fc3\u8c03\u53c2\uff0e</p> <p>Trees are great except\u2026</p> <ul> <li>they are inaccurate at making predictions</li> </ul> <p>Boosting decision trees improve their accuracy at the cost of</p> <ul> <li>speed</li> <li>interpretability</li> <li>for AdaBoost, robustness against overlapping class distributions and especially mislabelling of the training data</li> </ul> <p>A gradient boosted model is a generalization of tree boosting that attempts to mitigate these problems</p> <p>It aims to produce an accurate and effective off-the-shelf procedure for data mining</p>"},{"location":"stat/ASL-note3/#boosting-trees","title":"Boosting Trees","text":"<p>Regression Tree Recap</p> <ul> <li>Tree partitions the input space into R_{j}, j=1, \\ldots, J</li> <li>Terminal / Leaf nodes of tree represent the region R_{j}</li> <li>The predictive rule is</li> </ul>  x \\in R_{j} \\rightarrow f(X)=\\gamma_{j}  <ul> <li>A tree with parameters \\theta=\\left\\{R_{j}, \\gamma_{j}\\right\\}_{j=1}^{J} is expressed as</li> </ul>  T(x ; \\theta)=\\sum_{j=1}^{J} \\gamma_{j} I\\left(x \\in R_{j}\\right)  <p>with J usually treated as a meta-parameter</p> <p>Learning a Regression Tree</p> <p>Ideally parameters found by minimizing the empirical risk</p>  \\hat{\\theta}=\\operatorname{argmin}_{\\theta} \\sum_{j=1}^{J} \\sum_{x \\in R_{j}} L\\left(y_{i}, \\gamma_{i}\\right)  <p>Hard optimization problem, instead settle for approximate suboptimal solutions</p> <p>Typical approach: Divide optimization into two parts</p> <ul> <li>find \\gamma_{j} given R_{j} : typically trivial - mean of the training y \u2018s falling in R_{j}</li> <li>find R_{j} : difficult - greedy, top-down recursive partitioning algorithm to approximate</li> </ul>"},{"location":"stat/ASL-note3/#the-boosted-tree-model","title":"The Boosted Tree Model","text":"<p>A boosted tree is a sum of regression / classification trees</p>  f_{M}(x)=\\sum_{m=1}^{M} T\\left(x ; \\theta_{m}\\right)  <p>learned in a forward stagewise manner</p> <p>At each step solve</p>  \\hat{\\theta}_{m}=\\operatorname{argmin}_{\\theta_{m}} \\sum_{i=1}^{N} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+T\\left(x_{i} ; \\theta_{m}\\right)\\right)  <p>for the parameters \\theta_{m}=\\left\\{R_{j m}, \\gamma_{j m}\\right\\}_{j=1}^{J_{m}} of the next tree</p> <p>How to solve this optimization problem?</p> <p>\u4e5f\u662f\u5728\u52a0\u6027\u6a21\u578b\u7684\u6846\u67b6\u4e4b\u4e0b\u8fdb\u884c\u95ee\u9898\u6c42\u89e3. \u4e0a\u8ff0\u95ee\u9898\u53ef\u5206\u4e3a\u4e24\u90e8\u5206:</p> <p>Find \\gamma_{j m} given R_{j m} - easy</p>  \\hat{\\gamma}_{j m}=\\operatorname{argmin}_{\\gamma_{j m}} \\sum_{x_{i} \\in R_{j m}} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+\\gamma_{j m}\\right)  <p>Find R_{j m} - not so easy</p> <p>A few exceptions</p> <ul> <li>Squared error loss - at each stage, fit a regression tree to residual y_{i}-f_{m-1}\\left(x_{i}\\right)</li> <li>Two class classification and exponential loss - give rise to an Adaboost method for boosting classification trees</li> </ul>"},{"location":"stat/ASL-note3/#gradient-boosting","title":"Gradient Boosting","text":"<p>see here</p> <ul> <li>\u63d0\u5347\u6811\u5229\u7528\u52a0\u6cd5\u6a21\u578b\u4e0e\u524d\u5411\u5206\u6b65\u7b97\u6cd5\u5b9e\u73b0\u5b66\u4e60\u7684\u4f18\u5316\u8fc7\u7a0b\u3002\u5f53\u635f\u5931\u51fd\u6570\u662f\u5e73\u65b9\u635f\u5931\u548c\u6307\u6570\u635f\u5931\u51fd\u6570\u65f6\uff0c\u6bcf\u4e00\u6b65\u4f18\u5316\u662f\u5f88\u7b80\u5355\u7684\u3002</li> <li>\u4f46\u662f\uff0c\u5bf9\u4e00\u822c\u635f\u5931\u51fd\u6570\u800c\u8a00\uff0c\u6bcf\u4e00\u6b65\u4f18\u5316\u5f80\u5f80\u6bd4\u8f83\u56f0\u96be\u3002</li> <li>\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u68af\u5ea6\u63d0\u5347\u7b97\u6cd5\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</li> </ul>"},{"location":"stat/ASL-note3/#numerical-optimization","title":"Numerical Optimization","text":"<p>If the loss L is differentiable</p>  \\hat{\\theta}_{m}=\\operatorname{argmin}_{\\theta_{m}} \\sum_{i=1}^{N} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+T\\left(x_{i} ; \\theta_{m}\\right)\\right)  <p>can be approximately solved with numerical optimization</p> <p>Ex, the loss associated with using any f(x) to predict y is</p>  L(f)=\\sum_{i=1}^{N} L\\left(y_{i}, f\\left(x_{i}\\right)\\right)  <p>\u8fd9\u91cc\u7684 f \u8981\u6c42\u662f\u6811\u7684\u548c. \u5982\u679c\u5ffd\u7565\u8fd9\u4e2a\u9650\u5b9a, \u53ef\u76f4\u63a5\u770b\u6210\u662f\u4e00\u4e2a\u4f18\u5316\u95ee\u9898. Goal: find f which minimizes L(f)</p>  \\hat{f}=\\operatorname{argmin}_{f} L(f)  <p>where f=\\left\\{f\\left(x_{1}\\right), \\ldots, f\\left(x_{N}\\right)\\right\\} \u662f\u5728 N \u4e2a\u6570\u636e\u70b9 x_i \u7684\u8fd1\u4f3c\u7684\u51fd\u6570\u503c f(x_i).</p> <p>\u8003\u8651\u8981\u6c42\u662f\u6811\u7684\u548c\u7684\u9650\u5b9a, \u8fd9\u91cc\u6570\u503c\u4f18\u5316\u7684\u8fc7\u7a0b, \u8981\u6c42\u7528\u4e00\u7ec4\u5411\u91cf\u7684\u548c\u6765\u6c42\u89e3.</p> <p>Numerical optimization approximates</p>  \\hat{f}=\\operatorname{argmin}_{f} L(f)  <p>as a sum of vectors</p>  f_{M}=\\sum_{m=0}^{M} h_{m}, h_{m} \\in \\mathbb{R}^{N}  <p>where f_{0}=h_{0} is an initial guess and each f_{m} is estimated from f_{m-1}</p>"},{"location":"stat/ASL-note3/#steepest-descent","title":"Steepest Descent","text":"h_{m}=-\\rho_{m} g_{m}  <ul> <li>\\rho_{m} is a scalar</li> <li>g_{m} \\in \\mathbb{R}^{N} is the gradient of L(f) evaluated at f=f_{m-1}</li> </ul> <p>Components of g_{m} are</p>  g_{i m}=\\left.\\frac{\\partial L\\left(y_{i}, f\\left(x_{i}\\right)\\right)}{\\partial f\\left(x_{i}\\right)}\\right|_{f\\left(x_{i}\\right)=f_{i}, m-1}  <p>Step length is the solution to</p>  \\rho_{m}=\\operatorname{argmin}_{\\rho} L\\left(f_{m-1}-\\rho g_{m}\\right)  <p>Solution is updated: f_{m}=f_{m-1}-\\rho_{m} g_{m}</p>"},{"location":"stat/ASL-note3/#gradient-tree-boosting","title":"Gradient Tree Boosting","text":"<p>$$ \\hat{\\theta}{m}=\\operatorname{argmin}\\right)\\right) $$ Comparison between Gradient Boosting \\&amp; Forward Stagewise Tree boosting}} \\sum_{i=1}^{N} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+T\\left(x_{i} ; \\theta_{m</p> <ul> <li>Tree predictions T\\left(x_{i} ; \\theta_{m}\\right) are analogous to the negative gradients -g_{1 m}, \\ldots,-g_{N m}, but t_{m}=\\left\\{T\\left(x_{1} ; \\theta_{m}\\right), \\ldots, T\\left(x_{N}, \\theta_{m}\\right)\\right\\} are constrained to be predictions of a J_{m} terminal node decision tree, whereas -g_{m} is the unconstrained maximal descent direction</li> <li>Also, \\rho_{m}=\\operatorname{argmin}_{\\rho} L\\left(f_{m-1}, \\rho g_{m}\\right) is analogous to \\hat{\\gamma}_{j m}=\\operatorname{argmin}_{\\gamma_{j m}} \\sum_{x_{i} \\in R_{j m}} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+\\gamma_{j m}\\right), but perform a line search for each terminal node</li> </ul> <p>\u68af\u5ea6\u63d0\u5347\u548c\u68af\u5ea6\u4e0b\u964d\u7684\u533a\u522b\u4e0e\u8054\u7cfb\u662f\u4ec0\u4e48\uff1f\u5176\u5b9e\u4e24\u8005\u90fd\u662f\u5728\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\uff0c\u5229\u7528\u635f\u5931\u51fd\u6570\u76f8\u5bf9\u4e8e\u6a21\u578b\u7684\u8d1f\u68af\u5ea6\u65b9\u5411\u6765\u5bf9\u5f53\u524d\u6a21\u578b\u8fdb\u884c\u66f4\u65b0\uff0c\u53ea\u4e0d\u8fc7\u5728\u68af\u5ea6\u4e0b\u964d\u4e2d\uff0c\u6a21\u578b\u662f\u4ee5\u53c2\u6570\u5316\u8868\u793a\uff0c\u56e0\u6b64\u6a21\u578b\u7684\u66f4\u65b0\u7b49\u4ef7\u4e8e\u53c2\u6570\u7684\u66f4\u65b0\u3002\u800c\u5728\u68af\u5ea6\u63d0\u5347\u4e2d\uff0c\u6a21\u578b\u5e76\u4e0d\u9700\u8981\u8fdb\u884c\u53c2\u6570\u5316\u8868\u793a\uff0c\u800c\u662f\u76f4\u63a5\u5b9a\u4e49\u5728\u51fd\u6570\u7a7a\u95f4\u4e2d\u3002</p> <p>If the only goal is to minimize</p> <p>$$ \\hat{f}=\\operatorname{argmin}_{f} L(f) $$ then perform steepest descent</p> <ul> <li>However, the ultimate goal is to generalize f_{M}(x) to new unseen data</li> <li>A possible solution is Gradient Tree Boosting</li> </ul> <p>Fit a tree T\\left(x ; \\theta_{m}\\right) at m_{t h} iteration whose predictions t_{m} are as close as possible to the negative gradient</p>  \\tilde{\\theta}_{m}=\\operatorname{argmin}_{\\theta_{m}} \\sum_{i=1}^{N}\\left(-g_{i m}-T\\left(x_{i} ; \\theta_{m}\\right)\\right)^{2}  <p>For the solution region \\tilde{R}_{j m}, set</p>  \\hat{\\gamma}_{j m}=\\operatorname{argmin}_{\\gamma_{j m}} \\sum_{x_{i} \\in \\tilde{R}_{j m}} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+\\gamma_{j m}\\right)  <p>The regions \\tilde{R}_{j m} would not be identical to R_{j m} that solve the original optimization problem, but they should be similar enough.</p>"},{"location":"stat/ASL-note3/#gradient-tree-boosting-algorithm","title":"Gradient Tree Boosting Algorithm","text":"<ol> <li>Initialize f_{0}(x)=\\operatorname{argmin}_{\\gamma} \\sum_{i=1}^{N} L\\left(y_{i}, \\gamma\\right)</li> <li>For m=1 to M :    - For i=1,2, \\ldots, N compute r_{i m}=-\\left.\\left[\\frac{\\partial\\left(L\\left(y_{i}, f\\left(x_{i}\\right)\\right)\\right)}{\\partial f\\left(x_{i}\\right)}\\right]\\right|_{f=f_{m-1}}    - Fit a regression tree to the targets r_{i m} giving terminal regions R_{j m}, j=1,2, \\ldots, J_{m}    - For j=1,2, \\ldots, J_{m} compute \\gamma_{j m}=\\operatorname{argmin}_{\\gamma} \\sum_{x_{i} \\in R_{j m}} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+\\gamma\\right)    - Update f_{m}(X)=f_{m-1}(x)+\\sum_{j=1}^{J_{m}} \\gamma_{j m} I\\left(x \\in R_{j m}\\right)</li> <li>Output \\hat{f}(x)=f_{M}(x)</li> </ol>"},{"location":"stat/ASL-note3/#boosting-tree-size","title":"Boosting Tree Size","text":"<p>Size of a Boosted Tree</p> <p>Learning a large pruned tree at each round performs poorly</p> <p>Better if</p> <ul> <li>Restrict all trees to be same size J_{m}=J \\forall m</li> <li>Perform cross-validation to choose an optimal J</li> </ul> <p>\u53ef\u4ee5\u8003\u8651\u4e0b\u5f0f\u7684 \u76ee\u6807\u51fd\u6570(target function) \u7684\u6027\u8d28\u6765\u5f97\u5230 J \u7684\u6709\u7528\u503c</p>  \\eta=\\arg \\min _{f} \\mathrm{E}_{X Y} L(Y, f(X))  <p>\u8fd9\u91cc\u671f\u671b\u503c\u662f\u5bf9 (X, Y) \u7684\u603b\u4f53\u8054\u5408\u5206\u5e03\u800c\u8a00. \u76ee\u6807\u51fd\u6570 \\eta(x) \u662f\u5728\u672b\u6765\u6570\u636e\u4e0a\u6709\u6700\u5c0f\u9884\u6d4b\u98ce\u9669\u7684 \u51fd\u6570. \u8fd9\u662f\u6211\u4eec\u8bd5\u56fe\u8fd1\u4f3c\u7684\u51fd\u6570.</p> <p>\\eta(X) \u4e00\u4e2a\u76f8\u5173\u7684\u6027\u8d28\u662f\u5750\u6807\u53d8\u91cf X^{T}=\\left(X_{1}, X_{2}, \\ldots, X_{p}\\right) \u95f4\u4ea4\u53c9\u9879\u7684\u9636. \u8fd9\u4e2a\u53ef\u4ee5\u901a\u8fc7\u5b83\u7684 ANOVA \u5c55\u5f00\u5f0f\u5f97\u5230</p>  \\eta(X)=\\sum_{j} \\eta_{j}\\left(X_{j}\\right)+\\sum_{j k} \\eta_{j k}\\left(X_{j}, X_{k}\\right)+\\sum_{j k l} \\eta_{j k l}\\left(X_{j}, X_{k}, X_{l}\\right)+\\cdots  <p>\u5f0f\u5b50 (10.40) \u4e2d\u7684\u7b2c\u4e00\u9879\u662f\u53ea\u6709\u4e00\u4e2a\u9884\u6d4b\u53d8\u91cf X_{j} \u7684\u51fd\u6570\u548c. \u8fd9\u4e9b\u51fd\u6570 \\eta_{j}\\left(X_{j}\\right) \u662f\u5728\u6240\u91c7\u7528\u7684\u8bef\u5dee\u635f\u5931\u51c6\u5219\u4e0b\u8054\u5408\u8d77\u6765\u6700\u80fd\u8fd1\u4f3c \\eta(X) \u7684\u9879. \u6bcf\u4e00\u4e2a \\eta_{j}\\left(X_{j}\\right) \u79f0\u4e3a X_{j} \u7684\u4e3b\u5f71\u54cd. \u5f0f\u4e2d\u7b2c\u4e8c\u9879\u662f\u90a3\u4e9b\u52a0\u5165\u5230\u4e3b\u5f71\u54cd\u4e2d\u5c06 \\eta(X) \u62df\u5408\u5f97\u6700\u597d\u7684\u542b\u4e24\u4e2a\u53d8\u91cf\u7684\u51fd\u6570. \u8fd9\u4e9b\u51fd\u6570\u88ab\u79f0\u4e3a\u6bcf\u4e2a\u53d8\u91cf\u5bf9 \\left(X_{j}, X_{k}\\right) \u7684\u4e8c\u9636\u4ea4\u53c9\u9879. \u5f0f\u4e2d\u7b2c\u4e09\u9879\u8868\u793a\u4e09\u9636\u4ea4\u53c9\u9879\uff0c\u4ee5\u6b64\u7c7b\u63a8. \u5bf9\u4e8e\u8bb8\u591a\u5b9e\u9645\u7684\u95ee\u9898, \u4f4e\u9636\u4ea4\u53c9\u5f71\u54cd\u5360\u4e3b\u8981\u5730\u4f4d. \u5982\u679c\u6a21\u578b\u5f97\u5230\u5f3a\u70c8\u7684\u9ad8\u9636\u4ea4\u53c9\u5f71\u54cd, \u6bd4\u5982\u5927\u578b\u7684\u51b3\u7b56\u6811, \u5219\u53ef\u80fd\u6b63\u786e\u6027\u4e0d\u597d.</p> <p>Interaction level of tree-based approximation is limited by J:</p> <ul> <li>If J=2, f_{M}(x) can only be of the form</li> </ul>  \\sum_{k} \\eta_{k}\\left(X_{k}\\right)  <ul> <li>If J=3, f_{M}(x) can be of the form</li> </ul>  \\sum_{k} \\eta_{k}\\left(X_{k}\\right)+\\sum_{j k} \\eta_{j k}\\left(X_{j}, X_{k}\\right)  <ul> <li>If J=4, f_{M}(x) can be of the form</li> </ul>  \\sum_{k} \\eta_{k}\\left(X_{k}\\right)+\\sum_{j k} \\eta_{j k}\\left(X_{j}, X_{k}\\right)+\\sum_{j k l} \\eta_{j k l}\\left(X_{j}, X_{k}, X_{l}\\right)  <p>\u591a\u5927\u5408\u9002?</p> <ul> <li>For many practical problems, low-order interactions dominate</li> <li>Therefore, models that produce strong higher-order interaction effects suffer in accuracy</li> <li>4 \\leqslant J \\leqslant 8 works well in the context of boosting</li> </ul>"},{"location":"stat/ASL-note3/#regularization","title":"Regularization","text":"<p>\u9664\u4e86\u5019\u9009\u6811\u7684\u5927\u5c0f J, \u68af\u5ea6 boosting \u7684\u53e6\u4e00\u4e2a\u5143\u53c2\u6570 (meta-parameter) \u662f boosting \u7684\u8fed\u4ee3\u6b21\u6570 M - \u6bcf\u4e00\u6b21\u8fed\u4ee3\u901a\u5e38\u4f1a\u964d\u4f4e\u8bad\u7ec3\u98ce\u9669 L\\left(f_{M}\\right), \u6240\u4ee5\u5bf9\u4e8e\u5145\u5206\u5927\u7684 M, \u8bef\u5dee\u53ef\u4ee5\u8fbe\u5230\u4efb\u610f\u5c0f. \u7136\u800c, \u5bf9\u8bad\u7ec3\u6570\u636e\u62df\u5408\u5f97\u592a\u597d\u4f1a\u5bfc\u81f4\u8fc7\u62df\u5408, \u5b83\u4f1a\u964d\u4f4e\u9884\u6d4b\u672b\u6765\u6570\u636e\u7684\u6548\u679c. \u56e0\u6b64, \u5b58\u5728\u4e00\u4e2a\u6700\u5c0f\u5316\u672b \u6765\u9884\u6d4b\u98ce\u9669\u7684\u6700\u4f18\u5927\u5c0f M^{*}, \u5b83\u4f9d\u8d56\u4e8e\u5177\u4f53\u5e94\u7528. \u4f30\u8ba1 M^{*} \u7684\u4e00\u79cd\u65b9\u4fbf\u65b9\u5f0f\u662f\u5728\u9a8c\u8bc1\u6837\u672c\u4e0a\u5c06\u9884\u6d4b \u98ce\u9669\u770b\u6210\u662f\u5173\u4e8e M \u7684\u51fd\u6570. \u6700\u5c0f\u5316\u98ce\u9669\u7684 M \u503c\u5219\u4f5c\u4e3a M^{*} \u7684\u4e00\u4e2a\u4f30\u8ba1. \u8fd9\u7c7b\u4f3c\u4e8e\u7ecf\u5e38\u7528\u5728\u795e\u7ecf \u7f51\u7edc\u4e2d\u7684 \u65e9\u505c (early stopping) \u7b56\u7565 (11.4 \u8282).</p> <ul> <li>Control number of boosting rounds</li> <li>Too large M \\rightarrow danger of over-fitting</li> <li>There is a M^{*} that minimizes future risk</li> </ul>"},{"location":"stat/ASL-note3/#shrinkage","title":"Shrinkage","text":"<ul> <li>Scale the contribution of each tree by a factor 0&lt;\\nu&lt;1</li> </ul>  f_{m}(x)=f_{m-1}(x)+\\nu \\cdot \\sum_{j=1}^{J} \\gamma_{j m} l\\left(x \\in R_{j m}\\right)  <ul> <li>Smaller \\nu \\rightarrow larger M to obtain low training error</li> <li>Empirical finding: small \\nu&lt;0.1 and sufficiently large M \\rightarrow better result than no shrinkage (especially for regression problems)</li> </ul>"},{"location":"stat/ASL-note3/#subsampling","title":"Subsampling","text":"<ul> <li>Stochastic gradient boosting - each iteration sample a fraction \\eta of the training observations (without replacement)</li> <li>A typical value \\eta=0.5</li> <li>Empirically subsampling without shrinkage works poorly \u4e0d\u7ed3\u5408 shrink \u4f3c\u4e4e\u6bd4\u4e0d\u8fdb\u884c\u91c7\u6837\u8981\u5dee?</li> <li>Subsampling with shrinkage works well</li> <li>Now we have 4 parameters to estimate J, M, \\nu, \\eta. \u4e00\u822c\u5730\uff0c\u901a\u8fc7\u524d\u671f\u7684\u5c1d\u8bd5\u786e\u5b9a\u5408\u9002\u7684 J, \\nu, \\eta, \u5c06 M \u7559\u4f5c\u4e3b\u8981\u7684\u53c2\u6570.</li> </ul> <p>sklearn \u4e2d\u6709\u4efd\u4ee3\u7801\u753b\u7684\u56fe\u7c7b\u4f3c.</p>"},{"location":"stat/ASL-note4/","title":"ASL4","text":""},{"location":"stat/ASL-note4/#random-forests","title":"Random Forests","text":"<p>\u5728\u8fd9\u7ae0\uff0c\u6211\u4eec\u8ba8\u8bba\u4e00\u4e9b\u7b80\u5355\u7684\u3001\u800c\u4e14\u672c\u8d28\u4e0a \u4e0d\u4f9d\u8d56\u5177\u4f53\u6a21\u578b\u7684 (model-free)\uff0c\u5e76\u4e14\u9002\u7528\u4e8e \u5206\u7c7b (classification) \u548c \u6a21\u5f0f\u8bc6\u522b (pattern classification) \u7684\u65b9\u6cd5\uff0e\u56e0\u4e3a\u5b83\u4eec\u7684\u9ad8\u5ea6\u65e0\u7ed3\u6784\u6027 (highly unstructured)\uff0c\u6240\u4ee5\u4e00\u822c\u5bf9\u7406\u89e3\u7279\u5f81\u548c\u7c7b\u522b\u7ed3\u679c\u4e4b\u95f4\u7684\u672c\u8d28\u5173\u7cfb\u6ca1\u6709\u4f5c\u7528\uff0e\u7136\u800c\uff0c\u4f5c\u4e3a\u4e00\u79cd\u9ed1\u7bb1 (black box) \u7684\u9884\u6d4b\u5668\uff0c\u5b83\u4eec\u53ef\u4ee5\u5f88\u6709\u6548\uff0c\u5e76\u4e14\u5728\u5b9e\u9645\u6570\u636e\u95ee\u9898\u4e2d\u7684\u8868\u73b0\u7ecf\u5e38\u662f\u6700\u597d\u7684\uff0e\u6700\u8fd1\u90bb\u6280\u5de7\u4e5f\u53ef\u4ee5\u7528\u4e8e\u56de\u5f52\uff0c\u8fd9\u5728 \u7b2c 2 \u7ae0 \u6709\u63d0\u5230\u800c\u4e14\u5bf9\u4e8e\u4f4e\u7ef4\u95ee\u9898\u6548\u679c\u5f88\u597d\uff0e\u7136\u800c\uff0c\u5bf9\u4e8e\u9ad8\u7ef4\u7279\u5f81\uff0c\u6700\u8fd1\u90bb\u56de\u5f52\u4e2d\u504f\u5dee\u548c\u65b9\u5dee\u4e4b\u95f4\u7684\u6743\u8861\u4e0d\u518d\u8868\u73b0\u5f97\u50cf\u5728\u5206\u7c7b\u4e2d\u90a3\u6837\u597d\uff0e</p>"},{"location":"stat/ASL-note4/#definition-of-random-forests","title":"De\ufb01nition of Random Forests","text":"<p>Bagging \u7684\u6838\u5fc3\u601d\u60f3\u662f\u5bf9\u8bb8\u591a\u6709\u566a\u58f0\u4f46\u8fd1\u4f3c\u65e0\u504f\u7684\u6a21\u578b\u8fdb\u884c\u5e73\u5747\uff0c\u4e5f\u56e0\u6b64\u964d\u4f4e\u4e86\u65b9\u5dee\uff0e\u6811\u662f\u7528\u4e8e bagging \u7684\u7406\u60f3\u6a21\u578b\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u6355\u6349\u6570\u636e\u4e2d\u590d\u6742\u7684\u4ea4\u53c9\u9879\uff0c\u800c\u4e14\u5982\u679c\u6811\u957f\u5f97\u8db3\u591f\u6df1\u7684\u8bdd\uff0c\u4f1a\u6709\u76f8\u5bf9\u8f83\u4f4e\u7684\u504f\u5dee\uff0e\u56e0\u4e3a\u6811\u662f\u5145\u6ee1\u566a\u58f0\u7684\uff0c\u6240\u4ee5\u901a\u8fc7\u5e73\u5747\u53ef\u4ee5\u5f88\u5927\u7a0b\u5ea6\u5730\u6539\u5584\u5b83\u4eec\uff0e\u800c\u4e14\uff0c\u56e0\u4e3a bagging \u4e2d\u4ea7\u751f\u7684\u6bcf\u68f5\u6811\u662f\u540c\u5206\u5e03\u7684\uff0cB \u68f5\u8fd9\u6837\u7684\u6811\u7684\u5e73\u5747\u7684\u671f\u671b\u4e0e\u5b83\u4eec\u4e2d\u7684\u4efb\u4e00\u4e2a\u662f\u76f8\u540c\u7684\uff0e\u8fd9\u610f\u5473\u7740\u7ecf\u8fc7 bagged \u7684\u6811\u7684\u504f\u5dee\u4e0e\u5355\u4e2a(bootstrap)\u6811\u7684\u504f\u5dee\u662f\u4e00\u6837\u7684\uff0c\u800c\u4e14\u552f\u4e00\u6539\u5584\u7684\u5e0c\u671b\u662f\u901a\u8fc7\u964d\u4f4e\u65b9\u5dee\uff0e\u8fd9\u4e0e boosting \u662f\u76f8\u53cd\u7684\uff0c\u5728 boosting \u4e2d\u6811\u4ee5\u4e00\u79cd\u81ea\u9002\u5e94\u7684\u65b9\u5f0f\u51cf\u5c0f\u504f\u5dee\uff0c\u56e0\u6b64\u4e0d\u662f\u540c\u5206\u5e03\u7684\uff0e</p> <ul> <li>Random forests (Breiman 2001) build a large collection of de-correlated trees and then averages their predictions.</li> <li>On many problems<ul> <li>performance of random forest \\approx performance of boosted tree</li> </ul> </li> <li>Random forests are easier to train and tune than boosted trees</li> </ul> <p>Random Forests: Regresson / Classification</p> <ul> <li>For b=1 to B<ul> <li>Draw bootstrap sample Z^{*} of size N from the training data</li> <li>Grow a random forest tree T_{b} using Z^{*} by recursively<ul> <li>Select m features from the p features at random</li> <li>Pick the best variable / split point among the m</li> <li>Split the node into two child nodes</li> </ul> </li> </ul> </li> <li>Output the ensemble of trees \\left\\{T_{b}\\right\\}_{1}^{B}</li> </ul> <p>Make a prediction at a new point x</p>  \\begin{gathered} \\hat{f}_{r f}^{B}(x)=\\frac{1}{B} \\sum_{b=1}^{B} T_{b}(x) \\leftarrow \\text { regression } \\\\ \\hat{C}_{r f}^{B}(x)=\\text { majority vote }\\left\\{\\hat{C}_{b}(x)\\right\\}_{1}^{B} \\leftarrow \\text { classification } \\end{gathered}"},{"location":"stat/ASL-note4/#motivation-variances-of-average","title":"Motivation - Variances of Average","text":"<p>Define, where each X_{i} \\sim p(X)</p>  S_{B}=\\frac{1}{B} \\sum_{i=1}^{B} X_{i}  <p>If X_{i}{ }^{\\prime} s are independent of each other and \\operatorname{Var}\\left(X_{i}\\right)=\\sigma^{2}, then</p>  \\operatorname{Var}\\left(S_{B}\\right)=\\frac{1}{B} \\sigma^{2}  <p>If X_{i}{ }^{\\prime} s are not independent and have pairwise correlation \\rho, then</p>  \\operatorname{Var}\\left(S_{B}\\right)=\\rho \\sigma^{2}+\\frac{1-\\rho}{B} \\sigma^{2}  <p>Note: as B \\rightarrow \\infty, \\operatorname{Var}\\left(S_{B}\\right) \\rightarrow \\rho \\sigma^{2} Therefore, higher correlation limits the benefits of averaging</p> <ul> <li>Typical values for m are \\sqrt{p} or even as low as 1</li> <li>Reducing m will reduce the correlation between trees</li> <li>Trees benefit a lot from the randomization as they have low-bias and high variance</li> <li>Random forests do remarkably well, with very little tuning required</li> </ul> <p></p>"},{"location":"stat/ASL-note4/#details-of-random-forests","title":"Details of Random Forests","text":"<p>Recommendations for the parameters in the random forest. \u5f53\u7136\u5b9e\u9645\u7528\u7684\u65f6\u5019\u8fd8\u662f\u4f5c\u4e3a\u8d85\u53c2\u6570\u8c03\u6574\u6bd4\u8f83\u597d.</p> <ul> <li>Regression: m=\\lfloor\\sqrt{p}\\rfloor and n_{\\min }=5</li> <li>Classification: m=\\lfloor p / 3\\rfloor and n_{\\min }=1</li> </ul>"},{"location":"stat/ASL-note4/#out-of-bag-samples","title":"Out of Bag Samples","text":"<p>For each observation z_{i}=\\left(x_{i}, y_{i}\\right), its out-of-bag estimate is</p>  \\hat{f}_{o o b}\\left(x_{i}\\right)=\\sum_{b \\in \\mathcal{B}_{i}} T_{b}\\left(x_{i}\\right)  <p>where \\mathcal{B}_{i} is the index of the bootstrap samples in which z_{i} did not appear</p> <ul> <li>The OOB error estimate \\approx \\mathrm{n}-fold cross validation</li> <li>Therefore, can predict test-error along the way without using cross-validation</li> </ul> <p>OOB \u8bef\u5dee\u4f30\u8ba1\u51e0\u4e4e\u7b49\u4ef7\u4e8e\u901a\u8fc7 N \u6298\u4ea4\u53c9\u9a8c\u8bc1\u5f97\u5230\u7684\u4f30\u8ba1\uff1b\u89c1\u7ec3\u4e60 15.2\uff0e\u56e0\u6b64\u4e0e\u8bb8\u591a\u5176\u5b83\u7684\u975e\u7ebf\u6027\u4f30\u8ba1\u91cf\u4e0d\u540c\uff0c\u968f\u673a\u68ee\u6797\u53ef\u4ee5\u9010\u6b65\u62df\u5408\uff0c\u540c\u65f6\u4ea4\u53c9\u9a8c\u8bc1\u4e5f\u5c06\u6cbf\u7740\u62df\u5408\u8fdb\u5ea6\u9010\u6b65\u8fdb\u884c\uff0e\u4e00\u65e6OOB\u8bef\u5dee\u7a33\u5b9a\uff0c\u8bad\u7ec3\u53ef\u4ee5\u7ec8\u6b62\uff0e</p> <p>\u53e6\u5916\u4e00\u4e2a\u65ad\u8a00\u662f\u968f\u673a\u68ee\u6797\u4e0d\u4f1a\u8fc7\u62df\u5408\u6570\u636e\uff0e</p> <p>Note: classi\ufb01er are much less sensitive to variance and the e\ufb00ect of over-\ufb01tting is seldom seen with random-forest classi\ufb01cation</p>"},{"location":"stat/ASL-note4/#analysis-of-random-forests","title":"Analysis of Random Forests","text":""},{"location":"stat/ASL-note4/#variance-de-correlation-effect","title":"Variance \\&amp; De-correlation Effect","text":"<p>The limiting form of the random forest regression estimate is (\u6811\u7684\u6570\u91cf\u8d8b\u5411\u65e0\u7a77)</p>  \\hat{f}_{r f}(x)=E_{\\theta \\mid Z}\\{T(x ; \\theta(Z))\\}  <p>The variance of this estimate at x is</p>  \\hat{f}_{r f}(x)=\\rho(x) \\sigma^{2}(x)  <p>where</p> <ul> <li>\\rho(x) is the sampling correlation between any pair of trees</li> </ul>  \\rho(x)=\\operatorname{corr}\\left\\{T\\left(x ; \\theta_{1}(Z)\\right), T\\left(x ; \\theta_{2}(Z)\\right)\\right\\}  <p>where \\theta_{1}(Z) and \\theta_{2}(Z) are a randomly drawn pair of random forests grown to the randomly sampled Z</p> <ul> <li>\\sigma^{2}(x) is the sampling variance of any single randomly drawn tree</li> </ul>  \\sigma^{2}(X)=\\operatorname{Var}\\{T(x ; \\theta(Z))\\}  <p>The variability averaged over these calculations is both</p> <ul> <li>conditional on Z : due to bootstrap sample and feature sampling at each split</li> <li>a result of the sampling variability of Z itself</li> </ul> <p>Note: the conditional covariance of a pair of tree fits at x is 0 , because bootstrap and feature sampling is i.i.d.</p> <p>\u4e0b\u56fe\u5c55\u793a\u4e86 Correlation Between Trees. \u53ef\u89c1 \u6240\u968f\u673a\u9009\u62e9\u7684\u7279\u5f81\u6570\u91cf m \u8d8a\u5c11, \u6240\u8bad\u7ec3\u7684\u6811\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u4e5f\u8d8a\u5c0f.</p> <p></p> <p>\u4e0b\u9762\u5de6\u56fe\u662f\u5355\u9897\u6811\u7684\u65b9\u5dee. Variance of Single Tree Predictors</p> <p>The total variance can be decomposed into two parts (\u5373\u5168\u65b9\u5dee\u7387(law of total variance)\u6216\u6761\u4ef6\u65b9\u5dee\u516c\u5f0f(conditional variance formulas), see here)</p>  \\begin{gathered} \\operatorname{Var}_{\\theta, Z}\\{T(x ; \\theta(Z))\\}=\\operatorname{Var}_{z}\\left\\{E_{\\theta \\mid z}\\{T(x ; \\theta(Z))\\}\\right\\}+E_{Z}\\left\\{\\operatorname{Var}_{\\theta \\mid Z}\\{T(x ; \\theta(Z))\\}\\right\\} \\\\ \\text { Total variance }=\\operatorname{Var}\\left\\{\\hat{f}_{f_{f}}(x)\\right\\}+\\text { within-Z variance } \\end{gathered}  <p>\u7b2c\u4e8c\u9879\u662f \\mathbf{Z} \u95f4\u65b9\u5dee\u4e00\u4e00\u968f\u673a\u5316\u7684\u7ed3\u679c, \u4f1a\u968f\u7740 m \u964d\u4f4e\u800c\u589e\u5927. \u7b2c\u4e00\u9879\u5b9e\u9645\u4e0a\u662f\u968f\u673a\u68ee\u6797\u96c6\uff08\u663e\u793a\u5728\u56fe\u7684\u53f3\u8fb9) \u4e2d\u7684\u91c7\u6837\u65b9\u5dee, \u4f1a\u968f\u7740 m \u964d\u4f4e\u800c\u964d\u4f4e.</p> <p>\u5355\u68f5\u6811\u7684\u65b9\u5dee\u5728 m \u7684\u5927\u90e8\u5206\u53d6\u503c\u8303\u56f4\u5185\u4e0d\u4f1a\u6709\u660e\u663e\u7684\u6539\u53d8, \u56e0\u6b64\u6839\u636e\u5f0f (15.5), \u603b\u4f53\u7684\u968f\u673a\u68ee\u6797\u96c6\u7684\u65b9\u5dee\u663e\u8457\u6bd4\u6811\u7684\u65b9\u5dee\u8981\u4f4e.</p> <p></p>"},{"location":"stat/ASL-note4/#bias","title":"Bias","text":"<p>\u548c bagging \u4e2d\u4e00\u6837, \u968f\u673a\u68ee\u6797\u7684\u504f\u5dee\u4e0e\u4efb\u610f\u5355\u68f5\u91c7\u6837\u540e\u7684\u6811 T(x ; \\Theta(\\mathbf{Z})) \u4e00\u6837:</p>  \\begin{aligned} \\operatorname{Bias}(x) &amp;=\\mu(x)-E_{\\mathbf{Z}} \\hat{f}_{r f}(x) \\\\ &amp;=\\mu(x)-E_{\\mathbf{Z}} E_{\\Theta \\mid \\mathbf{Z}} T(x ; \\Theta(\\mathbf{Z})) \\end{aligned}  <p>\u56e0\u4e3a\u968f\u673a\u5316\u548c\u51cf\u5c0f\u7684\u6837\u672c\u7a7a\u95f4\u7684\u7ea6\u675f, \u8fd9\u4e00\u822c\u6bd4\u7531 \\mathbf{Z} \u751f\u6210\u7684\u672b\u526a\u679d\u7684\u6811\u7684\u504f\u5dee\u7684\u7edd\u5bf9\u503c\u8981\u5927. \u56e0 \u6b64\u901a\u8fc7 bagging \u6216\u968f\u673a\u68ee\u6797\u5bf9\u9884\u6d4b\u5e26\u6765\u7684\u6539\u5584\u4ec5\u4ec5\u662f\u65b9\u5dee\u964d\u4f4e\u7684\u7ed3\u679c.</p> <p>\u504f\u5dee\u7684\u6240\u6709\u8ba8\u8bba\u90fd\u4f9d\u8d56\u4e8e\u672b\u77e5\u7684\u771f\u5b9e\u51fd\u6570. \u56fe 15.10 \u7684\u53f3\u56fe\u5c55\u793a\u4e86\u6211\u4eec\u53ef\u52a0\u6a21\u62df\u6a21\u578b\u7684\u5e73\u65b9\u504f\u5dee (\u901a\u8fc7 500 \u6b21\u5b9e\u73b0\u4f30\u8ba1\u5f97\u5230). \u5c3d\u7ba1\u5bf9\u4e8e\u4e0d\u540c\u7684\u6a21\u578b, \u504f\u5dee\u66f2\u7ebf\u7684\u5f62\u72b6(shape)\u548c\u53d8\u5316\u7387(rate)\u53ef\u80fd \u4e0d\u540c, \u4f46\u662f\u4e00\u822c\u7684\u8d8b\u52bf\u662f\u5f53 m \u964d\u4f4e\u65f6, \u504f\u5dee\u589e\u5927. \u56fe\u4e2d\u5c55\u793a\u7684\u662f\u5747\u65b9\u8bef\u5dee, \u5e76\u4e14\u6211\u4eec\u5728 m \u7684\u9009\u62e9 \u4e2d\u770b\u5230\u4e86\u7ecf\u5178\u7684\u504f\u5dee-\u65b9\u5dee\u7684\u6743\u8861. \u5bf9\u6240\u6709\u7684 m, \u968f\u673a\u68ee\u6797\u7684\u5e73\u65b9\u504f\u5dee\u6bd4\u5355\u68f5\u6811\u7684\u5e73\u65b9\u504f\u5dee (\u6c34\u5e73\u7ebf) \u8981\u5927.</p>"},{"location":"stat/ASL-note4/#random-forests-nearest-neighbour","title":"Random Forests &amp; Nearest Neighbour","text":"<p>\u968f\u673a\u68ee\u6797\u5206\u7c7b\u5668\u4e0e k \u6700\u8fd1\u90bb\u5206\u7c7b\u5668 (13.3 \u8282) \u6709\u8bb8\u591a\u76f8\u540c\u7684\u5730\u65b9; \u5b9e\u9645\u4e0a\u524d\u8005\u662f\u540e\u8005\u7684\u52a0\u6743\u7248 \u672c. \u56e0\u4e3a\u6bcf\u68f5\u6811\u751f\u957f\u5230\u6700\u5927\u65f6, \u5bf9\u4e8e\u7279\u5b9a\u7684 \\Theta^{*}, T\\left(x ; \\Theta^{*}(\\mathbf{Z})\\right) \u662f\u5176\u4e2d\u4e00\u4e2a\u8bad\u7ec3\u6837\u672c\u7684\u54cd\u5e94\u53d8\u91cf\u7684 \u503c. \u751f\u6210\u6811\u7b97\u6cd5\u4efb\u610f\u4ece\u4e2d\u9009\u62e9\u6700\u6709\u4fe1\u606f\u91cf\u7684\u9884\u6d4b\u91cf, \u5bfb\u627e\u5230\u8be5\u89c2\u6d4b\u7684\u6700\u4f18\u8def\u5f84. \u5e73\u5747\u7684\u8fc7\u7a0b\u662f\u5bf9\u8bad \u7ec3\u54cd\u5e94\u53d8\u91cf\u8d4b\u4e88\u6743\u91cd, \u8fd9\u6700\u7ec8\u5bf9\u9884\u6d4b\u503c\u8fdb\u884c\u6295\u7968. \u56e0\u6b64\u901a\u8fc7\u968f\u673a\u68ee\u6797\u7684\u6295\u7968\u673a\u5236, \u90a3\u4e9b\u9760\u8fd1\u76ee\u6807\u70b9 \u7684\u89c2\u6d4b\u8d4b\u4e88\u4e86\u6743\u91cd\u4e00\u4e00\u4e00\u4e2a\u7b49\u4ef7\u6838\u4e00\u4e00\u8fd9\u4e9b\u7ed3\u5408\u5728\u4e00\u8d77\u5f62\u6210\u4e86\u5206\u7c7b\u8fb9\u754c.</p>"},{"location":"stat/ASL-note4/#ensemble-learning","title":"Ensemble Learning","text":"<p>\u96c6\u6210\u5b66\u4e60 (ensemble learning) \u7684\u601d\u60f3\u662f\u901a\u8fc7\u7ed3\u5408\u4e00\u7cfb\u5217\u7b80\u5355\u57fa\u7840\u6a21\u578b\u7684\u4f18\u70b9\u6765\u5efa\u7acb\u4e00\u4e2a\u9884\u6d4b\u6a21\u578b\uff0e\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u5f88\u591a\u8fd9\u7c7b\u7684\u4f8b\u5b50\uff0e</p> <p>8.7 \u8282\u7684 bagging \u548c\u7b2c 15 \u7ae0\u7684\u968f\u673a\u68ee\u6797\u90fd\u662f\u7528\u4e8e\u5206\u7c7b\u7684\u96c6\u6210\u5b66\u4e60\u7684\u65b9\u6cd5\uff0c\u5176\u4e2d\u6811\u7684\u6bcf\u4e2a committee \u5bf9\u9884\u6d4b\u7684\u7c7b\u522b\u90fd\u6709\u4e00\u4e2a\u6295\u7968\uff0e\u7b2c 10 \u7ae0\u4e2d\u7684 boosting \u4e00\u5f00\u59cb\u4e5f\u662f\u4ee5\u4e00\u79cd committee \u7684\u65b9\u6cd5\u63d0\u51fa\u6765\u7684\uff0c\u5c3d\u7ba1\u4e0d\u540c\u4e8e\u968f\u673a\u68ee\u6797\uff0cweak learners \u7684 committee \u968f\u7740\u65f6\u95f4\u4e0d\u65ad\u8fdb\u5316\uff0c\u5e76\u4e14\u6210\u5458\u8fdb\u884c\u5e26\u6709\u6743\u91cd\u7684\u6295\u7968\uff0eStacking\uff088.8 \u8282\uff09\u662f\u7ed3\u5408\u4e00\u7cfb\u5217\u62df\u5408\u6a21\u578b\u4f18\u70b9\u7684\u65b0\u65b9\u5f0f\uff0e\u4e8b\u5b9e\u4e0a\uff0c\u53ef\u4ee5\u5c06\u4efb\u4f55\u5b57\u5178\u65b9\u6cd5\u770b\u6210\u96c6\u6210\u5b66\u4e60\uff0c\u5176\u4e2d\u57fa\u51fd\u6570\u5145\u5f53 \u5f31\u5b66\u4e60\u5668 (weak learners)\uff0c\u6bd4\u5982\u56de\u5f52\u6837\u6761\uff0e</p> <p>\u975e\u53c2\u56de\u5f52\u7684\u8d1d\u53f6\u65af\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u770b\u6210\u662f\u96c6\u6210\u5b66\u4e60\u7684\u65b9\u6cd5\uff1a\u5173\u4e8e\u53c2\u6570\u8bbe\u5b9a\u7684\u540e\u9a8c\u5206\u5e03\uff0c\u5bf9\u4e00\u7cfb\u5217\u5927\u91cf\u7684\u5019\u9009\u6a21\u578b\u8fdb\u884c\u5e73\u5747\uff08\u6bd4\u5982\uff0cNeal and Zhang\uff0c20061\uff09\uff0e</p> <p>\u96c6\u6210\u5b66\u4e60\u53ef\u4ee5\u5206\u6210\u4e24\u4e2a\u4efb\u52a1\uff1a\u4ece\u8bad\u7ec3\u96c6\u4e2d\u5efa\u7acb\u57fa\u5b66\u4e60\u5668\u7684\u603b\u4f53\uff0c\u7136\u540e\u7ed3\u5408\u5b83\u4eec\u5f62\u6210\u590d\u5408\u9884\u6d4b\uff0e\u8fd9\u7ae0\u4e2d\u6211\u4eec\u8fdb\u4e00\u6b65\u8ba8\u8bba boosting \u6280\u672f\uff1b\u5b83\u901a\u8fc7\u5728 weak learners \u7684\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\u901a\u8fc7\u4e00\u4e2a\u6b63\u89c4\u5316\u548c\u6709\u76d1\u7763\u7684\u641c\u7d22\u6765\u5efa\u7acb\u96c6\u6210\u6a21\u578b\uff0e</p>"},{"location":"stat/ASL-note4/#boosting-regularization-paths","title":"Boosting &amp; Regularization Paths","text":"<p>Ensemble learning: build a prediction model by combining the strengths of a collection of simpler base models</p> <p>Examples of ensemble methods</p> <ul> <li>Bagging</li> <li>Boosting</li> <li>Stacking</li> <li>Dictionary methods</li> </ul> <p>Ensemble consists of two tasks</p> <ul> <li>Build a population of base learners from training data</li> <li>Combine base learners to form a composite predictor</li> </ul>"},{"location":"stat/ASL-note4/#penalized-regression","title":"Penalized Regression","text":"<p>Consider the dictionary of all J-terminal node regression trees T=\\left\\{T_{k}\\right\\} that could be realized by the training data. \u6ce8\u610f\u8fd9\u91cc\u7684\u76ee\u6807\u662f\u8981\u8ba1\u7b97\u8fd9\u4e9b\u57fa\u51fd\u6570\u7684\u6743\u91cd\u5411\u91cf.</p> <p>The linear model is</p>  f(x)=\\sum_{i=1}^{|T|} \\alpha_{k} T_{k}(x)  <p>Estimation of \\alpha \u2018s from training data requires regularization</p>  \\min_{\\alpha}\\left\\{\\sum_{i=1}^{n}\\left(y_{i}-\\sum_{i=1}^{|T|} \\alpha_{k} T_{k}(x)\\right)^{2}+\\lambda J(\\alpha)\\right\\}  <ul> <li>Ridge regression: J(\\alpha)=\\sum_{k=1}^{|T|}\\left|\\alpha_{k}\\right|^{2}</li> <li>Lasso: J(\\alpha)=\\sum_{k=1}^{|T|}\\left|\\alpha_{k}\\right|</li> </ul> <p>\u65bd\u52a0\u60e9\u7f5a\u9879\u53ef\u4ee5\u4f7f\u5f97\u53c2\u6570\u5206\u5e03\u66f4\u7a00\u758f.</p> <ul> <li>Solution to the lasso solution with moderate to large \\lambda gives a sparse \\alpha</li> <li>If |T| is very large, then solving the optimization with the lasso penalty is not possible</li> <li>A feasible forward stagewise strategy exists that closely approximates the effect of lasso \u5b58\u5728\u53ef\u884c\u7684\u5411\u524d\u9010\u6b65\u7b56\u7565\uff0c\u5bf9 lasso \u7684\u6548\u679c\u6709\u975e\u5e38\u597d\u7684\u8fd1\u4f3c\uff0c\u5e76\u4e14\u4e0e\u589e\u5f3a\u548c\u5411\u524d\u9010\u6b65\u7b97\u6cd5 10.2 \u975e\u5e38\u76f8\u4f3c</li> </ul>"},{"location":"stat/ASL-note4/#forward-stagewise-linear-regression","title":"Forward Stagewise Linear Regression","text":"<ul> <li>Initialize \\tilde{\\alpha}_{k}, k=1, \\ldots, K. Set \\epsilon&gt;0 small and M large</li> <li>For m=1 to M :<ul> <li>\\left(\\beta^{*}, k^{*}\\right)=\\operatorname{argmin}_{\\beta, k} \\sum_{i=1}^{n}\\left(y_{i}-\\sum_{l=1}^{|T|} \\tilde{\\alpha}_{l} T_{l}\\left(x_{i}\\right)-\\beta T_{k}\\left(x_{i}\\right)\\right)^{2}</li> <li>\\tilde{\\alpha}_{k^{*}} \\rightarrow \\tilde{\\alpha}_{k^{*}}+\\epsilon \\operatorname{sign}\\left(\\beta^{*}\\right)</li> </ul> </li> <li>Output</li> </ul>  f_{M}(x)=\\sum_{k=1}^{|T|} \\tilde{\\alpha}_{k} T_{k}(x)  <p>\u53ef\u4ee5\u770b\u5230 Forward Stagewise Linear Regression \u548c lasso \u7684\u7ed3\u679c\u975e\u5e38\u76f8\u4f3c.</p> <p></p>"},{"location":"stat/ASL-note4/#the-bet-on-sparsity-principle","title":"The \u201cBet on Sparsity\u201d Principle","text":"<ul> <li>Minimizing a loss function with a L_{1} penalty is slow and involves searching through the model space</li> <li>The L_{2} penalty is computationally much easier</li> <li>However, L_{1} penalty is better suited to sparse situations</li> </ul> <p>Consider the example</p> <ul> <li>10000 data points</li> <li>Model is linear combination of a million trees</li> <li>If the coefficients arise from a Gaussian distribution, better to use L_{2} penalty in ridge regression</li> <li>But if there are only a small number of non-zero coefficients, L_{1} penalty will work better</li> </ul> <p>\u4e24\u79cd\u60c5\u51b5\u4e0b:</p> <ul> <li>In the dense scenario, L_{2} best but will fail as too little data to estimate 1 million coefficients</li> <li>In the sparse setting, L_{1} penalty can do well but L_{2} penalty will fail</li> </ul> <p>Take home message: For high-dimensional problems ( \u201cbet on sparsity\u201d \u51c6\u5219) Use a procedure that does well in sparse problems, since no procedure does well in dense problems. \u91c7\u7528\u5728\u7a00\u758f\u95ee\u9898\u4e2d\u8868\u73b0\u5f97\u597d\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a\u6ca1\u6709\u65b9\u6cd5\u80fd\u5728\u7a20\u5bc6\u95ee\u9898\u4e2d\u8868\u73b0\u5f97\u597d\uff0e</p> <p>comment need some qualification:</p> <ul> <li>Sparseness/denseness depends on target function (\u7684\u6570\u91cf) and dictionary T</li> <li>Notion of sparse vs dense is relative to size of training data and noise-to-signal ratio. \u8d8a\u5927\u7684\u8bad\u7ec3\u96c6\u5141\u8bb8\u6211\u4eec\u4f30\u8ba1\u66f4\u5c0f\u6807\u51c6\u5dee\u7684\u7cfb\u6570\uff0e\u540c\u6837\u5730\uff0c\u5728\u5c0f NSR \u7684\u60c5\u5f62\u4e2d\uff0c\u5f53\u7ed9\u5b9a\u6837\u672c\u5927\u5c0f\u6211\u4eec\u80fd\u8bc6\u522b\u51fa\u76f8\u5bf9\u4e8e\u5927 NSR \u60c5\u5f62\u4e0b\u66f4\u591a\u7684\u975e\u96f6\u7cfb\u6570\uff0e<ul> <li>More training data \\rightarrow can estimate coef with smaller se</li> <li>small NSR \\rightarrow can identify more non-zero coef</li> </ul> </li> <li>Increase the size of the dictionary \\rightarrow probable sparse representation, harder search problem, high variance. \u589e\u5927\u5b57\u5178\u96c6\u7684\u5927\u5c0f\u53ef\u80fd\u5bfc\u51fa\u6211\u4eec\u51fd\u6570\u7684\u66f4\u7a00\u758f\u7684\u8868\u793a\uff0c\u4f46\u662f\u5bfb\u627e\u95ee\u9898\u4f1a\u53d8\u5f97\u66f4\u56f0\u96be\uff0c\u5bfc\u81f4\u66f4\u9ad8\u7684\u65b9\u5dee\uff0e</li> </ul> <p></p>"},{"location":"stat/ASL-note4/#learning-ensembles","title":"Learning Ensembles","text":"<p>\u5229\u7528\u524d\u9762\u7ae0\u8282\u7684\u77e5\u8bc6\u5f97\u5230\u66f4\u9ad8\u6548\u7684\u96c6\u6210\u6a21\u578b\uff0eHow should one learn functions of the form</p> <p>$$ f(x)=\\alpha_{0}+\\sum_{T_{k} \\in T} \\alpha_{k} T_{k}(x) $$ where T is a dictionary of basis functions - typically trees</p> <p>(\u4e0a\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u8bba\u8bc1\u5e26\u6536\u7f29\u7684 gradient boosting \u4f1a\u5728\u6811\u7684\u7a7a\u95f4\u4e2d\u62df\u5408 L_1 \u6b63\u5219\u5316\u5355\u8c03\u8def\u5f84.)</p> <p>Friedman and Popescu (2003) Suggested approach, \u5206\u4e24\u4e2a\u6b65\u9aa4</p> <ul> <li>Construct a finite dictionary T_{1}=\\left\\{T_{1}(x), \\ldots, T_{M}(x)\\right\\} from the training data</li> <li>Build a family of functions f_{\\lambda}(x) by fitting a lasso path</li> </ul>  \\alpha(\\lambda)=\\operatorname{argmin}_{\\alpha} \\sum_{i=1}^{n} L\\left(y_{i}, \\alpha_{0}+\\sum_{m=1}^{M} \\alpha_{m} T_{m}(x)\\right)+\\lambda \\sum_{m=1}^{M}\\left|\\alpha_{m}\\right|  <ul> <li>Can view this as a way to post-processing a boosted trees or random forest</li> </ul> <p>\u5728\u8fd9\u79cd\u7b80\u5355\u7684\u5f62\u5f0f\u91cc\u9762, \u5c06 \\mathcal{T}_{L} \u770b\u6210\u662f\u7531 gradient boosting \u7b97\u6cd5\u6216\u8005\u968f\u673a\u68ee\u6797\u7b97\u6cd5\u5f97\u5230\u7684\u6811\u7684\u96c6 \u5408, \u8be5\u6a21\u578b\u53ef\u4ee5\u770b\u6210\u662f boosting \u6216\u8005\u662f\u968f\u673a\u68ee\u6797\u7684\u67d0\u79cd post-processing \u65b9\u5f0f. \u901a\u8fc7\u5bf9\u8fd9\u4e9b\u6811\u8fdb\u884c lasso \u8def\u5f84\u62df\u5408, \u4e00\u822c\u6211\u4eec\u4f1a\u5f97\u5230\u66f4\u52a0\u7b80\u5316\u7684\u96c6\u5408, \u5b83\u4f1a\u5927\u5927\u51cf\u5c11\u672b\u6765\u9884\u6d4b\u7684\u8ba1\u7b97\u91cf\u548c\u5b58\u50a8\u91cf. \u5728 \u4e0b\u4e00\u8282, \u6211\u4eec\u5c06\u8ba8\u8bba\u8fd9\u79cd\u65b9\u6cd5\u7684\u53d8\u79cd, \u8fdb\u800c\u964d\u4f4e \\mathcal{T}_{L} \u7684\u76f8\u5173\u6027, \u5e76\u4e14\u63d0\u9ad8 lasso post processor \u7684\u8868 \u73b0.</p> <p></p>"},{"location":"stat/ASL-note4/#learning-a-good-ensemble","title":"Learning a Good Ensemble","text":"<ul> <li>Not all ensembles T_{L} will perform well with post-processing</li> <li>For the ensemble of basis functions T_{L}, we want<ul> <li>a collection that offers good coverage in the places needed</li> <li>and are sufficiently different from each other to allow the post-processing to be effective</li> </ul> </li> <li>Friedman and Popescu suggested an ensemble-generation algorithm</li> </ul>"},{"location":"stat/ASL-note4/#importance-sampled-learning-ensemble-isle","title":"Importance sampled learning ensemble (ISLE)","text":"<p>\u4ece \u6570\u503c\u79ef\u5206 (numerical quadrature) \u548c \u91cd\u8981\u6027\u91c7\u6837 (importance sampling) \u4e2d\u83b7\u5f97\u542f\u53d1</p> <ul> <li>f_{0}(x)=\\operatorname{argmin}_{c} \\sum_{i=1}^{n} L\\left(y_{i}, c\\right)</li> <li>For m=1 to M<ul> <li>\\gamma_{m}=\\operatorname{argmin}_{\\gamma} \\sum_{i \\in S_{m}(\\eta)} L\\left(y_{i}, f_{m-1}\\left(x_{i}\\right)+b\\left(x_{i} ; \\gamma\\right)\\right)</li> <li>f_{m}(x)=f_{m-1}(x)+\\nu b(x ; \\gamma)</li> </ul> </li> <li>T_{I S L E}=\\left\\{b\\left(x ; \\gamma_{1}\\right), b\\left(x ; \\gamma_{2}\\right), \\ldots, b\\left(x ; \\gamma_{M}\\right)\\right\\}</li> </ul> <p>where</p> <ul> <li>\\nu \\in[0,1] introduces memory into the randomization process \u5bf9\u968f\u673a\u8fc7\u7a0b\u5f15\u5165 \u8bb0\u5fc6, \u5176\u8d8a\u5927\uff0c\u8d8a\u80fd\u907f\u514d b(x; \\gamma) \u4e0e\u4e4b\u524d\u627e\u5230\u7684\u4e00\u81f4</li> <li>S_{m}(\\eta) refers to a subsample \\eta \\cdot n, \\eta \\in[0,1] of the training observations \u8bad\u7ec3\u89c2\u6d4b\u503c\u7684\u5b50\u6837\u672c</li> <li>Suggested values of \\nu=0.1 are \\eta&lt;0.5, and for large n, pick \\eta \\approx \\frac{1}{\\sqrt{n}}</li> </ul> <p>\u5f88\u591a\u968f\u673a\u7b97\u6cd5\u90fd\u662f\u4e0a\u8ff0\u7b97\u6cd5\u7684\u7279\u6b8a\u60c5\u51b5 A number of familiar randomization schemes are special cases of this algorithm</p> <ul> <li>Bagging: \\eta=1, sample with replacement and \\nu=1</li> <li>Random forest: sampling is similar, with more randomness introduced by the selection of the splitting variable</li> <li>Gradient boosting: with shrinkage uses \\eta=1 (but does not produce sufficient width \\sigma)</li> <li>Stochastic gradient boosting: follows the recipe exactly</li> </ul> <p></p> <ul> <li>Consider this function of X \\sim U[0,1]^{100} (\u6700\u540e 65 \u4e2a\u5143\u7d20\u662f\u566a\u58f0\u53d8\u91cf)</li> </ul>  f(X)=10 \\cdot \\prod_{j=1}^{5} \\exp \\left\\{-2 X_{j}^{2}\\right\\}+\\sum_{j=6}^{36} X_{j}  <ul> <li>The response variable, with \\sigma=1.3, is</li> </ul>  Y=f(X)+\\epsilon, \\epsilon \\sim N\\left(0, \\sigma^{2}\\right)  <ul> <li>Estimate f(X) from a training set of size n=1000</li> <li>Results: n_{\\text {test }}=600 and averaged over 20 different training sets</li> </ul>"},{"location":"stat/ASL-note4/#rule-ensemble","title":"Rule Ensemble","text":"<p>\u56fe 16.9 \u63cf\u8ff0\u4e86\u4e00\u68f5\u5c0f\u6811, \u5e26\u7f16\u53f7\u7684\u7ed3\u70b9. \u4e0b\u9762\u7684\u89c4\u5219\u53ef\u4ee5\u4ece\u8fd9\u68f5\u6811\u5bfc\u51fa:</p>  \\begin{aligned} &amp;R_{1}(X)=I\\left(X_{1}&lt;2.1\\right) \\\\ &amp;R_{2}(X)=I\\left(X_{1} \\geq 2.1\\right) \\\\ &amp;R_{3}(X)=I\\left(X_{1} \\geq 2.1\\right) \\cdot I\\left(X_{3} \\in\\{S\\}\\right) \\\\ &amp;R_{4}(X)=I\\left(X_{1} \\geq 2.1\\right) \\cdot I\\left(X_{3} \\in\\{M, L\\}\\right) \\\\ &amp;R_{5}(X)=I\\left(X_{1} \\geq 2.1\\right) \\cdot I\\left(X_{3} \\in\\{S\\}\\right) \\cdot I\\left(X_{7}&lt;4.5\\right) \\\\ &amp;R_{6}(X)=I\\left(X_{1} \\geq 2.1\\right) \\cdot I\\left(X_{3} \\in\\{S\\}\\right) \\cdot I\\left(X_{7} \\geq 4.5\\right) \\end{aligned}  <p>\u5173\u4e8e\u89c4\u5219 1,4,5 \u548c 6 \u7684\u7ebf\u6027\u56de\u5f52\u7b49\u4ef7\u4e8e\u6811\u672c\u8eab\uff08\u7ec3\u4e60 16.3 \uff09\uff1b\u56e0\u6b64 (16.14) \u662f\u8fd9\u68f5\u6811 \u8fc7\u5145\u5206 (over-complete) \u7684\u57fa. \u5bf9\u4e8e\u4e00\u4e2a ensemble \\mathcal{T}, \u6211\u4eec\u53ef\u4ee5\u6784\u9020\u89c4\u5219\u7684 mini-ensemble \\mathcal{T}_{R U L E}^{m}, \u5e76\u4e14\u7136\u540e\u7ed3\u5408\u5f62\u6210\u66f4\u5927\u7684 ensemble</p>  \\mathcal{T}_{R U L E}=\\bigcup_{m=1}^{M} \\mathcal{T}_{R U L E}^{m}  <p>\u7136\u540e\u50cf\u5176\u5b83 ensemble \u4e00\u6837\u5904\u7406, \u5e76\u4e14\u901a\u8fc7 lasso \u6216\u8005\u7c7b\u4f3c\u7684\u6b63\u5219\u5316\u8fc7\u7a0b\u8fdb\u884c post-processed.</p> <p>\u5bf9\u4e8e\u4ece\u66f4\u590d\u6742\u7684\u6811\u5bfc\u51fa\u89c4\u5219\u7684\u8fd9\u79cd\u65b9\u5f0f\u6709\u8bb8\u591a\u4f18\u70b9:</p> <ul> <li>\u6a21\u578b\u7a7a\u95f4\u88ab\u589e\u5927\u4e86, \u5e76\u4e14\u53ef\u4ee5\u5f97\u5230\u66f4\u597d\u7684\u8868\u73b0. Space of possible models enlaregd</li> <li>\u89c4\u5219\u6bd4\u6811\u66f4\u597d\u89e3\u91ca, \u6240\u4ee5\u6709\u66f4\u7b80\u5355\u6a21\u578b\u7684\u6f5c\u529b. Rules are easier to interpret than trees</li> <li>\u7ecf\u5e38\u901a\u8fc7\u5206\u5f00\u52a0\u5165\u53d8\u91cf X_{j} \u6765\u589e\u5e7f \\mathcal{T}_{R U L E}, \u56e0\u6b64\u5141\u8bb8 ensemble \u80fd\u591f\u5f88\u597d\u5730\u5efa\u7acb\u7ebf\u6027\u6a21\u578b.</li> </ul>"},{"location":"stat/Algo-MinCut-2SAT/","title":"basic","text":""},{"location":"stat/Algo-MinCut-2SAT/#_1","title":"\u76f8\u5173\u5b9a\u7406","text":"<p>Theorem 3.1 [Markov\u2019s Inequality]: Let X be a random variable that assumes only nonnegative values. Then, for all a&gt;0, $$ \\operatorname{Pr}(X \\geq a) \\leq \\frac{\\mathbf{E}[X]}{a} $$ Theorem 4.5 (\u6cca\u677e\u5b9e\u9a8c\u5f97\u5230\u671f\u671b\u7684\u6982\u7387): Let X_{1}, \\ldots, X_{n} be independent Poisson trials such that \\operatorname{Pr}\\left(X_{i}\\right)=p_{i}. Let X=\\sum_{i=1}^{n} X_{i} and \\mu=\\mathbf{E}[X]. Then, for 0&lt;\\delta&lt;1 : $$ \\begin{gathered} \\operatorname{Pr}(X \\leq(1-\\delta) \\mu) \\leq\\left(\\frac{\\mathrm{e}^{-\\delta}}{(1-\\delta)^{(1-\\delta)}}\\right)^{\\mu} \\end{gathered} \\tag{4.4} $$ $$ \\begin{gathered} \\operatorname{Pr}(X \\leq(1-\\delta) \\mu) \\leq \\mathrm{e}^{-\\mu \\delta^{2} / 2} \\end{gathered} \\tag{4.5} $$</p> <p>Again, the bound of Eqn. (4.4) is stronger than Eqn. (4.5). but the latter is generally easier to use and sufficient in most applications.</p> <p>Corollary 4.6: Let X_{1}, \\ldots, X_{n} be independent Poisson trials such that \\operatorname{Pr}\\left(X_{i}\\right)=p_{i}. Let X=\\sum_{i=1}^{n} X_{i} and \\mu=\\mathbf{E}[X] . For 0&lt;\\delta&lt;1, $$ \\operatorname{Pr}(|X-\\mu| \\geq \\delta \\mu) \\leq 2 \\mathrm{e}^{-\\mu \\delta^{2} / 3} . \\tag{4.6} $$ In practice we often do not have the exact value of \\mathbf{E}[X]. Instead we can use \\mu \\geq \\mathbf{E}[X] in Theorem 4.4 and \\mu \\leq \\mathbf{E}[X] in Theorem 4.5 (see Exercise 4.7).</p>"},{"location":"stat/Algo-MinCut-2SAT/#mincut-minimum-cut","title":"MinCut (Minimum Cut)","text":"<p>\u53c2\u89c1 here</p> <p>\u95ee\u9898\u5b9a\u4e49: \u6c42\u4e00\u4e2a\u65e0\u5411\u56fe\u7684\u6700\u5c0f\u5272 (\u4ee3\u4ef7\u4e3a\u8fb9\u7684\u6570\u91cf).</p> <p></p> <p>\u904d\u5386\u7684\u590d\u6742\u5ea6\u4e3a\u8fb9\u7684exp\u7ea7\u522b</p>"},{"location":"stat/Algo-MinCut-2SAT/#kargers-algorithm","title":"Karger\u2019s Algorithm","text":"<ul> <li>Edge Contraction \u8fb9\u6536\u7f29</li> </ul> <p>\u53bb\u6389\u4e00\u6761\u8fb9, \u4e24\u4e2a\u8282\u70b9\u5408\u4e00, \u4e24\u70b9\u76f8\u8fde\u8fb9\u4e4b\u5916\u7684\u5176\u4ed6\u8fb9\u4fdd\u6301\u4e0d\u53d8</p> <p></p> <ul> <li>Random Contraction Algorithm</li> </ul> <p>\u6bcf\u6b21\u90fd\u968f\u673a contract \u4e00\u6761\u8fb9, \u76f4\u5230\u53ea\u5269\u4e0b\u4e24\u4e2a\u8282\u70b9 (\u6bcf\u6b21\u70b9\u6570-1, \u56e0\u6b64\u4f1a\u8fed\u4ee3 n-2 \u6b21).</p> <p></p> <ul> <li>Karger\u2013Stein Algorithm</li> </ul> <p></p>"},{"location":"stat/Algo-MinCut-2SAT/#2-sat-cnf-conductive-normal-form","title":"2-SAT (CNF conductive normal form)","text":"<ul> <li>\u300aProbability and Computing\u300bch.7</li> </ul> <p>The general SAT problem is NP-hard. We analyze here a simple randomized algorithm for 2-SAT, a restricted case of the problem that is solvable in polynomial time. \u6765\u4e2a\u4f8b\u5b50: $$ \\left(x_{1} \\vee \\overline{x_{2}}\\right) \\wedge\\left(\\overline{x_{1}} \\vee \\overline{x_{3}}\\right) \\wedge\\left(x_{1} \\vee x_{2}\\right) \\wedge\\left(x_{4} \\vee \\overline{x_{3}}\\right) \\wedge\\left(x_{4} \\vee \\overline{x_{1}}\\right) \\tag{7.2} $$ \u9700\u8981\u6ee1\u8db3\u4e00\u7ec4 clause (\u4e0e), \u6bcf\u4e00\u4e2a\u6761\u4ef6\u662f\u4e24\u4e2a\u5143\u7d20\u7684\u6216 \u2014\u2014 \u56e0\u6b64\u5047\u5982\u4e00\u4e2a clause \u4e0d\u6ee1\u8db3, flip \u5176\u4e00\u4e00\u5b9a\u4f1a\u8ba9\u8be5 clause \u6ee1\u8db3.</p> <p></p> <p>\u4e0b\u9762\u6765\u7b97</p> <p>the probability that we decrease the number of matches is at most 1 / 2 . Hence, for 1 \\leq i \\leq n-1, $$ \\begin{aligned} &amp;\\operatorname{Pr}\\left(X_{i+1}=j+1 \\mid X_{i}=j\\right) \\geq 1 / 2 \\ &amp;\\operatorname{Pr}\\left(X_{i+1}=j-1 \\mid X_{i}=j\\right) \\leq 1 / 2 \\end{aligned} $$ The stochastic process X_{0}, X_{1}, X_{2}, \\ldots is not necessarily a Markov chain,  \u56e0\u4e3aX\u589e\u5927\u7684\u6982\u7387\u53d6\u51b3\u4e8e\u5f53\u524d\u6b65\u65f6, \u4e0d\u7b26\u5408\u7684clause\u548c\u9884\u671f\u7684S\u662f\u76f8\u5dee\u4e00\u4e2a\u8fd8\u662f\u4e24\u4e2a, \u56e0\u6b64\u548c\u8fc7\u53bb\u76f8\u5173.  \u8003\u8651\u4e00\u4e2a\u66f4\u574f\u7684\u60c5\u51b5/\u4e0b\u5c4a (Markov) Y_{0}, Y_{1}, Y_{2}, \\ldots : $$ \\begin{gathered} Y_{0} =X_{0}; \\ \\operatorname{Pr}\\left(Y_{i+1}=1 \\mid Y_{i}=0\\right)=1 ; \\ \\operatorname{Pr}\\left(Y_{i+1}=j+1 \\mid Y_{i}=j\\right)=1 / 2 ; \\ \\operatorname{Pr}\\left(Y_{i+1}=j-1 \\mid Y_{i}=j\\right)=1 / 2 . \\end{gathered} $$ \u518d\u5b9a\u4e49 h_i \u4e3a\u4ece\u5339\u914di\u4e2a\u7684\u72b6\u6001\u51fa\u53d1, \u5230\u8fbeS\u6240\u9700\u6b65\u6570\u7684\u671f\u671b. \u6613\u77e5 h_{n}=0 and h_{0}=h_{1}+1 \u5e76\u4e14 h_{j}=\\frac{h_{j-1}}{2}+\\frac{h_{j+1}}{2}+1, \\quad 1 \\leq j \\leq n-1; \u89c2\u5bdf, \u53ef\u77e5\u5bf9\u4e8e 0 \\le i \\le n-1 \u5747\u6709 h_{j}=h_{j+1}+2 j+1, \u56e0\u6b64\u6700\u574f\u60c5\u51b5\u4e0b (\u521d\u59cb\u548cS\u6ca1\u6709\u5339\u914d) \u6709 $$ h_{0}=h_{1}+1=h_{2}+1+3=\\cdots=\\sum_{i=0}^{n-1} 2 i+1=n^{2} $$ \u4e5f\u5373, \u5728\u6700\u574f\u60c5\u51b5\u4e0b, \u6211\u4eec\u671f\u671b\u7ecf\u8fc7 n^2 \u6b65\u5f97\u5230\u6b63\u786e\u7b54\u6848.</p> <p>\u6700\u7ec8, \u6211\u4eec\u53ef\u80fd\u5f97\u5230\u4ee5\u4e0b\u5b9a\u7406</p> <p>Theorem 7.2: The 2-SAT algorithm always returns a correct answer if the formula is unsatisfiable. If the formula is satisfiable, then with probability at least 1-2^{-m} the clgorithm returns a satisfying assignment. Otherwise, it incorrectly returns that the formula is unsatisfiable.</p> <p>\u7b2c\u4e00\u70b9\u663e\u7136. \u4e0b\u9762\u8ba1\u7b97\u5f53\u8be5\u95ee\u9898\u53ef\u884c\u65f6, \u4e0a\u8ff0\u7b97\u6cd5\u9519\u8bef\u8fd4\u56de false \u7684\u6982\u7387. \u6211\u4eec\u603b\u5171\u8fd0\u884c 2mnn \u6b21, \u5c06\u5176\u6309\u7167\u957f\u5ea6 2nn \u5212\u5206. \u7531\u4e8e\u6700\u574f\u60c5\u51b5\u4e0b, \u671f\u671b h_0=n^2, \u5229\u7528 Markov\u2019s inequality (\\mathrm{P}(X \\geq a) \\leq \\frac{\\mathrm{E}(X)}{a}), \u6709\u7ecf\u8fc7 2nn  \u6b21\u6ca1\u6709\u5f97\u5230\u6b63\u786e\u7b54\u6848\u7684\u6982\u7387\u4e3a \\operatorname{Pr}\\left(Z&gt;2 n^{2}\\right) \\leq \\frac{n^{2}}{2 n^{2}}=\\frac{1}{2}, \u56e0\u6b64, \u91cd\u590d m \u6b21\u90fd\u6ca1\u6709\u5f97\u5230\u6b63\u786e\u7b54\u6848\u7684\u6982\u7387\u4e3a 2^{-m}.</p>"},{"location":"stat/Algo-MinCut-2SAT/#the-monte-carlo-method","title":"The Monte Carlo Method","text":"<p>Theorem 10.1: Let X_{1}, \\ldots, X_{m} be independent and identically distributed indicator random variables, with \\mu=\\mathbf{E}\\left[X_{i}\\right]. If m \\geq(3 \\ln (2 / \\delta)) / \\varepsilon^{2} \\mu, then $$ \\operatorname{Pr}\\left(\\left|\\frac{1}{m} \\sum_{i=1}^{m} X_{i}-\\mu\\right| \\geq \\varepsilon \\mu\\right) \\leq \\delta . $$ That is, m samples provide an (\\varepsilon, \\delta)-approximation for \\mu.</p>"},{"location":"stat/Algo-MinCut-2SAT/#mc-pipi","title":"\u4e00\u4e2a\u4f8b\u5b50: \u7528MC\u4f30\u8ba1 \\pi","text":"<ul> <li>Ch10.1</li> </ul> <p>\u5728XY\u8f74 [-1,1] \u4e0a\u968f\u673a\u53d6\u503c, \u8bb0\u4e8b\u4ef6 Z \u4e3a\u70b9\u843d\u5728\u539f\u70b9\u4e3a\u5706\u5fc3\u7684\u5706\u4e2d (\u53ef\u77e5\u6982\u7387\u4e3a \\pi / 4). \u91cd\u590d m \u6b21, \u8bb0 W=\\sum_{i=1}^{m} Z_{i}, t\u5219\u6709 $$ \\mathbf{E}[W]=\\mathbf{E}\\left[\\sum_{i=1}^{m} Z_{i}\\right]=\\sum_{i=1}^{m} \\mathbf{E}\\left[Z_{i}\\right]=\\frac{m T}{4} . $$ \u56e0\u6b64\u53ef\u4ee5\u7528 W^{\\prime}=(4 / m) W i\u6765\u4f30\u8ba1 \\pi. Applying the Chernoff bound of Eqn. (4.6), we compute $$ \\operatorname{Pr}(|X-\\mu| \\geq \\delta \\mu) \\leq 2 \\mathrm{e}^{-\\mu \\delta^{2} / 3} \\tag{4.6} $$</p>  \\begin{aligned} \\operatorname{Pr}\\left(\\left|W^{\\prime}-\\pi\\right| \\geq \\varepsilon \\pi\\right) &amp;=\\operatorname{Pr}\\left(\\left|W-\\frac{m \\pi}{4}\\right| \\geq \\frac{\\varepsilon m \\pi}{4}\\right) \\\\ &amp;=\\operatorname{Pr}\\left(|W-\\mathbf{E}[W]| \\geq \\varepsilon \\mathbf{E}\\left[W^{\\prime}\\right]\\right) \\\\ &amp; \\leq 2 \\mathrm{e}^{-m \\pi \\varepsilon^{2} / 12} \\end{aligned}"},{"location":"stat/Algo-MinCut-2SAT/#application-the-dnf-counting-problenl","title":"Application: The DNF Counting Problenl","text":"<ul> <li>10.2</li> </ul> <p>\u95ee\u9898\u5b9a\u4e49: \u5206\u79bb disjunctive normal form (DNF). $$ \\left(x_{1} \\wedge \\overline{x_{2}} \\wedge x_{3}\\right) \\vee\\left(x_{2} \\wedge x_{4}\\right) \\vee\\left(\\overline{x_{1}} \\wedge x_2 \\wedge x_{3}\\right) $$ DNT \u8ba1\u6570\u4e00\u5b9a\u6bd4\u4e0a\u9762\u7684 SAT \u95ee\u9898 (\u4e5f\u53eb CNF, conductive normal form) \u66f4\u96be: \u56e0\u4e3a\u4e00\u4e2aDNF\u53d6\u53cd\u5c31\u662f\u4e00\u4e2aSAT\u95ee\u9898, \u56e0\u6b64\u53ea\u8981 \\text{\\#DNF} &lt; n SAT \u5c31\u53ef\u89e3.</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a naive \u7684\u89e3\u6cd5 (\u7c7b\u4f3c\u4e0a\u9762\u4f30\u8ba1\u5706\u5468\u7387\u7684\u4f8b\u5b50)</p> <p></p> <p>\u4e0b\u9762\u6765\u6539\u8fdb\u91c7\u6837\u7b56\u7565:\u5047\u8bbe\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\u7ec4\u662f F=C_{1} \\vee C_{2} \\vee \\cdots \\vee C_{1}, \u6613\u77e5\u5bf9\u4e8e clause C_{i} has \\ell_{i} literals, \u5b83\u5305\u62ec\u7684\u5143\u7d20\u7684\u53d6\u503c\u56fa\u5b9a\u4e86, \u56e0\u6b64\u5171\u6709 2^{n-\\ell_{i}} \u4e2a\u89e3. \u6211\u4eec\u5b9a\u4e49 U=\\left\\{(i , a) \\mid  l \\leq i \\leq t  \\quad \\text{and}\\quad a \\in S C_{i}\\right\\} \u5c31\u662f\u524d\u9762\u52a0\u4e86\u4e00\u4e2a index; \u56e0\u6b64\u8ba1\u6570\u4e0d\u53d8 \\sum_{i=1}^{t}\\left|S C_{i}\\right|=|U|. \u800c\u6211\u4eec\u771f\u6b63\u8981\u6c42\u7684\u662f SC\u7684\u4ea4\u96c6 c(F)=\\left|\\bigcup_{i=1}^{t} S C_{i}\\right|, \u4e3a\u6b64, \u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u96c6\u5408 $$ S=\\left{(i, a) \\mid 1 \\leq i \\leq t, a \\in S C_{i}, a \\notin S C_{j} \\text { for } j&lt;i\\right} $$ \u4e5f\u5373, \u7ed9\u6240\u6709\u7684SC\u5b9a\u4e49\u6307\u6807 (\u987a\u5e8f), \u5bf9\u4e8e\u6ee1\u8db3 SC_i \u7684\u89e3\u4e2d, \u53ea\u4fdd\u7559\u524d\u9762\u7ea6\u675f\u90fd\u4e0d\u6ee1\u8db3\u7684\u4f8b\u5b50, \u8fd9\u6837, S\u96c6\u5408\u7684\u5927\u5c0f\u5c31\u662f c(F). \u7531\u4e8e U\u96c6\u5408\u7684\u5927\u5c0f\u662f\u53ef\u4ee5\u8ba1\u7b97\u7684, \u4e3a\u4e86\u6c42 DNF\u8ba1\u6570 (S\u96c6\u5408\u5927\u5c0f), \u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97\u5b83\u4eec\u7684\u6bd4\u503c, MC\u6a21\u62df. \u5177\u4f53\u7b97\u6cd5\u5982\u4e0b</p> <p></p> <p>Theorem 10.2: DNF counting algorithm II is a fully polynomial randomized approximation scheme (F P R A S) for the DNF counting problem when m=\\left\\lceil\\left(3 t / \\varepsilon^{2}\\right) \\ln (2 / \\delta)\\right\\rceil.</p> <p>\u5229\u7528\u5230\u5f0f (4.6) \u6216\u5b9a\u7406 (10.1).</p>"},{"location":"stat/Algo-MinCut-2SAT/#approximation-algorithm","title":"approximation Algorithm","text":""},{"location":"stat/Algo-MinCut-2SAT/#min-vertex-cover","title":"min vertex cover \u8fb9\u8986\u76d6","text":"<ul> <li>min vertex cover \u95ee\u9898: G=(V,E), s \\subset V is VC if \\forall (u,v) \\in E, |\\{u,v\\} \\cup S| \\ge 1. \u4e5f\u5373\u8981\u6c42\u627e\u5230\u4e00\u4e2a\u70b9\u96c6, \u4f7f\u5176\u80fd\u591f\u8986\u76d6\u6240\u6709\u7684\u8fb9 (\u8fb9\u7684\u4e00\u4e2a\u70b9\u5728\u70b9\u96c6S\u4e2d\u5373\u53ef).</li> <li>\u53ef\u4ee5\u8bc1\u660e, \u8be5\u95ee\u9898\u4e3a NP</li> </ul> <p>\u76ee\u6807: \u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5 A, A(G) \\to S, \u8981\u6c42 \u8be5\u7b97\u6cd5\u662f \\alpha\\text{-Approx} \u7684, \u4e5f\u5373 \\frac{S}{OP}\\le \\alpha</p> <ul> <li>\u4e00\u79cd Greedy \u7b97\u6cd5: \u6bcf\u6b21\u9009\u62e9degree\u7684\u70b9. \u53ef\u4ee5\u8bc1\u660e\u8fd9\u4e00\u7b97\u6cd5\u662f \\log n\\text{-Approx} \u7684.</li> <li>\u6784\u9020\u4e00\u4e2a\u53cd\u4f8b: \u6709\u4e00\u4e2a\u957f\u5ea6\u4e3ak\u7684\u70b9\u96c6L, \u7136\u540e\u6784\u9020\u4e00\u7ec4\u70b9\u96c6 R_i, \u4f7f\u5f97 R_i \u4e2d\u5f97\u70b9\u90fd\u53ea\u548cL\u4e2d\u7684\u70b9\u76f8\u8fde, \u5ea6\u6570\u4e3ai, \u5e76\u4e14\u4efb\u610f\u4e24\u4e2a\u70b9\u4e0d\u4f1a\u8fde\u76f8\u540c\u7684\u4e00\u4e2aL\u4e2d\u7684\u70b9 (\u56e0\u6b64L\u4e2d\u70b9\u7684\u5ea6\u6570\u6700\u591a\u4e3ak).</li> <li>\u8fd9\u6837, \u7528 Greedy \u65b9\u6cd5\u6bcf\u6b21\u4f1a\u9009\u62e9 R_k, R_{k-1},..., \u800c\u6700\u4f18\u89e3\u662f\u70b9\u96c6L</li> <li>\u6784\u9020\u7684R_i\u70b9\u7684\u603b\u6570\u4e3a \\sum_{i=1}^k int(k/i) \\approx O(k\\log k)</li> </ul> <p>\u4e0b\u9762\u4ecb\u7ecd\u4e00\u79cd 2\\text{-approx} \u7684\u7b97\u6cd5.</p> <ul> <li>\u7b97\u6cd5: \u6bcf\u6b21\u9009\u62e9\u4e00\u6761\u8fb9, \u7136\u540e\u5c06\u4e24\u4e2a\u70b9\u4ece\u56fe\u4e2d\u5220\u53bb.</li> <li>\u53ef\u4ee5\u8bc1\u660e, \u82e5\u9009\u51fa\u6765\u7684\u70b9\u5927\u5c0f\u4e3a |S|=2t, \u5219VC\u95ee\u9898\u7684\u6700\u4f18\u89e3\u81f3\u5c11\u662ft \u2014\u2014 \u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u627e\u5230t\u7ec4\u6ca1\u6709\u5171\u4eab\u70b9\u7684\u8fb9\u4e86.</li> </ul>"},{"location":"stat/Algo-MinCut-2SAT/#max-sat","title":"Max-SAT","text":""},{"location":"stat/Algo-computation-%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA/","title":"\u8ba1\u7b97\u7406\u8bba","text":"<p>\u8ba1\u7b97\u7406\u8bba (\u4ee5\u4e0b\u5927\u7eb2 from MIT 6.045)</p> <ol> <li>Finite Automata: Simple Models</li> </ol> <p>DFAs, NFAs, regular languages, regular expressions, proving no DFA exists (non-regular languages), Myhill-Nerode Theorem, computing the minimum DFA, streaming algorithms, communication complexity</p> <ol> <li>Computability Theory: Powerful Models</li> </ol> <p>Turing Machines, Universal Models and the Church-Turing Thesis, decidable/recognizable languages, undecidability, reductions and oracles, Rice\u2019s theorem, Kolmogorov Complexity, even the foundations of mathematics (what can and can\u2019t be proved)\u2026</p> <ol> <li>Complexity Theory: Time and Space Bounded Models</li> </ol> <p>time complexity, classes P and NP, NP-completeness, polynomial time with oracles, space complexity, PSPACE, PSPACE-completeness, randomized complexity theory, other topics TBA</p> <p>reference:</p> <ul> <li>cources: MIT 6.045 Automata, Computability, and Complexity Theory.</li> <li>book Introduction To The Theory Of Computation, Michael Sipser</li> <li>\u5173\u8054: \u7f16\u8bd1\u539f\u7406</li> </ul> <p>wiki</p> <ul> <li>\u786e\u5b9a\u6709\u9650\u72b6\u6001\u81ea\u52a8\u673a DFA</li> <li>\u56fe\u7075\u673a</li> <li>\u9012\u5f52\u53ef\u679a\u4e3e\u8bed\u8a00/\u56fe\u7075\u53ef\u8bc6\u522b</li> <li>NP\u5b8c\u5168</li> </ul> <p>outline</p> <ul> <li>(\u786e\u5b9a) \u6709\u9650\u72b6\u6001\u81ea\u52a8\u673a DFA; Language;</li> <li>\u56fe\u7075\u673a (\u65e0\u9650\u7684\u7eb8\u5e26, \u53ef\u8bfb\u5199); \u56e0\u6b64\u662f\u7b97\u6cd5;<ul> <li>\u6ce8\u610f, \u56fe\u7075\u673a\u652f\u6301 accept \u65e0\u9650\u957f\u7684\u8f93\u5165 (\u4f8b\u5982 <code>{a}*</code> \u7c7b\u7684\u8f93\u5165)</li> <li></li> </ul> </li> <li>\u901a\u7528\u56fe\u7075\u673a (\u5c06\u63cf\u8ff0\u56fa\u5b9a\u89c4\u5219\u7684\u56fe\u7075\u673a\u8fdb\u884c\u7f16\u7801\u5b58\u50a8); Language of Turing Machines<ul> <li>\u6709\u7406\u8bba: The set of all Turing Machines is countable (\u5f15\u5165\u53ef\u6570, \u4ee5\u53ca\u4e00\u4e2a\u8bed\u8a00\u7684 enumerator \u7684\u6982\u5ff5)</li> <li>\u6ce8\u610f\u5230, \u5728\u7ed9\u5b9aAlphabet\u7684\u60c5\u51b5\u4e0b\u6240\u6709\u53ef\u80fd\u7684\u5b57\u7b26\u4e32\u662f\u65e0\u9650\u53ef\u6570\u7684, \u800cLanguages\u5219\u5bf9\u5e94\u4e86\u8fd9\u4e00\u65e0\u9650\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u5b50\u96c6 (\u5bf9\u5e94\u4e86\u4e00\u4e2a\u53ef\u8bc6\u522b\u8be5\u8bed\u8a00\u7684\u56fe\u7075\u673a). \u7136\u800c, \u6211\u4eec\u77e5\u9053\u65e0\u9650\u53ef\u6570\u96c6\u5408\u7684\u8d85\u96c6\u662f\u4e0d\u53ef\u6570\u7684, \u56e0\u6b64\u5b58\u5728\u56fe\u7075\u4e0d\u53ef\u8bc6\u522b\u7684\u8bed\u8a00. (\u56fe\u7075\u53ef\u8bc6\u522b\u7684\u8bed\u8a00\u79f0\u4e3a Turing-Acceptable / Turing-Recognizable / Recursively-enumerable)</li> </ul> </li> <li>\u9012\u5f52\u8bed\u8a00<ul> <li>(decidable / recursive) \u6ce8\u610f\u5230, Turing-Acceptable \u53ea\u9700\u8981 A language L is Turing-Acceptable if there is a Turing machine M that accepts L; \u800c\u53ef\u5224\u5b9a Turing-Decidable \u589e\u52a0\u4e86\u5bf9\u4e8e\u6240\u6709\u7684\u8f93\u5165\u90fd\u4f1a\u7ec8\u6b62\u4e4b\u4e00\u6761\u4ef6, A language L is decidable if there is a Turing machine (decider) which accepts L and halts on every input string, \u4e5f\u5373\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u5faa\u73af.</li> <li>\u6839\u636e\u5b9a\u4e49: Every decidable language is Turing-Acceptable</li> <li>\u603b\u7ed3\u4e00\u4e0b: \u56fe\u7075\u53ef\u5224\u5b9a\u8574\u542b\u4e86\u8be5\u8bed\u8a00\u662f\u56fe\u7075\u53ef\u8bc6\u522b\u7684, \u5e76\u4e14\u5b58\u5728\u56fe\u7075\u4e0d\u53ef\u8bc6\u522b\u7684\u8bed\u8a00, \u5982\u4e0b\u56fe. \u7136\u540e\u6784\u9020\u4e86\u4e00\u4e2a\u8bed\u8a00 L\u8bc1\u660e\u5176\u8865\u4e3a\u56fe\u7075\u4e0d\u53ef\u8bc6\u522b\u7684, \u5e76\u4e14\u7531\u4e8e\u300c\u53ef\u5224\u5b9a\u5219\u5176\u8865\u4e5f\u53ef\u5224\u5b9a\u300d\u7684\u7ed3\u8bba, \u8fdb\u4e00\u6b65\u8bf4\u660e \u5b58\u5728 acceptable \u4f46\u662f\u975e decidable \u7684\u8bed\u8a00 (\u6784\u9020\u65b9\u5f0f\u7c7b\u4f3c\u8bc1\u660e\u5b9e\u6570\u4e0d\u53ef\u6570).</li> <li></li> <li>Turing acceptable languages and Enumerators: \u6709\u4e24\u4e2a\u7ed3\u8bba<ul> <li>\u9996\u5148, \u6b63\u5f0f\u5b9a\u4e49 enumerator \u8fed\u4ee3\u5668\u4e3a: S \u4e3a\u67d0\u4e00\u8bed\u8a00 (a set of strings), \u5219 An enumerator for S is a Turing Machine that generates (prints on tape) all the strings of one by one and each string is generated in finite time. (\u91cd\u70b9\u5176\u5b9e\u5728\u7b2c\u4e8c\u70b9, \u56e0\u4e3a Acceptable \u7684\u56fe\u7075\u673a\u53ef\u80fd\u9677\u5165\u65e0\u9650\u5faa\u73af)</li> <li>(weak result) If a language is decidable then there is an enumerator for it</li> <li>(strong result) A language is Turing-acceptable if and only if there is an enumerator for it. \u8fd9\u91cc\u7684\u8bc1\u660e\u7528\u4e86\u4e00\u79cd\u7b56\u7565, \u4f7f\u5176\u53ef\u4ee5\u4f9d\u6b21\u751f\u6210\u6240\u6709\u65e0\u9650\u5e8f\u5217\u7684\u6bcf\u4e00\u4f4d, \u4ece\u800c\u300c\u907f\u514d\u300d\u4e86\u56e0\u4e3a\u6b7b\u5faa\u73af\u513f\u65e0\u6cd5\u8f93\u51fa\u4e0b\u4e00\u4e2a\u5e8f\u5217.</li> </ul> </li> <li>Undecidable Problems (unsolvable problems)<ul> <li>\u901a\u8fc7\u56fe\u7075\u673a\u7ed9\u51fa\u95ee\u9898 decidable/solvable \u7684\u5b9a\u4e49: A computational problem is decidable if the corresponding language is decidable.</li> <li>\u7ed9\u51fa\u4e24\u4e2a unsolvable \u7684\u95ee\u9898: Membership problem \u548c Halting problem</li> <li>\u8457\u540d\u7684\u505c\u673a\u95ee\u9898: \u6211\u4eec\u65e0\u6cd5\u5224\u65ad\u4e00\u4e2a\u56fe\u7075\u673a\u5bf9\u4e8e\u67d0\u4e00\u8f93\u5165\u662f\u5426\u53ef\u4ee5\u505c\u673a (\u8fd8\u662f\u9677\u5165\u6b7b\u5faa\u73af).<ul> <li>\u4e24\u79cd\u8bc1\u660e\u601d\u8def: 1. \u53cd\u8bc1\u6cd5, \u5373\u5047\u8bbe\u8be5\u95ee\u9898\u662f decidable \u7684, \u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u6b64\u56fe\u7075\u673a, \u5c06\u6240\u6709\u7684 acceptable \u53d8\u4e3a decidable, \u5373\u4e24\u8005\u7b49\u4ef7, \u77db\u76fe. 2. \u6784\u9020\u53cd\u4f8b, \u89c1 \u77e5\u4e4e\u7684\u8ba8\u8bba, \u7ed9\u51fa\u7684 \u8fd9\u4e2a\u94fe\u63a5 \u6068\u6570\u5b66.</li> <li></li> </ul> </li> <li>\u7c7b\u4f3c\u7684\u6210\u5458\u95ee\u9898: \u65e0\u6cd5\u5224\u65ad\u56fe\u7075\u673a\u662f\u5426\u63a5\u53d7\u4e00\u4e2a\u8f93\u5165.<ul> <li>\u8bc1\u660e\u601d\u8def\u662f\u7c7b\u4f3c\u7684: \u53cd\u8bc1\u6cd5, \u52a0\u5165\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u673a\u5668, \u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5b83\u6765\u907f\u514d\u6b7b\u5faa\u73af, \u4ece\u800c\u51fa\u73b0 <code>decidable = acceptable</code> \u7684\u6096\u8bba.</li> <li></li> </ul> </li> </ul> </li> </ul> </li> <li>\u65f6\u95f4\u590d\u6742\u5ea6<ul> <li>The Time Complexity Class P<ul> <li>P=\\bigcup_{k&gt;0} \\operatorname{TIME}\\left(n^{k}\\right)</li> <li>\u8868\u793a\u591a\u9879\u5f0f\u65f6\u95f4\u7684\u7b97\u6cd5 polynomial time algorithms, \u8fd9\u7c7b\u95ee\u9898\u662f \u201ctractable\u201d problems</li> </ul> </li> <li>Exponential time algorithms: \\operatorname{TIME}\\left(2^{n^{k}}\\right)<ul> <li>\u6307\u6570\u65f6\u95f4\u590d\u6742\u5ea6, Represent intractable algorithms</li> <li>\u4e00\u4e9b\u6307\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u95ee\u9898<ul> <li>the <code>Hamiltonian Path Problem</code> \u627e\u5230\u6709\u5411\u56fe\u4e0as\u5230t\u7684\u4e00\u6761\u54c8\u5bc6\u987f\u8def\u5f84</li> <li>The <code>clique problem</code> \u67e5\u627e\u56fe\u4e0a\u662f\u5426\u5b58\u5728\u5927\u5c0f\u4e3a k \u7684 clique</li> <li>The <code>Satisfiability Problem</code> \u5373\u95ee Boolean expressions in Conjunctive Normal Form \u662f\u5426\u5b58\u5728\u89e3. \u5f62\u5982 \\left(\\bar{x}_{1} \\vee x_{2}\\right) \\wedge\\left(x_{1} \\vee x_{3}\\right) \u7684\u4e00\u7ec4clause\u7684\u5e76, \u6bcf\u4e2aclause\u662f\u4e00\u7ec4\u53d8\u91cf\u7684\u6216.</li> </ul> </li> </ul> </li> <li>\u76f8\u8f83\u4e8e\u786e\u5b9a\u6027\u7684\u7b97\u6cd5, \u6211\u4eec\u53ef\u4ee5\u5f15\u5165\u4e0d\u786e\u5b9a\u6027. \u4e5f\u5373\u975e\u786e\u5b9a\u56fe\u7075\u673a. \u5bf9\u5e94\u7684, \u6211\u4eec\u7528 NTIME(T(n)) \u63cf\u8ff0\u5176\u65f6\u95f4\u590d\u6742\u5ea6.<ul> <li>Non-Deterministic Polynomial time algorithms: L \\in NTIME\\left(n^{k}\\right)</li> <li>The class NP: N P=\\bigcup_{k&gt;0} N \\operatorname{NIME}\\left(n^{k}\\right). \u4e5f\u5373\u5927\u540d\u9f0e\u9f0e\u7684 Non-Deterministic Polynomial time. (\u53ef\u7406\u89e3\u4e3a, \u6211\u4eec\u6ca1\u6709\u627e\u5230\u4e00\u4e2a\u591a\u9879\u5f0f\u7684\u89e3\u6cd5.) \u4e00\u4e2a\u4f8b\u5b50: \u5bf9\u4e8eSAT\u95ee\u9898, \u6211\u4eec\u5bf9\u5c1d\u8bd5\u5bf9\u4e8e\u53d8\u91cf\u8d4b\u503c(\u968f\u673a\u6027), \u7136\u540e\u68c0\u6d4b\u662f\u5426\u7b26\u5408.</li> </ul> </li> <li>\u6ce8\u610f\u5230, \u6211\u4eec\u6709 P \\subseteq N P . \u4e5f\u5373 Deterministic Polynomial \u88ab Non-Deterministic Polynomial \u5305\u542b.</li> <li>NP-complete Languages<ul> <li>\u5f15\u5165 \u5f52\u7ea6/reducible \u7684\u6982\u5ff5: Polynomial Time Reductions. \u9996\u5148, \u5bf9\u4e8e\u4e00\u4e2a\u51fd\u6570 f, \u5047\u5982\u80fd\u627e\u5230\u4e00\u4e2a deterministic Turing machine M, \u5bf9\u4e8e\u4efb\u610f\u7684\u8f93\u5165 w, \u53ef\u4ee5\u5728 O(|w|^k)\u200b \u7684\u65f6\u95f4\u5185\u5f97\u5230\u7b54\u6848, \u5219\u79f0\u8be5\u51fd\u6570\u4e3a\u591a\u9879\u5f0f\u53ef\u8ba1\u7b97\u7684 (Polynomial Computable function). \u76f4\u89c2\u7406\u89e3, \u8be5\u51fd\u6570\u662f\u786e\u5b9a\u7684\u5e76\u4e14\u590d\u6742\u5ea6\u4e0d\u9ad8. \u5728\u6b64\u57fa\u7840\u4e0a\u5f15\u5165\u5f52\u7ea6\u7684\u5b9a\u4e49:</li> <li>Language A is polynomial time reducible to language B if there is a polynomial computable function f such that: w \\in A \\Leftrightarrow f(w) \\in B . \u7b80\u8a00\u4e4b, \u4e24\u4e2a\u95ee\u9898\u4e4b\u95f4\u53ef\u4ee5\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u8f6c\u5316.</li> <li>\u5728\u6b64\u57fa\u7840\u4e0a, \u6709\u4e00\u4e2a\u663e\u7136\u7684\u5b9a\u7406: Suppose that A is polynomial reducible to B. If B \\in P then A \\in P.</li> <li>\u7ed9\u51fa\u4e00\u4e2a\u591a\u9879\u65f6\u95f4\u5185\u5f52\u7ea6\u7684\u4f8b\u5b50: \u5c06 <code>3CNF-satisfiability</code> \u95ee\u9898\u8f6c\u5316\u4e3a <code>CLIQUE</code> problem.<ul> <li>\u8f6c\u5316\u8fc7\u7a0b\u5982\u4e0b: \u7531\u4e8e\u6bcf\u4e00\u4e2aclause\u662f\u6216, \u53ea\u9700\u8981\u4e00\u4e2a\u5143\u7d20\u6ee1\u8db3\u5373\u53ef. \u5c06\u4e00\u4e2a\u5143\u7d20 x_i \u4e0e\u5176\u4ed6clause\u4e2d\u9664 \\bar{x_i} \u4e4b\u5916\u7684\u5143\u7d20\u76f8\u8fde, \u8fd9\u6837\u76f8\u8fde\u8282\u70b9\u4e4b\u524d\u548c\u4e0d\u51b2\u7a81\u7684. \u8fd9\u6837, \u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6c42clique\u7684\u95ee\u9898.</li> <li></li> </ul> </li> <li>\u8fdb\u4e00\u6b65\u5b9a\u4e49 NP-Complete: A language L is NP-complete if: 1) L is in NP, and 2) Every language in NP is reduced to L in polynomial time.<ul> <li>\u7406\u89e3: NP-Complete \u662f NP \u95ee\u9898\u4e2d\u76f8\u5bf9\u8f83\u96be\u7684\u4e00\u7c7b\u95ee\u9898.</li> <li>\u6ce8\u610f\u5230: If a NP-complete language is proven to be in P then: P = NP!</li> </ul> </li> <li>\u7406\u89e3\u4e09\u7c7b\u7684\u5173\u7cfb<ul> <li></li> </ul> </li> </ul> </li> <li>\u7ed9\u51fa\u4e00\u4e2aNPC\u7684\u4f8b\u5b50: SAT\u95ee\u9898<ul> <li>\u6ce8\u610f\u4e0b\u9762\u5c31\u7ed9\u4e86\u601d\u8def, \u5177\u4f53\u7684\u8bc1\u660e\u662f Cook Levin theo.</li> <li></li> <li></li> </ul> </li> <li>\u7c7b\u4f3cP\u95ee\u9898\u4e2d\u7684\u7ed3\u8bba, \u6211\u4eec\u6709\u5b9a\u7406: If: Language A is NP-complete Language B is in NP A is polynomial time reducible to B. Then: B is NP-complete. \u4e5f\u5373, \u4e3a\u4e86\u8bc1\u660e\u4e00\u4e2a\u95ee\u9898\u4e3aNPC, \u53ea\u9700\u8981\u5c06\u5176\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5df2\u77e5\u7684NPC\u95ee\u9898.</li> </ul> </li> <li>More NP-complete Problems: <code>Vertex-Cover</code> and <code>Hamiltonian-Path</code><ul> <li>Vertex Cover<ul> <li>\u5b9a\u4e49\u9876\u70b9\u8986\u76d6 Vertex Cover \u95ee\u9898: \u56fe\u4e0a\u7684\u4e00\u7ec4\u5927\u5c0f\u4e3a k\u7684\u8282\u70b9, \u8fd9\u4e9b\u8282\u70b9\u76f8\u8fde\u7684\u8fb9\u8986\u76d6\u4e86\u56fe\u4e0a\u6240\u6709\u7684\u8fb9.</li> <li>\u8bc1\u660e\u601d\u8def: 1) NP\u7684\u8bc1\u660e\u663e\u7136; 2) \u6211\u4eec\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u505a\u5f52\u7ea6 <code>3CNF-SAT</code> to VERTEX-COVER</li> </ul> </li> <li><code>Directed HAMILTONIAN-CYCLE</code><ul> <li>\u5b9a\u4e49: \u5728\u4e00\u4e2a\u6709\u5411\u56fe\u4e0a, \u627e\u5230\u4e00\u4e2a\u73af, \u80fd\u5426\u8bbf\u95ee\u6240\u6709\u8282\u70b9\u4e00\u6b21.</li> <li>\u8bc1\u660e: \u4e5f\u662f\u5c06 <code>3CNF-SAT</code> to D. HAMILTONIAN-CLCLE</li> </ul> </li> <li><code>Subset Sum</code> \u5b50\u96c6\u548c<ul> <li>\u7ed9\u5b9a\u4e00\u4e2a\u6570\u7ec4, \u5224\u65ad\u5176\u662f\u5426\u5b58\u5728\u5b50\u96c6\u4f7f\u5f97\u548c\u4e3a\u7ed9\u5b9a\u7684 k.</li> </ul> </li> <li>\u66f4\u591aNPC\u95ee\u9898: <code>Independent Set</code> (\u627e\u5230\u56fe\u4e0a\u5927\u5c0f\u4e3ak\u7684\u5b50\u96c6, \u4f7f\u5176\u4e92\u4e0d\u76f8\u8fde); <code>(undirected) HAMILTONIAN Cycle</code>; <code>KNAPSACK</code> \u80cc\u5305\u95ee\u9898, \u6709\u4e00\u7ec4\u7269\u54c1, \u6bcf\u4e2a\u7269\u54c1\u6709\u91cd\u91cfu\u548c\u4ef7\u503cv, \u8981\u6c42\u662f\u5426\u6709\u5b50\u96c6\u4f7f\u5f97 \\sum_{i \\in S} u_{i} \\leq U, \\quad \\sum_{i \\in S} v_{i} \\geq V.</li> </ul> </li> </ul>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/","title":"\u5dee\u5206\u9690\u79c1","text":"<ul> <li>\u77e5\u4e4e \u5361\u5175 | \u5dee\u5206\u9690\u79c1\u5408\u96c6</li> </ul> <p>wiki</p> <ul> <li>Differential privacy</li> </ul>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#_1","title":"\u6982\u5ff5\u4e0e\u5b9a\u4e49","text":"<p>Differential privacy is a definition (i.e., standard) of privacy</p> <p>It expresses a specific desiderata of an analysis: Any information-related risk to a person should not change significantly as a result of that person\u2019s information being included, or not, in the analysis. \u4e5f\u5373, \u65e0\u6cd5\u57fa\u4e8e\u6240\u7ed9\u7684\u7edf\u8ba1\u6570\u636e, \u5224\u65ad\u51fa\u4e00\u4e2a\u4eba\u662f\u5426\u51fa\u73b0\u5728\u8be5\u6570\u636e\u4e2d.</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#differential-privacy","title":"differential privacy \u5b9a\u4e49","text":"<p>[DWORK MCSHERRY NISSIM SMITH \u201906, \u201816]</p> <p>A (randomized) algorithm M: X^{n} \\rightarrow T satisfies \\epsilon-differential privacy if \\forall x, x^{\\prime} \\in X^{n} that differ on one entry, $$ M(x) \\approx_{\\epsilon} M\\left(x^{\\prime}\\right) $$ \u4e5f\u5373, differential privacy \u662f\u9488\u5bf9\u7b97\u6cd5\u800c\u8a00\u7684. \u5bf9\u4e8e\u4efb\u610f\u7f16\u8f91\u8ddd\u79bb\u4e3a\u4e00\u7684\u4e24\u7ec4\u6570\u636e, \u7b97\u6cd5\u7ed9\u51fa\u7684\u503c\u5728 \\epsilon \u8303\u56f4\u5185\u63a5\u8fd1.</p> <p>\u5982\u4f55\u5ea6\u91cf\u76f8\u4f3c\u6027? \\forall S subset of the outcome space T, $$ \\underset{M}{\\operatorname{Pr}}[M(x) \\in S] \\leq e^{\\epsilon} \\underset{M}{\\operatorname{Pr}}\\left[M\\left(x^{\\prime}\\right) \\in S\\right] $$ \u9664\u4e86\u539f\u672c\u7684 \\epsilon -differential privacy \u7684\u5b9a\u4e49\u4e4b\u5916, \u8fd8\u6709\u677e\u5f1b\u7248\u672c (\\epsilon, \\delta) -differential privacy, \u5b9a\u4e49\u4e3a $$ \\underset{M}{\\operatorname{Pr}}[M(x) \\in S] \\leq e^{\\epsilon} \\underset{M}{\\operatorname{Pr}}\\left[M\\left(x^{\\prime}\\right) \\in S\\right]+\\delta $$ \u8fd9\u91cc\u6307\u6570\u9879 \\epsilon \u8861\u91cf\u4e86 \u2018leakage\u2019 or \u2018harm\u2019, \u6570\u91cf\u7ea7\u5728 1/100, 1/10 \u5de6\u53f3, \u800c 0 \\leq \\delta \\ll \\frac{1}{n} (often, cryptographically small)</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#_2","title":"\u5b9a\u4e49\u7406\u89e3","text":"<ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u7279\u5b9a\u7684\u6570\u636e\u96c6\u5408S\u800c\u8a00, \u6211\u4eec\u5e0c\u671b\u5728\u5f15\u5165\u566a\u58f0\u4e4b\u540e, \u5c3d\u91cf\u4e0d\u6539\u53d8\u539f\u968f\u673a\u53d8\u91cf\u7684\u5206\u5e03. \u56e0\u6b64, \u8861\u91cf\u7684\u662f\u8ddd\u79bb, \u91c7\u7528 KL-Divergence D(Y \\| Z)=\\mathbb{E}_{y \\sim Y}\\left[\\ln \\frac{\\operatorname{Pr}[Y=y]}{\\operatorname{Pr}[Z=y]}\\right].</li> <li>\u6211\u4eec\u4e0d\u5173\u5fc3\u671f\u671b\u6c34\u5e73, \u800c\u5173\u6ce8\u5728\u53d6\u5230\u67d0\u4e00\u503c\u60c5\u51b5\u4e0b\u7684\u6539\u53d8\u6709\u591a\u5c11, \u56e0\u6b64\u7528 MAX-Divergence. \u56e0\u6b64, \u8f6c\u5316\u4e3a\u5982\u4e0b\u7684\u9700\u6c42:<ul> <li>D_{\\infty}(Y \\| Z)=\\max_{S \\subset S u p p(Y)}\\left[\\ln \\frac{\\operatorname{Pr}[Y \\in S]}{\\operatorname{Pr}[Z \\in S]}\\right]=\\max _{y \\in Y}\\left[\\ln \\frac{\\operatorname{Pr}[Y=y]}{\\operatorname{Pr}[Z=y]}\\right] \\leq \\varepsilon.</li> <li>\u6ce8\u610f\u8fd9\u91cc\u7684S\u662f\u67d0\u4e00\u6570\u636e\u96c6, \u800cy\u662f\u7279\u5b9a\u7684\u6570\u636e. \u800c\u6700\u540e\u7684\u4e0d\u7b49\u5f0f\u662f\u6211\u4eec\u5e0c\u671b\u8fd9\u4e00\u5dee\u5f02\u7684\u9608\u503c. \u6b64\u5f0f\u5373\u4e3a\u6211\u4eec\u4e0a\u9762\u7684\u5dee\u5206\u9690\u79c1\u5b9a\u4e49.</li> </ul> </li> </ul>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#renyi-divergence","title":"\u6570\u5b66: \u745e\u4e3d\u71b5\u548cRenyi Divergence","text":"<p>\u53c2\u89c1 R\u00e9nyi entropy \u548c \u535a\u6587. \u5bf9\u4e8e\u4e0a\u9762\u7684\u5f0f\u5b50\u8fdb\u884c\u4e86\u8bf4\u660e.</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#differentially-private-mechanisms","title":"\u673a\u5236 differentially private mechanisms","text":"<p>\u9996\u5148\u5b9a\u4e49 Sensitivity \u654f\u611f\u5ea6: \u8868\u793a\u5bf9\u4e8e\u4efb\u610f\u7f16\u8f91\u8ddd\u79bb\u4e3a1\u7684\u6570\u636e\u96c6, \u5b83\u4eec\u7684\u67e5\u8be2\u7ed3\u679c\u7684\u6700\u5927\u5dee\u503c. $$ \\Delta f=\\max {D, D^{\\prime}}\\left|f(D)-f\\left(D^{\\prime}\\right)\\right| $$ \u6ce8\u610f\u8fd9\u91cc\u7528\u4e86L1\u8303\u6570 (\u5339\u914dLaplace\u673a\u5236), \u4f46\u662f\u8ddd\u79bb\u7684\u5b9a\u4e49\u53ef\u4ee5\u662f\u5176\u4ed6\u7684, \u4f8b\u5982 L2\u8303\u6570\u53ef\u4ee5\u5bf9\u5e94\u9ad8\u65af\u673a\u5236.</p> <p>\u53c2\u89c1</p> <ul> <li>Differential privacy<ul> <li>Additive noise mechanisms; Exponential mechanism</li> </ul> </li> </ul>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#the-laplace-mechanism","title":"The Laplace mechanism","text":"<p>\u6240\u8c13\u7684 Laplace \u673a\u5236, \u5c31\u662f\u5728\u6570\u503c\u7ed3\u679c\u7684\u57fa\u7840\u4e0a\u52a0\u4e00\u4e2a Laplace \u566a\u58f0\u9879 (\u56e0\u6b64\u5c5e\u4e8e Additive noise mechanisms) $$ \\mathcal{M}{\\mathrm{Lap}}(x, f, \\epsilon)=f(x)+\\operatorname{Lap}\\left(\\mu=0, b=\\frac{\\Delta f}{\\epsilon}\\right) $$ \u6ce8\u610f\u5230\u566a\u58f0\u9879\u7684\u65b9\u5dee\u4e3a \u654f\u611f\u5ea6/\u8bef\u5dee\u9608\u503c. \u8bc1\u660e\u5982\u4e0b: \u8fd9\u91cc\u7684\u7b2c\u4e00\u4e2a\u4e0d\u7b49\u5f0f\u7528\u4e86\u4e09\u89d2\u4e0d\u7b49\u5f0f; \u7b2c\u4e8c\u4e2a\u5219\u662f\u654f\u611f\u5ea6\u7684\u5b9a\u4e49. $$ \\begin{aligned} \\frac{\\operatorname{Pr}\\left(\\mathcal{M} \\ &amp;=\\frac{\\operatorname{Pr}\\left(\\operatorname{Lap}\\left(0, \\frac{\\Delta f}{\\epsilon}\\right)=z-f(x)\\right)}{\\operatorname{Pr}\\left(\\operatorname{Lap}\\left(0, \\frac{\\Delta f}{\\epsilon}\\right)=z-f(y)\\right)} \\ &amp;=\\frac{\\frac{1}{2 b} \\exp \\left(-\\frac{|z-f(x)|}{b}\\right)}{\\frac{1}{2 b} \\exp \\left(-\\frac{|z-f(y)|}{b}\\right)} \\ &amp;=\\exp \\left(\\frac{|z-f(y)|-|z-f(x)|}{b}\\right) \\ &amp; \\leq \\exp \\left(\\frac{|f(y)-f(x)|}{b}\\right) \\ &amp; \\leq \\exp \\left(\\frac{\\Delta f}{b}\\right)=\\exp (\\epsilon) \\end{aligned} $$ \u53e6\u5916, \u67e5\u8be2\u7684\u7ed3\u679c\u4e5f\u4e0d\u4e00\u5b9a\u662fscale, \u53ef\u4ee5\u662f\u5411\u91cf, \u6b64\u65f6\u8bef\u5dee\u9879\u4e3a\u591a\u4e2a\u72ec\u7acb\u7684Laplace\u566a\u58f0, \u8ddd\u79bb\u5ea6\u91cf\u4e3a1\u8303\u6570.}}(x, f, \\epsilon)=z\\right)}{\\operatorname{Pr}\\left(\\mathcal{M}_{\\text {Lap }}(y, f, \\epsilon)=z\\right)} &amp;=\\frac{\\operatorname{Pr}\\left(f(x)+\\operatorname{Lap}\\left(0, \\frac{\\Delta f}{\\epsilon}\\right)=z\\right)}{\\operatorname{Pr}\\left(f(y)+\\operatorname{Lap}\\left(0, \\frac{\\Delta f}{\\epsilon}\\right)=z\\right)</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#gaussian-mechanism","title":"Gaussian Mechanism","text":"<ul> <li>\u6ce8\u610f, \u7528Laplace\u673a\u5236\u5bf9\u5e94\u4e86\u4e25\u683c\u7684DP, \u800c\u8fd9\u91cc\u5bf9\u5e94\u7684\u662f  (\\epsilon, \\delta)-differential privacy.<ul> <li>\u53e6\u5916, \u8fd9\u91cc\u7684\u9690\u79c1\u9884\u7b97\u9700\u8981\u6ee1\u8db3 \\epsilon &lt; 1</li> </ul> </li> <li>\u53e6\u5916, \u4e0b\u9762\u9ad8\u65af\u8bef\u5dee\u7684\u65b9\u5dee\u9879\u53ea\u8981\u53d6\u4efb\u610f\u6bd4\u8be5\u65b9\u5dee\u9879\u66f4\u5927\u7684\u503c\u5373\u53ef. (\u82e5\u66f4\u5c0f\u7684\u8bdd\u6982\u7387\u8fc7\u4e8e\u96c6\u4e2d)<ul> <li>\u76f8\u8f83\u4e8eLaplace\u673a\u5236\u4e2d\u7684\u8bef\u5dee\u65b9\u5dee \\Delta ^2f / \\epsilon^2, \u8fd9\u91cc\u7684\u65b9\u5dee\u66f4\u5927, \u4f53\u73b0\u51fa\u4e86\u677e\u5f1b\u9879\u7684\u4f5c\u7528.</li> </ul> </li> </ul> <p>$$ \\mathcal{M}_{\\text {Gauss }}(x, f, \\epsilon, \\delta)=f(x)+\\mathcal{N}\\left(\\mu=0, \\sigma^{2}=\\frac{2 \\ln (1.25 / \\delta) \\cdot(\\Delta f)^{2}}{\\epsilon^{2}}\\right) $$ provides (\\epsilon, \\delta)-differential privacy.</p> <p>\u5177\u4f53\u7684\u8bc1\u660e\u6bd4\u8f83\u957f, \u89c1\u4e66Appendix.A. \u5927\u4f53\u5982\u4e0b:</p> <p>\u6ce8\u610f\u5230\u677e\u5f1bDP\u7684\u610f\u4e49: \u662f\u5e0c\u671b\u4e0d\u6ee1\u8db3DP\u7684\u6982\u7387\u8981\u5c0f\u4e8e \\delta, \u4e5f\u5373 privacy loss bounded by \\varepsilon with probability at least 1-\\delta ; \u56e0\u6b64, \u662f\u5e0c\u671b \\operatorname{Pr}\\left[|x| \\geq \\sigma^{2} \\varepsilon / \\Delta f-\\Delta f / 2\\right]&lt;\\delta. \u6700\u540e\u7b97\u51fa\u6765\u7684\u65b9\u5dee\u5f62\u5f0f\u6b63\u5982\u4e0a. \u7136\u540e, \u5bf9\u4e8e\u4efb\u610f\u7684\u67e5\u8be2\u96c6\u5408S, \u6211\u4eec\u5229\u7528\u8fd9\u91cc\u5b9a\u4e49\u51fa\u6765\u7684\u8fb9\u754c, \u53ef\u4ee5\u5c06\u5176\u5206\u4e3a\u4e24\u90e8\u5206. \u957f\u5c3e\u90e8\u5206\u7684S2\u7684\u6982\u7387\u4e0d\u4f1a\u8d85\u8fc7\u9519\u8bef\u7387\u9608\u503c \\delta, \u800c\u4e2d\u95f4\u90e8\u5206S1\u7b26\u5408\u4e25\u683cDP\u5b9a\u4e49.</p> <p>Let us parition \\mathbb{R} as \\mathbb{R}=R_{1} \\cup R_{2}, where R_{1}=\\{x \\in \\mathbb{R}:|x| \\leq c \\Delta f / \\varepsilon\\} and R_{2}=\\{x \\in \\mathbb{R}:|x|&gt;c \\Delta f / \\varepsilon\\} . Fix any subset S \\subseteq \\mathbb{R}, and define $$ \\begin{aligned} &amp;S_{1}=\\left{f(x)+x \\mid x \\in R_{1}\\right} \\ &amp;S_{2}=\\left{f(x)+x \\mid x \\in R_{2}\\right} . \\end{aligned} $$ We have $$ \\begin{aligned} \\operatorname{Pr}{x \\sim \\mathcal{N}\\left(0, \\sigma^{2}\\right)}[f(x)+x \\in S]=&amp; \\operatorname{Pr}\\right] \\ &amp;+\\operatorname{Pr}}\\left(0, \\sigma^{2}\\right)}\\left[f(x)+x \\in S_{1{x \\sim \\mathcal{N}\\left(0, \\sigma^{2}\\right)}\\left[f(x)+x \\in S\\right] \\ \\leq &amp; \\operatorname{Pr}{x \\sim \\mathcal{N}\\left(0, \\sigma^{2}\\right)}\\left[f(x)+x \\in S\\right]+\\delta \\ \\leq &amp; e^{\\varepsilon}\\left(\\operatorname{Pr}{x \\sim \\mathcal{N}\\left(0, \\sigma^{2}\\right)}\\left[f(y)+x \\in S\\right]\\right)+\\delta \\end{aligned} $$ yielding (\\varepsilon, \\delta)-differential privacy for the Gaussian mechanism in one dimension.</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#exponential-mechanism","title":"Exponential mechanism","text":"<p>\u76f8\u8f83\u4e8e\u524d\u4e24\u79cd\u673a\u5236\u4ec5\u80fd\u7528\u5728\u8fde\u7eed\u7684\u67e5\u8be2\u7ed3\u679c\u4e0a, \u8fd9\u91cc\u5bf9\u4e8eDP\u7684\u53ef\u7528\u8303\u56f4\u8fdb\u884c\u62d3\u5c55 (\u8f93\u51fa\u4e3a\u79bb\u6563).</p> <ul> <li>\u5728\u79bb\u6563\u60c5\u51b5\u4e0b, \u6211\u4eec\u4e0d\u80fd\u628a\u566a\u58f0\u52a0\u8f7d\u7ed3\u679c\u4e0a, \u600e\u4e48\u529e? \u663e\u7136\u8f93\u51fa\u5e94\u8be5\u662f\u5728\u5b9a\u4e49\u57df\u4e0a\u7684\u4e00\u4e2a\u5206\u5e03.</li> <li>\u5982\u4f55\u751f\u6210\u8fd9\u4e2a\u5206\u5e03? \u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5bf9\u4e8e\u4efb\u610f\u8f93\u5165\u548c\u8f93\u51fa\u7ec4\u5408 (x,r) \u7684\u6253\u5206\u51fd\u6570, \u7136\u540e\u7528\u8fd9\u4e2a\u5206\u6570\u7684\u6307\u6570\u503c\u4f5c\u4e3a\u6982\u7387\u6765\u751f\u6210\u7ed3\u679c.</li> <li>\u7c7b\u4f3c\u7684, \u6211\u4eec\u5148\u5b9a\u4e49 \u654f\u611f\u5ea6:</li> </ul>  \\Delta u \\equiv \\max _{r \\in \\mathcal{R}} \\max _{x, y:\\|x-y\\|_{1} \\leq 1}|u(x, r)-u(y, r)|  <p>\u7136\u540e\u57fa\u4e8e\u654f\u611f\u5ea6\u548c\u9690\u79c1\u9884\u7b97, \u751f\u6210\u8f93\u51fa\u6982\u7387:</p> <p>Definition 3.4 (The Exponential Mechanism). The exponential mechanism \\mathcal{M}_{E}(x, u, \\mathcal{R}) selects and outputs an element r \\in \\mathcal{R} with probability proportional to \\exp \\left(\\frac{\\varepsilon u(x, r)}{2 \\Delta u}\\right).</p> <p>\u8bc1\u660e\u5982\u4e0b: $$ \\begin{aligned} \\frac{\\operatorname{Pr}\\left[\\mathcal{M}{E}(x, u, \\mathcal{R})=r\\right]}{\\operatorname{Pr}\\left[\\mathcal{M} \\ =&amp;\\left(\\frac{\\exp \\left(\\frac{\\varepsilon u(x, r)}{2 \\Delta u}\\right)}{\\exp \\left(\\frac{\\varepsilon u(y, r)}{2 \\Delta u}\\right)}\\right) \\cdot\\left(\\frac{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(y, r^{\\prime}\\right)}{2 \\Delta u}\\right)}{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(x, r^{\\prime}\\right)}{2 \\Delta u}\\right)}\\right) \\ =&amp; \\exp \\left(\\frac{\\varepsilon\\left(u\\left(x, r^{\\prime}\\right)-u\\left(y, r^{\\prime}\\right)\\right)}{2 \\Delta u}\\right) \\cdot\\left(\\frac{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(y, r^{\\prime}\\right)}{2 \\Delta u}\\right)}{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(x, r^{\\prime}\\right)}{2 \\Delta u}\\right)}\\right) \\ \\leq &amp; \\exp \\left(\\frac{\\varepsilon}{2}\\right) \\cdot \\exp \\left(\\frac{\\varepsilon}{2}\\right) \\cdot\\left(\\frac{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(x, r^{\\prime}\\right)}{2 \\Delta u}\\right)}{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(x, r^{\\prime}\\right)}{2 \\Delta u}\\right)}\\right) \\ =&amp; \\exp (\\varepsilon) . \\end{aligned} $$ \u5176\u4e2d\u4e0d\u7b49\u5f0f\u4e2d, \u7b2c\u4e00\u9879\u7528\u4e86\u654f\u611f\u5ea6\u7684\u5b9a\u4e49, \u7b2c\u4e8c\u9879\u5bf9\u4e8e\u5206\u5b50\u8fdb\u884c\u4e86\u653e\u7f29 $$ \\begin{aligned} &amp;\\text { }=\\left(\\frac{\\sum_{r^{\\prime}} \\exp \\left(\\frac{\\epsilon q\\left(D^{\\prime}, r^{\\prime}\\right)}{2 \\Delta}\\right)}{\\sum_{r^{\\prime}} \\exp \\left(\\frac{\\epsilon q\\left(D, r^{\\prime}\\right)}{2 \\Delta}\\right)}\\right) \\leq \\left(\\frac{\\sum_{r^{\\prime}} \\exp \\left(\\frac{\\epsilon\\left(q\\left(D, r^{\\prime}\\right)+\\Delta\\right)}{2 \\Delta}\\right)}{\\sum_{r^{\\prime}} \\exp \\left(\\frac{\\epsilon q\\left(D, r^{\\prime}\\right)}{2 \\Delta}\\right)}\\right)=\\ &amp;=\\left(\\frac{\\exp \\left(\\frac{\\epsilon}{2}\\right) \\sum_{r^{\\prime}} \\exp \\left(\\frac{\\epsilon q\\left(D, r^{\\prime}\\right)}{2 \\Delta}\\right)}{\\sum_{r} \\exp \\left(\\frac{\\epsilon q\\left(D, r^{\\prime}\\right)}{2 \\Delta}\\right)}\\right)=\\exp \\left(\\frac{\\epsilon}{2}\\right) \\end{aligned} $$ }(y, u, \\mathcal{R})=r\\right]}=&amp; \\frac{\\left(\\frac{\\exp \\left(\\frac{\\varepsilon u(x, r)}{2 u}\\right)}{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(x, r^{\\prime}\\right)}{2 \\Delta u}\\right)}\\right)}{\\left(\\frac{\\exp \\left(\\frac{\\varepsilon u(y, r)}{2 u}\\right)}{\\sum_{r^{\\prime} \\in \\mathcal{R}} \\exp \\left(\\frac{\\varepsilon u\\left(y, r^{\\prime}\\right)}{2 \\Delta u}\\right)}\\right)\u8fd9\u91cc \u7ed9\u51fa\u4e86\u4e00\u4e2a\u79bb\u6563\u5206\u5e03\u4e0b\u7684\u4f8b\u5b50 (\u67e5\u8be2\u4e09\u79cd\u75be\u75c5\u4e2d\u5f97\u75c5\u4eba\u6570\u6700\u591a\u7684\u90a3\u4e00\u79cd). 1) \u6253\u5206\u51fd\u6570\u8bbe\u7f6e\u4e3a\u8be5\u79cd\u75be\u75c5\u5bf9\u5e94\u7684\u4eba\u6570; 2) \u654f\u611f\u5ea6\u663e\u7136\u4e3a1 (\u5dee\u4e00\u4e2a\u4eba\u7684\u6570\u636e\u96c6, \u9020\u6210\u7684\u8ba1\u6570\u6700\u591a\u5dee1); 3) \u9690\u79c1\u9884\u7b97 \\epsilon \u53ef\u4ee5\u53d6\u4e0d\u540c\u7684\u503c, \u4f8b\u5982 1. \u4ece\u6307\u6570\u673a\u5236\u7684\u7ed3\u679c\u6765\u770b, \\epsilon \u8bbe\u7f6e\u7684\u8d8a\u5927, \u8f93\u51fa\u7ed3\u679c\u4e3a\u771f\u7684\u6982\u7387\u4e5f\u8d8a\u5927.</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#composition-theorems","title":"Composition theorems \u67e5\u8be2\u7684\u7ec4\u5408","text":""},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#sequential-parallel","title":"\u57fa\u672c\u7ec4\u5408: Sequential &amp; Parallel","text":"<ul> <li>\u6bd4\u8f83\u76f4\u89c2, \u5982\u4e0b\u9762\u4e24\u6761\u79f0\u8ff0</li> <li>Sequential: \u5982\u679c\u591a\u6b21\u67e5\u8be2\u9488\u5bf9\u7684\u662f\u540c\u4e00\u6570\u636e, \u5b83\u4eec\u4e4b\u95f4\u6ee1\u8db3\u7ebf\u6027\u5173\u7cfb.</li> <li>Parallel: \u5982\u679c\u591a\u6b21\u67e5\u8be2\u7528\u7684\u662f\u4e0d\u7528\u7684\u6570\u636e, \u5219\u4e92\u4e0d\u76f8\u5173. \u82e5\u6240\u6709\u7684\u9608\u503c\u5747\u4e3a \\epsilon, \u5219\u8be5\u503c\u4e0d\u53d8; \u5426\u5219, \u8fd9\u4e9b\u67e5\u8be2\u63d0\u4f9b\u4e86 \\left(\\max _{i} \\varepsilon_{i}\\right)-differentially private.</li> </ul> <p>THEOREM 3. Let M_{i} each provide \\epsilon_{i}-differential privacy. The sequence of M_{i}(X) provides \\left(\\sum_{i} \\epsilon_{i}\\right)-differential privacy.</p> <p>THEOREM 4. Let M_{i} each provide \\epsilon-differential privacy. Let D_{i} be arbitrary disjoint subsets of the input domain D. The sequence of M_{i}\\left(X \\cap D_{i}\\right) provides \\epsilon-differential privacy.</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#advanced-composition","title":"Advanced Composition","text":""},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#_3","title":"\u5b9e\u9a8c\u8bbe\u7f6e","text":"<p>\u9996\u5148\u9700\u8981\u5b9a\u4e49\u5b9e\u9a8c\u8bbe\u7f6e/\u76ee\u6807. \u4f8b\u5982\u6709\u4e00\u4e2a\u653b\u51fb\u8005A\u53ef\u4ee5\u6267\u884ck\u6b21\u67e5\u8be2, \u4ed6\u7684\u76ee\u6807\u662f\u6839\u636e\u67e5\u8be2\u7ed3\u679c, \u5224\u65ad\u4ebab\u662f\u5426\u51fa\u73b0\u5728\u7edf\u8ba1\u6570\u636e\u96c6\u4e2d.</p> <p></p> <p>\u4e0b\u9762\u5206\u522b\u6765\u770b\u4e24\u8005DP\u4e0b\u7684\u7ec4\u5408\u7ed3\u679c:</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#navie-composition-throrem","title":"Navie Composition Throrem","text":"<ul> <li>\u5bf9\u4e8e \\epsilon- DP, \u5176\u6240\u80fd\u4fdd\u969c\u7684\u9690\u79c1\u9608\u503c\u968f\u7740k\u7ebf\u6027\u589e\u957f.</li> </ul> <p>Theorem 1 The class of \\epsilon-differentially private mechanisms satisfies k \\epsilon-differential privacy under k-fold adaptive composition. Proof A view of the adversary is a tuple v=\\left(r, y_{1}, \\ldots, y_{k}\\right). We have: $$ \\begin{aligned} \\frac{\\operatorname{Pr}\\left[V^{0}=v\\right]}{\\operatorname{Pr}\\left[V^{1}=v\\right]} &amp;=\\left(\\frac{\\operatorname{Pr}\\left[R^{0}=r\\right]}{\\operatorname{Pr}\\left[R^{1}=r\\right]}\\right) \\cdot \\prod_{i=1}^{k} \\frac{\\operatorname{Pr}\\left[Y_{i}^{0}=y_{i} \\mid Y_{1}^{0}=y_{1}, \\ldots, Y_{i-1}^{0}=y_{i-1}\\right]}{\\operatorname{Pr}\\left[Y_{i}^{1}=y_{i} \\mid Y_{1}^{1}=y_{1}, \\ldots, Y_{i-1}^{1}=y_{i-1}\\right]} \\ &amp; \\leq \\prod_{i=1}^{k} \\exp (\\epsilon) \\ &amp;=\\exp (k \\epsilon) \\end{aligned} $$</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#strong-composition-throrem","title":"Strong Composition Throrem","text":"<ul> <li>\u7136\u540e\u770b  (\\epsilon, \\delta) \u7684\u7ed3\u679c</li> <li>\u89c2\u5bdf\u4e0b\u5f0f, \u5f53 \\epsilon \u6570\u91cf\u7ea7\u8f83\u5c0f\u65f6 (\u4f8b\u5982 -5\u7ea7\u522b) \u7b2c\u4e8c\u9879\u53ef\u4ee5\u5ffd\u7565, \u56e0\u6b64\u57fa\u672c\u4e0a\u5448\u73b0 O(\\sqrt{k}) \u7ea7\u522b\u7684\u589e\u957f. \u8fd9\u6837\u6765\u770b\u8981\u6bd4 \\epsilon- DP\u4e0b\u66f4\u597d</li> <li>\u8bc1\u660e\u89c1\u4e66, \u5ffd\u7565.</li> </ul> <p>Theorem 3.20 (Advanced Composition). For all \\varepsilon, \\delta, \\delta^{\\prime} \\geq 0, the class of (\\varepsilon, \\delta)-differentially private mechanisms satisfies \\left(\\varepsilon^{\\prime}, k \\delta+\\delta^{\\prime}\\right)-differential privacy under k-fold adaptive composition for: $$ \\varepsilon^{\\prime}=\\sqrt{2 k \\ln \\left(1 / \\delta^{\\prime}\\right)} \\varepsilon+k \\varepsilon\\left(e^{\\varepsilon}-1\\right) $$</p>"},{"location":"stat/Algo-differential-privacy-%E5%B7%AE%E5%88%86%E9%9A%90%E7%A7%81/#moments-accountant","title":"Moments Accountant","text":""},{"location":"stat/Algo-graph-Adjacency-Laplacian/","title":"\u56fe\u76f8\u5173, Laplacian","text":""},{"location":"stat/Algo-graph-Adjacency-Laplacian/#adjacency-matrix","title":"\u90bb\u63a5\u77e9\u9635 Adjacency matrix","text":""},{"location":"stat/Algo-graph-Adjacency-Laplacian/#spectral-theorem-of-real-symmetric-matrices","title":"Spectral Theorem of real symmetric matrices \u5b9e\u5bf9\u79f0\u77e9\u9635\u7684\u6027\u8d28","text":"<ul> <li>\u53c2\u89c1 Eigendecomposition of a matrix; Spectral theorem.</li> </ul> <p>Theorem 1(spectral theorem). Any real symmetric matrix A \\in \\mathbb{R}^{n \\times n} has n unit orthogonal eigenvectors \\Phi_{1}, \\Phi_{2}, \\cdots, \\Phi_{n} corresponding to n real eigenvalues \\alpha_{1} \\geq \\alpha_{2} \\geq \\cdots \\geq \\alpha_{n}, which means A can be decomposed as $$ A=\\sum_{i=1}^{n} \\alpha_{1} \\Phi_{i} \\Phi_{i}^{T} $$ Theorem 2. For any real symmetric matrix A \\in \\mathbb{R}^{n \\times n} with eigenvalues \\alpha_{1} \\geq \\alpha_{2} \\geq \\cdots \\geq \\alpha_{n}, it holds that $$ \\alpha_{1}=\\max {x \\in \\mathbb{R}^{n}} \\frac{x^{T} A x}{x^{T} x} $$ Similarly $$ \\alpha $$ Moreover, }=\\min_{x \\in \\mathbb{R}^{n}} \\frac{x^{T} A x}{x^{T} x\\Phi_{1} maximize the Rayleigh quotient and \\Phi_{n} minimize the Rayleigh quotient.</p> <p>\u4e0a\u9762\u7b2c\u4e00\u6761\u5b9a\u7406, \u5373\u5b9e\u5bf9\u79f0\u77e9\u9635\u7684\u6b63\u4ea4\u5206\u89e3. \u7b2c\u4e8c\u6761\u5b9a\u7406\u5219\u8bf4\u660e, \u5b9e\u5bf9\u9635\u77e9\u9635\u7684\u7279\u5f81\u503c\u7ed9\u5b9a\u4e86\u8be5\u77e9\u9635\u6240\u5bf9\u5e94\u7684\u745e\u4e3d\u5546\u4e0a\u754c\u9650.</p>"},{"location":"stat/Algo-graph-Adjacency-Laplacian/#largest-eigenvalue","title":"\u90bb\u63a5\u77e9\u9635\u7684 Largest eigenvalue","text":"<p>\u4e0b\u9762\u7684\u5b9a\u7406\u8bf4\u660e, \u90bb\u63a5\u77e9\u9635\u7684\u6700\u5927\u7279\u5f81\u503c\u4e0e\u8282\u70b9\u7684\u5ea6\u6570\u76f8\u5173. \u5f53 \\alpha_{1}=d_{\\max } \u65f6, \u8bf4\u660e\u8be5\u56fe\u7684\u5ea6\u5206\u5e03\u662f\u5b8c\u5168\u76f8\u540c\u7684 (\u4e5f\u5373 regular)</p> <p>Lemma 3. For any graph, the largest eigenvalue \\alpha_{1} of its adjacency matrix satisfies $$ d_{a v e} \\leq \\alpha_{1} \\leq d_{\\max } $$ Lemma 4. If G is connected and \\alpha_{1}=d_{\\max }, then G is d_{\\max }-regular.</p>"},{"location":"stat/Algo-graph-Adjacency-Laplacian/#perron-frobenius-theory","title":"Perron-Frobenius theory","text":"<p>Theorem 5 (Perron-Frobenius for undirected graphs). For any connected (weighted) graph G, we have</p> <ol> <li>\\alpha_{1} \\geq-\\alpha_{n}</li> <li>\\alpha_{1} has a strictly positive eigenvector \u7279\u5f81\u5411\u91cf\u7684\u6bcf\u4e00\u9879\u90fd\u4e25\u683c\u5927\u4e8e0</li> <li>\\alpha_{1}&gt;\\alpha_{2}.</li> </ol> <ul> <li>Frobenius \u5b9a\u7406\u8bf4\u660e\u4e86\u8fde\u901a\u56fe\u4e0a\u7684\u90bb\u63a5\u77e9\u9635\u7684\u7279\u5f81\u503c\u7279\u6027.</li> <li> <p>\u8bc1\u660e\u601d\u8def</p> <ul> <li> <p>\u7b2c\u4e00\u6761. \u6784\u9020\u4e00\u4e2a\u5411\u91cf\u4e3a\u6700\u5c0f\u7279\u5f81\u503c\u6240\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf\u53d6\u6b63, \u5373 x(i)=\\left|\\Phi_{n}(i)\\right|, \u5219\u6709:</p> <ul> <li>\\left|\\alpha_{n}\\right|=\\left|\\Phi_{n}^{T} A \\Phi_{n}\\right|=\\left|\\sum_{(i, j) \\in E} a_{i, j} \\Phi_{n}(i) \\Phi_{n}(j)\\right| \\leq \\sum_{(i, j) \\in E} a_{i, j}\\left|\\Phi_{n}(i) \\Phi_{n}(j)\\right|=x^{T} A x \\leq \\alpha_{1}.</li> </ul> </li> <li> <p>\u7b2c\u4e8c\u6761. \u6784\u9020\u5411\u91cfy\u4e3a y(i)=\\left|\\Phi_{1}(i)\\right|, \u7c7b\u4f3c\u7684, \u6211\u4eec\u53ef\u4ee5\u5f97\u5230 y^{T} A y \\geq \\Phi_{1}^{T} A \\Phi_{1}=\\alpha_{1}, \u56e0\u6b64y\u4e5f\u662f\u6700\u5927\u7279\u5f81\u503c\u6240\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf (\u6ce8\u610f\u4e00\u4e2a\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf\u53ef\u4ee5\u6709\u5f88\u591a). \u518d\u5229\u7528\u53cd\u6b63\u6cd5, \u5047\u5982y\u7684\u67d0\u4e00\u5143\u7d20\u4e3a0, \u5219 0=\\alpha_{1} y(i)=(A y)(i)=\\sum_{(i, j) \\in E} y(j) \u4e5f\u5373, \u6240\u6709\u6709\u8fb9\u8fde\u63a5\u7684\u8282\u70b9\u7684y\u4fe1\u53f7\u5747\u4e3a0, \u53c8\u56e0\u4e3a\u56fe\u4e3a\u8fde\u901a\u56fe, \u56e0\u6b64y\u5c31\u53d8\u4e3a\u5168\u96f6\u5411\u91cf, \u4e0e\u7279\u5f81\u5411\u91cf\u7684\u5b9a\u4e49\u77db\u76fe.</p> </li> <li>\u7b2c\u4e09\u6761. \u5047\u8bbey\u4e3a\u7b2c\u4e00\u4e2a\u7279\u5f81\u503c\u6240\u5bf9\u5e94\u7684\u5168\u6b63\u7684\u7279\u5f81\u5411\u91cf, \u5047\u8bbe \\Phi_{2} \u4e3a\u4e0ey\u6b63\u4ea4\u7684\u7b2c\u4e8c\u4e2a\u7279\u5f81\u503c\u6240\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf, \u5219\u8be5\u5411\u91cf\u4e2d, \u4e00\u5b9a\u65e2\u6709\u6b63\u5143\u548c\u6709\u8d1f\u5143, \u56e0\u6b64, \u5728\u8be5\u8fde\u901a\u56fe\u4e0a\u4e00\u5b9a\u6709\u4e00\u6761\u8fb9, \u4f7f\u5f97 \\Phi_{2}(i)&lt;0&lt;\\Phi_{2}(j). \u56e0\u6b64, \u4ee4 z(i)=\\left|\\Phi_{2}(i)\\right|, \u5219 \\alpha_{2}=\\Phi_{2}^{T} A \\Phi_{2}&lt;z^{T} A z \\leq \\alpha_{1} \u4e2d\u7684\u4e25\u683c\u5c0f\u4e8e\u6210\u7acb.</li> </ul> </li> </ul>"},{"location":"stat/Algo-graph-Adjacency-Laplacian/#bipartite-graph","title":"\u4e8c\u5206\u56fe Bipartite graph","text":"<ul> <li>\u4e8c\u5206\u56fe\u5b9a\u4e49: \u53ef\u5c06\u8282\u70b9\u5206\u4e3a\u4e24\u90e8\u5206 L, R, \u4f7f\u5f97\u6240\u6709\u8fb9\u90fd\u5728\u4e24\u4e2a\u96c6\u5408\u4e4b\u95f4, \u4e0d\u5b58\u5728\u96c6\u5408\u5185\u7684\u8fb9.</li> <li>\u8fdb\u4e00\u6b65\u6307\u51fa, \u5728 Frobenius \u5b9a\u7406\u4e2d, \u6700\u5927\u6700\u5c0f\u7279\u5f81\u503c\u4e92\u4e3a\u76f8\u53cd\u6570\u7684\u60c5\u51b5, \u5bf9\u5e94\u7684\u56fe\u4e3a\u4e8c\u5206\u56fe.</li> </ul> <p>Theorem 6. For a connected graph, it is bipartite if and only if \\alpha_{1}=-\\alpha_{n}.</p> <ul> <li>\u8bc1\u660e\u601d\u8def<ul> <li>\u4e8c\u5206\u5230\u7279\u5f81\u503c: \u9488\u5bf9\u6700\u5927\u7279\u5f81\u5411\u91cf\u6784\u9020 x(i)=\\left\\{\\begin{array}{rr}\\Phi_{1}(i) &amp; \\text { if } i \\in L \\\\ -\\Phi_{1}(i) &amp; \\text { if } i \\in R\\end{array}\\right. , \u53ef\u77e5\u8be5\u5411\u91cf\u5bf9\u5e94\u7684\u4e8c\u6b21\u578b\u53d6\u5f97 -\\alpha_1</li> <li>\u53cd\u8fc7\u6765: \u6784\u9020\u4e00\u4e2a\u5411\u91cfx\u4e3a x(i)=\\left|\\Phi_{n}(i)\\right|, \u5219\u4ee5\u4e0b\u4e0d\u7b49\u5f0f\u6210\u7acb<ul> <li>-\\alpha_{n}=\\left|\\alpha_{n}\\right|=\\left|\\Phi_{n}^{T} A \\Phi_{n}\\right|=\\left|\\sum_{(i, j) \\in E} a_{i, j} \\Phi_{n}(i) \\Phi_{n}(j)\\right| \\leq x^{T} A x \\leq \\alpha_{1}. \u6839\u636eFrobenius\u5b9a\u7406, \u4e0d\u7b49\u5f0f\u4e2d\u7684\u7b49\u53f7\u90fd\u9700\u8981\u6210\u7acb.</li> <li>\u7b2c\u4e00\u4e2a\u4e0d\u7b49\u5f0f\u8981\u6c42\u6240\u6709\u9879\u540c\u53f7. \u89c2\u5bdf\u5230\u4e0d\u80fd\u4e3a\u6b63, \u5426\u5219\u6700\u5c0f\u7279\u5f81\u503c\u4e3a\u6b63\u800c\u6700\u5927\u7279\u5f81\u503c\u4e3a\u8d1f\u4e86.</li> <li>\u8981\u4f7f\u5f97\u7b2c\u4e8c\u4e2a\u4e0d\u7b49\u5f0f\u7b49\u53f7\u6210\u7acb, \u5219\u8981\u6c42\u7d2f\u52a0\u4e2d\u7684\u6240\u6709\u9879\u90fd\u975e0 (\u89c1 Frobenius\u8bc1\u660e\u7b2c\u4e8c\u6761).</li> <li>\u7ed3\u5408\u4e0a\u9762\u4e24\u70b9, \u5bf9\u4e8e\u6709\u8fb9\u76f8\u8fde\u7684\u4e24\u4e2a\u8282\u70b9, \u6709 \\Phi_{n}(i) \\Phi_{n}(j) &lt; 0 , \u56e0\u6b64\u53ef\u57fa\u4e8eij\u7684\u7b26\u53f7\u5212\u5206\u4e3a\u4e24\u7c7b.</li> </ul> </li> </ul> </li> </ul>"},{"location":"stat/Algo-graph-Adjacency-Laplacian/#laplacian","title":"Laplacian \u77e9\u9635","text":"<ul> <li>wiki</li> <li>\u5b9a\u4e49: \u5ea6\u6570\u77e9\u9635\u51cf\u53bb\u90bb\u63a5\u77e9\u9635 L = D-A</li> <li>\u91cd\u8981\u7279\u6027<ul> <li>\u4e8c\u9879\u5f0f: \\boldsymbol{x}^{T} \\boldsymbol{L}_{G} \\boldsymbol{x}=\\sum_{(a, b) \\in E} w_{a, b}(\\boldsymbol{x}(a)-\\boldsymbol{x}(b))^{2} \u56e0\u6b64, \u53ef\u4ee5\u8861\u91cf\u56fe\u4e0a\u4fe1\u53f7\u7684\u5e73\u6ed1\u7a0b\u5ea6 (\u5e38\u6570\u4fe1\u53f7\u5219\u503c\u4e3a\u96f6)</li> <li>Incidence \u77e9\u9635: L=B B^{\\top}. \u8fd9\u91cc B_{v e}=\\left\\{\\begin{aligned} 1, &amp; \\text { if } v=v_{i} \\\\-1, &amp; \\text { if } v=v_{j} \\\\ 0, &amp; \\text { otherwise } \\end{aligned}\\right. \u5927\u5c0f\u4e3a |v| \\times|e|, \u6bcf\u4e00\u5217\u5b9e\u9645\u4e0a\u662f \\delta_i - \\delta_j , \u5bf9\u5e94\u4e86 (i,j) \u8fb9 (\u89c4\u5b9a i&lt;j). \u6ce8\u610f\u5230, \u8fd9\u91cc\u4f53\u73b0\u4e86Laplacian\u662f\u300c\u53ef\u52a0\u7684\u300d, \u53ef\u4ee5\u7528\u6bcf\u4e00\u6761\u8fb9\u6240\u8868\u793a\u7684\u77e9\u9635\u52a0\u8d77\u6765\u5f97\u5230.</li> </ul> </li> <li>Laplacian \u4f5c\u4e3a continuous Laplacian \u7684\u8fd1\u4f3c<ul> <li>\u5c55\u793a\u4e86\u5728\u4e00\u4e2a\u79bb\u6563\u7684\u56fe\u4e0a\u7684\u70ed\u4f20\u5bfc\u65b9\u7a0b\u7684\u63a8\u5bfc, \u8bc1\u660e\u5176\u6e29\u5ea6\u53d8\u5316\u7387\u6b63\u662f -L. \u5b9e\u9645\u4e0a, \u5728\u8fde\u7eed\u7a7a\u95f4\u4e2d\u5bf9\u5e94\u7684\u5c31\u662f\u5c31\u662f\u70ed\u4f20\u5bfc\u65b9\u7a0b, \u8fd9\u4e5f\u662f\u56fe\u4e0a\u62c9\u666e\u62c9\u65af\u77e9\u9635\u7684\u7531\u6765: \u5bf9\u5e94\u4e86\u8fde\u7eed\u7a7a\u95f4\u4e2d\u7684\u62c9\u666e\u62c9\u65af\u7b97\u5b50.</li> </ul> </li> <li>\u77e9\u9635\u7279\u5f81\u503c\u4e0e \u8054\u901a\u6027<ul> <li>Laplacian \u7684\u6700\u5c0f\u7279\u5f81\u503c\u4e3a 0</li> <li>\u7b2c\u4e8c\u4e2a\u7279\u5f81\u503c\u4e0d\u4e3a\u96f6, \u5f53\u4e14\u4ec5\u5f53\u56fe\u662f\u8054\u901a\u7684;</li> <li>\u8fdb\u4e00\u6b65, \u6709 Laplacian \u6709k\u4e2a\u7279\u5f81\u503c\u4e3a0, \u7b49\u4ef7\u4e8e\u56fe\u6709k\u4e2a\u8fde\u901a\u5206\u91cf.</li> <li>\u5b9e\u9645\u4e0a, (\u5bf9\u4e8e\u8fde\u901a\u56fe) laplacian\u77e9\u9635\u7684\u7b2c\u4e8c\u4e2a\u7279\u5f81\u503c\u53ef\u4ee5\u8861\u91cf\u5176\u300c\u8054\u901a\u6027\u300d, \u8d8a\u5927\u8bf4\u660e\u8054\u901a\u6027\u8d8a\u597d (\u4ee3\u6570\u8054\u901a\u6027).</li> </ul> </li> <li>\u4f8b\u5b50: \u7b49\u6548\u7535\u963b efficient resistance (\u53c2\u89c1\u4e66  11.7)<ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u7535\u963b\u7f51\u7edc, \u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa i_{e x t}=\\boldsymbol{L} \\boldsymbol{v}, \u8fd9\u91cc\u7684i\u4e3a\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684\u6d41\u51fa\u7535\u6d41\u5927\u5c0f, v\u4e3a\u6bcf\u4e2a\u8282\u70b9\u7684\u7535\u52bf. \u4e5f\u5c31\u662f\u8bf4, \u53ef\u4ee5\u901a\u8fc7\u7535\u6d41\u5927\u5c0f\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u70b9\u7684\u7535\u52bf \\boldsymbol{v}=\\boldsymbol{L}^{+} \\boldsymbol{i}_{e x t} . (\u6ce8\u610f\u5230\u7531\u4e8e\u6700\u5c0f\u7279\u5f81\u503c\u4e3a0, \u56e0\u6b64\u65b9\u7a0b\u6709\u65e0\u6570\u89e3, \u8fd9\u91cc\u7528\u7684\u662f\u4f2a\u9006)</li> <li>\u4f8b\u5982, \u6211\u4eec\u4ee4 a,b \u4e24\u70b9\u4e4b\u95f4\u6709\u5927\u5c0f\u4e3a1\u7684\u7535\u6d41 (\u5047\u5b9a\u7684, \u7535\u6d41\u53ef\u8868\u793a\u4e3a \\boldsymbol{\\delta}_{a}-\\boldsymbol{\\delta}), \u5219\u53ef\u4ee5\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u8282\u70b9\u7684\u7535\u52bf \\boldsymbol{v}=\\boldsymbol{L}^{+}\\left(\\boldsymbol{\\delta}_{a}-\\boldsymbol{\\delta}_{b}\\right). \u8fd9\u6837, \u4e24\u70b9\u95f4\u7684\u7b49\u6548\u7535\u963b\u4e3a \\mathrm{R}_{\\mathrm{eff}}(a, b) \\stackrel{\\text { def }}{=}\\left(\\boldsymbol{\\delta}_{a}-\\boldsymbol{\\delta}_{b}\\right)^{T} \\boldsymbol{L}^{+}\\left(\\boldsymbol{\\delta}_{a}-\\boldsymbol{\\delta}_{b}\\right).</li> <li>\u91cd\u8981\u7684\u542f\u793a: \u7b49\u6548\u7535\u963b\u662f\u7535\u963b\u7f51\u7edc\u4e0a, \u4e24\u70b9\u4e4b\u95f4\u8fde\u901a\u6027\u7684\u6709\u6548\u8861\u91cf\u65b9\u5f0f.</li> </ul> </li> </ul>"},{"location":"stat/Algo-prob-Markov-Chebyshev-Hoeffding/","title":"\u6982\u7387\u57fa\u7840","text":""},{"location":"stat/Algo-prob-Markov-Chebyshev-Hoeffding/#_1","title":"\u4e09\u4e2a\u91cd\u8981\u7684\u6982\u7387\u4e0d\u7b49\u5f0f","text":"<ul> <li>Markov\u2019s inequality<ul> <li>If X is a nonnegative random variable, then for all t&gt;0, $$ \\mathbb{P}[X \\geq t] \\leq \\frac{\\mathbb{E}[X]}{t} $$</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u53d6\u503c\u4e3a\u6b63\u7684\u968f\u673a\u53d8\u91cf, \u5176\u53d6\u503c\u5927\u4e8e\u6570\u5b57t\u7684\u6982\u7387\u6709\u4e0a\u754c, \u5373\u5176\u671f\u671b\u4e0et\u7684\u6bd4\u503c.</li> <li>\u76f4\u89c2\u7406\u89e3: \u968f\u673a\u53d8\u91cf\u53d6\u503c\u7684\u5206\u5e03\u6536\u5230\u5176\u671f\u671b\u7684\u7ea6\u675f. \u4f8b\u5982, \u5047\u5982\u53d6t\u4e3a\u4e24\u500d\u671f\u671b, \u53ef\u77e5\u8be5\u968f\u673a\u53d8\u91cf\u6bd4t\u5927\u7684\u6982\u7387\u81f3\u591a\u4e3a\u4e8c\u5206\u4e4b\u4e00.</li> <li>\u8bc1\u660e\u601d\u8def: \u5b9a\u4e49\u4e00\u4e2a\u968f\u673a\u53d8\u91cf I= \\begin{cases}1 &amp; \\text { if } X \\geq t \\\\ 0 &amp; \\text { if } X&lt;t\\end{cases} . \u53ef\u77e5\u5176\u671f\u671b\u4e3a X \\ge t \u7684\u6982\u7387. \u5229\u7528 t I \\leq X \u7684\u5173\u7cfb, \u4e24\u8fb9\u53bb\u671f\u671b\u5373\u53ef</li> </ul> </li> <li>Chebyshev\u2019s inequality<ul> <li>For all t&gt;0, $$ \\mathbb{P}[|X-\\mathbb{E}[X]| \\geq t] \\leq \\frac{\\operatorname{Var}[X]}{t^{2}} $$</li> <li>\u7406\u89e3: \u4e00\u4e2a\u968f\u673a\u53d8\u91cf\u8bb0\u5f55\u5176\u671f\u671b\u8f83\u8fdc\u7684\u6982\u7387\u53d7\u5230\u5176\u65b9\u5dee\u7684\u7ea6\u675f.</li> <li>\u8bc1\u660e\u601d\u8def: \u5229\u7528\u5e73\u65b9\u51fd\u6570\u7684\u975e\u8d1f\u90e8\u5206\u9012\u589e\u7684\u6027\u8d28, \u53ef\u77e5 \\mathbb{P}[|X-\\mathbb{E}[X]| \\geq t]=\\mathbb{P}\\left[(X-\\mathbb{E}[X])^{2} \\geq t^{2}\\right], \u7136\u540e\u5229\u7528 Markov \u5373\u53ef.</li> </ul> </li> <li>Chernoff-Hoeffding<ul> <li>Lemma 3. Let X_{1}, X_{2}, \\cdots, X_{n} be n independent random variables, such that a_{i} \\leq X_{i} \\leq b_{i} for all i, and let X=\\sum_{i=1}^{n} X_{i}, then $$ \\mathbb{P}[|X-\\mathbb{E}[X]| \\geq t] \\leq 2 \\cdot e^{-\\frac{2 t^{2}}{\\sum_{i=1}^{n}\\left(b_{i}-a_{i}\\right)^{2}}} $$</li> <li>\u7406\u89e3: \u76f8\u8f83\u4e8e Chebyshev, \u8fd9\u91cc\u8003\u8651\u7684\u662f\u968f\u673a\u53d8\u91cf\u4e4b\u548c\u7684\u5206\u5e03\u754c\u9650.</li> <li>\u6ce8\u610f: \u5f53t\u8f83\u5927\u7684\u65f6\u5019, \u8be5\u4e0d\u7b49\u5f0f\u76f8\u8f83\u4e8e Chebyshev \u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u4e0b\u754c. \u4ee5n\u4e2a\u72ec\u7acb\u7684\u7b49\u6982\u73870-1 bernoulli\u5206\u5e03\u4e4b\u548c\u4e3a\u4f8b, \u53ef\u77e5\u5176\u671f\u671b\u548c\u65b9\u5dee\u5206\u522b\u4e3a \\frac{n}{2} \u548c \\frac{n}{4}. \u5206\u522b\u4ee3\u5165\u53ef\u5f97\u5230\u4e0b\u754c. \u89c2\u5bdf, \u53ef\u77e5\u5f53t\u4e3a \\Theta(\\sqrt{n}) \u7ea7\u522b\u65f6\u4e24\u4e0b\u754c\u5dee\u522b\u4e0d\u5927; \u7136\u800c\u82e5t\u4e3a \\Theta({n}) \u7ea7\u522b, \u5219\u4e24\u8005\u5206\u522b\u63d0\u4f9b\u4e86 \\Theta(1/n), \\Theta(\\exp{-n}) \u7ea7\u522b\u7684\u4e0b\u754c.</li> </ul> </li> </ul>"},{"location":"stat/Algo-prob-Markov-Chebyshev-Hoeffding/#morriss-algorithm","title":"Morris\u2019s algorithm","text":"<p>\u5b9a\u4e49 Morris \u7b97\u6cd5:</p> <ol> <li>initialize: s \\leftarrow 0</li> <li>update: if the bit is 1 , increment s with probability 1 / 2^{s}</li> <li>estimate: output \\tilde{m}=2^{s}-1</li> </ol> <p>\u8bf4\u660e</p> <ul> <li>\u95ee\u9898\u7684\u5b9a\u4e49\u6bd4\u8f83\u7b80\u5355: \u5bf9\u4e8e\u4e00\u4e2abit\u6d41, \u7edf\u8ba1\u5176\u4e2d1\u51fa\u73b0\u7684\u4e2a\u6570. \u76f8\u8f83\u4e8e\u5168\u90e8\u8bb0\u5f55\u6240\u82b1\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a O(\\log(m)),  \u8fd9\u91cc\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a O(\\log(s)). \u53ef\u4ee5\u8bc1\u660e, \u5176\u4e3a O(\\log \\log m) with high probability.</li> <li>\u7b97\u6cd5\u7684\u76f4\u89c9: \u6211\u4eec\u4ec5\u8bb0\u5f55\u8ba1\u6570m\u4e2d\u7684 1,2,4,8\u2026 \u8fd9\u4e9b\u4e8b\u4ef6. \u90a3\u7565\u8fc7\u7684\u8fd9\u4e9b\u4e8b\u4ef6\u600e\u4e48\u8fdb\u884c\u8bb0\u5f55? \u901a\u8fc7\u968f\u673a\u53d8\u91cf\u6765\u4f7f\u5f97\u5728\u671f\u671b\u4e0a\u662f\u6bd4\u8f83\u63a5\u8fd1\u7684.</li> </ul>"},{"location":"stat/Algo-prob-Markov-Chebyshev-Hoeffding/#correctness","title":"Correctness \u8bc1\u660e","text":"<ul> <li>Expectation of \\tilde{m}</li> </ul> <p>Claim 4. \\mathbb{E}[\\tilde{m}]=\\mathbb{E}\\left[2^{s}-1\\right]=m. Proof. It is sufficient to show \\mathbb{E}\\left[2^{s}\\right]=m+1. Let s_{t} denote the value of s after t 1\u2019s have arrived and before the (t+1)-th 1 arrives. We next show that \\mathbb{E}\\left[2^{s_{t}}\\right]=t+1. $$ \\begin{aligned} \\mathbb{E}\\left[2^{s_{t}}\\right] &amp;=\\sum_{i=1}^{\\infty} \\mathbb{E}\\left[2^{s_{t}} \\mid s_{t-1}=i\\right] \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;=\\sum_{i=1}^{\\infty}\\left(2^{i+1} \\cdot \\frac{1}{2^{i}}+2^{i} \\cdot\\left(1-\\frac{1}{2^{i}}\\right)\\right) \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;=\\sum_{i=1}^{\\infty}\\left(2^{i}+1\\right) \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;=\\sum_{i=1}^{\\infty} 2^{i} \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right]+\\sum_{i=1}^{\\infty} \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;=\\mathbb{E}\\left[2^{s_{t-1}}\\right]+1 . \\end{aligned} $$ Since \\mathbb{E}\\left[2^{s_{0}}\\right]=1, we have \\mathbb{E}\\left[2^{s_{t}}\\right]=t+1 by the above equation.</p> <ul> <li>Variance of \\tilde{m}</li> </ul> <p>Claim 5. \\operatorname{Var}\\left[2^{s}\\right]=\\frac{m^{2}}{2}-\\frac{m}{2} \\leq \\frac{m^{2}}{2} Proof. Next we analyze the variance of 2^{s_{t}}. By definition \\operatorname{Var}\\left[2^{s_{t}}\\right]=\\mathbb{E}\\left[2^{2 s_{t}}\\right]-\\mathbb{E}\\left[2^{s_{t}}\\right]^{2}. The value of \\mathbb{E}\\left[2^{s_{t}}\\right] has already been calculated above, and thus we only need to calculate \\mathbb{E}\\left[2^{2 s_{t}}\\right]. $$ \\begin{aligned} \\mathbb{E}\\left[2^{2 s_{t}}\\right] &amp;=\\sum_{i=1}^{\\infty} \\mathbb{E}\\left[2^{2 s_{t}} \\mid s_{t-1}=i\\right] \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;=\\sum_{i=1}^{\\infty}\\left(2^{2 i+2} \\cdot \\frac{1}{2^{i}}+2^{2 i} \\cdot\\left(1-\\frac{1}{2^{i}}\\right)\\right) \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;\\left.=\\sum_{i=1}^{\\infty}\\left(2^{i+2}+2^{2 i}-2^{i}\\right) \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right]\\right) \\ &amp;=3 \\cdot \\sum_{i=1}^{\\infty} 2^{i} \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right]+\\sum_{i=1}^{\\infty} 2^{2 i} \\cdot \\mathbb{P}\\left[s_{t-1}=i\\right] \\ &amp;=3 \\cdot \\mathbb{E}\\left[2^{s_{t-1}}\\right]+\\mathbb{E}\\left[2^{2 s_{t-1}}\\right] \\ &amp;=\\mathbb{E}\\left[2^{2 s_{t-1}}\\right]+3 t \\end{aligned} $$ Since 2^{2 s_{0}}=1, we have $$ \\mathbb{E}\\left[2^{2 s_{t}}\\right]=1+3+2 \\cdot 3+\\cdots+3 t=1+3 \\cdot \\frac{t(t+1)}{2}=\\frac{3}{2} t^{2}+\\frac{3}{2} t+1 . $$ Hence, \\operatorname{Var}\\left[2^{s_{t}}\\right]=\\frac{3}{2} t^{2}+\\frac{3}{2} t+1-(t+1)^{2}=\\frac{t^{2}}{2}-\\frac{t}{2} \\leq \\frac{t^{2}}{2}</p>"},{"location":"stat/Algo-prob-Markov-Chebyshev-Hoeffding/#morris","title":"Morris+: \u591a\u6b21\u53d6\u5e73\u5747","text":"<p>\u76f4\u63a5\u91c7\u7528\u4e0a\u8ff0\u7b56\u7565\u5f97\u5230\u7684\u7ed3\u679c\u8bef\u5dee\u5f88\u5927 (\u4e3b\u8981\u662f\u56e0\u4e3a\u65b9\u5dee\u8f83\u5927). \u5229\u7528 Chebyshev \u4e0d\u7b49\u5f0f, \u6709 $$ \\mathbb{P}[|\\tilde{m}-m| \\geq \\varepsilon m] \\leq \\frac{m^{2} / 2}{\\varepsilon^{2} m^{2}}=\\frac{1}{2 \\varepsilon^{2}} $$</p> <ul> <li>\u663e\u7136\u6ca1\u5565\u7528. \u56e0\u6b64, \u53ef\u4ee5\u591a\u6b21\u91cd\u590d\u53d6\u5e73\u5747.</li> <li>\u5177\u4f53\u800c\u8a00, \u6211\u4eec\u5e0c\u671b \\mathbb{P}[|\\tilde{m}-m| \\geq \\varepsilon m] \\leq \\delta \\text { for some small } \\delta&lt;1.</li> <li>\u56e0\u6b64, \u6211\u4eec\u53ef\u4ee5\u53d6\u91cd\u590d\u6b21\u6570 \\ell=\\frac{1}{\\varepsilon^{2} \\delta}.</li> <li>\u8fd9\u6837, \u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O\\left(\\frac{1}{\\varepsilon^{2} \\delta} \\log \\log m\\right).</li> <li>\u79f0\u8be5\u7b97\u6cd5\u4e3a Morris+(\\varepsilon, \\delta). \u8fd9\u91cc\u7684 \\epsilon \u8868\u793a\u7684\u662f\u76f8\u5bf9\u8bef\u5dee, \u800c \\delta \u8868\u793a\u9519\u8bef\u7387 (\u76f8\u5bf9\u8bef\u5dee\u8bef\u5dee\u8d85\u8fc7\u4e86\u754c\u9650).</li> </ul>"},{"location":"stat/Algo-prob-Markov-Chebyshev-Hoeffding/#the-median-trick","title":"The median trick \u8fdb\u4e00\u6b65\u4f18\u5316","text":"<ul> <li>\u6240\u8c13 median trick, \u5c31\u662f\u8fd0\u884c\u4e00\u7cfb\u5217\u4e0d\u592a\u597d\u7684  Morris+(\\varepsilon, \\delta) \u7b97\u6cd5 (\u9519\u8bef\u7387 \\delta \u8f83\u5927, \u4f8b\u5982\u4e3a 1/3); \u7136\u540e\u53d6\u8fd9\u4e9b\u7ed3\u679c\u7684\u4e2d\u4f4d\u6570.<ul> <li>\u8fd9\u91cc\u7684intuition\u5728\u4e8e, \u901a\u8fc7\u8fd0\u884c\u4e00\u7cfb\u5217\u867d\u7136\u4e0d\u592a\u9760\u8c31\u7684\u7b97\u6cd5 (\u671f\u671b\u662f\u6b63\u786e\u7684, \u4f46\u662f\u65b9\u5dee\u8f83\u5927), \u603b\u6709\u4e00\u4e9b\u53ef\u4ee5\u5f97\u5230\u6b63\u786e\u89e3 (\u5728\u8bef\u5dee\u8303\u56f4\u5185).</li> <li>\u901a\u8fc7\u53d6\u4e2d\u4f4d\u6570\u800c\u975e\u5747\u503c, \u5c06\u6bcf\u6b21\u8fd0\u884c Morris+ \u7b97\u6cd5\u7684\u7ed3\u679c\u662f\u5426\u6b63\u786e\u770b\u6210\u662f\u72ec\u7acb\u7684\u4e8b\u4ef6. \u4ece\u800c\u53ef\u4ee5\u91c7\u7528\u66f4\u7d27\u7684 Hoffding \u4e0b\u754c.</li> </ul> </li> <li>\u4ece\u7ed3\u679c\u6765\u770b, \u5c06\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ece  O\\left(\\frac{1}{\\varepsilon^{2} \\delta} \\log \\log m\\right) \u4e0b\u964d\u4e3a O\\left(\\frac{1}{\\varepsilon^{2}} \\log \\log m \\log \\frac{1}{\\delta}\\right). \u6ce8\u610f\u5230\u8fd9\u91cc\u4f18\u5316\u7684\u5bf9\u8c61\u7684\u9519\u8bef\u7387, \u5f15\u5165\u4e86\u4e00\u4e2a\u5bf9\u6570\u9879, \u800c\u4f18\u5316\u7684\u539f\u56e0\u5728\u4e8e, Hoffding \u4e0d\u7b49\u5f0f\u4e2d\u7684\u6307\u6570\u9879.</li> </ul> <p>The median trick: The dependence on \\delta can be further improved by the Median Trick, which works as follows. We run h (to be determined later) independent copies of Morris +(\\varepsilon, 1 / 3), and let \\tilde{m}_{1}, \\cdots, \\tilde{m}_{h} be their outputs; the final output \\tilde{m}=\\operatorname{Median}\\left\\{\\tilde{m}_{1}, \\cdots, \\tilde{m}_{h}\\right\\}. Note that the total space is O\\left(\\frac{h}{\\varepsilon^{2}} \\log \\log m\\right). How large h should be?</p> <p>By the guarantee of Morris +(\\varepsilon, 1 / 3), we have \\mathbb{P}\\left[\\left|m-\\tilde{m}_{i}\\right| \\geq \\varepsilon m\\right] \\leq 1 / 3 for all i \\in[1, h]. For each i \\in[1, h], define $$ I_{i}= \\begin{cases}1 &amp; \\text { If }\\left|m-\\tilde{m}_{i}\\right| \\geq \\varepsilon m \\ 0 &amp; \\text { Otherwise }\\end{cases} $$ Let I=\\sum_{i=1}^{h} I_{i}, which is the total number Morris +(\\varepsilon, 1 / 3) which are \u201cwrong\u201d. Since \\mathbb{E}\\left[I_{i}\\right] \\leq 1 / 3, $$ \\mathbb{E}[I] \\leq h / 3 $$ By Chernoff-Hoeffding, $$ \\mathbb{P}[|I-\\mathbb{E}[I]| \\geq h / 6] \\leq 2 \\cdot e^{-\\frac{h^{2} / 18}{h}}=2 \\cdot e^{-h / 18} $$ By setting h=O\\left(\\log \\frac{1}{\\delta}\\right), the above probability is smaller than \\delta. Let \\mathcal{A} denote the event |I-\\mathbb{E}[I]|&lt;h / 6. Conditioned on \\mathcal{A}, we have $$ I&lt;h / 6+\\mathbb{E}[I] \\leq h / 6+h / 3=h / 2 $$ This means that for at least half of h copies of Morris+ are correct. Consequently, the median of them must be correct, i.e., |\\tilde{m}-m| \\leq \\varepsilon m (why?). This occurs whenever \\mathcal{A} happens, the probability of which is at least 1-\\delta for h=O\\left(\\log \\frac{1}{\\delta}\\right). The total space is thus O\\left(\\frac{1}{\\varepsilon^{2}} \\log \\log m \\log \\frac{1}{\\delta}\\right).</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/","title":"\u4f18\u5316","text":"<ul> <li>\u7528\u7684\u6559\u7a0b\u662f CMU Ryan TibShirani \u7684 http://www.stat.cmu.edu/~ryantibs/convexopt/</li> <li>\u53ef\u4ee5\u53c2\u8003<ul> <li>Dongfeng Li \u7684 \u7edf\u8ba1\u8ba1\u7b97\u51f8\u4f18\u5316\u90e8\u5206</li> </ul> </li> </ul> <p>\u770b\u5230\u7684\u4e00\u4e9b\u6750\u6599</p> <ul> <li>\u975e\u7ebf\u6027\u89c4\u52121: \u6700\u4f18\u5316\u6761\u4ef6\u548c\u51f8\u6027 https://zhuanlan.zhihu.com/p/45028557</li> <li>\u51f8\u4f18\u5316\u5b66\u4e60\u7cfb\u5217(Stephen Boyd)\u2013\u7b2c\u4e8c\u7ae0(Convex sets) https://zhuanlan.zhihu.com/p/49019759</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u51fd\u6570</p> <ul> <li>\u5229\u666e\u5e0c\u8328\u8fde\u7eed Lipschitz continuous</li> <li>strong convexity</li> </ul> <p>\u7b97\u6cd5</p> <ul> <li> <p>\u6536\u655b\u901f\u7387 convergence rate\uff1a</p> </li> <li> <p>convex sets</p> </li> <li>\u6027\u8d28<ul> <li>Separating hyperplane theorem \u4e24\u4e2a\u4e0d\u76f8\u4ea4 disjoint \u7684\u51f8\u96c6\u4e4b\u95f4\u5b58\u5728\u53ef\u5206\u79bb\u8d85\u5e73\u9762</li> <li>Supporting hyperplane theorem \u4e00\u4e2a\u51f8\u96c6\u7684\u8fb9\u754c\u70b9 boundary point \u6709\u652f\u6491\u8d85\u5e73\u9762</li> </ul> </li> </ul> <p>\u4fdd\u6301 convexity \u7684\u64cd\u4f5c</p> <ul> <li>Intersection \u76f8\u4ea4</li> <li>Scaling and translation \u7ebf\u6027\u53d8\u6362</li> <li>Affine images and preimages \u4eff\u5c04\u53d8\u6362\u524d\u540e\u4fdd\u6301 convexity</li> </ul> <p>\u51f8\u51fd\u6570</p> <ul> <li>Convex function: f: \\mathbb{R}^{n} \\rightarrow \\mathbb{R} such that \\operatorname{dom}(f) \\subseteq \\mathbb{R}^{n} convex, and f(t x+(1-t) y) \\leq t f(x)+(1-t) f(y) for 0 \\leq t \\leq 1 and all x, y \\in \\operatorname{dom}(f)</li> <li>Strictly convex: f(t x+(1-t) y)&lt;t f(x)+(1-t) f(y) for x \\neq y and 0&lt;t&lt;1. In words, f is convex and has greater curvature than a linear function</li> <li>Strongly convex with parameter m&gt;0: f-\\frac{m}{2}\\|x\\|_{2}^{2} is convex. In words, f is at least as convex as a quadratic function</li> </ul> <p>Note: strongly convex \\Rightarrow strictly convex \\Rightarrow convex</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#gradient-descent","title":"Gradient descent","text":"<ul> <li>\u5b9a\u4e49</li> </ul> <p>Consider unconstrained, smooth convex optimization $$ \\min {x} f(x) $$ That is, f is convex and differentiable with \\operatorname{dom}(f)=\\mathbb{R}^{n}. Denote optimal criterion value by f^{\\star}=\\min_{x} f(x), and a solution by x^{\\star} Gradient descent: choose initial point x^{(0)} \\in \\mathbb{R}^{n}, repeat: $$ x^{(k)}=x^{(k-1)}-t\\right), \\quad k=1,2,3, \\ldots $$ Stop at some point} \\cdot \\nabla f\\left(x^{(k-1)</p> <ul> <li>Interpretation\uff1a\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728\u5f53\u524d\u70b9\u5bf9\u4e8e\u51fd\u6570\u4e8c\u9636\u8fd1\u4f3c\uff0c\u7136\u540e\u4f18\u5316\u8fd9\u4e2a\u8fd1\u4f3c\u51fd\u6570</li> </ul> <p>At each iteration, consider the expansion $$ f(y) \\approx f(x)+\\nabla f(x)^{T}(y-x)+\\frac{1}{2 t}|y-x|{2}^{2} $$ Quadratic approximation, replacing usual Hessian \\nabla^{2} f(x) by \\frac{1}{t} I $$ \\begin{array}{cc} f(x)+\\nabla f(x)^{T}(y-x) &amp; \\text { linear approximation to } f \\ \\frac{1}{2 t}|y-x| 1 /(2 t) \\end{array} $$ Choose next point }^{2} &amp; \\text { proximity term to } x, \\text { with weight y=x^{+}to minimize quadratic approximation: $$ x^{+}=x-t \\nabla f(x) $$</p> <p>\u63d0\u7eb2</p> <ul> <li>\u5982\u4f55\u9009\u62e9 Step sizes</li> <li>Conergence analysis</li> <li>Nonconvex functions</li> <li>Gradient boosting</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#step-sizes","title":"Step sizes","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#backtracking-line-search","title":"Backtracking line search \u56de\u6eaf","text":"<p>\u6ce8\u610f\uff0c\u8fd9\u91cc\u6211\u4eec\u60f3\u8981\u6c42\u7684\u662f\u4e00\u4e2a\u8f83\u597d\u7684 t\u3002</p> <p>One way to adaptively choose the step size is to use backtracking line search:</p> <ul> <li>First fix parameters 0&lt;\\beta&lt;1 and 0&lt;\\alpha \\leq 1 / 2</li> <li>At each iteration, start with t=t_{\\text {init }}, and while $$ f(x-t \\nabla f(x))&gt;f(x)-\\alpha t|\\nabla f(x)|_{2}^{2} $$ shrink t=\\beta t. Else perform gradient descent update $$ x^{+}=x-t \\nabla f(x) $$ Simple and tends to work well in practice (further simplification: just take \\alpha=1 / 2 )</li> </ul> <p>\u76f4\u89c2\u7406\u89e3\u5982\u4e0b\uff1a\u6211\u4eec\u5bf9\u4e8e\u5f53\u524d\u70b9\u7684\u68af\u5ea6 t \\nabla f(x) \u4f5c\u5e73\u7f13\uff0c\u4ece\u800c\u4f7f\u5f97\u4ee5\u8fd9\u4e2a\u659c\u7387\u8fc7 x \u7684\u70b9\u548c\u51fd\u6570 f \u76f8\u4ea4\u5728\u4e00\u4e2a\u76f8\u5bf9\u66f4\u4f4e\u7684\u70b9\uff08\u76f8\u4ea4\u70b9\u548c\u6700\u4f4e\u70b9\u7684\u4f4d\u7f6e\u4e0d\u786e\u5b9a\u4e5f\u4e0d\u91cd\u8981\uff09\uff1b\u6211\u4eec\u9650\u5236 t \u4f7f\u5f97\u66f4\u65b0\u540e\u7684\u70b9\u4e0d\u8d85\u8fc7\u8fd9\u4e2a\u4ea4\u70b9\u3002</p> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#convergence-analysis","title":"Convergence analysis \u6536\u655b\u6027\u5206\u6790","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lipschitz-continuous","title":"Lipschitz continuous \u5229\u666e\u5e0c\u8328\u8fde\u7eed","text":"<p>\u56de\u987e Lipschitz \u8fde\u7eed\u7684\u5b9a\u4e49\uff1a\u4e0d\u4ec5\u8981\u6c42\u8fde\u7eed\uff0c\u8fd8\u8981\u6c42\u6240\u6709\u7684\u68af\u5ea6\u90fd\u662f\u6709\u9650\u7684\uff08\u9650\u5236\u4e3a L\uff09\uff0c\u5373 |f(x)-f(y)| \\le L|x-y| \uff1b\u4f8b\u5982 \\sqrt{x} \u5728 [0,\\infty) \u4e0a\u5c31\u4e0d\u662f Lipschitz \u8fde\u7eed\u7684\u3002</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lipschitz-gd","title":"\u5b9a\u7406\uff1a\u5728 Lipschitz \u8fde\u7eed\u6761\u4ef6\u4e0b\uff0cGD \u7684\u6536\u655b\u901f\u5ea6","text":"<p>Assume that f convex and differentiable, with \\operatorname{dom}(f)=\\mathbb{R}^{n}, and additionally that \\nabla f is Lipschitz continuous with constant L&gt;0, $$ |\\nabla f(x)-\\nabla f(y)|{2} \\leq L|x-y| x, y $$ (Or when twice differentiable: } \\quad \\text { for any \\nabla^{2} f(x) \\preceq L I )</p> <p>Theorem: Gradient descent with fixed step size t \\leq 1 / L satisfies $$ f\\left(x^{(k)}\\right)-f^{\\star} \\leq \\frac{\\left|x^{(0)}-x^{\\star}\\right|_{2}^{2}}{2 t k} $$ and same result holds for backtracking, with t replaced by \\beta / L</p> <p>We say gradient descent has convergence rate O(1 / k). That is, it finds \\epsilon-suboptimal point in O(1 / \\epsilon) iterations</p> <p>\u6ce8\u610f\u7406\u89e3\u300c\u6536\u655b\u901f\u7387\u300d\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u8981\u6c42\u7684\u7cbe\u5ea6 \\epsilon\uff0c\u7b97\u6cd5\u80fd\u591f\u5728 O(1 / \\epsilon) \u6b65\u9aa4\u5185\u8fed\u4ee3\u5f97\u5230\u4e00\u4e2a\u89e3\u3002</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_3","title":"\u5b9a\u7406\uff1a\u5f3a\u51f8\u6761\u4ef6\u4e0b\u7ebf\u6027\u6536\u655b","text":"<p>Reminder: strong convexity of f means f(x)-\\frac{m}{2}\\|x\\|_{2}^{2} is convex for some m&gt;0 (when twice differentiable: \\nabla^{2} f(x) \\succeq m I )</p> <p>Assuming Lipschitz gradient as before, and also strong convexity: Theorem: Gradient descent with fixed step size t \\leq 2 /(m+L) or with backtracking line search search satisfies $$ f\\left(x^{(k)}\\right)-f^{\\star} \\leq \\gamma^{k} \\frac{L}{2}\\left|x^{(0)}-x^{\\star}\\right|_{2}^{2} $$ where 0&lt;\\gamma&lt;1</p> <p>Rate under strong convexity is O\\left(\\gamma^{k}\\right), exponentially fast! That is, it finds \\epsilon-suboptimal point in O(\\log (1 / \\epsilon)) iterations \uff08\u4ee4 \\gamma^k = \\epsilon\uff0c\u5219 k \\log{\\gamma} = \\log\\epsilon\uff0c\u6ce8\u610f \\log{\\gamma}&lt;0\uff0c\u5219 \\gamma = C\\log{\\frac{1}{\\epsilon}}\uff09</p> <ul> <li>\u79f0\u4e4b\u4e3a Linear convergenc\uff0c\u5373\u76ee\u6807\u51fd\u6570\u76f8\u4ea4\u4e8e\u8fed\u4ee3\u6b21\u6570\u5728 semi-log \u56fe\u4e0a\u662f\u7ebf\u6027\u7684\u3002</li> </ul> <p></p> <p>Important note: \\gamma=O(1-m / L). Thus we can write convergence rate as $$ O\\left(\\frac{L}{m} \\log (1 / \\epsilon)\\right) $$ Higher condition number L / m \\Rightarrow slower rate. This is not only true of in theory \\ldots very apparent in practice too</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lr-condition-number","title":"\u4f8b\u5b50\uff1aLR \u4e2d\u7684 condition number","text":"<p>A look at the conditions for a simple problem, f(\\beta)=\\frac{1}{2}\\|y-X \\beta\\|_{2}^{2}</p> <p>Lipschitz continuity of \\nabla f :</p> <ul> <li>Recall this means \\nabla^{2} f(x) \\preceq L I</li> <li>As \\nabla^{2} f(\\beta)=X^{T} X, we have L=\\lambda_{\\max }\\left(X^{T} X\\right)</li> </ul> <p>Strong convexity of f :</p> <ul> <li>Recall this means \\nabla^{2} f(x) \\succeq m I</li> <li>As \\nabla^{2} f(\\beta)=X^{T} X, we have m=\\lambda_{\\min }\\left(X^{T} X\\right)</li> </ul> <p>\u6ce8\u610f\u5230\u4e0a\u9762\u7684 condition number L / m\uff0c\u53ef\u77e5\uff1a1. \u5728\u6570\u636e\u4e0d\u8db3\u7684\u60c5\u51b5\u4e0b\uff0cLR\u7684\u4f18\u5316\u51fd\u6570\u975e\u5f3a\u51f8\uff0c\u6536\u655b\u901f\u5ea6\u65e0\u6cd5\u4fdd\u969c\uff1b2. \u6570\u636e\u91cf\u76f8\u5bf9\u8f83\u5c0f\u7684\u60c5\u51b5\u4e0b\uff0c\u6761\u4ef6\u6570\u5f88\u5927\uff0c\u6536\u655b\u6162\u3002</p> <ul> <li>If X is wide (X is n \\times p with p&gt;n), then \\lambda_{\\min }\\left(X^{T} X\\right)=0, and f can\u2019t be strongly convex</li> <li>Even if \\sigma_{\\min }(X)&gt;0, can have a very large condition number L / m=\\lambda_{\\max }\\left(X^{T} X\\right) / \\lambda_{\\min }\\left(X^{T} X\\right)</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_4","title":"\u7ec8\u6b62\u6761\u4ef6\uff1a\u770b\u68af\u5ea6\u5927\u5c0f","text":"<p>Stopping rule: stop when \\|\\nabla f(x)\\|_{2} is small</p> <ul> <li>Recall \\nabla f\\left(x^{\\star}\\right)=0 at solution x^{\\star}</li> <li>If f is strongly convex with parameter m, then $$ |\\nabla f(x)|_{2} \\leq \\sqrt{2 m \\epsilon} \\Longrightarrow f(x)-f^{\\star} \\leq \\epsilon $$</li> </ul> <p>Pros and cons of gradient descent:</p> <ul> <li>Pro: simple idea, and each iteration is cheap (usually)</li> <li>Pro: fast for well-conditioned, strongly convex problems</li> <li>Con: can often be slow, because many interesting problems aren\u2019t strongly convex or well-conditioned</li> <li>Con: can\u2019t handle nondifferentiable functions</li> </ul> <p>\u603b\u800c\u8a00\u662f\uff0c\u4e0a\u9762\u7684 GD\u5b58\u5728\u7740\u5c40\u9650\u6027\uff1a1. \u53ef\u80fd\u901f\u5ea6\u6162\uff0c\u53ea\u6709\u5728\u5f3a\u51f8\u4e14 well-conditioned \u7684\u60c5\u51b5\u4e0b\u624d\u80fd\u4fdd\u8bc1\u7ebf\u6027\u6536\u655b\uff1b2. \u65e0\u6cd5\u5904\u7406\u4e0d\u53ef\u5bfc\u7684\u60c5\u51b5\u3002</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#first-order-method","title":"First-order method \u4e00\u9636\u65b9\u6cd5","text":"<p>Gradient descent has O(1 / \\epsilon) convergence rate over problem class of convex, differentiable functions with Lipschitz gradients</p> <p>First-order method: iterative method, which updates x^{(k)} in $$ x^{(0)}+\\operatorname{span}\\left{\\nabla f\\left(x^{(0)}\\right), \\nabla f\\left(x^{(1)}\\right), \\ldots \\nabla f\\left(x^{(k-1)}\\right)\\right} $$</p> <p>Theorem (Nesterov): For any k \\leq(n-1) / 2 and any starting point x^{(0)}, there is a function f in the problem class such that any first-order method satisfies $$ f\\left(x^{(k)}\\right)-f^{\\star} \\geq \\frac{3 L\\left|x^{(0)}-x^{\\star}\\right|_{2}^{2}}{32(k+1)^{2}} $$ Can attain rate O\\left(1 / k^{2}\\right), or O(1 / \\sqrt{\\epsilon}) ? Answer: yes (we\u2019ll see)!</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#analysis-for-nonconvex-case","title":"\u975e\u51f8\u60c5\u51b5 Analysis for nonconvex case","text":"<p>\u5728\u975e\u51f8\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u4e86\u6700\u4f18\u70b9\u53ea\u6709\u9a7b\u70b9\uff0c\u8fd9\u91cc\u7684\u8861\u91cf\u6307\u6807\u53d8\u4e3a\u51fd\u6570\u68af\u5ea6\u3002\u6ce8\u610f\u5230\u6536\u655b\u7387 O\\left(1 / \\epsilon^{2}\\right) \u76f8\u8f83\u4e8e\u51f8\u51fd\u6570\u7684 O(1/\\epsilon) \u4e5f\u66f4\u6162\u4e86\u3002</p> <p>Assume f is differentiable with Lipschitz gradient, now nonconvex. Asking for optimality is too much. Let\u2019s settle for a \\epsilon-substationary point x, which means \\|\\nabla f(x)\\|_{2} \\leq \\epsilon</p> <p>Theorem: Gradient descent with fixed step size t \\leq 1 / L satisfies $$ \\min {i=0, \\ldots, k}\\left|\\nabla f\\left(x^{(i)}\\right)\\right| $$ Thus gradient descent has rate } \\leq \\sqrt{\\frac{2\\left(f\\left(x^{(0)}\\right)-f^{\\star}\\right)}{t(k+1)}O(1 / \\sqrt{k}), or O\\left(1 / \\epsilon^{2}\\right), even in the nonconvex case for finding stationary points</p> <p>This rate cannot be improved (over class of differentiable functions with Lipschitz gradients) by any deterministic algorithm</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#gradient-boosting","title":"Gradient boosting\u3010\u7565\u3011","text":"<p>Given responses y_{i} \\in \\mathbb{R} and features x_{i} \\in \\mathbb{R}^{p}, i=1, \\ldots, n Want to construct a flexible (nonlinear) model for response based on features. Weighted sum of trees: $$ u_{i}=\\sum_{j=1}^{m} \\beta_{j} \\cdot T_{j}\\left(x_{i}\\right), \\quad i=1, \\ldots, n $$ Each tree T_{j} inputs x_{i}, outputs predicted response. Typically trees are pretty short</p> <p>Pick a loss function L to reflect setting. For continuous responses, e.g., could take L\\left(y_{i}, u_{i}\\right)=\\left(y_{i}-u_{i}\\right)^{2} Want to solve $$ \\min {\\beta} \\sum\\right)\\right) $$ Indexes all trees of a fixed size }^{n} L\\left(y_{i}, \\sum_{j=1}^{M} \\beta_{j} \\cdot T_{j}\\left(x_{i(e . g ., depth =5), so M is huge. Space is simply too big to optimize</p> <p>Gradient boosting: basically a version of gradient descent that is forced to work with trees</p> <p>First think of optimization as \\min _{u} f(u), over predicted values u, subject to u coming from trees</p> <p>Start with initial model, a single tree u^{(0)}=T_{0}. Repeat:</p> <ul> <li>Compute negative gradient d at latest prediction u^{(k-1)}, $$ d_{i}=-\\left.\\left[\\frac{\\partial L\\left(y_{i}, u_{i}\\right)}{\\partial u_{i}}\\right]\\right|{u, \\quad i=1, \\ldots, n $$}=u_{i}^{(k-1)}</li> <li>Find a tree T_{k} that is close to a, i.e., according to $$ \\min_{\\text {trees } T} \\sum_{i=1}^{n}\\left(d_{i}-T\\left(x_{i}\\right)\\right)^{2} $$ Not hard to (approximately) solve for a single tree</li> <li>Compute step size \\alpha_{k}, and update our prediction: $$ u^{(k)}=u^{(k-1)}+\\alpha_{k} \\cdot T_{k} $$ Note: predictions are weighted sums of trees, as desired</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#subgradients","title":"Subgradients \u6b21\u68af\u5ea6","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_5","title":"\u5b9a\u4e49","text":"<p>Recall that for convex and differentiable f, $$ f(y) \\geq f(x)+\\nabla f(x)^{T}(y-x) \\text { for all } x, y $$ That is, linear approximation always underestimates f A subgradient of a convex function f at x is any g \\in \\mathbb{R}^{n} such that $$ f(y) \\geq f(x)+g^{T}(y-x) \\text { for all } y $$</p> <p>\u5bf9\u4e8e\u68af\u5ea6\u7684\u8fd9\u4e00\u4e2a\u6027\u8d28\u8fdb\u884c\u4e86\u6269\u5c55\uff0c\u653e\u5bbd\u4e86\u8981\u6c42 differentiable\u3002</p> <ul> <li>\u8fdb\u4e00\u6b65\u5b9a\u4e49 Subdifferential \u6b21\u5fae\u5206 [\u6ce8\u610f, \u5728\u67d0\u4e00\u70b9\u7684\u6b21\u5fae\u5206\u53ef\u80fd\u662f\u7a7a\u96c6?]</li> </ul> <p>Set of all subgradients of convex f is called the subdifferential: $$ \\partial f(x)=\\left{g \\in \\mathbb{R}^{n}: g \\text { is a subgradient of } f \\text { at } x\\right} $$</p> <p>\u53ef\u77e5\uff0c\u5bf9\u4e8e\u51f8\u51fd\u6570\uff0c1. \u5176 subdifferential \u603b\u662f\u975e\u7a7a\u7684\uff1b2. subdifferential \u603b\u662f closed and convex\uff08\u975e\u51f8\u60c5\u51b5\u4e5f\u6210\u7acb\uff09\uff1b3. \u51fd\u6570\u53ef\u5bfc\u548c\u5176\u6b21\u51fd\u6570\u4e3a\u5355\u70b9\u96c6\u5408\u4e00\u4e00\u5bf9\u6620\u3002</p> <p>\u4f8b\u5b50\uff1aConnection to convex geometry</p> <p>\u5bf9\u4e8e\u51f8\u96c6\u7684\u6307\u793a\u51fd\u6570\u800c\u8a00\uff0c\u5176\u6b21\u5fae\u5206\u5c31\u662f\u4e4b\u524d\u5bf9\u4e8e\u4e00\u4e2a\u51f8\u96c6\u6240\u5b9a\u4e49\u7684 normal cone</p> <p>Convex set C \\subseteq \\mathbb{R}^{n}, consider indicator function I_{C}: \\mathbb{R}^{n} \\rightarrow \\mathbb{R} $$ I_{C}(x)=I{x \\in C}= \\begin{cases}0 &amp; \\text { if } x \\in C \\ \\infty &amp; \\text { if } x \\notin C\\end{cases} $$ For x \\in C, \\partial I_{C}(x)=\\mathcal{N}_{C}(x), the normal cone of C at x is, recall $$ \\mathcal{N}{C}(x)=\\left{g \\in \\mathbb{R}^{n}: g^{T} x \\geq g^{T} y \\text { for any } y \\in C\\right} $$ Why? By definition of subgradient g, $$ I y $$}(y) \\geq I_{C}(x)+g^{T}(y-x) \\text { for all </p> <ul> <li>For y \\notin C, I_{C}(y)=\\infty</li> <li>For y \\in C, this means 0 \\geq g^{T}(y-x)</li> </ul> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_6","title":"\u6027\u8d28","text":"<p>\u57fa\u672c\u64cd\u4f5c</p> <ul> <li>Scaling: \\partial(a f)=a \\cdot \\partial f provided a&gt;0</li> <li>Addition: \\partial\\left(f_{1}+f_{2}\\right)=\\partial f_{1}+\\partial f_{2}</li> <li>Affine composition: if g(x)=f(A x+b), then $$ \\partial g(x)=A^{T} \\partial f(A x+b) $$</li> <li>Finite pointwise maximum: if f(x)=\\max _{i=1, \\ldots, m} f_{i}(x), then $$ \\partial f(x)=\\operatorname{conv}\\left(\\bigcup_{i: f_{i}(x)=f(x)} \\partial f_{i}(x)\\right) $$ convex hull \u51f8\u5305 of union of subdifferentials of active functions at x \uff08\u53ef\u4ee5\u753b\u5f20\u56fe\u76f4\u89c2\u7406\u89e3\uff09</li> <li>General composition: if $$ f(x)=h(g(x))=h\\left(g_{1}(x), \\ldots, g_{k}(x)\\right) $$ where g: \\mathbb{R}^{n} \\rightarrow \\mathbb{R}^{k}, h: \\mathbb{R}^{k} \\rightarrow \\mathbb{R}, f: \\mathbb{R}^{n} \\rightarrow \\mathbb{R}, h is convex and nondecreasing in each argument, g is convex, then $$ \\begin{aligned} \\partial f(x) \\subseteq\\left{p_{1} q_{1}+\\cdots+p_{k} q_{k}:\\right.&amp; \\ \\left.p \\in \\partial h(g(x)), q_{i} \\in \\partial g_{i}(x), i=1, \\ldots, k\\right} &amp; \\end{aligned} $$</li> <li>General pointwise maximum: if f(x)=\\max _{s \\in S} f_{s}(x), then $$ \\partial f(x) \\supseteq \\operatorname{cl}\\left{\\operatorname{conv}\\left(\\bigcup_{s: f_{s}(x)=f(x)} \\partial f_{s}(x)\\right)\\right} $$ Under some regularity conditions (on S, f_{s} ), we get equality</li> <li>Norms: important special case. To each norm \\|\\cdot\\|, there is a dual norm \\|\\cdot\\|_{*} such that $$ |x|=\\max_{|z|_{} \\leq 1} z^{T} x $$ (For example, \\|\\cdot\\|_{p} and \\|\\cdot\\|_{q} are dual when 1 / p+1 / q=1 . ) In fact, for f(x)=\\|x\\| (and \\left.f_{z}(x)=z^{T} x\\right), we get equality: $$ \\partial f(x)=\\operatorname{cl}\\left{\\operatorname{conv}\\left(\\bigcup_{z: f_{z}(x)=f(x)} \\partial f_{z}(x)\\right)\\right} $$ Note that \\partial f_{z}(x)=z . And if z_{1}, z_{2} each achieve the max at x, which means that z_{1}^{T} x=z_{2}^{T} x=\\|x\\|, then by linearity, so will t z_{1}+(1-t) z_{2} for any t \\in[0,1]. Thus $$ \\partial f(x)=\\underset{|z|_{} \\leq 1}{\\operatorname{argmax}} z^{T} x $$</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_7","title":"\u4f18\u5316\u7279\u5f81","text":"<p>\u57fa\u4e8e\u6b21\u68af\u5ea6\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4f18\u5316\u95ee\u9898\u7684\u6761\u4ef6</p> <p>For any f (convex or not), $$ f\\left(x^{\\star}\\right)=\\min _{x} f(x) \\Longleftrightarrow 0 \\in \\partial f\\left(x^{\\star}\\right) $$ That is, x^{\\star} is a minimizer if and only if 0 is a subgradient of f at x^{\\star}. This is called the subgradient optimality condition</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#first-order-optimality-contiditon","title":"\u4f8b\u5b50\uff1a\u8bc1\u660e first-order optimality contiditon","text":"<p>Example of the power of subgradients: we can use what we have learned so far to derive the first-order optimality condition. Recall $$ \\min {x} f(x) \\text { subject to } x \\in C $$ is solved at x, for f convex and differentiable, if and only if $$ \\nabla f(x)^{T}(y-x) \\geq 0 \\text { for all } y \\in C $$ Intuitively: says that gradient increases as we move away from x. How to prove it? First recast problem as $$ \\min(x) $$ Now apply subgradient optimality: } f(x)+I_{C0 \\in \\partial\\left(f(x)+I_{C}(x)\\right) Observe $$ \\begin{aligned} 0 \\in \\partial(f(x)+&amp;\\left.I_{C}(x)\\right) \\ &amp; \\Longleftrightarrow 0 \\in{\\nabla f(x)}+\\mathcal{N}{C}(x) \\ &amp; \\Longleftrightarrow-\\nabla f(x) \\in \\mathcal{N}(x) \\ &amp; \\Longleftrightarrow-\\nabla f(x)^{T} x \\geq-\\nabla f(x)^{T} y \\text { for all } y \\in C \\ &amp; \\Longleftrightarrow \\nabla f(x)^{T}(y-x) \\geq 0 \\text { for all } y \\in C \\end{aligned} $$ as desired Note: the condition 0 \\in \\partial f(x)+\\mathcal{N}_{C}(x) is a fully general condition for optimality in convex problems. But it\u2019s not always easy to work with (KKT conditions, later, are easier)</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-lasso-optimality-conditions","title":"Example: lasso optimality conditions","text":"<p>Given y \\in \\mathbb{R}^{n}, X \\in \\mathbb{R}^{n \\times p}, lasso problem can be parametrized as $$ \\min {\\beta} \\frac{1}{2}|y-X \\beta|+\\lambda|\\beta|}^{2{1} $$ where \\lambda \\geq 0 . Subgradient optimality: $$ \\begin{aligned} {0 \\in \\partial\\left(\\frac{1}{2}|y-X \\beta|+\\lambda|\\beta|}^{2{1}\\right)} \\ &amp; \\Longleftrightarrow 0 \\in-X^{T}(y-X \\beta)+\\lambda \\partial|\\beta| \\ &amp; \\Longleftrightarrow X^{T}(y-X \\beta)=\\lambda v \\end{aligned} $$ for some v \\in \\partial\\|\\beta\\|_{1}, i.e., $$ v_{i} \\in \\begin{cases}{1} &amp; \\text { if } \\beta_{i}&gt;0 \\ {-1} &amp; \\text { if } \\beta_{i}&lt;0, \\quad i=1, \\ldots, p \\ {[-1,1]} &amp; \\text { if } \\beta_{i}=0\\end{cases} $$ Write X_{1}, \\ldots, X_{p} for columns of X. Then our condition reads: $$ \\begin{cases}X_{i}^{T}(y-X \\beta)=\\lambda \\cdot \\operatorname{sign}\\left(\\beta_{i}\\right) &amp; \\text { if } \\beta_{i} \\neq 0 \\ \\left|X_{i}^{T}(y-X \\beta)\\right| \\leq \\lambda &amp; \\text { if } \\beta_{i}=0\\end{cases} $$ Note: subgradient optimality conditions don\u2019t lead to closed-form expression for a lasso solution \u2026 however they do provide a way to check lasso optimality</p> <p>They are also helpful in understanding the lasso estimator; e.g., if \\left|X_{i}^{T}(y-X \\beta)\\right|&lt;\\lambda, then \\beta_{i}=0 (used by screening rules, later?)</p> <p>\u6ce8\u610f\uff0c\u57fa\u4e8e Subgradient optimality\uff0c\u5e76\u6ca1\u6709\u7ed9\u51fa lasso \u95ee\u9898\u7684\u89e3\u6cd5\uff0c\u4f46\u662f\u63a8\u5bfc\u51fa\u4e86\u89e3\u7684\u4e00\u4e9b\u7279\u6027\u3002</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_8","title":"\u7565","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#subgradient-method","title":"Subgradient method \u6b21\u68af\u5ea6\u65b9\u6cd5","text":"<p>\u4e4b\u524d\u7684 GD \u53ea\u80fd\u89e3\u51b3\u53ef\u5bfc\u7684\u51f8\u4f18\u5316\u95ee\u9898\uff0c\u8fd9\u91cc\u5229\u7528\u6b21\u68af\u5ea6\u62d3\u5c55\u5230 \u975e\u53ef\u5bfc\u7684\u51f8\u51fd\u6570\u3002</p> <p>Now consider f convex, having \\operatorname{dom}(f)=\\mathbb{R}^{n}, but not necessarily differentiable</p> <p>Subgradient method: like gradient descent, but replacing gradients with subgradients. Initialize x^{(0)}, repeat: $$ x^{(k)}=x^{(k-1)}-t_{k} \\cdot g^{(k-1)}, \\quad k=1,2,3, \\ldots $$ where g^{(k-1)} \\in \\partial f\\left(x^{(k-1)}\\right), any subgradient of f at x^{(k-1)} Subgradient method is not necessarily a descent method, thus we keep track of best iterate x_{\\text {best }}^{(k)} among x^{(0)}, \\ldots, x^{(k)} so far, i.e., $$ f\\left(x_{\\text {best }}^{(k)}\\right) = \\min_{i=0, \\ldots, k} f\\left(x^{(i)}\\right) $$</p> <p>\u63d0\u7eb2</p> <ul> <li>step sizes</li> <li>convergence analysis</li> <li>\u4f8b\u5b50\uff1aintersection of sets</li> <li>projected subgradient methods</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#proximal-gradient-descent","title":"Proximal gradient descent \u8fd1\u7aef\u68af\u5ea6\u4e0b\u964d\u6cd5","text":"<p>\u53c2\u89c1</p> <ul> <li>\u673a\u5668\u5b66\u4e60 | \u8fd1\u7aef\u68af\u5ea6\u4e0b\u964d\u6cd5 (proximal gradient descent) https://zhuanlan.zhihu.com/p/82622940</li> </ul> <p>Last time: subgradient method Consider the problem $$ \\min {x} f(x) $$ with f convex, and \\operatorname{dom}(f)=\\mathbb{R}^{n}. Subgradient method: choose an initial x^{(0)} \\in \\mathbb{R}^{n}, and repeat: $$ x^{(k)}=x^{(k-1)}-t, \\quad k=1,2,3, \\ldots $$ where } \\cdot g^{(k-1)g^{(k-1)} \\in \\partial f\\left(x^{(k-1)}\\right). We use pre-set rules for the step sizes (e.g., diminshing step sizes rule)</p> <p>If f is Lipschitz, then subgradient method has a convergence rate O\\left(1 / \\epsilon^{2}\\right)</p> <p>Upside: very generic. Downside: can be slow - addressed today</p> <p>\u56de\u987e\u4e0a\u4e00\u8282\u7684\u6b21\u68af\u5ea6\u65b9\u6cd5\uff1a\u4f18\u52bf\u5728\u4e8e\u901a\u7528\u578b\u8f83\u5f3a\uff0c\u4f46\u95ee\u9898\u662f\u6536\u655b\u901f\u5ea6\u8f83\u6162 \u2014\u2014 \u8fd9\u4e00\u8282\u8ba8\u8bba\u3002</p> <ul> <li>proximal GD</li> <li>convergence analysis</li> <li>ISTA, matrix completion</li> <li>special cases</li> <li>acceleration</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#proximal-gd","title":"Proximal GD","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#composite-functions","title":"Composite functions","text":"<p>Suppose $$ f(x)=g(x)+h(x) $$</p> <ul> <li>g is convex, differentiable, \\operatorname{dom}(g)=\\mathbb{R}^{n}</li> <li>h is convex, not necessarily differentiable If f were differentiable, then gradient descent update would be: $$ x^{+}=x-t \\cdot \\nabla f(x) $$ Recall motivation: minimize quadratic approximation to f around x, replace \\nabla^{2} f(x) by \\frac{1}{t} I x^{+}=\\underset{z}{\\operatorname{argmin}} \\underbrace{f(x)+\\nabla f(x)^{T}(z-x)+\\frac{1}{2 t}\\|z-x\\|_{2}^{2}}_{\\bar{f}_{t}(z)}</li> </ul> <p>In our case f is not differentiable, but f=g+h, g differentiable. Why don\u2019t we make quadratic approximation to g, leave h alone? That is, update $$ \\begin{aligned} x^{+} &amp;=\\underset{z}{\\operatorname{argmin}} \\bar{g}{t}(z)+h(z) \\ &amp;=\\underset{z}{\\operatorname{argmin}} g(x)+\\nabla g(x)^{T}(z-x)+\\frac{1}{2 t}|z-x|+h(z) \\ &amp;=\\underset{z}{\\operatorname{argmin}} \\frac{1}{2 t}|z-(x-t \\nabla g(x))|}^{2{2}^{2}+h(z) \\end{aligned} $$ $$ \\frac{1}{2 t}|z-(x-t \\nabla g(x))| g \\ h(z) \\quad \\text{also make } h \\text{ small} $$}^{2} \\quad \\text{stay close to gradient update for </p> <p>\u8fd9\u91cc\u4e00\u4e2a\u4e0d\u53ef\u5bfc\u7684\u51fd\u6570\u5206\u89e3\u51fa\u53ef\u5bfc\u7684\u90e8\u5206\uff1b\u7136\u540e\u5bf9\u4e8e\u8fd9\u4e2a\u53ef\u5bfc\u51fd\u6570 g \u8fdb\u884c\u4e8c\u9636\u8fd1\u4f3c/\u5148\u6c42\u89e3\u53ef\u5bfc\u51fd\u6570\u3002</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#proximal-operator","title":"Proximal operator","text":"<p>\u5b9a\u4e49 \u8fd1\u7aef\u7b97\u5b50 (proximal operator)\u3002\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4e0d\u53ef\u5fae\u7684\u51fd\u6570 h \uff0c\u5728\u4e00\u4e2a x \u76f8\u8fd1\u7684\u8303\u56f4\u5185\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u5316\u8fd9\u4e2a\u51fd\u6570\u7684\u70b9\u3002\u7531\u4e8e\u52a0\u4e86\u4e8c\u6b21\u9879\u53d8\u4e3a\u5f3a\u51f8\uff0c\u56e0\u6b64\u8be5\u51fd\u6570\u6709\u552f\u4e00\u7684\u6700\u5c0f\u503c\u3002</p> <p>Define proximal mapping: $$ \\operatorname{prox}{h, t}(x)=\\underset{z}{\\operatorname{argmin}} \\frac{1}{2 t}|x-z|+h(z) $$}^{2</p> <p>Stanford \u7684 \u8bfe\u4ef6 \u4e2d\u7ed9\u4e86\u5728\u7ea6\u675f\u6761\u4ef6\u4e0b\u7684\u4f8b\u5b50\uff1a\u76f4\u89c2\u7406\u89e3\uff0c\u901a\u8fc7\u8fd1\u7aef\u7b97\u5b50\uff0c\u5c06\u89e3\u7ea6\u675f\u5728 x \u9644\u8fd1\uff1b\u800c\u5176\u53e6\u4e00\u4e2a\u7ffb\u8bd1 \u6295\u5f71\uff0c\u5219\u53ef\u7406\u89e3\u4e3a\u5bf9\u4e8e\u5728\u5b9a\u4e49\u57df\u4e4b\u5916\u7684\u70b9\uff0c\u901a\u8fc7\u8fd9\u4e00\u7b97\u5b50\u5c06\u5176\u4f18\u5316\u5230\u9760\u8fd1\u7684\u8fb9\u754c\u4e0a\u3002</p> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#proximal-gradient-descent_1","title":"Proximal gradient descent","text":"<p>\u7406\u89e3\u4e86\u300c\u8fd1\u7aef\u7b97\u5b50\u300d\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u6765\u770b\u4e0b\u9762\u7684\u300c\u8fd1\u7aef\u68af\u5ea6\u4e0b\u964d\u300d\uff0c\u53ef\u4ee5\u76f4\u89c2\u7406\u89e3\uff1a\u5728\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e00\u6b21\u90fd\u5148\u4f18\u5316\u53ef\u5bfc\u51fd\u6570 g\uff0c\u7136\u540e\u518d\u501f\u52a9 prox \u7b97\u5b50\u4f18\u5316\u4e0d\u53ef\u5bfc\u7684\u51fd\u6570 h\u3002</p> <p>Proximal gradient descent: choose initialize x^{(0)}, repeat: $$ x^{(k)}=\\operatorname{prox}{h, t\\right)\\right), \\quad k=1,2,3, \\ldots $$}}\\left(x^{(k-1)}-t_{k} \\nabla g\\left(x^{(k-1)</p> <p>To make this update step look familiar, can rewrite it as $$ x^{(k)}=x^{(k-1)}-t_{k} \\cdot G_{t_{k}}\\left(x^{(k-1)}\\right) $$ where G_{t} is the generalized gradient of f, $$ G_{t}(x)=\\frac{x-\\operatorname{prox}_{h, t}(x-t \\nabla g(x))}{t} $$</p> <p>What good did this do?</p> <p>You have a right to be suspicious \u2026 may look like we just swapped one minimization problem for another</p> <p>Key point is that \\operatorname{prox}_{h, t}(\\cdot) has a closed-form for many important functions h. Note:</p> <ul> <li>Mapping \\operatorname{prox}_{h, t}(\\cdot) doesn\u2019t depend on g at all, only on h</li> <li>Smooth part g can be complicated, we only need to compute its gradients</li> </ul> <p>Convergence analysis: will be in terms of the number of iterations, and each iteration evaluates \\operatorname{prox}_{h, t}(\\cdot) once (this can be cheap or expensive, depending on h )</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-ista-lasso","title":"Example: ISTA / lasso","text":"<p>prox GD \u4f3c\u4e4e\u7528\u5728\u89e3 lasso \u8fd9\u6837\u7684\u60e9\u7f5a\u9879\u633a\u6709\u7528\u7684\uff08\u4e0a\u9762 Stanford \u8bfe\u4ef6\uff09\u3002\u6ce8\u610f\u8fd9\u91cc 1\u8303\u6570\u7ecf\u8fc7 prox \u64cd\u4f5c\u6b63\u662f\u5f97\u5230\u4e86 \u8f6f\u9608\u503c\u51fd\u6570\u3002</p> <p>Given y \\in \\mathbb{R}^{n}, X \\in \\mathbb{R}^{n \\times p}, recall the lasso criterion: $$ f(\\beta)=\\underbrace{\\frac{1}{2}|y-X \\beta|{2}^{2}}+\\underbrace{\\lambda|\\beta|{1}} $$ Proximal mapping is now $$ \\begin{aligned} \\operatorname{prox}{t}(\\beta) &amp;=\\underset{z}{\\operatorname{argmin}} \\frac{1}{2 t}|\\beta-z|+\\lambda|z|}^{2{1} \\ &amp;=S(\\beta) \\end{aligned} $$ where S_{\\lambda}(\\beta) is the soft-thresholding operator, \u8f6f\u9608\u503c\u51fd\u6570 $$ \\left[S_{\\lambda}(\\beta)\\right]{i}= \\begin{cases}\\beta $$}-\\lambda &amp; \\text { if } \\beta_{i}&gt;\\lambda \\ 0 &amp; \\text { if }-\\lambda \\leq \\beta_{i} \\leq \\lambda, \\quad i=1, \\ldots, n \\ \\beta_{i}+\\lambda &amp; \\text { if } \\beta_{i}&lt;-\\lambda\\end{cases</p> <p>Recall \\nabla g(\\beta)=-X^{T}(y-X \\beta), hence proximal gradient update is: $$ \\beta^{+}=S_{\\lambda t}\\left(\\beta+t X^{T}(y-X \\beta)\\right) $$ Often called the iterative soft-thresholding algorithm (ISTA). { } Very simple algorithm \uff08Beck and Teboulle (2008), \u201cA fast iterative shrinkage-thresholding algorithm for linear inverse problems\u201d\uff09</p> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#backtracking-line-search_1","title":"Backtracking line search","text":"<p>Backtracking for prox gradient descent works similar as before (in gradient descent), but operates on g and not f</p> <p>Choose parameter 0&lt;\\beta&lt;1. At each iteration, start at t=t_{\\text {init }}, and while $$ g\\left(x-t G_{t}(x)\\right)&gt;g(x)-t \\nabla g(x)^{T} G_{t}(x)+\\frac{t}{2}\\left|G_{t}(x)\\right|_{2}^{2} $$ shrink t=\\beta t, for some 0&lt;\\beta&lt;1. Else perform proximal gradient update (Alternative formulations exist that require less computation, i.e., fewer calls to prox)</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#stochastic-gradient-descent","title":"Stochastic gradient descent","text":"<p>Consider minimizing an average of functions $$ \\min {x} \\frac{1}{m} \\sum(x) $$ As }^{m} f_{i\\nabla \\sum_{i=1}^{m} f_{i}(x)=\\sum_{i=1}^{m} \\nabla f_{i}(x), gradient descent would repeat: $$ x^{(k)}=x^{(k-1)}-t_{k} \\cdot \\frac{1}{m} \\sum_{i=1}^{m} \\nabla f_{i}\\left(x^{(k-1)}\\right), \\quad k=1,2,3, \\ldots $$ In comparison, stochastic gradient descent or SGD (or incremental gradient descent) repeats: $$ x^{(k)}=x^{(k-1)}-t_{k} \\cdot \\nabla f_{i_{k}}\\left(x^{(k-1)}\\right), \\quad k=1,2,3, \\ldots $$ where i_{k} \\in\\{1, \\ldots, m\\} is some chosen index at iteration k</p> <p>Two rules for choosing index i_{k} at iteration k :</p> <ul> <li>Randomized rule: choose i_{k} \\in\\{1, \\ldots, m\\} uniformly at random</li> <li>Cyclic rule: choose i_{k}=1,2, \\ldots, m, 1,2, \\ldots, m, \\ldots</li> </ul> <p>Randomized rule is more common in practice. For randomized rule, note that $$ \\mathbb{E}\\left[\\nabla f_{i_{k}}(x)\\right]=\\nabla f(x) $$ so we can view SGD as using an unbiased estimate of the gradient at each step Main appeal of SGD:</p> <ul> <li>Iteration cost is independent of m (number of functions)</li> <li>Can also be a big savings in terms of memory useage</li> </ul> <p>SGD \u76f8\u8f83\u4e8e GD \u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u6210\u5206\u51fd\u6570\u6765\u4f18\u5316\u3002\u4f18\u52bf\uff1a1. \u4f8b\u5982\u5728 LM \u573a\u666f\u4e0b\u6837\u672c\u91cf\u592a\u5927\u7684\u95ee\u9898\uff1b2. \u51cf\u5c0f\u5185\u5b58\u5f00\u9500\u3002</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#duality-in-linear-programs","title":"Duality in Linear Programs","text":"<ul> <li>Dualit y in g eneral LPs</li> <li>\u4f8b\u5b50: Max \ufb02ow and min cut</li> <li>Second take on dualit y</li> <li>\u4f8b\u5b50: Matrix g ames</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#duality-for-general-form-lp","title":"Duality for general form LP","text":"<p>Given c \\in \\mathbb{R}^{n}, A \\in \\mathbb{R}^{m \\times n}, b \\in \\mathbb{R}^{m}, G \\in \\mathbb{R}^{r \\times n}, h \\in \\mathbb{R}^{r} :</p> <p></p> <p>Explanation: for any u and v \\geq 0, and x primal feasible, $$ \\begin{aligned} &amp; u^{T}(A x-b)+v^{T}(G x-h) \\leq 0 \\ \\Longleftrightarrow &amp;\\left(-A^{T} u-G^{T} v\\right)^{T} x \\geq-b^{T} u-h^{T} v \\end{aligned} $$ So if c=-A^{T} u-G^{T} v, we get a bound on primal optimal value</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-max-flow-and-min-cut","title":"Example: max flow and min cut","text":"<p>\u7565</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#duality-in-general-programs","title":"Duality in General Programs","text":"<ul> <li>Lagrange dual function</li> <li>Lagrange dual problem</li> <li>Weak and strong duality</li> <li>Preview of duality uses</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lagrangian","title":"Lagrangian","text":"<p>Consider general minimization problem $$ \\begin{array}{ll} \\min {x} &amp; f(x) \\ \\text { subject to } &amp; h(x) \\leq 0, i=1, \\ldots, m \\ &amp; \\ell_{j}(x)=0, j=1, \\ldots, r \\end{array} $$ Need not be convex, but of course we will pay special attention to convex case We define the Lagrangian as $$ L(x, u, v)=f(x)+\\sum_{i=1}^{m} u_{i} h_{i}(x)+\\sum_{j=1}^{r} v_{j} \\ell_{j}(x) $$ New variables u \\in \\mathbb{R}^{m}, v \\in \\mathbb{R}^{r}, with u \\geq 0( else L(x, u, v)=-\\infty)</p> <p>\u5b9a\u4e49 Lagrangian \u7684\u610f\u4e49: \u5b83\u4fdd\u8bc1\u4e86 f \u7684\u4e0b\u754c. \u5728\u7cfb\u6570\u5408\u6cd5\u7684\u60c5\u51b5\u4e0b, \u5bf9\u4e8e\u6bcf\u4e00\u4e2a feasible \u70b9 x \u5747\u6ee1\u8db3 L \\le f.</p> <p>Important property: for any u \\geq 0 and v, f(x) \\geq L(x, u, v) at each feasible x Why? For feasible x, $$ L(x, u, v)=f(x)+\\sum_{i=1}^{m} u_{i} \\underbrace{h_{i}(x)}{\\leq 0}+\\sum \\leq f(x) $$}^{r} v_{j} \\underbrace{\\ell_{j}(x)}_{=0</p> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lagrange-dual-function","title":"Lagrange dual function","text":"<p>Let C denote primal feasible set, f^{\\star} denote primal optimal value. Minimizing L(x, u, v) over all x gives a lower bound: $$ f^{\\star} \\geq \\min {x \\in C} L(x, u, v) \\geq \\min L(x, u, v):=g(u, v) $$ We call g(u, v) the Lagrange dual function, and it gives a lower bound on f^{\\star} for any u \\geq 0 and v , called dual feasible u, v</p> <p>\u7531\u4e8e Lagrangian \u7684\u6027\u8d28, \u653e\u5f00 x \u7684\u53ef\u884c\u57df\u9650\u5236, \u5c06 Lagrangian \u770b\u4f5c\u662f\u7cfb\u6570\u7684\u51fd\u6570, \u5373\u5f97\u5230\u4e86 Lagrange dual function, \u53ef\u77e5\u5728 dual feasible \u8303\u56f4\u5185, \u8fd9\u4e00\u5bf9\u5076\u51fd\u6570\u7684\u4e5f\u662f f \u7684\u4e0b\u754c.</p> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-quadratic-program","title":"Example: quadratic program","text":"<p>Consider quadratic program: $$ \\begin{array}{ll} \\min {x} &amp; \\frac{1}{2} x^{T} Q x+c^{T} x \\ \\text { subject to } &amp; A x=b, x \\geq 0 \\end{array} $$ where Q \\succ 0. Lagrangian: $$ L(x, u, v)=\\frac{1}{2} x^{T} Q x+c^{T} x-u^{T} x+v^{T}(A x-b) $$ Lagrange dual function: $$ g(u, v)=\\min v $$ For any } L(x, u, v)=-\\frac{1}{2}\\left(c-u+A^{T} v\\right)^{T} Q^{-1}\\left(c-u+A^{T} v\\right)-b^{Tu \\geq 0 and any v, this lower bounds primal optimal value f^{\\star}</p> <p>\u5982\u679c\u5c06 Q \u62d3\u5c55\u5230\u534a\u6b63\u5b9a\u7684\u60c5\u51b5:</p> <p>Same problem $$ \\begin{array}{cc} \\min _{x} &amp; \\frac{1}{2} x^{T} Q x+c^{T} x \\ \\text { subject to } &amp; A x=b, x \\geq 0 \\end{array} $$ but now Q \\succeq 0. Lagrangian: $$ L(x, u, v)=\\frac{1}{2} x^{T} Q x+c^{T} x-u^{T} x+v^{T}(A x-b) $$ Lagrange dual function: $$ g(u, v)= \\begin{cases}-\\frac{1}{2}\\left(c-u+A^{T} v\\right)^{T} Q^{+}\\left(c-u+A^{T} v\\right)-b^{T} v &amp; \\ &amp; \\text { if } c-u+A^{T} v \\perp \\operatorname{null}(Q) \\ -\\infty &amp; \\text { otherwise }\\end{cases} $$ where Q^{+} denotes generalized inverse of Q. For any u \\geq 0, v, and c-u+A^{T} v \\perp \\operatorname{null}(Q), g(u, v) is a nontrivial lower bound on f^{\\star}</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lagrange-dual-problem","title":"Lagrange dual problem","text":"<p>\u7531\u4e8e\u4e0a\u9762\u6240\u5b9a\u4e49\u7684 Lagrange dual function \u7684\u6027\u8d28(\u5728\u7cfb\u6570\u53d6\u4efb\u610f\u503c\u7684\u60c5\u51b5\u4e0b\u5747\u4e3a f \u7684\u4e0b\u754c), \u53ef\u4ee5\u5f97\u5230\u5bf9\u5076\u95ee\u9898: \u8ba1\u7b97 Lagrange dual function \u7684\u6700\u5927\u503c.</p> <p>Given primal problem $$ \\begin{array}{ll} \\min {x} &amp; f(x) \\ \\text { subject to } &amp; h(x) \\leq 0, i=1, \\ldots, m \\ &amp; \\ell_{j}(x)=0, j=1, \\ldots, r \\end{array} $$ Our dual function g(u, v) satisfies f^{\\star} \\geq g(u, v) for all u \\geq 0 and v. Hence best lower bound: maximize g(u, v) over dual feasible u, v, yielding Lagrange dual problem: $$ \\begin{array}{ll} \\max_{u, v} &amp; g(u, v) \\ \\text { subject to } &amp; u \\geq 0 \\end{array} $$ Key property, called weak duality: if dual optimal value is g^{\\star}, then $$ f^{\\star} \\geq g^{\\star} $$ Note that this always holds (even if primal problem is nonconvex) \u5bf9\u5076\u95ee\u9898\u7684\u6700\u5927\u503c\u603b\u5c0f\u4e8e\u539f\u95ee\u9898\u7684\u6700\u5c0f\u503c, \u4e5f\u5373\u300c\u5f31\u5bf9\u5076\u6027\u300d, \u8fd9\u4e00\u7ed3\u8bba\u5373\u4f7f\u539f\u95ee\u9898\u975e\u51f8\u4e5f\u6210\u7acb; \u5e76\u4e14, \u7531\u4e8e\u8fd9\u91cc\u7684\u7ea6\u675f\u6761\u4ef6\u90fd\u662f\u7ebf\u6027, \u5176 pointwise maximum \u4e5f\u4e0d\u6539\u53d8, \u56e0\u6b64\u5bf9\u5076\u95ee\u9898\u603b\u662f\u4e00\u4e2a\u51f8\u4f18\u5316\u95ee\u9898(\u5bf9\u5076\u51fd\u6570\u4e3a\u51f9\u51fd\u6570)</p> <p>Another key property: the dual problem is a convex optimization problem (as written, it is a concave maximization problem)</p> <p>Again, this is always true (even when primal problem is not convex) By definition: $$ \\begin{aligned} g(u, v) &amp;=\\min {x}\\left{f(x)+\\sum(x)\\right} \\ &amp;=-\\underbrace{\\max_{x}\\left{-f(x)-\\sum_{i=1}^{m} u_{i} h_{i}(x)-\\sum_{j=1}^{r} v_{j} \\ell_{j}(x)\\right}}_{\\text {pointwise maximum of convex functions in }(u, v)} \\end{aligned} $$ That is, }^{m} u_{i} h_{i}(x)+\\sum_{j=1}^{r} v_{j} \\ell_{jg is concave in (u, v), and u \\geq 0 is a convex constraint, so dual problem is a concave maximization problem</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-nonconvex-quartic-minimization","title":"Example: nonconvex quartic minimization","text":"<p>\u4e8b\u5b9e\u4e0a\u8be5\u95ee\u9898\u7684\u5bf9\u5076\u95ee\u9898\u6709\u663e\u5f0f\u89e3, \u4f46\u662f\u5f62\u5f0f\u975e\u5e38\u590d\u6742; \u4f46\u57fa\u4e8e\u5bf9\u5076\u95ee\u9898\u7684\u6027\u8d28, \u6211\u4eec\u53ef\u7acb\u5373\u77e5\u9053\u5bf9\u5076\u51fd\u6570\u662f concave \u7684.</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#strong-duality","title":"Strong duality","text":"<p>Recall that we always have f^{\\star} \\geq g^{\\star} (weak duality). On the other hand, in some problems we have observed that actually $$ f^{\\star}=g^{\\star} $$ which is called</p> <p>Slater\u2019s condition: if the primal is a convex problem (i.e., f and h_{1}, \\ldots, h_{m} are convex, \\ell_{1}, \\ldots, \\ell_{r} are affine), and there exists at least one strictly feasible x \\in \\mathbb{R}^{n}, meaning $$ h_{1}(x)&lt;0, \\ldots, h_{m}(x)&lt;0 \\text { and } \\ell_{1}(x)=0, \\ldots, \\ell_{r}(x)=0 $$ then strong duality holds</p> <p>Refinement: actually only need strict inequalities for non-affine h_{i}</p> <p>Slater\u2019s condition \u6307\u7684\u662f: \u5982\u679c\u5b58\u5728\u53ef\u884c\u89e3, \u4f7f\u5f97\u6240\u6709\u7684\u4e0d\u7b49\u5f0f\u7ea6\u675f\u90fd\u4e25\u683c\u6ee1\u8db3, \u5219\u6b64\u65f6\u5f3a\u5bf9\u5076\u6210\u7acb.</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#lps-back-to-where-we-started","title":"LPs: back to where we started","text":"<p>\u5bf9\u4e8e\u7ebf\u6027\u89c4\u5212\u95ee\u9898\u800c\u8a00,</p> <p>For linear programs:</p> <ul> <li>Easy to check that the dual of the dual LP is the primal LP</li> <li>Refined version of Slater\u2019s condition: strong duality holds for an LP if it is feasible</li> <li>Apply same logic to its dual LP: strong duality holds if it is feasible</li> <li>Hence strong duality holds for LPs, except when both primal and dual are infeasible</li> </ul> <p>In other words, we nearly always have strong duality for LPs</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-support-vector-machine-dual","title":"Example: support vector machine dual","text":"<p>Given y \\in\\{-1,1\\}^{n}, X \\in \\mathbb{R}^{n \\times p}, rows x_{1}, \\ldots x_{n}, recall the support vector machine or SVM problem: $$ \\begin{array}{ll} \\min {\\beta, \\beta|\\beta|}, \\xi} &amp; \\frac{1}{2{2}^{2}+C \\sum \\ \\text { subject to } &amp; \\xi_{i} \\geq 0, i=1, \\ldots, n \\ &amp; y_{i}\\left(x_{i}^{T} \\beta+\\beta_{0}\\right) \\geq 1-\\xi_{i}, i=1, \\ldots, n \\end{array} $$}^{n} \\xi_{i</p> <p>Introducing dual variables v, w \\geq 0, we form the Lagrangian: $$ \\begin{aligned} L\\left(\\beta, \\beta_{0}, \\xi, v, w\\right)=\\frac{1}{2}|\\beta|{2}^{2}+C &amp; \\sum+\\ &amp; \\sum_{i=1}^{n} w_{i}\\left(1-\\xi_{i}-y_{i}\\left(x_{i}^{T} \\beta+\\beta_{0}\\right)\\right) \\end{aligned} $$}^{n} \\xi_{i}-\\sum_{i=1}^{n} v_{i} \\xi_{i</p> <p>Minimizing over \\beta, \\beta_{0}, \\xi gives Lagrange dual function: $$ g(v, w)= \\begin{cases}-\\frac{1}{2} w^{T} \\tilde{X} \\tilde{X}^{T} w+1^{T} w &amp; \\text { if } w=C 1-v, w^{T} y=0 \\ -\\infty &amp; \\text { otherwise }\\end{cases} $$ for \\tilde{X}=\\operatorname{diag}(y) X. Thus SVM dual, eliminating slack variable v : $$ \\begin{array}{lc} \\max_{w} &amp; -\\frac{1}{2} w^{T} \\tilde{X} \\tilde{X}^{T} w+1^{T} w \\ \\text { subject to } &amp; 0 \\leq w \\leq C 1, w^{T} y=0 \\end{array} $$ Check: Slater\u2019s condition is satisfied, and we have strong duality. Further, from study of SVMs, might recall that at optimality $$ \\beta=\\tilde{X}^{T} w $$ This is not a coincidence, as we\u2019ll see via the KKT conditions</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#duality-gap","title":"Duality gap","text":"<p>Given primal feasible x and dual feasible u, v, the quantity $$ f(x)-g(u, v) $$ is called the duality gap between x and u, v. Note that $$ f(x)-f^{\\star} \\leq f(x)-g(u, v) $$ so if the duality gap is zero, then x is primal optimal (and similarly, u, v are dual optimal)</p> <p>Also from an algorithmic viewpoint, provides a stopping criterion: if f(x)-g(u, v) \\leq \\epsilon, then we are guaranteed that f(x)-f^{\\star} \\leq \\epsilon Very useful, especially in conjunction with iterative methods \u2026 more dual uses in coming lectures</p> <p>\u603b\u7ed3\u4e00\u4e0b:</p> <ul> <li>\u5bf9\u4e8e\u4e00\u4e2a\u5e26\u7ea6\u675f\u7684\u4f18\u5316\u95ee\u9898, \u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49 Lagrange \u51fd\u6570, \u5728\u4e00\u5b9a\u7684\u7cfb\u6570\u53ef\u884c\u57df\u4e0b, \u53d6 x \u7684\u6700\u5c0f\u503c, \u5373\u5f97\u5230 Lagrage dual function;</li> <li>\u5728\u7cfb\u6570\u7684\u53ef\u884c\u57df\u5185\u6c42 Lagrange \u5bf9\u5076\u51fd\u6570\u7684\u6700\u5927\u503c, \u5373\u4e3a\u5bf9\u5076\u95ee\u9898 dual problem</li> <li>\u4e00\u4e9b\u6027\u8d28:<ul> <li>\u5bf9\u5076\u95ee\u9898\u603b\u662f\u51f8\u7684 (\u5373\u5bf9\u5076\u51fd\u6570\u662f\u51f9\u51fd\u6570)</li> <li>weak duality: \u5bf9\u5076\u95ee\u9898\u7684\u89e3\u603b\u662f\u539f\u95ee\u9898\u89e3\u7684\u4e0b\u754c</li> <li>Slater\u6761\u4ef6: \u5bf9\u4e8e\u51f8\u51fd\u6570\u7ea6\u675f, \u5f53\u5b58\u5728 x \u4f7f\u5f97\u7ea6\u675f\u6761\u4ef6\u4e25\u683c\u6210\u7acb\u65f6, \u5f3a\u5bf9\u5076\u6027\u6210\u7acb</li> </ul> </li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#kkt-karush-kuhn-tucker-conditions","title":"KKT, Karush-Kuhn-Tucker Conditions","text":"<p>KKT \u6761\u4ef6\u662f\u975e\u7ebf\u6027\u89c4\u5212\u9886\u57df\u4e2d\u6700\u91cd\u8981\u7684\u7406\u8bba\u6210\u679c\u4e4b\u4e00\uff0c\u662f\u786e\u5b9a\u67d0\u70b9\u662f\u6700\u4f18\u70b9\u7684\u4e00\u9636\u5fc5\u8981\u6761\u4ef6\uff0c\u53ea\u8981\u662f\u6700\u4f18\u70b9\u5c31\u4e00\u5b9a\u6ee1\u8db3\u8fd9\u4e2a\u6761\u4ef6\uff0c\u4f46\u662f\u4e00\u822c\u6765\u8bf4\u4e0d\u662f\u5145\u5206\u6761\u4ef6\uff0c\u56e0\u6b64\u6ee1\u8db3\u8fd9\u4e2a\u70b9\u7684\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u70b9\u3002\u4f46\u5bf9\u4e8e\u51f8\u4f18\u5316\u800c\u8a00\uff0cKKT\u6761\u4ef6\u662f\u6700\u4f18\u70b9\u7684\u5145\u8981\u6761\u4ef6\u3002[\u6ce8\u610f\u8fd9\u91cc\u7684\u7ed3\u8bba\u5e94\u8be5\u662f\u57fa\u4e8e\u5bfc\u6570\u5f62\u5f0f, \u800c\u4e0b\u9762\u7684\u5145\u5206\u6027\u5fc5\u8981\u6027\u8ba8\u8bba\u597d\u50cf\u662f\u57fa\u4e8e\u6b21\u5fae\u5206\u7684; \u6b64\u65f6\u7684\u7ed3\u8bba\u53d8\u4e3a, KKT\u6761\u4ef6\u603b\u662f\u5145\u5206\u7684, \u800c\u5f53\u5f3a\u5bf9\u5076\u6210\u7acb\u7684\u60c5\u51b5\u4e0b, KKT\u6761\u4ef6\u662f\u5fc5\u8981\u7684].</p> <p>\u53c2\u89c1</p> <ul> <li>wiki: https://en.wikipedia.org/wiki/Karush%E2%80%93Kuhn%E2%80%93Tucker_conditions</li> <li>\u7b80\u5355\u4ecb\u7ecd, \u4ece\u7b49\u5f0f\u7ea6\u675f\u7684 Lagrange\u4e58\u6570\u6cd5 \u8bb2\u8d77\u5f88\u6e05\u695a Karush-Kuhn-Tucker (KKT)\u6761\u4ef6</li> <li>KKT \u516c\u5f0f\u7406\u89e3/\u63a8\u5bfc \u771f\u6b63\u7406\u89e3\u62c9\u683c\u6717\u65e5\u4e58\u5b50\u6cd5\u548c KKT \u6761\u4ef6 </li> </ul> <p>\u5927\u7eb2</p> <ul> <li>KKT conditions</li> <li>\u4f8b\u5b50</li> <li>Constrained and Lagrange forms</li> <li>Uniqueness with l_1 penalties</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#karush-kuhn-tucker-conditions","title":"Karush-Kuhn-Tucker conditions","text":"<p>Given general problem $$ \\begin{array}{ll} \\min {x} &amp; f(x) \\ \\text { subject to } &amp; h(x) \\leq 0, i=1, \\ldots, m \\ &amp; \\ell_{j}(x)=0, j=1, \\ldots, r \\end{array} $$</p> <p>The Karush-Kuhn-Tucker conditions or KKT conditions are:</p> <ul> <li>0 \\in \\partial_{x}\\left(f(x)+\\sum_{i=1}^{m} u_{i} h_{i}(x)+\\sum_{j=1}^{r} v_{j} \\ell_{j}(x)\\right) \\quad (stationarity)</li> <li>u_{i} \\cdot h_{i}(x)=0 for all i (complementary slackness)</li> <li>h_{i}(x) \\leq 0, \\ell_{j}(x)=0 for all i, j (primal feasibility)</li> <li>u_{i} \\geq 0 for all i (dual feasibility)</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#necessity","title":"Necessity","text":"<p>\u5fc5\u8981\u6027: \u5f53\u5f3a\u5bf9\u5076\u6210\u7acb\u7684\u65f6\u5019(Slater\u2019s condition), \u8981\u8bc1\u660eKKT\u6761\u4ef6\u4e00\u5b9a\u6210\u7acb.</p> <p>Let x^{\\star} and u^{\\star}, v^{\\star} be primal and dual solutions with zero duality gap (strong duality holds, e.g., under Slater\u2019s condition). Then $$ \\begin{aligned} f\\left(x^{\\star}\\right) &amp;=g\\left(u^{\\star}, v^{\\star}\\right) \\ &amp;=\\min {x} f(x)+\\sum(x) \\ &amp; \\leq f\\left(x^{\\star}\\right)+\\sum_{i=1}^{m} u_{i}^{\\star} h_{i}\\left(x^{\\star}\\right)+\\sum_{j=1}^{r} v_{j}^{\\star} \\ell_{j}\\left(x^{\\star}\\right) \\ &amp; \\leq f\\left(x^{\\star}\\right) \\end{aligned} $$ In other words, all these inequalities are actually equalities}^{m} u_{i}^{\\star} h_{i}(x)+\\sum_{j=1}^{r} v_{j}^{\\star} \\ell_{j</p> <p>Two things to learn from this:</p> <ul> <li>The point x^{\\star} minimizes L\\left(x, u^{\\star}, v^{\\star}\\right) over x \\in \\mathbb{R}^{n}. Hence the subdifferential of L\\left(x, u^{\\star}, v^{\\star}\\right) must contain 0 at x=x^{\\star} -this is exactly the stationarity condition</li> <li>We must have \\sum_{i=1}^{m} u_{i}^{\\star} h_{i}\\left(x^{\\star}\\right)=0, and since each term here is \\leq 0, this implies u_{i}^{\\star} h_{i}\\left(x^{\\star}\\right)=0 for every i-this is exactly complementary slackness \u4e92\u8865\u677e\u5f1b\u6761\u4ef6</li> </ul> <p>Primal and dual feasibility hold by virtue of optimality. Therefore:</p> <p>If x^{\\star} and u^{\\star}, v^{\\star} are primal and dual solutions, with zero duality gap, then x^{\\star}, u^{\\star}, v^{\\star} satisfy the KKT conditions</p> <p>(Note that this statement assumes nothing a priori about convexity of our problem, i.e., of f, h_{i}, \\ell_{j} )</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#sufficiency","title":"Sufficiency","text":"<p>\u5145\u5206\u6027: \u5fc5\u7136\u6210\u7acb? \u6ce8\u610f\u8fd9\u91cc\u7528\u7684\u662f\u6b21\u5fae\u5206\u7684\u5f62\u5f0f.</p> <p>If there exists x^{\\star}, u^{\\star}, v^{\\star} that satisfy the KKT conditions, then $$ \\begin{aligned} g\\left(u^{\\star}, v^{\\star}\\right) &amp;=f\\left(x^{\\star}\\right)+\\sum_{i=1}^{m} u_{i}^{\\star} h_{i}\\left(x^{\\star}\\right)+\\sum_{j=1}^{r} v_{j}^{\\star} l_{j}\\left(x^{\\star}\\right) \\ &amp;=f\\left(x^{\\star}\\right) \\end{aligned} $$ where the first equality holds from stationarity, and the second holds from complementary slackness</p> <p>Therefore the duality gap is zero (and x^{\\star} and u^{\\star}, v^{\\star} are primal and dual feasible) so x^{\\star} and u^{\\star}, v^{\\star} are primal and dual optimal. Hence, we\u2019ve shown:</p> <p>If x^{\\star} and u^{\\star}, v^{\\star} satisfy the KKT conditions, then x^{\\star} and u^{\\star}, v^{\\star} are primal and dual solutions</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#putting-it-together","title":"Putting it together","text":"<p>In summary, KKT conditions are equivalent to zero duality gap:</p> <ul> <li>always sufficient</li> <li>necessary under strong duality</li> </ul> <p>For a problem with strong duality (e.g., assume Slater\u2019s condition: convex problem and there exists x strictly satisfying nonaffine inequality contraints),</p> <p>x^{\\star} and u^{\\star}, v^{\\star} are primal and dual solutions \\Longleftrightarrow x^{\\star} and u^{\\star}, v^{\\star} satisfy the KKT conditions</p> <p>(Warning, concerning the stationarity condition: for a differentiable function f, we cannot use \\partial f(x)=\\{\\nabla f(x)\\} unless f is convex!)</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-quadratic-with-equality-constraints","title":"Example: quadratic with equality constraints","text":"<p>Consider for Q \\succeq 0, $$ \\begin{array}{ll} \\min _{x} &amp; \\frac{1}{2} x^{T} Q x+c^{T} x \\ \\text { subject to } &amp; A x=0 \\end{array} $$ (For example, this corresponds to Newton step for the constrained problem \\min_{x} f(x) subject to A x=b )</p> <p>Convex problem, no inequality constraints, so by KKT conditions: x is a solution if and only if $$ \\left[\\begin{array}{cc} Q &amp; A^{T} \\ A &amp; 0 \\end{array}\\right]\\left[\\begin{array}{l} x \\ u \\end{array}\\right]=\\left[\\begin{array}{c} -c \\ 0 \\end{array}\\right] $$ for some u. Linear system combines stationarity, primal feasibility (complementary slackness and dual feasibility are vacuous)</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-water-filling","title":"Example: water-filling","text":"<p>Example from B \\&amp; V page 245: consider problem $$ \\begin{array}{lc} \\min {x} &amp; -\\sum\\right) \\ \\text { subject to } &amp; x \\geq 0,1^{T} x=1 \\end{array} $$ Information theory: think of }^{n} \\log \\left(\\alpha_{i}+x_{i\\log \\left(\\alpha_{i}+x_{i}\\right) as communication rate of i th channel. KKT conditions: $$ \\begin{gathered} -1 /\\left(\\alpha_{i}+x_{i}\\right)-u_{i}+v=0, \\quad i=1, \\ldots, n \\ u_{i} \\cdot x_{i}=0, \\quad i=1, \\ldots, n, \\quad x \\geq 0, \\quad 1^{T} x=1, \\quad u \\geq 0 \\end{gathered} $$ Eliminate u : $$ \\begin{gathered} 1 /\\left(\\alpha_{i}+x_{i}\\right) \\leq v, \\quad i=1, \\ldots, n \\ x_{i}\\left(v-1 /\\left(\\alpha_{i}+x_{i}\\right)\\right)=0, \\quad i=1, \\ldots, n, \\quad x \\geq 0, \\quad 1^{T} x=1 \\end{gathered} $$</p> <p>Can argue directly stationarity and complementary slackness imply</p> <p>x_{i}=\\left\\{\\begin{array}{ll}1 / v-\\alpha_{i} &amp; \\text { if } v&lt;1 / \\alpha_{i} \\\\ 0 &amp; \\text { if } v \\geq 1 / \\alpha_{i}\\end{array}=\\max \\left\\{0,1 / v-\\alpha_{i}\\right\\}, \\quad i=1, \\ldots, n\\right. Still need x to be feasible, i.e., 1^{T} x=1, and this gives $$ \\sum^{n} \\max \\left{0,1 / v-\\alpha_{i}\\right}=1 $$</p> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#example-support-vector-machines","title":"Example: support vector machines","text":"<p>Given y \\in\\{-1,1\\}^{n}, and X \\in \\mathbb{R}^{n \\times p}, the support vector machine problem is: $$ \\begin{array}{ll} \\min {\\beta, \\beta|\\beta|}, \\xi} &amp; \\frac{1}{2{2}^{2}+C \\sum \\ \\text { subject to } &amp; \\xi_{i} \\geq 0, i=1, \\ldots, n \\ &amp; y_{i}\\left(x_{i}^{T} \\beta+\\beta_{0}\\right) \\geq 1-\\xi_{i}, i=1, \\ldots, n \\end{array} $$ Introduce dual variables }^{n} \\xi_{iv, w \\geq 0. KKT stationarity condition: $$ 0=\\sum_{i=1}^{n} w_{i} y_{i}, \\quad \\beta=\\sum_{i=1}^{n} w_{i} y_{i} x_{i}, \\quad w=C 1-v $$ Complementary slackness: $$ v_{i} \\xi_{i}=0, w_{i}\\left(1-\\xi_{i}-y_{i}\\left(x_{i}^{T} \\beta+\\beta_{0}\\right)\\right)=0, \\quad i=1, \\ldots, n $$</p> <p>Hence at optimality we have \\beta=\\sum_{i=1}^{n} w_{i} y_{i} x_{i}, and w_{i} is nonzero only if y_{i}\\left(x_{i}^{T} \\beta+\\beta_{0}\\right)=1-\\xi_{i}. Such points i are called the support points</p> <ul> <li>For support point i, if \\xi_{i}=0, then x_{i} lies on edge of margin, and w_{i} \\in(0, C];</li> <li> <p>For support point i, if \\xi_{i} \\neq 0, then x_{i} lies on wrong side of margin, and w_{i}=C</p> </li> <li> <p>KKT conditions do not really give us a way to find solution, but gives a better understanding</p> </li> <li>In fact, we can use this to screen away non-support points before performing optimization</li> </ul> <p></p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#constrained-and-lagrange-forms","title":"Constrained and Lagrange forms","text":"<p>Often in statistics and machine learning we\u2019ll switch back and forth between constrained form, where t \\in \\mathbb{R} is a tuning parameter, $$ \\min {x} f(x) \\text { subject to } h(x) \\leq t \\tag{C} $$ and Lagrange form, where \\lambda \\geq 0 is a tuning parameter, $$ \\min $$ and claim these are equivalent. Is this true (assuming convex } f(x)+\\lambda \\cdot h(x) \\tag{Lf, h )?</p> <ul> <li>(C) to (L) : if (C) is strictly feasible, then strong duality holds, and there exists \\lambda \\geq 0 (dual solution) such that any solution x^{\\star} in (C) minimizes $$ f(x)+\\lambda \\cdot(h(x)-t) $$ so x^{\\star} is also a solution in (\\mathrm{L})</li> <li>(\\mathrm{L}) to (\\mathrm{C}) : if x^{\\star} is a solution in (\\mathrm{L}), then the KKT conditions for (C) are satisfied by taking t=h\\left(x^{\\star}\\right), so x^{\\star} is a solution in (C)</li> </ul> <p>Conclusion: $$ \\begin{aligned} &amp;\\bigcup_{\\lambda \\geq 0}{\\text { solutions in }(\\mathrm{L})} \\subseteq \\bigcup_{t}{\\text { solutions in }(\\mathrm{C})} \\ &amp;\\bigcup_{\\lambda \\geq 0}{\\text { solutions in }(\\mathrm{L})} \\quad \\supseteq \\bigcup_{\\begin{array}{c} t \\text { such that } (C) \\ \\text { is strictly feasible } \\end{array}} \\end{aligned} {\\text { solutions in }(\\mathrm{C})} $$ This is nearly a perfect equivalence. Note: when the only value of t that leads to a feasible but not strictly feasible constraint set is t=0, then we do get perfect equivalence</p> <p>For example, if h \\geq 0, and problems (C), (L) are feasible for t \\geq 0, \\lambda \\geq 0, respectively, then we do get perfect equivalence</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#_9","title":"\u7565\u8fc7","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#back-to-duality","title":"Back to duality: \u5229\u7528\u5bf9\u5076\u95ee\u9898\u6c42\u89e3\u539f\u95ee\u9898","text":"<ul> <li>\u5047\u5982\u4e00\u4e2a\u95ee\u9898\u6ee1\u8db3\u5f3a\u5bf9\u5076, \u90a3\u4e48 x^{\\prime}, u^{\\prime}, v^{\\prime} \u662f\u539f\u95ee\u9898\u548c\u5bf9\u5076\u95ee\u9898\u7684\u6700\u4f18\u89e3 \\longleftrightarrow x^{\\prime}, u^{\\prime}, v^{\\prime} \u6ee1\u8db3KKT\u6761\u4ef6\u3002</li> <li>\u56e0\u6b64\u901a\u8fc7\u5bf9\u5076\u95ee\u9898\u6c42\u5f97 u^{\\prime}, v^{\\prime} \u540e\uff0c\u4ee3\u5165 KKT \u6761\u4ef6\u5373\u53ef\u6c42\u51fa x^{\\prime} \u3002</li> </ul> <p>A key use of duality: under strong duality, can characterize primal solutions from dual solutions</p> <p>Recall that under strong duality, the KKT conditions are necessary for optimality. Given dual solutions u^{\\star}, v^{\\star}, any primal solution x^{\\star} satisfies the stationarity condition $$ 0 \\in \\partial f\\left(x^{\\star}\\right)+\\sum_{i=1}^{m} u_{i}^{\\star} \\partial h_{i}\\left(x^{\\star}\\right)+\\sum_{j=1}^{r} v_{i}^{\\star} \\partial \\ell_{j}\\left(x^{\\star}\\right) $$ In other words, x^{\\star} solves \\min _{x} L\\left(x, u^{\\star}, v^{\\star}\\right) In particular, if this is satisfied uniquely (above problem has unique minimizer), then corresponding point must be the primal solution \\ldots very useful when dual is easier to solve than primal</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#duality-uses-and-correspondences","title":"Duality Uses and Correspondences","text":"<ul> <li>Dual norms</li> <li>Conjugate functions</li> <li>Dual cones</li> <li>Dual tricks and subtleties</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#uses-of-duality","title":"Uses of duality","text":"<p>Two key uses of duality:</p> <ul> <li>For x primal feasible and u, v dual feasible, $$ f(x)-f\\left(x^{\\star}\\right) \\leq f(x)-g(u, v) $$ Right-hand side is called duality gap. Note that a zero duality gap implies optimality. Also, the duality gap can be used as a stopping criterion in algorithms</li> <li>Under strong duality, given dual optimal u^{\\star}, v^{\\star} , any primal solution x^{\\star} solves $$ \\min _{x} L\\left(x, u^{\\star}, v^{\\star}\\right) $$ (i.e., satisfies the stationarity condition). This can be used to characterize or compute primal solutions from dual solution</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#when-is-dual-easier","title":"When is dual easier?","text":"<p>Key facts about primal-dual relationship (some covered here, some later):</p> <ul> <li>Dual has complementary number of variables: recall, number of primal constraints</li> <li>Dual involves complementary norms: \\|\\cdot\\| becomes \\|\\cdot\\|_{*}</li> <li>Dual has \u201cidentical\u201d smoothness: L / m (Lipschitz constant of gradient by strong convexity parameter) is unchanged between f and its conjugate f^{*}</li> <li>Dual can \u201cshift\u201d linear transformations between terms \u2026 this leads to key idea: dual decomposition</li> </ul>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#solving-the-primal-via-the-dual","title":"Solving the primal via the dual","text":"<p>An important consequence of stationarity: under strong duality, given a dual solution u^{\\star}, v^{\\star}, any primal solution x^{\\star} solves $$ \\min {x} f(x)+\\sum(x) $$ Often, solutions of this unconstrained problem can be expressed explicitly, giving an explicit }^{m} u_{i}^{\\star} h_{i}(x)+\\sum_{j=1}^{r} v_{j}^{\\star} l_{jcharacterization of primal solutions from dual solutions</p> <p>Furthermore, suppose the solution of this problem is unique; then it must be the primal solution x^{\\star}</p> <p>This can be very helpful when the dual is easier to solve than the primal</p> <p>For example, consider: $$ \\min {x} \\sum x=b $$ where each }^{n} f_{i}\\left(x_{i}\\right) \\quad \\text { subject to } a^{Tf_{i}\\left(x_{i}\\right)=\\frac{1}{2} c_{i} x_{i}^{2}( smooth and strictly convex ). Dual function: $$ \\begin{aligned} g(v) &amp;=\\min {x} \\sum x\\right) \\ &amp;=b v+\\sum_{i=1}^{n} \\min_{x_{i}}\\left{f_{i}\\left(x_{i}\\right)-a_{i} v x_{i}\\right} \\ &amp;=b v-\\sum_{i=1}^{n} f_{i}^{}^{n} f_{i}\\left(x_{i}\\right)+v\\left(b-a^{T}\\left(a_{i} v\\right) \\end{aligned} $$ where each f_{i}^{*}(y)=\\frac{1}{2 c_{i}} y^{2} , called the conjugate* of f_{i}</p> <p>Therefore the dual problem is $$ \\max {v} b v-\\sum^{}^{n} f_{i}\\left(a_{i} v\\right) \\quad \\Longleftrightarrow \\min {v} \\sum^{}^{n} f_{i}\\left(a_{i} v\\right)-b v $$ This is a convex minimization problem with scalar variable-much easier to solve than primal</p> <p>Given v^{\\star} , the primal solution x^{\\star} solves $$ \\min {x} \\sum\\right) $$ Strict convexity of each }^{n}\\left(f_{i}\\left(x_{i}\\right)-a_{i} v^{\\star} x_{if_{i} implies that this has a unique solution, namely x^{\\star}, which we compute by solving f_{i}^{\\prime}\\left(x_{i}\\right)=a_{i} v^{\\star} for each i. This gives x_{i}^{\\star}=a_{i} v^{\\star} / c_{i}</p>"},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#dual-norms","title":"Dual norms \u7565","text":""},{"location":"stat/optimization-%E5%87%B8%E4%BC%98%E5%8C%96/#admm","title":"ADMM","text":"<ul> <li>\u5206\u5e03\u5f0f\u8ba1\u7b97\u3001\u7edf\u8ba1\u5b66\u4e60\u4e0eADMM\u7b97\u6cd5 https://joegaotao.github.io/2014/02/11/admm-stat-compute/</li> </ul>"}]}